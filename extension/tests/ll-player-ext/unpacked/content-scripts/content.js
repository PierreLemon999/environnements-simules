var content=(function(){"use strict";var eh,um,uc,cm;function P3(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var YE={trace:10,debug:20,info:30,warn:40,error:50,fatal:60},LI={};function QE(t){return typeof t=="string"?YE[t.toLowerCase()]:t}function XE(t,e){return XE=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},XE(t,e)}function M3(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function JE(t,e,n){return JE=M3()?Reflect.construct:function(r,i,o){var l=[null];l.push.apply(l,i);var c=new(Function.bind.apply(r,l));return o&&XE(c,o.prototype),c},JE.apply(null,arguments)}function Nh(t){if(t==null)return t;if(Array.isArray(t))return t.slice();if(typeof t=="object"){var e={};return Object.keys(t).forEach(function(n){e[n]=t[n]}),e}return t}function ew(t){return t===void 0?"undefined":t===null?"null":Array.isArray(t)?"[ "+t.map(function(e){return ew(e)}).join(", ")+" ]":typeof t=="object"?JSON.stringify(t):typeof t=="function"?"[Function: "+t.name+"]":typeof t=="boolean"||typeof t=="number"?t:"'"+t.toString()+"'"}function Oh(t){if(typeof t!="string"){for(var e=new Array(arguments.length),n=0;n<arguments.length;n++)e[n]=ew(arguments[n]);return e.join(" ")}for(var r=/%[sdj%]/g,i=1,o=arguments,l=o.length,c=String(t).replace(r,function(g){if(g==="%%")return"%";if(i>=l)return g;switch(g){case"%s":return String(o[i++]);case"%d":return Number(o[i++]);case"%j":try{return JSON.stringify(o[i++])}catch{return"[Circular]"}default:return g}}),f=o[i];i<l;f=o[++i])c+=f===null||typeof f!="object"?" "+f:" "+ew(f);return c}function k3(t,e){var n=t.split(`
`);n[0]&&n[0].indexOf("call-stack-error")>=0&&n.shift();var r=n[e],i=null;if(r){var o=/^\s*(at|.*@)\s*(.+)?$/.exec(r);i=Array.isArray(o)&&o[2]?o[2]:r}return i}Object.keys(YE).forEach(function(t){LI[YE[t]]=t});var tw={};function nw(t,e){if(e){if(tw[e])return;tw[e]=!0}console.error(t+`
`)}function F3(t){return tw[t]}function $3(){var t=[];return function(e,n){return n&&typeof n=="object"?t.indexOf(n)!==-1?"[Circular]":(t.push(n),n):n}}var U3=(function(){function t(){}return t.prototype.write=function(e){e.level<30?console.log(e):e.level<40?console.info(e):e.level<50?console.warn(e):console.error(e),e.err&&e.err.stack&&console.error(e.err.stack),e.obj&&console.log(e.obj)},t})(),Lh=(function(){function t(n,r,i){var o,l,c,f,g=this;if(!(this instanceof t))return new t(n,r);if(r!==void 0&&(o=n,n=r,!(o instanceof t)))throw new TypeError("invalid Logger creation: do not pass a second arg");if(!n)throw new TypeError("options (object) is required");if(o){if(n.name)throw new TypeError("invalid options.name: child cannot set logger name")}else if(!n.name)throw new TypeError("options.name (string) is required");if(n.stream&&n.streams)throw new TypeError('cannot mix "streams" and "stream" options');if(n.streams&&!Array.isArray(n.streams))throw new TypeError("invalid options.streams: must be an array");if(n.serializers&&(typeof n.serializers!="object"||Array.isArray(n.serializers)))throw new TypeError("invalid options.serializers: must be an object");if(o&&i){this._level=o._level,this.streams=o.streams,this.serializers=o.serializers,this.src=o.src,l=this.fields={};var y=Object.keys(o.fields);for(f=0;f<y.length;f++)l[c=y[f]]=o.fields[c];var h=Object.keys(n);for(f=0;f<h.length;f++)l[c=h[f]]=n[c]}else{if(o){for(this._level=o._level,this.streams=[],f=0;f<o.streams.length;f++){var p=Nh(o.streams[f]);this.streams.push(p)}this.serializers=Nh(o.serializers),this.src=o.src,this.fields=Nh(o.fields),n.level&&this.level(n.level)}else this._level=Number.POSITIVE_INFINITY,this.streams=[],this.serializers=null,this.src=!1,this.fields={};n.stream?this.addStream({type:"stream",stream:n.stream,level:n.level}):n.streams?n.streams.forEach(function(E){g.addStream(E,n.level)}):o&&n.level?this.level(n.level):o||this.addStream({type:"raw",stream:new U3,level:n.level}),n.serializers&&this.addSerializers(n.serializers),n.src&&(this.src=!0),delete(l=Nh(n)).stream,delete l.level,delete l.streams,delete l.serializers,delete l.src,this.serializers&&this._applySerializers(l),Object.keys(l).forEach(function(E){g.fields[E]=l[E]})}}var e=t.prototype;return e.addStream=function(n,r){r===void 0&&(r=30),(n=Nh(n)).type="raw",n.level=QE(n.level||r),n.level<this._level&&(this._level=n.level),this.streams.push(n),delete this.haveNonRawStreams},e.addSerializers=function(n){var r=this;this.serializers||(this.serializers={}),Object.keys(n).forEach(function(i){var o=n[i];if(typeof o!="function")throw new TypeError(Oh('invalid serializer for "%s" field: must be a function',i));r.serializers[i]=o})},e.child=function(n,r){return new this.constructor(this,n||{},r)},e.level=function(n){if(n===void 0)return this._level;for(var r=QE(n),i=this.streams.length,o=0;o<i;o++)this.streams[o].level=r;this._level=r},e.levels=function(n,r){if(n===void 0)return this.streams.map(function(g){return g.level});var i;if(typeof n=="number"){if((i=this.streams[n])===void 0)throw new Error("invalid stream index: "+n)}else{for(var o=this.streams.length,l=0;l<o;l++){var c=this.streams[l];if(c.name===n){i=c;break}}if(!i)throw new Error(Oh('no stream with name "%s"',n))}if(r===void 0)return i.level;var f=QE(r);i.level=f,f<this._level&&(this._level=f)},e._applySerializers=function(n,r){var i=this;Object.keys(this.serializers).forEach(function(o){if(!(n[o]===void 0||r&&r[o]))try{n[o]=i.serializers[o](n[o])}catch(l){nw(Oh(`bunyan: ERROR: Exception thrown from the "%s" Bunyan serializer. This should never happen. This is a bugin that serializer function.
%s`,o,l.stack||l)),n[o]=Oh('(Error in Bunyan log "%s" serializer broke field. See stderr for details.)',o)}})},e._emit=function(n,r){var i,o;if(this.haveNonRawStreams===void 0){for(this.haveNonRawStreams=!1,i=0;i<this.streams.length;i++)if(!this.streams[i].raw){this.haveNonRawStreams=!0;break}}if(r||this.haveNonRawStreams)try{o=JSON.stringify(n,$3())+`
`}catch(g){var l=g.stack.split(/\n/g,2).join(`
`);nw('bunyan: ERROR: Exception in `JSON.stringify(rec)`. You can install the "safe-json-stringify" module to have Bunyan fallback to safer stringification. Record:\n'+(function(y,h){return h||(h="    "),h+y.split(/\r?\n/g).join(`
`+h)})(Oh(`%s
%s`,n,g.stack)),l),o=Oh(`(Exception in JSON.stringify(rec): %j. See stderr for details.)
`,g.message)}if(r)return o;var c=n.level;for(i=0;i<this.streams.length;i++){var f=this.streams[i];f.level<=c&&f.stream.write(n)}return o},t})();function Yp(t){return function(){var e=this;function n(l){var c;l[0]instanceof Error?(r={err:e.serializers&&e.serializers.err?e.serializers.err(l[0]):PI.err(l[0])},c={err:!0},i=l.length===1?[r.err.message]:Array.prototype.slice.call(l,1)):typeof l[0]!="object"&&l[0]!==null||Array.isArray(l[0])?(r=null,i=Array.prototype.slice.call(l)):(r=l[0],i=l.length===1&&r.err&&r.err instanceof Error?[r.err.message]:Array.prototype.slice.call(l,1));var f=Nh(e.fields);f.level=t;var g=r?Nh(r):null;if(g&&(e.serializers&&e._applySerializers(g,c),Object.keys(g).forEach(function(h){f[h]=g[h]})),f.levelName=LI[t],f.msg=i.length?Oh.apply(e,i):"",f.time||(f.time=new Date),e.src&&!f.src)try{throw new Error("call-stack-error")}catch(h){var y=h.stack?k3(h.stack,2):"";y||F3("src")||nw("Unable to determine src line info","src"),f.src=y||""}return f.v=1,f}var r=null,i=arguments,o=null;if(arguments.length===0)return this._level<=t;this._level>t||(o=n(i),this._emit(o))}}function DI(t){var e=t.stack||t.toString();if(t.cause&&typeof t.cause=="function"){var n=t.cause();n&&(e+=`
Caused by: `+DI(n))}return e}Lh.prototype.trace=Yp(10),Lh.prototype.debug=Yp(20),Lh.prototype.info=Yp(30),Lh.prototype.warn=Yp(40),Lh.prototype.error=Yp(50),Lh.prototype.fatal=Yp(60);var PI={err:function(t){return t&&t.stack?{message:t.message,name:t.name,stack:DI(t),code:t.code,signal:t.signal}:t}};function B3(){return JE(Lh,[].slice.call(arguments))}var Z3=10,MI=20,j3=30,V3=40,z3=50,kI=60,FI={trace:10,debug:20,info:30,warn:40,error:50,fatal:60},$I={};Object.keys(FI).forEach(function(t){$I[FI[t]]=t});const UI={levels:{trace:"color: DeepPink",debug:"color: GoldenRod",info:"color: DarkTurquoise",warn:"color: Purple",error:"color: Crimson",fatal:"color: Black"},def:"color: DimGray",msg:"color: SteelBlue",extra:"color: Tomato",src:"color: DimGray; font-style: italic; font-size: 0.9em"};class H3{constructor({logByLevel:e=!1,css:n=UI}={}){this.logByLevel=e,this.css=n}write(e){const{level:n,childName:r,name:i,src:o,time:l,msg:c,obj:f,err:g,v:y,levelName:h,...p}=e;let E,A;const _=this.css.def,I=this.css.msg,C=this.css.src,v=this.css.extra,T=r!=null?i+"/"+r:i;let S=$I[n];const O=(Array(6-S.length).join(" ")+S).toUpperCase();this.logByLevel?(n===Z3||n===MI?S="log":n===kI&&(S="error"),A=console[S]??console.log):A=console.log,n<MI?E=this.css.levels.trace:n<j3?E=this.css.levels.debug:n<V3?E=this.css.levels.info:n<z3?E=this.css.levels.warn:n<kI?E=this.css.levels.error:E=this.css.levels.fatal;const $=(ne,D)=>Array(D+1-(ne+"").length).join("0")+ne,V=p.length===0?"":Object.keys(p).reduce((ne,D)=>ne+`
%c%s: %c%s`,"")+`
`,B=[];B.push(`[LemonLearning] [%s:%s:%s:%s] %c%s%c: %s: %c%s ${V} ${o!=null&&o.length>0?"%c%s":""}`),B.push($(l.getHours(),2)),B.push($(l.getMinutes(),2)),B.push($(l.getSeconds(),2)),B.push($(l.getMilliseconds(),4)),B.push(E),B.push(O),B.push(_),B.push(T),B.push(I),B.push(c);for(const ne in p)B.push(_),B.push(ne),B.push(v),B.push(JSON.stringify(p[ne]));o!=null&&o.length>0&&(B.push(C),B.push(o)),f!=null&&(B.push(`
`),B.push(f)),G3()?(g?.message!=null&&(B.push(`
`),B.push(g.message)),g?.stack!=null&&g.stack!==""&&(B.push(`
`),B.push(g.stack))):g?.stack!=null&&g.stack!==""?(B.push(`
`),B.push(g.stack)):g?.message!=null&&(B.push(`
`),B.push(g.message)),A.apply(console,B)}static getDefaultCss(){return UI}}function G3(){return navigator.userAgent.includes("Firefox")}var BI=Object.prototype.hasOwnProperty;function rw(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&rw(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(BI.call(t,n)&&++r&&!BI.call(e,n)||!(n in e)||!rw(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const q3=new Error("request for lock canceled");var W3=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function c(y){try{g(r.next(y))}catch(h){l(h)}}function f(y){try{g(r.throw(y))}catch(h){l(h)}}function g(y){y.done?o(y.value):i(y.value).then(c,f)}g((r=r.apply(t,e||[])).next())})};class K3{constructor(e,n=q3){this._value=e,this._cancelError=n,this._queue=[],this._weightedWaiters=[]}acquire(e=1,n=0){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return new Promise((r,i)=>{const o={resolve:r,reject:i,weight:e,priority:n},l=ZI(this._queue,c=>n<=c.priority);l===-1&&e<=this._value?this._dispatchItem(o):this._queue.splice(l+1,0,o)})}runExclusive(e){return W3(this,arguments,void 0,function*(n,r=1,i=0){const[o,l]=yield this.acquire(r,i);try{return yield n(o)}finally{l()}})}waitForUnlock(e=1,n=0){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return this._couldLockImmediately(e,n)?Promise.resolve():new Promise(r=>{this._weightedWaiters[e-1]||(this._weightedWaiters[e-1]=[]),Y3(this._weightedWaiters[e-1],{resolve:r,priority:n})})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(e){this._value=e,this._dispatchQueue()}release(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);this._value+=e,this._dispatchQueue()}cancel(){this._queue.forEach(e=>e.reject(this._cancelError)),this._queue=[]}_dispatchQueue(){for(this._drainUnlockWaiters();this._queue.length>0&&this._queue[0].weight<=this._value;)this._dispatchItem(this._queue.shift()),this._drainUnlockWaiters()}_dispatchItem(e){const n=this._value;this._value-=e.weight,e.resolve([n,this._newReleaser(e.weight)])}_newReleaser(e){let n=!1;return()=>{n||(n=!0,this.release(e))}}_drainUnlockWaiters(){if(this._queue.length===0)for(let e=this._value;e>0;e--){const n=this._weightedWaiters[e-1];n&&(n.forEach(r=>r.resolve()),this._weightedWaiters[e-1]=[])}else{const e=this._queue[0].priority;for(let n=this._value;n>0;n--){const r=this._weightedWaiters[n-1];if(!r)continue;const i=r.findIndex(o=>o.priority<=e);(i===-1?r:r.splice(0,i)).forEach((o=>o.resolve()))}}}_couldLockImmediately(e,n){return(this._queue.length===0||this._queue[0].priority<n)&&e<=this._value}}function Y3(t,e){const n=ZI(t,r=>e.priority<=r.priority);t.splice(n+1,0,e)}function ZI(t,e){for(let n=t.length-1;n>=0;n--)if(e(t[n]))return n;return-1}var Q3=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function c(y){try{g(r.next(y))}catch(h){l(h)}}function f(y){try{g(r.throw(y))}catch(h){l(h)}}function g(y){y.done?o(y.value):i(y.value).then(c,f)}g((r=r.apply(t,e||[])).next())})};class X3{constructor(e){this._semaphore=new K3(1,e)}acquire(){return Q3(this,arguments,void 0,function*(e=0){const[,n]=yield this._semaphore.acquire(1,e);return n})}runExclusive(e,n=0){return this._semaphore.runExclusive(()=>e(),1,n)}isLocked(){return this._semaphore.isLocked()}waitForUnlock(e=0){return this._semaphore.waitForUnlock(1,e)}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}}const D_=globalThis.browser?.runtime?.id==null?globalThis.chrome:globalThis.browser,$l=J3();function J3(){const t={local:P_("local"),session:P_("session"),sync:P_("sync"),managed:P_("managed")},e=_=>{const I=t[_];if(I==null){const C=Object.keys(t).join(", ");throw Error(`Invalid area "${_}". Options: ${C}`)}return I},n=_=>{const I=_.indexOf(":"),C=_.substring(0,I),v=_.substring(I+1);if(v==null)throw Error(`Storage key should be in the form of "area:key", but received "${_}"`);return{driverArea:C,driverKey:v,driver:e(C)}},r=_=>_+"$",i=(_,I)=>{const C={..._};return Object.entries(I).forEach(([v,T])=>{T==null?delete C[v]:C[v]=T}),C},o=(_,I)=>_??I??null,l=_=>typeof _=="object"&&!Array.isArray(_)?_:{},c=async(_,I,C)=>{const v=await _.getItem(I);return o(v,C?.fallback??C?.defaultValue)},f=async(_,I)=>{const C=r(I),v=await _.getItem(C);return l(v)},g=async(_,I,C)=>{await _.setItem(I,C??null)},y=async(_,I,C)=>{const v=r(I),T=l(await _.getItem(v));await _.setItem(v,i(T,C))},h=async(_,I,C)=>{if(await _.removeItem(I),C?.removeMeta){const v=r(I);await _.removeItem(v)}},p=async(_,I,C)=>{const v=r(I);if(C==null)await _.removeItem(v);else{const T=l(await _.getItem(v));[C].flat().forEach(S=>delete T[S]),await _.setItem(v,T)}},E=(_,I,C)=>_.watch(I,C);return{getItem:async(_,I)=>{const{driver:C,driverKey:v}=n(_);return await c(C,v,I)},getItems:async _=>{const I=new Map,C=new Map,v=[];_.forEach(S=>{let O,$;typeof S=="string"?O=S:"getValue"in S?(O=S.key,$={fallback:S.fallback}):(O=S.key,$=S.options),v.push(O);const{driverArea:V,driverKey:B}=n(O),ne=I.get(V)??[];I.set(V,ne.concat(B)),C.set(O,$)});const T=new Map;return await Promise.all(Array.from(I.entries()).map(async([S,O])=>{(await t[S].getItems(O)).forEach(V=>{const B=`${S}:${V.key}`,ne=C.get(B),D=o(V.value,ne?.fallback??ne?.defaultValue);T.set(B,D)})})),v.map(S=>({key:S,value:T.get(S)}))},getMeta:async _=>{const{driver:I,driverKey:C}=n(_);return await f(I,C)},getMetas:async _=>{const I=_.map(T=>{const S=typeof T=="string"?T:T.key,{driverArea:O,driverKey:$}=n(S);return{key:S,driverArea:O,driverKey:$,driverMetaKey:r($)}}),C=I.reduce((T,S)=>(T[S.driverArea]??=[],T[S.driverArea].push(S),T),{}),v={};return await Promise.all(Object.entries(C).map(async([T,S])=>{const O=await D_.storage[T].get(S.map($=>$.driverMetaKey));S.forEach($=>{v[$.key]=O[$.driverMetaKey]??{}})})),I.map(T=>({key:T.key,meta:v[T.key]}))},setItem:async(_,I)=>{const{driver:C,driverKey:v}=n(_);await g(C,v,I)},setItems:async _=>{const I={};_.forEach(C=>{const{driverArea:v,driverKey:T}=n("key"in C?C.key:C.item.key);I[v]??=[],I[v].push({key:T,value:C.value})}),await Promise.all(Object.entries(I).map(async([C,v])=>{await e(C).setItems(v)}))},setMeta:async(_,I)=>{const{driver:C,driverKey:v}=n(_);await y(C,v,I)},setMetas:async _=>{const I={};_.forEach(C=>{const{driverArea:v,driverKey:T}=n("key"in C?C.key:C.item.key);I[v]??=[],I[v].push({key:T,properties:C.meta})}),await Promise.all(Object.entries(I).map(async([C,v])=>{const T=e(C),S=v.map(({key:B})=>r(B));console.log(C,S);const O=await T.getItems(S),$=Object.fromEntries(O.map(({key:B,value:ne})=>[B,l(ne)])),V=v.map(({key:B,properties:ne})=>{const D=r(B);return{key:D,value:i($[D]??{},ne)}});await T.setItems(V)}))},removeItem:async(_,I)=>{const{driver:C,driverKey:v}=n(_);await h(C,v,I)},removeItems:async _=>{const I={};_.forEach(C=>{let v,T;typeof C=="string"?v=C:"getValue"in C?v=C.key:"item"in C?(v=C.item.key,T=C.options):(v=C.key,T=C.options);const{driverArea:S,driverKey:O}=n(v);I[S]??=[],I[S].push(O),T?.removeMeta&&I[S].push(r(O))}),await Promise.all(Object.entries(I).map(async([C,v])=>{await e(C).removeItems(v)}))},clear:async _=>{await e(_).clear()},removeMeta:async(_,I)=>{const{driver:C,driverKey:v}=n(_);await p(C,v,I)},snapshot:async(_,I)=>{const v=await e(_).snapshot();return I?.excludeKeys?.forEach(T=>{delete v[T],delete v[r(T)]}),v},restoreSnapshot:async(_,I)=>{await e(_).restoreSnapshot(I)},watch:(_,I)=>{const{driver:C,driverKey:v}=n(_);return E(C,v,I)},unwatch(){Object.values(t).forEach(_=>{_.unwatch()})},defineItem:(_,I)=>{const{driver:C,driverKey:v}=n(_),{version:T=1,migrations:S={}}=I??{};if(T<1)throw Error("Storage item version cannot be less than 1. Initial versions should be set to 1, not 0.");const O=async()=>{const D=r(v),[{value:X},{value:ve}]=await C.getItems([v,D]);if(X==null)return;const ie=ve?.v??1;if(ie>T)throw Error(`Version downgrade detected (v${ie} -> v${T}) for "${_}"`);if(ie===T)return;console.debug(`[@wxt-dev/storage] Running storage migration for ${_}: v${ie} -> v${T}`);const ye=Array.from({length:T-ie},(Me,oe)=>ie+oe+1);let Ne=X;for(const Me of ye)try{Ne=await S?.[Me]?.(Ne)??Ne}catch(oe){throw new e4(_,Me,{cause:oe})}await C.setItems([{key:v,value:Ne},{key:D,value:{...ve,v:T}}]),console.debug(`[@wxt-dev/storage] Storage migration completed for ${_} v${T}`,{migratedValue:Ne})},$=I?.migrations==null?Promise.resolve():O().catch(D=>{console.error(`[@wxt-dev/storage] Migration failed for ${_}`,D)}),V=new X3,B=()=>I?.fallback??I?.defaultValue??null,ne=()=>V.runExclusive(async()=>{const D=await C.getItem(v);if(D!=null||I?.init==null)return D;const X=await I.init();return await C.setItem(v,X),X});return $.then(ne),{key:_,get defaultValue(){return B()},get fallback(){return B()},getValue:async()=>(await $,I?.init?await ne():await c(C,v,I)),getMeta:async()=>(await $,await f(C,v)),setValue:async D=>(await $,await g(C,v,D)),setMeta:async D=>(await $,await y(C,v,D)),removeValue:async D=>(await $,await h(C,v,D)),removeMeta:async D=>(await $,await p(C,v,D)),watch:D=>E(C,v,(X,ve)=>D(X??B(),ve??B())),migrate:O}}}}function P_(t){const e=()=>{if(D_.runtime==null)throw Error(["'wxt/storage' must be loaded in a web extension environment",`
 - If thrown during a build, see https://github.com/wxt-dev/wxt/issues/371`,` - If thrown during tests, mock 'wxt/browser' correctly. See https://wxt.dev/guide/go-further/testing.html
`].join(`
`));if(D_.storage==null)throw Error("You must add the 'storage' permission to your manifest to use 'wxt/storage'");const r=D_.storage[t];if(r==null)throw Error(`"browser.storage.${t}" is undefined`);return r},n=new Set;return{getItem:async r=>(await e().get(r))[r],getItems:async r=>{const i=await e().get(r);return r.map(o=>({key:o,value:i[o]??null}))},setItem:async(r,i)=>{i==null?await e().remove(r):await e().set({[r]:i})},setItems:async r=>{const i=r.reduce((o,{key:l,value:c})=>(o[l]=c,o),{});await e().set(i)},removeItem:async r=>{await e().remove(r)},removeItems:async r=>{await e().remove(r)},clear:async()=>{await e().clear()},snapshot:async()=>await e().get(),restoreSnapshot:async r=>{await e().set(r)},watch(r,i){const o=l=>{const c=l[r];c!=null&&(rw(c.newValue,c.oldValue)||i(c.newValue??null,c.oldValue??null))};return e().onChanged.addListener(o),n.add(o),()=>{e().onChanged.removeListener(o),n.delete(o)}},unwatch(){n.forEach(r=>{e().onChanged.removeListener(r)}),n.clear()}}}class e4 extends Error{constructor(e,n,r){super(`v${n} migration failed for "${e}"`,r),this.key=e,this.version=n}}async function t4(t){return $l.getItem(await qu(t))}async function n4(t){const e=await Promise.all(t.map(async n=>qu(n)));return $l.getItems(e).then(n=>n.map((r,i)=>({key:t[i],value:r.value})))}async function r4(t){return $l.getMeta(await qu(t))}async function i4(t,e){return $l.setItem(await qu(t),e)}async function o4(t){return $l.setItems(await Promise.all(t.map(async({key:e,value:n})=>({key:await qu(e),value:n}))))}async function s4(t){return $l.removeItem(await qu(t))}async function a4(t){return $l.removeItems(await Promise.all(t.map(async e=>qu(e))))}async function l4(t,e){return $l.removeMeta(await qu(t),e)}async function u4(t,e){return $l.setMeta(await qu(t),e)}function c4(t,e){let n,r=!1;return(async()=>{const o=await qu(t);r||(n=$l.watch(o,e))})(),()=>{r=!0,n?.()}}async function f4(t,e){return $l.defineItem(await qu(t),e)}async function d4(){let t;return t===void 0&&(t=await $l.getItem("sync:test").then(()=>!0).catch(e=>{if(e.message==="Please set webextensions.storage.sync.enabled to true in about:config")return!1;throw e})),t}async function qu(t){return await d4()?t:t.replace("sync:","local:")}const Ki={...$l,getItem:t4,setItem:i4,getItems:n4,getMeta:r4,setItems:o4,removeItem:s4,removeItems:a4,removeMeta:l4,setMeta:u4,watch:c4,defineItem:f4},jI="LemonDebuggerLevel";var VI=(t=>(t.FATAL="fatal",t.ERROR="error",t.WARN="warn",t.INFO="info",t.DEBUG="debug",t.TRACE="trace",t.SILENT="silent",t))(VI||{});let iw=null;const hl=B3({name:"default",streams:[{level:"trace",stream:new H3({logByLevel:!0})}],serializers:PI,src:!0});hl.level("silent");const Re={trace:Qp,debug:Qp,info:Qp,warn:Qp,error:Qp,fatal:Qp};function Qp(){console.warn("[LemonLearning] The logger should be setup before it can be used")}async function h4(){if(Re.trace=hl.trace.bind(hl),Re.debug=hl.debug.bind(hl),Re.info=hl.info.bind(hl),Re.warn=hl.warn.bind(hl),Re.error=hl.error.bind(hl),Re.fatal=hl.fatal.bind(hl),iw===null){console.error("[LemonLearning] The logger levelStorage should never be null at that point. Cannot set the logger level");return}const t=await iw.get();t!==null&&hl.level(t)}function p4(){g4(),h4()}function g4(){iw={get:async()=>{const t=await Ki.getItem(`local:${jI}`);return typeof t=="string"&&m4(t)?t:null},set:async t=>{await Ki.setItem(`local:${jI}`,t)}}}function m4(t){return Object.values(VI).includes(t)}let ow;const y4=()=>{ow=!0},ts=()=>{if(ow===void 0)throw new Error("You must call 'initFromContentScript' or 'initFromPageScript' before calling 'isWebExtension'. This must be done in the entry file");return ow};let sw;function v4(t){sw=t}function zI(){if(sw===void 0)throw new Error("You must call 'setBackground' before calling 'isBackgroundScript'. This must be done in the entry file");return sw}p4(),y4(),v4(!1);function _ce(t){return t}const HI=globalThis.browser?.runtime?.id?globalThis.browser:globalThis.chrome,Ul=HI;var $a=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Lf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function _4(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var aw,GI;function b4(){if(GI)return aw;GI=1;var t=/^[a-z](?:[\.0-9_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*-(?:[\x2D\.0-9_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,e=function(n){return t.test(n)};return aw=e,aw}var E4=b4();const w4=Lf(E4);var T4=(t,e,n)=>new Promise((r,i)=>{var o=f=>{try{c(n.next(f))}catch(g){i(g)}},l=f=>{try{c(n.throw(f))}catch(g){i(g)}},c=f=>f.done?r(f.value):Promise.resolve(f.value).then(o,l);c((n=n.apply(t,e)).next())});function S4(t){return T4(this,null,function*(){const{name:e,mode:n="closed",css:r,isolateEvents:i=!1}=t;if(!w4(e))throw Error(`"${e}" is not a valid custom element name. It must be two words and kebab-case, with a few exceptions. See spec for more details: https://html.spec.whatwg.org/multipage/custom-elements.html#valid-custom-element-name`);const o=document.createElement(e),l=o.attachShadow({mode:n}),c=document.createElement("html"),f=document.createElement("body"),g=document.createElement("head");if(r){const y=document.createElement("style");"url"in r?y.textContent=yield fetch(r.url).then(h=>h.text()):y.textContent=r.textContent,g.appendChild(y)}return c.appendChild(g),c.appendChild(f),l.appendChild(c),i&&(Array.isArray(i)?i:["keydown","keyup","keypress"]).forEach(h=>{f.addEventListener(h,p=>p.stopPropagation())}),{parentElement:o,shadow:l,isolatedElement:f}})}const A4=Symbol("null");let I4=0;class C4 extends Map{constructor(){super(),this._objectHashes=new WeakMap,this._symbolHashes=new Map,this._publicKeys=new Map;const[e]=arguments;if(e!=null){if(typeof e[Symbol.iterator]!="function")throw new TypeError(typeof e+" is not iterable (cannot read property Symbol(Symbol.iterator))");for(const[n,r]of e)this.set(n,r)}}_getPublicKeys(e,n=!1){if(!Array.isArray(e))throw new TypeError("The keys parameter must be an array");const r=this._getPrivateKey(e,n);let i;return r&&this._publicKeys.has(r)?i=this._publicKeys.get(r):n&&(i=[...e],this._publicKeys.set(r,i)),{privateKey:r,publicKey:i}}_getPrivateKey(e,n=!1){const r=[];for(let i of e){i===null&&(i=A4);const o=typeof i=="object"||typeof i=="function"?"_objectHashes":typeof i=="symbol"?"_symbolHashes":!1;if(!o)r.push(i);else if(this[o].has(i))r.push(this[o].get(i));else if(n){const l=`@@mkm-ref-${I4++}@@`;this[o].set(i,l),r.push(l)}else return!1}return JSON.stringify(r)}set(e,n){const{publicKey:r}=this._getPublicKeys(e,!0);return super.set(r,n)}get(e){const{publicKey:n}=this._getPublicKeys(e);return super.get(n)}has(e){const{publicKey:n}=this._getPublicKeys(e);return super.has(n)}delete(e){const{publicKey:n,privateKey:r}=this._getPublicKeys(e);return!!(n&&super.delete(n)&&this._publicKeys.delete(r))}clear(){super.clear(),this._symbolHashes.clear(),this._publicKeys.clear()}get[Symbol.toStringTag](){return"ManyKeysMap"}get size(){return super.size}}function lw(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function uw(t,e,n=".",r){if(!lw(e))return uw(t,{},n,r);const i=Object.assign({},e);for(const o in t){if(o==="__proto__"||o==="constructor")continue;const l=t[o];l!=null&&(r&&r(i,o,l,n)||(Array.isArray(l)&&Array.isArray(i[o])?i[o]=[...l,...i[o]]:lw(l)&&lw(i[o])?i[o]=uw(l,i[o],(n?`${n}.`:"")+o.toString(),r):i[o]=l))}return i}function R4(t){return(...e)=>e.reduce((n,r)=>uw(n,r,"",t),{})}const x4=R4(),qI=t=>t!==null?{isDetected:!0,result:t}:{isDetected:!1},N4=t=>t===null?{isDetected:!0,result:null}:{isDetected:!1},O4=()=>({target:globalThis.document,unifyProcess:!0,detector:qI,observeConfigs:{childList:!0,subtree:!0,attributes:!0},signal:void 0,customMatcher:void 0}),L4=(t,e)=>x4(t,e),cw=new C4;function D4(t){const{defaultOptions:e}=t;return(n,r)=>{const{target:i,unifyProcess:o,observeConfigs:l,detector:c,signal:f,customMatcher:g}=L4(r,e),y=[n,i,o,l,c,f,g],h=cw.get(y);if(o&&h)return h;const p=new Promise(async(E,A)=>{if(f?.aborted)return A(f.reason);const _=new MutationObserver(async C=>{for(const v of C){if(f?.aborted){_.disconnect();break}const T=await WI({selector:n,target:i,detector:c,customMatcher:g});if(T.isDetected){_.disconnect(),E(T.result);break}}});f?.addEventListener("abort",()=>(_.disconnect(),A(f.reason)),{once:!0});const I=await WI({selector:n,target:i,detector:c,customMatcher:g});if(I.isDetected)return E(I.result);_.observe(i,l)}).finally(()=>{cw.delete(y)});return cw.set(y,p),p}}async function WI({target:t,selector:e,detector:n,customMatcher:r}){const i=r?r(e):t.querySelector(e);return await n(i)}const P4=D4({defaultOptions:O4()});function M_(t,...e){}const fw={debug:(...t)=>M_(console.debug,...t),log:(...t)=>M_(console.log,...t),warn:(...t)=>M_(console.warn,...t),error:(...t)=>M_(console.error,...t)};function M4(t,e,n){n.position!=="inline"&&(n.zIndex!=null&&(t.style.zIndex=String(n.zIndex)),t.style.overflow="visible",t.style.position="relative",t.style.width="0",t.style.height="0",t.style.display="block",e&&(n.position==="overlay"?(e.style.position="absolute",n.alignment?.startsWith("bottom-")?e.style.bottom="0":e.style.top="0",n.alignment?.endsWith("-right")?e.style.right="0":e.style.left="0"):(e.style.position="fixed",e.style.top="0",e.style.bottom="0",e.style.left="0",e.style.right="0")))}function dw(t){if(t.anchor==null)return document.body;let e=typeof t.anchor=="function"?t.anchor():t.anchor;return typeof e=="string"?e.startsWith("/")?document.evaluate(e,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue??void 0:document.querySelector(e)??void 0:e??void 0}function k4(t,e){const n=dw(e);if(n==null)throw Error("Failed to mount content script UI: could not find anchor element");switch(e.append){case void 0:case"last":n.append(t);break;case"first":n.prepend(t);break;case"replace":n.replaceWith(t);break;case"after":n.parentElement?.insertBefore(t,n.nextElementSibling);break;case"before":n.parentElement?.insertBefore(t,n);break;default:e.append(n,t);break}}function F4(t,e){let n;const r=()=>{n?.stopAutoMount(),n=void 0},i=()=>{t.mount()},o=t.remove;return{mount:i,remove:()=>{r(),t.remove()},autoMount:f=>{n&&fw.warn("autoMount is already set."),n=$4({mount:i,unmount:o,stopAutoMount:r},{...e,...f})}}}function $4(t,e){const n=new AbortController,r="explicit_stop_auto_mount",i=()=>{n.abort(r),e.onStop?.()};let o=typeof e.anchor=="function"?e.anchor():e.anchor;if(o instanceof Element)throw Error("autoMount and Element anchor option cannot be combined. Avoid passing `Element` directly or `() => Element` to the anchor.");async function l(c){let f=!!dw(e);for(f&&t.mount();!n.signal.aborted;)try{f=!!await P4(c??"body",{customMatcher:()=>dw(e)??null,detector:f?N4:qI,signal:n.signal}),f?t.mount():(t.unmount(),e.once&&t.stopAutoMount())}catch(g){if(n.signal.aborted&&n.signal.reason===r)break;throw g}}return l(o),{stopAutoMount:i}}function U4(t){let e=t,n="";const r=/(\s*@(property|font-face)[\s\S]*?{[\s\S]*?})/gm;let i;for(;(i=r.exec(t))!==null;)n+=i[1],e=e.replace(i[1],"");return{documentCss:n.trim(),shadowCss:e.trim()}}async function B4(t,e){const n=Math.random().toString(36).substring(2,15),r=[];if(e.inheritStyles||r.push("/* WXT Shadow Root Reset */ :host{all:initial !important;}"),e.css&&r.push(e.css),t.options?.cssInjectionMode==="ui"){const E=await Z4();r.push(E.replaceAll(":root",":host"))}const{shadowCss:i,documentCss:o}=U4(r.join(`
`).trim()),{isolatedElement:l,parentElement:c,shadow:f}=await S4({name:e.name,css:{textContent:i},mode:e.mode??"open",isolateEvents:e.isolateEvents});c.setAttribute("data-wxt-shadow-root","");let g;const y=()=>{if(k4(c,e),M4(c,f.querySelector("html"),e),o&&!document.querySelector(`style[wxt-shadow-root-document-styles="${n}"]`)){const E=document.createElement("style");E.textContent=o,E.setAttribute("wxt-shadow-root-document-styles",n),(document.head??document.body).append(E)}g=e.onMount(l,f,c)},h=()=>{for(e.onRemove?.(g),c.remove(),document.querySelector(`style[wxt-shadow-root-document-styles="${n}"]`)?.remove();l.lastChild;)l.removeChild(l.lastChild);g=void 0},p=F4({mount:y,remove:h},e);return t.onInvalidated(h),{shadow:f,shadowHost:c,uiContainer:l,...p,get mounted(){return g}}}async function Z4(){const t=Ul.runtime.getURL("/content-scripts/content.css");try{return await(await fetch(t)).text()}catch(e){return fw.warn(`Failed to load styles @ ${t}. Did you forget to import the stylesheet in your entrypoint?`,e),""}}var hw={exports:{}},Gm={},pw={exports:{}},wi={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KI;function j4(){if(KI)return wi;KI=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),h=Symbol.iterator;function p(Y){return Y===null||typeof Y!="object"?null:(Y=h&&Y[h]||Y["@@iterator"],typeof Y=="function"?Y:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,_={};function I(Y,Ee,Pe){this.props=Y,this.context=Ee,this.refs=_,this.updater=Pe||E}I.prototype.isReactComponent={},I.prototype.setState=function(Y,Ee){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,Ee,"setState")},I.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function C(){}C.prototype=I.prototype;function v(Y,Ee,Pe){this.props=Y,this.context=Ee,this.refs=_,this.updater=Pe||E}var T=v.prototype=new C;T.constructor=v,A(T,I.prototype),T.isPureReactComponent=!0;var S=Array.isArray,O=Object.prototype.hasOwnProperty,$={current:null},V={key:!0,ref:!0,__self:!0,__source:!0};function B(Y,Ee,Pe){var Xe,Ze={},at=null,jt=null;if(Ee!=null)for(Xe in Ee.ref!==void 0&&(jt=Ee.ref),Ee.key!==void 0&&(at=""+Ee.key),Ee)O.call(Ee,Xe)&&!V.hasOwnProperty(Xe)&&(Ze[Xe]=Ee[Xe]);var xt=arguments.length-2;if(xt===1)Ze.children=Pe;else if(1<xt){for(var ht=Array(xt),It=0;It<xt;It++)ht[It]=arguments[It+2];Ze.children=ht}if(Y&&Y.defaultProps)for(Xe in xt=Y.defaultProps,xt)Ze[Xe]===void 0&&(Ze[Xe]=xt[Xe]);return{$$typeof:t,type:Y,key:at,ref:jt,props:Ze,_owner:$.current}}function ne(Y,Ee){return{$$typeof:t,type:Y.type,key:Ee,ref:Y.ref,props:Y.props,_owner:Y._owner}}function D(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===t}function X(Y){var Ee={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(Pe){return Ee[Pe]})}var ve=/\/+/g;function ie(Y,Ee){return typeof Y=="object"&&Y!==null&&Y.key!=null?X(""+Y.key):Ee.toString(36)}function ye(Y,Ee,Pe,Xe,Ze){var at=typeof Y;(at==="undefined"||at==="boolean")&&(Y=null);var jt=!1;if(Y===null)jt=!0;else switch(at){case"string":case"number":jt=!0;break;case"object":switch(Y.$$typeof){case t:case e:jt=!0}}if(jt)return jt=Y,Ze=Ze(jt),Y=Xe===""?"."+ie(jt,0):Xe,S(Ze)?(Pe="",Y!=null&&(Pe=Y.replace(ve,"$&/")+"/"),ye(Ze,Ee,Pe,"",function(It){return It})):Ze!=null&&(D(Ze)&&(Ze=ne(Ze,Pe+(!Ze.key||jt&&jt.key===Ze.key?"":(""+Ze.key).replace(ve,"$&/")+"/")+Y)),Ee.push(Ze)),1;if(jt=0,Xe=Xe===""?".":Xe+":",S(Y))for(var xt=0;xt<Y.length;xt++){at=Y[xt];var ht=Xe+ie(at,xt);jt+=ye(at,Ee,Pe,ht,Ze)}else if(ht=p(Y),typeof ht=="function")for(Y=ht.call(Y),xt=0;!(at=Y.next()).done;)at=at.value,ht=Xe+ie(at,xt++),jt+=ye(at,Ee,Pe,ht,Ze);else if(at==="object")throw Ee=String(Y),Error("Objects are not valid as a React child (found: "+(Ee==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":Ee)+"). If you meant to render a collection of children, use an array instead.");return jt}function Ne(Y,Ee,Pe){if(Y==null)return Y;var Xe=[],Ze=0;return ye(Y,Xe,"","",function(at){return Ee.call(Pe,at,Ze++)}),Xe}function Me(Y){if(Y._status===-1){var Ee=Y._result;Ee=Ee(),Ee.then(function(Pe){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=Pe)},function(Pe){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=Pe)}),Y._status===-1&&(Y._status=0,Y._result=Ee)}if(Y._status===1)return Y._result.default;throw Y._result}var oe={current:null},Ce={transition:null},Ye={ReactCurrentDispatcher:oe,ReactCurrentBatchConfig:Ce,ReactCurrentOwner:$};function et(){throw Error("act(...) is not supported in production builds of React.")}return wi.Children={map:Ne,forEach:function(Y,Ee,Pe){Ne(Y,function(){Ee.apply(this,arguments)},Pe)},count:function(Y){var Ee=0;return Ne(Y,function(){Ee++}),Ee},toArray:function(Y){return Ne(Y,function(Ee){return Ee})||[]},only:function(Y){if(!D(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}},wi.Component=I,wi.Fragment=n,wi.Profiler=i,wi.PureComponent=v,wi.StrictMode=r,wi.Suspense=f,wi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ye,wi.act=et,wi.cloneElement=function(Y,Ee,Pe){if(Y==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Y+".");var Xe=A({},Y.props),Ze=Y.key,at=Y.ref,jt=Y._owner;if(Ee!=null){if(Ee.ref!==void 0&&(at=Ee.ref,jt=$.current),Ee.key!==void 0&&(Ze=""+Ee.key),Y.type&&Y.type.defaultProps)var xt=Y.type.defaultProps;for(ht in Ee)O.call(Ee,ht)&&!V.hasOwnProperty(ht)&&(Xe[ht]=Ee[ht]===void 0&&xt!==void 0?xt[ht]:Ee[ht])}var ht=arguments.length-2;if(ht===1)Xe.children=Pe;else if(1<ht){xt=Array(ht);for(var It=0;It<ht;It++)xt[It]=arguments[It+2];Xe.children=xt}return{$$typeof:t,type:Y.type,key:Ze,ref:at,props:Xe,_owner:jt}},wi.createContext=function(Y){return Y={$$typeof:l,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Y.Provider={$$typeof:o,_context:Y},Y.Consumer=Y},wi.createElement=B,wi.createFactory=function(Y){var Ee=B.bind(null,Y);return Ee.type=Y,Ee},wi.createRef=function(){return{current:null}},wi.forwardRef=function(Y){return{$$typeof:c,render:Y}},wi.isValidElement=D,wi.lazy=function(Y){return{$$typeof:y,_payload:{_status:-1,_result:Y},_init:Me}},wi.memo=function(Y,Ee){return{$$typeof:g,type:Y,compare:Ee===void 0?null:Ee}},wi.startTransition=function(Y){var Ee=Ce.transition;Ce.transition={};try{Y()}finally{Ce.transition=Ee}},wi.unstable_act=et,wi.useCallback=function(Y,Ee){return oe.current.useCallback(Y,Ee)},wi.useContext=function(Y){return oe.current.useContext(Y)},wi.useDebugValue=function(){},wi.useDeferredValue=function(Y){return oe.current.useDeferredValue(Y)},wi.useEffect=function(Y,Ee){return oe.current.useEffect(Y,Ee)},wi.useId=function(){return oe.current.useId()},wi.useImperativeHandle=function(Y,Ee,Pe){return oe.current.useImperativeHandle(Y,Ee,Pe)},wi.useInsertionEffect=function(Y,Ee){return oe.current.useInsertionEffect(Y,Ee)},wi.useLayoutEffect=function(Y,Ee){return oe.current.useLayoutEffect(Y,Ee)},wi.useMemo=function(Y,Ee){return oe.current.useMemo(Y,Ee)},wi.useReducer=function(Y,Ee,Pe){return oe.current.useReducer(Y,Ee,Pe)},wi.useRef=function(Y){return oe.current.useRef(Y)},wi.useState=function(Y){return oe.current.useState(Y)},wi.useSyncExternalStore=function(Y,Ee,Pe){return oe.current.useSyncExternalStore(Y,Ee,Pe)},wi.useTransition=function(){return oe.current.useTransition()},wi.version="18.3.1",wi}var YI;function gw(){return YI||(YI=1,pw.exports=j4()),pw.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QI;function V4(){if(QI)return Gm;QI=1;var t=gw(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(c,f,g){var y,h={},p=null,E=null;g!==void 0&&(p=""+g),f.key!==void 0&&(p=""+f.key),f.ref!==void 0&&(E=f.ref);for(y in f)r.call(f,y)&&!o.hasOwnProperty(y)&&(h[y]=f[y]);if(c&&c.defaultProps)for(y in f=c.defaultProps,f)h[y]===void 0&&(h[y]=f[y]);return{$$typeof:e,type:c,key:p,ref:E,props:h,_owner:i.current}}return Gm.Fragment=n,Gm.jsx=l,Gm.jsxs=l,Gm}var XI;function z4(){return XI||(XI=1,hw.exports=V4()),hw.exports}var pe=z4();const Bl={projectKey:null,companyKey:null,user:null,host:window.location.href,direct:!0,language:window.navigator.language.substring(0,2),namespace:null,ssoId:null,startConstraints:[]};class Xp{constructor(e){if(e===null||typeof e!="string")throw new Error("Token expect a string parameter for its constructor");this.token=e}}var zi;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const o={};for(const l of i)o[l]=l;return o},t.getValidEnumValues=i=>{const o=t.objectKeys(i).filter(c=>typeof i[i[c]]!="number"),l={};for(const c of o)l[c]=i[c];return t.objectValues(l)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const o=[];for(const l in i)Object.prototype.hasOwnProperty.call(i,l)&&o.push(l);return o},t.find=(i,o)=>{for(const l of i)if(o(l))return l},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,o=" | "){return i.map(l=>typeof l=="string"?`'${l}'`:l).join(o)}t.joinValues=r,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(zi||(zi={}));var mw;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(mw||(mw={}));const dr=zi.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Id=t=>{switch(typeof t){case"undefined":return dr.undefined;case"string":return dr.string;case"number":return isNaN(t)?dr.nan:dr.number;case"boolean":return dr.boolean;case"function":return dr.function;case"bigint":return dr.bigint;case"symbol":return dr.symbol;case"object":return Array.isArray(t)?dr.array:t===null?dr.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?dr.promise:typeof Map<"u"&&t instanceof Map?dr.map:typeof Set<"u"&&t instanceof Set?dr.set:typeof Date<"u"&&t instanceof Date?dr.date:dr.object;default:return dr.unknown}},Xn=zi.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),H4=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");let Wu=class C3 extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(o){return o.message},r={_errors:[]},i=o=>{for(const l of o.issues)if(l.code==="invalid_union")l.unionErrors.map(i);else if(l.code==="invalid_return_type")i(l.returnTypeError);else if(l.code==="invalid_arguments")i(l.argumentsError);else if(l.path.length===0)r._errors.push(n(l));else{let c=r,f=0;for(;f<l.path.length;){const g=l.path[f];f===l.path.length-1?(c[g]=c[g]||{_errors:[]},c[g]._errors.push(n(l))):c[g]=c[g]||{_errors:[]},c=c[g],f++}}};return i(this),r}static assert(e){if(!(e instanceof C3))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,zi.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}};Wu.create=t=>new Wu(t);const Jp=(t,e)=>{let n;switch(t.code){case Xn.invalid_type:t.received===dr.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Xn.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,zi.jsonStringifyReplacer)}`;break;case Xn.unrecognized_keys:n=`Unrecognized key(s) in object: ${zi.joinValues(t.keys,", ")}`;break;case Xn.invalid_union:n="Invalid input";break;case Xn.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${zi.joinValues(t.options)}`;break;case Xn.invalid_enum_value:n=`Invalid enum value. Expected ${zi.joinValues(t.options)}, received '${t.received}'`;break;case Xn.invalid_arguments:n="Invalid function arguments";break;case Xn.invalid_return_type:n="Invalid function return type";break;case Xn.invalid_date:n="Invalid date";break;case Xn.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:zi.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Xn.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Xn.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Xn.custom:n="Invalid input";break;case Xn.invalid_intersection_types:n="Intersection results could not be merged";break;case Xn.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Xn.not_finite:n="Number must be finite";break;default:n=e.defaultError,zi.assertNever(t)}return{message:n}};let JI=Jp;function G4(t){JI=t}function k_(){return JI}const F_=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,o=[...n,...i.path||[]],l={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let c="";const f=r.filter(g=>!!g).slice().reverse();for(const g of f)c=g(l,{data:e,defaultError:c}).message;return{...i,path:o,message:c}},q4=[];function lr(t,e){const n=k_(),r=F_({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Jp?void 0:Jp].filter(i=>!!i)});t.common.issues.push(r)}let pl=class R3{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return Yr;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const o=await i.key,l=await i.value;r.push({key:o,value:l})}return R3.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:o,value:l}=i;if(o.status==="aborted"||l.status==="aborted")return Yr;o.status==="dirty"&&e.dirty(),l.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof l.value<"u"||i.alwaysSet)&&(r[o.value]=l.value)}return{status:e.value,value:r}}};const Yr=Object.freeze({status:"aborted"}),eg=t=>({status:"dirty",value:t}),Ua=t=>({status:"valid",value:t}),yw=t=>t.status==="aborted",vw=t=>t.status==="dirty",qm=t=>t.status==="valid",Wm=t=>typeof Promise<"u"&&t instanceof Promise;function $_(t,e,n,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function eC(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}typeof SuppressedError=="function"&&SuppressedError;var xr;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(xr||(xr={}));var Km,Ym;let Fc=class{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}};const tC=(t,e)=>{if(qm(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Wu(t.common.issues);return this._error=n,this._error}}};function ci(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(l,c)=>{var f,g;const{message:y}=t;return l.code==="invalid_enum_value"?{message:y??c.defaultError}:typeof c.data>"u"?{message:(f=y??r)!==null&&f!==void 0?f:c.defaultError}:l.code!=="invalid_type"?{message:c.defaultError}:{message:(g=y??n)!==null&&g!==void 0?g:c.defaultError}},description:i}}let gi=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Id(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Id(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new pl,ctx:{common:e.parent.common,data:e.data,parsedType:Id(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Wm(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const i={common:{issues:[],async:(r=n?.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Id(e)},o=this._parseSync({data:e,path:i.path,parent:i});return tC(i,o)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Id(e)},i=this._parse({data:e,path:r.path,parent:r}),o=await(Wm(i)?i:Promise.resolve(i));return tC(r,o)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,o)=>{const l=e(i),c=()=>o.addIssue({code:Xn.custom,...r(i)});return typeof Promise<"u"&&l instanceof Promise?l.then(f=>f?!0:(c(),!1)):l?!0:(c(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Ku({schema:this,typeName:qr.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return $c.create(this,this._def)}nullable(){return Rd.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ph.create(this,this._def)}promise(){return ig.create(this,this._def)}or(e){return ry.create([this,e],this._def)}and(e){return iy.create(this,e,this._def)}transform(e){return new Ku({...ci(this._def),schema:this,typeName:qr.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new uy({...ci(this._def),innerType:this,defaultValue:n,typeName:qr.ZodDefault})}brand(){return new Ew({typeName:qr.ZodBranded,type:this,...ci(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new cy({...ci(this._def),innerType:this,catchValue:n,typeName:qr.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return ww.create(this,e)}readonly(){return fy.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}};const W4=/^c[^\s-]{8,}$/i,K4=/^[0-9a-z]+$/,Y4=/^[0-9A-HJKMNP-TV-Z]{26}$/,Q4=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,X4=/^[a-z0-9_-]{21}$/i,J4=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,e5=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,t5="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let _w;const n5=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,r5=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,i5=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nC="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",o5=new RegExp(`^${nC}$`);function rC(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function s5(t){return new RegExp(`^${rC(t)}$`)}function iC(t){let e=`${nC}T${rC(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function a5(t,e){return!!((e==="v4"||!e)&&n5.test(t)||(e==="v6"||!e)&&r5.test(t))}let tg=class O_ extends gi{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==dr.string){const o=this._getOrReturnCtx(e);return lr(o,{code:Xn.invalid_type,expected:dr.string,received:o.parsedType}),Yr}const r=new pl;let i;for(const o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),lr(i,{code:Xn.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),lr(i,{code:Xn.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){const l=e.data.length>o.value,c=e.data.length<o.value;(l||c)&&(i=this._getOrReturnCtx(e,i),l?lr(i,{code:Xn.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):c&&lr(i,{code:Xn.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")e5.test(e.data)||(i=this._getOrReturnCtx(e,i),lr(i,{validation:"email",code:Xn.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")_w||(_w=new RegExp(t5,"u")),_w.test(e.data)||(i=this._getOrReturnCtx(e,i),lr(i,{validation:"emoji",code:Xn.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")Q4.test(e.data)||(i=this._getOrReturnCtx(e,i),lr(i,{validation:"uuid",code:Xn.invalid_string,message:o.message}),r.dirty());else if(o.kind==="nanoid")X4.test(e.data)||(i=this._getOrReturnCtx(e,i),lr(i,{validation:"nanoid",code:Xn.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")W4.test(e.data)||(i=this._getOrReturnCtx(e,i),lr(i,{validation:"cuid",code:Xn.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")K4.test(e.data)||(i=this._getOrReturnCtx(e,i),lr(i,{validation:"cuid2",code:Xn.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")Y4.test(e.data)||(i=this._getOrReturnCtx(e,i),lr(i,{validation:"ulid",code:Xn.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),lr(i,{validation:"url",code:Xn.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),lr(i,{validation:"regex",code:Xn.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),lr(i,{code:Xn.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),lr(i,{code:Xn.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),lr(i,{code:Xn.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?iC(o).test(e.data)||(i=this._getOrReturnCtx(e,i),lr(i,{code:Xn.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="date"?o5.test(e.data)||(i=this._getOrReturnCtx(e,i),lr(i,{code:Xn.invalid_string,validation:"date",message:o.message}),r.dirty()):o.kind==="time"?s5(o).test(e.data)||(i=this._getOrReturnCtx(e,i),lr(i,{code:Xn.invalid_string,validation:"time",message:o.message}),r.dirty()):o.kind==="duration"?J4.test(e.data)||(i=this._getOrReturnCtx(e,i),lr(i,{validation:"duration",code:Xn.invalid_string,message:o.message}),r.dirty()):o.kind==="ip"?a5(e.data,o.version)||(i=this._getOrReturnCtx(e,i),lr(i,{validation:"ip",code:Xn.invalid_string,message:o.message}),r.dirty()):o.kind==="base64"?i5.test(e.data)||(i=this._getOrReturnCtx(e,i),lr(i,{validation:"base64",code:Xn.invalid_string,message:o.message}),r.dirty()):zi.assertNever(o);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:Xn.invalid_string,...xr.errToObj(r)})}_addCheck(e){return new O_({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...xr.errToObj(e)})}url(e){return this._addCheck({kind:"url",...xr.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...xr.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...xr.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...xr.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...xr.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...xr.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...xr.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...xr.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...xr.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(n=e?.offset)!==null&&n!==void 0?n:!1,local:(r=e?.local)!==null&&r!==void 0?r:!1,...xr.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...xr.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...xr.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...xr.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...xr.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...xr.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...xr.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...xr.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...xr.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...xr.errToObj(n)})}nonempty(e){return this.min(1,xr.errToObj(e))}trim(){return new O_({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new O_({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new O_({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}};tg.create=t=>{var e;return new tg({checks:[],typeName:qr.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...ci(t)})};function l5(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,o=parseInt(t.toFixed(i).replace(".","")),l=parseInt(e.toFixed(i).replace(".",""));return o%l/Math.pow(10,i)}let Qm=class AI extends gi{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==dr.number){const o=this._getOrReturnCtx(e);return lr(o,{code:Xn.invalid_type,expected:dr.number,received:o.parsedType}),Yr}let r;const i=new pl;for(const o of this._def.checks)o.kind==="int"?zi.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),lr(r,{code:Xn.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),lr(r,{code:Xn.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),lr(r,{code:Xn.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?l5(e.data,o.value)!==0&&(r=this._getOrReturnCtx(e,r),lr(r,{code:Xn.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),lr(r,{code:Xn.not_finite,message:o.message}),i.dirty()):zi.assertNever(o);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,xr.toString(n))}gt(e,n){return this.setLimit("min",e,!1,xr.toString(n))}lte(e,n){return this.setLimit("max",e,!0,xr.toString(n))}lt(e,n){return this.setLimit("max",e,!1,xr.toString(n))}setLimit(e,n,r,i){return new AI({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:xr.toString(i)}]})}_addCheck(e){return new AI({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:xr.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:xr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:xr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:xr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:xr.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:xr.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:xr.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:xr.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:xr.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&zi.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}};Qm.create=t=>new Qm({checks:[],typeName:qr.ZodNumber,coerce:t?.coerce||!1,...ci(t)});let Xm=class II extends gi{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==dr.bigint){const o=this._getOrReturnCtx(e);return lr(o,{code:Xn.invalid_type,expected:dr.bigint,received:o.parsedType}),Yr}let r;const i=new pl;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),lr(r,{code:Xn.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),lr(r,{code:Xn.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),lr(r,{code:Xn.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):zi.assertNever(o);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,xr.toString(n))}gt(e,n){return this.setLimit("min",e,!1,xr.toString(n))}lte(e,n){return this.setLimit("max",e,!0,xr.toString(n))}lt(e,n){return this.setLimit("max",e,!1,xr.toString(n))}setLimit(e,n,r,i){return new II({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:xr.toString(i)}]})}_addCheck(e){return new II({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:xr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:xr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:xr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:xr.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:xr.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}};Xm.create=t=>{var e;return new Xm({checks:[],typeName:qr.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...ci(t)})};let Jm=class extends gi{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==dr.boolean){const r=this._getOrReturnCtx(e);return lr(r,{code:Xn.invalid_type,expected:dr.boolean,received:r.parsedType}),Yr}return Ua(e.data)}};Jm.create=t=>new Jm({typeName:qr.ZodBoolean,coerce:t?.coerce||!1,...ci(t)});let ey=class x3 extends gi{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==dr.date){const o=this._getOrReturnCtx(e);return lr(o,{code:Xn.invalid_type,expected:dr.date,received:o.parsedType}),Yr}if(isNaN(e.data.getTime())){const o=this._getOrReturnCtx(e);return lr(o,{code:Xn.invalid_date}),Yr}const r=new pl;let i;for(const o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),lr(i,{code:Xn.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),lr(i,{code:Xn.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):zi.assertNever(o);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new x3({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:xr.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:xr.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}};ey.create=t=>new ey({checks:[],coerce:t?.coerce||!1,typeName:qr.ZodDate,...ci(t)});let U_=class extends gi{_parse(e){if(this._getType(e)!==dr.symbol){const r=this._getOrReturnCtx(e);return lr(r,{code:Xn.invalid_type,expected:dr.symbol,received:r.parsedType}),Yr}return Ua(e.data)}};U_.create=t=>new U_({typeName:qr.ZodSymbol,...ci(t)});let ty=class extends gi{_parse(e){if(this._getType(e)!==dr.undefined){const r=this._getOrReturnCtx(e);return lr(r,{code:Xn.invalid_type,expected:dr.undefined,received:r.parsedType}),Yr}return Ua(e.data)}};ty.create=t=>new ty({typeName:qr.ZodUndefined,...ci(t)});let ny=class extends gi{_parse(e){if(this._getType(e)!==dr.null){const r=this._getOrReturnCtx(e);return lr(r,{code:Xn.invalid_type,expected:dr.null,received:r.parsedType}),Yr}return Ua(e.data)}};ny.create=t=>new ny({typeName:qr.ZodNull,...ci(t)});let ng=class extends gi{constructor(){super(...arguments),this._any=!0}_parse(e){return Ua(e.data)}};ng.create=t=>new ng({typeName:qr.ZodAny,...ci(t)});let Dh=class extends gi{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ua(e.data)}};Dh.create=t=>new Dh({typeName:qr.ZodUnknown,...ci(t)});let Df=class extends gi{_parse(e){const n=this._getOrReturnCtx(e);return lr(n,{code:Xn.invalid_type,expected:dr.never,received:n.parsedType}),Yr}};Df.create=t=>new Df({typeName:qr.ZodNever,...ci(t)});let B_=class extends gi{_parse(e){if(this._getType(e)!==dr.undefined){const r=this._getOrReturnCtx(e);return lr(r,{code:Xn.invalid_type,expected:dr.void,received:r.parsedType}),Yr}return Ua(e.data)}};B_.create=t=>new B_({typeName:qr.ZodVoid,...ci(t)});let Ph=class qE extends gi{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==dr.array)return lr(n,{code:Xn.invalid_type,expected:dr.array,received:n.parsedType}),Yr;if(i.exactLength!==null){const l=n.data.length>i.exactLength.value,c=n.data.length<i.exactLength.value;(l||c)&&(lr(n,{code:l?Xn.too_big:Xn.too_small,minimum:c?i.exactLength.value:void 0,maximum:l?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(lr(n,{code:Xn.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(lr(n,{code:Xn.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((l,c)=>i.type._parseAsync(new Fc(n,l,n.path,c)))).then(l=>pl.mergeArray(r,l));const o=[...n.data].map((l,c)=>i.type._parseSync(new Fc(n,l,n.path,c)));return pl.mergeArray(r,o)}get element(){return this._def.type}min(e,n){return new qE({...this._def,minLength:{value:e,message:xr.toString(n)}})}max(e,n){return new qE({...this._def,maxLength:{value:e,message:xr.toString(n)}})}length(e,n){return new qE({...this._def,exactLength:{value:e,message:xr.toString(n)}})}nonempty(e){return this.min(1,e)}};Ph.create=(t,e)=>new Ph({type:t,minLength:null,maxLength:null,exactLength:null,typeName:qr.ZodArray,...ci(e)});function rg(t){if(t instanceof vu){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=$c.create(rg(r))}return new vu({...t._def,shape:()=>e})}else return t instanceof Ph?new Ph({...t._def,type:rg(t.element)}):t instanceof $c?$c.create(rg(t.unwrap())):t instanceof Rd?Rd.create(rg(t.unwrap())):t instanceof Cd?Cd.create(t.items.map(e=>rg(e))):t}let vu=class Mc extends gi{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=zi.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==dr.object){const g=this._getOrReturnCtx(e);return lr(g,{code:Xn.invalid_type,expected:dr.object,received:g.parsedType}),Yr}const{status:r,ctx:i}=this._processInputParams(e),{shape:o,keys:l}=this._getCached(),c=[];if(!(this._def.catchall instanceof Df&&this._def.unknownKeys==="strip"))for(const g in i.data)l.includes(g)||c.push(g);const f=[];for(const g of l){const y=o[g],h=i.data[g];f.push({key:{status:"valid",value:g},value:y._parse(new Fc(i,h,i.path,g)),alwaysSet:g in i.data})}if(this._def.catchall instanceof Df){const g=this._def.unknownKeys;if(g==="passthrough")for(const y of c)f.push({key:{status:"valid",value:y},value:{status:"valid",value:i.data[y]}});else if(g==="strict")c.length>0&&(lr(i,{code:Xn.unrecognized_keys,keys:c}),r.dirty());else if(g!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const g=this._def.catchall;for(const y of c){const h=i.data[y];f.push({key:{status:"valid",value:y},value:g._parse(new Fc(i,h,i.path,y)),alwaysSet:y in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const g=[];for(const y of f){const h=await y.key,p=await y.value;g.push({key:h,value:p,alwaysSet:y.alwaysSet})}return g}).then(g=>pl.mergeObjectSync(r,g)):pl.mergeObjectSync(r,f)}get shape(){return this._def.shape()}strict(e){return xr.errToObj,new Mc({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,o,l,c;const f=(l=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,n,r).message)!==null&&l!==void 0?l:r.defaultError;return n.code==="unrecognized_keys"?{message:(c=xr.errToObj(e).message)!==null&&c!==void 0?c:f}:{message:f}}}:{}})}strip(){return new Mc({...this._def,unknownKeys:"strip"})}passthrough(){return new Mc({...this._def,unknownKeys:"passthrough"})}extend(e){return new Mc({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Mc({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:qr.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Mc({...this._def,catchall:e})}pick(e){const n={};return zi.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Mc({...this._def,shape:()=>n})}omit(e){const n={};return zi.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Mc({...this._def,shape:()=>n})}deepPartial(){return rg(this)}partial(e){const n={};return zi.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new Mc({...this._def,shape:()=>n})}required(e){const n={};return zi.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof $c;)o=o._def.innerType;n[r]=o}}),new Mc({...this._def,shape:()=>n})}keyof(){return lC(zi.objectKeys(this.shape))}};vu.create=(t,e)=>new vu({shape:()=>t,unknownKeys:"strip",catchall:Df.create(),typeName:qr.ZodObject,...ci(e)}),vu.strictCreate=(t,e)=>new vu({shape:()=>t,unknownKeys:"strict",catchall:Df.create(),typeName:qr.ZodObject,...ci(e)}),vu.lazycreate=(t,e)=>new vu({shape:t,unknownKeys:"strip",catchall:Df.create(),typeName:qr.ZodObject,...ci(e)});let ry=class extends gi{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(o){for(const c of o)if(c.result.status==="valid")return c.result;for(const c of o)if(c.result.status==="dirty")return n.common.issues.push(...c.ctx.common.issues),c.result;const l=o.map(c=>new Wu(c.ctx.common.issues));return lr(n,{code:Xn.invalid_union,unionErrors:l}),Yr}if(n.common.async)return Promise.all(r.map(async o=>{const l={...n,common:{...n.common,issues:[]},parent:null};return{result:await o._parseAsync({data:n.data,path:n.path,parent:l}),ctx:l}})).then(i);{let o;const l=[];for(const f of r){const g={...n,common:{...n.common,issues:[]},parent:null},y=f._parseSync({data:n.data,path:n.path,parent:g});if(y.status==="valid")return y;y.status==="dirty"&&!o&&(o={result:y,ctx:g}),g.common.issues.length&&l.push(g.common.issues)}if(o)return n.common.issues.push(...o.ctx.common.issues),o.result;const c=l.map(f=>new Wu(f));return lr(n,{code:Xn.invalid_union,unionErrors:c}),Yr}}get options(){return this._def.options}};ry.create=(t,e)=>new ry({options:t,typeName:qr.ZodUnion,...ci(e)});const Pf=t=>t instanceof oy?Pf(t.schema):t instanceof Ku?Pf(t.innerType()):t instanceof sy?[t.value]:t instanceof ay?t.options:t instanceof ly?zi.objectValues(t.enum):t instanceof uy?Pf(t._def.innerType):t instanceof ty?[void 0]:t instanceof ny?[null]:t instanceof $c?[void 0,...Pf(t.unwrap())]:t instanceof Rd?[null,...Pf(t.unwrap())]:t instanceof Ew||t instanceof fy?Pf(t.unwrap()):t instanceof cy?Pf(t._def.innerType):[];let oC=class N3 extends gi{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==dr.object)return lr(n,{code:Xn.invalid_type,expected:dr.object,received:n.parsedType}),Yr;const r=this.discriminator,i=n.data[r],o=this.optionsMap.get(i);return o?n.common.async?o._parseAsync({data:n.data,path:n.path,parent:n}):o._parseSync({data:n.data,path:n.path,parent:n}):(lr(n,{code:Xn.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Yr)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const i=new Map;for(const o of n){const l=Pf(o.shape[e]);if(!l.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const c of l){if(i.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);i.set(c,o)}}return new N3({typeName:qr.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...ci(r)})}};function bw(t,e){const n=Id(t),r=Id(e);if(t===e)return{valid:!0,data:t};if(n===dr.object&&r===dr.object){const i=zi.objectKeys(e),o=zi.objectKeys(t).filter(c=>i.indexOf(c)!==-1),l={...t,...e};for(const c of o){const f=bw(t[c],e[c]);if(!f.valid)return{valid:!1};l[c]=f.data}return{valid:!0,data:l}}else if(n===dr.array&&r===dr.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let o=0;o<t.length;o++){const l=t[o],c=e[o],f=bw(l,c);if(!f.valid)return{valid:!1};i.push(f.data)}return{valid:!0,data:i}}else return n===dr.date&&r===dr.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}let iy=class extends gi{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(o,l)=>{if(yw(o)||yw(l))return Yr;const c=bw(o.value,l.value);return c.valid?((vw(o)||vw(l))&&n.dirty(),{status:n.value,value:c.data}):(lr(r,{code:Xn.invalid_intersection_types}),Yr)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,l])=>i(o,l)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}};iy.create=(t,e,n)=>new iy({left:t,right:e,typeName:qr.ZodIntersection,...ci(n)});let Cd=class O3 extends gi{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==dr.array)return lr(r,{code:Xn.invalid_type,expected:dr.array,received:r.parsedType}),Yr;if(r.data.length<this._def.items.length)return lr(r,{code:Xn.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Yr;!this._def.rest&&r.data.length>this._def.items.length&&(lr(r,{code:Xn.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const o=[...r.data].map((l,c)=>{const f=this._def.items[c]||this._def.rest;return f?f._parse(new Fc(r,l,r.path,c)):null}).filter(l=>!!l);return r.common.async?Promise.all(o).then(l=>pl.mergeArray(n,l)):pl.mergeArray(n,o)}get items(){return this._def.items}rest(e){return new O3({...this._def,rest:e})}};Cd.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Cd({items:t,typeName:qr.ZodTuple,rest:null,...ci(e)})};let sC=class CI extends gi{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==dr.object)return lr(r,{code:Xn.invalid_type,expected:dr.object,received:r.parsedType}),Yr;const i=[],o=this._def.keyType,l=this._def.valueType;for(const c in r.data)i.push({key:o._parse(new Fc(r,c,r.path,c)),value:l._parse(new Fc(r,r.data[c],r.path,c)),alwaysSet:c in r.data});return r.common.async?pl.mergeObjectAsync(n,i):pl.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof gi?new CI({keyType:e,valueType:n,typeName:qr.ZodRecord,...ci(r)}):new CI({keyType:tg.create(),valueType:e,typeName:qr.ZodRecord,...ci(n)})}},Z_=class extends gi{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==dr.map)return lr(r,{code:Xn.invalid_type,expected:dr.map,received:r.parsedType}),Yr;const i=this._def.keyType,o=this._def.valueType,l=[...r.data.entries()].map(([c,f],g)=>({key:i._parse(new Fc(r,c,r.path,[g,"key"])),value:o._parse(new Fc(r,f,r.path,[g,"value"]))}));if(r.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const f of l){const g=await f.key,y=await f.value;if(g.status==="aborted"||y.status==="aborted")return Yr;(g.status==="dirty"||y.status==="dirty")&&n.dirty(),c.set(g.value,y.value)}return{status:n.value,value:c}})}else{const c=new Map;for(const f of l){const g=f.key,y=f.value;if(g.status==="aborted"||y.status==="aborted")return Yr;(g.status==="dirty"||y.status==="dirty")&&n.dirty(),c.set(g.value,y.value)}return{status:n.value,value:c}}}};Z_.create=(t,e,n)=>new Z_({valueType:e,keyType:t,typeName:qr.ZodMap,...ci(n)});let j_=class RI extends gi{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==dr.set)return lr(r,{code:Xn.invalid_type,expected:dr.set,received:r.parsedType}),Yr;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(lr(r,{code:Xn.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(lr(r,{code:Xn.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const o=this._def.valueType;function l(f){const g=new Set;for(const y of f){if(y.status==="aborted")return Yr;y.status==="dirty"&&n.dirty(),g.add(y.value)}return{status:n.value,value:g}}const c=[...r.data.values()].map((f,g)=>o._parse(new Fc(r,f,r.path,g)));return r.common.async?Promise.all(c).then(f=>l(f)):l(c)}min(e,n){return new RI({...this._def,minSize:{value:e,message:xr.toString(n)}})}max(e,n){return new RI({...this._def,maxSize:{value:e,message:xr.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}};j_.create=(t,e)=>new j_({valueType:t,minSize:null,maxSize:null,typeName:qr.ZodSet,...ci(e)});let aC=class WE extends gi{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==dr.function)return lr(n,{code:Xn.invalid_type,expected:dr.function,received:n.parsedType}),Yr;function r(c,f){return F_({data:c,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,k_(),Jp].filter(g=>!!g),issueData:{code:Xn.invalid_arguments,argumentsError:f}})}function i(c,f){return F_({data:c,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,k_(),Jp].filter(g=>!!g),issueData:{code:Xn.invalid_return_type,returnTypeError:f}})}const o={errorMap:n.common.contextualErrorMap},l=n.data;if(this._def.returns instanceof ig){const c=this;return Ua(async function(...f){const g=new Wu([]),y=await c._def.args.parseAsync(f,o).catch(E=>{throw g.addIssue(r(f,E)),g}),h=await Reflect.apply(l,this,y);return await c._def.returns._def.type.parseAsync(h,o).catch(E=>{throw g.addIssue(i(h,E)),g})})}else{const c=this;return Ua(function(...f){const g=c._def.args.safeParse(f,o);if(!g.success)throw new Wu([r(f,g.error)]);const y=Reflect.apply(l,this,g.data),h=c._def.returns.safeParse(y,o);if(!h.success)throw new Wu([i(y,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new WE({...this._def,args:Cd.create(e).rest(Dh.create())})}returns(e){return new WE({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new WE({args:e||Cd.create([]).rest(Dh.create()),returns:n||Dh.create(),typeName:qr.ZodFunction,...ci(r)})}},oy=class extends gi{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}};oy.create=(t,e)=>new oy({getter:t,typeName:qr.ZodLazy,...ci(e)});let sy=class extends gi{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return lr(n,{received:n.data,code:Xn.invalid_literal,expected:this._def.value}),Yr}return{status:"valid",value:e.data}}get value(){return this._def.value}};sy.create=(t,e)=>new sy({value:t,typeName:qr.ZodLiteral,...ci(e)});function lC(t,e){return new ay({values:t,typeName:qr.ZodEnum,...ci(e)})}let ay=class xI extends gi{constructor(){super(...arguments),Km.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return lr(n,{expected:zi.joinValues(r),received:n.parsedType,code:Xn.invalid_type}),Yr}if($_(this,Km)||eC(this,Km,new Set(this._def.values)),!$_(this,Km).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return lr(n,{received:n.data,code:Xn.invalid_enum_value,options:r}),Yr}return Ua(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return xI.create(e,{...this._def,...n})}exclude(e,n=this._def){return xI.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}};Km=new WeakMap,ay.create=lC;let ly=class extends gi{constructor(){super(...arguments),Ym.set(this,void 0)}_parse(e){const n=zi.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==dr.string&&r.parsedType!==dr.number){const i=zi.objectValues(n);return lr(r,{expected:zi.joinValues(i),received:r.parsedType,code:Xn.invalid_type}),Yr}if($_(this,Ym)||eC(this,Ym,new Set(zi.getValidEnumValues(this._def.values))),!$_(this,Ym).has(e.data)){const i=zi.objectValues(n);return lr(r,{received:r.data,code:Xn.invalid_enum_value,options:i}),Yr}return Ua(e.data)}get enum(){return this._def.values}};Ym=new WeakMap,ly.create=(t,e)=>new ly({values:t,typeName:qr.ZodNativeEnum,...ci(e)});let ig=class extends gi{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==dr.promise&&n.common.async===!1)return lr(n,{code:Xn.invalid_type,expected:dr.promise,received:n.parsedType}),Yr;const r=n.parsedType===dr.promise?n.data:Promise.resolve(n.data);return Ua(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}};ig.create=(t,e)=>new ig({type:t,typeName:qr.ZodPromise,...ci(e)});let Ku=class extends gi{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===qr.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:l=>{lr(r,l),l.fatal?n.abort():n.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){const l=i.transform(r.data,o);if(r.common.async)return Promise.resolve(l).then(async c=>{if(n.value==="aborted")return Yr;const f=await this._def.schema._parseAsync({data:c,path:r.path,parent:r});return f.status==="aborted"?Yr:f.status==="dirty"||n.value==="dirty"?eg(f.value):f});{if(n.value==="aborted")return Yr;const c=this._def.schema._parseSync({data:l,path:r.path,parent:r});return c.status==="aborted"?Yr:c.status==="dirty"||n.value==="dirty"?eg(c.value):c}}if(i.type==="refinement"){const l=c=>{const f=i.refinement(c,o);if(r.common.async)return Promise.resolve(f);if(f instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return c.status==="aborted"?Yr:(c.status==="dirty"&&n.dirty(),l(c.value),{status:n.value,value:c.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>c.status==="aborted"?Yr:(c.status==="dirty"&&n.dirty(),l(c.value).then(()=>({status:n.value,value:c.value}))))}if(i.type==="transform")if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!qm(l))return l;const c=i.transform(l.value,o);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:c}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>qm(l)?Promise.resolve(i.transform(l.value,o)).then(c=>({status:n.value,value:c})):l);zi.assertNever(i)}};Ku.create=(t,e,n)=>new Ku({schema:t,typeName:qr.ZodEffects,effect:e,...ci(n)}),Ku.createWithPreprocess=(t,e,n)=>new Ku({schema:e,effect:{type:"preprocess",transform:t},typeName:qr.ZodEffects,...ci(n)});let $c=class extends gi{_parse(e){return this._getType(e)===dr.undefined?Ua(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};$c.create=(t,e)=>new $c({innerType:t,typeName:qr.ZodOptional,...ci(e)});let Rd=class extends gi{_parse(e){return this._getType(e)===dr.null?Ua(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Rd.create=(t,e)=>new Rd({innerType:t,typeName:qr.ZodNullable,...ci(e)});let uy=class extends gi{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===dr.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}};uy.create=(t,e)=>new uy({innerType:t,typeName:qr.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ci(e)});let cy=class extends gi{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Wm(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Wu(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Wu(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}};cy.create=(t,e)=>new cy({innerType:t,typeName:qr.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ci(e)});let V_=class extends gi{_parse(e){if(this._getType(e)!==dr.nan){const r=this._getOrReturnCtx(e);return lr(r,{code:Xn.invalid_type,expected:dr.nan,received:r.parsedType}),Yr}return{status:"valid",value:e.data}}};V_.create=t=>new V_({typeName:qr.ZodNaN,...ci(t)});const u5=Symbol("zod_brand");let Ew=class extends gi{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}},ww=class L3 extends gi{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?Yr:o.status==="dirty"?(n.dirty(),eg(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Yr:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new L3({in:e,out:n,typeName:qr.ZodPipeline})}},fy=class extends gi{_parse(e){const n=this._def.innerType._parse(e),r=i=>(qm(i)&&(i.value=Object.freeze(i.value)),i);return Wm(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}};fy.create=(t,e)=>new fy({innerType:t,typeName:qr.ZodReadonly,...ci(e)});function uC(t,e={},n){return t?ng.create().superRefine((r,i)=>{var o,l;if(!t(r)){const c=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,f=(l=(o=c.fatal)!==null&&o!==void 0?o:n)!==null&&l!==void 0?l:!0,g=typeof c=="string"?{message:c}:c;i.addIssue({code:"custom",...g,fatal:f})}}):ng.create()}const c5={object:vu.lazycreate};var qr;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(qr||(qr={}));const f5=(t,e={message:`Input not instance of ${t.name}`})=>uC(n=>n instanceof t,e),cC=tg.create,fC=Qm.create,d5=V_.create,h5=Xm.create,dC=Jm.create,p5=ey.create,g5=U_.create,m5=ty.create,y5=ny.create,v5=ng.create,_5=Dh.create,b5=Df.create,E5=B_.create,w5=Ph.create,T5=vu.create,S5=vu.strictCreate,A5=ry.create,I5=oC.create,C5=iy.create,R5=Cd.create,x5=sC.create,N5=Z_.create,O5=j_.create,L5=aC.create,D5=oy.create,P5=sy.create,M5=ay.create,k5=ly.create,F5=ig.create,hC=Ku.create,$5=$c.create,U5=Rd.create,B5=Ku.createWithPreprocess,Z5=ww.create;var bn=Object.freeze({__proto__:null,defaultErrorMap:Jp,setErrorMap:G4,getErrorMap:k_,makeIssue:F_,EMPTY_PATH:q4,addIssueToContext:lr,ParseStatus:pl,INVALID:Yr,DIRTY:eg,OK:Ua,isAborted:yw,isDirty:vw,isValid:qm,isAsync:Wm,get util(){return zi},get objectUtil(){return mw},ZodParsedType:dr,getParsedType:Id,ZodType:gi,datetimeRegex:iC,ZodString:tg,ZodNumber:Qm,ZodBigInt:Xm,ZodBoolean:Jm,ZodDate:ey,ZodSymbol:U_,ZodUndefined:ty,ZodNull:ny,ZodAny:ng,ZodUnknown:Dh,ZodNever:Df,ZodVoid:B_,ZodArray:Ph,ZodObject:vu,ZodUnion:ry,ZodDiscriminatedUnion:oC,ZodIntersection:iy,ZodTuple:Cd,ZodRecord:sC,ZodMap:Z_,ZodSet:j_,ZodFunction:aC,ZodLazy:oy,ZodLiteral:sy,ZodEnum:ay,ZodNativeEnum:ly,ZodPromise:ig,ZodEffects:Ku,ZodTransformer:Ku,ZodOptional:$c,ZodNullable:Rd,ZodDefault:uy,ZodCatch:cy,ZodNaN:V_,BRAND:u5,ZodBranded:Ew,ZodPipeline:ww,ZodReadonly:fy,custom:uC,Schema:gi,ZodSchema:gi,late:c5,get ZodFirstPartyTypeKind(){return qr},coerce:{string:(t=>tg.create({...t,coerce:!0})),number:(t=>Qm.create({...t,coerce:!0})),boolean:(t=>Jm.create({...t,coerce:!0})),bigint:(t=>Xm.create({...t,coerce:!0})),date:(t=>ey.create({...t,coerce:!0}))},any:v5,array:w5,bigint:h5,boolean:dC,date:p5,discriminatedUnion:I5,effect:hC,enum:M5,function:L5,instanceof:f5,intersection:C5,lazy:D5,literal:P5,map:N5,nan:d5,nativeEnum:k5,never:b5,null:y5,nullable:U5,number:fC,object:T5,oboolean:()=>dC().optional(),onumber:()=>fC().optional(),optional:$5,ostring:()=>cC().optional(),pipeline:Z5,preprocess:B5,promise:F5,record:x5,set:O5,strictObject:S5,string:cC,symbol:g5,transformer:hC,tuple:R5,undefined:m5,union:A5,unknown:_5,void:E5,NEVER:Yr,ZodIssueCode:Xn,quotelessJson:H4,ZodError:Wu});const j5=bn.object({category:bn.string(),values:bn.array(bn.coerce.string())}),V5=bn.union([bn.instanceof(Xp),bn.object({name:bn.string(),email:bn.string().transform(t=>t.trim()),profiles:bn.union([bn.array(bn.number().or(bn.string()).pipe(bn.coerce.number())),bn.string().transform(t=>t.split(",").map(parseInt).filter(e=>!isNaN(e)))]).optional().default([]),tags:bn.array(j5).optional().default([])}),bn.string().transform(t=>new Xp(t))]).nullable(),z5=bn.array(bn.object({name:bn.string(),exclude:bn.boolean().optional().default(!1)})).or(bn.literal("*")).optional(),H5=bn.object({direct:bn.boolean().default(Bl.direct),host:bn.string().default(Bl.host),language:bn.string().default(Bl.language),ssoId:bn.number().or(bn.string()).pipe(bn.coerce.number()).nullable().default(Bl.ssoId),open:bn.union([bn.boolean(),bn.function().args(bn.any()).returns(bn.boolean())]).optional(),startConstraints:bn.array(bn.boolean().or(bn.function().returns(bn.boolean()))).default(Bl.startConstraints),namespace:bn.string().regex(/^[a-zA-Z\-_]+$/).nullable().default(Bl.namespace),user:V5,projectKey:bn.string().nullable().optional().default(Bl.projectKey),companyKey:bn.string().nullable().optional().default(Bl.companyKey),hosts:z5,domain:bn.string().optional(),statsEndpoint:bn.string().optional(),analyticsEndpoint:bn.string().optional()}).superRefine((t,e)=>{t.user!=null&&t.projectKey==null&&t.companyKey==null&&e.addIssue({code:bn.ZodIssueCode.custom,path:["projectKey","companyKey"],message:"You must use projectKey or companyKey with user"})});async function G5(t){q5(t)&&(t=JSON.parse(t.ssoId));try{return await H5.parseAsync(t)}catch(e){throw new Error(`${W5(e)}
Received config:
'${JSON.stringify(t)}'`)}}function q5(t){const e=bn.string().refine(r=>{try{const i=JSON.parse(r);return typeof i=="object"&&i!==null}catch{return!1}},{message:"Invalid JSON object string"});return bn.object({ssoId:e}).safeParse(t).success}function W5(t){const e="The configuration has the following issue(s):",n=t.issues.map((r,i)=>`${i+1}: "${r.message}" at [${r.path.map(o=>`"${o}"`).join(", ")}]`);return[e,...n].join(`
`)}const no=pC();function pC(){return{listeners:new Map,on(t,e){return Re.trace(`EventsHandler: on ${t}`),this.listeners.has(t)||this.listeners.set(t,[]),this.listeners.get(t)?.push(e),this},trigger(t,...e){Re.trace(`EventsHandler: trigger ${t}`),this.listeners.get(t)?.forEach(r=>{r(...e)})},removeListener(t,e){Re.trace(`EventsHandler: removeListener ${t}`);const n=this.listeners.get(t);this.listeners.set(t,n?.filter(r=>r!==e)??[])}}}const xd=(t=document)=>t.body.tagName==="FRAMESET"&&t.body?.parentElement!==null?t.body.parentElement:t.body;class gC{constructor(){this.blockedOrigins=new Set([/walkme\.cloud\.sap/i])}isAllowed(e){return!this.isOriginBlocked(e)}isOriginBlocked(e){return e.origin?Array.from(this.blockedOrigins).some(n=>n.test(e.origin)):!1}}const HA=class HA{static addFilteredWindowListener(e=globalThis.window,n,r,i){const o=l=>{this.messageEventFilter.isAllowed(l)&&n(l)};return e.addEventListener("message",o,i),()=>{e.removeEventListener("message",o,i)}}};HA.messageEventFilter=new gC;let dy=HA,Nd=null;function K5(t){return Nd!=null||(Nd=document.createElement("div"),t===document.body&&Nd.style.setProperty("all","initial"),Nd.style.setProperty("font-family",'"Albert Sans", "Helvetica", "Helvet", Arial, sans-serif'),t.append(Nd)),Nd}function Y5(){Nd?.remove()}var z_={},Tw={exports:{}},gl={},Sw={exports:{}},Aw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mC;function Q5(){return mC||(mC=1,(function(t){function e(Ce,Ye){var et=Ce.length;Ce.push(Ye);e:for(;0<et;){var Y=et-1>>>1,Ee=Ce[Y];if(0<i(Ee,Ye))Ce[Y]=Ye,Ce[et]=Ee,et=Y;else break e}}function n(Ce){return Ce.length===0?null:Ce[0]}function r(Ce){if(Ce.length===0)return null;var Ye=Ce[0],et=Ce.pop();if(et!==Ye){Ce[0]=et;e:for(var Y=0,Ee=Ce.length,Pe=Ee>>>1;Y<Pe;){var Xe=2*(Y+1)-1,Ze=Ce[Xe],at=Xe+1,jt=Ce[at];if(0>i(Ze,et))at<Ee&&0>i(jt,Ze)?(Ce[Y]=jt,Ce[at]=et,Y=at):(Ce[Y]=Ze,Ce[Xe]=et,Y=Xe);else if(at<Ee&&0>i(jt,et))Ce[Y]=jt,Ce[at]=et,Y=at;else break e}}return Ye}function i(Ce,Ye){var et=Ce.sortIndex-Ye.sortIndex;return et!==0?et:Ce.id-Ye.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var f=[],g=[],y=1,h=null,p=3,E=!1,A=!1,_=!1,I=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(Ce){for(var Ye=n(g);Ye!==null;){if(Ye.callback===null)r(g);else if(Ye.startTime<=Ce)r(g),Ye.sortIndex=Ye.expirationTime,e(f,Ye);else break;Ye=n(g)}}function S(Ce){if(_=!1,T(Ce),!A)if(n(f)!==null)A=!0,Me(O);else{var Ye=n(g);Ye!==null&&oe(S,Ye.startTime-Ce)}}function O(Ce,Ye){A=!1,_&&(_=!1,C(B),B=-1),E=!0;var et=p;try{for(T(Ye),h=n(f);h!==null&&(!(h.expirationTime>Ye)||Ce&&!X());){var Y=h.callback;if(typeof Y=="function"){h.callback=null,p=h.priorityLevel;var Ee=Y(h.expirationTime<=Ye);Ye=t.unstable_now(),typeof Ee=="function"?h.callback=Ee:h===n(f)&&r(f),T(Ye)}else r(f);h=n(f)}if(h!==null)var Pe=!0;else{var Xe=n(g);Xe!==null&&oe(S,Xe.startTime-Ye),Pe=!1}return Pe}finally{h=null,p=et,E=!1}}var $=!1,V=null,B=-1,ne=5,D=-1;function X(){return!(t.unstable_now()-D<ne)}function ve(){if(V!==null){var Ce=t.unstable_now();D=Ce;var Ye=!0;try{Ye=V(!0,Ce)}finally{Ye?ie():($=!1,V=null)}}else $=!1}var ie;if(typeof v=="function")ie=function(){v(ve)};else if(typeof MessageChannel<"u"){var ye=new MessageChannel,Ne=ye.port2;ye.port1.onmessage=ve,ie=function(){Ne.postMessage(null)}}else ie=function(){I(ve,0)};function Me(Ce){V=Ce,$||($=!0,ie())}function oe(Ce,Ye){B=I(function(){Ce(t.unstable_now())},Ye)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Ce){Ce.callback=null},t.unstable_continueExecution=function(){A||E||(A=!0,Me(O))},t.unstable_forceFrameRate=function(Ce){0>Ce||125<Ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<Ce?Math.floor(1e3/Ce):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(f)},t.unstable_next=function(Ce){switch(p){case 1:case 2:case 3:var Ye=3;break;default:Ye=p}var et=p;p=Ye;try{return Ce()}finally{p=et}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Ce,Ye){switch(Ce){case 1:case 2:case 3:case 4:case 5:break;default:Ce=3}var et=p;p=Ce;try{return Ye()}finally{p=et}},t.unstable_scheduleCallback=function(Ce,Ye,et){var Y=t.unstable_now();switch(typeof et=="object"&&et!==null?(et=et.delay,et=typeof et=="number"&&0<et?Y+et:Y):et=Y,Ce){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=et+Ee,Ce={id:y++,callback:Ye,priorityLevel:Ce,startTime:et,expirationTime:Ee,sortIndex:-1},et>Y?(Ce.sortIndex=et,e(g,Ce),n(f)===null&&Ce===n(g)&&(_?(C(B),B=-1):_=!0,oe(S,et-Y))):(Ce.sortIndex=Ee,e(f,Ce),A||E||(A=!0,Me(O))),Ce},t.unstable_shouldYield=X,t.unstable_wrapCallback=function(Ce){var Ye=p;return function(){var et=p;p=Ye;try{return Ce.apply(this,arguments)}finally{p=et}}}})(Aw)),Aw}var yC;function X5(){return yC||(yC=1,Sw.exports=Q5()),Sw.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vC;function J5(){if(vC)return gl;vC=1;var t=gw(),e=X5();function n(u){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+u,w=1;w<arguments.length;w++)d+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(u,d){l(u,d),l(u+"Capture",d)}function l(u,d){for(i[u]=d,u=0;u<d.length;u++)r.add(d[u])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},h={};function p(u){return f.call(h,u)?!0:f.call(y,u)?!1:g.test(u)?h[u]=!0:(y[u]=!0,!1)}function E(u,d,w,N){if(w!==null&&w.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return N?!1:w!==null?!w.acceptsBooleans:(u=u.toLowerCase().slice(0,5),u!=="data-"&&u!=="aria-");default:return!1}}function A(u,d,w,N){if(d===null||typeof d>"u"||E(u,d,w,N))return!0;if(N)return!1;if(w!==null)switch(w.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function _(u,d,w,N,H,J,$e){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=N,this.attributeNamespace=H,this.mustUseProperty=w,this.propertyName=u,this.type=d,this.sanitizeURL=J,this.removeEmptyString=$e}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(u){I[u]=new _(u,0,!1,u,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(u){var d=u[0];I[d]=new _(d,1,!1,u[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(u){I[u]=new _(u,2,!1,u.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(u){I[u]=new _(u,2,!1,u,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(u){I[u]=new _(u,3,!1,u.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(u){I[u]=new _(u,3,!0,u,null,!1,!1)}),["capture","download"].forEach(function(u){I[u]=new _(u,4,!1,u,null,!1,!1)}),["cols","rows","size","span"].forEach(function(u){I[u]=new _(u,6,!1,u,null,!1,!1)}),["rowSpan","start"].forEach(function(u){I[u]=new _(u,5,!1,u.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function v(u){return u[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(u){var d=u.replace(C,v);I[d]=new _(d,1,!1,u,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(u){var d=u.replace(C,v);I[d]=new _(d,1,!1,u,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(u){var d=u.replace(C,v);I[d]=new _(d,1,!1,u,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(u){I[u]=new _(u,1,!1,u.toLowerCase(),null,!1,!1)}),I.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(u){I[u]=new _(u,1,!1,u.toLowerCase(),null,!0,!0)});function T(u,d,w,N){var H=I.hasOwnProperty(d)?I[d]:null;(H!==null?H.type!==0:N||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(A(d,w,H,N)&&(w=null),N||H===null?p(d)&&(w===null?u.removeAttribute(d):u.setAttribute(d,""+w)):H.mustUseProperty?u[H.propertyName]=w===null?H.type===3?!1:"":w:(d=H.attributeName,N=H.attributeNamespace,w===null?u.removeAttribute(d):(H=H.type,w=H===3||H===4&&w===!0?"":""+w,N?u.setAttributeNS(N,d,w):u.setAttribute(d,w))))}var S=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,O=Symbol.for("react.element"),$=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),ne=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),X=Symbol.for("react.context"),ve=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),Ne=Symbol.for("react.memo"),Me=Symbol.for("react.lazy"),oe=Symbol.for("react.offscreen"),Ce=Symbol.iterator;function Ye(u){return u===null||typeof u!="object"?null:(u=Ce&&u[Ce]||u["@@iterator"],typeof u=="function"?u:null)}var et=Object.assign,Y;function Ee(u){if(Y===void 0)try{throw Error()}catch(w){var d=w.stack.trim().match(/\n( *(at )?)/);Y=d&&d[1]||""}return`
`+Y+u}var Pe=!1;function Xe(u,d){if(!u||Pe)return"";Pe=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(gn){var N=gn}Reflect.construct(u,[],d)}else{try{d.call()}catch(gn){N=gn}u.call(d.prototype)}else{try{throw Error()}catch(gn){N=gn}u()}}catch(gn){if(gn&&N&&typeof gn.stack=="string"){for(var H=gn.stack.split(`
`),J=N.stack.split(`
`),$e=H.length-1,yt=J.length-1;1<=$e&&0<=yt&&H[$e]!==J[yt];)yt--;for(;1<=$e&&0<=yt;$e--,yt--)if(H[$e]!==J[yt]){if($e!==1||yt!==1)do if($e--,yt--,0>yt||H[$e]!==J[yt]){var Pt=`
`+H[$e].replace(" at new "," at ");return u.displayName&&Pt.includes("<anonymous>")&&(Pt=Pt.replace("<anonymous>",u.displayName)),Pt}while(1<=$e&&0<=yt);break}}}finally{Pe=!1,Error.prepareStackTrace=w}return(u=u?u.displayName||u.name:"")?Ee(u):""}function Ze(u){switch(u.tag){case 5:return Ee(u.type);case 16:return Ee("Lazy");case 13:return Ee("Suspense");case 19:return Ee("SuspenseList");case 0:case 2:case 15:return u=Xe(u.type,!1),u;case 11:return u=Xe(u.type.render,!1),u;case 1:return u=Xe(u.type,!0),u;default:return""}}function at(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case V:return"Fragment";case $:return"Portal";case ne:return"Profiler";case B:return"StrictMode";case ie:return"Suspense";case ye:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case X:return(u.displayName||"Context")+".Consumer";case D:return(u._context.displayName||"Context")+".Provider";case ve:var d=u.render;return u=u.displayName,u||(u=d.displayName||d.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case Ne:return d=u.displayName||null,d!==null?d:at(u.type)||"Memo";case Me:d=u._payload,u=u._init;try{return at(u(d))}catch{}}return null}function jt(u){var d=u.type;switch(u.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=d.render,u=u.displayName||u.name||"",d.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return at(d);case 8:return d===B?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function xt(u){switch(typeof u){case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function ht(u){var d=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function It(u){var d=ht(u)?"checked":"value",w=Object.getOwnPropertyDescriptor(u.constructor.prototype,d),N=""+u[d];if(!u.hasOwnProperty(d)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var H=w.get,J=w.set;return Object.defineProperty(u,d,{configurable:!0,get:function(){return H.call(this)},set:function($e){N=""+$e,J.call(this,$e)}}),Object.defineProperty(u,d,{enumerable:w.enumerable}),{getValue:function(){return N},setValue:function($e){N=""+$e},stopTracking:function(){u._valueTracker=null,delete u[d]}}}}function Ue(u){u._valueTracker||(u._valueTracker=It(u))}function Ve(u){if(!u)return!1;var d=u._valueTracker;if(!d)return!0;var w=d.getValue(),N="";return u&&(N=ht(u)?u.checked?"true":"false":u.value),u=N,u!==w?(d.setValue(u),!0):!1}function _t(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}function M(u,d){var w=d.checked;return et({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:w??u._wrapperState.initialChecked})}function x(u,d){var w=d.defaultValue==null?"":d.defaultValue,N=d.checked!=null?d.checked:d.defaultChecked;w=xt(d.value!=null?d.value:w),u._wrapperState={initialChecked:N,initialValue:w,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function U(u,d){d=d.checked,d!=null&&T(u,"checked",d,!1)}function j(u,d){U(u,d);var w=xt(d.value),N=d.type;if(w!=null)N==="number"?(w===0&&u.value===""||u.value!=w)&&(u.value=""+w):u.value!==""+w&&(u.value=""+w);else if(N==="submit"||N==="reset"){u.removeAttribute("value");return}d.hasOwnProperty("value")?de(u,d.type,w):d.hasOwnProperty("defaultValue")&&de(u,d.type,xt(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(u.defaultChecked=!!d.defaultChecked)}function he(u,d,w){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var N=d.type;if(!(N!=="submit"&&N!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+u._wrapperState.initialValue,w||d===u.value||(u.value=d),u.defaultValue=d}w=u.name,w!==""&&(u.name=""),u.defaultChecked=!!u._wrapperState.initialChecked,w!==""&&(u.name=w)}function de(u,d,w){(d!=="number"||_t(u.ownerDocument)!==u)&&(w==null?u.defaultValue=""+u._wrapperState.initialValue:u.defaultValue!==""+w&&(u.defaultValue=""+w))}var ot=Array.isArray;function wt(u,d,w,N){if(u=u.options,d){d={};for(var H=0;H<w.length;H++)d["$"+w[H]]=!0;for(w=0;w<u.length;w++)H=d.hasOwnProperty("$"+u[w].value),u[w].selected!==H&&(u[w].selected=H),H&&N&&(u[w].defaultSelected=!0)}else{for(w=""+xt(w),d=null,H=0;H<u.length;H++){if(u[H].value===w){u[H].selected=!0,N&&(u[H].defaultSelected=!0);return}d!==null||u[H].disabled||(d=u[H])}d!==null&&(d.selected=!0)}}function st(u,d){if(d.dangerouslySetInnerHTML!=null)throw Error(n(91));return et({},d,{value:void 0,defaultValue:void 0,children:""+u._wrapperState.initialValue})}function nt(u,d){var w=d.value;if(w==null){if(w=d.children,d=d.defaultValue,w!=null){if(d!=null)throw Error(n(92));if(ot(w)){if(1<w.length)throw Error(n(93));w=w[0]}d=w}d==null&&(d=""),w=d}u._wrapperState={initialValue:xt(w)}}function rt(u,d){var w=xt(d.value),N=xt(d.defaultValue);w!=null&&(w=""+w,w!==u.value&&(u.value=w),d.defaultValue==null&&u.defaultValue!==w&&(u.defaultValue=w)),N!=null&&(u.defaultValue=""+N)}function ct(u){var d=u.textContent;d===u._wrapperState.initialValue&&d!==""&&d!==null&&(u.value=d)}function St(u){switch(u){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wt(u,d){return u==null||u==="http://www.w3.org/1999/xhtml"?St(d):u==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":u}var $t,hn=(function(u){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,w,N,H){MSApp.execUnsafeLocalFunction(function(){return u(d,w,N,H)})}:u})(function(u,d){if(u.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in u)u.innerHTML=d;else{for($t=$t||document.createElement("div"),$t.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=$t.firstChild;u.firstChild;)u.removeChild(u.firstChild);for(;d.firstChild;)u.appendChild(d.firstChild)}});function dn(u,d){if(d){var w=u.firstChild;if(w&&w===u.lastChild&&w.nodeType===3){w.nodeValue=d;return}}u.textContent=d}var _n={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},En=["Webkit","ms","Moz","O"];Object.keys(_n).forEach(function(u){En.forEach(function(d){d=d+u.charAt(0).toUpperCase()+u.substring(1),_n[d]=_n[u]})});function tr(u,d,w){return d==null||typeof d=="boolean"||d===""?"":w||typeof d!="number"||d===0||_n.hasOwnProperty(u)&&_n[u]?(""+d).trim():d+"px"}function Ir(u,d){u=u.style;for(var w in d)if(d.hasOwnProperty(w)){var N=w.indexOf("--")===0,H=tr(w,d[w],N);w==="float"&&(w="cssFloat"),N?u.setProperty(w,H):u[w]=H}}var Fr=et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Dr(u,d){if(d){if(Fr[u]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(n(137,u));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(n(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(n(61))}if(d.style!=null&&typeof d.style!="object")throw Error(n(62))}}function ni(u,d){if(u.indexOf("-")===-1)return typeof d.is=="string";switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bi=null;function Jr(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var eo=null,ei=null,jr=null;function qi(u){if(u=As(u)){if(typeof eo!="function")throw Error(n(280));var d=u.stateNode;d&&(d=fd(d),eo(u.stateNode,u.type,d))}}function ro(u){ei?jr?jr.push(u):jr=[u]:ei=u}function To(){if(ei){var u=ei,d=jr;if(jr=ei=null,qi(u),d)for(u=0;u<d.length;u++)qi(d[u])}}function di(u,d){return u(d)}function xo(){}var pn=!1;function nn(u,d,w){if(pn)return u(d,w);pn=!0;try{return di(u,d,w)}finally{pn=!1,(ei!==null||jr!==null)&&(xo(),To())}}function be(u,d){var w=u.stateNode;if(w===null)return null;var N=fd(w);if(N===null)return null;w=N[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(N=!N.disabled)||(u=u.type,N=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!N;break e;default:u=!1}if(u)return null;if(w&&typeof w!="function")throw Error(n(231,d,typeof w));return w}var Te=!1;if(c)try{var je={};Object.defineProperty(je,"passive",{get:function(){Te=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch{Te=!1}function Je(u,d,w,N,H,J,$e,yt,Pt){var gn=Array.prototype.slice.call(arguments,3);try{d.apply(w,gn)}catch(jn){this.onError(jn)}}var Ge=!1,vt=null,Tt=!1,Qt=null,sn={onError:function(u){Ge=!0,vt=u}};function qt(u,d,w,N,H,J,$e,yt,Pt){Ge=!1,vt=null,Je.apply(sn,arguments)}function Nt(u,d,w,N,H,J,$e,yt,Pt){if(qt.apply(this,arguments),Ge){if(Ge){var gn=vt;Ge=!1,vt=null}else throw Error(n(198));Tt||(Tt=!0,Qt=gn)}}function en(u){var d=u,w=u;if(u.alternate)for(;d.return;)d=d.return;else{u=d;do d=u,(d.flags&4098)!==0&&(w=d.return),u=d.return;while(u)}return d.tag===3?w:null}function vn(u){if(u.tag===13){var d=u.memoizedState;if(d===null&&(u=u.alternate,u!==null&&(d=u.memoizedState)),d!==null)return d.dehydrated}return null}function On(u){if(en(u)!==u)throw Error(n(188))}function Un(u){var d=u.alternate;if(!d){if(d=en(u),d===null)throw Error(n(188));return d!==u?null:u}for(var w=u,N=d;;){var H=w.return;if(H===null)break;var J=H.alternate;if(J===null){if(N=H.return,N!==null){w=N;continue}break}if(H.child===J.child){for(J=H.child;J;){if(J===w)return On(H),u;if(J===N)return On(H),d;J=J.sibling}throw Error(n(188))}if(w.return!==N.return)w=H,N=J;else{for(var $e=!1,yt=H.child;yt;){if(yt===w){$e=!0,w=H,N=J;break}if(yt===N){$e=!0,N=H,w=J;break}yt=yt.sibling}if(!$e){for(yt=J.child;yt;){if(yt===w){$e=!0,w=J,N=H;break}if(yt===N){$e=!0,N=J,w=H;break}yt=yt.sibling}if(!$e)throw Error(n(189))}}if(w.alternate!==N)throw Error(n(190))}if(w.tag!==3)throw Error(n(188));return w.stateNode.current===w?u:d}function Er(u){return u=Un(u),u!==null?cn(u):null}function cn(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var d=cn(u);if(d!==null)return d;u=u.sibling}return null}var ze=e.unstable_scheduleCallback,pt=e.unstable_cancelCallback,Gt=e.unstable_shouldYield,Gn=e.unstable_requestPaint,Rn=e.unstable_now,pr=e.unstable_getCurrentPriorityLevel,Sr=e.unstable_ImmediatePriority,Ri=e.unstable_UserBlockingPriority,xi=e.unstable_NormalPriority,oi=e.unstable_LowPriority,Vr=e.unstable_IdlePriority,yi=null,Ni=null;function Ja(u){if(Ni&&typeof Ni.onCommitFiberRoot=="function")try{Ni.onCommitFiberRoot(yi,u,void 0,(u.current.flags&128)===128)}catch{}}var po=Math.clz32?Math.clz32:Aa,_s=Math.log,yo=Math.LN2;function Aa(u){return u>>>=0,u===0?32:31-(_s(u)/yo|0)|0}var Qo=64,El=4194304;function Ia(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function aa(u,d){var w=u.pendingLanes;if(w===0)return 0;var N=0,H=u.suspendedLanes,J=u.pingedLanes,$e=w&268435455;if($e!==0){var yt=$e&~H;yt!==0?N=Ia(yt):(J&=$e,J!==0&&(N=Ia(J)))}else $e=w&~H,$e!==0?N=Ia($e):J!==0&&(N=Ia(J));if(N===0)return 0;if(d!==0&&d!==N&&(d&H)===0&&(H=N&-N,J=d&-d,H>=J||H===16&&(J&4194240)!==0))return d;if((N&4)!==0&&(N|=w&16),d=u.entangledLanes,d!==0)for(u=u.entanglements,d&=N;0<d;)w=31-po(d),H=1<<w,N|=u[w],d&=~H;return N}function el(u,d){switch(u){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xn(u,d){for(var w=u.suspendedLanes,N=u.pingedLanes,H=u.expirationTimes,J=u.pendingLanes;0<J;){var $e=31-po(J),yt=1<<$e,Pt=H[$e];Pt===-1?((yt&w)===0||(yt&N)!==0)&&(H[$e]=el(yt,d)):Pt<=d&&(u.expiredLanes|=yt),J&=~yt}}function nr(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function Rr(){var u=Qo;return Qo<<=1,(Qo&4194240)===0&&(Qo=64),u}function si(u){for(var d=[],w=0;31>w;w++)d.push(u);return d}function ti(u,d,w){u.pendingLanes|=d,d!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,d=31-po(d),u[d]=w}function io(u,d){var w=u.pendingLanes&~d;u.pendingLanes=d,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=d,u.mutableReadLanes&=d,u.entangledLanes&=d,d=u.entanglements;var N=u.eventTimes;for(u=u.expirationTimes;0<w;){var H=31-po(w),J=1<<H;d[H]=0,N[H]=-1,u[H]=-1,w&=~J}}function hi(u,d){var w=u.entangledLanes|=d;for(u=u.entanglements;w;){var N=31-po(w),H=1<<N;H&d|u[N]&d&&(u[N]|=d),w&=~H}}var Kr=0;function Oi(u){return u&=-u,1<u?4<u?(u&268435455)!==0?16:536870912:4:1}var Ei,No,vo,Ms,bs,Li=!1,Vo=[],qs=null,Es=null,ls=null,Ca=new Map,tl=new Map,Ra=[],Ws="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function la(u,d){switch(u){case"focusin":case"focusout":qs=null;break;case"dragenter":case"dragleave":Es=null;break;case"mouseover":case"mouseout":ls=null;break;case"pointerover":case"pointerout":Ca.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":tl.delete(d.pointerId)}}function ua(u,d,w,N,H,J){return u===null||u.nativeEvent!==J?(u={blockedOn:d,domEventName:w,eventSystemFlags:N,nativeEvent:J,targetContainers:[H]},d!==null&&(d=As(d),d!==null&&No(d)),u):(u.eventSystemFlags|=N,d=u.targetContainers,H!==null&&d.indexOf(H)===-1&&d.push(H),u)}function af(u,d,w,N,H){switch(d){case"focusin":return qs=ua(qs,u,d,w,N,H),!0;case"dragenter":return Es=ua(Es,u,d,w,N,H),!0;case"mouseover":return ls=ua(ls,u,d,w,N,H),!0;case"pointerover":var J=H.pointerId;return Ca.set(J,ua(Ca.get(J)||null,u,d,w,N,H)),!0;case"gotpointercapture":return J=H.pointerId,tl.set(J,ua(tl.get(J)||null,u,d,w,N,H)),!0}return!1}function wl(u){var d=Rl(u.target);if(d!==null){var w=en(d);if(w!==null){if(d=w.tag,d===13){if(d=vn(w),d!==null){u.blockedOn=d,bs(u.priority,function(){vo(w)});return}}else if(d===3&&w.stateNode.current.memoizedState.isDehydrated){u.blockedOn=w.tag===3?w.stateNode.containerInfo:null;return}}}u.blockedOn=null}function Tl(u){if(u.blockedOn!==null)return!1;for(var d=u.targetContainers;0<d.length;){var w=Fi(u.domEventName,u.eventSystemFlags,d[0],u.nativeEvent);if(w===null){w=u.nativeEvent;var N=new w.constructor(w.type,w);bi=N,w.target.dispatchEvent(N),bi=null}else return d=As(w),d!==null&&No(d),u.blockedOn=w,!1;d.shift()}return!0}function us(u,d,w){Tl(u)&&w.delete(d)}function lf(){Li=!1,qs!==null&&Tl(qs)&&(qs=null),Es!==null&&Tl(Es)&&(Es=null),ls!==null&&Tl(ls)&&(ls=null),Ca.forEach(us),tl.forEach(us)}function wr(u,d){u.blockedOn===d&&(u.blockedOn=null,Li||(Li=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,lf)))}function ai(u){function d(H){return wr(H,u)}if(0<Vo.length){wr(Vo[0],u);for(var w=1;w<Vo.length;w++){var N=Vo[w];N.blockedOn===u&&(N.blockedOn=null)}}for(qs!==null&&wr(qs,u),Es!==null&&wr(Es,u),ls!==null&&wr(ls,u),Ca.forEach(d),tl.forEach(d),w=0;w<Ra.length;w++)N=Ra[w],N.blockedOn===u&&(N.blockedOn=null);for(;0<Ra.length&&(w=Ra[0],w.blockedOn===null);)wl(w),w.blockedOn===null&&Ra.shift()}var Ks=S.ReactCurrentBatchConfig,xa=!0;function Tr(u,d,w,N){var H=Kr,J=Ks.transition;Ks.transition=null;try{Kr=1,qn(u,d,w,N)}finally{Kr=H,Ks.transition=J}}function Ot(u,d,w,N){var H=Kr,J=Ks.transition;Ks.transition=null;try{Kr=4,qn(u,d,w,N)}finally{Kr=H,Ks.transition=J}}function qn(u,d,w,N){if(xa){var H=Fi(u,d,w,N);if(H===null)mh(u,d,N,ir,w),la(u,N);else if(af(H,u,d,w,N))N.stopPropagation();else if(la(u,N),d&4&&-1<Ws.indexOf(u)){for(;H!==null;){var J=As(H);if(J!==null&&Ei(J),J=Fi(u,d,w,N),J===null&&mh(u,d,N,ir,w),J===H)break;H=J}H!==null&&N.stopPropagation()}else mh(u,d,N,null,w)}}var ir=null;function Fi(u,d,w,N){if(ir=null,u=Jr(N),u=Rl(u),u!==null)if(d=en(u),d===null)u=null;else if(w=d.tag,w===13){if(u=vn(d),u!==null)return u;u=null}else if(w===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;u=null}else d!==u&&(u=null);return ir=u,null}function $o(u){switch(u){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pr()){case Sr:return 1;case Ri:return 4;case xi:case oi:return 16;case Vr:return 536870912;default:return 16}default:return 16}}var Ur=null,So=null,Uo=null;function nl(){if(Uo)return Uo;var u,d=So,w=d.length,N,H="value"in Ur?Ur.value:Ur.textContent,J=H.length;for(u=0;u<w&&d[u]===H[u];u++);var $e=w-u;for(N=1;N<=$e&&d[w-N]===H[J-N];N++);return Uo=H.slice(u,1<N?1-N:void 0)}function Sl(u){var d=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&d===13&&(u=13)):u=d,u===10&&(u=13),32<=u||u===13?u:0}function Ti(){return!0}function uf(){return!1}function Ao(u){function d(w,N,H,J,$e){this._reactName=w,this._targetInst=H,this.type=N,this.nativeEvent=J,this.target=$e,this.currentTarget=null;for(var yt in u)u.hasOwnProperty(yt)&&(w=u[yt],this[yt]=w?w(J):J[yt]);return this.isDefaultPrevented=(J.defaultPrevented!=null?J.defaultPrevented:J.returnValue===!1)?Ti:uf,this.isPropagationStopped=uf,this}return et(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var w=this.nativeEvent;w&&(w.preventDefault?w.preventDefault():typeof w.returnValue!="unknown"&&(w.returnValue=!1),this.isDefaultPrevented=Ti)},stopPropagation:function(){var w=this.nativeEvent;w&&(w.stopPropagation?w.stopPropagation():typeof w.cancelBubble!="unknown"&&(w.cancelBubble=!0),this.isPropagationStopped=Ti)},persist:function(){},isPersistent:Ti}),d}var Hl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kf=Ao(Hl),cc=et({},Hl,{view:0,detail:0}),fp=Ao(cc),ks,nh,ws,rh=et({},cc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gp,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==ws&&(ws&&u.type==="mousemove"?(ks=u.screenX-ws.screenX,nh=u.screenY-ws.screenY):nh=ks=0,ws=u),ks)},movementY:function(u){return"movementY"in u?u.movementY:nh}}),ih=Ao(rh),Gl=et({},rh,{dataTransfer:0}),Yf=Ao(Gl),dp=et({},cc,{relatedTarget:0}),oo=Ao(dp),rl=et({},Hl,{animationName:0,elapsedTime:0,pseudoElement:0}),oh=Ao(rl),hp=et({},Hl,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),sh=Ao(hp),i_=et({},Hl,{data:0}),Qf=Ao(i_),fm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ah={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fc(u){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(u):(u=ah[u])?!!d[u]:!1}function gp(){return fc}var mp=et({},cc,{key:function(u){if(u.key){var d=fm[u.key]||u.key;if(d!=="Unidentified")return d}return u.type==="keypress"?(u=Sl(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?pp[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gp,charCode:function(u){return u.type==="keypress"?Sl(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?Sl(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),dm=Ao(mp),lh=et({},rh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uh=Ao(lh),yp=et({},cc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gp}),o_=Ao(yp),ch=et({},Hl,{propertyName:0,elapsedTime:0,pseudoElement:0}),vp=Ao(ch),_p=et({},rh,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),fh=Ao(_p),ca=[9,13,27,32],Pu=c&&"CompositionEvent"in window,Al=null;c&&"documentMode"in document&&(Al=document.documentMode);var bp=c&&"TextEvent"in window&&!Al,Ep=c&&(!Pu||Al&&8<Al&&11>=Al),wp=" ",dc=!1;function Tp(u,d){switch(u){case"keyup":return ca.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hm(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var Il=!1;function hc(u,d){switch(u){case"compositionend":return hm(d);case"keypress":return d.which!==32?null:(dc=!0,wp);case"textInput":return u=d.data,u===wp&&dc?null:u;default:return null}}function s_(u,d){if(Il)return u==="compositionend"||!Pu&&Tp(u,d)?(u=nl(),Uo=So=Ur=null,Il=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return Ep&&d.locale!=="ko"?null:d.data;default:return null}}var a_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mu(u){var d=u&&u.nodeName&&u.nodeName.toLowerCase();return d==="input"?!!a_[u.type]:d==="textarea"}function Xf(u,d,w,N){ro(N),d=gf(d,"onChange"),0<d.length&&(w=new Kf("onChange","change",null,w,N),u.push({event:w,listeners:d}))}var li=null,Cl=null;function l_(u){Op(u,0)}function pc(u){var d=ri(u);if(Ve(d))return u}function u_(u,d){if(u==="change")return d}var ql=!1;if(c){var Fs;if(c){var dh="oninput"in document;if(!dh){var Jf=document.createElement("div");Jf.setAttribute("oninput","return;"),dh=typeof Jf.oninput=="function"}Fs=dh}else Fs=!1;ql=Fs&&(!document.documentMode||9<document.documentMode)}function Sp(){li&&(li.detachEvent("onpropertychange",pm),Cl=li=null)}function pm(u){if(u.propertyName==="value"&&pc(Cl)){var d=[];Xf(d,Cl,u,Jr(u)),nn(l_,d)}}function Ap(u,d,w){u==="focusin"?(Sp(),li=d,Cl=w,li.attachEvent("onpropertychange",pm)):u==="focusout"&&Sp()}function Ip(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return pc(Cl)}function cf(u,d){if(u==="click")return pc(d)}function Vt(u,d){if(u==="input"||u==="change")return pc(d)}function Sn(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var fn=typeof Object.is=="function"?Object.is:Sn;function or(u,d){if(fn(u,d))return!0;if(typeof u!="object"||u===null||typeof d!="object"||d===null)return!1;var w=Object.keys(u),N=Object.keys(d);if(w.length!==N.length)return!1;for(N=0;N<w.length;N++){var H=w[N];if(!f.call(d,H)||!fn(u[H],d[H]))return!1}return!0}function Br(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function $i(u,d){var w=Br(u);u=0;for(var N;w;){if(w.nodeType===3){if(N=u+w.textContent.length,u<=d&&N>=d)return{node:w,offset:d-u};u=N}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=Br(w)}}function _o(u,d){return u&&d?u===d?!0:u&&u.nodeType===3?!1:d&&d.nodeType===3?_o(u,d.parentNode):"contains"in u?u.contains(d):u.compareDocumentPosition?!!(u.compareDocumentPosition(d)&16):!1:!1}function Yi(){for(var u=window,d=_t();d instanceof u.HTMLIFrameElement;){try{var w=typeof d.contentWindow.location.href=="string"}catch{w=!1}if(w)u=d.contentWindow;else break;d=_t(u.document)}return d}function ed(u){var d=u&&u.nodeName&&u.nodeName.toLowerCase();return d&&(d==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||d==="textarea"||u.contentEditable==="true")}function Cp(u){var d=Yi(),w=u.focusedElem,N=u.selectionRange;if(d!==w&&w&&w.ownerDocument&&_o(w.ownerDocument.documentElement,w)){if(N!==null&&ed(w)){if(d=N.start,u=N.end,u===void 0&&(u=d),"selectionStart"in w)w.selectionStart=d,w.selectionEnd=Math.min(u,w.value.length);else if(u=(d=w.ownerDocument||document)&&d.defaultView||window,u.getSelection){u=u.getSelection();var H=w.textContent.length,J=Math.min(N.start,H);N=N.end===void 0?J:Math.min(N.end,H),!u.extend&&J>N&&(H=N,N=J,J=H),H=$i(w,J);var $e=$i(w,N);H&&$e&&(u.rangeCount!==1||u.anchorNode!==H.node||u.anchorOffset!==H.offset||u.focusNode!==$e.node||u.focusOffset!==$e.offset)&&(d=d.createRange(),d.setStart(H.node,H.offset),u.removeAllRanges(),J>N?(u.addRange(d),u.extend($e.node,$e.offset)):(d.setEnd($e.node,$e.offset),u.addRange(d)))}}for(d=[],u=w;u=u.parentNode;)u.nodeType===1&&d.push({element:u,left:u.scrollLeft,top:u.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<d.length;w++)u=d[w],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}}var Ts=c&&"documentMode"in document&&11>=document.documentMode,il=null,Rp=null,fa=null,ff=!1;function td(u,d,w){var N=w.window===w?w.document:w.nodeType===9?w:w.ownerDocument;ff||il==null||il!==_t(N)||(N=il,"selectionStart"in N&&ed(N)?N={start:N.selectionStart,end:N.selectionEnd}:(N=(N.ownerDocument&&N.ownerDocument.defaultView||window).getSelection(),N={anchorNode:N.anchorNode,anchorOffset:N.anchorOffset,focusNode:N.focusNode,focusOffset:N.focusOffset}),fa&&or(fa,N)||(fa=N,N=gf(Rp,"onSelect"),0<N.length&&(d=new Kf("onSelect","select",null,d,w),u.push({event:d,listeners:N}),d.target=il)))}function Ui(u,d){var w={};return w[u.toLowerCase()]=d.toLowerCase(),w["Webkit"+u]="webkit"+d,w["Moz"+u]="moz"+d,w}var df={animationend:Ui("Animation","AnimationEnd"),animationiteration:Ui("Animation","AnimationIteration"),animationstart:Ui("Animation","AnimationStart"),transitionend:Ui("Transition","TransitionEnd")},Wl={},gc={};c&&(gc=document.createElement("div").style,"AnimationEvent"in window||(delete df.animationend.animation,delete df.animationiteration.animation,delete df.animationstart.animation),"TransitionEvent"in window||delete df.transitionend.transition);function hf(u){if(Wl[u])return Wl[u];if(!df[u])return u;var d=df[u],w;for(w in d)if(d.hasOwnProperty(w)&&w in gc)return Wl[u]=d[w];return u}var gm=hf("animationend"),nd=hf("animationiteration"),rd=hf("animationstart"),ol=hf("transitionend"),mc=new Map,xp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ys(u,d){mc.set(u,d),o(d,[u])}for(var hh=0;hh<xp.length;hh++){var id=xp[hh],ph=id.toLowerCase(),Np=id[0].toUpperCase()+id.slice(1);Ys(ph,"on"+Np)}Ys(gm,"onAnimationEnd"),Ys(nd,"onAnimationIteration"),Ys(rd,"onAnimationStart"),Ys("dblclick","onDoubleClick"),Ys("focusin","onFocus"),Ys("focusout","onBlur"),Ys(ol,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ku=new Set("cancel close invalid load scroll toggle".split(" ").concat(Kl));function od(u,d,w){var N=u.type||"unknown-event";u.currentTarget=w,Nt(N,d,void 0,u),u.currentTarget=null}function Op(u,d){d=(d&4)!==0;for(var w=0;w<u.length;w++){var N=u[w],H=N.event;N=N.listeners;e:{var J=void 0;if(d)for(var $e=N.length-1;0<=$e;$e--){var yt=N[$e],Pt=yt.instance,gn=yt.currentTarget;if(yt=yt.listener,Pt!==J&&H.isPropagationStopped())break e;od(H,yt,gn),J=Pt}else for($e=0;$e<N.length;$e++){if(yt=N[$e],Pt=yt.instance,gn=yt.currentTarget,yt=yt.listener,Pt!==J&&H.isPropagationStopped())break e;od(H,yt,gn),J=Pt}}}if(Tt)throw u=Qt,Tt=!1,Qt=null,u}function so(u,d){var w=d[cd];w===void 0&&(w=d[cd]=new Set);var N=u+"__bubble";w.has(N)||(gh(d,u,2,!1),w.add(N))}function Lp(u,d,w){var N=0;d&&(N|=4),gh(w,u,N,d)}var yc="_reactListening"+Math.random().toString(36).slice(2);function Yl(u){if(!u[yc]){u[yc]=!0,r.forEach(function(w){w!=="selectionchange"&&(ku.has(w)||Lp(w,!1,u),Lp(w,!0,u))});var d=u.nodeType===9?u:u.ownerDocument;d===null||d[yc]||(d[yc]=!0,Lp("selectionchange",!1,d))}}function gh(u,d,w,N){switch($o(d)){case 1:var H=Tr;break;case 4:H=Ot;break;default:H=qn}w=H.bind(null,d,w,u),H=void 0,!Te||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(H=!0),N?H!==void 0?u.addEventListener(d,w,{capture:!0,passive:H}):u.addEventListener(d,w,!0):H!==void 0?u.addEventListener(d,w,{passive:H}):u.addEventListener(d,w,!1)}function mh(u,d,w,N,H){var J=N;if((d&1)===0&&(d&2)===0&&N!==null)e:for(;;){if(N===null)return;var $e=N.tag;if($e===3||$e===4){var yt=N.stateNode.containerInfo;if(yt===H||yt.nodeType===8&&yt.parentNode===H)break;if($e===4)for($e=N.return;$e!==null;){var Pt=$e.tag;if((Pt===3||Pt===4)&&(Pt=$e.stateNode.containerInfo,Pt===H||Pt.nodeType===8&&Pt.parentNode===H))return;$e=$e.return}for(;yt!==null;){if($e=Rl(yt),$e===null)return;if(Pt=$e.tag,Pt===5||Pt===6){N=J=$e;continue e}yt=yt.parentNode}}N=N.return}nn(function(){var gn=J,jn=Jr(w),Kn=[];e:{var Bn=mc.get(u);if(Bn!==void 0){var ar=Kf,yr=u;switch(u){case"keypress":if(Sl(w)===0)break e;case"keydown":case"keyup":ar=dm;break;case"focusin":yr="focus",ar=oo;break;case"focusout":yr="blur",ar=oo;break;case"beforeblur":case"afterblur":ar=oo;break;case"click":if(w.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ar=ih;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ar=Yf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ar=o_;break;case gm:case nd:case rd:ar=oh;break;case ol:ar=vp;break;case"scroll":ar=fp;break;case"wheel":ar=fh;break;case"copy":case"cut":case"paste":ar=sh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ar=uh}var _r=(d&4)!==0,Ho=!_r&&u==="scroll",on=_r?Bn!==null?Bn+"Capture":null:Bn;_r=[];for(var Zt=gn,un;Zt!==null;){un=Zt;var Qn=un.stateNode;if(un.tag===5&&Qn!==null&&(un=Qn,on!==null&&(Qn=be(Zt,on),Qn!=null&&_r.push(pf(Zt,Qn,un)))),Ho)break;Zt=Zt.return}0<_r.length&&(Bn=new ar(Bn,yr,null,w,jn),Kn.push({event:Bn,listeners:_r}))}}if((d&7)===0){e:{if(Bn=u==="mouseover"||u==="pointerover",ar=u==="mouseout"||u==="pointerout",Bn&&w!==bi&&(yr=w.relatedTarget||w.fromElement)&&(Rl(yr)||yr[Xo]))break e;if((ar||Bn)&&(Bn=jn.window===jn?jn:(Bn=jn.ownerDocument)?Bn.defaultView||Bn.parentWindow:window,ar?(yr=w.relatedTarget||w.toElement,ar=gn,yr=yr?Rl(yr):null,yr!==null&&(Ho=en(yr),yr!==Ho||yr.tag!==5&&yr.tag!==6)&&(yr=null)):(ar=null,yr=gn),ar!==yr)){if(_r=ih,Qn="onMouseLeave",on="onMouseEnter",Zt="mouse",(u==="pointerout"||u==="pointerover")&&(_r=uh,Qn="onPointerLeave",on="onPointerEnter",Zt="pointer"),Ho=ar==null?Bn:ri(ar),un=yr==null?Bn:ri(yr),Bn=new _r(Qn,Zt+"leave",ar,w,jn),Bn.target=Ho,Bn.relatedTarget=un,Qn=null,Rl(jn)===gn&&(_r=new _r(on,Zt+"enter",yr,w,jn),_r.target=un,_r.relatedTarget=Ho,Qn=_r),Ho=Qn,ar&&yr)t:{for(_r=ar,on=yr,Zt=0,un=_r;un;un=vc(un))Zt++;for(un=0,Qn=on;Qn;Qn=vc(Qn))un++;for(;0<Zt-un;)_r=vc(_r),Zt--;for(;0<un-Zt;)on=vc(on),un--;for(;Zt--;){if(_r===on||on!==null&&_r===on.alternate)break t;_r=vc(_r),on=vc(on)}_r=null}else _r=null;ar!==null&&Bo(Kn,Bn,ar,_r,!1),yr!==null&&Ho!==null&&Bo(Kn,Ho,yr,_r,!0)}}e:{if(Bn=gn?ri(gn):window,ar=Bn.nodeName&&Bn.nodeName.toLowerCase(),ar==="select"||ar==="input"&&Bn.type==="file")var Ar=u_;else if(Mu(Bn))if(ql)Ar=Vt;else{Ar=Ip;var Mr=Ap}else(ar=Bn.nodeName)&&ar.toLowerCase()==="input"&&(Bn.type==="checkbox"||Bn.type==="radio")&&(Ar=cf);if(Ar&&(Ar=Ar(u,gn))){Xf(Kn,Ar,w,jn);break e}Mr&&Mr(u,Bn,gn),u==="focusout"&&(Mr=Bn._wrapperState)&&Mr.controlled&&Bn.type==="number"&&de(Bn,"number",Bn.value)}switch(Mr=gn?ri(gn):window,u){case"focusin":(Mu(Mr)||Mr.contentEditable==="true")&&(il=Mr,Rp=gn,fa=null);break;case"focusout":fa=Rp=il=null;break;case"mousedown":ff=!0;break;case"contextmenu":case"mouseup":case"dragend":ff=!1,td(Kn,w,jn);break;case"selectionchange":if(Ts)break;case"keydown":case"keyup":td(Kn,w,jn)}var Or;if(Pu)e:{switch(u){case"compositionstart":var zr="onCompositionStart";break e;case"compositionend":zr="onCompositionEnd";break e;case"compositionupdate":zr="onCompositionUpdate";break e}zr=void 0}else Il?Tp(u,w)&&(zr="onCompositionEnd"):u==="keydown"&&w.keyCode===229&&(zr="onCompositionStart");zr&&(Ep&&w.locale!=="ko"&&(Il||zr!=="onCompositionStart"?zr==="onCompositionEnd"&&Il&&(Or=nl()):(Ur=jn,So="value"in Ur?Ur.value:Ur.textContent,Il=!0)),Mr=gf(gn,zr),0<Mr.length&&(zr=new Qf(zr,u,null,w,jn),Kn.push({event:zr,listeners:Mr}),Or?zr.data=Or:(Or=hm(w),Or!==null&&(zr.data=Or)))),(Or=bp?hc(u,w):s_(u,w))&&(gn=gf(gn,"onBeforeInput"),0<gn.length&&(jn=new Qf("onBeforeInput","beforeinput",null,w,jn),Kn.push({event:jn,listeners:gn}),jn.data=Or))}Op(Kn,d)})}function pf(u,d,w){return{instance:u,listener:d,currentTarget:w}}function gf(u,d){for(var w=d+"Capture",N=[];u!==null;){var H=u,J=H.stateNode;H.tag===5&&J!==null&&(H=J,J=be(u,w),J!=null&&N.unshift(pf(u,J,H)),J=be(u,d),J!=null&&N.push(pf(u,J,H))),u=u.return}return N}function vc(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5);return u||null}function Bo(u,d,w,N,H){for(var J=d._reactName,$e=[];w!==null&&w!==N;){var yt=w,Pt=yt.alternate,gn=yt.stateNode;if(Pt!==null&&Pt===N)break;yt.tag===5&&gn!==null&&(yt=gn,H?(Pt=be(w,J),Pt!=null&&$e.unshift(pf(w,Pt,yt))):H||(Pt=be(w,J),Pt!=null&&$e.push(pf(w,Pt,yt)))),w=w.return}$e.length!==0&&u.push({event:d,listeners:$e})}var Ss=/\r\n?/g,mm=/\u0000|\uFFFD/g;function Dp(u){return(typeof u=="string"?u:""+u).replace(Ss,`
`).replace(mm,"")}function Fu(u,d,w){if(d=Dp(d),Dp(u)!==d&&w)throw Error(n(425))}function sd(){}var ad=null,$u=null;function ld(u,d){return u==="textarea"||u==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var Ql=typeof setTimeout=="function"?setTimeout:void 0,ud=typeof clearTimeout=="function"?clearTimeout:void 0,Uu=typeof Promise=="function"?Promise:void 0,mf=typeof queueMicrotask=="function"?queueMicrotask:typeof Uu<"u"?function(u){return Uu.resolve(null).then(u).catch(yf)}:Ql;function yf(u){setTimeout(function(){throw u})}function Pp(u,d){var w=d,N=0;do{var H=w.nextSibling;if(u.removeChild(w),H&&H.nodeType===8)if(w=H.data,w==="/$"){if(N===0){u.removeChild(H),ai(d);return}N--}else w!=="$"&&w!=="$?"&&w!=="$!"||N++;w=H}while(w);ai(d)}function Xl(u){for(;u!=null;u=u.nextSibling){var d=u.nodeType;if(d===1||d===3)break;if(d===8){if(d=u.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return u}function ym(u){u=u.previousSibling;for(var d=0;u;){if(u.nodeType===8){var w=u.data;if(w==="$"||w==="$!"||w==="$?"){if(d===0)return u;d--}else w==="/$"&&d++}u=u.previousSibling}return null}var vf=Math.random().toString(36).slice(2),sl="__reactFiber$"+vf,Jl="__reactProps$"+vf,Xo="__reactContainer$"+vf,cd="__reactEvents$"+vf,Qe="__reactListeners$"+vf,_c="__reactHandles$"+vf;function Rl(u){var d=u[sl];if(d)return d;for(var w=u.parentNode;w;){if(d=w[Xo]||w[sl]){if(w=d.alternate,d.child!==null||w!==null&&w.child!==null)for(u=ym(u);u!==null;){if(w=u[sl])return w;u=ym(u)}return d}u=w,w=u.parentNode}return null}function As(u){return u=u[sl]||u[Xo],!u||u.tag!==5&&u.tag!==6&&u.tag!==13&&u.tag!==3?null:u}function ri(u){if(u.tag===5||u.tag===6)return u.stateNode;throw Error(n(33))}function fd(u){return u[Jl]||null}var Mp=[],bc=-1;function $s(u){return{current:u}}function ao(u){0>bc||(u.current=Mp[bc],Mp[bc]=null,bc--)}function lo(u,d){bc++,Mp[bc]=u.current,u.current=d}var eu={},Is=$s(eu),Us=$s(!1),cs=eu;function Ec(u,d){var w=u.type.contextTypes;if(!w)return eu;var N=u.stateNode;if(N&&N.__reactInternalMemoizedUnmaskedChildContext===d)return N.__reactInternalMemoizedMaskedChildContext;var H={},J;for(J in w)H[J]=d[J];return N&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=d,u.__reactInternalMemoizedMaskedChildContext=H),H}function Qs(u){return u=u.childContextTypes,u!=null}function yh(){ao(Us),ao(Is)}function vm(u,d,w){if(Is.current!==eu)throw Error(n(168));lo(Is,d),lo(Us,w)}function _m(u,d,w){var N=u.stateNode;if(d=d.childContextTypes,typeof N.getChildContext!="function")return w;N=N.getChildContext();for(var H in N)if(!(H in d))throw Error(n(108,jt(u)||"Unknown",H));return et({},w,N)}function Na(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||eu,cs=Is.current,lo(Is,u),lo(Us,Us.current),!0}function kp(u,d,w){var N=u.stateNode;if(!N)throw Error(n(169));w?(u=_m(u,d,cs),N.__reactInternalMemoizedMergedChildContext=u,ao(Us),ao(Is),lo(Is,u)):ao(Us),lo(Us,w)}var tu=null,dd=!1,Fp=!1;function bm(u){tu===null?tu=[u]:tu.push(u)}function wc(u){dd=!0,bm(u)}function Bu(){if(!Fp&&tu!==null){Fp=!0;var u=0,d=Kr;try{var w=tu;for(Kr=1;u<w.length;u++){var N=w[u];do N=N(!0);while(N!==null)}tu=null,dd=!1}catch(H){throw tu!==null&&(tu=tu.slice(u+1)),ze(Sr,Bu),H}finally{Kr=d,Fp=!1}}return null}var _f=[],Cs=0,vh=null,_h=0,Oa=[],Xs=0,Tc=null,xl=1,Nl="";function Sc(u,d){_f[Cs++]=_h,_f[Cs++]=vh,vh=u,_h=d}function Em(u,d,w){Oa[Xs++]=xl,Oa[Xs++]=Nl,Oa[Xs++]=Tc,Tc=u;var N=xl;u=Nl;var H=32-po(N)-1;N&=~(1<<H),w+=1;var J=32-po(d)+H;if(30<J){var $e=H-H%5;J=(N&(1<<$e)-1).toString(32),N>>=$e,H-=$e,xl=1<<32-po(d)+H|w<<H|N,Nl=J+u}else xl=1<<J|w<<H|N,Nl=u}function bf(u){u.return!==null&&(Sc(u,1),Em(u,1,0))}function Ac(u){for(;u===vh;)vh=_f[--Cs],_f[Cs]=null,_h=_f[--Cs],_f[Cs]=null;for(;u===Tc;)Tc=Oa[--Xs],Oa[Xs]=null,Nl=Oa[--Xs],Oa[Xs]=null,xl=Oa[--Xs],Oa[Xs]=null}var fs=null,da=null,uo=!1,al=null;function La(u,d){var w=Pl(5,null,null,0);w.elementType="DELETED",w.stateNode=d,w.return=u,d=u.deletions,d===null?(u.deletions=[w],u.flags|=16):d.push(w)}function Ic(u,d){switch(u.tag){case 5:var w=u.type;return d=d.nodeType!==1||w.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(u.stateNode=d,fs=u,da=Xl(d.firstChild),!0):!1;case 6:return d=u.pendingProps===""||d.nodeType!==3?null:d,d!==null?(u.stateNode=d,fs=u,da=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(w=Tc!==null?{id:xl,overflow:Nl}:null,u.memoizedState={dehydrated:d,treeContext:w,retryLane:1073741824},w=Pl(18,null,null,0),w.stateNode=d,w.return=u,u.child=w,fs=u,da=null,!0):!1;default:return!1}}function ll(u){return(u.mode&1)!==0&&(u.flags&128)===0}function Rs(u){if(uo){var d=da;if(d){var w=d;if(!Ic(u,d)){if(ll(u))throw Error(n(418));d=Xl(w.nextSibling);var N=fs;d&&Ic(u,d)?La(N,w):(u.flags=u.flags&-4097|2,uo=!1,fs=u)}}else{if(ll(u))throw Error(n(418));u.flags=u.flags&-4097|2,uo=!1,fs=u}}}function wm(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;fs=u}function Zu(u){if(u!==fs)return!1;if(!uo)return wm(u),uo=!0,!1;var d;if((d=u.tag!==3)&&!(d=u.tag!==5)&&(d=u.type,d=d!=="head"&&d!=="body"&&!ld(u.type,u.memoizedProps)),d&&(d=da)){if(ll(u))throw $p(),Error(n(418));for(;d;)La(u,d),d=Xl(d.nextSibling)}if(wm(u),u.tag===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(n(317));e:{for(u=u.nextSibling,d=0;u;){if(u.nodeType===8){var w=u.data;if(w==="/$"){if(d===0){da=Xl(u.nextSibling);break e}d--}else w!=="$"&&w!=="$!"&&w!=="$?"||d++}u=u.nextSibling}da=null}}else da=fs?Xl(u.stateNode.nextSibling):null;return!0}function $p(){for(var u=da;u;)u=Xl(u.nextSibling)}function Ol(){da=fs=null,uo=!1}function ul(u){al===null?al=[u]:al.push(u)}var Tm=S.ReactCurrentBatchConfig;function Ef(u,d,w){if(u=w.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(n(309));var N=w.stateNode}if(!N)throw Error(n(147,u));var H=N,J=""+u;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===J?d.ref:(d=function($e){var yt=H.refs;$e===null?delete yt[J]:yt[J]=$e},d._stringRef=J,d)}if(typeof u!="string")throw Error(n(284));if(!w._owner)throw Error(n(290,u))}return u}function Cc(u,d){throw u=Object.prototype.toString.call(d),Error(n(31,u==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":u))}function bh(u){var d=u._init;return d(u._payload)}function Eh(u){function d(on,Zt){if(u){var un=on.deletions;un===null?(on.deletions=[Zt],on.flags|=16):un.push(Zt)}}function w(on,Zt){if(!u)return null;for(;Zt!==null;)d(on,Zt),Zt=Zt.sibling;return null}function N(on,Zt){for(on=new Map;Zt!==null;)Zt.key!==null?on.set(Zt.key,Zt):on.set(Zt.index,Zt),Zt=Zt.sibling;return on}function H(on,Zt){return on=pu(on,Zt),on.index=0,on.sibling=null,on}function J(on,Zt,un){return on.index=un,u?(un=on.alternate,un!==null?(un=un.index,un<Zt?(on.flags|=2,Zt):un):(on.flags|=2,Zt)):(on.flags|=1048576,Zt)}function $e(on){return u&&on.alternate===null&&(on.flags|=2),on}function yt(on,Zt,un,Qn){return Zt===null||Zt.tag!==6?(Zt=A_(un,on.mode,Qn),Zt.return=on,Zt):(Zt=H(Zt,un),Zt.return=on,Zt)}function Pt(on,Zt,un,Qn){var Ar=un.type;return Ar===V?jn(on,Zt,un.props.children,Qn,un.key):Zt!==null&&(Zt.elementType===Ar||typeof Ar=="object"&&Ar!==null&&Ar.$$typeof===Me&&bh(Ar)===Zt.type)?(Qn=H(Zt,un.props),Qn.ref=Ef(on,Zt,un),Qn.return=on,Qn):(Qn=Fm(un.type,un.key,un.props,null,on.mode,Qn),Qn.ref=Ef(on,Zt,un),Qn.return=on,Qn)}function gn(on,Zt,un,Qn){return Zt===null||Zt.tag!==4||Zt.stateNode.containerInfo!==un.containerInfo||Zt.stateNode.implementation!==un.implementation?(Zt=I_(un,on.mode,Qn),Zt.return=on,Zt):(Zt=H(Zt,un.children||[]),Zt.return=on,Zt)}function jn(on,Zt,un,Qn,Ar){return Zt===null||Zt.tag!==7?(Zt=Ed(un,on.mode,Qn,Ar),Zt.return=on,Zt):(Zt=H(Zt,un),Zt.return=on,Zt)}function Kn(on,Zt,un){if(typeof Zt=="string"&&Zt!==""||typeof Zt=="number")return Zt=A_(""+Zt,on.mode,un),Zt.return=on,Zt;if(typeof Zt=="object"&&Zt!==null){switch(Zt.$$typeof){case O:return un=Fm(Zt.type,Zt.key,Zt.props,null,on.mode,un),un.ref=Ef(on,null,Zt),un.return=on,un;case $:return Zt=I_(Zt,on.mode,un),Zt.return=on,Zt;case Me:var Qn=Zt._init;return Kn(on,Qn(Zt._payload),un)}if(ot(Zt)||Ye(Zt))return Zt=Ed(Zt,on.mode,un,null),Zt.return=on,Zt;Cc(on,Zt)}return null}function Bn(on,Zt,un,Qn){var Ar=Zt!==null?Zt.key:null;if(typeof un=="string"&&un!==""||typeof un=="number")return Ar!==null?null:yt(on,Zt,""+un,Qn);if(typeof un=="object"&&un!==null){switch(un.$$typeof){case O:return un.key===Ar?Pt(on,Zt,un,Qn):null;case $:return un.key===Ar?gn(on,Zt,un,Qn):null;case Me:return Ar=un._init,Bn(on,Zt,Ar(un._payload),Qn)}if(ot(un)||Ye(un))return Ar!==null?null:jn(on,Zt,un,Qn,null);Cc(on,un)}return null}function ar(on,Zt,un,Qn,Ar){if(typeof Qn=="string"&&Qn!==""||typeof Qn=="number")return on=on.get(un)||null,yt(Zt,on,""+Qn,Ar);if(typeof Qn=="object"&&Qn!==null){switch(Qn.$$typeof){case O:return on=on.get(Qn.key===null?un:Qn.key)||null,Pt(Zt,on,Qn,Ar);case $:return on=on.get(Qn.key===null?un:Qn.key)||null,gn(Zt,on,Qn,Ar);case Me:var Mr=Qn._init;return ar(on,Zt,un,Mr(Qn._payload),Ar)}if(ot(Qn)||Ye(Qn))return on=on.get(un)||null,jn(Zt,on,Qn,Ar,null);Cc(Zt,Qn)}return null}function yr(on,Zt,un,Qn){for(var Ar=null,Mr=null,Or=Zt,zr=Zt=0,Ls=null;Or!==null&&zr<un.length;zr++){Or.index>zr?(Ls=Or,Or=null):Ls=Or.sibling;var Wi=Bn(on,Or,un[zr],Qn);if(Wi===null){Or===null&&(Or=Ls);break}u&&Or&&Wi.alternate===null&&d(on,Or),Zt=J(Wi,Zt,zr),Mr===null?Ar=Wi:Mr.sibling=Wi,Mr=Wi,Or=Ls}if(zr===un.length)return w(on,Or),uo&&Sc(on,zr),Ar;if(Or===null){for(;zr<un.length;zr++)Or=Kn(on,un[zr],Qn),Or!==null&&(Zt=J(Or,Zt,zr),Mr===null?Ar=Or:Mr.sibling=Or,Mr=Or);return uo&&Sc(on,zr),Ar}for(Or=N(on,Or);zr<un.length;zr++)Ls=ar(Or,on,zr,un[zr],Qn),Ls!==null&&(u&&Ls.alternate!==null&&Or.delete(Ls.key===null?zr:Ls.key),Zt=J(Ls,Zt,zr),Mr===null?Ar=Ls:Mr.sibling=Ls,Mr=Ls);return u&&Or.forEach(function(Of){return d(on,Of)}),uo&&Sc(on,zr),Ar}function _r(on,Zt,un,Qn){var Ar=Ye(un);if(typeof Ar!="function")throw Error(n(150));if(un=Ar.call(un),un==null)throw Error(n(151));for(var Mr=Ar=null,Or=Zt,zr=Zt=0,Ls=null,Wi=un.next();Or!==null&&!Wi.done;zr++,Wi=un.next()){Or.index>zr?(Ls=Or,Or=null):Ls=Or.sibling;var Of=Bn(on,Or,Wi.value,Qn);if(Of===null){Or===null&&(Or=Ls);break}u&&Or&&Of.alternate===null&&d(on,Or),Zt=J(Of,Zt,zr),Mr===null?Ar=Of:Mr.sibling=Of,Mr=Of,Or=Ls}if(Wi.done)return w(on,Or),uo&&Sc(on,zr),Ar;if(Or===null){for(;!Wi.done;zr++,Wi=un.next())Wi=Kn(on,Wi.value,Qn),Wi!==null&&(Zt=J(Wi,Zt,zr),Mr===null?Ar=Wi:Mr.sibling=Wi,Mr=Wi);return uo&&Sc(on,zr),Ar}for(Or=N(on,Or);!Wi.done;zr++,Wi=un.next())Wi=ar(Or,on,zr,Wi.value,Qn),Wi!==null&&(u&&Wi.alternate!==null&&Or.delete(Wi.key===null?zr:Wi.key),Zt=J(Wi,Zt,zr),Mr===null?Ar=Wi:Mr.sibling=Wi,Mr=Wi);return u&&Or.forEach(function(hI){return d(on,hI)}),uo&&Sc(on,zr),Ar}function Ho(on,Zt,un,Qn){if(typeof un=="object"&&un!==null&&un.type===V&&un.key===null&&(un=un.props.children),typeof un=="object"&&un!==null){switch(un.$$typeof){case O:e:{for(var Ar=un.key,Mr=Zt;Mr!==null;){if(Mr.key===Ar){if(Ar=un.type,Ar===V){if(Mr.tag===7){w(on,Mr.sibling),Zt=H(Mr,un.props.children),Zt.return=on,on=Zt;break e}}else if(Mr.elementType===Ar||typeof Ar=="object"&&Ar!==null&&Ar.$$typeof===Me&&bh(Ar)===Mr.type){w(on,Mr.sibling),Zt=H(Mr,un.props),Zt.ref=Ef(on,Mr,un),Zt.return=on,on=Zt;break e}w(on,Mr);break}else d(on,Mr);Mr=Mr.sibling}un.type===V?(Zt=Ed(un.props.children,on.mode,Qn,un.key),Zt.return=on,on=Zt):(Qn=Fm(un.type,un.key,un.props,null,on.mode,Qn),Qn.ref=Ef(on,Zt,un),Qn.return=on,on=Qn)}return $e(on);case $:e:{for(Mr=un.key;Zt!==null;){if(Zt.key===Mr)if(Zt.tag===4&&Zt.stateNode.containerInfo===un.containerInfo&&Zt.stateNode.implementation===un.implementation){w(on,Zt.sibling),Zt=H(Zt,un.children||[]),Zt.return=on,on=Zt;break e}else{w(on,Zt);break}else d(on,Zt);Zt=Zt.sibling}Zt=I_(un,on.mode,Qn),Zt.return=on,on=Zt}return $e(on);case Me:return Mr=un._init,Ho(on,Zt,Mr(un._payload),Qn)}if(ot(un))return yr(on,Zt,un,Qn);if(Ye(un))return _r(on,Zt,un,Qn);Cc(on,un)}return typeof un=="string"&&un!==""||typeof un=="number"?(un=""+un,Zt!==null&&Zt.tag===6?(w(on,Zt.sibling),Zt=H(Zt,un),Zt.return=on,on=Zt):(w(on,Zt),Zt=A_(un,on.mode,Qn),Zt.return=on,on=Zt),$e(on)):w(on,Zt)}return Ho}var Io=Eh(!0),hd=Eh(!1),pd=$s(null),Js=null,ju=null,Rc=null;function nu(){Rc=ju=Js=null}function gd(u){var d=pd.current;ao(pd),u._currentValue=d}function ds(u,d,w){for(;u!==null;){var N=u.alternate;if((u.childLanes&d)!==d?(u.childLanes|=d,N!==null&&(N.childLanes|=d)):N!==null&&(N.childLanes&d)!==d&&(N.childLanes|=d),u===w)break;u=u.return}}function ru(u,d){Js=u,Rc=ju=null,u=u.dependencies,u!==null&&u.firstContext!==null&&((u.lanes&d)!==0&&(Eo=!0),u.firstContext=null)}function ha(u){var d=u._currentValue;if(Rc!==u)if(u={context:u,memoizedValue:d,next:null},ju===null){if(Js===null)throw Error(n(308));ju=u,Js.dependencies={lanes:0,firstContext:u}}else ju=ju.next=u;return d}var xc=null;function wh(u){xc===null?xc=[u]:xc.push(u)}function md(u,d,w,N){var H=d.interleaved;return H===null?(w.next=w,wh(d)):(w.next=H.next,H.next=w),d.interleaved=w,iu(u,N)}function iu(u,d){u.lanes|=d;var w=u.alternate;for(w!==null&&(w.lanes|=d),w=u,u=u.return;u!==null;)u.childLanes|=d,w=u.alternate,w!==null&&(w.childLanes|=d),w=u,u=u.return;return w.tag===3?w.stateNode:null}var pa=!1;function Th(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sh(u,d){u=u.updateQueue,d.updateQueue===u&&(d.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function Da(u,d){return{eventTime:u,lane:d,tag:0,payload:null,callback:null,next:null}}function Pa(u,d,w){var N=u.updateQueue;if(N===null)return null;if(N=N.shared,(ji&2)!==0){var H=N.pending;return H===null?d.next=d:(d.next=H.next,H.next=d),N.pending=d,iu(u,w)}return H=N.interleaved,H===null?(d.next=d,wh(N)):(d.next=H.next,H.next=d),N.interleaved=d,iu(u,w)}function L(u,d,w){if(d=d.updateQueue,d!==null&&(d=d.shared,(w&4194240)!==0)){var N=d.lanes;N&=u.pendingLanes,w|=N,d.lanes=w,hi(u,w)}}function R(u,d){var w=u.updateQueue,N=u.alternate;if(N!==null&&(N=N.updateQueue,w===N)){var H=null,J=null;if(w=w.firstBaseUpdate,w!==null){do{var $e={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};J===null?H=J=$e:J=J.next=$e,w=w.next}while(w!==null);J===null?H=J=d:J=J.next=d}else H=J=d;w={baseState:N.baseState,firstBaseUpdate:H,lastBaseUpdate:J,shared:N.shared,effects:N.effects},u.updateQueue=w;return}u=w.lastBaseUpdate,u===null?w.firstBaseUpdate=d:u.next=d,w.lastBaseUpdate=d}function P(u,d,w,N){var H=u.updateQueue;pa=!1;var J=H.firstBaseUpdate,$e=H.lastBaseUpdate,yt=H.shared.pending;if(yt!==null){H.shared.pending=null;var Pt=yt,gn=Pt.next;Pt.next=null,$e===null?J=gn:$e.next=gn,$e=Pt;var jn=u.alternate;jn!==null&&(jn=jn.updateQueue,yt=jn.lastBaseUpdate,yt!==$e&&(yt===null?jn.firstBaseUpdate=gn:yt.next=gn,jn.lastBaseUpdate=Pt))}if(J!==null){var Kn=H.baseState;$e=0,jn=gn=Pt=null,yt=J;do{var Bn=yt.lane,ar=yt.eventTime;if((N&Bn)===Bn){jn!==null&&(jn=jn.next={eventTime:ar,lane:0,tag:yt.tag,payload:yt.payload,callback:yt.callback,next:null});e:{var yr=u,_r=yt;switch(Bn=d,ar=w,_r.tag){case 1:if(yr=_r.payload,typeof yr=="function"){Kn=yr.call(ar,Kn,Bn);break e}Kn=yr;break e;case 3:yr.flags=yr.flags&-65537|128;case 0:if(yr=_r.payload,Bn=typeof yr=="function"?yr.call(ar,Kn,Bn):yr,Bn==null)break e;Kn=et({},Kn,Bn);break e;case 2:pa=!0}}yt.callback!==null&&yt.lane!==0&&(u.flags|=64,Bn=H.effects,Bn===null?H.effects=[yt]:Bn.push(yt))}else ar={eventTime:ar,lane:Bn,tag:yt.tag,payload:yt.payload,callback:yt.callback,next:null},jn===null?(gn=jn=ar,Pt=Kn):jn=jn.next=ar,$e|=Bn;if(yt=yt.next,yt===null){if(yt=H.shared.pending,yt===null)break;Bn=yt,yt=Bn.next,Bn.next=null,H.lastBaseUpdate=Bn,H.shared.pending=null}}while(!0);if(jn===null&&(Pt=Kn),H.baseState=Pt,H.firstBaseUpdate=gn,H.lastBaseUpdate=jn,d=H.shared.interleaved,d!==null){H=d;do $e|=H.lane,H=H.next;while(H!==d)}else J===null&&(H.shared.lanes=0);If|=$e,u.lanes=$e,u.memoizedState=Kn}}function z(u,d,w){if(u=d.effects,d.effects=null,u!==null)for(d=0;d<u.length;d++){var N=u[d],H=N.callback;if(H!==null){if(N.callback=null,N=w,typeof H!="function")throw Error(n(191,H));H.call(N)}}}var W={},q=$s(W),Z=$s(W),K=$s(W);function le(u){if(u===W)throw Error(n(174));return u}function _e(u,d){switch(lo(K,d),lo(Z,u),lo(q,W),u=d.nodeType,u){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:Wt(null,"");break;default:u=u===8?d.parentNode:d,d=u.namespaceURI||null,u=u.tagName,d=Wt(d,u)}ao(q),lo(q,d)}function fe(){ao(q),ao(Z),ao(K)}function Q(u){le(K.current);var d=le(q.current),w=Wt(d,u.type);d!==w&&(lo(Z,u),lo(q,w))}function ce(u){Z.current===u&&(ao(q),ao(Z))}var ae=$s(0);function He(u){for(var d=u;d!==null;){if(d.tag===13){var w=d.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||w.data==="$?"||w.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var Oe=[];function Be(){for(var u=0;u<Oe.length;u++)Oe[u]._workInProgressVersionPrimary=null;Oe.length=0}var Ke=S.ReactCurrentDispatcher,me=S.ReactCurrentBatchConfig,Le=0,ge=null,Fe=null,F=null,se=!1,te=!1,re=0,G=0;function Ie(){throw Error(n(321))}function we(u,d){if(d===null)return!1;for(var w=0;w<d.length&&w<u.length;w++)if(!fn(u[w],d[w]))return!1;return!0}function ke(u,d,w,N,H,J){if(Le=J,ge=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Ke.current=u===null||u.memoizedState===null?Fn:Zn,u=w(N,H),te){J=0;do{if(te=!1,re=0,25<=J)throw Error(n(301));J+=1,F=Fe=null,d.updateQueue=null,Ke.current=Rt,u=w(N,H)}while(te)}if(Ke.current=Dn,d=Fe!==null&&Fe.next!==null,Le=0,F=Fe=ge=null,se=!1,d)throw Error(n(300));return u}function Ae(){var u=re!==0;return re=0,u}function ue(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return F===null?ge.memoizedState=F=u:F=F.next=u,F}function Se(){if(Fe===null){var u=ge.alternate;u=u!==null?u.memoizedState:null}else u=Fe.next;var d=F===null?ge.memoizedState:F.next;if(d!==null)F=d,Fe=u;else{if(u===null)throw Error(n(310));Fe=u,u={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},F===null?ge.memoizedState=F=u:F=F.next=u}return F}function qe(u,d){return typeof d=="function"?d(u):d}function gt(u){var d=Se(),w=d.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=u;var N=Fe,H=N.baseQueue,J=w.pending;if(J!==null){if(H!==null){var $e=H.next;H.next=J.next,J.next=$e}N.baseQueue=H=J,w.pending=null}if(H!==null){J=H.next,N=N.baseState;var yt=$e=null,Pt=null,gn=J;do{var jn=gn.lane;if((Le&jn)===jn)Pt!==null&&(Pt=Pt.next={lane:0,action:gn.action,hasEagerState:gn.hasEagerState,eagerState:gn.eagerState,next:null}),N=gn.hasEagerState?gn.eagerState:u(N,gn.action);else{var Kn={lane:jn,action:gn.action,hasEagerState:gn.hasEagerState,eagerState:gn.eagerState,next:null};Pt===null?(yt=Pt=Kn,$e=N):Pt=Pt.next=Kn,ge.lanes|=jn,If|=jn}gn=gn.next}while(gn!==null&&gn!==J);Pt===null?$e=N:Pt.next=yt,fn(N,d.memoizedState)||(Eo=!0),d.memoizedState=N,d.baseState=$e,d.baseQueue=Pt,w.lastRenderedState=N}if(u=w.interleaved,u!==null){H=u;do J=H.lane,ge.lanes|=J,If|=J,H=H.next;while(H!==u)}else H===null&&(w.lanes=0);return[d.memoizedState,w.dispatch]}function ut(u){var d=Se(),w=d.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=u;var N=w.dispatch,H=w.pending,J=d.memoizedState;if(H!==null){w.pending=null;var $e=H=H.next;do J=u(J,$e.action),$e=$e.next;while($e!==H);fn(J,d.memoizedState)||(Eo=!0),d.memoizedState=J,d.baseQueue===null&&(d.baseState=J),w.lastRenderedState=J}return[J,N]}function mt(){}function dt(u,d){var w=ge,N=Se(),H=d(),J=!fn(N.memoizedState,H);if(J&&(N.memoizedState=H,Eo=!0),N=N.queue,Xt(Ft.bind(null,w,N,u),[u]),N.getSnapshot!==d||J||F!==null&&F.memoizedState.tag&1){if(w.flags|=2048,bt(9,Ut.bind(null,w,N,H,d),void 0,null),Os===null)throw Error(n(349));(Le&30)!==0||zt(w,d,H)}return H}function zt(u,d,w){u.flags|=16384,u={getSnapshot:d,value:w},d=ge.updateQueue,d===null?(d={lastEffect:null,stores:null},ge.updateQueue=d,d.stores=[u]):(w=d.stores,w===null?d.stores=[u]:w.push(u))}function Ut(u,d,w,N){d.value=w,d.getSnapshot=N,Bt(d)&&Nn(u)}function Ft(u,d,w){return w(function(){Bt(d)&&Nn(u)})}function Bt(u){var d=u.getSnapshot;u=u.value;try{var w=d();return!fn(u,w)}catch{return!0}}function Nn(u){var d=iu(u,1);d!==null&&hu(d,u,1,-1)}function lt(u){var d=ue();return typeof u=="function"&&(u=u()),d.memoizedState=d.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qe,lastRenderedState:u},d.queue=u,u=u.dispatch=Yn.bind(null,ge,u),[d.memoizedState,u]}function bt(u,d,w,N){return u={tag:u,create:d,destroy:w,deps:N,next:null},d=ge.updateQueue,d===null?(d={lastEffect:null,stores:null},ge.updateQueue=d,d.lastEffect=u.next=u):(w=d.lastEffect,w===null?d.lastEffect=u.next=u:(N=w.next,w.next=u,u.next=N,d.lastEffect=u)),u}function tn(){return Se().memoizedState}function Lt(u,d,w,N){var H=ue();ge.flags|=u,H.memoizedState=bt(1|d,w,void 0,N===void 0?null:N)}function an(u,d,w,N){var H=Se();N=N===void 0?null:N;var J=void 0;if(Fe!==null){var $e=Fe.memoizedState;if(J=$e.destroy,N!==null&&we(N,$e.deps)){H.memoizedState=bt(d,w,J,N);return}}ge.flags|=u,H.memoizedState=bt(1|d,w,J,N)}function ln(u,d){return Lt(8390656,8,u,d)}function Xt(u,d){return an(2048,8,u,d)}function Vn(u,d){return an(4,2,u,d)}function Mn(u,d){return an(4,4,u,d)}function gr(u,d){if(typeof d=="function")return u=u(),d(u),function(){d(null)};if(d!=null)return u=u(),d.current=u,function(){d.current=null}}function vr(u,d,w){return w=w!=null?w.concat([u]):null,an(4,4,gr.bind(null,d,u),w)}function Ct(){}function rn(u,d){var w=Se();d=d===void 0?null:d;var N=w.memoizedState;return N!==null&&d!==null&&we(d,N[1])?N[0]:(w.memoizedState=[u,d],u)}function Ht(u,d){var w=Se();d=d===void 0?null:d;var N=w.memoizedState;return N!==null&&d!==null&&we(d,N[1])?N[0]:(u=u(),w.memoizedState=[u,d],u)}function yn(u,d,w){return(Le&21)===0?(u.baseState&&(u.baseState=!1,Eo=!0),u.memoizedState=w):(fn(w,d)||(w=Rr(),ge.lanes|=w,If|=w,u.baseState=!0),d)}function In(u,d){var w=Kr;Kr=w!==0&&4>w?w:4,u(!0);var N=me.transition;me.transition={};try{u(!1),d()}finally{Kr=w,me.transition=N}}function Wn(){return Se().memoizedState}function Hn(u,d,w){var N=xf(u);if(w={lane:N,action:w,hasEagerState:!1,eagerState:null,next:null},rr(u))Yt(d,w);else if(w=md(u,d,w,N),w!==null){var H=ya();hu(w,u,N,H),Tn(w,d,N)}}function Yn(u,d,w){var N=xf(u),H={lane:N,action:w,hasEagerState:!1,eagerState:null,next:null};if(rr(u))Yt(d,H);else{var J=u.alternate;if(u.lanes===0&&(J===null||J.lanes===0)&&(J=d.lastRenderedReducer,J!==null))try{var $e=d.lastRenderedState,yt=J($e,w);if(H.hasEagerState=!0,H.eagerState=yt,fn(yt,$e)){var Pt=d.interleaved;Pt===null?(H.next=H,wh(d)):(H.next=Pt.next,Pt.next=H),d.interleaved=H;return}}catch{}finally{}w=md(u,d,H,N),w!==null&&(H=ya(),hu(w,u,N,H),Tn(w,d,N))}}function rr(u){var d=u.alternate;return u===ge||d!==null&&d===ge}function Yt(u,d){te=se=!0;var w=u.pending;w===null?d.next=d:(d.next=w.next,w.next=d),u.pending=d}function Tn(u,d,w){if((w&4194240)!==0){var N=d.lanes;N&=u.pendingLanes,w|=N,d.lanes=w,hi(u,w)}}var Dn={readContext:ha,useCallback:Ie,useContext:Ie,useEffect:Ie,useImperativeHandle:Ie,useInsertionEffect:Ie,useLayoutEffect:Ie,useMemo:Ie,useReducer:Ie,useRef:Ie,useState:Ie,useDebugValue:Ie,useDeferredValue:Ie,useTransition:Ie,useMutableSource:Ie,useSyncExternalStore:Ie,useId:Ie,unstable_isNewReconciler:!1},Fn={readContext:ha,useCallback:function(u,d){return ue().memoizedState=[u,d===void 0?null:d],u},useContext:ha,useEffect:ln,useImperativeHandle:function(u,d,w){return w=w!=null?w.concat([u]):null,Lt(4194308,4,gr.bind(null,d,u),w)},useLayoutEffect:function(u,d){return Lt(4194308,4,u,d)},useInsertionEffect:function(u,d){return Lt(4,2,u,d)},useMemo:function(u,d){var w=ue();return d=d===void 0?null:d,u=u(),w.memoizedState=[u,d],u},useReducer:function(u,d,w){var N=ue();return d=w!==void 0?w(d):d,N.memoizedState=N.baseState=d,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:d},N.queue=u,u=u.dispatch=Hn.bind(null,ge,u),[N.memoizedState,u]},useRef:function(u){var d=ue();return u={current:u},d.memoizedState=u},useState:lt,useDebugValue:Ct,useDeferredValue:function(u){return ue().memoizedState=u},useTransition:function(){var u=lt(!1),d=u[0];return u=In.bind(null,u[1]),ue().memoizedState=u,[d,u]},useMutableSource:function(){},useSyncExternalStore:function(u,d,w){var N=ge,H=ue();if(uo){if(w===void 0)throw Error(n(407));w=w()}else{if(w=d(),Os===null)throw Error(n(349));(Le&30)!==0||zt(N,d,w)}H.memoizedState=w;var J={value:w,getSnapshot:d};return H.queue=J,ln(Ft.bind(null,N,J,u),[u]),N.flags|=2048,bt(9,Ut.bind(null,N,J,w,d),void 0,null),w},useId:function(){var u=ue(),d=Os.identifierPrefix;if(uo){var w=Nl,N=xl;w=(N&~(1<<32-po(N)-1)).toString(32)+w,d=":"+d+"R"+w,w=re++,0<w&&(d+="H"+w.toString(32)),d+=":"}else w=G++,d=":"+d+"r"+w.toString(32)+":";return u.memoizedState=d},unstable_isNewReconciler:!1},Zn={readContext:ha,useCallback:rn,useContext:ha,useEffect:Xt,useImperativeHandle:vr,useInsertionEffect:Vn,useLayoutEffect:Mn,useMemo:Ht,useReducer:gt,useRef:tn,useState:function(){return gt(qe)},useDebugValue:Ct,useDeferredValue:function(u){var d=Se();return yn(d,Fe.memoizedState,u)},useTransition:function(){var u=gt(qe)[0],d=Se().memoizedState;return[u,d]},useMutableSource:mt,useSyncExternalStore:dt,useId:Wn,unstable_isNewReconciler:!1},Rt={readContext:ha,useCallback:rn,useContext:ha,useEffect:Xt,useImperativeHandle:vr,useInsertionEffect:Vn,useLayoutEffect:Mn,useMemo:Ht,useReducer:ut,useRef:tn,useState:function(){return ut(qe)},useDebugValue:Ct,useDeferredValue:function(u){var d=Se();return Fe===null?d.memoizedState=u:yn(d,Fe.memoizedState,u)},useTransition:function(){var u=ut(qe)[0],d=Se().memoizedState;return[u,d]},useMutableSource:mt,useSyncExternalStore:dt,useId:Wn,unstable_isNewReconciler:!1};function ft(u,d){if(u&&u.defaultProps){d=et({},d),u=u.defaultProps;for(var w in u)d[w]===void 0&&(d[w]=u[w]);return d}return d}function Kt(u,d,w,N){d=u.memoizedState,w=w(N,d),w=w==null?d:et({},d,w),u.memoizedState=w,u.lanes===0&&(u.updateQueue.baseState=w)}var We={isMounted:function(u){return(u=u._reactInternals)?en(u)===u:!1},enqueueSetState:function(u,d,w){u=u._reactInternals;var N=ya(),H=xf(u),J=Da(N,H);J.payload=d,w!=null&&(J.callback=w),d=Pa(u,J,H),d!==null&&(hu(d,u,H,N),L(d,u,H))},enqueueReplaceState:function(u,d,w){u=u._reactInternals;var N=ya(),H=xf(u),J=Da(N,H);J.tag=1,J.payload=d,w!=null&&(J.callback=w),d=Pa(u,J,H),d!==null&&(hu(d,u,H,N),L(d,u,H))},enqueueForceUpdate:function(u,d){u=u._reactInternals;var w=ya(),N=xf(u),H=Da(w,N);H.tag=2,d!=null&&(H.callback=d),d=Pa(u,H,N),d!==null&&(hu(d,u,N,w),L(d,u,N))}};function tt(u,d,w,N,H,J,$e){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(N,J,$e):d.prototype&&d.prototype.isPureReactComponent?!or(w,N)||!or(H,J):!0}function Mt(u,d,w){var N=!1,H=eu,J=d.contextType;return typeof J=="object"&&J!==null?J=ha(J):(H=Qs(d)?cs:Is.current,N=d.contextTypes,J=(N=N!=null)?Ec(u,H):eu),d=new d(w,J),u.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=We,u.stateNode=d,d._reactInternals=u,N&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=H,u.__reactInternalMemoizedMaskedChildContext=J),d}function mn(u,d,w,N){u=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(w,N),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(w,N),d.state!==u&&We.enqueueReplaceState(d,d.state,null)}function Cn(u,d,w,N){var H=u.stateNode;H.props=w,H.state=u.memoizedState,H.refs={},Th(u);var J=d.contextType;typeof J=="object"&&J!==null?H.context=ha(J):(J=Qs(d)?cs:Is.current,H.context=Ec(u,J)),H.state=u.memoizedState,J=d.getDerivedStateFromProps,typeof J=="function"&&(Kt(u,d,J,w),H.state=u.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof H.getSnapshotBeforeUpdate=="function"||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(d=H.state,typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount(),d!==H.state&&We.enqueueReplaceState(H,H.state,null),P(u,w,H,N),H.state=u.memoizedState),typeof H.componentDidMount=="function"&&(u.flags|=4194308)}function cr(u,d){try{var w="",N=d;do w+=Ze(N),N=N.return;while(N);var H=w}catch(J){H=`
Error generating stack: `+J.message+`
`+J.stack}return{value:u,source:d,stack:H,digest:null}}function Si(u,d,w){return{value:u,source:null,stack:w??null,digest:d??null}}function to(u,d){try{console.error(d.value)}catch(w){setTimeout(function(){throw w})}}var Di=typeof WeakMap=="function"?WeakMap:Map;function zo(u,d,w){w=Da(-1,w),w.tag=3,w.payload={element:null};var N=d.value;return w.callback=function(){Nm||(Nm=!0,v_=N),to(u,d)},w}function bo(u,d,w){w=Da(-1,w),w.tag=3;var N=u.type.getDerivedStateFromError;if(typeof N=="function"){var H=d.value;w.payload=function(){return N(H)},w.callback=function(){to(u,d)}}var J=u.stateNode;return J!==null&&typeof J.componentDidCatch=="function"&&(w.callback=function(){to(u,d),typeof N!="function"&&(Cf===null?Cf=new Set([this]):Cf.add(this));var $e=d.stack;this.componentDidCatch(d.value,{componentStack:$e!==null?$e:""})}),w}function Ma(u,d,w){var N=u.pingCache;if(N===null){N=u.pingCache=new Di;var H=new Set;N.set(d,H)}else H=N.get(d),H===void 0&&(H=new Set,N.set(d,H));H.has(w)||(H.add(w),u=nI.bind(null,u,d,w),d.then(u,u))}function Vu(u){do{var d;if((d=u.tag===13)&&(d=u.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return u;u=u.return}while(u!==null);return null}function ou(u,d,w,N,H){return(u.mode&1)===0?(u===d?u.flags|=65536:(u.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(d=Da(-1,1),d.tag=2,Pa(w,d,1))),w.lanes|=1),u):(u.flags|=65536,u.lanes=H,u)}var ea=S.ReactCurrentOwner,Eo=!1;function Zi(u,d,w,N){d.child=u===null?hd(d,null,w,N):Io(d,u.child,w,N)}function su(u,d,w,N,H){w=w.render;var J=d.ref;return ru(d,H),N=ke(u,d,w,N,J,H),w=Ae(),u!==null&&!Eo?(d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~H,uu(u,d,H)):(uo&&w&&bf(d),d.flags|=1,Zi(u,d,N,H),d.child)}function au(u,d,w,N,H){if(u===null){var J=w.type;return typeof J=="function"&&!km(J)&&J.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(d.tag=15,d.type=J,Oo(u,d,J,N,H)):(u=Fm(w.type,null,N,d,d.mode,H),u.ref=d.ref,u.return=d,d.child=u)}if(J=u.child,(u.lanes&H)===0){var $e=J.memoizedProps;if(w=w.compare,w=w!==null?w:or,w($e,N)&&u.ref===d.ref)return uu(u,d,H)}return d.flags|=1,u=pu(J,N),u.ref=d.ref,u.return=d,d.child=u}function Oo(u,d,w,N,H){if(u!==null){var J=u.memoizedProps;if(or(J,N)&&u.ref===d.ref)if(Eo=!1,d.pendingProps=N=J,(u.lanes&H)!==0)(u.flags&131072)!==0&&(Eo=!0);else return d.lanes=u.lanes,uu(u,d,H)}return Tf(u,d,w,N,H)}function Nc(u,d,w){var N=d.pendingProps,H=N.children,J=u!==null?u.memoizedState:null;if(N.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null,transitions:null},lo(Ch,fl),fl|=w;else{if((w&1073741824)===0)return u=J!==null?J.baseLanes|w:w,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:u,cachePool:null,transitions:null},d.updateQueue=null,lo(Ch,fl),fl|=u,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},N=J!==null?J.baseLanes:w,lo(Ch,fl),fl|=N}else J!==null?(N=J.baseLanes|w,d.memoizedState=null):N=w,lo(Ch,fl),fl|=N;return Zi(u,d,H,w),d.child}function wf(u,d){var w=d.ref;(u===null&&w!==null||u!==null&&u.ref!==w)&&(d.flags|=512,d.flags|=2097152)}function Tf(u,d,w,N,H){var J=Qs(w)?cs:Is.current;return J=Ec(d,J),ru(d,H),w=ke(u,d,w,N,J,H),N=Ae(),u!==null&&!Eo?(d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~H,uu(u,d,H)):(uo&&N&&bf(d),d.flags|=1,Zi(u,d,w,H),d.child)}function Ll(u,d,w,N,H){if(Qs(w)){var J=!0;Na(d)}else J=!1;if(ru(d,H),d.stateNode===null)lu(u,d),Mt(d,w,N),Cn(d,w,N,H),N=!0;else if(u===null){var $e=d.stateNode,yt=d.memoizedProps;$e.props=yt;var Pt=$e.context,gn=w.contextType;typeof gn=="object"&&gn!==null?gn=ha(gn):(gn=Qs(w)?cs:Is.current,gn=Ec(d,gn));var jn=w.getDerivedStateFromProps,Kn=typeof jn=="function"||typeof $e.getSnapshotBeforeUpdate=="function";Kn||typeof $e.UNSAFE_componentWillReceiveProps!="function"&&typeof $e.componentWillReceiveProps!="function"||(yt!==N||Pt!==gn)&&mn(d,$e,N,gn),pa=!1;var Bn=d.memoizedState;$e.state=Bn,P(d,N,$e,H),Pt=d.memoizedState,yt!==N||Bn!==Pt||Us.current||pa?(typeof jn=="function"&&(Kt(d,w,jn,N),Pt=d.memoizedState),(yt=pa||tt(d,w,yt,N,Bn,Pt,gn))?(Kn||typeof $e.UNSAFE_componentWillMount!="function"&&typeof $e.componentWillMount!="function"||(typeof $e.componentWillMount=="function"&&$e.componentWillMount(),typeof $e.UNSAFE_componentWillMount=="function"&&$e.UNSAFE_componentWillMount()),typeof $e.componentDidMount=="function"&&(d.flags|=4194308)):(typeof $e.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=N,d.memoizedState=Pt),$e.props=N,$e.state=Pt,$e.context=gn,N=yt):(typeof $e.componentDidMount=="function"&&(d.flags|=4194308),N=!1)}else{$e=d.stateNode,Sh(u,d),yt=d.memoizedProps,gn=d.type===d.elementType?yt:ft(d.type,yt),$e.props=gn,Kn=d.pendingProps,Bn=$e.context,Pt=w.contextType,typeof Pt=="object"&&Pt!==null?Pt=ha(Pt):(Pt=Qs(w)?cs:Is.current,Pt=Ec(d,Pt));var ar=w.getDerivedStateFromProps;(jn=typeof ar=="function"||typeof $e.getSnapshotBeforeUpdate=="function")||typeof $e.UNSAFE_componentWillReceiveProps!="function"&&typeof $e.componentWillReceiveProps!="function"||(yt!==Kn||Bn!==Pt)&&mn(d,$e,N,Pt),pa=!1,Bn=d.memoizedState,$e.state=Bn,P(d,N,$e,H);var yr=d.memoizedState;yt!==Kn||Bn!==yr||Us.current||pa?(typeof ar=="function"&&(Kt(d,w,ar,N),yr=d.memoizedState),(gn=pa||tt(d,w,gn,N,Bn,yr,Pt)||!1)?(jn||typeof $e.UNSAFE_componentWillUpdate!="function"&&typeof $e.componentWillUpdate!="function"||(typeof $e.componentWillUpdate=="function"&&$e.componentWillUpdate(N,yr,Pt),typeof $e.UNSAFE_componentWillUpdate=="function"&&$e.UNSAFE_componentWillUpdate(N,yr,Pt)),typeof $e.componentDidUpdate=="function"&&(d.flags|=4),typeof $e.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof $e.componentDidUpdate!="function"||yt===u.memoizedProps&&Bn===u.memoizedState||(d.flags|=4),typeof $e.getSnapshotBeforeUpdate!="function"||yt===u.memoizedProps&&Bn===u.memoizedState||(d.flags|=1024),d.memoizedProps=N,d.memoizedState=yr),$e.props=N,$e.state=yr,$e.context=Pt,N=gn):(typeof $e.componentDidUpdate!="function"||yt===u.memoizedProps&&Bn===u.memoizedState||(d.flags|=4),typeof $e.getSnapshotBeforeUpdate!="function"||yt===u.memoizedProps&&Bn===u.memoizedState||(d.flags|=1024),N=!1)}return Sf(u,d,w,N,J,H)}function Sf(u,d,w,N,H,J){wf(u,d);var $e=(d.flags&128)!==0;if(!N&&!$e)return H&&kp(d,w,!1),uu(u,d,J);N=d.stateNode,ea.current=d;var yt=$e&&typeof w.getDerivedStateFromError!="function"?null:N.render();return d.flags|=1,u!==null&&$e?(d.child=Io(d,u.child,null,J),d.child=Io(d,null,yt,J)):Zi(u,d,yt,J),d.memoizedState=N.state,H&&kp(d,w,!0),d.child}function zu(u){var d=u.stateNode;d.pendingContext?vm(u,d.pendingContext,d.pendingContext!==d.context):d.context&&vm(u,d.context,!1),_e(u,d.containerInfo)}function Dt(u,d,w,N,H){return Ol(),ul(H),d.flags|=256,Zi(u,d,w,N),d.child}var wn={dehydrated:null,treeContext:null,retryLane:0};function er(u){return{baseLanes:u,cachePool:null,transitions:null}}function mr(u,d,w){var N=d.pendingProps,H=ae.current,J=!1,$e=(d.flags&128)!==0,yt;if((yt=$e)||(yt=u!==null&&u.memoizedState===null?!1:(H&2)!==0),yt?(J=!0,d.flags&=-129):(u===null||u.memoizedState!==null)&&(H|=1),lo(ae,H&1),u===null)return Rs(d),u=d.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?((d.mode&1)===0?d.lanes=1:u.data==="$!"?d.lanes=8:d.lanes=1073741824,null):($e=N.children,u=N.fallback,J?(N=d.mode,J=d.child,$e={mode:"hidden",children:$e},(N&1)===0&&J!==null?(J.childLanes=0,J.pendingProps=$e):J=$m($e,N,0,null),u=Ed(u,N,w,null),J.return=d,u.return=d,J.sibling=u,d.child=J,d.child.memoizedState=er(w),d.memoizedState=wn,u):Zr(d,$e));if(H=u.memoizedState,H!==null&&(yt=H.dehydrated,yt!==null))return $n(u,d,$e,N,yt,H,w);if(J){J=N.fallback,$e=d.mode,H=u.child,yt=H.sibling;var Pt={mode:"hidden",children:N.children};return($e&1)===0&&d.child!==H?(N=d.child,N.childLanes=0,N.pendingProps=Pt,d.deletions=null):(N=pu(H,Pt),N.subtreeFlags=H.subtreeFlags&14680064),yt!==null?J=pu(yt,J):(J=Ed(J,$e,w,null),J.flags|=2),J.return=d,N.return=d,N.sibling=J,d.child=N,N=J,J=d.child,$e=u.child.memoizedState,$e=$e===null?er(w):{baseLanes:$e.baseLanes|w,cachePool:null,transitions:$e.transitions},J.memoizedState=$e,J.childLanes=u.childLanes&~w,d.memoizedState=wn,N}return J=u.child,u=J.sibling,N=pu(J,{mode:"visible",children:N.children}),(d.mode&1)===0&&(N.lanes=w),N.return=d,N.sibling=null,u!==null&&(w=d.deletions,w===null?(d.deletions=[u],d.flags|=16):w.push(u)),d.child=N,d.memoizedState=null,N}function Zr(u,d){return d=$m({mode:"visible",children:d},u.mode,0,null),d.return=u,u.child=d}function $r(u,d,w,N){return N!==null&&ul(N),Io(d,u.child,null,w),u=Zr(d,d.pendingProps.children),u.flags|=2,d.memoizedState=null,u}function $n(u,d,w,N,H,J,$e){if(w)return d.flags&256?(d.flags&=-257,N=Si(Error(n(422))),$r(u,d,$e,N)):d.memoizedState!==null?(d.child=u.child,d.flags|=128,null):(J=N.fallback,H=d.mode,N=$m({mode:"visible",children:N.children},H,0,null),J=Ed(J,H,$e,null),J.flags|=2,N.return=d,J.return=d,N.sibling=J,d.child=N,(d.mode&1)!==0&&Io(d,u.child,null,$e),d.child.memoizedState=er($e),d.memoizedState=wn,J);if((d.mode&1)===0)return $r(u,d,$e,null);if(H.data==="$!"){if(N=H.nextSibling&&H.nextSibling.dataset,N)var yt=N.dgst;return N=yt,J=Error(n(419)),N=Si(J,N,void 0),$r(u,d,$e,N)}if(yt=($e&u.childLanes)!==0,Eo||yt){if(N=Os,N!==null){switch($e&-$e){case 4:H=2;break;case 16:H=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:H=32;break;case 536870912:H=268435456;break;default:H=0}H=(H&(N.suspendedLanes|$e))!==0?0:H,H!==0&&H!==J.retryLane&&(J.retryLane=H,iu(u,H),hu(N,u,H,-1))}return S_(),N=Si(Error(n(421))),$r(u,d,$e,N)}return H.data==="$?"?(d.flags|=128,d.child=u.child,d=rI.bind(null,u),H._reactRetry=d,null):(u=J.treeContext,da=Xl(H.nextSibling),fs=d,uo=!0,al=null,u!==null&&(Oa[Xs++]=xl,Oa[Xs++]=Nl,Oa[Xs++]=Tc,xl=u.id,Nl=u.overflow,Tc=d),d=Zr(d,N.children),d.flags|=4096,d)}function Bi(u,d,w){u.lanes|=d;var N=u.alternate;N!==null&&(N.lanes|=d),ds(u.return,d,w)}function Ai(u,d,w,N,H){var J=u.memoizedState;J===null?u.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:N,tail:w,tailMode:H}:(J.isBackwards=d,J.rendering=null,J.renderingStartTime=0,J.last=N,J.tail=w,J.tailMode=H)}function xs(u,d,w){var N=d.pendingProps,H=N.revealOrder,J=N.tail;if(Zi(u,d,N.children,w),N=ae.current,(N&2)!==0)N=N&1|2,d.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=d.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&Bi(u,w,d);else if(u.tag===19)Bi(u,w,d);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===d)break e;for(;u.sibling===null;){if(u.return===null||u.return===d)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}N&=1}if(lo(ae,N),(d.mode&1)===0)d.memoizedState=null;else switch(H){case"forwards":for(w=d.child,H=null;w!==null;)u=w.alternate,u!==null&&He(u)===null&&(H=w),w=w.sibling;w=H,w===null?(H=d.child,d.child=null):(H=w.sibling,w.sibling=null),Ai(d,!1,H,w,J);break;case"backwards":for(w=null,H=d.child,d.child=null;H!==null;){if(u=H.alternate,u!==null&&He(u)===null){d.child=H;break}u=H.sibling,H.sibling=w,w=H,H=u}Ai(d,!0,w,null,J);break;case"together":Ai(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function lu(u,d){(d.mode&1)===0&&u!==null&&(u.alternate=null,d.alternate=null,d.flags|=2)}function uu(u,d,w){if(u!==null&&(d.dependencies=u.dependencies),If|=d.lanes,(w&d.childLanes)===0)return null;if(u!==null&&d.child!==u.child)throw Error(n(153));if(d.child!==null){for(u=d.child,w=pu(u,u.pendingProps),d.child=w,w.return=d;u.sibling!==null;)u=u.sibling,w=w.sibling=pu(u,u.pendingProps),w.return=d;w.sibling=null}return d.child}function TE(u,d,w){switch(d.tag){case 3:zu(d),Ol();break;case 5:Q(d);break;case 1:Qs(d.type)&&Na(d);break;case 4:_e(d,d.stateNode.containerInfo);break;case 10:var N=d.type._context,H=d.memoizedProps.value;lo(pd,N._currentValue),N._currentValue=H;break;case 13:if(N=d.memoizedState,N!==null)return N.dehydrated!==null?(lo(ae,ae.current&1),d.flags|=128,null):(w&d.child.childLanes)!==0?mr(u,d,w):(lo(ae,ae.current&1),u=uu(u,d,w),u!==null?u.sibling:null);lo(ae,ae.current&1);break;case 19:if(N=(w&d.childLanes)!==0,(u.flags&128)!==0){if(N)return xs(u,d,w);d.flags|=128}if(H=d.memoizedState,H!==null&&(H.rendering=null,H.tail=null,H.lastEffect=null),lo(ae,ae.current),N)break;return null;case 22:case 23:return d.lanes=0,Nc(u,d,w)}return uu(u,d,w)}var Bs,c_,SE,f_;Bs=function(u,d){for(var w=d.child;w!==null;){if(w.tag===5||w.tag===6)u.appendChild(w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===d)break;for(;w.sibling===null;){if(w.return===null||w.return===d)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},c_=function(){},SE=function(u,d,w,N){var H=u.memoizedProps;if(H!==N){u=d.stateNode,le(q.current);var J=null;switch(w){case"input":H=M(u,H),N=M(u,N),J=[];break;case"select":H=et({},H,{value:void 0}),N=et({},N,{value:void 0}),J=[];break;case"textarea":H=st(u,H),N=st(u,N),J=[];break;default:typeof H.onClick!="function"&&typeof N.onClick=="function"&&(u.onclick=sd)}Dr(w,N);var $e;w=null;for(gn in H)if(!N.hasOwnProperty(gn)&&H.hasOwnProperty(gn)&&H[gn]!=null)if(gn==="style"){var yt=H[gn];for($e in yt)yt.hasOwnProperty($e)&&(w||(w={}),w[$e]="")}else gn!=="dangerouslySetInnerHTML"&&gn!=="children"&&gn!=="suppressContentEditableWarning"&&gn!=="suppressHydrationWarning"&&gn!=="autoFocus"&&(i.hasOwnProperty(gn)?J||(J=[]):(J=J||[]).push(gn,null));for(gn in N){var Pt=N[gn];if(yt=H?.[gn],N.hasOwnProperty(gn)&&Pt!==yt&&(Pt!=null||yt!=null))if(gn==="style")if(yt){for($e in yt)!yt.hasOwnProperty($e)||Pt&&Pt.hasOwnProperty($e)||(w||(w={}),w[$e]="");for($e in Pt)Pt.hasOwnProperty($e)&&yt[$e]!==Pt[$e]&&(w||(w={}),w[$e]=Pt[$e])}else w||(J||(J=[]),J.push(gn,w)),w=Pt;else gn==="dangerouslySetInnerHTML"?(Pt=Pt?Pt.__html:void 0,yt=yt?yt.__html:void 0,Pt!=null&&yt!==Pt&&(J=J||[]).push(gn,Pt)):gn==="children"?typeof Pt!="string"&&typeof Pt!="number"||(J=J||[]).push(gn,""+Pt):gn!=="suppressContentEditableWarning"&&gn!=="suppressHydrationWarning"&&(i.hasOwnProperty(gn)?(Pt!=null&&gn==="onScroll"&&so("scroll",u),J||yt===Pt||(J=[])):(J=J||[]).push(gn,Pt))}w&&(J=J||[]).push("style",w);var gn=J;(d.updateQueue=gn)&&(d.flags|=4)}},f_=function(u,d,w,N){w!==N&&(d.flags|=4)};function Up(u,d){if(!uo)switch(u.tailMode){case"hidden":d=u.tail;for(var w=null;d!==null;)d.alternate!==null&&(w=d),d=d.sibling;w===null?u.tail=null:w.sibling=null;break;case"collapsed":w=u.tail;for(var N=null;w!==null;)w.alternate!==null&&(N=w),w=w.sibling;N===null?d||u.tail===null?u.tail=null:u.tail.sibling=null:N.sibling=null}}function Zs(u){var d=u.alternate!==null&&u.alternate.child===u.child,w=0,N=0;if(d)for(var H=u.child;H!==null;)w|=H.lanes|H.childLanes,N|=H.subtreeFlags&14680064,N|=H.flags&14680064,H.return=u,H=H.sibling;else for(H=u.child;H!==null;)w|=H.lanes|H.childLanes,N|=H.subtreeFlags,N|=H.flags,H.return=u,H=H.sibling;return u.subtreeFlags|=N,u.childLanes=w,d}function KA(u,d,w){var N=d.pendingProps;switch(Ac(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zs(d),null;case 1:return Qs(d.type)&&yh(),Zs(d),null;case 3:return N=d.stateNode,fe(),ao(Us),ao(Is),Be(),N.pendingContext&&(N.context=N.pendingContext,N.pendingContext=null),(u===null||u.child===null)&&(Zu(d)?d.flags|=4:u===null||u.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,al!==null&&(E_(al),al=null))),c_(u,d),Zs(d),null;case 5:ce(d);var H=le(K.current);if(w=d.type,u!==null&&d.stateNode!=null)SE(u,d,w,N,H),u.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!N){if(d.stateNode===null)throw Error(n(166));return Zs(d),null}if(u=le(q.current),Zu(d)){N=d.stateNode,w=d.type;var J=d.memoizedProps;switch(N[sl]=d,N[Jl]=J,u=(d.mode&1)!==0,w){case"dialog":so("cancel",N),so("close",N);break;case"iframe":case"object":case"embed":so("load",N);break;case"video":case"audio":for(H=0;H<Kl.length;H++)so(Kl[H],N);break;case"source":so("error",N);break;case"img":case"image":case"link":so("error",N),so("load",N);break;case"details":so("toggle",N);break;case"input":x(N,J),so("invalid",N);break;case"select":N._wrapperState={wasMultiple:!!J.multiple},so("invalid",N);break;case"textarea":nt(N,J),so("invalid",N)}Dr(w,J),H=null;for(var $e in J)if(J.hasOwnProperty($e)){var yt=J[$e];$e==="children"?typeof yt=="string"?N.textContent!==yt&&(J.suppressHydrationWarning!==!0&&Fu(N.textContent,yt,u),H=["children",yt]):typeof yt=="number"&&N.textContent!==""+yt&&(J.suppressHydrationWarning!==!0&&Fu(N.textContent,yt,u),H=["children",""+yt]):i.hasOwnProperty($e)&&yt!=null&&$e==="onScroll"&&so("scroll",N)}switch(w){case"input":Ue(N),he(N,J,!0);break;case"textarea":Ue(N),ct(N);break;case"select":case"option":break;default:typeof J.onClick=="function"&&(N.onclick=sd)}N=H,d.updateQueue=N,N!==null&&(d.flags|=4)}else{$e=H.nodeType===9?H:H.ownerDocument,u==="http://www.w3.org/1999/xhtml"&&(u=St(w)),u==="http://www.w3.org/1999/xhtml"?w==="script"?(u=$e.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild)):typeof N.is=="string"?u=$e.createElement(w,{is:N.is}):(u=$e.createElement(w),w==="select"&&($e=u,N.multiple?$e.multiple=!0:N.size&&($e.size=N.size))):u=$e.createElementNS(u,w),u[sl]=d,u[Jl]=N,Bs(u,d,!1,!1),d.stateNode=u;e:{switch($e=ni(w,N),w){case"dialog":so("cancel",u),so("close",u),H=N;break;case"iframe":case"object":case"embed":so("load",u),H=N;break;case"video":case"audio":for(H=0;H<Kl.length;H++)so(Kl[H],u);H=N;break;case"source":so("error",u),H=N;break;case"img":case"image":case"link":so("error",u),so("load",u),H=N;break;case"details":so("toggle",u),H=N;break;case"input":x(u,N),H=M(u,N),so("invalid",u);break;case"option":H=N;break;case"select":u._wrapperState={wasMultiple:!!N.multiple},H=et({},N,{value:void 0}),so("invalid",u);break;case"textarea":nt(u,N),H=st(u,N),so("invalid",u);break;default:H=N}Dr(w,H),yt=H;for(J in yt)if(yt.hasOwnProperty(J)){var Pt=yt[J];J==="style"?Ir(u,Pt):J==="dangerouslySetInnerHTML"?(Pt=Pt?Pt.__html:void 0,Pt!=null&&hn(u,Pt)):J==="children"?typeof Pt=="string"?(w!=="textarea"||Pt!=="")&&dn(u,Pt):typeof Pt=="number"&&dn(u,""+Pt):J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&J!=="autoFocus"&&(i.hasOwnProperty(J)?Pt!=null&&J==="onScroll"&&so("scroll",u):Pt!=null&&T(u,J,Pt,$e))}switch(w){case"input":Ue(u),he(u,N,!1);break;case"textarea":Ue(u),ct(u);break;case"option":N.value!=null&&u.setAttribute("value",""+xt(N.value));break;case"select":u.multiple=!!N.multiple,J=N.value,J!=null?wt(u,!!N.multiple,J,!1):N.defaultValue!=null&&wt(u,!!N.multiple,N.defaultValue,!0);break;default:typeof H.onClick=="function"&&(u.onclick=sd)}switch(w){case"button":case"input":case"select":case"textarea":N=!!N.autoFocus;break e;case"img":N=!0;break e;default:N=!1}}N&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Zs(d),null;case 6:if(u&&d.stateNode!=null)f_(u,d,u.memoizedProps,N);else{if(typeof N!="string"&&d.stateNode===null)throw Error(n(166));if(w=le(K.current),le(q.current),Zu(d)){if(N=d.stateNode,w=d.memoizedProps,N[sl]=d,(J=N.nodeValue!==w)&&(u=fs,u!==null))switch(u.tag){case 3:Fu(N.nodeValue,w,(u.mode&1)!==0);break;case 5:u.memoizedProps.suppressHydrationWarning!==!0&&Fu(N.nodeValue,w,(u.mode&1)!==0)}J&&(d.flags|=4)}else N=(w.nodeType===9?w:w.ownerDocument).createTextNode(N),N[sl]=d,d.stateNode=N}return Zs(d),null;case 13:if(ao(ae),N=d.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(uo&&da!==null&&(d.mode&1)!==0&&(d.flags&128)===0)$p(),Ol(),d.flags|=98560,J=!1;else if(J=Zu(d),N!==null&&N.dehydrated!==null){if(u===null){if(!J)throw Error(n(318));if(J=d.memoizedState,J=J!==null?J.dehydrated:null,!J)throw Error(n(317));J[sl]=d}else Ol(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Zs(d),J=!1}else al!==null&&(E_(al),al=null),J=!0;if(!J)return d.flags&65536?d:null}return(d.flags&128)!==0?(d.lanes=w,d):(N=N!==null,N!==(u!==null&&u.memoizedState!==null)&&N&&(d.child.flags|=8192,(d.mode&1)!==0&&(u===null||(ae.current&1)!==0?hs===0&&(hs=3):S_())),d.updateQueue!==null&&(d.flags|=4),Zs(d),null);case 4:return fe(),c_(u,d),u===null&&Yl(d.stateNode.containerInfo),Zs(d),null;case 10:return gd(d.type._context),Zs(d),null;case 17:return Qs(d.type)&&yh(),Zs(d),null;case 19:if(ao(ae),J=d.memoizedState,J===null)return Zs(d),null;if(N=(d.flags&128)!==0,$e=J.rendering,$e===null)if(N)Up(J,!1);else{if(hs!==0||u!==null&&(u.flags&128)!==0)for(u=d.child;u!==null;){if($e=He(u),$e!==null){for(d.flags|=128,Up(J,!1),N=$e.updateQueue,N!==null&&(d.updateQueue=N,d.flags|=4),d.subtreeFlags=0,N=w,w=d.child;w!==null;)J=w,u=N,J.flags&=14680066,$e=J.alternate,$e===null?(J.childLanes=0,J.lanes=u,J.child=null,J.subtreeFlags=0,J.memoizedProps=null,J.memoizedState=null,J.updateQueue=null,J.dependencies=null,J.stateNode=null):(J.childLanes=$e.childLanes,J.lanes=$e.lanes,J.child=$e.child,J.subtreeFlags=0,J.deletions=null,J.memoizedProps=$e.memoizedProps,J.memoizedState=$e.memoizedState,J.updateQueue=$e.updateQueue,J.type=$e.type,u=$e.dependencies,J.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),w=w.sibling;return lo(ae,ae.current&1|2),d.child}u=u.sibling}J.tail!==null&&Rn()>yd&&(d.flags|=128,N=!0,Up(J,!1),d.lanes=4194304)}else{if(!N)if(u=He($e),u!==null){if(d.flags|=128,N=!0,w=u.updateQueue,w!==null&&(d.updateQueue=w,d.flags|=4),Up(J,!0),J.tail===null&&J.tailMode==="hidden"&&!$e.alternate&&!uo)return Zs(d),null}else 2*Rn()-J.renderingStartTime>yd&&w!==1073741824&&(d.flags|=128,N=!0,Up(J,!1),d.lanes=4194304);J.isBackwards?($e.sibling=d.child,d.child=$e):(w=J.last,w!==null?w.sibling=$e:d.child=$e,J.last=$e)}return J.tail!==null?(d=J.tail,J.rendering=d,J.tail=d.sibling,J.renderingStartTime=Rn(),d.sibling=null,w=ae.current,lo(ae,N?w&1|2:w&1),d):(Zs(d),null);case 22:case 23:return T_(),N=d.memoizedState!==null,u!==null&&u.memoizedState!==null!==N&&(d.flags|=8192),N&&(d.mode&1)!==0?(fl&1073741824)!==0&&(Zs(d),d.subtreeFlags&6&&(d.flags|=8192)):Zs(d),null;case 24:return null;case 25:return null}throw Error(n(156,d.tag))}function YA(u,d){switch(Ac(d),d.tag){case 1:return Qs(d.type)&&yh(),u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 3:return fe(),ao(Us),ao(Is),Be(),u=d.flags,(u&65536)!==0&&(u&128)===0?(d.flags=u&-65537|128,d):null;case 5:return ce(d),null;case 13:if(ao(ae),u=d.memoizedState,u!==null&&u.dehydrated!==null){if(d.alternate===null)throw Error(n(340));Ol()}return u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 19:return ao(ae),null;case 4:return fe(),null;case 10:return gd(d.type._context),null;case 22:case 23:return T_(),null;case 24:return null;default:return null}}var Sm=!1,Co=!1,ga=typeof WeakSet=="function"?WeakSet:Set,fr=null;function Ah(u,d){var w=u.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(N){Lo(u,d,N)}else w.current=null}function Bp(u,d,w){try{w()}catch(N){Lo(u,d,N)}}var AE=!1;function QA(u,d){if(ad=xa,u=Yi(),ed(u)){if("selectionStart"in u)var w={start:u.selectionStart,end:u.selectionEnd};else e:{w=(w=u.ownerDocument)&&w.defaultView||window;var N=w.getSelection&&w.getSelection();if(N&&N.rangeCount!==0){w=N.anchorNode;var H=N.anchorOffset,J=N.focusNode;N=N.focusOffset;try{w.nodeType,J.nodeType}catch{w=null;break e}var $e=0,yt=-1,Pt=-1,gn=0,jn=0,Kn=u,Bn=null;t:for(;;){for(var ar;Kn!==w||H!==0&&Kn.nodeType!==3||(yt=$e+H),Kn!==J||N!==0&&Kn.nodeType!==3||(Pt=$e+N),Kn.nodeType===3&&($e+=Kn.nodeValue.length),(ar=Kn.firstChild)!==null;)Bn=Kn,Kn=ar;for(;;){if(Kn===u)break t;if(Bn===w&&++gn===H&&(yt=$e),Bn===J&&++jn===N&&(Pt=$e),(ar=Kn.nextSibling)!==null)break;Kn=Bn,Bn=Kn.parentNode}Kn=ar}w=yt===-1||Pt===-1?null:{start:yt,end:Pt}}else w=null}w=w||{start:0,end:0}}else w=null;for($u={focusedElem:u,selectionRange:w},xa=!1,fr=d;fr!==null;)if(d=fr,u=d.child,(d.subtreeFlags&1028)!==0&&u!==null)u.return=d,fr=u;else for(;fr!==null;){d=fr;try{var yr=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(yr!==null){var _r=yr.memoizedProps,Ho=yr.memoizedState,on=d.stateNode,Zt=on.getSnapshotBeforeUpdate(d.elementType===d.type?_r:ft(d.type,_r),Ho);on.__reactInternalSnapshotBeforeUpdate=Zt}break;case 3:var un=d.stateNode.containerInfo;un.nodeType===1?un.textContent="":un.nodeType===9&&un.documentElement&&un.removeChild(un.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Qn){Lo(d,d.return,Qn)}if(u=d.sibling,u!==null){u.return=d.return,fr=u;break}fr=d.return}return yr=AE,AE=!1,yr}function Oc(u,d,w){var N=d.updateQueue;if(N=N!==null?N.lastEffect:null,N!==null){var H=N=N.next;do{if((H.tag&u)===u){var J=H.destroy;H.destroy=void 0,J!==void 0&&Bp(d,w,J)}H=H.next}while(H!==N)}}function Zp(u,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var w=d=d.next;do{if((w.tag&u)===u){var N=w.create;w.destroy=N()}w=w.next}while(w!==d)}}function Am(u){var d=u.ref;if(d!==null){var w=u.stateNode;switch(u.tag){case 5:u=w;break;default:u=w}typeof d=="function"?d(u):d.current=u}}function IE(u){var d=u.alternate;d!==null&&(u.alternate=null,IE(d)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(d=u.stateNode,d!==null&&(delete d[sl],delete d[Jl],delete d[cd],delete d[Qe],delete d[_c])),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function CE(u){return u.tag===5||u.tag===3||u.tag===4}function RE(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||CE(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function d_(u,d,w){var N=u.tag;if(N===5||N===6)u=u.stateNode,d?w.nodeType===8?w.parentNode.insertBefore(u,d):w.insertBefore(u,d):(w.nodeType===8?(d=w.parentNode,d.insertBefore(u,w)):(d=w,d.appendChild(u)),w=w._reactRootContainer,w!=null||d.onclick!==null||(d.onclick=sd));else if(N!==4&&(u=u.child,u!==null))for(d_(u,d,w),u=u.sibling;u!==null;)d_(u,d,w),u=u.sibling}function Im(u,d,w){var N=u.tag;if(N===5||N===6)u=u.stateNode,d?w.insertBefore(u,d):w.appendChild(u);else if(N!==4&&(u=u.child,u!==null))for(Im(u,d,w),u=u.sibling;u!==null;)Im(u,d,w),u=u.sibling}var Ns=null,cu=!1;function Hu(u,d,w){for(w=w.child;w!==null;)h_(u,d,w),w=w.sibling}function h_(u,d,w){if(Ni&&typeof Ni.onCommitFiberUnmount=="function")try{Ni.onCommitFiberUnmount(yi,w)}catch{}switch(w.tag){case 5:Co||Ah(w,d);case 6:var N=Ns,H=cu;Ns=null,Hu(u,d,w),Ns=N,cu=H,Ns!==null&&(cu?(u=Ns,w=w.stateNode,u.nodeType===8?u.parentNode.removeChild(w):u.removeChild(w)):Ns.removeChild(w.stateNode));break;case 18:Ns!==null&&(cu?(u=Ns,w=w.stateNode,u.nodeType===8?Pp(u.parentNode,w):u.nodeType===1&&Pp(u,w),ai(u)):Pp(Ns,w.stateNode));break;case 4:N=Ns,H=cu,Ns=w.stateNode.containerInfo,cu=!0,Hu(u,d,w),Ns=N,cu=H;break;case 0:case 11:case 14:case 15:if(!Co&&(N=w.updateQueue,N!==null&&(N=N.lastEffect,N!==null))){H=N=N.next;do{var J=H,$e=J.destroy;J=J.tag,$e!==void 0&&((J&2)!==0||(J&4)!==0)&&Bp(w,d,$e),H=H.next}while(H!==N)}Hu(u,d,w);break;case 1:if(!Co&&(Ah(w,d),N=w.stateNode,typeof N.componentWillUnmount=="function"))try{N.props=w.memoizedProps,N.state=w.memoizedState,N.componentWillUnmount()}catch(yt){Lo(w,d,yt)}Hu(u,d,w);break;case 21:Hu(u,d,w);break;case 22:w.mode&1?(Co=(N=Co)||w.memoizedState!==null,Hu(u,d,w),Co=N):Hu(u,d,w);break;default:Hu(u,d,w)}}function Ih(u){var d=u.updateQueue;if(d!==null){u.updateQueue=null;var w=u.stateNode;w===null&&(w=u.stateNode=new ga),d.forEach(function(N){var H=iI.bind(null,u,N);w.has(N)||(w.add(N),N.then(H,H))})}}function cl(u,d){var w=d.deletions;if(w!==null)for(var N=0;N<w.length;N++){var H=w[N];try{var J=u,$e=d,yt=$e;e:for(;yt!==null;){switch(yt.tag){case 5:Ns=yt.stateNode,cu=!1;break e;case 3:Ns=yt.stateNode.containerInfo,cu=!0;break e;case 4:Ns=yt.stateNode.containerInfo,cu=!0;break e}yt=yt.return}if(Ns===null)throw Error(n(160));h_(J,$e,H),Ns=null,cu=!1;var Pt=H.alternate;Pt!==null&&(Pt.return=null),H.return=null}catch(gn){Lo(H,d,gn)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)p_(d,u),d=d.sibling}function p_(u,d){var w=u.alternate,N=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:if(cl(d,u),fu(u),N&4){try{Oc(3,u,u.return),Zp(3,u)}catch(_r){Lo(u,u.return,_r)}try{Oc(5,u,u.return)}catch(_r){Lo(u,u.return,_r)}}break;case 1:cl(d,u),fu(u),N&512&&w!==null&&Ah(w,w.return);break;case 5:if(cl(d,u),fu(u),N&512&&w!==null&&Ah(w,w.return),u.flags&32){var H=u.stateNode;try{dn(H,"")}catch(_r){Lo(u,u.return,_r)}}if(N&4&&(H=u.stateNode,H!=null)){var J=u.memoizedProps,$e=w!==null?w.memoizedProps:J,yt=u.type,Pt=u.updateQueue;if(u.updateQueue=null,Pt!==null)try{yt==="input"&&J.type==="radio"&&J.name!=null&&U(H,J),ni(yt,$e);var gn=ni(yt,J);for($e=0;$e<Pt.length;$e+=2){var jn=Pt[$e],Kn=Pt[$e+1];jn==="style"?Ir(H,Kn):jn==="dangerouslySetInnerHTML"?hn(H,Kn):jn==="children"?dn(H,Kn):T(H,jn,Kn,gn)}switch(yt){case"input":j(H,J);break;case"textarea":rt(H,J);break;case"select":var Bn=H._wrapperState.wasMultiple;H._wrapperState.wasMultiple=!!J.multiple;var ar=J.value;ar!=null?wt(H,!!J.multiple,ar,!1):Bn!==!!J.multiple&&(J.defaultValue!=null?wt(H,!!J.multiple,J.defaultValue,!0):wt(H,!!J.multiple,J.multiple?[]:"",!1))}H[Jl]=J}catch(_r){Lo(u,u.return,_r)}}break;case 6:if(cl(d,u),fu(u),N&4){if(u.stateNode===null)throw Error(n(162));H=u.stateNode,J=u.memoizedProps;try{H.nodeValue=J}catch(_r){Lo(u,u.return,_r)}}break;case 3:if(cl(d,u),fu(u),N&4&&w!==null&&w.memoizedState.isDehydrated)try{ai(d.containerInfo)}catch(_r){Lo(u,u.return,_r)}break;case 4:cl(d,u),fu(u);break;case 13:cl(d,u),fu(u),H=u.child,H.flags&8192&&(J=H.memoizedState!==null,H.stateNode.isHidden=J,!J||H.alternate!==null&&H.alternate.memoizedState!==null||(y_=Rn())),N&4&&Ih(u);break;case 22:if(jn=w!==null&&w.memoizedState!==null,u.mode&1?(Co=(gn=Co)||jn,cl(d,u),Co=gn):cl(d,u),fu(u),N&8192){if(gn=u.memoizedState!==null,(u.stateNode.isHidden=gn)&&!jn&&(u.mode&1)!==0)for(fr=u,jn=u.child;jn!==null;){for(Kn=fr=jn;fr!==null;){switch(Bn=fr,ar=Bn.child,Bn.tag){case 0:case 11:case 14:case 15:Oc(4,Bn,Bn.return);break;case 1:Ah(Bn,Bn.return);var yr=Bn.stateNode;if(typeof yr.componentWillUnmount=="function"){N=Bn,w=Bn.return;try{d=N,yr.props=d.memoizedProps,yr.state=d.memoizedState,yr.componentWillUnmount()}catch(_r){Lo(N,w,_r)}}break;case 5:Ah(Bn,Bn.return);break;case 22:if(Bn.memoizedState!==null){Af(Kn);continue}}ar!==null?(ar.return=Bn,fr=ar):Af(Kn)}jn=jn.sibling}e:for(jn=null,Kn=u;;){if(Kn.tag===5){if(jn===null){jn=Kn;try{H=Kn.stateNode,gn?(J=H.style,typeof J.setProperty=="function"?J.setProperty("display","none","important"):J.display="none"):(yt=Kn.stateNode,Pt=Kn.memoizedProps.style,$e=Pt!=null&&Pt.hasOwnProperty("display")?Pt.display:null,yt.style.display=tr("display",$e))}catch(_r){Lo(u,u.return,_r)}}}else if(Kn.tag===6){if(jn===null)try{Kn.stateNode.nodeValue=gn?"":Kn.memoizedProps}catch(_r){Lo(u,u.return,_r)}}else if((Kn.tag!==22&&Kn.tag!==23||Kn.memoizedState===null||Kn===u)&&Kn.child!==null){Kn.child.return=Kn,Kn=Kn.child;continue}if(Kn===u)break e;for(;Kn.sibling===null;){if(Kn.return===null||Kn.return===u)break e;jn===Kn&&(jn=null),Kn=Kn.return}jn===Kn&&(jn=null),Kn.sibling.return=Kn.return,Kn=Kn.sibling}}break;case 19:cl(d,u),fu(u),N&4&&Ih(u);break;case 21:break;default:cl(d,u),fu(u)}}function fu(u){var d=u.flags;if(d&2){try{e:{for(var w=u.return;w!==null;){if(CE(w)){var N=w;break e}w=w.return}throw Error(n(160))}switch(N.tag){case 5:var H=N.stateNode;N.flags&32&&(dn(H,""),N.flags&=-33);var J=RE(u);Im(u,J,H);break;case 3:case 4:var $e=N.stateNode.containerInfo,yt=RE(u);d_(u,yt,$e);break;default:throw Error(n(161))}}catch(Pt){Lo(u,u.return,Pt)}u.flags&=-3}d&4096&&(u.flags&=-4097)}function Cm(u,d,w){fr=u,g_(u)}function g_(u,d,w){for(var N=(u.mode&1)!==0;fr!==null;){var H=fr,J=H.child;if(H.tag===22&&N){var $e=H.memoizedState!==null||Sm;if(!$e){var yt=H.alternate,Pt=yt!==null&&yt.memoizedState!==null||Co;yt=Sm;var gn=Co;if(Sm=$e,(Co=Pt)&&!gn)for(fr=H;fr!==null;)$e=fr,Pt=$e.child,$e.tag===22&&$e.memoizedState!==null?xE(H):Pt!==null?(Pt.return=$e,fr=Pt):xE(H);for(;J!==null;)fr=J,g_(J),J=J.sibling;fr=H,Sm=yt,Co=gn}du(u)}else(H.subtreeFlags&8772)!==0&&J!==null?(J.return=H,fr=J):du(u)}}function du(u){for(;fr!==null;){var d=fr;if((d.flags&8772)!==0){var w=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:Co||Zp(5,d);break;case 1:var N=d.stateNode;if(d.flags&4&&!Co)if(w===null)N.componentDidMount();else{var H=d.elementType===d.type?w.memoizedProps:ft(d.type,w.memoizedProps);N.componentDidUpdate(H,w.memoizedState,N.__reactInternalSnapshotBeforeUpdate)}var J=d.updateQueue;J!==null&&z(d,J,N);break;case 3:var $e=d.updateQueue;if($e!==null){if(w=null,d.child!==null)switch(d.child.tag){case 5:w=d.child.stateNode;break;case 1:w=d.child.stateNode}z(d,$e,w)}break;case 5:var yt=d.stateNode;if(w===null&&d.flags&4){w=yt;var Pt=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":Pt.autoFocus&&w.focus();break;case"img":Pt.src&&(w.src=Pt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var gn=d.alternate;if(gn!==null){var jn=gn.memoizedState;if(jn!==null){var Kn=jn.dehydrated;Kn!==null&&ai(Kn)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Co||d.flags&512&&Am(d)}catch(Bn){Lo(d,d.return,Bn)}}if(d===u){fr=null;break}if(w=d.sibling,w!==null){w.return=d.return,fr=w;break}fr=d.return}}function Af(u){for(;fr!==null;){var d=fr;if(d===u){fr=null;break}var w=d.sibling;if(w!==null){w.return=d.return,fr=w;break}fr=d.return}}function xE(u){for(;fr!==null;){var d=fr;try{switch(d.tag){case 0:case 11:case 15:var w=d.return;try{Zp(4,d)}catch(Pt){Lo(d,w,Pt)}break;case 1:var N=d.stateNode;if(typeof N.componentDidMount=="function"){var H=d.return;try{N.componentDidMount()}catch(Pt){Lo(d,H,Pt)}}var J=d.return;try{Am(d)}catch(Pt){Lo(d,J,Pt)}break;case 5:var $e=d.return;try{Am(d)}catch(Pt){Lo(d,$e,Pt)}}}catch(Pt){Lo(d,d.return,Pt)}if(d===u){fr=null;break}var yt=d.sibling;if(yt!==null){yt.return=d.return,fr=yt;break}fr=d.return}}var NE=Math.ceil,Rm=S.ReactCurrentDispatcher,m_=S.ReactCurrentOwner,Dl=S.ReactCurrentBatchConfig,ji=0,Os=null,Jo=null,js=0,fl=0,Ch=$s(0),hs=0,jp=null,If=0,Vp=0,xm=0,zp=null,ka=null,y_=0,yd=1/0,Lc=null,Nm=!1,v_=null,Cf=null,Om=!1,Rf=null,ma=0,Hp=0,__=null,Lm=-1,Gp=0;function ya(){return(ji&6)!==0?Rn():Lm!==-1?Lm:Lm=Rn()}function xf(u){return(u.mode&1)===0?1:(ji&2)!==0&&js!==0?js&-js:Tm.transition!==null?(Gp===0&&(Gp=Rr()),Gp):(u=Kr,u!==0||(u=window.event,u=u===void 0?16:$o(u.type)),u)}function hu(u,d,w,N){if(50<Hp)throw Hp=0,__=null,Error(n(185));ti(u,w,N),((ji&2)===0||u!==Os)&&(u===Os&&((ji&2)===0&&(Vp|=w),hs===4&&Nf(u,js)),Fa(u,N),w===1&&ji===0&&(d.mode&1)===0&&(yd=Rn()+500,dd&&Bu()))}function Fa(u,d){var w=u.callbackNode;xn(u,d);var N=aa(u,u===Os?js:0);if(N===0)w!==null&&pt(w),u.callbackNode=null,u.callbackPriority=0;else if(d=N&-N,u.callbackPriority!==d){if(w!=null&&pt(w),d===1)u.tag===0?wc(OE.bind(null,u)):bm(OE.bind(null,u)),mf(function(){(ji&6)===0&&Bu()}),w=null;else{switch(Oi(N)){case 1:w=Sr;break;case 4:w=Ri;break;case 16:w=xi;break;case 536870912:w=Vr;break;default:w=xi}w=$E(w,Dm.bind(null,u))}u.callbackPriority=d,u.callbackNode=w}}function Dm(u,d){if(Lm=-1,Gp=0,(ji&6)!==0)throw Error(n(327));var w=u.callbackNode;if(Rh()&&u.callbackNode!==w)return null;var N=aa(u,u===Os?js:0);if(N===0)return null;if((N&30)!==0||(N&u.expiredLanes)!==0||d)d=Pm(u,N);else{d=N;var H=ji;ji|=2;var J=DE();(Os!==u||js!==d)&&(Lc=null,yd=Rn()+500,_d(u,d));do try{eI();break}catch(yt){LE(u,yt)}while(!0);nu(),Rm.current=J,ji=H,Jo!==null?d=0:(Os=null,js=0,d=hs)}if(d!==0){if(d===2&&(H=nr(u),H!==0&&(N=H,d=b_(u,H))),d===1)throw w=jp,_d(u,0),Nf(u,N),Fa(u,Rn()),w;if(d===6)Nf(u,N);else{if(H=u.current.alternate,(N&30)===0&&!XA(H)&&(d=Pm(u,N),d===2&&(J=nr(u),J!==0&&(N=J,d=b_(u,J))),d===1))throw w=jp,_d(u,0),Nf(u,N),Fa(u,Rn()),w;switch(u.finishedWork=H,u.finishedLanes=N,d){case 0:case 1:throw Error(n(345));case 2:bd(u,ka,Lc);break;case 3:if(Nf(u,N),(N&130023424)===N&&(d=y_+500-Rn(),10<d)){if(aa(u,0)!==0)break;if(H=u.suspendedLanes,(H&N)!==N){ya(),u.pingedLanes|=u.suspendedLanes&H;break}u.timeoutHandle=Ql(bd.bind(null,u,ka,Lc),d);break}bd(u,ka,Lc);break;case 4:if(Nf(u,N),(N&4194240)===N)break;for(d=u.eventTimes,H=-1;0<N;){var $e=31-po(N);J=1<<$e,$e=d[$e],$e>H&&(H=$e),N&=~J}if(N=H,N=Rn()-N,N=(120>N?120:480>N?480:1080>N?1080:1920>N?1920:3e3>N?3e3:4320>N?4320:1960*NE(N/1960))-N,10<N){u.timeoutHandle=Ql(bd.bind(null,u,ka,Lc),N);break}bd(u,ka,Lc);break;case 5:bd(u,ka,Lc);break;default:throw Error(n(329))}}}return Fa(u,Rn()),u.callbackNode===w?Dm.bind(null,u):null}function b_(u,d){var w=zp;return u.current.memoizedState.isDehydrated&&(_d(u,d).flags|=256),u=Pm(u,d),u!==2&&(d=ka,ka=w,d!==null&&E_(d)),u}function E_(u){ka===null?ka=u:ka.push.apply(ka,u)}function XA(u){for(var d=u;;){if(d.flags&16384){var w=d.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var N=0;N<w.length;N++){var H=w[N],J=H.getSnapshot;H=H.value;try{if(!fn(J(),H))return!1}catch{return!1}}}if(w=d.child,d.subtreeFlags&16384&&w!==null)w.return=d,d=w;else{if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Nf(u,d){for(d&=~xm,d&=~Vp,u.suspendedLanes|=d,u.pingedLanes&=~d,u=u.expirationTimes;0<d;){var w=31-po(d),N=1<<w;u[w]=-1,d&=~N}}function OE(u){if((ji&6)!==0)throw Error(n(327));Rh();var d=aa(u,0);if((d&1)===0)return Fa(u,Rn()),null;var w=Pm(u,d);if(u.tag!==0&&w===2){var N=nr(u);N!==0&&(d=N,w=b_(u,N))}if(w===1)throw w=jp,_d(u,0),Nf(u,d),Fa(u,Rn()),w;if(w===6)throw Error(n(345));return u.finishedWork=u.current.alternate,u.finishedLanes=d,bd(u,ka,Lc),Fa(u,Rn()),null}function w_(u,d){var w=ji;ji|=1;try{return u(d)}finally{ji=w,ji===0&&(yd=Rn()+500,dd&&Bu())}}function vd(u){Rf!==null&&Rf.tag===0&&(ji&6)===0&&Rh();var d=ji;ji|=1;var w=Dl.transition,N=Kr;try{if(Dl.transition=null,Kr=1,u)return u()}finally{Kr=N,Dl.transition=w,ji=d,(ji&6)===0&&Bu()}}function T_(){fl=Ch.current,ao(Ch)}function _d(u,d){u.finishedWork=null,u.finishedLanes=0;var w=u.timeoutHandle;if(w!==-1&&(u.timeoutHandle=-1,ud(w)),Jo!==null)for(w=Jo.return;w!==null;){var N=w;switch(Ac(N),N.tag){case 1:N=N.type.childContextTypes,N!=null&&yh();break;case 3:fe(),ao(Us),ao(Is),Be();break;case 5:ce(N);break;case 4:fe();break;case 13:ao(ae);break;case 19:ao(ae);break;case 10:gd(N.type._context);break;case 22:case 23:T_()}w=w.return}if(Os=u,Jo=u=pu(u.current,null),js=fl=d,hs=0,jp=null,xm=Vp=If=0,ka=zp=null,xc!==null){for(d=0;d<xc.length;d++)if(w=xc[d],N=w.interleaved,N!==null){w.interleaved=null;var H=N.next,J=w.pending;if(J!==null){var $e=J.next;J.next=H,N.next=$e}w.pending=N}xc=null}return u}function LE(u,d){do{var w=Jo;try{if(nu(),Ke.current=Dn,se){for(var N=ge.memoizedState;N!==null;){var H=N.queue;H!==null&&(H.pending=null),N=N.next}se=!1}if(Le=0,F=Fe=ge=null,te=!1,re=0,m_.current=null,w===null||w.return===null){hs=1,jp=d,Jo=null;break}e:{var J=u,$e=w.return,yt=w,Pt=d;if(d=js,yt.flags|=32768,Pt!==null&&typeof Pt=="object"&&typeof Pt.then=="function"){var gn=Pt,jn=yt,Kn=jn.tag;if((jn.mode&1)===0&&(Kn===0||Kn===11||Kn===15)){var Bn=jn.alternate;Bn?(jn.updateQueue=Bn.updateQueue,jn.memoizedState=Bn.memoizedState,jn.lanes=Bn.lanes):(jn.updateQueue=null,jn.memoizedState=null)}var ar=Vu($e);if(ar!==null){ar.flags&=-257,ou(ar,$e,yt,J,d),ar.mode&1&&Ma(J,gn,d),d=ar,Pt=gn;var yr=d.updateQueue;if(yr===null){var _r=new Set;_r.add(Pt),d.updateQueue=_r}else yr.add(Pt);break e}else{if((d&1)===0){Ma(J,gn,d),S_();break e}Pt=Error(n(426))}}else if(uo&&yt.mode&1){var Ho=Vu($e);if(Ho!==null){(Ho.flags&65536)===0&&(Ho.flags|=256),ou(Ho,$e,yt,J,d),ul(cr(Pt,yt));break e}}J=Pt=cr(Pt,yt),hs!==4&&(hs=2),zp===null?zp=[J]:zp.push(J),J=$e;do{switch(J.tag){case 3:J.flags|=65536,d&=-d,J.lanes|=d;var on=zo(J,Pt,d);R(J,on);break e;case 1:yt=Pt;var Zt=J.type,un=J.stateNode;if((J.flags&128)===0&&(typeof Zt.getDerivedStateFromError=="function"||un!==null&&typeof un.componentDidCatch=="function"&&(Cf===null||!Cf.has(un)))){J.flags|=65536,d&=-d,J.lanes|=d;var Qn=bo(J,yt,d);R(J,Qn);break e}}J=J.return}while(J!==null)}ME(w)}catch(Ar){d=Ar,Jo===w&&w!==null&&(Jo=w=w.return);continue}break}while(!0)}function DE(){var u=Rm.current;return Rm.current=Dn,u===null?Dn:u}function S_(){(hs===0||hs===3||hs===2)&&(hs=4),Os===null||(If&268435455)===0&&(Vp&268435455)===0||Nf(Os,js)}function Pm(u,d){var w=ji;ji|=2;var N=DE();(Os!==u||js!==d)&&(Lc=null,_d(u,d));do try{JA();break}catch(H){LE(u,H)}while(!0);if(nu(),ji=w,Rm.current=N,Jo!==null)throw Error(n(261));return Os=null,js=0,hs}function JA(){for(;Jo!==null;)PE(Jo)}function eI(){for(;Jo!==null&&!Gt();)PE(Jo)}function PE(u){var d=FE(u.alternate,u,fl);u.memoizedProps=u.pendingProps,d===null?ME(u):Jo=d,m_.current=null}function ME(u){var d=u;do{var w=d.alternate;if(u=d.return,(d.flags&32768)===0){if(w=KA(w,d,fl),w!==null){Jo=w;return}}else{if(w=YA(w,d),w!==null){w.flags&=32767,Jo=w;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{hs=6,Jo=null;return}}if(d=d.sibling,d!==null){Jo=d;return}Jo=d=u}while(d!==null);hs===0&&(hs=5)}function bd(u,d,w){var N=Kr,H=Dl.transition;try{Dl.transition=null,Kr=1,tI(u,d,w,N)}finally{Dl.transition=H,Kr=N}return null}function tI(u,d,w,N){do Rh();while(Rf!==null);if((ji&6)!==0)throw Error(n(327));w=u.finishedWork;var H=u.finishedLanes;if(w===null)return null;if(u.finishedWork=null,u.finishedLanes=0,w===u.current)throw Error(n(177));u.callbackNode=null,u.callbackPriority=0;var J=w.lanes|w.childLanes;if(io(u,J),u===Os&&(Jo=Os=null,js=0),(w.subtreeFlags&2064)===0&&(w.flags&2064)===0||Om||(Om=!0,$E(xi,function(){return Rh(),null})),J=(w.flags&15990)!==0,(w.subtreeFlags&15990)!==0||J){J=Dl.transition,Dl.transition=null;var $e=Kr;Kr=1;var yt=ji;ji|=4,m_.current=null,QA(u,w),p_(w,u),Cp($u),xa=!!ad,$u=ad=null,u.current=w,Cm(w),Gn(),ji=yt,Kr=$e,Dl.transition=J}else u.current=w;if(Om&&(Om=!1,Rf=u,ma=H),J=u.pendingLanes,J===0&&(Cf=null),Ja(w.stateNode),Fa(u,Rn()),d!==null)for(N=u.onRecoverableError,w=0;w<d.length;w++)H=d[w],N(H.value,{componentStack:H.stack,digest:H.digest});if(Nm)throw Nm=!1,u=v_,v_=null,u;return(ma&1)!==0&&u.tag!==0&&Rh(),J=u.pendingLanes,(J&1)!==0?u===__?Hp++:(Hp=0,__=u):Hp=0,Bu(),null}function Rh(){if(Rf!==null){var u=Oi(ma),d=Dl.transition,w=Kr;try{if(Dl.transition=null,Kr=16>u?16:u,Rf===null)var N=!1;else{if(u=Rf,Rf=null,ma=0,(ji&6)!==0)throw Error(n(331));var H=ji;for(ji|=4,fr=u.current;fr!==null;){var J=fr,$e=J.child;if((fr.flags&16)!==0){var yt=J.deletions;if(yt!==null){for(var Pt=0;Pt<yt.length;Pt++){var gn=yt[Pt];for(fr=gn;fr!==null;){var jn=fr;switch(jn.tag){case 0:case 11:case 15:Oc(8,jn,J)}var Kn=jn.child;if(Kn!==null)Kn.return=jn,fr=Kn;else for(;fr!==null;){jn=fr;var Bn=jn.sibling,ar=jn.return;if(IE(jn),jn===gn){fr=null;break}if(Bn!==null){Bn.return=ar,fr=Bn;break}fr=ar}}}var yr=J.alternate;if(yr!==null){var _r=yr.child;if(_r!==null){yr.child=null;do{var Ho=_r.sibling;_r.sibling=null,_r=Ho}while(_r!==null)}}fr=J}}if((J.subtreeFlags&2064)!==0&&$e!==null)$e.return=J,fr=$e;else e:for(;fr!==null;){if(J=fr,(J.flags&2048)!==0)switch(J.tag){case 0:case 11:case 15:Oc(9,J,J.return)}var on=J.sibling;if(on!==null){on.return=J.return,fr=on;break e}fr=J.return}}var Zt=u.current;for(fr=Zt;fr!==null;){$e=fr;var un=$e.child;if(($e.subtreeFlags&2064)!==0&&un!==null)un.return=$e,fr=un;else e:for($e=Zt;fr!==null;){if(yt=fr,(yt.flags&2048)!==0)try{switch(yt.tag){case 0:case 11:case 15:Zp(9,yt)}}catch(Ar){Lo(yt,yt.return,Ar)}if(yt===$e){fr=null;break e}var Qn=yt.sibling;if(Qn!==null){Qn.return=yt.return,fr=Qn;break e}fr=yt.return}}if(ji=H,Bu(),Ni&&typeof Ni.onPostCommitFiberRoot=="function")try{Ni.onPostCommitFiberRoot(yi,u)}catch{}N=!0}return N}finally{Kr=w,Dl.transition=d}}return!1}function Mm(u,d,w){d=cr(w,d),d=zo(u,d,1),u=Pa(u,d,1),d=ya(),u!==null&&(ti(u,1,d),Fa(u,d))}function Lo(u,d,w){if(u.tag===3)Mm(u,u,w);else for(;d!==null;){if(d.tag===3){Mm(d,u,w);break}else if(d.tag===1){var N=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof N.componentDidCatch=="function"&&(Cf===null||!Cf.has(N))){u=cr(w,u),u=bo(d,u,1),d=Pa(d,u,1),u=ya(),d!==null&&(ti(d,1,u),Fa(d,u));break}}d=d.return}}function nI(u,d,w){var N=u.pingCache;N!==null&&N.delete(d),d=ya(),u.pingedLanes|=u.suspendedLanes&w,Os===u&&(js&w)===w&&(hs===4||hs===3&&(js&130023424)===js&&500>Rn()-y_?_d(u,0):xm|=w),Fa(u,d)}function kE(u,d){d===0&&((u.mode&1)===0?d=1:(d=El,El<<=1,(El&130023424)===0&&(El=4194304)));var w=ya();u=iu(u,d),u!==null&&(ti(u,d,w),Fa(u,w))}function rI(u){var d=u.memoizedState,w=0;d!==null&&(w=d.retryLane),kE(u,w)}function iI(u,d){var w=0;switch(u.tag){case 13:var N=u.stateNode,H=u.memoizedState;H!==null&&(w=H.retryLane);break;case 19:N=u.stateNode;break;default:throw Error(n(314))}N!==null&&N.delete(d),kE(u,w)}var FE;FE=function(u,d,w){if(u!==null)if(u.memoizedProps!==d.pendingProps||Us.current)Eo=!0;else{if((u.lanes&w)===0&&(d.flags&128)===0)return Eo=!1,TE(u,d,w);Eo=(u.flags&131072)!==0}else Eo=!1,uo&&(d.flags&1048576)!==0&&Em(d,_h,d.index);switch(d.lanes=0,d.tag){case 2:var N=d.type;lu(u,d),u=d.pendingProps;var H=Ec(d,Is.current);ru(d,w),H=ke(null,d,N,u,H,w);var J=Ae();return d.flags|=1,typeof H=="object"&&H!==null&&typeof H.render=="function"&&H.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,Qs(N)?(J=!0,Na(d)):J=!1,d.memoizedState=H.state!==null&&H.state!==void 0?H.state:null,Th(d),H.updater=We,d.stateNode=H,H._reactInternals=d,Cn(d,N,u,w),d=Sf(null,d,N,!0,J,w)):(d.tag=0,uo&&J&&bf(d),Zi(null,d,H,w),d=d.child),d;case 16:N=d.elementType;e:{switch(lu(u,d),u=d.pendingProps,H=N._init,N=H(N._payload),d.type=N,H=d.tag=sI(N),u=ft(N,u),H){case 0:d=Tf(null,d,N,u,w);break e;case 1:d=Ll(null,d,N,u,w);break e;case 11:d=su(null,d,N,u,w);break e;case 14:d=au(null,d,N,ft(N.type,u),w);break e}throw Error(n(306,N,""))}return d;case 0:return N=d.type,H=d.pendingProps,H=d.elementType===N?H:ft(N,H),Tf(u,d,N,H,w);case 1:return N=d.type,H=d.pendingProps,H=d.elementType===N?H:ft(N,H),Ll(u,d,N,H,w);case 3:e:{if(zu(d),u===null)throw Error(n(387));N=d.pendingProps,J=d.memoizedState,H=J.element,Sh(u,d),P(d,N,null,w);var $e=d.memoizedState;if(N=$e.element,J.isDehydrated)if(J={element:N,isDehydrated:!1,cache:$e.cache,pendingSuspenseBoundaries:$e.pendingSuspenseBoundaries,transitions:$e.transitions},d.updateQueue.baseState=J,d.memoizedState=J,d.flags&256){H=cr(Error(n(423)),d),d=Dt(u,d,N,w,H);break e}else if(N!==H){H=cr(Error(n(424)),d),d=Dt(u,d,N,w,H);break e}else for(da=Xl(d.stateNode.containerInfo.firstChild),fs=d,uo=!0,al=null,w=hd(d,null,N,w),d.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(Ol(),N===H){d=uu(u,d,w);break e}Zi(u,d,N,w)}d=d.child}return d;case 5:return Q(d),u===null&&Rs(d),N=d.type,H=d.pendingProps,J=u!==null?u.memoizedProps:null,$e=H.children,ld(N,H)?$e=null:J!==null&&ld(N,J)&&(d.flags|=32),wf(u,d),Zi(u,d,$e,w),d.child;case 6:return u===null&&Rs(d),null;case 13:return mr(u,d,w);case 4:return _e(d,d.stateNode.containerInfo),N=d.pendingProps,u===null?d.child=Io(d,null,N,w):Zi(u,d,N,w),d.child;case 11:return N=d.type,H=d.pendingProps,H=d.elementType===N?H:ft(N,H),su(u,d,N,H,w);case 7:return Zi(u,d,d.pendingProps,w),d.child;case 8:return Zi(u,d,d.pendingProps.children,w),d.child;case 12:return Zi(u,d,d.pendingProps.children,w),d.child;case 10:e:{if(N=d.type._context,H=d.pendingProps,J=d.memoizedProps,$e=H.value,lo(pd,N._currentValue),N._currentValue=$e,J!==null)if(fn(J.value,$e)){if(J.children===H.children&&!Us.current){d=uu(u,d,w);break e}}else for(J=d.child,J!==null&&(J.return=d);J!==null;){var yt=J.dependencies;if(yt!==null){$e=J.child;for(var Pt=yt.firstContext;Pt!==null;){if(Pt.context===N){if(J.tag===1){Pt=Da(-1,w&-w),Pt.tag=2;var gn=J.updateQueue;if(gn!==null){gn=gn.shared;var jn=gn.pending;jn===null?Pt.next=Pt:(Pt.next=jn.next,jn.next=Pt),gn.pending=Pt}}J.lanes|=w,Pt=J.alternate,Pt!==null&&(Pt.lanes|=w),ds(J.return,w,d),yt.lanes|=w;break}Pt=Pt.next}}else if(J.tag===10)$e=J.type===d.type?null:J.child;else if(J.tag===18){if($e=J.return,$e===null)throw Error(n(341));$e.lanes|=w,yt=$e.alternate,yt!==null&&(yt.lanes|=w),ds($e,w,d),$e=J.sibling}else $e=J.child;if($e!==null)$e.return=J;else for($e=J;$e!==null;){if($e===d){$e=null;break}if(J=$e.sibling,J!==null){J.return=$e.return,$e=J;break}$e=$e.return}J=$e}Zi(u,d,H.children,w),d=d.child}return d;case 9:return H=d.type,N=d.pendingProps.children,ru(d,w),H=ha(H),N=N(H),d.flags|=1,Zi(u,d,N,w),d.child;case 14:return N=d.type,H=ft(N,d.pendingProps),H=ft(N.type,H),au(u,d,N,H,w);case 15:return Oo(u,d,d.type,d.pendingProps,w);case 17:return N=d.type,H=d.pendingProps,H=d.elementType===N?H:ft(N,H),lu(u,d),d.tag=1,Qs(N)?(u=!0,Na(d)):u=!1,ru(d,w),Mt(d,N,H),Cn(d,N,H,w),Sf(null,d,N,!0,u,w);case 19:return xs(u,d,w);case 22:return Nc(u,d,w)}throw Error(n(156,d.tag))};function $E(u,d){return ze(u,d)}function oI(u,d,w,N){this.tag=u,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=N,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pl(u,d,w,N){return new oI(u,d,w,N)}function km(u){return u=u.prototype,!(!u||!u.isReactComponent)}function sI(u){if(typeof u=="function")return km(u)?1:0;if(u!=null){if(u=u.$$typeof,u===ve)return 11;if(u===Ne)return 14}return 2}function pu(u,d){var w=u.alternate;return w===null?(w=Pl(u.tag,d,u.key,u.mode),w.elementType=u.elementType,w.type=u.type,w.stateNode=u.stateNode,w.alternate=u,u.alternate=w):(w.pendingProps=d,w.type=u.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=u.flags&14680064,w.childLanes=u.childLanes,w.lanes=u.lanes,w.child=u.child,w.memoizedProps=u.memoizedProps,w.memoizedState=u.memoizedState,w.updateQueue=u.updateQueue,d=u.dependencies,w.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},w.sibling=u.sibling,w.index=u.index,w.ref=u.ref,w}function Fm(u,d,w,N,H,J){var $e=2;if(N=u,typeof u=="function")km(u)&&($e=1);else if(typeof u=="string")$e=5;else e:switch(u){case V:return Ed(w.children,H,J,d);case B:$e=8,H|=8;break;case ne:return u=Pl(12,w,d,H|2),u.elementType=ne,u.lanes=J,u;case ie:return u=Pl(13,w,d,H),u.elementType=ie,u.lanes=J,u;case ye:return u=Pl(19,w,d,H),u.elementType=ye,u.lanes=J,u;case oe:return $m(w,H,J,d);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case D:$e=10;break e;case X:$e=9;break e;case ve:$e=11;break e;case Ne:$e=14;break e;case Me:$e=16,N=null;break e}throw Error(n(130,u==null?u:typeof u,""))}return d=Pl($e,w,d,H),d.elementType=u,d.type=N,d.lanes=J,d}function Ed(u,d,w,N){return u=Pl(7,u,N,d),u.lanes=w,u}function $m(u,d,w,N){return u=Pl(22,u,N,d),u.elementType=oe,u.lanes=w,u.stateNode={isHidden:!1},u}function A_(u,d,w){return u=Pl(6,u,null,d),u.lanes=w,u}function I_(u,d,w){return d=Pl(4,u.children!==null?u.children:[],u.key,d),d.lanes=w,d.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},d}function aI(u,d,w,N,H){this.tag=d,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=si(0),this.expirationTimes=si(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=si(0),this.identifierPrefix=N,this.onRecoverableError=H,this.mutableSourceEagerHydrationData=null}function C_(u,d,w,N,H,J,$e,yt,Pt){return u=new aI(u,d,w,yt,Pt),d===1?(d=1,J===!0&&(d|=8)):d=0,J=Pl(3,null,null,d),u.current=J,J.stateNode=u,J.memoizedState={element:N,isDehydrated:w,cache:null,transitions:null,pendingSuspenseBoundaries:null},Th(J),u}function lI(u,d,w){var N=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$,key:N==null?null:""+N,children:u,containerInfo:d,implementation:w}}function UE(u){if(!u)return eu;u=u._reactInternals;e:{if(en(u)!==u||u.tag!==1)throw Error(n(170));var d=u;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(Qs(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(n(171))}if(u.tag===1){var w=u.type;if(Qs(w))return _m(u,w,d)}return d}function BE(u,d,w,N,H,J,$e,yt,Pt){return u=C_(w,N,!0,u,H,J,$e,yt,Pt),u.context=UE(null),w=u.current,N=ya(),H=xf(w),J=Da(N,H),J.callback=d??null,Pa(w,J,H),u.current.lanes=H,ti(u,H,N),Fa(u,N),u}function Um(u,d,w,N){var H=d.current,J=ya(),$e=xf(H);return w=UE(w),d.context===null?d.context=w:d.pendingContext=w,d=Da(J,$e),d.payload={element:u},N=N===void 0?null:N,N!==null&&(d.callback=N),u=Pa(H,d,$e),u!==null&&(hu(u,H,$e,J),L(u,H,$e)),$e}function Bm(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return u.child.stateNode;default:return u.child.stateNode}}function ZE(u,d){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var w=u.retryLane;u.retryLane=w!==0&&w<d?w:d}}function R_(u,d){ZE(u,d),(u=u.alternate)&&ZE(u,d)}function uI(){return null}var jE=typeof reportError=="function"?reportError:function(u){console.error(u)};function Zm(u){this._internalRoot=u}qp.prototype.render=Zm.prototype.render=function(u){var d=this._internalRoot;if(d===null)throw Error(n(409));Um(u,d,null,null)},qp.prototype.unmount=Zm.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var d=u.containerInfo;vd(function(){Um(null,u,null,null)}),d[Xo]=null}};function qp(u){this._internalRoot=u}qp.prototype.unstable_scheduleHydration=function(u){if(u){var d=Ms();u={blockedOn:null,target:u,priority:d};for(var w=0;w<Ra.length&&d!==0&&d<Ra[w].priority;w++);Ra.splice(w,0,u),w===0&&wl(u)}};function x_(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function jm(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11&&(u.nodeType!==8||u.nodeValue!==" react-mount-point-unstable "))}function VE(){}function cI(u,d,w,N,H){if(H){if(typeof N=="function"){var J=N;N=function(){var gn=Bm($e);J.call(gn)}}var $e=BE(d,N,u,0,null,!1,!1,"",VE);return u._reactRootContainer=$e,u[Xo]=$e.current,Yl(u.nodeType===8?u.parentNode:u),vd(),$e}for(;H=u.lastChild;)u.removeChild(H);if(typeof N=="function"){var yt=N;N=function(){var gn=Bm(Pt);yt.call(gn)}}var Pt=C_(u,0,!1,null,null,!1,!1,"",VE);return u._reactRootContainer=Pt,u[Xo]=Pt.current,Yl(u.nodeType===8?u.parentNode:u),vd(function(){Um(d,Pt,w,N)}),Pt}function wd(u,d,w,N,H){var J=w._reactRootContainer;if(J){var $e=J;if(typeof H=="function"){var yt=H;H=function(){var Pt=Bm($e);yt.call(Pt)}}Um(d,$e,u,H)}else $e=cI(w,d,u,H,N);return Bm($e)}Ei=function(u){switch(u.tag){case 3:var d=u.stateNode;if(d.current.memoizedState.isDehydrated){var w=Ia(d.pendingLanes);w!==0&&(hi(d,w|1),Fa(d,Rn()),(ji&6)===0&&(yd=Rn()+500,Bu()))}break;case 13:vd(function(){var N=iu(u,1);if(N!==null){var H=ya();hu(N,u,1,H)}}),R_(u,1)}},No=function(u){if(u.tag===13){var d=iu(u,134217728);if(d!==null){var w=ya();hu(d,u,134217728,w)}R_(u,134217728)}},vo=function(u){if(u.tag===13){var d=xf(u),w=iu(u,d);if(w!==null){var N=ya();hu(w,u,d,N)}R_(u,d)}},Ms=function(){return Kr},bs=function(u,d){var w=Kr;try{return Kr=u,d()}finally{Kr=w}},eo=function(u,d,w){switch(d){case"input":if(j(u,w),d=w.name,w.type==="radio"&&d!=null){for(w=u;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<w.length;d++){var N=w[d];if(N!==u&&N.form===u.form){var H=fd(N);if(!H)throw Error(n(90));Ve(N),j(N,H)}}}break;case"textarea":rt(u,w);break;case"select":d=w.value,d!=null&&wt(u,!!w.multiple,d,!1)}},di=w_,xo=vd;var fI={usingClientEntryPoint:!1,Events:[As,ri,fd,ro,To,w_]},Wp={findFiberByHostInstance:Rl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dI={bundleType:Wp.bundleType,version:Wp.version,rendererPackageName:Wp.rendererPackageName,rendererConfig:Wp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:S.ReactCurrentDispatcher,findHostInstanceByFiber:function(u){return u=Er(u),u===null?null:u.stateNode},findFiberByHostInstance:Wp.findFiberByHostInstance||uI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vm.isDisabled&&Vm.supportsFiber)try{yi=Vm.inject(dI),Ni=Vm}catch{}}return gl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fI,gl.createPortal=function(u,d){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x_(d))throw Error(n(200));return lI(u,d,null,w)},gl.createRoot=function(u,d){if(!x_(u))throw Error(n(299));var w=!1,N="",H=jE;return d!=null&&(d.unstable_strictMode===!0&&(w=!0),d.identifierPrefix!==void 0&&(N=d.identifierPrefix),d.onRecoverableError!==void 0&&(H=d.onRecoverableError)),d=C_(u,1,!1,null,null,w,!1,N,H),u[Xo]=d.current,Yl(u.nodeType===8?u.parentNode:u),new Zm(d)},gl.findDOMNode=function(u){if(u==null)return null;if(u.nodeType===1)return u;var d=u._reactInternals;if(d===void 0)throw typeof u.render=="function"?Error(n(188)):(u=Object.keys(u).join(","),Error(n(268,u)));return u=Er(d),u=u===null?null:u.stateNode,u},gl.flushSync=function(u){return vd(u)},gl.hydrate=function(u,d,w){if(!jm(d))throw Error(n(200));return wd(null,u,d,!0,w)},gl.hydrateRoot=function(u,d,w){if(!x_(u))throw Error(n(405));var N=w!=null&&w.hydratedSources||null,H=!1,J="",$e=jE;if(w!=null&&(w.unstable_strictMode===!0&&(H=!0),w.identifierPrefix!==void 0&&(J=w.identifierPrefix),w.onRecoverableError!==void 0&&($e=w.onRecoverableError)),d=BE(d,null,u,1,w??null,H,!1,J,$e),u[Xo]=d.current,Yl(u),N)for(u=0;u<N.length;u++)w=N[u],H=w._getVersion,H=H(w._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[w,H]:d.mutableSourceEagerHydrationData.push(w,H);return new qp(d)},gl.render=function(u,d,w){if(!jm(d))throw Error(n(200));return wd(null,u,d,!1,w)},gl.unmountComponentAtNode=function(u){if(!jm(u))throw Error(n(40));return u._reactRootContainer?(vd(function(){wd(null,null,u,!1,function(){u._reactRootContainer=null,u[Xo]=null})}),!0):!1},gl.unstable_batchedUpdates=w_,gl.unstable_renderSubtreeIntoContainer=function(u,d,w,N){if(!jm(w))throw Error(n(200));if(u==null||u._reactInternals===void 0)throw Error(n(38));return wd(u,d,w,!1,N)},gl.version="18.3.1-next-f1338f8080-20240426",gl}var _C;function eF(){if(_C)return Tw.exports;_C=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Tw.exports=J5(),Tw.exports}var bC;function tF(){if(bC)return z_;bC=1;var t=eF();return z_.createRoot=t.createRoot,z_.hydrateRoot=t.hydrateRoot,z_}var H_=tF(),og=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Mh=typeof window>"u"||"Deno"in globalThis;function _u(){}function nF(t,e){return typeof t=="function"?t(e):t}function Iw(t){return typeof t=="number"&&t>=0&&t!==1/0}function EC(t,e){return Math.max(t+(e||0)-Date.now(),0)}function sg(t,e){return typeof t=="function"?t(e):t}function Yu(t,e){return typeof t=="function"?t(e):t}function wC(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:o,queryKey:l,stale:c}=t;if(l){if(r){if(e.queryHash!==Cw(l,e.options))return!1}else if(!hy(e.queryKey,l))return!1}if(n!=="all"){const f=e.isActive();if(n==="active"&&!f||n==="inactive"&&f)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||i&&i!==e.state.fetchStatus||o&&!o(e))}function TC(t,e){const{exact:n,status:r,predicate:i,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(n){if(kh(e.options.mutationKey)!==kh(o))return!1}else if(!hy(e.options.mutationKey,o))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function Cw(t,e){return(e?.queryKeyHashFn||kh)(t)}function kh(t){return JSON.stringify(t,(e,n)=>Rw(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function hy(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!hy(t[n],e[n])):!1}function SC(t,e){if(t===e)return t;const n=AC(t)&&AC(e);if(n||Rw(t)&&Rw(e)){const r=n?t:Object.keys(t),i=r.length,o=n?e:Object.keys(e),l=o.length,c=n?[]:{};let f=0;for(let g=0;g<l;g++){const y=n?g:o[g];(!n&&r.includes(y)||n)&&t[y]===void 0&&e[y]===void 0?(c[y]=void 0,f++):(c[y]=SC(t[y],e[y]),c[y]===t[y]&&t[y]!==void 0&&f++)}return i===l&&f===i?t:c}return e}function G_(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function AC(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Rw(t){if(!IC(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!IC(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function IC(t){return Object.prototype.toString.call(t)==="[object Object]"}function rF(t){return new Promise(e=>{setTimeout(e,t)})}function xw(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?SC(t,e):e}function iF(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function oF(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Nw=Symbol();function CC(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===Nw?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var sF=class extends og{#e;#t;#n;constructor(){super(),this.#n=e=>{if(!Mh&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Ow=new sF,aF=class extends og{#e=!0;#t;#n;constructor(){super(),this.#n=e=>{if(!Mh&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#e}},q_=new aF;function Lw(){let t,e;const n=new Promise((i,o)=>{t=i,e=o});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}function lF(t){return Math.min(1e3*2**t,3e4)}function RC(t){return(t??"online")==="online"?q_.isOnline():!0}var xC=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function Dw(t){return t instanceof xC}function NC(t){let e=!1,n=0,r=!1,i;const o=Lw(),l=_=>{r||(p(new xC(_)),t.abort?.())},c=()=>{e=!0},f=()=>{e=!1},g=()=>Ow.isFocused()&&(t.networkMode==="always"||q_.isOnline())&&t.canRun(),y=()=>RC(t.networkMode)&&t.canRun(),h=_=>{r||(r=!0,t.onSuccess?.(_),i?.(),o.resolve(_))},p=_=>{r||(r=!0,t.onError?.(_),i?.(),o.reject(_))},E=()=>new Promise(_=>{i=I=>{(r||g())&&_(I)},t.onPause?.()}).then(()=>{i=void 0,r||t.onContinue?.()}),A=()=>{if(r)return;let _;const I=n===0?t.initialPromise:void 0;try{_=I??t.fn()}catch(C){_=Promise.reject(C)}Promise.resolve(_).then(h).catch(C=>{if(r)return;const v=t.retry??(Mh?0:3),T=t.retryDelay??lF,S=typeof T=="function"?T(n,C):T,O=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,C);if(e||!O){p(C);return}n++,t.onFail?.(n,C),rF(S).then(()=>g()?void 0:E()).then(()=>{e?p(C):A()})})};return{promise:o,cancel:l,continue:()=>(i?.(),o),cancelRetry:c,continueRetry:f,canStart:y,start:()=>(y()?A():E().then(A),o)}}function uF(){let t=[],e=0,n=c=>{c()},r=c=>{c()},i=c=>setTimeout(c,0);const o=c=>{e?t.push(c):i(()=>{n(c)})},l=()=>{const c=t;t=[],c.length&&i(()=>{r(()=>{c.forEach(f=>{n(f)})})})};return{batch:c=>{let f;e++;try{f=c()}finally{e--,e||l()}return f},batchCalls:c=>(...f)=>{o(()=>{c(...f)})},schedule:o,setNotifyFunction:c=>{n=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{i=c}}}var Ds=uF(),OC=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Iw(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Mh?1/0:300*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},cF=class extends OC{#e;#t;#n;#r;#i;#s;constructor(e){super(),this.#s=!1,this.#i=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#n=e.cache,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=fF(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(e){this.options={...this.#i,...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,n){const r=xw(this.state.data,e,this.options);return this.#o({data:r,type:"success",dataUpdatedAt:n?.updatedAt,manual:n?.manual}),r}setState(e,n){this.#o({type:"setState",state:e,setStateOptions:n})}cancel(e){const n=this.#r?.promise;return this.#r?.cancel(e),n?n.then(_u).catch(_u):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>Yu(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Nw||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!EC(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(n=>n.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(n=>n.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(this.#r&&(this.#s?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#o({type:"invalidate"})}fetch(e,n){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&n?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(g=>g.options.queryFn);f&&this.setOptions(f.options)}const r=new AbortController,i=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(this.#s=!0,r.signal)})},o=()=>{const f=CC(this.options,n),g={queryKey:this.queryKey,meta:this.meta};return i(g),this.#s=!1,this.options.persister?this.options.persister(f,g,this):f(g)},l={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};i(l),this.options.behavior?.onFetch(l,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#o({type:"fetch",meta:l.fetchOptions?.meta});const c=f=>{Dw(f)&&f.silent||this.#o({type:"error",error:f}),Dw(f)||(this.#n.config.onError?.(f,this),this.#n.config.onSettled?.(this.state.data,f,this)),this.scheduleGc()};return this.#r=NC({initialPromise:n?.initialPromise,fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:f=>{if(f===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(g){c(g);return}this.#n.config.onSuccess?.(f,this),this.#n.config.onSettled?.(f,this.state.error,this),this.scheduleGc()},onError:c,onFail:(f,g)=>{this.#o({type:"failed",failureCount:f,error:g})},onPause:()=>{this.#o({type:"pause"})},onContinue:()=>{this.#o({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}),this.#r.start()}#o(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...LC(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return Dw(i)&&i.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),Ds.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function LC(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:RC(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function fF(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var dF=class extends og{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,n,r){const i=n.queryKey,o=n.queryHash??Cw(i,n);let l=this.get(o);return l||(l=new cF({cache:this,queryKey:i,queryHash:o,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(l)),l}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=this.#e.get(e.queryHash);n&&(e.destroy(),n===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Ds.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>wC(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>wC(e,r)):n}notify(e){Ds.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Ds.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Ds.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},hF=class extends OC{#e;#t;#n;constructor(e){super(),this.mutationId=e.mutationId,this.#t=e.mutationCache,this.#e=[],this.state=e.state||DC(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#e.includes(e)||(this.#e.push(e),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#e=this.#e.filter(n=>n!==e),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(e){this.#n=NC({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(i,o)=>{this.#r({type:"failed",failureCount:i,error:o})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const n=this.state.status==="pending",r=!this.#n.canStart();try{if(!n){this.#r({type:"pending",variables:e,isPaused:r}),await this.#t.config.onMutate?.(e,this);const o=await this.options.onMutate?.(e);o!==this.state.context&&this.#r({type:"pending",context:o,variables:e,isPaused:r})}const i=await this.#n.start();return await this.#t.config.onSuccess?.(i,e,this.state.context,this),await this.options.onSuccess?.(i,e,this.state.context),await this.#t.config.onSettled?.(i,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(i,null,e,this.state.context),this.#r({type:"success",data:i}),i}catch(i){try{throw await this.#t.config.onError?.(i,e,this.state.context,this),await this.options.onError?.(i,e,this.state.context),await this.#t.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,i,e,this.state.context),i}finally{this.#r({type:"error",error:i})}}finally{this.#t.runNext(this)}}#r(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Ds.batch(()=>{this.#e.forEach(r=>{r.onMutationUpdate(e)}),this.#t.notify({mutation:this,type:"updated",action:e})})}};function DC(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var pF=class extends og{constructor(e={}){super(),this.config=e,this.#e=new Map,this.#t=Date.now()}#e;#t;build(e,n,r){const i=new hF({mutationCache:this,mutationId:++this.#t,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){const n=W_(e),r=this.#e.get(n)??[];r.push(e),this.#e.set(n,r),this.notify({type:"added",mutation:e})}remove(e){const n=W_(e);if(this.#e.has(n)){const r=this.#e.get(n)?.filter(i=>i!==e);r&&(r.length===0?this.#e.delete(n):this.#e.set(n,r))}this.notify({type:"removed",mutation:e})}canRun(e){const n=this.#e.get(W_(e))?.find(r=>r.state.status==="pending");return!n||n===e}runNext(e){return this.#e.get(W_(e))?.find(r=>r!==e&&r.state.isPaused)?.continue()??Promise.resolve()}clear(){Ds.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...this.#e.values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>TC(n,r))}findAll(e={}){return this.getAll().filter(n=>TC(e,n))}notify(e){Ds.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Ds.batch(()=>Promise.all(e.map(n=>n.continue().catch(_u))))}};function W_(t){return t.options.scope?.id??String(t.mutationId)}function PC(t){return{onFetch:(e,n)=>{const r=e.options,i=e.fetchOptions?.meta?.fetchMore?.direction,o=e.state.data?.pages||[],l=e.state.data?.pageParams||[];let c={pages:[],pageParams:[]},f=0;const g=async()=>{let y=!1;const h=A=>{Object.defineProperty(A,"signal",{enumerable:!0,get:()=>(e.signal.aborted?y=!0:e.signal.addEventListener("abort",()=>{y=!0}),e.signal)})},p=CC(e.options,e.fetchOptions),E=async(A,_,I)=>{if(y)return Promise.reject();if(_==null&&A.pages.length)return Promise.resolve(A);const C={queryKey:e.queryKey,pageParam:_,direction:I?"backward":"forward",meta:e.options.meta};h(C);const v=await p(C),{maxPages:T}=e.options,S=I?oF:iF;return{pages:S(A.pages,v,T),pageParams:S(A.pageParams,_,T)}};if(i&&o.length){const A=i==="backward",_=A?gF:MC,I={pages:o,pageParams:l},C=_(r,I);c=await E(I,C,A)}else{const A=t??o.length;do{const _=f===0?l[0]??r.initialPageParam:MC(r,c);if(f>0&&_==null)break;c=await E(c,_),f++}while(f<A)}return c};e.options.persister?e.fetchFn=()=>e.options.persister?.(g,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=g}}}function MC(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function gF(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var mF=class{#e;#t;#n;#r;#i;#s;#o;#a;constructor(e={}){this.#e=e.queryCache||new dF,this.#t=e.mutationCache||new pF,this.#n=e.defaultOptions||{},this.#r=new Map,this.#i=new Map,this.#s=0}mount(){this.#s++,this.#s===1&&(this.#o=Ow.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=q_.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#s--,this.#s===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const n=this.defaultQueryOptions({queryKey:e});return this.#e.get(n.queryHash)?.state.data}ensureQueryData(e){const n=this.getQueryData(e.queryKey);if(n===void 0)return this.fetchQuery(e);{const r=this.defaultQueryOptions(e),i=this.#e.build(this,r);return e.revalidateIfStale&&i.isStaleByTime(sg(r.staleTime,i))&&this.prefetchQuery(r),Promise.resolve(n)}}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:n,state:r})=>{const i=r.data;return[n,i]})}setQueryData(e,n,r){const i=this.defaultQueryOptions({queryKey:e}),l=this.#e.get(i.queryHash)?.state.data,c=nF(n,l);if(c!==void 0)return this.#e.build(this,i).setData(c,{...r,manual:!0})}setQueriesData(e,n,r){return Ds.batch(()=>this.#e.findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,n,r)]))}getQueryState(e){const n=this.defaultQueryOptions({queryKey:e});return this.#e.get(n.queryHash)?.state}removeQueries(e){const n=this.#e;Ds.batch(()=>{n.findAll(e).forEach(r=>{n.remove(r)})})}resetQueries(e,n){const r=this.#e,i={type:"active",...e};return Ds.batch(()=>(r.findAll(e).forEach(o=>{o.reset()}),this.refetchQueries(i,n)))}cancelQueries(e={},n={}){const r={revert:!0,...n},i=Ds.batch(()=>this.#e.findAll(e).map(o=>o.cancel(r)));return Promise.all(i).then(_u).catch(_u)}invalidateQueries(e={},n={}){return Ds.batch(()=>{if(this.#e.findAll(e).forEach(i=>{i.invalidate()}),e.refetchType==="none")return Promise.resolve();const r={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(r,n)})}refetchQueries(e={},n){const r={...n,cancelRefetch:n?.cancelRefetch??!0},i=Ds.batch(()=>this.#e.findAll(e).filter(o=>!o.isDisabled()).map(o=>{let l=o.fetch(void 0,r);return r.throwOnError||(l=l.catch(_u)),o.state.fetchStatus==="paused"?Promise.resolve():l}));return Promise.all(i).then(_u)}fetchQuery(e){const n=this.defaultQueryOptions(e);n.retry===void 0&&(n.retry=!1);const r=this.#e.build(this,n);return r.isStaleByTime(sg(n.staleTime,r))?r.fetch(n):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(_u).catch(_u)}fetchInfiniteQuery(e){return e.behavior=PC(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(_u).catch(_u)}ensureInfiniteQueryData(e){return e.behavior=PC(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return q_.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(e){this.#n=e}setQueryDefaults(e,n){this.#r.set(kh(e),{queryKey:e,defaultOptions:n})}getQueryDefaults(e){const n=[...this.#r.values()];let r={};return n.forEach(i=>{hy(e,i.queryKey)&&(r={...r,...i.defaultOptions})}),r}setMutationDefaults(e,n){this.#i.set(kh(e),{mutationKey:e,defaultOptions:n})}getMutationDefaults(e){const n=[...this.#i.values()];let r={};return n.forEach(i=>{hy(e,i.mutationKey)&&(r={...r,...i.defaultOptions})}),r}defaultQueryOptions(e){if(e._defaulted)return e;const n={...this.#n.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return n.queryHash||(n.queryHash=Cw(n.queryKey,n)),n.refetchOnReconnect===void 0&&(n.refetchOnReconnect=n.networkMode!=="always"),n.throwOnError===void 0&&(n.throwOnError=!!n.suspense),!n.networkMode&&n.persister&&(n.networkMode="offlineFirst"),n.enabled!==!0&&n.queryFn===Nw&&(n.enabled=!1),n}defaultMutationOptions(e){return e?._defaulted?e:{...this.#n.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},yF=class extends og{constructor(t,e){super(),this.options=e,this.#e=t,this.#a=null,this.#o=Lw(),this.options.experimental_prefetchInRender||this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#r=void 0;#i;#s;#o;#a;#g;#d;#h;#u;#c;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),kC(this.#t,this.options)?this.#f():this.updateResult(),this.#_())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Pw(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Pw(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#E(),this.#t.removeObserver(this)}setOptions(t,e){const n=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Yu(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#t.setOptions(this.options),n._defaulted&&!G_(this.options,n)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const i=this.hasListeners();i&&FC(this.#t,r,this.options,n)&&this.#f(),this.updateResult(e),i&&(this.#t!==r||Yu(this.options.enabled,this.#t)!==Yu(n.enabled,this.#t)||sg(this.options.staleTime,this.#t)!==sg(n.staleTime,this.#t))&&this.#m();const o=this.#y();i&&(this.#t!==r||Yu(this.options.enabled,this.#t)!==Yu(n.enabled,this.#t)||o!==this.#l)&&this.#v(o)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(e,t);return _F(this,n)&&(this.#r=n,this.#s=this.options,this.#i=this.#t.state),n}getCurrentResult(){return this.#r}trackResult(t,e){const n={};return Object.keys(t).forEach(r=>{Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(r),e?.(r),t[r])})}),n}trackProp(t){this.#p.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#f({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#f(t){this.#w();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(_u)),e}#m(){this.#b();const t=sg(this.options.staleTime,this.#t);if(Mh||this.#r.isStale||!Iw(t))return;const n=EC(this.#r.dataUpdatedAt,t)+1;this.#u=setTimeout(()=>{this.#r.isStale||this.updateResult()},n)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(t){this.#E(),this.#l=t,!(Mh||Yu(this.options.enabled,this.#t)===!1||!Iw(this.#l)||this.#l===0)&&(this.#c=setInterval(()=>{(this.options.refetchIntervalInBackground||Ow.isFocused())&&this.#f()},this.#l))}#_(){this.#m(),this.#v(this.#y())}#b(){this.#u&&(clearTimeout(this.#u),this.#u=void 0)}#E(){this.#c&&(clearInterval(this.#c),this.#c=void 0)}createResult(t,e){const n=this.#t,r=this.options,i=this.#r,o=this.#i,l=this.#s,f=t!==n?t.state:this.#n,{state:g}=t;let y={...g},h=!1,p;if(e._optimisticResults){const V=this.hasListeners(),B=!V&&kC(t,e),ne=V&&FC(t,n,e,r);(B||ne)&&(y={...y,...LC(g.data,t.options)}),e._optimisticResults==="isRestoring"&&(y.fetchStatus="idle")}let{error:E,errorUpdatedAt:A,status:_}=y;if(e.select&&y.data!==void 0)if(i&&y.data===o?.data&&e.select===this.#g)p=this.#d;else try{this.#g=e.select,p=e.select(y.data),p=xw(i?.data,p,e),this.#d=p,this.#a=null}catch(V){this.#a=V}else p=y.data;if(e.placeholderData!==void 0&&p===void 0&&_==="pending"){let V;if(i?.isPlaceholderData&&e.placeholderData===l?.placeholderData)V=i.data;else if(V=typeof e.placeholderData=="function"?e.placeholderData(this.#h?.state.data,this.#h):e.placeholderData,e.select&&V!==void 0)try{V=e.select(V),this.#a=null}catch(B){this.#a=B}V!==void 0&&(_="success",p=xw(i?.data,V,e),h=!0)}this.#a&&(E=this.#a,p=this.#d,A=Date.now(),_="error");const I=y.fetchStatus==="fetching",C=_==="pending",v=_==="error",T=C&&I,S=p!==void 0,$={status:_,fetchStatus:y.fetchStatus,isPending:C,isSuccess:_==="success",isError:v,isInitialLoading:T,isLoading:T,data:p,dataUpdatedAt:y.dataUpdatedAt,error:E,errorUpdatedAt:A,failureCount:y.fetchFailureCount,failureReason:y.fetchFailureReason,errorUpdateCount:y.errorUpdateCount,isFetched:y.dataUpdateCount>0||y.errorUpdateCount>0,isFetchedAfterMount:y.dataUpdateCount>f.dataUpdateCount||y.errorUpdateCount>f.errorUpdateCount,isFetching:I,isRefetching:I&&!C,isLoadingError:v&&!S,isPaused:y.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:v&&S,isStale:Mw(t,e),refetch:this.refetch,promise:this.#o};if(this.options.experimental_prefetchInRender){const V=D=>{$.status==="error"?D.reject($.error):$.data!==void 0&&D.resolve($.data)},B=()=>{const D=this.#o=$.promise=Lw();V(D)},ne=this.#o;switch(ne.status){case"pending":t.queryHash===n.queryHash&&V(ne);break;case"fulfilled":($.status==="error"||$.data!==ne.value)&&B();break;case"rejected":($.status!=="error"||$.error!==ne.reason)&&B();break}}return $}updateResult(t){const e=this.#r,n=this.createResult(this.#t,this.options);if(this.#i=this.#t.state,this.#s=this.options,this.#i.data!==void 0&&(this.#h=this.#t),G_(n,e))return;this.#r=n;const r={},i=()=>{if(!e)return!0;const{notifyOnChangeProps:o}=this.options,l=typeof o=="function"?o():o;if(l==="all"||!l&&!this.#p.size)return!0;const c=new Set(l??this.#p);return this.options.throwOnError&&c.add("error"),Object.keys(this.#r).some(f=>{const g=f;return this.#r[g]!==e[g]&&c.has(g)})};t?.listeners!==!1&&i()&&(r.listeners=!0),this.#T({...r,...t})}#w(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#_()}#T(t){Ds.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function vF(t,e){return Yu(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function kC(t,e){return vF(t,e)||t.state.data!==void 0&&Pw(t,e,e.refetchOnMount)}function Pw(t,e,n){if(Yu(e.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Mw(t,e)}return!1}function FC(t,e,n,r){return(t!==e||Yu(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Mw(t,n)}function Mw(t,e){return Yu(e.enabled,t)!==!1&&t.isStaleByTime(sg(e.staleTime,t))}function _F(t,e){return!G_(t.getCurrentResult(),e)}var bF=class extends og{#e;#t=void 0;#n;#r;constructor(e,n){super(),this.#e=e,this.setOptions(n),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const n=this.options;this.options=this.#e.defaultMutationOptions(e),G_(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),n?.mutationKey&&this.options.mutationKey&&kh(n.mutationKey)!==kh(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#i(),this.#s(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#i(),this.#s()}mutate(e,n){return this.#r=n,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#i(){const e=this.#n?.state??DC();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#s(e){Ds.batch(()=>{if(this.#r&&this.hasListeners()){const n=this.#t.variables,r=this.#t.context;e?.type==="success"?(this.#r.onSuccess?.(e.data,n,r),this.#r.onSettled?.(e.data,null,n,r)):e?.type==="error"&&(this.#r.onError?.(e.error,n,r),this.#r.onSettled?.(void 0,e.error,n,r))}this.listeners.forEach(n=>{n(this.#t)})})}},xe=gw();const Vs=Lf(xe),$C=P3({__proto__:null,default:Vs},[xe]);var UC=xe.createContext(void 0),Qu=t=>{const e=xe.useContext(UC);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},EF=({client:t,children:e})=>(xe.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),pe.jsx(UC.Provider,{value:t,children:e})),BC=xe.createContext(!1),wF=()=>xe.useContext(BC),TF=BC.Provider;function SF(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var AF=xe.createContext(SF()),IF=()=>xe.useContext(AF);function ZC(t,e){return typeof t=="function"?t(...e):!!t}function jC(){}var CF=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},RF=t=>{xe.useEffect(()=>{t.clearReset()},[t])},xF=({result:t,errorResetBoundary:e,throwOnError:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&ZC(n,[t.error,r]),NF=t=>{t.suspense&&(t.staleTime===void 0&&(t.staleTime=1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},OF=(t,e)=>t.isLoading&&t.isFetching&&!e,LF=(t,e)=>t?.suspense&&e.isPending,VC=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function DF(t,e,n){const r=Qu(),i=wF(),o=IF(),l=r.defaultQueryOptions(t);r.getDefaultOptions().queries?._experimental_beforeQuery?.(l),l._optimisticResults=i?"isRestoring":"optimistic",NF(l),CF(l,o),RF(o);const c=!r.getQueryCache().get(l.queryHash),[f]=xe.useState(()=>new e(r,l)),g=f.getOptimisticResult(l);if(xe.useSyncExternalStore(xe.useCallback(y=>{const h=i?()=>{}:f.subscribe(Ds.batchCalls(y));return f.updateResult(),h},[f,i]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),xe.useEffect(()=>{f.setOptions(l,{listeners:!1})},[l,f]),LF(l,g))throw VC(l,f,o);if(xF({result:g,errorResetBoundary:o,throwOnError:l.throwOnError,query:r.getQueryCache().get(l.queryHash)}))throw g.error;return r.getDefaultOptions().queries?._experimental_afterQuery?.(l,g),l.experimental_prefetchInRender&&!Mh&&OF(g,i)&&(c?VC(l,f,o):r.getQueryCache().get(l.queryHash)?.promise)?.catch(jC).finally(()=>{f.updateResult()}),l.notifyOnChangeProps?g:f.trackResult(g)}function py(t,e){return DF(t,yF)}function PF(t,e){const n=Qu(),[r]=xe.useState(()=>new bF(n,t));xe.useEffect(()=>{r.setOptions(t)},[r,t]);const i=xe.useSyncExternalStore(xe.useCallback(l=>r.subscribe(Ds.batchCalls(l)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),o=xe.useCallback((l,c)=>{r.mutate(l,c).catch(jC)},[r]);if(i.error&&ZC(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:o,mutateAsync:i.mutate}}function zC(t){return t}function MF(t){return{mutationKey:t.options.mutationKey,state:t.state,...t.options.scope&&{scope:t.options.scope},...t.meta&&{meta:t.meta}}}function kF(t,e){return{state:{...t.state,...t.state.data!==void 0&&{data:e(t.state.data)}},queryKey:t.queryKey,queryHash:t.queryHash,...t.state.status==="pending"&&{promise:t.promise?.then(e).catch(n=>Promise.reject(new Error("redacted")))},...t.meta&&{meta:t.meta}}}function FF(t){return t.state.isPaused}function $F(t){return t.state.status==="success"}function UF(t,e={}){const n=e.shouldDehydrateMutation??t.getDefaultOptions().dehydrate?.shouldDehydrateMutation??FF,r=t.getMutationCache().getAll().flatMap(c=>n(c)?[MF(c)]:[]),i=e.shouldDehydrateQuery??t.getDefaultOptions().dehydrate?.shouldDehydrateQuery??$F,o=e.serializeData??t.getDefaultOptions().dehydrate?.serializeData??zC,l=t.getQueryCache().getAll().flatMap(c=>i(c)?[kF(c,o)]:[]);return{mutations:r,queries:l}}function BF(t,e,n){if(typeof e!="object"||e===null)return;const r=t.getMutationCache(),i=t.getQueryCache(),o=n?.defaultOptions?.deserializeData??t.getDefaultOptions().hydrate?.deserializeData??zC,l=e.mutations||[],c=e.queries||[];l.forEach(({state:f,...g})=>{r.build(t,{...t.getDefaultOptions().hydrate?.mutations,...n?.defaultOptions?.mutations,...g},f)}),c.forEach(({queryKey:f,state:g,queryHash:y,meta:h,promise:p})=>{let E=i.get(y);const A=g.data===void 0?g.data:o(g.data);if(E){if(E.state.dataUpdatedAt<g.dataUpdatedAt){const{fetchStatus:_,...I}=g;E.setState({...I,data:A})}}else E=i.build(t,{...t.getDefaultOptions().hydrate?.queries,...n?.defaultOptions?.queries,queryKey:f,queryHash:y,meta:h},{...g,data:A,fetchStatus:"idle"});if(p){const _=Promise.resolve(p).then(o);E.fetch(void 0,{initialPromise:_})}})}var ZF=["added","removed","updated"];function HC(t){return ZF.includes(t)}async function jF({queryClient:t,persister:e,maxAge:n=864e5,buster:r="",hydrateOptions:i}){try{const o=await e.restoreClient();if(o)if(o.timestamp){const l=Date.now()-o.timestamp>n,c=o.buster!==r;l||c?e.removeClient():BF(t,o.clientState,i)}else e.removeClient()}catch{e.removeClient()}}async function GC({queryClient:t,persister:e,buster:n="",dehydrateOptions:r}){const i={buster:n,timestamp:Date.now(),clientState:UF(t,r)};await e.persistClient(i)}function VF(t){const e=t.queryClient.getQueryCache().subscribe(r=>{HC(r.type)&&GC(t)}),n=t.queryClient.getMutationCache().subscribe(r=>{HC(r.type)&&GC(t)});return()=>{e(),n()}}var zF=({client:t,children:e,persistOptions:n,onSuccess:r,...i})=>{const[o,l]=xe.useState(!0),c=xe.useRef({persistOptions:n,onSuccess:r}),f=xe.useRef(!1);return xe.useEffect(()=>{c.current={persistOptions:n,onSuccess:r}}),xe.useEffect(()=>{const g={...c.current.persistOptions,queryClient:t};return f.current||(f.current=!0,jF(g).then(async()=>{try{await c.current.onSuccess?.()}finally{l(!1)}})),o?void 0:VF(g)},[t,o]),pe.jsx(EF,{client:t,...i,children:pe.jsx(TF,{value:o,children:e})})};function kw(){}function HF(t,{interval:e=1e3,onError:n=kw}={}){if(typeof t!="function")throw new Error("argument is not function.");let r=0,i=null,o=!1,l=!1;return async(...c)=>{if(i=c,!l){for(l=!0;o;)await new Promise(f=>setTimeout(f,e));for(;Date.now()<r;)await new Promise(f=>setTimeout(f,r-Date.now()));l=!1,o=!0;try{await t(...i)}catch(f){try{n(f)}catch{}}r=Date.now()+e,o=!1}}}var GF=({storage:t,key:e="REACT_QUERY_OFFLINE_CACHE",throttleTime:n=1e3,serialize:r=JSON.stringify,deserialize:i=JSON.parse,retry:o})=>{if(t){const l=async c=>{try{const f=await r(c);await t.setItem(e,f);return}catch(f){return f}};return{persistClient:HF(async c=>{let f=c,g=await l(f),y=0;for(;g&&f;)y++,f=await o?.({persistedClient:f,error:g,errorCount:y}),f&&(g=await l(f))},{interval:n}),restoreClient:async()=>{const c=await t.getItem(e);if(c)return await i(c)},removeClient:()=>t.removeItem(e)}}return{persistClient:kw,restoreClient:()=>Promise.resolve(void 0),removeClient:kw}};const qF={getItem:async t=>Ki.getItem(`local:${t}`),setItem:async(t,e)=>{await Ki.setItem(`local:${t}`,e)},removeItem:async t=>{await Ki.removeItem(`local:${t}`)}},WF={getItem:async t=>window.localStorage.getItem(t),setItem:async(t,e)=>{window.localStorage.setItem(t,e)},removeItem:async t=>{window.localStorage.removeItem(t)}},KF=({namespace:t}={})=>{const e=t?`REACT_QUERY_OFFLINE_CACHE_${t}`:"REACT_QUERY_OFFLINE_CACHE";return GF({storage:ts()?qF:WF,key:e})};class YF extends Vs.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,n){Re.error(e,n)}render(){return this.state.hasError?null:this.props.children}}const ii=t=>typeof t=="string",gy=()=>{let t,e;const n=new Promise((r,i)=>{t=r,e=i});return n.resolve=t,n.reject=e,n},qC=t=>t==null?"":""+t,QF=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},XF=/###/g,WC=t=>t&&t.indexOf("###")>-1?t.replace(XF,"."):t,KC=t=>!t||ii(t),my=(t,e,n)=>{const r=ii(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(KC(t))return{};const o=WC(r[i]);!t[o]&&n&&(t[o]=new n),Object.prototype.hasOwnProperty.call(t,o)?t=t[o]:t={},++i}return KC(t)?{}:{obj:t,k:WC(r[i])}},YC=(t,e,n)=>{const{obj:r,k:i}=my(t,e,Object);if(r!==void 0||e.length===1){r[i]=n;return}let o=e[e.length-1],l=e.slice(0,e.length-1),c=my(t,l,Object);for(;c.obj===void 0&&l.length;)o=`${l[l.length-1]}.${o}`,l=l.slice(0,l.length-1),c=my(t,l,Object),c&&c.obj&&typeof c.obj[`${c.k}.${o}`]<"u"&&(c.obj=void 0);c.obj[`${c.k}.${o}`]=n},JF=(t,e,n,r)=>{const{obj:i,k:o}=my(t,e,Object);i[o]=i[o]||[],i[o].push(n)},K_=(t,e)=>{const{obj:n,k:r}=my(t,e);if(n)return n[r]},e6=(t,e,n)=>{const r=K_(t,n);return r!==void 0?r:K_(e,n)},QC=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?ii(t[r])||t[r]instanceof String||ii(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):QC(t[r],e[r],n):t[r]=e[r]);return t},ag=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var t6={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const n6=t=>ii(t)?t.replace(/[&<>"'\/]/g,e=>t6[e]):t;class r6{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const i6=[" ",",","?","!",";"],o6=new r6(20),s6=(t,e,n)=>{e=e||"",n=n||"";const r=i6.filter(l=>e.indexOf(l)<0&&n.indexOf(l)<0);if(r.length===0)return!0;const i=o6.getRegExp(`(${r.map(l=>l==="?"?"\\?":l).join("|")})`);let o=!i.test(t);if(!o){const l=t.indexOf(n);l>0&&!i.test(t.substring(0,l))&&(o=!0)}return o},Fw=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return t[e];const r=e.split(n);let i=t;for(let o=0;o<r.length;){if(!i||typeof i!="object")return;let l,c="";for(let f=o;f<r.length;++f)if(f!==o&&(c+=n),c+=r[f],l=i[c],l!==void 0){if(["string","number","boolean"].indexOf(typeof l)>-1&&f<r.length-1)continue;o+=f-o+1;break}i=l}return i},Y_=t=>t&&t.replace("_","-"),a6={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};class Q_{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=e||a6,this.options=n,this.debug=n.debug}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,i){return i&&!this.debug?null:(ii(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new Q_(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Q_(this.logger,e)}}var Uc=new Q_;class X_{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(n)||0;this.observers[r].set(n,i+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(l=>{let[c,f]=l;for(let g=0;g<f;g++)c(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(l=>{let[c,f]=l;for(let g=0;g<f;g++)c.apply(c,[e,...r])})}}class XC extends X_{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,l=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let c;e.indexOf(".")>-1?c=e.split("."):(c=[e,n],r&&(Array.isArray(r)?c.push(...r):ii(r)&&o?c.push(...r.split(o)):c.push(r)));const f=K_(this.data,c);return!f&&!n&&!r&&e.indexOf(".")>-1&&(e=c[0],n=c[1],r=c.slice(2).join(".")),f||!l||!ii(r)?f:Fw(this.data&&this.data[e]&&this.data[e][n],r,o)}addResource(e,n,r,i){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const l=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let c=[e,n];r&&(c=c.concat(l?r.split(l):r)),e.indexOf(".")>-1&&(c=e.split("."),i=n,n=c[1]),this.addNamespaces(n),YC(this.data,c,i),o.silent||this.emit("added",e,n,r,i)}addResources(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const o in r)(ii(r[o])||Array.isArray(r[o]))&&this.addResource(e,n,o,r[o],{silent:!0});i.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,i,o){let l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},c=[e,n];e.indexOf(".")>-1&&(c=e.split("."),i=r,r=n,n=c[1]),this.addNamespaces(n);let f=K_(this.data,c)||{};l.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?QC(f,r,o):f={...f,...r},YC(this.data,c,f),l.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,n)}:this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var JC={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,i){return t.forEach(o=>{this.processors[o]&&(e=this.processors[o].process(e,n,r,i))}),e}};const eR={};class J_ extends X_{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),QF(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Uc.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,n);return r&&r.res!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let o=n.ns||this.options.defaultNS||[];const l=r&&e.indexOf(r)>-1,c=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!s6(e,r,i);if(l&&!c){const f=e.match(this.interpolator.nestingRegexp);if(f&&f.length>0)return{key:e,namespaces:o};const g=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(g[0])>-1)&&(o=g.shift()),e=g.join(i)}return ii(o)&&(o=[o]),{key:e,namespaces:o}}translate(e,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const i=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,o=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:l,namespaces:c}=this.extractFromKey(e[e.length-1],n),f=c[c.length-1],g=n.lng||this.language,y=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(g&&g.toLowerCase()==="cimode"){if(y){const S=n.nsSeparator||this.options.nsSeparator;return i?{res:`${f}${S}${l}`,usedKey:l,exactUsedKey:l,usedLng:g,usedNS:f,usedParams:this.getUsedParamsDetails(n)}:`${f}${S}${l}`}return i?{res:l,usedKey:l,exactUsedKey:l,usedLng:g,usedNS:f,usedParams:this.getUsedParamsDetails(n)}:l}const h=this.resolve(e,n);let p=h&&h.res;const E=h&&h.usedKey||l,A=h&&h.exactUsedKey||l,_=Object.prototype.toString.apply(p),I=["[object Number]","[object Function]","[object RegExp]"],C=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,v=!this.i18nFormat||this.i18nFormat.handleAsObject,T=!ii(p)&&typeof p!="boolean"&&typeof p!="number";if(v&&p&&T&&I.indexOf(_)<0&&!(ii(C)&&Array.isArray(p))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const S=this.options.returnedObjectHandler?this.options.returnedObjectHandler(E,p,{...n,ns:c}):`key '${l} (${this.language})' returned an object instead of string.`;return i?(h.res=S,h.usedParams=this.getUsedParamsDetails(n),h):S}if(o){const S=Array.isArray(p),O=S?[]:{},$=S?A:E;for(const V in p)if(Object.prototype.hasOwnProperty.call(p,V)){const B=`${$}${o}${V}`;O[V]=this.translate(B,{...n,joinArrays:!1,ns:c}),O[V]===B&&(O[V]=p[V])}p=O}}else if(v&&ii(C)&&Array.isArray(p))p=p.join(C),p&&(p=this.extendTranslation(p,e,n,r));else{let S=!1,O=!1;const $=n.count!==void 0&&!ii(n.count),V=J_.hasDefaultValue(n),B=$?this.pluralResolver.getSuffix(g,n.count,n):"",ne=n.ordinal&&$?this.pluralResolver.getSuffix(g,n.count,{ordinal:!1}):"",D=$&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),X=D&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${B}`]||n[`defaultValue${ne}`]||n.defaultValue;!this.isValidLookup(p)&&V&&(S=!0,p=X),this.isValidLookup(p)||(O=!0,p=l);const ie=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&O?void 0:p,ye=V&&X!==p&&this.options.updateMissing;if(O||S||ye){if(this.logger.log(ye?"updateKey":"missingKey",g,f,l,ye?X:p),o){const Ce=this.resolve(l,{...n,keySeparator:!1});Ce&&Ce.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Ne=[];const Me=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Me&&Me[0])for(let Ce=0;Ce<Me.length;Ce++)Ne.push(Me[Ce]);else this.options.saveMissingTo==="all"?Ne=this.languageUtils.toResolveHierarchy(n.lng||this.language):Ne.push(n.lng||this.language);const oe=(Ce,Ye,et)=>{const Y=V&&et!==p?et:ie;this.options.missingKeyHandler?this.options.missingKeyHandler(Ce,f,Ye,Y,ye,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(Ce,f,Ye,Y,ye,n),this.emit("missingKey",Ce,f,Ye,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&$?Ne.forEach(Ce=>{const Ye=this.pluralResolver.getSuffixes(Ce,n);D&&n[`defaultValue${this.options.pluralSeparator}zero`]&&Ye.indexOf(`${this.options.pluralSeparator}zero`)<0&&Ye.push(`${this.options.pluralSeparator}zero`),Ye.forEach(et=>{oe([Ce],l+et,n[`defaultValue${et}`]||X)})}):oe(Ne,l,X))}p=this.extendTranslation(p,e,n,h,r),O&&p===l&&this.options.appendNamespaceToMissingKey&&(p=`${f}:${l}`),(O||S)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${f}:${l}`:l,S?p:void 0):p=this.options.parseMissingKeyHandler(p))}return i?(h.res=p,h.usedParams=this.getUsedParamsDetails(n),h):p}extendTranslation(e,n,r,i,o){var l=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const g=ii(e)&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let y;if(g){const p=e.match(this.interpolator.nestingRegexp);y=p&&p.length}let h=r.replace&&!ii(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(h={...this.options.interpolation.defaultVariables,...h}),e=this.interpolator.interpolate(e,h,r.lng||this.language||i.usedLng,r),g){const p=e.match(this.interpolator.nestingRegexp),E=p&&p.length;y<E&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var p=arguments.length,E=new Array(p),A=0;A<p;A++)E[A]=arguments[A];return o&&o[0]===E[0]&&!r.context?(l.logger.warn(`It seems you are nesting recursively key: ${E[0]} in key: ${n[0]}`),null):l.translate(...E,n)},r)),r.interpolation&&this.interpolator.reset()}const c=r.postProcess||this.options.postProcess,f=ii(c)?[c]:c;return e!=null&&f&&f.length&&r.applyPostProcessor!==!1&&(e=JC.handle(f,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,i,o,l,c;return ii(e)&&(e=[e]),e.forEach(f=>{if(this.isValidLookup(r))return;const g=this.extractFromKey(f,n),y=g.key;i=y;let h=g.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const p=n.count!==void 0&&!ii(n.count),E=p&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),A=n.context!==void 0&&(ii(n.context)||typeof n.context=="number")&&n.context!=="",_=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);h.forEach(I=>{this.isValidLookup(r)||(c=I,!eR[`${_[0]}-${I}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(c)&&(eR[`${_[0]}-${I}`]=!0,this.logger.warn(`key "${i}" for languages "${_.join(", ")}" won't get resolved as namespace "${c}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),_.forEach(C=>{if(this.isValidLookup(r))return;l=C;const v=[y];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(v,y,C,I,n);else{let S;p&&(S=this.pluralResolver.getSuffix(C,n.count,n));const O=`${this.options.pluralSeparator}zero`,$=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(p&&(v.push(y+S),n.ordinal&&S.indexOf($)===0&&v.push(y+S.replace($,this.options.pluralSeparator)),E&&v.push(y+O)),A){const V=`${y}${this.options.contextSeparator}${n.context}`;v.push(V),p&&(v.push(V+S),n.ordinal&&S.indexOf($)===0&&v.push(V+S.replace($,this.options.pluralSeparator)),E&&v.push(V+O))}}let T;for(;T=v.pop();)this.isValidLookup(r)||(o=T,r=this.getResource(C,I,T,n))}))})}),{res:r,usedKey:i,exactUsedKey:o,usedLng:l,usedNS:c}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,n,r,i):this.resourceStore.getResource(e,n,r,i)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!ii(e.replace);let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const o of n)delete i[o]}return i}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}const $w=t=>t.charAt(0).toUpperCase()+t.slice(1);class tR{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Uc.create("languageUtils")}getScriptPartFromCode(e){if(e=Y_(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=Y_(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(ii(e)&&e.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let i=Intl.getCanonicalLocales(e)[0];if(i&&this.options.lowerCaseLng&&(i=i.toLowerCase()),i)return i}catch{}const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=e.split("-");return this.options.lowerCaseLng?r=r.map(i=>i.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=$w(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=$w(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=$w(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return n=i;n=this.options.supportedLngs.find(o=>{if(o===i)return o;if(!(o.indexOf("-")<0&&i.indexOf("-")<0)&&(o.indexOf("-")>0&&i.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===i||o.indexOf(i)===0&&i.length>1))return o})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),ii(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],e),i=[],o=l=>{l&&(this.isSupportedCode(l)?i.push(l):this.logger.warn(`rejecting language code not found in supportedLngs: ${l}`))};return ii(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(e))):ii(e)&&o(this.formatLanguageCode(e)),r.forEach(l=>{i.indexOf(l)<0&&o(this.formatLanguageCode(l))}),i}}let l6=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],u6={1:t=>+(t>1),2:t=>+(t!=1),3:t=>0,4:t=>t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,5:t=>t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5,6:t=>t==1?0:t>=2&&t<=4?1:2,7:t=>t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,8:t=>t==1?0:t==2?1:t!=8&&t!=11?2:3,9:t=>+(t>=2),10:t=>t==1?0:t==2?1:t<7?2:t<11?3:4,11:t=>t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3,12:t=>+(t%10!=1||t%100==11),13:t=>+(t!==0),14:t=>t==1?0:t==2?1:t==3?2:3,15:t=>t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2,16:t=>t%10==1&&t%100!=11?0:t!==0?1:2,17:t=>t==1||t%10==1&&t%100!=11?0:1,18:t=>t==0?0:t==1?1:2,19:t=>t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3,20:t=>t==1?0:t==0||t%100>0&&t%100<20?1:2,21:t=>t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0,22:t=>t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3};const c6=["v1","v2","v3"],f6=["v4"],nR={zero:0,one:1,two:2,few:3,many:4,other:5},d6=()=>{const t={};return l6.forEach(e=>{e.lngs.forEach(n=>{t[n]={numbers:e.nr,plurals:u6[e.fc]}})}),t};class h6{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=n,this.logger=Uc.create("pluralResolver"),(!this.options.compatibilityJSON||f6.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=d6(),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{const r=Y_(e==="dev"?"en":e),i=n.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:r,type:i});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];const l=new Intl.PluralRules(r,{type:i});return this.pluralRulesCache[o]=l,l}catch{return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(i=>`${n}${i}`)}getSuffixes(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((i,o)=>nR[i]-nR[o]).map(i=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i}`):r.numbers.map(i=>this.getSuffix(e,i,n)):[]}getSuffix(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(e,r);return i?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(n)}`:this.getSuffixRetroCompatible(i,n):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,n){const r=e.noAbs?e.plurals(n):e.plurals(Math.abs(n));let i=e.numbers[r];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(i===2?i="plural":i===1&&(i=""));const o=()=>this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString();return this.options.compatibilityJSON==="v1"?i===1?"":typeof i=="number"?`_plural_${i.toString()}`:o():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?o():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!c6.includes(this.options.compatibilityJSON)}}const rR=function(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=e6(t,e,n);return!o&&i&&ii(n)&&(o=Fw(t,n,r),o===void 0&&(o=Fw(e,n,r))),o},Uw=t=>t.replace(/\$/g,"$$$$");class p6{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Uc.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(n=>n),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:i,prefix:o,prefixEscaped:l,suffix:c,suffixEscaped:f,formatSeparator:g,unescapeSuffix:y,unescapePrefix:h,nestingPrefix:p,nestingPrefixEscaped:E,nestingSuffix:A,nestingSuffixEscaped:_,nestingOptionsSeparator:I,maxReplaces:C,alwaysFormat:v}=e.interpolation;this.escape=n!==void 0?n:n6,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=o?ag(o):l||"{{",this.suffix=c?ag(c):f||"}}",this.formatSeparator=g||",",this.unescapePrefix=y?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":y||"",this.nestingPrefix=p?ag(p):E||ag("$t("),this.nestingSuffix=A?ag(A):_||ag(")"),this.nestingOptionsSeparator=I||",",this.maxReplaces=C||1e3,this.alwaysFormat=v!==void 0?v:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>n&&n.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,r,i){let o,l,c;const f=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},g=E=>{if(E.indexOf(this.formatSeparator)<0){const C=rR(n,f,E,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(C,void 0,r,{...i,...n,interpolationkey:E}):C}const A=E.split(this.formatSeparator),_=A.shift().trim(),I=A.join(this.formatSeparator).trim();return this.format(rR(n,f,_,this.options.keySeparator,this.options.ignoreJSONStructure),I,r,{...i,...n,interpolationkey:_})};this.resetRegExp();const y=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,h=i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:E=>Uw(E)},{regex:this.regexp,safeValue:E=>this.escapeValue?Uw(this.escape(E)):Uw(E)}].forEach(E=>{for(c=0;o=E.regex.exec(e);){const A=o[1].trim();if(l=g(A),l===void 0)if(typeof y=="function"){const I=y(e,o,i);l=ii(I)?I:""}else if(i&&Object.prototype.hasOwnProperty.call(i,A))l="";else if(h){l=o[0];continue}else this.logger.warn(`missed to pass in variable ${A} for interpolating ${e}`),l="";else!ii(l)&&!this.useRawValueToEscape&&(l=qC(l));const _=E.safeValue(l);if(e=e.replace(o[0],_),h?(E.regex.lastIndex+=l.length,E.regex.lastIndex-=o[0].length):E.regex.lastIndex=0,c++,c>=this.maxReplaces)break}}),e}nest(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,o,l;const c=(f,g)=>{const y=this.nestingOptionsSeparator;if(f.indexOf(y)<0)return f;const h=f.split(new RegExp(`${y}[ ]*{`));let p=`{${h[1]}`;f=h[0],p=this.interpolate(p,l);const E=p.match(/'/g),A=p.match(/"/g);(E&&E.length%2===0&&!A||A.length%2!==0)&&(p=p.replace(/'/g,'"'));try{l=JSON.parse(p),g&&(l={...g,...l})}catch(_){return this.logger.warn(`failed parsing options string in nesting for key ${f}`,_),`${f}${y}${p}`}return l.defaultValue&&l.defaultValue.indexOf(this.prefix)>-1&&delete l.defaultValue,f};for(;i=this.nestingRegexp.exec(e);){let f=[];l={...r},l=l.replace&&!ii(l.replace)?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;let g=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const y=i[1].split(this.formatSeparator).map(h=>h.trim());i[1]=y.shift(),f=y,g=!0}if(o=n(c.call(this,i[1].trim(),l),l),o&&i[0]===e&&!ii(o))return o;ii(o)||(o=qC(o)),o||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),o=""),g&&(o=f.reduce((y,h)=>this.format(y,h,r.lng,{...r,interpolationkey:i[1].trim()}),o.trim())),e=e.replace(i[0],o),this.regexp.lastIndex=0}return e}}const g6=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(l=>{if(l){const[c,...f]=l.split(":"),g=f.join(":").trim().replace(/^'+|'+$/g,""),y=c.trim();n[y]||(n[y]=g),g==="false"&&(n[y]=!1),g==="true"&&(n[y]=!0),isNaN(g)||(n[y]=parseInt(g,10))}})}return{formatName:e,formatOptions:n}},lg=t=>{const e={};return(n,r,i)=>{let o=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(o={...o,[i.interpolationkey]:void 0});const l=r+JSON.stringify(o);let c=e[l];return c||(c=t(Y_(r),i),e[l]=c),c(n)}};class m6{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Uc.create("formatter"),this.options=e,this.formats={number:lg((n,r)=>{const i=new Intl.NumberFormat(n,{...r});return o=>i.format(o)}),currency:lg((n,r)=>{const i=new Intl.NumberFormat(n,{...r,style:"currency"});return o=>i.format(o)}),datetime:lg((n,r)=>{const i=new Intl.DateTimeFormat(n,{...r});return o=>i.format(o)}),relativetime:lg((n,r)=>{const i=new Intl.RelativeTimeFormat(n,{...r});return o=>i.format(o,r.range||"day")}),list:lg((n,r)=>{const i=new Intl.ListFormat(n,{...r});return o=>i.format(o)})},this.init(e)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=n.interpolation.formatSeparator||","}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=lg(n)}format(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const o=n.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(c=>c.indexOf(")")>-1)){const c=o.findIndex(f=>f.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,c)].join(this.formatSeparator)}return o.reduce((c,f)=>{const{formatName:g,formatOptions:y}=g6(f);if(this.formats[g]){let h=c;try{const p=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},E=p.locale||p.lng||i.locale||i.lng||r;h=this.formats[g](c,E,{...y,...i,...p})}catch(p){this.logger.warn(p)}return h}else this.logger.warn(`there was no format function for ${g}`);return c},e)}}const y6=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class v6 extends X_{constructor(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=Uc.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,i.backend,i)}queueLoad(e,n,r,i){const o={},l={},c={},f={};return e.forEach(g=>{let y=!0;n.forEach(h=>{const p=`${g}|${h}`;!r.reload&&this.store.hasResourceBundle(g,h)?this.state[p]=2:this.state[p]<0||(this.state[p]===1?l[p]===void 0&&(l[p]=!0):(this.state[p]=1,y=!1,l[p]===void 0&&(l[p]=!0),o[p]===void 0&&(o[p]=!0),f[h]===void 0&&(f[h]=!0)))}),y||(c[g]=!0)}),(Object.keys(o).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(o),pending:Object.keys(l),toLoadLanguages:Object.keys(c),toLoadNamespaces:Object.keys(f)}}loaded(e,n,r){const i=e.split("|"),o=i[0],l=i[1];n&&this.emit("failedLoading",o,l,n),!n&&r&&this.store.addResourceBundle(o,l,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const c={};this.queue.forEach(f=>{JF(f.loaded,[o],l),y6(f,e),n&&f.errors.push(n),f.pendingCount===0&&!f.done&&(Object.keys(f.loaded).forEach(g=>{c[g]||(c[g]={});const y=f.loaded[g];y.length&&y.forEach(h=>{c[g][h]===void 0&&(c[g][h]=!0)})}),f.done=!0,f.errors.length?f.callback(f.errors):f.callback())}),this.emit("loaded",c),this.queue=this.queue.filter(f=>!f.done)}read(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,l=arguments.length>5?arguments[5]:void 0;if(!e.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:i,wait:o,callback:l});return}this.readingCalls++;const c=(g,y)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(g&&y&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,i+1,o*2,l)},o);return}l(g,y)},f=this.backend[r].bind(this.backend);if(f.length===2){try{const g=f(e,n);g&&typeof g.then=="function"?g.then(y=>c(null,y)).catch(c):c(null,g)}catch(g){c(g)}return}return f(e,n,c)}prepareLoading(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();ii(e)&&(e=this.languageUtils.toResolveHierarchy(e)),ii(n)&&(n=[n]);const o=this.queueLoad(e,n,r,i);if(!o.toLoad.length)return o.pending.length||i(),null;o.toLoad.forEach(l=>{this.loadOne(l)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),i=r[0],o=r[1];this.read(i,o,"read",void 0,void 0,(l,c)=>{l&&this.logger.warn(`${n}loading namespace ${o} for language ${i} failed`,l),!l&&c&&this.logger.log(`${n}loaded namespace ${o} for language ${i}`,c),this.loaded(e,l,c)})}saveMissing(e,n,r,i,o){let l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const f={...l,isUpdate:o},g=this.backend.create.bind(this.backend);if(g.length<6)try{let y;g.length===5?y=g(e,n,r,i,f):y=g(e,n,r,i),y&&typeof y.then=="function"?y.then(h=>c(null,h)).catch(c):c(null,y)}catch(y){c(y)}else g(e,n,r,i,c,f)}!e||!e[0]||this.store.addResource(e[0],n,r,i)}}}const iR=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),ii(t[1])&&(e.defaultValue=t[1]),ii(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),oR=t=>(ii(t.ns)&&(t.ns=[t.ns]),ii(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),ii(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t),e0=()=>{},_6=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class yy extends X_{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=oR(e),this.services={},this.logger=Uc,this.modules={external:[]},_6(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(ii(n.ns)?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const i=iR();this.options={...i,...this.options,...oR(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...i.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const o=y=>y?typeof y=="function"?new y:y:null;if(!this.options.isClone){this.modules.logger?Uc.init(o(this.modules.logger),this.options):Uc.init(null,this.options);let y;this.modules.formatter?y=this.modules.formatter:typeof Intl<"u"&&(y=m6);const h=new tR(this.options);this.store=new XC(this.options.resources,this.options);const p=this.services;p.logger=Uc,p.resourceStore=this.store,p.languageUtils=h,p.pluralResolver=new h6(h,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),y&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(p.formatter=o(y),p.formatter.init(p,this.options),this.options.interpolation.format=p.formatter.format.bind(p.formatter)),p.interpolator=new p6(this.options),p.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},p.backendConnector=new v6(o(this.modules.backend),p.resourceStore,p,this.options),p.backendConnector.on("*",function(E){for(var A=arguments.length,_=new Array(A>1?A-1:0),I=1;I<A;I++)_[I-1]=arguments[I];e.emit(E,..._)}),this.modules.languageDetector&&(p.languageDetector=o(this.modules.languageDetector),p.languageDetector.init&&p.languageDetector.init(p,this.options.detection,this.options)),this.modules.i18nFormat&&(p.i18nFormat=o(this.modules.i18nFormat),p.i18nFormat.init&&p.i18nFormat.init(this)),this.translator=new J_(this.services,this.options),this.translator.on("*",function(E){for(var A=arguments.length,_=new Array(A>1?A-1:0),I=1;I<A;I++)_[I-1]=arguments[I];e.emit(E,..._)}),this.modules.external.forEach(E=>{E.init&&E.init(this)})}if(this.format=this.options.interpolation.format,r||(r=e0),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const y=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);y.length>0&&y[0]!=="dev"&&(this.options.lng=y[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(y=>{this[y]=function(){return e.store[y](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(y=>{this[y]=function(){return e.store[y](...arguments),e}});const f=gy(),g=()=>{const y=(h,p)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),f.resolve(p),r(h,p)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return y(null,this.t.bind(this));this.changeLanguage(this.options.lng,y)};return this.options.resources||!this.options.initImmediate?g():setTimeout(g,0),f}loadResources(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e0;const i=ii(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(i&&i.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const o=[],l=c=>{if(!c||c==="cimode")return;this.services.languageUtils.toResolveHierarchy(c).forEach(g=>{g!=="cimode"&&o.indexOf(g)<0&&o.push(g)})};i?l(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(f=>l(f)),this.options.preload&&this.options.preload.forEach(c=>l(c)),this.services.backendConnector.load(o,this.options.ns,c=>{!c&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(c)})}else r(null)}reloadResources(e,n,r){const i=gy();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=e0),this.services.backendConnector.reload(e,n,o=>{i.resolve(),r(o)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&JC.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,n){var r=this;this.isLanguageChangingTo=e;const i=gy();this.emit("languageChanging",e);const o=f=>{this.language=f,this.languages=this.services.languageUtils.toResolveHierarchy(f),this.resolvedLanguage=void 0,this.setResolvedLanguage(f)},l=(f,g)=>{g?(o(g),this.translator.changeLanguage(g),this.isLanguageChangingTo=void 0,this.emit("languageChanged",g),this.logger.log("languageChanged",g)):this.isLanguageChangingTo=void 0,i.resolve(function(){return r.t(...arguments)}),n&&n(f,function(){return r.t(...arguments)})},c=f=>{!e&&!f&&this.services.languageDetector&&(f=[]);const g=ii(f)?f:this.services.languageUtils.getBestMatchFromCodes(f);g&&(this.language||o(g),this.translator.language||this.translator.changeLanguage(g),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(g)),this.loadResources(g,y=>{l(y,g)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?c(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(e),i}getFixedT(e,n,r){var i=this;const o=function(l,c){let f;if(typeof c!="object"){for(var g=arguments.length,y=new Array(g>2?g-2:0),h=2;h<g;h++)y[h-2]=arguments[h];f=i.options.overloadTranslationOptionHandler([l,c].concat(y))}else f={...c};f.lng=f.lng||o.lng,f.lngs=f.lngs||o.lngs,f.ns=f.ns||o.ns,f.keyPrefix!==""&&(f.keyPrefix=f.keyPrefix||r||o.keyPrefix);const p=i.options.keySeparator||".";let E;return f.keyPrefix&&Array.isArray(l)?E=l.map(A=>`${f.keyPrefix}${p}${A}`):E=f.keyPrefix?`${f.keyPrefix}${p}${l}`:l,i.t(E,f)};return ii(e)?o.lng=e:o.lngs=e,o.ns=n,o.keyPrefix=r,o}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const l=(c,f)=>{const g=this.services.backendConnector.state[`${c}|${f}`];return g===-1||g===0||g===2};if(n.precheck){const c=n.precheck(this,l);if(c!==void 0)return c}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(r,e)&&(!i||l(o,e)))}loadNamespaces(e,n){const r=gy();return this.options.ns?(ii(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=gy();ii(e)&&(e=[e]);const i=this.options.preload||[],o=e.filter(l=>i.indexOf(l)<0&&this.services.languageUtils.isSupportedCode(l));return o.length?(this.options.preload=i.concat(o),this.loadResources(l=>{r.resolve(),n&&n(l)}),r):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new tR(iR());return n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new yy(e,n)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e0;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},o=new yy(i);return(e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e)),["store","services","language"].forEach(c=>{o[c]=this[c]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},r&&(o.store=new XC(this.store.data,i),o.services.resourceStore=o.store),o.translator=new J_(o.services,i),o.translator.on("*",function(c){for(var f=arguments.length,g=new Array(f>1?f-1:0),y=1;y<f;y++)g[y-1]=arguments[y];o.emit(c,...g)}),o.init(i,n),o.translator.options=i,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ns=yy.createInstance();ns.createInstance=yy.createInstance,ns.createInstance,ns.dir,ns.init,ns.loadResources,ns.reloadResources,ns.use,ns.changeLanguage,ns.getFixedT,ns.t,ns.exists,ns.setDefaultNamespace,ns.hasLoadedNamespace,ns.loadNamespaces,ns.loadLanguages;const b6=(...t)=>{console?.warn&&(Fh(t[0])&&(t[0]=`react-i18next:: ${t[0]}`),console.warn(...t))},sR={},Bw=(...t)=>{Fh(t[0])&&sR[t[0]]||(Fh(t[0])&&(sR[t[0]]=new Date),b6(...t))},aR=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},Zw=(t,e,n)=>{t.loadNamespaces(e,aR(t,n))},lR=(t,e,n,r)=>{if(Fh(n)&&(n=[n]),t.options.preload&&t.options.preload.indexOf(e)>-1)return Zw(t,n,r);n.forEach(i=>{t.options.ns.indexOf(i)<0&&t.options.ns.push(i)}),t.loadLanguages(e,aR(t,r))},E6=(t,e,n={})=>!e.languages||!e.languages.length?(Bw("i18n.languages were undefined or empty",e.languages),!0):e.hasLoadedNamespace(t,{lng:n.lng,precheck:(r,i)=>{if(n.bindI18n?.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,t))return!1}}),Fh=t=>typeof t=="string",w6=t=>typeof t=="object"&&t!==null,T6=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,S6={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},A6=t=>S6[t];let jw={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:t=>t.replace(T6,A6)};const I6=(t={})=>{jw={...jw,...t}},C6=()=>jw;let uR;const R6=t=>{uR=t},x6=()=>uR,N6={type:"3rdParty",init(t){I6(t.options.react),R6(t)}},O6=xe.createContext();class L6{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const D6=(t,e)=>{const n=xe.useRef();return xe.useEffect(()=>{n.current=t},[t,e]),n.current},cR=(t,e,n,r)=>t.getFixedT(e,n,r),P6=(t,e,n,r)=>xe.useCallback(cR(t,e,n,r),[t,e,n,r]),fR=(t,e={})=>{const{i18n:n}=e,{i18n:r,defaultNS:i}=xe.useContext(O6)||{},o=n||r||x6();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new L6),!o){Bw("You will need to pass in an i18next instance by using initReactI18next");const S=($,V)=>Fh(V)?V:w6(V)&&Fh(V.defaultValue)?V.defaultValue:Array.isArray($)?$[$.length-1]:$,O=[S,{},!1];return O.t=S,O.i18n={},O.ready=!1,O}o.options.react?.wait&&Bw("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const l={...C6(),...o.options.react,...e},{useSuspense:c,keyPrefix:f}=l;let g=t||i||o.options?.defaultNS;g=Fh(g)?[g]:g||["translation"],o.reportNamespaces.addUsedNamespaces?.(g);const y=(o.isInitialized||o.initializedStoreOnce)&&g.every(S=>E6(S,o,l)),h=P6(o,e.lng||null,l.nsMode==="fallback"?g:g[0],f),p=()=>h,E=()=>cR(o,e.lng||null,l.nsMode==="fallback"?g:g[0],f),[A,_]=xe.useState(p);let I=g.join();e.lng&&(I=`${e.lng}${I}`);const C=D6(I),v=xe.useRef(!0);xe.useEffect(()=>{const{bindI18n:S,bindI18nStore:O}=l;v.current=!0,!y&&!c&&(e.lng?lR(o,e.lng,g,()=>{v.current&&_(E)}):Zw(o,g,()=>{v.current&&_(E)})),y&&C&&C!==I&&v.current&&_(E);const $=()=>{v.current&&_(E)};return S&&o?.on(S,$),O&&o?.store.on(O,$),()=>{v.current=!1,o&&S?.split(" ").forEach(V=>o.off(V,$)),O&&o&&O.split(" ").forEach(V=>o.store.off(V,$))}},[o,I]),xe.useEffect(()=>{v.current&&y&&_(p)},[o,f,y]);const T=[A,o,y];if(T.t=A,T.i18n=o,T.ready=y,y||!y&&!c)return T;throw new Promise(S=>{e.lng?lR(o,e.lng,g,()=>S()):Zw(o,g,()=>S())})},bu=({ns:t,children:e,...n})=>{const[r,i,o]=fR(t,n);return e(r,{i18n:i,lng:i.language},o)},{slice:M6,forEach:k6}=[];function F6(t){return k6.call(M6.call(arguments,1),e=>{if(e)for(const n in e)t[n]===void 0&&(t[n]=e[n])}),t}const dR=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,$6=(t,e,n)=>{const r=n||{};r.path=r.path||"/";const i=encodeURIComponent(e);let o=`${t}=${i}`;if(r.maxAge>0){const l=r.maxAge-0;if(Number.isNaN(l))throw new Error("maxAge should be a Number");o+=`; Max-Age=${Math.floor(l)}`}if(r.domain){if(!dR.test(r.domain))throw new TypeError("option domain is invalid");o+=`; Domain=${r.domain}`}if(r.path){if(!dR.test(r.path))throw new TypeError("option path is invalid");o+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return o},hR={create(t,e,n,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+n*60*1e3)),r&&(i.domain=r),document.cookie=$6(t,encodeURIComponent(e),i)},read(t){const e=`${t}=`,n=document.cookie.split(";");for(let r=0;r<n.length;r++){let i=n[r];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return i.substring(e.length,i.length)}return null},remove(t){this.create(t,"",-1)}};var U6={name:"cookie",lookup(t){let{lookupCookie:e}=t;if(e&&typeof document<"u")return hR.read(e)||void 0},cacheUserLanguage(t,e){let{lookupCookie:n,cookieMinutes:r,cookieDomain:i,cookieOptions:o}=e;n&&typeof document<"u"&&hR.create(n,t,r,i,o)}},B6={name:"querystring",lookup(t){let{lookupQuerystring:e}=t,n;if(typeof window<"u"){let{search:r}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(r=window.location.hash.substring(window.location.hash.indexOf("?")));const o=r.substring(1).split("&");for(let l=0;l<o.length;l++){const c=o[l].indexOf("=");c>0&&o[l].substring(0,c)===e&&(n=o[l].substring(c+1))}}return n}};let vy=null;const pR=()=>{if(vy!==null)return vy;try{vy=window!=="undefined"&&window.localStorage!==null;const t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{vy=!1}return vy};var Z6={name:"localStorage",lookup(t){let{lookupLocalStorage:e}=t;if(e&&pR())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupLocalStorage:n}=e;n&&pR()&&window.localStorage.setItem(n,t)}};let _y=null;const gR=()=>{if(_y!==null)return _y;try{_y=window!=="undefined"&&window.sessionStorage!==null;const t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{_y=!1}return _y};var j6={name:"sessionStorage",lookup(t){let{lookupSessionStorage:e}=t;if(e&&gR())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupSessionStorage:n}=e;n&&gR()&&window.sessionStorage.setItem(n,t)}},V6={name:"navigator",lookup(t){const e=[];if(typeof navigator<"u"){const{languages:n,userLanguage:r,language:i}=navigator;if(n)for(let o=0;o<n.length;o++)e.push(n[o]);r&&e.push(r),i&&e.push(i)}return e.length>0?e:void 0}},z6={name:"htmlTag",lookup(t){let{htmlTag:e}=t,n;const r=e||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},H6={name:"path",lookup(t){let{lookupFromPathIndex:e}=t;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?n[typeof e=="number"?e:0]?.replace("/",""):void 0}},G6={name:"subdomain",lookup(t){let{lookupFromSubdomainIndex:e}=t;const n=typeof e=="number"?e+1:1,r=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(r)return r[n]}};function q6(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:t=>t}}class mR{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e||{languageUtils:{}},this.options=F6(n,this.options||{},q6()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=i=>i.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(U6),this.addDetector(B6),this.addDetector(Z6),this.addDetector(j6),this.addDetector(V6),this.addDetector(z6),this.addDetector(H6),this.addDetector(G6)}addDetector(e){return this.detectors[e.name]=e,this}detect(e){e||(e=this.options.order);let n=[];return e.forEach(r=>{if(this.detectors[r]){let i=this.detectors[r].lookup(this.options);i&&typeof i=="string"&&(i=[i]),i&&(n=n.concat(i))}}),n=n.map(r=>this.options.convertDetectedLanguage(r)),this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(e,n){n||(n=this.options.caches),n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||n.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(e,this.options)}))}}mR.type="languageDetector";const yR={next:"",end:" ",bubble_back:"",launch_guide:" ",news:"",guides:" ",search_guides:"  "},vR={guides:"",news:"",search:"",search_guides:"  ",next:"",end:"",bubble_back:"",select_answer:"  ...",support:"",back:"",support_select:" ",support_placeholder:"     ",send:" ",empty_library:"    ",launch_guide:"  "},_R={guides:"",news:"",search:"",search_guides:"",next:"",end:"",bubble_back:"",select_answer:"Select an answer ...",support:"",back:"",support_select:"",support_placeholder:"",send:"",empty_library:"",launch_guide:""},bR={guides:"Prvodci",news:"Zprvy",search:"Vyhledvn",search_guides:"Vyhledvn prvodce",next:"Nsledujc",end:"Dokonit",bubble_back:"Pedchoz",select_answer:"Select an answer ...",support:"Podpra, podpora",back:"Vrtit se",support_select:"Vyberte vzorek",support_placeholder:"Sem napite svj poadavek na podporu",send:"Poslat",empty_library:"Ve va knihovn nen dn obsah",launch_guide:"spoutc prvodce"},ER={guides:"Guider",news:"Nyheder",search:"Sg",search_guides:"Sg efter en guide",next:"Nste",end:"Afslutte",bubble_back:"Tilbage",select_answer:"Select an answer ...",support:"Support",back:"Tilbage",support_select:"Vlg et mnster",support_placeholder:"Skriv dit supportsprgsml her",send:"Send",empty_library:"Intet indhold i dit bibliotek",launch_guide:"lanceringsvejledning"},wR={welcome:"Willkommen",connect_phrase:"Loggen Sie sich ein",continue:"Fortfahren",restart:"Neustart",forgot_password:"Passwort vergessen?",back:"Zurck",connect:"Verbinden",email_address:"E-Mail Adresse",email_placeholder:"Ihre E-Mail Adresse",password:"Passwort",password_placeholder:"Passwort",logger:"Login",error:"Fehler",wrong_credentials:"Login unbekannt. Prfen Sie Ihren Login und versuchen Sie es erneut.",cant_be_empty:"Dieses Feld muss ausgefllt sein.",empty_guides:"Noch keine Guides verfgbar",empty_pushs:"Ihr News-Bereich ist noch leer",empty_search:"Kein Such-Ergebnis ",empty_library:"Kein Element gefunden.",send:"Senden",sending:"Wird gesendet",search:"Suchen",search_guides:"Nach einem Leitfaden suchen",support:"Untersttzung",support_title:"Senden Sie eine Supportanfrage",support_placeholder:"Schreiben Sie hier Ihre Supportanfrage.",support_request_bug:"Ich mchte einen Fehler melden.",support_request_idea:"Ich habe eine Idee, Lemon Leanrning zu verbessern.",support_request_tool:"Ich wrde gerne Lemon Learning fr andere Tools sehen.",support_request_guides:"Ich werde gerne Guides auf ...",support_success:"Ihre Anfrage wurde verschickt.",support_select:"Whlen Sie",guides:"Lernwege",news:"Neuigkeiten",launch_guide:"Guide starten",next:"Weiter",end:"Beenden",bubble_back:"Zurck",select_answer:"Whle eine Antwort ...",continue_guide_lecture:"Fortsetzung der Vorlesung",debug_something_happened:"Es ist ein Fehler aufgetreten:",debug_solution:"Gehen Sie zu den FAQ, um ... zu finden",debug_word_solution:"Lsung",error_incorrect_host:"Der Host ist falsch.",error_no_content_profile:"Fr dieses Profil ist kein Inhalt vorhanden.",error_auto_sign_up:"Bei der automatischen Anmeldung ist ein Fehler aufgetreten.",error_ghost_user:"Bei der anonymen Authentifizierung ist ein Fehler aufgetreten.",error_player_hidden:"Der Player ist versteckt.",error_loading_guides:"Beim Laden der Leitfden ist ein Fehler aufgetreten.",error_loading_pushes:"Beim Laden von Pushs ist ein Fehler aufgetreten.",error_loading_tooltips:"Beim Laden der Info-Box ist ein Fehler aufgetreten.",error_loading_smartlaunchers:"Beim Laden der intelligenten Starter ist ein Fehler aufgetreten.",error_loading_quicklaunchers:"Beim Laden der Schnellstarter ist ein Fehler aufgetreten.",error_rendering_player:"Beim Laden des Players ist ein Fehler aufgetreten.",error_loading_quicklauncher_content:"Probleme beim Laden des Inhalts des Schnellstarters.",error_loading_smartlauncher_content:"Problem beim Laden von Inhalten aus dem intellligenten Starter.",trace_host_found:"Der Host ist korrekt.",trace_application_mounted:"Die Anwendung ist eingebunden.",trace_login_succeeded:"Die Authentifizierung ist erfolgreich.",trace_theme_applied:"Das Design wird angewendet.",trace_data_loaded:"Die Daten werden geladen.",trace_application_running:"Die Anwendung wird ausgefhrt.",library:"Bibliothek",guide_not_available:"Sie mssen sich authentifizieren, um den Leitfaden zu lesen.",support_error:"Fehler: Anfrage nicht gesendet",logout:"Abmelden",new:"NEU",chatbot:"Chatbot","chatbot-input-placeholder":"Schreiben Sie eine Nachricht","chatbot-greeting":"Hallo, wie kann ich Ihnen helfen?",error_no_target_found_next_step:"Klicken Sie auf <b>Weiter</b>, um den Guide zu beenden."},Vw={welcome:"Welcome",connect_phrase:"Login to start using Lemon Learning.",continue:"Continue",restart:"Restart",forgot_password:"Forgot password?",back:"Back",connect:"Connect",email_address:"E-mail address",email_placeholder:"your@email.address",password:"Password",password_placeholder:"Your password",logger:"Login",error:"Error",wrong_credentials:"Wrong credentials. Please try again.",email_invalid:"The email address is invalid. Expected format: example@lemonlearning.com",cant_be_empty:"This field can't be empty.",search:"Search",search_guides:"Search for a guide",empty_guides:"You don't have any guides.",empty_pushs:"There is no news.",empty_search:"No search results.",empty_library:"No element found.",send:"Send",sending:"Sending ...",support:"Support",support_title:"Send a support request",support_placeholder:"Write your support request here.",support_request_bug:"I want to report a bug.",support_request_idea:"I have an idea to improve Lemon Learning.",support_request_tool:"I would like to see Lemon Learning on other tools.",support_request_guides:"I would like to have guides on ...",support_success:"Your request has been sent.",support_error:"Error: request not sent",support_select:"Select",guides:"Guides",news:"News",library:"Library",launch_guide:"Launch guide",continue_guide_lecture:"Continue guide lecture",next:"Next",end:"End Guide",bubble_back:"Back",select_answer:"Select an answer ...",debug_something_happened:"An error occured:",debug_solution:"Go to the FAQ to find",debug_word_solution:"Solution",error_incorrect_host:"The host is wrong.",error_no_content_profile:"There is no content for this profile.",error_auto_sign_up:"An error occured during auto sign-up.",error_ghost_user:"An error occured during anonymous authentication.",error_player_hidden:"The player is hidden.",error_loading_guides:"An error occured while loading guides.",error_loading_pushes:"An error occured while loading pushes.",error_loading_tooltips:"An error occured while loading tooltips.",error_loading_smartlaunchers:"An error occured while loading smart launchers.",error_loading_quicklaunchers:"An error occured while loading quick launchers.",error_rendering_player:"An error occured while rendering player.",error_loading_quicklauncher_content:"Problem loading the content of the quick launcher.",error_loading_smartlauncher_content:"Problem loading the content of the smart launcher.",trace_host_found:"The host is correct.",trace_application_mounted:"The application is mounted.",trace_login_succeeded:"The authentication is successful.",trace_theme_applied:"The theme is applied.",trace_data_loaded:"Data is loaded.",trace_application_running:"The application is running.",guide_not_available:"You need to authenticate to read the guide.",logout:"Logout",new:"NEW",chatbot:"Chatbot","chatbot-input-placeholder":"Write a message","chatbot-greeting":"Hello, how can I help you?","chatbot-load-more-messages":"Load more messages","chatbot-information-placeholder":"You are talking to a Lemon Learning AI, available 24/7 to help you.",error_no_target_found_next_step:"Click on <b>Next</b> to continue the guide."},TR={welcome:"Bienvenido",connect_phrase:"Conctese para utilizar Lemon Learning.",continue:"Continuar",restart:"Reiniciar",forgot_password:"Olvidaste tu contrasea?",back:"Volver",connect:"Conexin",email_address:"Correo electrnico",email_placeholder:"nombre@correo.com",password:"Contrasea",password_placeholder:"Su contrasea",logger:"Nombre de usuario",error:"Error",wrong_credentials:"El nombre de usuario no existe. Verifquelo e intntelo de nuevo.",cant_be_empty:"Este espacio no puede estar vaco",empty_guides:"An no tiene guas.",empty_pushs:"An no tiene actualizaciones.",empty_search:"Ningn resultado por la bsqueda.",empty_library:"Ningn contenido en tu biblioteca.",send:"Enviar",sending:"Enviando",search:"Buscar",search_guides:"Buscar una gua",support:"Soporte",support_title:"Enviar una solicitud de soporte",support_placeholder:"Escriba su solicitud de soporte aqu",support_request_bug:"Quiero reportar un error",support_request_idea:"Tengo una idea para mejorar Lemon Learning",support_request_tool:"Me gustara ver Lemon Learning en otras herramientas",support_request_guides:"Me gustarn guas sobre ...",support_success:"Tu solicitud ha sido enviada",support_select:"Seleccione",guides:"Guas",news:"Novedades",launch_guide:"Lanza la gua",next:"Siguiente",end:"Finalizar",bubble_back:"Anterior",select_answer:"Selecciona una repuesta ...",continue_guide_lecture:"Continuar leyendo la gua",debug_something_happened:"Ocurri un error :",debug_solution:"Vaya a las preguntas frecuentes para encontrar un",debug_word_solution:"solucin",error_incorrect_host:"El anfitrin esta equivocado",error_no_content_profile:"No hay contenido para este perfil.",error_auto_sign_up:"Se produjo un error durante el registro automtico",error_ghost_user:"Se produjo un error durante la autenticacin annima",error_player_hidden:"El jugador esta oculto",error_loading_guides:"Se produjo un error al cargar las guas.",error_loading_pushes:"Se produjo un error al cargar los empujes",error_loading_tooltips:"Se produjo un error al cargar la informacin sobre herramientas",error_loading_smartlaunchers:"Se produjo un error al cargar lanzadores inteligentes",error_loading_quicklaunchers:"Se produjo un error al cargar los lanzadores rpidos",error_rendering_player:"Se produjo un error al reproducir el reproductor.",error_loading_quicklauncher_content:"Problema al cargar contenido desde el lanzador rpido",error_loading_smartlauncher_content:"Problema al cargar contenido desde el lanzador inteligente",trace_host_found:"El anfitrin es correcto",trace_application_mounted:"La aplicacin est montada",trace_login_succeeded:"La autenticacin es exitosa",trace_theme_applied:"Se aplica el tema.",trace_data_loaded:"Los datos estn cargados",trace_application_running:"La aplicacin se est ejecutando","chatbot-greeting":"Hola, cmo puedo ayudarle?",support_error:"Error: solicitud no enviada",library:"Biblioteca",logout:"Cerrar sesin",new:"Nuevo","chatbot-input-placeholder":"Escribir un mensaje",error_no_target_found_next_step:"Haga clic en <b>Siguiente</b> para continuar el recorrido."},SR={welcome:"Bienvenue",connect_phrase:"Connectez-vous afin d'utiliser Lemon Learning.",continue:"Continuer",restart:"Recommencer",forgot_password:"Identifiants oublis ?",back:"Retour",connect:"Connexion",email_address:"Adresse E-mail",email_placeholder:"votre@adresse.mail",password:"Mot de passe",password_placeholder:"Votre mot de passe",logger:"Identifiant",error:"Erreur",wrong_credentials:"L'identifiant que vous avez entr n'existe pas. Veuillez le vrifier et ressayer.",cant_be_empty:"Ce champ ne peut tre vide",email_invalid:"L'adresse e-mail est invalide. Format attendu : exemple@lemonlearning.com",empty_guides:"Vous n'avez pas encore de guides.",empty_pushs:"Vous n'avez pas encore d'actualits.",empty_search:"Aucun rsultat pour la recherche.",empty_library:"Aucun lment trouv",send:"Envoyer",sending:"Envoi...",search:"Rechercher",search_guides:"Rechercher un guide",support:"Support",support_title:"Envoyer une demande de support",support_placeholder:"Ecrivez votre demande de support ici",support_request_bug:"Je souhaite signaler un bug",support_request_idea:"J'ai une ide pour amliorer Lemon Learning",support_request_tool:"Je souhaiterais voir Lemon Learning sur d'autres outils",support_request_guides:"J'aimerais des guides sur...",support_success:"Votre requte a t envoye",support_error:"Erreur : message non envoy",support_select:"Slectionner un motif",guides:"Guides",news:"Actualits",library:"Bibliothque",launch_guide:"Lancer le guide",next:"Suivant",end:"Terminer",bubble_back:"Prc.",select_answer:"Slectionnez une rponse ...",continue_guide_lecture:"Continuer la lecture du guide",debug_something_happened:"Un problme est survenu :",debug_solution:"Rendez-vous sur la FAQ pour trouver une",debug_word_solution:"solution",error_incorrect_host:"Le host est incorrect",error_no_content_profile:"Il n'y a pas de contenu pour ce profil",error_auto_sign_up:"Problme lors de l'auto sign-up",error_ghost_user:"Problme lors de l'authentification anonyme",error_player_hidden:"Le player est cach",error_loading_guides:"Problme lors du chargement des guides",error_loading_pushes:"Problme lors du chargement des pushs",error_loading_tooltips:"Problme lors du chargement des tooltips",error_loading_smartlaunchers:"Problme lors du chargement des lanceurs intelligents",error_loading_quicklaunchers:"Problme lors du chargement des lanceurs rapides",error_rendering_player:"Problme lors du rendu du player",error_loading_quicklauncher_content:"Problme lors du chargement du contenu du lanceur rapide",error_loading_smartlauncher_content:"Problme lors du chargement du contenu du lanceur intelligent",trace_host_found:"Le host est correct",trace_application_mounted:"L'application est monte",trace_login_succeeded:"La connexion a russie",trace_theme_applied:"Le thme est appliqu",trace_data_loaded:"Les donnes sont charges",trace_application_running:"L'application est fonctionnelle",guide_not_available:"Connectez-vous pour lancer le guide li",logout:"Dconnexion",new:"NOUVEAU",chatbot:"Chatbot","chatbot-input-placeholder":"Ecrivez un message","chatbot-greeting":"Bonjour, comment puis-je vous aider ?","chatbot-load-more-messages":"Charger plus de messages","chatbot-information-placeholder":"Vous discutez avec une IA Lemon Learning, disponible 24/7 pour vous aider.",error_no_target_found_next_step:"Cliquer sur <b>Suivant</b> pour continuer le guide. "},AR={guides:"",news:"",search:"",search_guides:" ",next:"",end:"",bubble_back:"",select_answer:"Select an answer ...",support:"",back:"",support_select:"  ",support_placeholder:"     ",send:" ",empty_library:"     ",launch_guide:" "},IR={guides:"Vodii",news:"Vijesti",search:"trai",search_guides:"Trai vodi",next:"slijedei",end:"Zavri",bubble_back:"Prethodni",select_answer:"Odaberite odgovor ...",support:"Podrka",back:"Povratak",support_select:"Odaberite obrazac",support_placeholder:"Ovdje napiite svoj zahtjev za podrku",send:"Poslati",empty_library:"Nema sadraja u vaoj knjinici",launch_guide:"vodi za pokretanje"},CR={guides:"tmutatk",news:"hrek",search:"Keress",search_guides:"Umutat keresse",next:"kvetkez",end:"Befejez",bubble_back:"Elz",select_answer:"Vlasszon egy vlaszt ...",support:"Tmogats",back:"Visszatrs",support_select:"Vlasszon mintt",support_placeholder:"rja ide tmogatsi krelmt",send:"Kldeni",empty_library:"Nincs tartalom a knyvtradban",launch_guide:"indtsi tmutat"},RR={welcome:"Benvenuta/o",connect_phrase:"Accedi per iniziare a utilizzare Lemon Learning.",continue:"Continua",restart:"Ricomincia",forgot_password:"Ha dimenticato la password ?",back:"Ritorno",connect:"Collegare",email_address:"Indirizzo email",email_placeholder:"your@email.address",password:"Parola d'ordine",password_placeholder:"La tua password",logger:"Accesso",error:"Errore",wrong_credentials:"Credenziali errate. Per favore riprova.",cant_be_empty:"Questo campo non pu essere vuoto",search:"Ricerca",search_guides:"Cerca una guida",empty_guides:"Non hai nessuna guida.",empty_pushs:"Non ci sono novit.",empty_search:"Nessun risultato trovato.",empty_library:"Non hai contenuti nella tua libreria.",send:"Spedire",sending:"Invio ...",support:"Supporto",support_title:"Invia una richiesta di supporto",support_placeholder:"Scrivi qui la tua richiesta di supporto",support_request_bug:"Voglio segnalare un bug",support_request_idea:"Ho un'idea per migliorare Lemon Learning",support_request_tool:"Mi piacerebbe vedere Lemon Learning su altri strumenti",support_request_guides:"Vorrei guide su ...",support_success:"La tua richiesta  stata inviata",guides:"Guides",news:"Notizie",library:"Libreria",launch_guide:"Guida al lancio",next:"Avanti",end:"Fine",bubble_back:"Precedente",select_answer:"Seleziona una risposta ...",continue_guide_lecture:"Continua la lezione della guida",debug_something_happened:"Si  verificato un errore :",debug_solution:"Vai alle FAQ per trovare un file",debug_word_solution:"soluzione",error_incorrect_host:"L'host ha torto",error_no_content_profile:"Non ci sono contenuti per questo profilo",error_auto_sign_up:"Si  verificato un errore durante la registrazione automatica",error_ghost_user:"Si  verificato un errore durante l'autenticazione anonima",error_player_hidden:"Il giocatore  nascosto",error_loading_guides:"Si  verificato un errore durante il caricamento delle guide",error_loading_pushes:"Si  verificato un errore durante il caricamento dei push",error_loading_tooltips:"Si  verificato un errore durante il caricamento dei suggerimenti",error_loading_smartlaunchers:"Si  verificato un errore durante il caricamento degli smart launcher",error_loading_quicklaunchers:"Si  verificato un errore durante il caricamento dei lanciatori rapidi",error_rendering_player:"Si  verificato un errore durante il rendering del lettore",error_loading_quicklauncher_content:"Problema durante il caricamento del contenuto del launcher rapido",error_loading_smartlauncher_content:"Problema durante il caricamento del contenuto del launcher intelligente",trace_host_found:"L'host ha ragione",trace_application_mounted:"L'applicazione  montata",trace_login_succeeded:"L'autenticazione  riuscita",trace_theme_applied:"Il tema viene applicato",trace_data_loaded:"I dati vengono caricati",trace_application_running:"L'applicazione  in esecuzione"},xR={guides:"",news:"",search:"",search_guides:"",next:"",end:"",bubble_back:"",select_answer:"Select an answer ...",support:"",back:"",support_select:"",support_placeholder:"",send:"",empty_library:"",launch_guide:""},NR={guides:"",news:"",search:"",search_guides:" ",next:"",end:"",bubble_back:"",select_answer:"Select an answer ...",support:"",back:"",support_select:" ",support_placeholder:"   .",send:"",empty_library:"  .",launch_guide:" "},OR={guides:"Gidsen",news:"Nieuws",search:"Opzoeken",search_guides:"Zoek naar een gids",back:"Terug",support:"Help",next:"Volgende",end:"Sluiten",bubble_back:"Vorige",select_answer:"Kies een antwoord ...",support_select:"Kies een reden",support_placeholder:"Schrijf hier uw vraag",support_success:"Uw verzoek is verzonden",send:"Versturen",empty_library:"Geen inhoud in uw bibliotheek",launch_guide:"Start de gids"},LR={guides:"Guider",news:"Nyheter",search:"Sk",search_guides:"Sk etter en guide",next:"Nest",end:"Ferdig",bubble_back:"Tilbake",select_answer:"Velg svar ...",support:"Brukersttte",back:"Tilbake",support_select:"Velg et mnster",support_placeholder:"Skriv support -sprsmlet ditt her",send:"Sende",empty_library:"Ingen innhold i biblioteket ditt",launch_guide:"lanseringsveiledning"},DR={guides:"Przewodniki",news:"Aktualnoci",search:"Szukaj",search_guides:"Szukaj przewodnika",next:"Dalej",end:"Koniec",bubble_back:"Poprzedni",select_answer:"Wybierz odpowied...",support:"Wsparcie",back:"Powrt",support_select:"Wybierz wzr",support_placeholder:"Wpisz tutaj swoj prob o wsparcie",send:"Wysya",empty_library:"Brak treci w Twojej bibliotece",launch_guide:"przewodnik uruchamiania"},PR={welcome:"Bem-vindo",connect_phrase:"Faa login para usar o Lemon Learning.",continue:"Continuar",restart:"Reiniciar",forgot_password:"Esqueceu-se dos detalhes de login?",back:"Devoluo",connect:"Conexo",email_address:"Endereo de e-mail",email_placeholder:"seu@endereo.mail",password:"Senha",password_placeholder:"Sua senha",logger:"Identificador",error:"Erro",wrong_credentials:"O ID entrado no existe. Por favor, verifique e tente novamente.",cant_be_empty:"Este campo no pode estar vazio",empty_guides:"Ainda no tens nenhum guia.",empty_pushs:"Ainda no tens notcias.",empty_search:"No h resultados para a pesquisa.",empty_library:"Sem contedo na sua biblioteca.",send:"Enviar",sending:"Enviando...",search:"Procurar",search_guides:"Procurar um guia",support:"Soporte",support_title:"Envie uma solicitao de suporte",support_placeholder:"Escreva aqui o seu pedido de suporte",support_request_bug:"Quero denunciar um bug",support_request_idea:"Eu tenho uma ideia para melhorar o Lemon Learning",support_request_tool:"Gostaria de ver o Lemon Learning em outras ferramentas",support_request_guides:"Vou gostar de guias sobre ...",support_success:"seu pedido foi enviado",support_select:"Seleccionar",guides:"Guias",news:"Notcias",launch_guide:"Lanar o guia",next:"Seguinte",end:"Fim",bubble_back:"Anterior",select_answer:"Selecione uma resposta ...",continue_guide_lecture:"Continue lendo o guia",debug_something_happened:"Um erro ocorreu :",debug_solution:"V para o FAQ para encontrar um",debug_word_solution:"soluo",error_incorrect_host:"O anfitrio est errado",error_no_content_profile:"No h contedo para este perfil",error_auto_sign_up:"Ocorreu um erro durante a inscrio automtica",error_ghost_user:"Ocorreu um erro durante a autenticao annima",error_player_hidden:"O jogador est oculto",error_loading_guides:"Ocorreu um erro ao carregar as guias",error_loading_pushes:"Ocorreu um erro ao carregar os push",error_loading_tooltips:"Ocorreu um erro ao carregar as dicas de ferramentas",error_loading_smartlaunchers:"Ocorreu um erro ao carregar lanadores inteligentes",error_loading_quicklaunchers:"Ocorreu um erro ao carregar lanadores rpidos",error_rendering_player:"Ocorreu um erro ao renderizar o player",error_loading_quicklauncher_content:"Problema de carregamento do contedo do lanamento rpido",error_loading_smartlauncher_content:"Problema no carregamento do contedo do lanador inteligente",trace_host_found:"O host est correto",trace_application_mounted:"O aplicativo est montado",trace_login_succeeded:"A autenticao foi bem sucedida",trace_theme_applied:"O tema  aplicado",trace_data_loaded:"Os dados so carregados",trace_application_running:"O aplicativo est sendo executado",error_no_target_found_next_step:"Clique em <b>Prximo</b> para continuar o guia."},MR={guides:"Ghiduri",news:"tiri",search:"Cutare",search_guides:"Cutai un ghid",next:"ca urmare a",end:"finalizarea",bubble_back:"Anterior",select_answer:"Selectai un rspuns ...",support:"A sustine",back:"ntoarcere",support_select:"Selectai un model",support_placeholder:"Scriei solicitarea dvs. de asisten aici",send:"A trimite",empty_library:"Nu exist coninut n biblioteca dvs.",launch_guide:"ghid de lansare"},kR={guides:"",news:"",search:"",search_guides:" ",next:"",end:"",bubble_back:"",select_answer:"  ...",support:"",back:"",support_select:" ",support_placeholder:"      ",send:"",empty_library:"    ",launch_guide:"  "},FR={guides:"Vodniki",news:"Novice",search:"Iskanje",search_guides:"Iite vodnik",next:"Naprej",end:"Konec",bubble_back:"Prejnja",select_answer:"Izberite odgovor ...",support:"Podpora",back:"Vrni se",support_select:"Izberite vzorec",support_placeholder:"Zahtevo za podporo napiite tukaj",send:"Poslati",empty_library:"V vai knjinici ni nobene vsebine",launch_guide:"vodnik za zagon"},$R={guides:"",news:"",search:"",search_guides:" ",next:"",end:"",bubble_back:"",select_answer:"  ...",support:"",back:"",support_select:" ",support_placeholder:"    ",send:"",empty_library:"    ",launch_guide:"  "},UR={guides:"Guider",news:"Nyheter",search:"Sk",search_guides:"Sk efter en guide",next:"Nsta",end:"Avsluta",bubble_back:"Fregende",select_answer:"Vlj ett svar ...",support:"Std",back:"Tillbaka",support_select:"Vlj ett mnster",support_placeholder:"Skriv din supportfrga hr",send:"Skicka",empty_library:"Inget innehll i ditt bibliotek",launch_guide:"lanseringsguide"},BR={guides:"Klavuzlar",news:"Haberler",search:"Arama",search_guides:"Bir klavuz ara",next:"LER",end:"Biti",bubble_back:"nceki",select_answer:"Bir cevap sein...",support:"Destek",back:"Dn",support_select:"Bir desen sein",support_placeholder:"Destek talebinizi buraya yazn",send:"Gndermek",empty_library:"Kitaplnzda ierik yok",launch_guide:"lansman klavuzlar"},ZR={guides:"",news:"",search:"",search_guides:" ",next:"",end:"",bubble_back:"",select_answer:"Vlasszon egy vlaszt ...",support:"",back:"",support_select:" ",support_placeholder:"    ",send:"",empty_library:"    ",launch_guide:"  "},jR={launch_guide:"",next:"",end:"",bubble_back:"",guides:"",search_guides:"",news:""};function zw(t){switch(t){case"ar":return yR;case"bg":return vR;case"zh-cn":return _R;case"cs":return bR;case"da":return ER;case"de":return wR;case"en":return Vw;case"es":return TR;case"fr":return SR;case"el":return AR;case"hr":return IR;case"hu":return CR;case"it":return RR;case"jp":return xR;case"ko":return NR;case"nl":return OR;case"no":return LR;case"pl":return DR;case"pt":return PR;case"ro":return MR;case"ru":return kR;case"sl":return FR;case"sr":return $R;case"sv":return UR;case"tr":return BR;case"ua":return ZR;case"zh-tw":return jR;default:return Vw}}const W6={ar:{translation:yR},bg:{translation:vR},"zh-cn":{translation:_R},cs:{translation:bR},da:{translation:ER},de:{translation:wR},en:{translation:Vw},es:{translation:TR},fr:{translation:SR},el:{translation:AR},hr:{translation:IR},hu:{translation:CR},it:{translation:RR},jp:{translation:xR},ko:{translation:NR},nl:{translation:OR},no:{translation:LR},pl:{translation:DR},pt:{translation:PR},ro:{translation:MR},ru:{translation:kR},sl:{translation:FR},sr:{translation:$R},sv:{translation:UR},tr:{translation:BR},ua:{translation:ZR},"zh-tw":{translation:jR}},K6="en",Hw="ll-user-selected_language",Y6=t=>{window.localStorage.setItem(Hw,t)},Q6=()=>window.localStorage.getItem(Hw);ns.use(N6).use(mR).init({resources:W6,detection:{order:["localStorage","navigator"],lookupLocalStorage:Hw,caches:[]},fallbackLng:K6,interpolation:{escapeValue:!1},lowerCaseLng:!0});const VR=xe.createContext(void 0);function X6(t){const[e,n]=xe.useState(t.config);xe.useEffect(()=>{n(t.config)},[t.config]);const r=xe.useCallback(i=>{n(o=>({...o,host:i}))},[]);return pe.jsx(VR.Provider,{value:{config:e,setHost:r},children:t.children})}const zs=()=>{const t=xe.useContext(VR);if(t===void 0)throw new Error("useConfiguration must be used within a ConfigurationContextProvider");return t};class Mf extends Error{constructor(){super("Access token invalid")}}class Eu extends Error{constructor({expected:e,received:n}){super(`Unexpected HTTP status code: expected ${e}, received ${n}`)}}class Gw extends Error{constructor({error:e,type:n}){super(`An error occurred while fetching the resource: ${e} (type: ${n})`),this.error=e,this.type=n}}new TextEncoder;const zR=new TextDecoder,J6=t=>{const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n},e8=t=>{let e=t;e instanceof Uint8Array&&(e=zR.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return J6(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class Ba extends Error{constructor(e,n){super(e,n),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}Ba.code="ERR_JOSE_GENERIC";class t8 extends Ba{constructor(e,n,r="unspecified",i="unspecified"){super(e,{cause:{claim:r,reason:i,payload:n}}),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=r,this.reason=i,this.payload=n}}t8.code="ERR_JWT_CLAIM_VALIDATION_FAILED";class n8 extends Ba{constructor(e,n,r="unspecified",i="unspecified"){super(e,{cause:{claim:r,reason:i,payload:n}}),this.code="ERR_JWT_EXPIRED",this.claim=r,this.reason=i,this.payload=n}}n8.code="ERR_JWT_EXPIRED";class r8 extends Ba{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}}r8.code="ERR_JOSE_ALG_NOT_ALLOWED";class i8 extends Ba{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}}i8.code="ERR_JOSE_NOT_SUPPORTED";class o8 extends Ba{constructor(e="decryption operation failed",n){super(e,n),this.code="ERR_JWE_DECRYPTION_FAILED"}}o8.code="ERR_JWE_DECRYPTION_FAILED";class s8 extends Ba{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}}s8.code="ERR_JWE_INVALID";class a8 extends Ba{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}}a8.code="ERR_JWS_INVALID";class Od extends Ba{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}}Od.code="ERR_JWT_INVALID";class l8 extends Ba{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}}l8.code="ERR_JWK_INVALID";class u8 extends Ba{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}}u8.code="ERR_JWKS_INVALID";class c8 extends Ba{constructor(e="no applicable key found in the JSON Web Key Set",n){super(e,n),this.code="ERR_JWKS_NO_MATCHING_KEY"}}c8.code="ERR_JWKS_NO_MATCHING_KEY";class f8 extends Ba{constructor(e="multiple matching keys found in the JSON Web Key Set",n){super(e,n),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}f8.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";class d8 extends Ba{constructor(e="request timed out",n){super(e,n),this.code="ERR_JWKS_TIMEOUT"}}d8.code="ERR_JWKS_TIMEOUT";class h8 extends Ba{constructor(e="signature verification failed",n){super(e,n),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}h8.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";function p8(t){return typeof t=="object"&&t!==null}function g8(t){if(!p8(t)||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}const m8=e8;function by(t){if(typeof t!="string")throw new Od("JWTs must use Compact JWS serialization, JWT must be a string");const{1:e,length:n}=t.split(".");if(n===5)throw new Od("Only JWTs using Compact JWS serialization can be decoded");if(n!==3)throw new Od("Invalid JWT");if(!e)throw new Od("JWTs must contain a payload");let r;try{r=m8(e)}catch{throw new Od("Failed to base64url decode the payload")}let i;try{i=JSON.parse(zR.decode(r))}catch{throw new Od("Failed to parse the decoded payload as JSON")}if(!g8(i))throw new Od("Invalid JWT Claims Set");return i}const y8="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let t0=(t=21)=>{let e="",n=crypto.getRandomValues(new Uint8Array(t));for(;t--;)e+=y8[n[t]&63];return e};function HR(t){return typeof t=="string"&&t.length>0?t:typeof t=="number"&&t>0?t.toString():null}const v8=(t,e,n)=>{const r=i=>{if(!Array.isArray(i.data)||i.data.length!==2)return;const[,o]=i.data,l=HR(i.data[0]),c=o.type??o._source;l===null||c===void 0||e({id:l,data:o},f=>f({id:l,type:c,source:i.source})?(i.stopImmediatePropagation(),!0):!1,()=>{t.removeEventListener("message",r,n)},i)};return t.addEventListener("message",r),()=>{t.removeEventListener("message",r,n)}},_8=(t,e,n,r)=>{if(t==null)return null;const i="id"in e?HR(e.id):t0();return t.postMessage([i,e],n,r),i};let Ey=null;async function b8(){try{const[t,e,n]=await Promise.all([Ki.getItem("managed:domain"),Ki.getItem("managed:stats_url"),Ki.getItem("managed:analytics_url")]);if(typeof t=="string"){WR(t,e,n);return}}catch(t){Re.error(t,"Error getting managed storage, setting up default env variables")}qR()}function GR(t){if(Ey==null){if(t.domain!=null){WR(t.domain,t.statsEndpoint,t.analyticsEndpoint);return}qR()}}function qR(){const t="lemonlearning.com";Ey={PLAYER_URL:`https://player.${t}`,EDITOR_URL:`https://editor.${t}`,ADMIN_URL:`https://admin.${t}`,STATIC_URL:`https://static.${t}`,LEMONSTATS_URL:"https://stats.lemonlearning.com",ANALYSE_URL:"https://ingress-analyze.production.main-eu-west-3.aws.lemonlearning.tech",IFRAME_BRIDGE_URL:`http://static.${t}`,API_URL:`https://api.${t}`,LEMON_AI_URL:`https://ai.${t}`}}function WR(t,e,n){if(typeof e!="string")throw new Error("Environment not properly configured: stats URL override is required.");const r=typeof n=="string"?n:null;Re.info(`Environment overrides detected. Using Domain: "${t}"; Stats URL: "${e}"; Analytics URL: ${r}"}.`),Ey={PLAYER_URL:`https://player.${t}`,EDITOR_URL:`https://editor.${t}`,ADMIN_URL:`https://admin.${t}`,STATIC_URL:`https://static.${t}`,LEMONSTATS_URL:e,ANALYSE_URL:r,IFRAME_BRIDGE_URL:`http://static.${t}`,API_URL:`https://api.${t}`,LEMON_AI_URL:`https://ai.${t}`}}function Ii(t){if(Ey==null)throw new Error("Environment variables have not been set up. Please call setupExtensionEnv or setupDirectEnv first.");return Ey[t]}const wy=()=>`${Ii("STATIC_URL")}/storage.html`,E8="ORIGIN_LEMON_FRAME_STORAGE",w8="RETURN_READ",n0=t0(),KR=new Set;function T8(t){const e=document.createElement("iframe");e.style.setProperty("display","none"),e.setAttribute("id",n0),e.setAttribute("src",wy()),e.addEventListener("load",t,{once:!0}),document.body.appendChild(e)}async function r0(){const t=document.getElementById(n0),e=(r,i)=>(KR.add(n0),r.target instanceof HTMLIFrameElement?i(r.target):i(null)),n=r=>{KR.has(n0)&&r(t),t?.addEventListener("load",i=>e(i,r),{once:!0})};return new Promise(r=>{t!==null?n(r):T8(i=>e(i,r))})}async function i0(t,e){await r0().then(n=>{const r=n?.contentWindow,i=JSON.stringify({action:"store",key:t,value:e});r?.postMessage(i,wy())})}function S8(t){try{return JSON.parse(t.data)}catch{return null}}async function o0(t){const n=(await r0())?.contentWindow,r=JSON.stringify({action:"read",key:t});return new Promise(i=>{const o=l=>{const c=S8(l);c?.origin===E8&&c?.action===w8&&c?.key===t&&(window.removeEventListener("message",o),i(c.value))};dy.addFilteredWindowListener(window,o,"IframeStorage.ts returnListener"),n?.postMessage(r,wy())})}async function s0(t){await r0().then(e=>{const n=e?.contentWindow,r=JSON.stringify({action:"remove",key:t});n?.postMessage(r,wy())})}async function YR(t,e){const n=await r0();return new Promise((r,i)=>{const o=_8(n?.contentWindow??null,{type:"fetch_v2",url:t,options:e},wy()),l=20,c=setTimeout(()=>{i(new Error(`Fetch through iframe timeout after ${l} seconds`))},l*1e3);v8(window,({data:f},g,y)=>{if(!g(({id:p,type:E})=>o===p&&E==="fetch_v2_result"))return;y();const h=f.response;if(clearTimeout(c),h===null)throw new Error("Response should not be null");"error"in h?i(new Gw(h)):r(h)})})}const Bc="lemonlearning-identity",A8=async(t=null)=>{if(ts()){try{await Ul.storage.sync.clear(),await Ul.storage.local.clear()}catch(e){Re.warn(e,"An error occurred while attempting to clear the cache",e)}return}await s0(t??Bc)};async function I8(t,e,n){if(ts()){await C8(e,n);return}await R8((t??Bc)+e,n)}async function C8(t,e){await Ki.setItem(`sync:${t}`,e)}async function R8(t,e){await i0(t,e)}async function x8(t,e){return ts()?await N8(e):await O8((t??Bc)+e)}async function N8(t){return await Ki.getItem(`sync:${t}`)}async function O8(t){return await o0(t).then(e=>e??null)}async function L8(t,e){if(ts()){await Ki.removeItem(`sync:${e}`);return}await s0((t??Bc)+e)}const Ld=async(t=null)=>{if(ts())try{const e=await Ki.getItem("sync:access_token");return e==null||typeof e!="string"?(Re.debug("No access token found, stopping LL features"),null):e}catch(e){return Re.error(e,"Error while reading access token from storage"),null}return await o0(t??Bc).then(e=>JSON.parse(e)).then(e=>e?.access_token??null)},qw=async(t,e=null)=>{if(ts()){await Ki.setItem("sync:access_token",t);return}await i0(e??Bc,JSON.stringify({access_token:t}))},a0=async(t=null)=>{if(Re.debug("Clearing cached access token from storage"),ts()){await Ki.removeItem("sync:access_token");return}await s0(t??Bc)},QR=t=>{try{const e=by(t);return e.exp==null?!1:e.exp>Date.now()/1e3}catch(e){return Re.warn(e,"Error while decoding JWT"),!1}};class D8 extends Error{constructor(){super('"Response body is empty"')}}let Ty=null,XR=null;no.on("set-player",function(t){"namespace"in t&&typeof t.namespace=="string"&&(XR=t.namespace)});async function P8(t,e){return YR(t,e)}async function JR(t,e){if(Ty===null&&(Ty=await Ld(XR)),Ty===null)throw new Mf;let n;try{n=by(Ty)}catch(i){throw Re.debug(i,"Error while decoding the access token"),new Mf}if(n.exp===void 0||n.exp<Date.now()/1e3)throw new Mf;const r=await YR(t,{...e,headers:{...e.headers,Authorization:`Bearer ${Ty}`}});if(r.status===401)throw new Mf;return r}async function M8(t,e,n){const r=await JR(t,e);if(typeof r.body>"u"||typeof r.body!="string")throw new D8;const o=new TextEncoder().encode(r.body);n(o)}let l0=null;const u0=async()=>(l0===null&&(l0=k8().finally(()=>{l0=null})),l0),k8=async()=>{try{const t=await c0(`${Ii("API_URL")}/v3/auth/refresh`,{method:"POST"});if(t.status===401)throw new Mf;if(t.status!==200)throw new Error("Unexpected error while fetching an access token");if(typeof t.body=="string")throw new Error("Unexpected string as a response body");const e=t.body.access_token;return by(e),await Ki.setItem("sync:access_token",e),e}catch(t){throw Re.error(t),new Mf}},F8=async()=>{const t=await Ki.getItem("sync:access_token");return typeof t=="string"?t:null};async function c0(t,e){const n=await Ul.runtime.sendMessage({action:"BACKGROUND_FETCH_V2",data:{url:t,options:e}});if("error"in n)throw new Gw(n);return n}async function $8(t,e,n){return new Promise((r,i)=>{const o=Ul.runtime.connect({name:"BACKGROUND_FETCH_STREAM"});o.onMessage.addListener(l=>{if(l.error!=null){o.disconnect(),i(new Error(l.error));return}if(l.done===!0){o.disconnect(),r();return}if(l.chunk){const c=new Uint8Array(l.chunk);n(c)}}),o.postMessage({action:"START_STREAM",data:{url:t,options:e}})})}async function U8(t,e){return c0(t,e)}async function B8(t,e){let n=await F8();n===null&&(n=await u0());try{const i=by(n);(i.exp===void 0||i.exp<Date.now()/1e3)&&(n=await u0())}catch(i){Re.debug(i,"Error while decoding the access token, refreshing it"),n=await u0()}let r=await c0(t,{...e,headers:{...e.headers,Authorization:`Bearer ${n}`}});return r.status===401&&(n=await u0(),r=await c0(t,{...e,headers:{...e.headers,Authorization:`Bearer ${n}`}})),r}const Sy=async(...t)=>ts()?await B8(...t):await JR(...t),Z8=async(...t)=>ts()?await $8(...t):await M8(...t),Dd=async(...t)=>ts()?await U8(...t):await P8(...t);var f0={exports:{}};function j8(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var d0={exports:{}};const V8=_4(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var z8=d0.exports,ex;function H8(){return ex||(ex=1,(function(t,e){(function(n,r){t.exports=r()})(z8,function(){var n=n||(function(r,i){var o;if(typeof window<"u"&&window.crypto&&(o=window.crypto),typeof self<"u"&&self.crypto&&(o=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(o=globalThis.crypto),!o&&typeof window<"u"&&window.msCrypto&&(o=window.msCrypto),!o&&typeof $a<"u"&&$a.crypto&&(o=$a.crypto),!o&&typeof j8=="function")try{o=V8}catch{}var l=function(){if(o){if(typeof o.getRandomValues=="function")try{return o.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof o.randomBytes=="function")try{return o.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},c=Object.create||(function(){function v(){}return function(T){var S;return v.prototype=T,S=new v,v.prototype=null,S}})(),f={},g=f.lib={},y=g.Base=(function(){return{extend:function(v){var T=c(this);return v&&T.mixIn(v),(!T.hasOwnProperty("init")||this.init===T.init)&&(T.init=function(){T.$super.init.apply(this,arguments)}),T.init.prototype=T,T.$super=this,T},create:function(){var v=this.extend();return v.init.apply(v,arguments),v},init:function(){},mixIn:function(v){for(var T in v)v.hasOwnProperty(T)&&(this[T]=v[T]);v.hasOwnProperty("toString")&&(this.toString=v.toString)},clone:function(){return this.init.prototype.extend(this)}}})(),h=g.WordArray=y.extend({init:function(v,T){v=this.words=v||[],T!=i?this.sigBytes=T:this.sigBytes=v.length*4},toString:function(v){return(v||E).stringify(this)},concat:function(v){var T=this.words,S=v.words,O=this.sigBytes,$=v.sigBytes;if(this.clamp(),O%4)for(var V=0;V<$;V++){var B=S[V>>>2]>>>24-V%4*8&255;T[O+V>>>2]|=B<<24-(O+V)%4*8}else for(var ne=0;ne<$;ne+=4)T[O+ne>>>2]=S[ne>>>2];return this.sigBytes+=$,this},clamp:function(){var v=this.words,T=this.sigBytes;v[T>>>2]&=4294967295<<32-T%4*8,v.length=r.ceil(T/4)},clone:function(){var v=y.clone.call(this);return v.words=this.words.slice(0),v},random:function(v){for(var T=[],S=0;S<v;S+=4)T.push(l());return new h.init(T,v)}}),p=f.enc={},E=p.Hex={stringify:function(v){for(var T=v.words,S=v.sigBytes,O=[],$=0;$<S;$++){var V=T[$>>>2]>>>24-$%4*8&255;O.push((V>>>4).toString(16)),O.push((V&15).toString(16))}return O.join("")},parse:function(v){for(var T=v.length,S=[],O=0;O<T;O+=2)S[O>>>3]|=parseInt(v.substr(O,2),16)<<24-O%8*4;return new h.init(S,T/2)}},A=p.Latin1={stringify:function(v){for(var T=v.words,S=v.sigBytes,O=[],$=0;$<S;$++){var V=T[$>>>2]>>>24-$%4*8&255;O.push(String.fromCharCode(V))}return O.join("")},parse:function(v){for(var T=v.length,S=[],O=0;O<T;O++)S[O>>>2]|=(v.charCodeAt(O)&255)<<24-O%4*8;return new h.init(S,T)}},_=p.Utf8={stringify:function(v){try{return decodeURIComponent(escape(A.stringify(v)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(v){return A.parse(unescape(encodeURIComponent(v)))}},I=g.BufferedBlockAlgorithm=y.extend({reset:function(){this._data=new h.init,this._nDataBytes=0},_append:function(v){typeof v=="string"&&(v=_.parse(v)),this._data.concat(v),this._nDataBytes+=v.sigBytes},_process:function(v){var T,S=this._data,O=S.words,$=S.sigBytes,V=this.blockSize,B=V*4,ne=$/B;v?ne=r.ceil(ne):ne=r.max((ne|0)-this._minBufferSize,0);var D=ne*V,X=r.min(D*4,$);if(D){for(var ve=0;ve<D;ve+=V)this._doProcessBlock(O,ve);T=O.splice(0,D),S.sigBytes-=X}return new h.init(T,X)},clone:function(){var v=y.clone.call(this);return v._data=this._data.clone(),v},_minBufferSize:0});g.Hasher=I.extend({cfg:y.extend(),init:function(v){this.cfg=this.cfg.extend(v),this.reset()},reset:function(){I.reset.call(this),this._doReset()},update:function(v){return this._append(v),this._process(),this},finalize:function(v){v&&this._append(v);var T=this._doFinalize();return T},blockSize:16,_createHelper:function(v){return function(T,S){return new v.init(S).finalize(T)}},_createHmacHelper:function(v){return function(T,S){return new C.HMAC.init(v,S).finalize(T)}}});var C=f.algo={};return f})(Math);return n})})(d0)),d0.exports}var G8=f0.exports,tx;function q8(){return tx||(tx=1,(function(t,e){(function(n,r){t.exports=r(H8())})(G8,function(n){return(function(r){var i=n,o=i.lib,l=o.WordArray,c=o.Hasher,f=i.algo,g=[];(function(){for(var _=0;_<64;_++)g[_]=r.abs(r.sin(_+1))*4294967296|0})();var y=f.MD5=c.extend({_doReset:function(){this._hash=new l.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(_,I){for(var C=0;C<16;C++){var v=I+C,T=_[v];_[v]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360}var S=this._hash.words,O=_[I+0],$=_[I+1],V=_[I+2],B=_[I+3],ne=_[I+4],D=_[I+5],X=_[I+6],ve=_[I+7],ie=_[I+8],ye=_[I+9],Ne=_[I+10],Me=_[I+11],oe=_[I+12],Ce=_[I+13],Ye=_[I+14],et=_[I+15],Y=S[0],Ee=S[1],Pe=S[2],Xe=S[3];Y=h(Y,Ee,Pe,Xe,O,7,g[0]),Xe=h(Xe,Y,Ee,Pe,$,12,g[1]),Pe=h(Pe,Xe,Y,Ee,V,17,g[2]),Ee=h(Ee,Pe,Xe,Y,B,22,g[3]),Y=h(Y,Ee,Pe,Xe,ne,7,g[4]),Xe=h(Xe,Y,Ee,Pe,D,12,g[5]),Pe=h(Pe,Xe,Y,Ee,X,17,g[6]),Ee=h(Ee,Pe,Xe,Y,ve,22,g[7]),Y=h(Y,Ee,Pe,Xe,ie,7,g[8]),Xe=h(Xe,Y,Ee,Pe,ye,12,g[9]),Pe=h(Pe,Xe,Y,Ee,Ne,17,g[10]),Ee=h(Ee,Pe,Xe,Y,Me,22,g[11]),Y=h(Y,Ee,Pe,Xe,oe,7,g[12]),Xe=h(Xe,Y,Ee,Pe,Ce,12,g[13]),Pe=h(Pe,Xe,Y,Ee,Ye,17,g[14]),Ee=h(Ee,Pe,Xe,Y,et,22,g[15]),Y=p(Y,Ee,Pe,Xe,$,5,g[16]),Xe=p(Xe,Y,Ee,Pe,X,9,g[17]),Pe=p(Pe,Xe,Y,Ee,Me,14,g[18]),Ee=p(Ee,Pe,Xe,Y,O,20,g[19]),Y=p(Y,Ee,Pe,Xe,D,5,g[20]),Xe=p(Xe,Y,Ee,Pe,Ne,9,g[21]),Pe=p(Pe,Xe,Y,Ee,et,14,g[22]),Ee=p(Ee,Pe,Xe,Y,ne,20,g[23]),Y=p(Y,Ee,Pe,Xe,ye,5,g[24]),Xe=p(Xe,Y,Ee,Pe,Ye,9,g[25]),Pe=p(Pe,Xe,Y,Ee,B,14,g[26]),Ee=p(Ee,Pe,Xe,Y,ie,20,g[27]),Y=p(Y,Ee,Pe,Xe,Ce,5,g[28]),Xe=p(Xe,Y,Ee,Pe,V,9,g[29]),Pe=p(Pe,Xe,Y,Ee,ve,14,g[30]),Ee=p(Ee,Pe,Xe,Y,oe,20,g[31]),Y=E(Y,Ee,Pe,Xe,D,4,g[32]),Xe=E(Xe,Y,Ee,Pe,ie,11,g[33]),Pe=E(Pe,Xe,Y,Ee,Me,16,g[34]),Ee=E(Ee,Pe,Xe,Y,Ye,23,g[35]),Y=E(Y,Ee,Pe,Xe,$,4,g[36]),Xe=E(Xe,Y,Ee,Pe,ne,11,g[37]),Pe=E(Pe,Xe,Y,Ee,ve,16,g[38]),Ee=E(Ee,Pe,Xe,Y,Ne,23,g[39]),Y=E(Y,Ee,Pe,Xe,Ce,4,g[40]),Xe=E(Xe,Y,Ee,Pe,O,11,g[41]),Pe=E(Pe,Xe,Y,Ee,B,16,g[42]),Ee=E(Ee,Pe,Xe,Y,X,23,g[43]),Y=E(Y,Ee,Pe,Xe,ye,4,g[44]),Xe=E(Xe,Y,Ee,Pe,oe,11,g[45]),Pe=E(Pe,Xe,Y,Ee,et,16,g[46]),Ee=E(Ee,Pe,Xe,Y,V,23,g[47]),Y=A(Y,Ee,Pe,Xe,O,6,g[48]),Xe=A(Xe,Y,Ee,Pe,ve,10,g[49]),Pe=A(Pe,Xe,Y,Ee,Ye,15,g[50]),Ee=A(Ee,Pe,Xe,Y,D,21,g[51]),Y=A(Y,Ee,Pe,Xe,oe,6,g[52]),Xe=A(Xe,Y,Ee,Pe,B,10,g[53]),Pe=A(Pe,Xe,Y,Ee,Ne,15,g[54]),Ee=A(Ee,Pe,Xe,Y,$,21,g[55]),Y=A(Y,Ee,Pe,Xe,ie,6,g[56]),Xe=A(Xe,Y,Ee,Pe,et,10,g[57]),Pe=A(Pe,Xe,Y,Ee,X,15,g[58]),Ee=A(Ee,Pe,Xe,Y,Ce,21,g[59]),Y=A(Y,Ee,Pe,Xe,ne,6,g[60]),Xe=A(Xe,Y,Ee,Pe,Me,10,g[61]),Pe=A(Pe,Xe,Y,Ee,V,15,g[62]),Ee=A(Ee,Pe,Xe,Y,ye,21,g[63]),S[0]=S[0]+Y|0,S[1]=S[1]+Ee|0,S[2]=S[2]+Pe|0,S[3]=S[3]+Xe|0},_doFinalize:function(){var _=this._data,I=_.words,C=this._nDataBytes*8,v=_.sigBytes*8;I[v>>>5]|=128<<24-v%32;var T=r.floor(C/4294967296),S=C;I[(v+64>>>9<<4)+15]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,I[(v+64>>>9<<4)+14]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,_.sigBytes=(I.length+1)*4,this._process();for(var O=this._hash,$=O.words,V=0;V<4;V++){var B=$[V];$[V]=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360}return O},clone:function(){var _=c.clone.call(this);return _._hash=this._hash.clone(),_}});function h(_,I,C,v,T,S,O){var $=_+(I&C|~I&v)+T+O;return($<<S|$>>>32-S)+I}function p(_,I,C,v,T,S,O){var $=_+(I&v|C&~v)+T+O;return($<<S|$>>>32-S)+I}function E(_,I,C,v,T,S,O){var $=_+(I^C^v)+T+O;return($<<S|$>>>32-S)+I}function A(_,I,C,v,T,S,O){var $=_+(C^(I|~v))+T+O;return($<<S|$>>>32-S)+I}i.MD5=c._createHelper(y),i.HmacMD5=c._createHmacHelper(y)})(Math),n.MD5})})(f0)),f0.exports}var W8=q8();const Ay=Lf(W8),K8=t=>{try{const n=(Array.isArray(t)?t[1]:t.split(".")[1]).replace("-","+").replace("_","/");return JSON.parse(window.atob(n))}catch(e){return Re.error(e),null}},ug="ll_authentication_args_hash",nx=async(t,e)=>{if(ts()){await Ki.setItem(`sync:${ug}`,e);return}await i0((t??Bc)+ug,e)},rx=async t=>ts()?await Ki.getItem(`sync:${ug}`)??null:await o0((t??Bc)+ug).then(e=>e??null),Y8=async t=>{if(ts()){await Ki.removeItem(`sync:${ug}`);return}await s0((t??Bc)+ug)};function Q8(t){const e=bn.union([bn.object({status:bn.literal(200),body:bn.object({access_token:bn.string()})}),bn.object({status:bn.union([bn.literal(400),bn.literal(403)]),body:bn.object({message:bn.string()})})]);try{return e.parse(t)}catch(n){throw new Error(JSON.stringify(n))}}const X8=async({companyKey:t,projectKey:e,userToken:n,namespace:r})=>{const i="ca412f6c-9212-4d15-9ded-449b55e342d7",[o,l]=await Promise.all([Ld(r),rx(r)]),c=Ay(JSON.stringify({companyKey:t,projectKey:e,userToken:n})).toString();if(c===l&&o!==null&&QR(o)&&h(o)!==i)return o;const f={user_key:n};if(e!=null?f.project_key=e:t!=null&&(f.company_key=t),o!=null){const p=h(o);p!=null&&p!==i&&(f.impersonator_id=p)}const g=await Dd(`${Ii("API_URL")}/v3/auth/impersonate`,{method:"POST",body:JSON.stringify(f),headers:{"Content-Type":"application/json"}}),y=Q8(g);if(y.status!==200)throw new Error(`Error (${y.status}): "${y.body.message}"`);return nx(r,c),y.body.access_token;function h(p){try{const{impersonator_uuid:E,uuid:A}=by(p);return typeof E=="string"&&E!==""?E:typeof A=="string"&&A!==""?A:null}catch{return null}}},J8=async t=>{const e=await x8(t.namespace??null,"ll-autoauth-hashed-email");return e===null?t.email!==null:Ay(t.email).toString()!==e},ix=async t=>{const e=Ay(t.email).toString();await I8(t.namespace??null,"ll-autoauth-hashed-email",e)},e$=async t=>{await L8(t.namespace??null,"ll-autoauth-hashed-email")},t$=async t=>{const e=ox(t);await nx(t.namespace??null,e)},ox=t=>{const e={name:t.name,tags:t.tags,profiles:t.profiles},n=JSON.stringify(e);return Ay(n).toString()},n$=async t=>{const e=ox(t),n=await rx(t.namespace??null);return e!==n},r$=async t=>{await Y8(t.namespace??null)};class cg extends Error{}class sx extends cg{constructor(e,n){super(`Error while trying to login: "${n}" (${e})`)}}class i$ extends cg{constructor(e,n){super(`Error while trying to sign up: "${n}" (${e})`)}}class ax extends sx{constructor(){super(404,"User not found")}}async function o$(t){const e=await Dd(`${Ii("API_URL")}/v3/no-password-project/auth/login`,{method:"POST",body:JSON.stringify({project_key:t.projectKey,email_address:t.email}),headers:{"Content-Type":"application/json"}});if(s$(e))throw e.status===404?new ax:new sx(e.status,e.body.message);return e}function s$(t){return t.status!==200}async function a$(t){const e=await Dd(`${Ii("API_URL")}/v3/no-password-project/auth/signup`,{method:"POST",body:JSON.stringify({project_key:t.projectKey,email_address:t.email,full_name:t.name}),headers:{"Content-Type":"application/json"}});if(l$(e))throw new i$(e.status,e.body.message);return e}function l$(t){return t.status!==201}async function u$(t){try{const e=await Sy(`${Ii("API_URL")}/v3/no-password-project/user/me`,{method:"PATCH",body:JSON.stringify({project_key:t.projectKey,full_name:t.name,profile_ids:c$(t.profiles),tags:f$(t.tags)}),headers:{"Content-Type":"application/json"}});if(e.status!==200)throw new cg(`Request to update user profile failed with status ${e.status}`)}catch(e){throw e instanceof cg?e:e instanceof Gw?new cg(`Request to update user profile failed: "${e.message}"`):new cg(`Error while trying to update user profile: "${e.message}"`)}}function c$(t){return t.filter(e=>e!==0)}function f$(t){return t.reduce((e,n)=>[...e,...n.values.map(r=>({category_name:n.category,tag_value:r})).filter(r=>r.tag_value!=="")],[])}const d$=async t=>{const e=await Ld(t.namespace);return e!==null&&QR(e)?(Re.info("AutoAuth: the cached access token is still valid."),await J8(t)?(Re.info("AutoAuth: the user email has changed. Logging in again."),Ww(t)):await ux(t)?(Re.info("AutoAuth: User profile update failed, retrying authentication"),Ww(t)):e):Ww(t)},lx=async t=>{await r$(t),await e$(t),await a0(t.namespace)},ux=async t=>{if(await n$(t))try{return await cx(t),!1}catch(e){return await lx(t),Re.error("Failed to update user profile, will retry authentication",e),!0}return!1},Ww=async t=>{try{return await h$(t)}catch(e){if(e instanceof ax)return p$(t);throw e}},h$=async t=>{Re.info("AutoAuth: Trying to login user with credentials",{credentials:t});const e=await o$(t);return await qw(e.body.content.access_token,t.namespace),await ix(t),await ux(t),e.body.partial_results.has_license||Re.warn("AutoAuth: User doesn't have a license. Login successful but no content is available."),e.body.content.access_token},cx=async t=>{Re.info("Some user properties have changed (name/tags/profiles). Updating user with credentials",{credentials:t}),await u$(t),await t$(t)},p$=async t=>{Re.info("AutoAuth: Login failed, user doesn't exist. Trying to sign up with credentials",{credentials:t});const e=await a$(t);await qw(e.body.content.access_token,t.namespace),await ix(t);try{await cx(t)}catch(n){throw Re.error("Failed to update user profile during signup, clearing all authentication cache",n),await lx(t),n}return e.body.partial_results.has_license||Re.warn("AutoAuth: User doesn't have a license. Signup successful but no content is available."),e.body.content.access_token};function fx(t,e,n=[]){if(typeof t=="object")for(const r in t)fx(t[r],e!=null?e+"["+r+"]":r,n);else n.push((e??"")+"="+encodeURIComponent(t));return n.join("&")}function g$(t){const e=bn.union([bn.object({status:bn.literal(200),body:bn.object({access_token:bn.string()})}),bn.object({status:bn.literal(401),body:bn.object({error:bn.string()})})]);try{return e.parse(t)}catch(n){throw new Error(JSON.stringify(n))}}const m$=async({email:t,password:e,namespace:n=null})=>{const r=await Ld(n),i={email:t,password:e};r!=null&&(i.access_token=r);const o=await Dd(`${Ii("PLAYER_URL")}/login?method=basic`,{method:"POST",body:fx(i),headers:{"Content-Type":"application/x-www-form-urlencoded"}}),l=g$(o);if(l.status!==200)throw new Error(`Error (${l.status}): "${l.body.error}"`);return l.body.access_token},y$=async()=>{await Sy(`${Ii("PLAYER_URL")}/logout`,{method:"POST",headers:{Accept:"application/json"}}).then(t=>{if(t.status!==204)throw new Eu({expected:204,received:t.status})})},dx=t=>{if(!("data"in t)||typeof t.data!="string")return;let e=null;try{e=JSON.parse(t.data)}catch{return}if(!(e.origin!=="PLAYER_SSO"||e.action!=="RETURN_SSO_LOGIN"))return e.data.access_token?(Re.debug("SSO Login Success"),e.data.access_token):(Re.error("SSO Login Failed",e.data),null)},v$=(t,e)=>{xe.useEffect(()=>{const n=r=>{const i=dx(r);i&&(e(i),window.removeEventListener("message",n))};return dy.addFilteredWindowListener(window,n,"useHandleSSOReturn.ts"),()=>{window.removeEventListener("message",n)}},[t,e])};function _$(){const{config:t}=zs(),[e,n]=xe.useState(null),r=xe.useCallback(()=>{n(null),a0(t.namespace)},[t.namespace]),i=xe.useCallback(o=>{n(o),o!==null?qw(o,t.namespace).then(()=>{ts()&&Ki.removeItem("sync:hostsCache")}):a0(t.namespace)},[t.namespace]);return{accessToken:e,removeAccessToken:r,setAccessToken:i}}function hx(t){return t.user instanceof Xp}function b$(t){return{projectKey:t.projectKey,companyKey:t.companyKey,userToken:t.user.token,namespace:t.namespace}}function px(t){const e=t.user;return typeof e=="object"&&e!==null&&"name"in e&&"email"in e&&"profiles"in e&&"tags"in e}function E$(t){return{projectKey:t.projectKey,name:t.user.name,email:t.user.email,profiles:t.user.profiles,tags:t.user.tags,namespace:t.namespace}}const gx=Vs.createContext({isAuthenticated:!1,accessToken:null,removeAccessToken:()=>{},decodedAccessToken:null,userId:null,userUuid:null,impersonatorUuid:null,profileAndTagsHash:null,logout:async()=>{},authenticateWithEmailPassword:async()=>{},authType:"email-password"}),w$=({children:t})=>{const{accessToken:e,setAccessToken:n,removeAccessToken:r}=_$(),[i,o]=Vs.useState(!1),l=Qu(),{config:c}=zs(),[f,g]=Vs.useState(null),y=xe.useCallback(async(I,C)=>{Re.trace("Logging with email/password",I),await m$({email:I,password:C,namespace:c.namespace}).then(v=>{n(v),o(!0)}).catch(v=>{throw Re.error(v,"An error occurred while logging with email/password"),v})},[c.namespace,n]),h=xe.useCallback(async()=>{Re.trace("Logout"),y$().then(async()=>{r(),await A8(c.namespace)}).catch(I=>{throw Re.error(I,"An error occurred while logging out"),I})},[c.namespace,r]),p=xe.useMemo(()=>{if(hx(c))return"anonymous";if(px(c))return"auto-auth";if(I(c))return"sso";return"email-password";function I(C){return C.ssoId!==null}},[c]);xe.useEffect(()=>{if(hx(c)){const I=b$(c);Re.trace("Logging anonymously",{credentials:I}),X8(I).then(C=>{n(C),o(!0)}).catch(C=>{Re.error(C,"An error occurred while logging anonymously")});return}if(px(c)){const I=E$(c);Re.trace("Logging automatically",{credentials:I}),d$(I).then(C=>{const v=I.profiles.join(","),T=I.tags.map(S=>`${S.category}=${S.values.join(",")}`).join(",");l.invalidateQueries({queryKey:["sections"]}),l.invalidateQueries({queryKey:["tooltipsGroups"]}),l.invalidateQueries({queryKey:["library"]}),g(Ay(`${v}-${T}`).toString()),n(C),o(!0)}).catch(C=>{Re.error(C,"An error occurred while logging automatically")});return}Ld(c.namespace).then(I=>{n(I),o(!0)}).catch(I=>{Re.error(I,"An error occurred while getting the access token from the cache")})},[c,l,n]),xe.useEffect(()=>{no.on("logout",I);function I(){h().catch(Re.error)}return()=>{no.removeListener("logout",I)}},[h]),v$(c.namespace,n);const E=e!==null,A=xe.useRef(!1);xe.useEffect(()=>{A.current!==E&&!E&&no.trigger("logged-out"),A.current=E},[E]);const _=Vs.useMemo(()=>{const I=e===null?null:K8(e);return{isAuthenticated:E,accessToken:e,removeAccessToken:r,profileAndTagsHash:f,decodedAccessToken:I,userId:I?.sub?.split(":")[2]??null,userUuid:I?.uuid??null,impersonatorUuid:I?.impersonator_uuid??null,logout:h,authenticateWithEmailPassword:y,authType:p}},[E,e,r,f,h,y,p]);return i?pe.jsx(gx.Provider,{value:_,children:t}):null};function ms(){const t=xe.useContext(gx);if(t===void 0)throw new Error("useAuthentication must be used within a AuthenticationProvider");return t}const Za=()=>{const{removeAccessToken:t}=ms(),{config:e}=zs(),n=e.user instanceof Xp;return xe.useCallback(async(i,o)=>{try{return await Sy(i,o)}catch(l){throw l instanceof Mf&&!n&&t(),l}},[t,n])};function T$(t){return S$(t)}function S$(t){return t.client_side_conditions.some(e=>A$(e))}function A$(t){return["equals","contains","regex"].includes(t.type)&&["url","url_host","url_path","url_query","url_fragment"].includes(t.target)}function I$(t){return t.reduce((e,n)=>T$(n)?[...e,n]:(Re.error(`The tool "${n.name}" with id (${n.id}) is not valid. Please verify that it has been configured correctly. Full dump of the tool: "${JSON.stringify(n)}"`),e),[])}const mx=(t,e)=>{let n,r=t.pattern;switch(t.target){case"url":n=e.endsWith("/")?e.slice(0,-1):e;break;case"url_host":n=new URL(e).host;break;case"url_path":n=new URL(e).pathname;break;case"url_query":n=new URL(e).search;break;case"url_fragment":n=new URL(e).hash;break;case"document_body":return!1}let i=null;try{i=new RegExp(r)}catch{}switch(t.case_sensitive||(n=n.toLowerCase(),r=r.toLowerCase(),i!==null&&(i=new RegExp(r,"i"))),t.type){case"equals":return n===r;case"not_equals":return n!==r;case"contains":return n.includes(r);case"not_contains":return!n.includes(r);case"regex":return i?.test(n)??!1;case"not_regex":return!(i?.test(n)??!1)}};function yx(t){return t.type==="not_equals"||t.type==="not_contains"||t.type==="not_regex"}function Pd(t,e){if(t.length===0)return!0;const n=t.filter(yx)??[];return(t.filter(i=>!yx(i))??[]).some(i=>mx(i,e))&&n.every(i=>mx(i,e))}class Md{constructor(e=1){this.score=e,this.history=[]}get value(){return this.score}increment(e,n,r){const i=this.score+e;this.trace({value:e,before:this.score,after:i,type:"increment",source:n,context:r}),this.score=i}incrementWithScore(e,n,r){this.increment(e.value,n,r)}multiply(e,n,r){const i=this.score*e;this.trace({value:e,before:this.score,after:i,type:"multiply",source:n,context:r}),this.score=i}multiplyWithScore(e,n,r){this.multiply(e.value,n,r)}copy(){return new Md(this.score)}trace({value:e,before:n,after:r,type:i,source:o,context:l}){this.history.push({value:e,before:n,after:r,type:i,source:o,context:l})}}class h0{constructor(e,n){this._element=e,this._score=n instanceof Md?n:new Md(n)}get score(){return this._score}get element(){return this._element}}const C$="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let ja=(t=21)=>{let e="",n=crypto.getRandomValues(new Uint8Array(t|=0));for(;t--;)e+=C$[n[t]&63];return e};const vx={width:0,height:0,top:0,left:0,right:0,bottom:0,x:0,y:0},p0=HI;class R$ extends Error{constructor(e){super(e),this.name="CrossFrameCommunicationError"}}class _x extends R${constructor(e){super(`Message timed out after ${e}ms`),this.name="MessageTimedOutBeforeResponse"}}var Hi;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const o={};for(const l of i)o[l]=l;return o},t.getValidEnumValues=i=>{const o=t.objectKeys(i).filter(c=>typeof i[i[c]]!="number"),l={};for(const c of o)l[c]=i[c];return t.objectValues(l)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const o=[];for(const l in i)Object.prototype.hasOwnProperty.call(i,l)&&o.push(l);return o},t.find=(i,o)=>{for(const l of i)if(o(l))return l},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,o=" | "){return i.map(l=>typeof l=="string"?`'${l}'`:l).join(o)}t.joinValues=r,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(Hi||(Hi={}));var Kw;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Kw||(Kw={}));const hr=Hi.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),kd=t=>{switch(typeof t){case"undefined":return hr.undefined;case"string":return hr.string;case"number":return isNaN(t)?hr.nan:hr.number;case"boolean":return hr.boolean;case"function":return hr.function;case"bigint":return hr.bigint;case"symbol":return hr.symbol;case"object":return Array.isArray(t)?hr.array:t===null?hr.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?hr.promise:typeof Map<"u"&&t instanceof Map?hr.map:typeof Set<"u"&&t instanceof Set?hr.set:typeof Date<"u"&&t instanceof Date?hr.date:hr.object;default:return hr.unknown}},Jn=Hi.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),x$=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");let Xu=class D3 extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(o){return o.message},r={_errors:[]},i=o=>{for(const l of o.issues)if(l.code==="invalid_union")l.unionErrors.map(i);else if(l.code==="invalid_return_type")i(l.returnTypeError);else if(l.code==="invalid_arguments")i(l.argumentsError);else if(l.path.length===0)r._errors.push(n(l));else{let c=r,f=0;for(;f<l.path.length;){const g=l.path[f];f===l.path.length-1?(c[g]=c[g]||{_errors:[]},c[g]._errors.push(n(l))):c[g]=c[g]||{_errors:[]},c=c[g],f++}}};return i(this),r}static assert(e){if(!(e instanceof D3))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Hi.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}};Xu.create=t=>new Xu(t);const fg=(t,e)=>{let n;switch(t.code){case Jn.invalid_type:t.received===hr.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Jn.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Hi.jsonStringifyReplacer)}`;break;case Jn.unrecognized_keys:n=`Unrecognized key(s) in object: ${Hi.joinValues(t.keys,", ")}`;break;case Jn.invalid_union:n="Invalid input";break;case Jn.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Hi.joinValues(t.options)}`;break;case Jn.invalid_enum_value:n=`Invalid enum value. Expected ${Hi.joinValues(t.options)}, received '${t.received}'`;break;case Jn.invalid_arguments:n="Invalid function arguments";break;case Jn.invalid_return_type:n="Invalid function return type";break;case Jn.invalid_date:n="Invalid date";break;case Jn.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Hi.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Jn.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Jn.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Jn.custom:n="Invalid input";break;case Jn.invalid_intersection_types:n="Intersection results could not be merged";break;case Jn.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Jn.not_finite:n="Number must be finite";break;default:n=e.defaultError,Hi.assertNever(t)}return{message:n}};let bx=fg;function N$(t){bx=t}function g0(){return bx}const m0=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,o=[...n,...i.path||[]],l={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let c="";const f=r.filter(g=>!!g).slice().reverse();for(const g of f)c=g(l,{data:e,defaultError:c}).message;return{...i,path:o,message:c}},O$=[];function ur(t,e){const n=g0(),r=m0({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===fg?void 0:fg].filter(i=>!!i)});t.common.issues.push(r)}class va{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return Qr;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const o=await i.key,l=await i.value;r.push({key:o,value:l})}return va.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:o,value:l}=i;if(o.status==="aborted"||l.status==="aborted")return Qr;o.status==="dirty"&&e.dirty(),l.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof l.value<"u"||i.alwaysSet)&&(r[o.value]=l.value)}return{status:e.value,value:r}}}const Qr=Object.freeze({status:"aborted"}),dg=t=>({status:"dirty",value:t}),Va=t=>({status:"valid",value:t}),Yw=t=>t.status==="aborted",Qw=t=>t.status==="dirty",Iy=t=>t.status==="valid",Cy=t=>typeof Promise<"u"&&t instanceof Promise;function y0(t,e,n,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function Ex(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}typeof SuppressedError=="function"&&SuppressedError;var Nr;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Nr||(Nr={}));var Ry,xy;class Zc{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const wx=(t,e)=>{if(Iy(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Xu(t.common.issues);return this._error=n,this._error}}};function fi(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(l,c)=>{var f,g;const{message:y}=t;return l.code==="invalid_enum_value"?{message:y??c.defaultError}:typeof c.data>"u"?{message:(f=y??r)!==null&&f!==void 0?f:c.defaultError}:l.code!=="invalid_type"?{message:c.defaultError}:{message:(g=y??n)!==null&&g!==void 0?g:c.defaultError}},description:i}}let mi=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return kd(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:kd(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new va,ctx:{common:e.parent.common,data:e.data,parsedType:kd(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Cy(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const i={common:{issues:[],async:(r=n?.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:kd(e)},o=this._parseSync({data:e,path:i.path,parent:i});return wx(i,o)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:kd(e)},i=this._parse({data:e,path:r.path,parent:r}),o=await(Cy(i)?i:Promise.resolve(i));return wx(r,o)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,o)=>{const l=e(i),c=()=>o.addIssue({code:Jn.custom,...r(i)});return typeof Promise<"u"&&l instanceof Promise?l.then(f=>f?!0:(c(),!1)):l?!0:(c(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Ju({schema:this,typeName:Wr.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Vc.create(this,this._def)}nullable(){return $d.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Bh.create(this,this._def)}promise(){return yg.create(this,this._def)}or(e){return Py.create([this,e],this._def)}and(e){return My.create(this,e,this._def)}transform(e){return new Ju({...fi(this._def),schema:this,typeName:Wr.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Zy({...fi(this._def),innerType:this,defaultValue:n,typeName:Wr.ZodDefault})}brand(){return new e1({typeName:Wr.ZodBranded,type:this,...fi(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new jy({...fi(this._def),innerType:this,catchValue:n,typeName:Wr.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Vy.create(this,e)}readonly(){return zy.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}};const L$=/^c[^\s-]{8,}$/i,D$=/^[0-9a-z]+$/,P$=/^[0-9A-HJKMNP-TV-Z]{26}$/,M$=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,k$=/^[a-z0-9_-]{21}$/i,F$=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,$$=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,U$="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Xw;const B$=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Z$=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,j$=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Tx="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",V$=new RegExp(`^${Tx}$`);function Sx(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function z$(t){return new RegExp(`^${Sx(t)}$`)}function Ax(t){let e=`${Tx}T${Sx(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function H$(t,e){return!!((e==="v4"||!e)&&B$.test(t)||(e==="v6"||!e)&&Z$.test(t))}let hg=class L_ extends mi{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==hr.string){const o=this._getOrReturnCtx(e);return ur(o,{code:Jn.invalid_type,expected:hr.string,received:o.parsedType}),Qr}const r=new va;let i;for(const o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),ur(i,{code:Jn.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),ur(i,{code:Jn.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){const l=e.data.length>o.value,c=e.data.length<o.value;(l||c)&&(i=this._getOrReturnCtx(e,i),l?ur(i,{code:Jn.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):c&&ur(i,{code:Jn.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")$$.test(e.data)||(i=this._getOrReturnCtx(e,i),ur(i,{validation:"email",code:Jn.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")Xw||(Xw=new RegExp(U$,"u")),Xw.test(e.data)||(i=this._getOrReturnCtx(e,i),ur(i,{validation:"emoji",code:Jn.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")M$.test(e.data)||(i=this._getOrReturnCtx(e,i),ur(i,{validation:"uuid",code:Jn.invalid_string,message:o.message}),r.dirty());else if(o.kind==="nanoid")k$.test(e.data)||(i=this._getOrReturnCtx(e,i),ur(i,{validation:"nanoid",code:Jn.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")L$.test(e.data)||(i=this._getOrReturnCtx(e,i),ur(i,{validation:"cuid",code:Jn.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")D$.test(e.data)||(i=this._getOrReturnCtx(e,i),ur(i,{validation:"cuid2",code:Jn.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")P$.test(e.data)||(i=this._getOrReturnCtx(e,i),ur(i,{validation:"ulid",code:Jn.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),ur(i,{validation:"url",code:Jn.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),ur(i,{validation:"regex",code:Jn.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),ur(i,{code:Jn.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),ur(i,{code:Jn.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),ur(i,{code:Jn.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?Ax(o).test(e.data)||(i=this._getOrReturnCtx(e,i),ur(i,{code:Jn.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="date"?V$.test(e.data)||(i=this._getOrReturnCtx(e,i),ur(i,{code:Jn.invalid_string,validation:"date",message:o.message}),r.dirty()):o.kind==="time"?z$(o).test(e.data)||(i=this._getOrReturnCtx(e,i),ur(i,{code:Jn.invalid_string,validation:"time",message:o.message}),r.dirty()):o.kind==="duration"?F$.test(e.data)||(i=this._getOrReturnCtx(e,i),ur(i,{validation:"duration",code:Jn.invalid_string,message:o.message}),r.dirty()):o.kind==="ip"?H$(e.data,o.version)||(i=this._getOrReturnCtx(e,i),ur(i,{validation:"ip",code:Jn.invalid_string,message:o.message}),r.dirty()):o.kind==="base64"?j$.test(e.data)||(i=this._getOrReturnCtx(e,i),ur(i,{validation:"base64",code:Jn.invalid_string,message:o.message}),r.dirty()):Hi.assertNever(o);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:Jn.invalid_string,...Nr.errToObj(r)})}_addCheck(e){return new L_({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Nr.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Nr.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Nr.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Nr.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Nr.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Nr.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Nr.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Nr.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Nr.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Nr.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(n=e?.offset)!==null&&n!==void 0?n:!1,local:(r=e?.local)!==null&&r!==void 0?r:!1,...Nr.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Nr.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Nr.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Nr.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...Nr.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Nr.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Nr.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Nr.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Nr.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Nr.errToObj(n)})}nonempty(e){return this.min(1,Nr.errToObj(e))}trim(){return new L_({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new L_({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new L_({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}};hg.create=t=>{var e;return new hg({checks:[],typeName:Wr.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...fi(t)})};function G$(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,o=parseInt(t.toFixed(i).replace(".","")),l=parseInt(e.toFixed(i).replace(".",""));return o%l/Math.pow(10,i)}let Ny=class NI extends mi{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==hr.number){const o=this._getOrReturnCtx(e);return ur(o,{code:Jn.invalid_type,expected:hr.number,received:o.parsedType}),Qr}let r;const i=new va;for(const o of this._def.checks)o.kind==="int"?Hi.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),ur(r,{code:Jn.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),ur(r,{code:Jn.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),ur(r,{code:Jn.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?G$(e.data,o.value)!==0&&(r=this._getOrReturnCtx(e,r),ur(r,{code:Jn.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),ur(r,{code:Jn.not_finite,message:o.message}),i.dirty()):Hi.assertNever(o);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Nr.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Nr.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Nr.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Nr.toString(n))}setLimit(e,n,r,i){return new NI({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Nr.toString(i)}]})}_addCheck(e){return new NI({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Nr.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Nr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Nr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Nr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Nr.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Nr.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Nr.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Nr.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Nr.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Hi.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}};Ny.create=t=>new Ny({checks:[],typeName:Wr.ZodNumber,coerce:t?.coerce||!1,...fi(t)});class Fd extends mi{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==hr.bigint){const o=this._getOrReturnCtx(e);return ur(o,{code:Jn.invalid_type,expected:hr.bigint,received:o.parsedType}),Qr}let r;const i=new va;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),ur(r,{code:Jn.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),ur(r,{code:Jn.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),ur(r,{code:Jn.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):Hi.assertNever(o);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Nr.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Nr.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Nr.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Nr.toString(n))}setLimit(e,n,r,i){return new Fd({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Nr.toString(i)}]})}_addCheck(e){return new Fd({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Nr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Nr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Nr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Nr.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Nr.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Fd.create=t=>{var e;return new Fd({checks:[],typeName:Wr.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...fi(t)})};class Oy extends mi{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==hr.boolean){const r=this._getOrReturnCtx(e);return ur(r,{code:Jn.invalid_type,expected:hr.boolean,received:r.parsedType}),Qr}return Va(e.data)}}Oy.create=t=>new Oy({typeName:Wr.ZodBoolean,coerce:t?.coerce||!1,...fi(t)});class $h extends mi{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==hr.date){const o=this._getOrReturnCtx(e);return ur(o,{code:Jn.invalid_type,expected:hr.date,received:o.parsedType}),Qr}if(isNaN(e.data.getTime())){const o=this._getOrReturnCtx(e);return ur(o,{code:Jn.invalid_date}),Qr}const r=new va;let i;for(const o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),ur(i,{code:Jn.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),ur(i,{code:Jn.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):Hi.assertNever(o);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new $h({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Nr.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Nr.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}$h.create=t=>new $h({checks:[],coerce:t?.coerce||!1,typeName:Wr.ZodDate,...fi(t)});class v0 extends mi{_parse(e){if(this._getType(e)!==hr.symbol){const r=this._getOrReturnCtx(e);return ur(r,{code:Jn.invalid_type,expected:hr.symbol,received:r.parsedType}),Qr}return Va(e.data)}}v0.create=t=>new v0({typeName:Wr.ZodSymbol,...fi(t)});class Ly extends mi{_parse(e){if(this._getType(e)!==hr.undefined){const r=this._getOrReturnCtx(e);return ur(r,{code:Jn.invalid_type,expected:hr.undefined,received:r.parsedType}),Qr}return Va(e.data)}}Ly.create=t=>new Ly({typeName:Wr.ZodUndefined,...fi(t)});class Dy extends mi{_parse(e){if(this._getType(e)!==hr.null){const r=this._getOrReturnCtx(e);return ur(r,{code:Jn.invalid_type,expected:hr.null,received:r.parsedType}),Qr}return Va(e.data)}}Dy.create=t=>new Dy({typeName:Wr.ZodNull,...fi(t)});let pg=class extends mi{constructor(){super(...arguments),this._any=!0}_parse(e){return Va(e.data)}};pg.create=t=>new pg({typeName:Wr.ZodAny,...fi(t)});let Uh=class extends mi{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Va(e.data)}};Uh.create=t=>new Uh({typeName:Wr.ZodUnknown,...fi(t)});let kf=class extends mi{_parse(e){const n=this._getOrReturnCtx(e);return ur(n,{code:Jn.invalid_type,expected:hr.never,received:n.parsedType}),Qr}};kf.create=t=>new kf({typeName:Wr.ZodNever,...fi(t)});class _0 extends mi{_parse(e){if(this._getType(e)!==hr.undefined){const r=this._getOrReturnCtx(e);return ur(r,{code:Jn.invalid_type,expected:hr.void,received:r.parsedType}),Qr}return Va(e.data)}}_0.create=t=>new _0({typeName:Wr.ZodVoid,...fi(t)});let Bh=class KE extends mi{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==hr.array)return ur(n,{code:Jn.invalid_type,expected:hr.array,received:n.parsedType}),Qr;if(i.exactLength!==null){const l=n.data.length>i.exactLength.value,c=n.data.length<i.exactLength.value;(l||c)&&(ur(n,{code:l?Jn.too_big:Jn.too_small,minimum:c?i.exactLength.value:void 0,maximum:l?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(ur(n,{code:Jn.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(ur(n,{code:Jn.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((l,c)=>i.type._parseAsync(new Zc(n,l,n.path,c)))).then(l=>va.mergeArray(r,l));const o=[...n.data].map((l,c)=>i.type._parseSync(new Zc(n,l,n.path,c)));return va.mergeArray(r,o)}get element(){return this._def.type}min(e,n){return new KE({...this._def,minLength:{value:e,message:Nr.toString(n)}})}max(e,n){return new KE({...this._def,maxLength:{value:e,message:Nr.toString(n)}})}length(e,n){return new KE({...this._def,exactLength:{value:e,message:Nr.toString(n)}})}nonempty(e){return this.min(1,e)}};Bh.create=(t,e)=>new Bh({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Wr.ZodArray,...fi(e)});function gg(t){if(t instanceof wu){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Vc.create(gg(r))}return new wu({...t._def,shape:()=>e})}else return t instanceof Bh?new Bh({...t._def,type:gg(t.element)}):t instanceof Vc?Vc.create(gg(t.unwrap())):t instanceof $d?$d.create(gg(t.unwrap())):t instanceof jc?jc.create(t.items.map(e=>gg(e))):t}let wu=class kc extends mi{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Hi.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==hr.object){const g=this._getOrReturnCtx(e);return ur(g,{code:Jn.invalid_type,expected:hr.object,received:g.parsedType}),Qr}const{status:r,ctx:i}=this._processInputParams(e),{shape:o,keys:l}=this._getCached(),c=[];if(!(this._def.catchall instanceof kf&&this._def.unknownKeys==="strip"))for(const g in i.data)l.includes(g)||c.push(g);const f=[];for(const g of l){const y=o[g],h=i.data[g];f.push({key:{status:"valid",value:g},value:y._parse(new Zc(i,h,i.path,g)),alwaysSet:g in i.data})}if(this._def.catchall instanceof kf){const g=this._def.unknownKeys;if(g==="passthrough")for(const y of c)f.push({key:{status:"valid",value:y},value:{status:"valid",value:i.data[y]}});else if(g==="strict")c.length>0&&(ur(i,{code:Jn.unrecognized_keys,keys:c}),r.dirty());else if(g!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const g=this._def.catchall;for(const y of c){const h=i.data[y];f.push({key:{status:"valid",value:y},value:g._parse(new Zc(i,h,i.path,y)),alwaysSet:y in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const g=[];for(const y of f){const h=await y.key,p=await y.value;g.push({key:h,value:p,alwaysSet:y.alwaysSet})}return g}).then(g=>va.mergeObjectSync(r,g)):va.mergeObjectSync(r,f)}get shape(){return this._def.shape()}strict(e){return Nr.errToObj,new kc({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,o,l,c;const f=(l=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,n,r).message)!==null&&l!==void 0?l:r.defaultError;return n.code==="unrecognized_keys"?{message:(c=Nr.errToObj(e).message)!==null&&c!==void 0?c:f}:{message:f}}}:{}})}strip(){return new kc({...this._def,unknownKeys:"strip"})}passthrough(){return new kc({...this._def,unknownKeys:"passthrough"})}extend(e){return new kc({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new kc({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Wr.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new kc({...this._def,catchall:e})}pick(e){const n={};return Hi.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new kc({...this._def,shape:()=>n})}omit(e){const n={};return Hi.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new kc({...this._def,shape:()=>n})}deepPartial(){return gg(this)}partial(e){const n={};return Hi.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new kc({...this._def,shape:()=>n})}required(e){const n={};return Hi.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof Vc;)o=o._def.innerType;n[r]=o}}),new kc({...this._def,shape:()=>n})}keyof(){return Ix(Hi.objectKeys(this.shape))}};wu.create=(t,e)=>new wu({shape:()=>t,unknownKeys:"strip",catchall:kf.create(),typeName:Wr.ZodObject,...fi(e)}),wu.strictCreate=(t,e)=>new wu({shape:()=>t,unknownKeys:"strict",catchall:kf.create(),typeName:Wr.ZodObject,...fi(e)}),wu.lazycreate=(t,e)=>new wu({shape:t,unknownKeys:"strip",catchall:kf.create(),typeName:Wr.ZodObject,...fi(e)});let Py=class extends mi{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(o){for(const c of o)if(c.result.status==="valid")return c.result;for(const c of o)if(c.result.status==="dirty")return n.common.issues.push(...c.ctx.common.issues),c.result;const l=o.map(c=>new Xu(c.ctx.common.issues));return ur(n,{code:Jn.invalid_union,unionErrors:l}),Qr}if(n.common.async)return Promise.all(r.map(async o=>{const l={...n,common:{...n.common,issues:[]},parent:null};return{result:await o._parseAsync({data:n.data,path:n.path,parent:l}),ctx:l}})).then(i);{let o;const l=[];for(const f of r){const g={...n,common:{...n.common,issues:[]},parent:null},y=f._parseSync({data:n.data,path:n.path,parent:g});if(y.status==="valid")return y;y.status==="dirty"&&!o&&(o={result:y,ctx:g}),g.common.issues.length&&l.push(g.common.issues)}if(o)return n.common.issues.push(...o.ctx.common.issues),o.result;const c=l.map(f=>new Xu(f));return ur(n,{code:Jn.invalid_union,unionErrors:c}),Qr}}get options(){return this._def.options}};Py.create=(t,e)=>new Py({options:t,typeName:Wr.ZodUnion,...fi(e)});const Ff=t=>t instanceof Fy?Ff(t.schema):t instanceof Ju?Ff(t.innerType()):t instanceof $y?[t.value]:t instanceof Uy?t.options:t instanceof By?Hi.objectValues(t.enum):t instanceof Zy?Ff(t._def.innerType):t instanceof Ly?[void 0]:t instanceof Dy?[null]:t instanceof Vc?[void 0,...Ff(t.unwrap())]:t instanceof $d?[null,...Ff(t.unwrap())]:t instanceof e1||t instanceof zy?Ff(t.unwrap()):t instanceof jy?Ff(t._def.innerType):[];class b0 extends mi{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==hr.object)return ur(n,{code:Jn.invalid_type,expected:hr.object,received:n.parsedType}),Qr;const r=this.discriminator,i=n.data[r],o=this.optionsMap.get(i);return o?n.common.async?o._parseAsync({data:n.data,path:n.path,parent:n}):o._parseSync({data:n.data,path:n.path,parent:n}):(ur(n,{code:Jn.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Qr)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const i=new Map;for(const o of n){const l=Ff(o.shape[e]);if(!l.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const c of l){if(i.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);i.set(c,o)}}return new b0({typeName:Wr.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...fi(r)})}}function Jw(t,e){const n=kd(t),r=kd(e);if(t===e)return{valid:!0,data:t};if(n===hr.object&&r===hr.object){const i=Hi.objectKeys(e),o=Hi.objectKeys(t).filter(c=>i.indexOf(c)!==-1),l={...t,...e};for(const c of o){const f=Jw(t[c],e[c]);if(!f.valid)return{valid:!1};l[c]=f.data}return{valid:!0,data:l}}else if(n===hr.array&&r===hr.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let o=0;o<t.length;o++){const l=t[o],c=e[o],f=Jw(l,c);if(!f.valid)return{valid:!1};i.push(f.data)}return{valid:!0,data:i}}else return n===hr.date&&r===hr.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}let My=class extends mi{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(o,l)=>{if(Yw(o)||Yw(l))return Qr;const c=Jw(o.value,l.value);return c.valid?((Qw(o)||Qw(l))&&n.dirty(),{status:n.value,value:c.data}):(ur(r,{code:Jn.invalid_intersection_types}),Qr)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,l])=>i(o,l)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}};My.create=(t,e,n)=>new My({left:t,right:e,typeName:Wr.ZodIntersection,...fi(n)});class jc extends mi{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==hr.array)return ur(r,{code:Jn.invalid_type,expected:hr.array,received:r.parsedType}),Qr;if(r.data.length<this._def.items.length)return ur(r,{code:Jn.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Qr;!this._def.rest&&r.data.length>this._def.items.length&&(ur(r,{code:Jn.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const o=[...r.data].map((l,c)=>{const f=this._def.items[c]||this._def.rest;return f?f._parse(new Zc(r,l,r.path,c)):null}).filter(l=>!!l);return r.common.async?Promise.all(o).then(l=>va.mergeArray(n,l)):va.mergeArray(n,o)}get items(){return this._def.items}rest(e){return new jc({...this._def,rest:e})}}jc.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new jc({items:t,typeName:Wr.ZodTuple,rest:null,...fi(e)})};class ky extends mi{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==hr.object)return ur(r,{code:Jn.invalid_type,expected:hr.object,received:r.parsedType}),Qr;const i=[],o=this._def.keyType,l=this._def.valueType;for(const c in r.data)i.push({key:o._parse(new Zc(r,c,r.path,c)),value:l._parse(new Zc(r,r.data[c],r.path,c)),alwaysSet:c in r.data});return r.common.async?va.mergeObjectAsync(n,i):va.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof mi?new ky({keyType:e,valueType:n,typeName:Wr.ZodRecord,...fi(r)}):new ky({keyType:hg.create(),valueType:e,typeName:Wr.ZodRecord,...fi(n)})}}class E0 extends mi{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==hr.map)return ur(r,{code:Jn.invalid_type,expected:hr.map,received:r.parsedType}),Qr;const i=this._def.keyType,o=this._def.valueType,l=[...r.data.entries()].map(([c,f],g)=>({key:i._parse(new Zc(r,c,r.path,[g,"key"])),value:o._parse(new Zc(r,f,r.path,[g,"value"]))}));if(r.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const f of l){const g=await f.key,y=await f.value;if(g.status==="aborted"||y.status==="aborted")return Qr;(g.status==="dirty"||y.status==="dirty")&&n.dirty(),c.set(g.value,y.value)}return{status:n.value,value:c}})}else{const c=new Map;for(const f of l){const g=f.key,y=f.value;if(g.status==="aborted"||y.status==="aborted")return Qr;(g.status==="dirty"||y.status==="dirty")&&n.dirty(),c.set(g.value,y.value)}return{status:n.value,value:c}}}}E0.create=(t,e,n)=>new E0({valueType:e,keyType:t,typeName:Wr.ZodMap,...fi(n)});class Zh extends mi{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==hr.set)return ur(r,{code:Jn.invalid_type,expected:hr.set,received:r.parsedType}),Qr;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(ur(r,{code:Jn.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(ur(r,{code:Jn.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const o=this._def.valueType;function l(f){const g=new Set;for(const y of f){if(y.status==="aborted")return Qr;y.status==="dirty"&&n.dirty(),g.add(y.value)}return{status:n.value,value:g}}const c=[...r.data.values()].map((f,g)=>o._parse(new Zc(r,f,r.path,g)));return r.common.async?Promise.all(c).then(f=>l(f)):l(c)}min(e,n){return new Zh({...this._def,minSize:{value:e,message:Nr.toString(n)}})}max(e,n){return new Zh({...this._def,maxSize:{value:e,message:Nr.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Zh.create=(t,e)=>new Zh({valueType:t,minSize:null,maxSize:null,typeName:Wr.ZodSet,...fi(e)});class mg extends mi{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==hr.function)return ur(n,{code:Jn.invalid_type,expected:hr.function,received:n.parsedType}),Qr;function r(c,f){return m0({data:c,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,g0(),fg].filter(g=>!!g),issueData:{code:Jn.invalid_arguments,argumentsError:f}})}function i(c,f){return m0({data:c,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,g0(),fg].filter(g=>!!g),issueData:{code:Jn.invalid_return_type,returnTypeError:f}})}const o={errorMap:n.common.contextualErrorMap},l=n.data;if(this._def.returns instanceof yg){const c=this;return Va(async function(...f){const g=new Xu([]),y=await c._def.args.parseAsync(f,o).catch(E=>{throw g.addIssue(r(f,E)),g}),h=await Reflect.apply(l,this,y);return await c._def.returns._def.type.parseAsync(h,o).catch(E=>{throw g.addIssue(i(h,E)),g})})}else{const c=this;return Va(function(...f){const g=c._def.args.safeParse(f,o);if(!g.success)throw new Xu([r(f,g.error)]);const y=Reflect.apply(l,this,g.data),h=c._def.returns.safeParse(y,o);if(!h.success)throw new Xu([i(y,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new mg({...this._def,args:jc.create(e).rest(Uh.create())})}returns(e){return new mg({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new mg({args:e||jc.create([]).rest(Uh.create()),returns:n||Uh.create(),typeName:Wr.ZodFunction,...fi(r)})}}class Fy extends mi{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Fy.create=(t,e)=>new Fy({getter:t,typeName:Wr.ZodLazy,...fi(e)});let $y=class extends mi{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return ur(n,{received:n.data,code:Jn.invalid_literal,expected:this._def.value}),Qr}return{status:"valid",value:e.data}}get value(){return this._def.value}};$y.create=(t,e)=>new $y({value:t,typeName:Wr.ZodLiteral,...fi(e)});function Ix(t,e){return new Uy({values:t,typeName:Wr.ZodEnum,...fi(e)})}let Uy=class OI extends mi{constructor(){super(...arguments),Ry.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return ur(n,{expected:Hi.joinValues(r),received:n.parsedType,code:Jn.invalid_type}),Qr}if(y0(this,Ry)||Ex(this,Ry,new Set(this._def.values)),!y0(this,Ry).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return ur(n,{received:n.data,code:Jn.invalid_enum_value,options:r}),Qr}return Va(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return OI.create(e,{...this._def,...n})}exclude(e,n=this._def){return OI.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}};Ry=new WeakMap,Uy.create=Ix;class By extends mi{constructor(){super(...arguments),xy.set(this,void 0)}_parse(e){const n=Hi.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==hr.string&&r.parsedType!==hr.number){const i=Hi.objectValues(n);return ur(r,{expected:Hi.joinValues(i),received:r.parsedType,code:Jn.invalid_type}),Qr}if(y0(this,xy)||Ex(this,xy,new Set(Hi.getValidEnumValues(this._def.values))),!y0(this,xy).has(e.data)){const i=Hi.objectValues(n);return ur(r,{received:r.data,code:Jn.invalid_enum_value,options:i}),Qr}return Va(e.data)}get enum(){return this._def.values}}xy=new WeakMap,By.create=(t,e)=>new By({values:t,typeName:Wr.ZodNativeEnum,...fi(e)});class yg extends mi{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==hr.promise&&n.common.async===!1)return ur(n,{code:Jn.invalid_type,expected:hr.promise,received:n.parsedType}),Qr;const r=n.parsedType===hr.promise?n.data:Promise.resolve(n.data);return Va(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}yg.create=(t,e)=>new yg({type:t,typeName:Wr.ZodPromise,...fi(e)});class Ju extends mi{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Wr.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:l=>{ur(r,l),l.fatal?n.abort():n.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){const l=i.transform(r.data,o);if(r.common.async)return Promise.resolve(l).then(async c=>{if(n.value==="aborted")return Qr;const f=await this._def.schema._parseAsync({data:c,path:r.path,parent:r});return f.status==="aborted"?Qr:f.status==="dirty"||n.value==="dirty"?dg(f.value):f});{if(n.value==="aborted")return Qr;const c=this._def.schema._parseSync({data:l,path:r.path,parent:r});return c.status==="aborted"?Qr:c.status==="dirty"||n.value==="dirty"?dg(c.value):c}}if(i.type==="refinement"){const l=c=>{const f=i.refinement(c,o);if(r.common.async)return Promise.resolve(f);if(f instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return c.status==="aborted"?Qr:(c.status==="dirty"&&n.dirty(),l(c.value),{status:n.value,value:c.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>c.status==="aborted"?Qr:(c.status==="dirty"&&n.dirty(),l(c.value).then(()=>({status:n.value,value:c.value}))))}if(i.type==="transform")if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Iy(l))return l;const c=i.transform(l.value,o);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:c}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>Iy(l)?Promise.resolve(i.transform(l.value,o)).then(c=>({status:n.value,value:c})):l);Hi.assertNever(i)}}Ju.create=(t,e,n)=>new Ju({schema:t,typeName:Wr.ZodEffects,effect:e,...fi(n)}),Ju.createWithPreprocess=(t,e,n)=>new Ju({schema:e,effect:{type:"preprocess",transform:t},typeName:Wr.ZodEffects,...fi(n)});let Vc=class extends mi{_parse(e){return this._getType(e)===hr.undefined?Va(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Vc.create=(t,e)=>new Vc({innerType:t,typeName:Wr.ZodOptional,...fi(e)});let $d=class extends mi{_parse(e){return this._getType(e)===hr.null?Va(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};$d.create=(t,e)=>new $d({innerType:t,typeName:Wr.ZodNullable,...fi(e)});let Zy=class extends mi{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===hr.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}};Zy.create=(t,e)=>new Zy({innerType:t,typeName:Wr.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...fi(e)});let jy=class extends mi{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Cy(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Xu(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Xu(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}};jy.create=(t,e)=>new jy({innerType:t,typeName:Wr.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...fi(e)});class w0 extends mi{_parse(e){if(this._getType(e)!==hr.nan){const r=this._getOrReturnCtx(e);return ur(r,{code:Jn.invalid_type,expected:hr.nan,received:r.parsedType}),Qr}return{status:"valid",value:e.data}}}w0.create=t=>new w0({typeName:Wr.ZodNaN,...fi(t)});const q$=Symbol("zod_brand");class e1 extends mi{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Vy extends mi{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?Qr:o.status==="dirty"?(n.dirty(),dg(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Qr:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new Vy({in:e,out:n,typeName:Wr.ZodPipeline})}}let zy=class extends mi{_parse(e){const n=this._def.innerType._parse(e),r=i=>(Iy(i)&&(i.value=Object.freeze(i.value)),i);return Cy(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}};zy.create=(t,e)=>new zy({innerType:t,typeName:Wr.ZodReadonly,...fi(e)});function Cx(t,e={},n){return t?pg.create().superRefine((r,i)=>{var o,l;if(!t(r)){const c=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,f=(l=(o=c.fatal)!==null&&o!==void 0?o:n)!==null&&l!==void 0?l:!0,g=typeof c=="string"?{message:c}:c;i.addIssue({code:"custom",...g,fatal:f})}}):pg.create()}const W$={object:wu.lazycreate};var Wr;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Wr||(Wr={}));const K$=(t,e={message:`Input not instance of ${t.name}`})=>Cx(n=>n instanceof t,e),Rx=hg.create,xx=Ny.create,Y$=w0.create,Q$=Fd.create,Nx=Oy.create,X$=$h.create,J$=v0.create,eU=Ly.create,tU=Dy.create,nU=pg.create,rU=Uh.create,iU=kf.create,oU=_0.create,sU=Bh.create,aU=wu.create,lU=wu.strictCreate,uU=Py.create,cU=b0.create,fU=My.create,dU=jc.create,hU=ky.create,pU=E0.create,gU=Zh.create,mU=mg.create,yU=Fy.create,vU=$y.create,_U=Uy.create,bU=By.create,EU=yg.create,Ox=Ju.create,wU=Vc.create,TU=$d.create,SU=Ju.createWithPreprocess,AU=Vy.create;var At=Object.freeze({__proto__:null,defaultErrorMap:fg,setErrorMap:N$,getErrorMap:g0,makeIssue:m0,EMPTY_PATH:O$,addIssueToContext:ur,ParseStatus:va,INVALID:Qr,DIRTY:dg,OK:Va,isAborted:Yw,isDirty:Qw,isValid:Iy,isAsync:Cy,get util(){return Hi},get objectUtil(){return Kw},ZodParsedType:hr,getParsedType:kd,ZodType:mi,datetimeRegex:Ax,ZodString:hg,ZodNumber:Ny,ZodBigInt:Fd,ZodBoolean:Oy,ZodDate:$h,ZodSymbol:v0,ZodUndefined:Ly,ZodNull:Dy,ZodAny:pg,ZodUnknown:Uh,ZodNever:kf,ZodVoid:_0,ZodArray:Bh,ZodObject:wu,ZodUnion:Py,ZodDiscriminatedUnion:b0,ZodIntersection:My,ZodTuple:jc,ZodRecord:ky,ZodMap:E0,ZodSet:Zh,ZodFunction:mg,ZodLazy:Fy,ZodLiteral:$y,ZodEnum:Uy,ZodNativeEnum:By,ZodPromise:yg,ZodEffects:Ju,ZodTransformer:Ju,ZodOptional:Vc,ZodNullable:$d,ZodDefault:Zy,ZodCatch:jy,ZodNaN:w0,BRAND:q$,ZodBranded:e1,ZodPipeline:Vy,ZodReadonly:zy,custom:Cx,Schema:mi,ZodSchema:mi,late:W$,get ZodFirstPartyTypeKind(){return Wr},coerce:{string:(t=>hg.create({...t,coerce:!0})),number:(t=>Ny.create({...t,coerce:!0})),boolean:(t=>Oy.create({...t,coerce:!0})),bigint:(t=>Fd.create({...t,coerce:!0})),date:(t=>$h.create({...t,coerce:!0}))},any:nU,array:sU,bigint:Q$,boolean:Nx,date:X$,discriminatedUnion:cU,effect:Ox,enum:_U,function:mU,instanceof:K$,intersection:fU,lazy:yU,literal:vU,map:pU,nan:Y$,nativeEnum:bU,never:iU,null:tU,nullable:TU,number:xx,object:aU,oboolean:()=>Nx().optional(),onumber:()=>xx().optional(),optional:wU,ostring:()=>Rx().optional(),pipeline:AU,preprocess:SU,promise:EU,record:hU,set:gU,strictObject:lU,string:Rx,symbol:J$,transformer:Ox,tuple:dU,undefined:eU,union:uU,unknown:rU,void:oU,NEVER:Qr,ZodIssueCode:Jn,quotelessJson:x$,ZodError:Xu});const IU=At.object({data:At.unknown(),target:At.object({portId:At.string()}).optional(),replyPort:At.object({portId:At.string()}).optional()}).strict();function Lx(t){return IU.safeParse(t).success}const CU=At.union([At.object({success:At.literal(!0)}),At.object({success:At.literal(!1),error:At.string()})]);class Dx{constructor(){this.runtime=p0.runtime}async sendMessage(e){try{const n=await this.runtime.sendMessage(e),r=CU.safeParse(n);if(!r.success)throw new Error("Invalid response format");const i=r.data;if(!i.success)throw new Error(i.error)}catch(n){throw n instanceof Error?new Error(`Error sending message: ${n.message}`):new Error("Unexpected error while sending message to background script")}}addMessageListener(e){this.runtime.onMessage.addListener(e)}removeMessageListener(e){this.runtime.onMessage.removeListener(e)}}function RU(t){const e=t.getAttribute("src");return e===null||e.trim()===""}function xU(t){return t.src}class Px{createSendToCurrentFrameMessage(e,n){return{type:"SEND_TO_CURRENT_FRAME",data:e,replyPort:n?.transfer()}}createSendToParentFrameMessage(e,n){return{type:"SEND_TO_PARENT_FRAME",data:e,replyPort:n?.transfer()}}createSendToChildFrameMessage(e,n,r){return{type:"SEND_TO_CHILD_FRAME",data:n,targetFrame:{src:xU(e)},replyPort:r?.transfer()}}createSendToPortMessage(e,n){return{type:"SEND_TO_PORT",target:{portId:e},data:n}}createRegisterPortMessage(e){return{type:"REGISTER_PORT",portId:e}}createPortStartedMessage(e){return{type:"PORT_STARTED",portId:e}}createPortClosedMessage(e){return{type:"PORT_CLOSED",portId:e}}}class vg{constructor(e,n){this.id=e,this.pairPortId=n,this.messageFactory=new Px,this.bgCfcClient=new Dx,this.onMessageCallbacks=new Set,this.stopListening=null,this.isStarted=!1,this.isClosed=!1,this.isTransferred=!1,this.registerPort(),this.initListening()}static fromId(e){const[n,r]=e.split(":"),i=`${n}:${r==="1"?"2":"1"}`;return new vg(e,i)}registerPort(){const e=this.messageFactory.createRegisterPortMessage(this.id);this.bgCfcClient.sendMessage(e).catch(n=>{Re.error(`Error registering port: ${n}`)})}initListening(){const e=n=>{Lx(n)&&n.target?.portId===this.id&&this.onMessageCallbacks.forEach(r=>{r(n.data)})};this.bgCfcClient.addMessageListener(e),this.stopListening=()=>{this.bgCfcClient.removeMessageListener(e)}}start(){if(this.isStarted||this.isClosed||this.isTransferred)return;const e=this.messageFactory.createPortStartedMessage(this.id);this.bgCfcClient.sendMessage(e).catch(n=>{Re.error(`Error notifying port start: ${n}`)}),this.isStarted=!0}close(){if(this.isClosed)return;const e=this.messageFactory.createPortClosedMessage(this.id);this.bgCfcClient.sendMessage(e).catch(n=>{Re.error(`Error notifying port close: ${n}`)}),this.isClosed=!0,this.stopListening?.(),this.stopListening=null}postMessage(e){if(this.isTransferred||this.isClosed){Re.error("Cannot post message: port is closed or transferred.");return}const n=this.messageFactory.createSendToPortMessage(this.pairPortId,e);this.bgCfcClient.sendMessage(n).catch(r=>{Re.error(`Error sending message to port: ${r}`)})}addMessageListener(e,n){if(this.isTransferred)return Re.error("Cannot add message listener: port is transferred."),()=>{};this.onMessageCallbacks.add(e);const r=()=>{this.onMessageCallbacks.delete(e)};return n?.addEventListener("abort",r),r}getId(){return this.id}transfer(){if(this.isClosed)throw new Error(`Cannot transfer port "${this.id}": port is closed.`);return this.isTransferred=!0,{portId:this.id}}}class Mx{constructor(){this.channelId=ja(),this.port1=vg.fromId(`${this.channelId}:1`),this.port2=vg.fromId(`${this.channelId}:2`)}getPort1(){return this.port1}getPort2(){return this.port2}}class t1 extends Error{constructor(){super("replyPort must be an instance of BgScriptCrossFrameChannelPort")}}class NU{constructor(){this.bgCfcClient=new Dx,this.messageFactory=new Px}async requestFromFrame(e,n){return new Promise((r,i)=>{const o=new Mx;o.getPort1().start();const l=500;let c=!1;const f=setTimeout(()=>{c||(c=!0,o.getPort1().close(),i(new _x(l)))},l);o.getPort1().addMessageListener(async g=>{c||(c=!0,o.getPort1().close(),r(g),clearTimeout(f))}),this.sendToChildFrame(e,n,o.getPort2())})}sendToCurrentFrame(e,n){(async()=>{if(!this.validateReplyPort(n))throw new t1;const r=this.messageFactory.createSendToCurrentFrameMessage(e,n);await this.bgCfcClient.sendMessage(r)})().catch(r=>{Re.error(`Error broadcasting message to current frame ("${window.location.href}"): ${r.message}`)})}validateReplyPort(e){return e==null||e instanceof vg}sendToParentFrame(e,n){(async()=>{if(!this.validateReplyPort(n))throw new t1;const r=this.messageFactory.createSendToParentFrameMessage(e,n);await this.bgCfcClient.sendMessage(r)})().catch(r=>{Re.error(`Error sending message to parent frame from frame "${window.location.href}": ${r.message}`)})}sendToChildFrame(e,n,r){(async()=>{if(!this.validateReplyPort(r))throw new t1;if(RU(e)){Re.trace(`Skipped sending message to a child frame with empty src from "${window.location.href}": frames with empty src do not have active content scripts.`);return}const i=this.messageFactory.createSendToChildFrameMessage(e,n,r);await this.bgCfcClient.sendMessage(i)})().catch(i=>{Re.error(`Error sending message to child frame with src "${e.src}": ${i.message}`)})}addMessageListener(e,n){const r=o=>{Lx(o)&&o.target==null&&e(o.data,o.replyPort?vg.fromId(o.replyPort.portId):void 0)};p0.runtime.onMessage.addListener(r);const i=()=>{p0.runtime.onMessage.removeListener(r)};return n?.addEventListener("abort",()=>{i()}),i}createChannel(){return new Mx}}class _g{constructor(e){this.port=e}start(){this.port.start()}close(){this.port.close()}postMessage(e){this.port.postMessage(e)}addMessageListener(e,n){const r=i=>{e(i.data)};return this.port.addEventListener("message",r,{signal:n}),()=>{this.port.removeEventListener("message",r)}}getUnderlyingPort(){return this.port}}class OU{constructor(){this.messageChannel=new MessageChannel,this.port1=new _g(this.messageChannel.port1),this.port2=new _g(this.messageChannel.port2)}getPort1(){return this.port1}getPort2(){return this.port2}}class LU{constructor(){this.messageEventFilter=new gC}async requestFromFrame(e,n){return new Promise((r,i)=>{const o=new MessageChannel;o.port1.start();const l=500;let c=!1;const f=setTimeout(()=>{c||(c=!0,o.port1.close(),i(new _x(l)))},l);o.port1.addEventListener("message",g=>{c||(c=!0,o.port1.close(),r(g.data),clearTimeout(f))}),e.contentWindow?.postMessage(n,"*",[o.port2])})}sendToCurrentFrame(e,n){if(n!=null&&!(n instanceof _g)){Re.error("Failed to send message to current frame: replyPort must be an instance of WindowMessageCrossFrameChannelPort");return}window.postMessage(e,"*",n?[n.getUnderlyingPort()]:[])}sendToParentFrame(e,n){if(n!=null&&!(n instanceof _g)){Re.error("Failed to send message to parent: replyPort must be an instance of WindowMessageCrossFrameChannelPort");return}window.parent.postMessage(e,"*",n?[n.getUnderlyingPort()]:[])}sendToChildFrame(e,n,r){if(r!=null&&!(r instanceof _g)){Re.error("Failed to send message to frame: replyPort must be an instance of WindowMessageCrossFrameChannelPort");return}e.contentWindow?.postMessage(n,"*",r?[r.getUnderlyingPort()]:[])}addMessageListener(e,n){const r=i=>{this.messageEventFilter.isAllowed(i)&&e(i.data,i.ports[0]!=null?new _g(i.ports[0]):void 0)};return window.addEventListener("message",r,{signal:n}),()=>{window.removeEventListener("message",r)}}createChannel(){return new OU}}const GA=class GA{static getInstance(){return this.cfcInstance==null&&(DU()?this.cfcInstance=new NU:this.cfcInstance=new LU),this.cfcInstance}static async requestFromFrame(e,n){return this.getInstance().requestFromFrame(e,n)}static sendToCurrentFrame(e,n){this.getInstance().sendToCurrentFrame(e,n)}static sendToParentFrame(e,n){this.getInstance().sendToParentFrame(e,n)}static sendToChildFrame(e,n,r){this.getInstance().sendToChildFrame(e,n,r)}static addMessageListener(e,n){return this.getInstance().addMessageListener(e,n)}static createChannel(){return this.getInstance().createChannel()}};GA.cfcInstance=null;let rs=GA;function DU(){return p0?.runtime?.id!==void 0}const PU={action:null,value:null};class kx{constructor(e,n=null,r=null){this.source=null,this.id=ja(),this._window=e,this._payload=n??PU,this._inResponseTo=r}get to(){return this._window.getId()}get inResponseTo(){return this._inResponseTo}get from(){return this.source}setAction(e){if(this._payload!==null)Object.assign(this._payload,{action:e});else throw new Error("Payload is null")}setValue(e){if(this._payload!==null)Object.assign(this._payload,{value:e});else throw new Error("Payload is null")}setPayload(e){this._payload=e}async send(e=!0){const n=()=>{const r=JSON.stringify({action:"CROSS_ACTION",from:this.source,to:this._window.getId(),messageId:this.id,inResponseTo:this._inResponseTo,payload:this._payload});return rs.sendToCurrentFrame(r),null};return e?new Promise(r=>{const i=this._window.onMessage(o=>{"inResponseTo"in o&&o.inResponseTo===this.id&&(r(o),i())});n()}):n()}}class MU{constructor(e,n,r,i=null){this.to=null,this.id=e,this.from=n,this.payload=r,this.inResponseTo=i}get value(){return this.payload.value??null}setAction(e){throw new Error("Can't change the action on a response.")}setValue(e){throw new Error("Can't change the value on a response.")}setPayload(e){throw new Error("Can't change the payload of a response.")}async send(e){throw new Error("A response can't be sent. If you want to respond to this message, use the createResponse method.")}createResponse(e){const n=ec.getWindowById(this.from);if(n==null)throw new Error("Window not found");return new kx(n,e,this.id)}}var Hy=(t=>(t.CROSS_ACTION="CROSS_ACTION",t.CROSS_RESPONSE="CROSS_RESPONSE",t.CROSS_DETERMINE_DEPTH="CROSS_DETERMINE_DEPTH",t.SET_DEPTH="SET_DEPTH",t.CROSS_DOM_MUTATION="CROSS_DOM_MUTATION",t.SET_POST_MESSAGES_PARAMS="SET_POST_MESSAGES_PARAMS",t))(Hy||{});function Fx(t){if(typeof t=="object")return t;if(typeof t=="string"&&t!=="")try{return JSON.parse(t)}catch{return null}return null}const Jd=class Jd{constructor(e,n=0){this.listeners=[],this.id=e,this.depth=n,Jd.windows.push(this),rs.addMessageListener(async r=>{const i=Fx(r);if(i==null||i.action!==Hy.CROSS_RESPONSE||i.to!=null||i.from!==this.id)return;const{messageId:o,from:l,inResponseTo:c,payload:f}=i,g=new MU(o,l,f,c);this.listeners.forEach(y=>y(g))})}getId(){return this.id}getDepth(){return this.depth}async send(e,n=!0){return this.message(e).send(n)}message(e=null){return new kx(this,e)}onMessage(e){return this.listeners.push(e),()=>{const n=this.listeners.indexOf(e);n>=0&&this.listeners.splice(n,1)}}stream(e,n){return this.onMessage(r=>{r.payload.streamId===e&&n(r)})}destroy(){const e=Jd.windows.indexOf(this);e>=0&&Jd.windows.splice(e,1)}static destroyAll(){Jd.windows=[]}static init(){rs.addMessageListener(async e=>{try{const n=Fx(e),{action:r}=n;switch(r){case Hy.CROSS_DETERMINE_DEPTH:{const i=this.getWindowById(n.crossId);i!=null?(Re.debug(`Received CROSS_DETERMINE_DEPTH message, sending SET_DEPTH message to window. (crossId: ${n.crossId})`),i.send({action:Hy.SET_DEPTH,value:n.depth},!1)):(Re.debug(`Received CROSS_DETERMINE_DEPTH message, creating CrossWindow instance. (crossId: ${n.crossId})`),new Jd(n.crossId,n.depth).send({action:Hy.SET_DEPTH,value:n.depth},!1));break}}}catch{}})}static getWindows(e){return e!=null?this.windows.filter(e):this.windows}static getWindow(e){return this.windows.find(e)}static getWindowById(e){return this.getWindow(n=>n.getId()===e)??null}static broadcast(e){this.windows.forEach(n=>{n.send(e,!1)})}};Jd.windows=[];let ec=Jd;function zc(t){const e=t?.tagName.toLowerCase()??"";return t instanceof HTMLIFrameElement||t instanceof HTMLFrameElement||["iframe","frame"].includes(e)}const n1=2147483647,T0={label:null,icon:"info",size:"medium",color:"#157ad8",text_color:"#fff",position:"right",z_index:n1,offset:{x:0,y:0}},wE=class wE{constructor(e,n=null){this.target=null,this.element=null,this.window=null,this.beaconId=null,this._onMountedQueu=[],this.target=e,this.window=ec.getWindowById(e.crossId),this.options={...wE.defaultOptions,...n??{}},this.window?.send({action:"CREATE_BEACON",value:{targetId:e.resultId,options:this.options}}).then(r=>{this.beaconId=r?.value?.beaconId??null;const i=r?.value?.boxing??vx;if(this.target==null)throw new Error("Target is null");if(this.target.iframes.filter(zc).forEach(o=>{const l=o.getBoundingClientRect();i.top+=l.top,i.bottom+=l.top,i.left+=l.left,i.right+=l.left}),this.beaconId==null)throw new Error("Beacon ID is null");this.element=new D0(this.beaconId,this.target.crossId,i,r?.value?.DOM??{},this.target?.iframes),this._onMountedQueu.forEach(o=>{o()})})}render(){if(this.beaconId==null){this._onMountedQueu.push(()=>{this.render()});return}this.window?.send({action:"BEACON_CONTROL",value:{beaconId:this.beaconId,action:"render"}},!1)}unmount(){if(this.target!==null&&this.target.destroy(),this.beaconId==null){const e=this._onMountedQueu.indexOf(this.render);e>=0&&this._onMountedQueu.splice(e,1);return}this.window?.send({action:"BEACON_CONTROL",value:{beaconId:this.beaconId,action:"unmount"}},!1)}onClick(e,n){return this.element==null?(this._onMountedQueu.push(()=>{this.onClick(e,n)}),()=>{}):(this.element.onClick(e,!1),()=>{})}onMouseEnter(e,n){return this.element==null?(this._onMountedQueu.push(()=>{this.onMouseEnter(e,n)}),()=>{}):(this.element.onHover(e,!1),()=>{})}onMouseLeave(e,n){return this.element==null?(this._onMountedQueu.push(()=>{this.onMouseLeave(e,n)}),()=>{}):(this.element.onMouseLeave(e,!1),()=>{})}};wE.defaultOptions=T0;let S0=wE;const $x="ShowPillOption";class kU{async get(){const e=await Ki.getItem(`local:${$x}`);return typeof e=="boolean"?e:!1}async set(e){await Ki.setItem(`local:${$x}`,e)}}class FU{constructor(e,n=document){this.id=e,this.pillElement=null,this.shouldShowPill=null,this.targetDocument=n,this.initPill(),this.pillExtensionStorage=new kU}initPill(){this.pillElement=this.targetDocument.createElement("div"),this.pillElement.setAttribute("id",`highlighter-pill-${this.id}`),xd(this.targetDocument).appendChild(this.pillElement)}remove(){this.pillElement?.remove(),this.pillElement=null}hide(){this.pillElement?.remove()}async update(e,n,r){if(this.shouldShowPill===null)try{this.shouldShowPill=await this.pillExtensionStorage.get()}catch(i){Re.warn("Failed to get showPill option from storage",i),this.shouldShowPill=!1}if(!this.shouldShowPill){this.hide();return}if(this.ensurePillExists(),this.pillElement!=null){this.pillElement.textContent=e;const i=UU(n,r,this.pillElement);Object.entries(i).forEach(([o,l])=>{const c=o.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase();this.pillElement?.style.setProperty(c,l)})}}ensurePillExists(){(this.pillElement==null||!xd(this.targetDocument).contains(this.pillElement))&&this.initPill()}}const $U={position:"fixed",pointerEvents:"none",zIndex:"2147483647",backgroundColor:"#157ad8",color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"12px",fontFamily:"monospace",whiteSpace:"nowrap",maxWidth:"300px",overflow:"hidden",textOverflow:"ellipsis"};function UU(t,e,n){const r={...$U};e?.color!=null&&(r.backgroundColor=e.color);const i=4;let o=24,l=300;if(n){Object.entries(r).forEach(([E,A])=>{const _=E.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase();n.style.setProperty(_,String(A))}),n.offsetHeight;const p=n.getBoundingClientRect();l=p.width,o=p.height}let c=t.bottom+i,{left:f}=t;const g=window.innerWidth;f+l>g&&(f=t.right-l);const h=window.innerHeight;return c+o>h&&(c=t.top-o-i),r.top=`${c}px`,r.left=`${f}px`,r}const BU=["top","right","bottom","left"];function r1(t,e){return typeof t=="function"?t(e):t}function i1(t){return t.split("-")[0]}function Ux(t){return t.split("-")[1]}function ZU(t){return t==="x"?"y":"x"}function jU(t){return t==="y"?"height":"width"}const VU=new Set(["top","bottom"]);function o1(t){return VU.has(i1(t))?"y":"x"}function zU(t){return ZU(o1(t))}function HU(t){return{top:0,right:0,bottom:0,left:0,...t}}function GU(t){return typeof t!="number"?HU(t):{top:t,right:t,bottom:t,left:t}}function A0(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function Bx(t,e,n){let{reference:r,floating:i}=t;const o=o1(e),l=zU(e),c=jU(l),f=i1(e),g=o==="y",y=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,p=r[c]/2-i[c]/2;let E;switch(f){case"top":E={x:y,y:r.y-i.height};break;case"bottom":E={x:y,y:r.y+r.height};break;case"right":E={x:r.x+r.width,y:h};break;case"left":E={x:r.x-i.width,y:h};break;default:E={x:r.x,y:r.y}}switch(Ux(e)){case"start":E[l]-=p*(n&&g?-1:1);break;case"end":E[l]+=p*(n&&g?-1:1);break}return E}const qU=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:l}=n,c=o.filter(Boolean),f=await(l.isRTL==null?void 0:l.isRTL(e));let g=await l.getElementRects({reference:t,floating:e,strategy:i}),{x:y,y:h}=Bx(g,r,f),p=r,E={},A=0;for(let _=0;_<c.length;_++){const{name:I,fn:C}=c[_],{x:v,y:T,data:S,reset:O}=await C({x:y,y:h,initialPlacement:r,placement:p,strategy:i,middlewareData:E,rects:g,platform:l,elements:{reference:t,floating:e}});y=v??y,h=T??h,E={...E,[I]:{...E[I],...S}},O&&A<=50&&(A++,typeof O=="object"&&(O.placement&&(p=O.placement),O.rects&&(g=O.rects===!0?await l.getElementRects({reference:t,floating:e,strategy:i}):O.rects),{x:y,y:h}=Bx(g,p,f)),_=-1)}return{x:y,y:h,placement:p,strategy:i,middlewareData:E}};async function Zx(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:l,elements:c,strategy:f}=t,{boundary:g="clippingAncestors",rootBoundary:y="viewport",elementContext:h="floating",altBoundary:p=!1,padding:E=0}=r1(e,t),A=GU(E),I=c[p?h==="floating"?"reference":"floating":h],C=A0(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(I)))==null||n?I:I.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(c.floating)),boundary:g,rootBoundary:y,strategy:f})),v=h==="floating"?{x:r,y:i,width:l.floating.width,height:l.floating.height}:l.reference,T=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c.floating)),S=await(o.isElement==null?void 0:o.isElement(T))?await(o.getScale==null?void 0:o.getScale(T))||{x:1,y:1}:{x:1,y:1},O=A0(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:v,offsetParent:T,strategy:f}):v);return{top:(C.top-O.top+A.top)/S.y,bottom:(O.bottom-C.bottom+A.bottom)/S.y,left:(C.left-O.left+A.left)/S.x,right:(O.right-C.right+A.right)/S.x}}function jx(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Vx(t){return BU.some(e=>t[e]>=0)}const WU=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=r1(t,e);switch(r){case"referenceHidden":{const o=await Zx(e,{...i,elementContext:"reference"}),l=jx(o,n.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:Vx(l)}}}case"escaped":{const o=await Zx(e,{...i,altBoundary:!0}),l=jx(o,n.floating);return{data:{escapedOffsets:l,escaped:Vx(l)}}}default:return{}}}}},KU=new Set(["left","top"]);async function YU(t,e){const{placement:n,platform:r,elements:i}=t,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),l=i1(n),c=Ux(n),f=o1(n)==="y",g=KU.has(l)?-1:1,y=o&&f?-1:1,h=r1(e,t);let{mainAxis:p,crossAxis:E,alignmentAxis:A}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return c&&typeof A=="number"&&(E=c==="end"?A*-1:A),f?{x:E*y,y:p*g}:{x:p*g,y:E*y}}const QU=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:o,placement:l,middlewareData:c}=e,f=await YU(e,t);return l===((n=c.offset)==null?void 0:n.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:i+f.x,y:o+f.y,data:{...f,placement:l}}}}},s1=Math.min,bg=Math.max,I0=Math.round,C0=Math.floor,Hc=t=>({x:t,y:t});function R0(){return typeof window<"u"}function Eg(t){return zx(t)?(t.nodeName||"").toLowerCase():"#document"}function Zl(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Gc(t){var e;return(e=(zx(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function zx(t){return R0()?t instanceof Node||t instanceof Zl(t).Node:!1}function tc(t){return R0()?t instanceof Element||t instanceof Zl(t).Element:!1}function qc(t){return R0()?t instanceof HTMLElement||t instanceof Zl(t).HTMLElement:!1}function Hx(t){return!R0()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Zl(t).ShadowRoot}const XU=new Set(["inline","contents"]);function Gy(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=nc(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!XU.has(i)}const JU=new Set(["table","td","th"]);function eB(t){return JU.has(Eg(t))}const tB=[":popover-open",":modal"];function x0(t){return tB.some(e=>{try{return t.matches(e)}catch{return!1}})}const nB=["transform","translate","scale","rotate","perspective"],rB=["transform","translate","scale","rotate","perspective","filter"],iB=["paint","layout","strict","content"];function a1(t){const e=l1(),n=tc(t)?nc(t):t;return nB.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||rB.some(r=>(n.willChange||"").includes(r))||iB.some(r=>(n.contain||"").includes(r))}function oB(t){let e=Ud(t);for(;qc(e)&&!wg(e);){if(a1(e))return e;if(x0(e))return null;e=Ud(e)}return null}function l1(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const sB=new Set(["html","body","#document"]);function wg(t){return sB.has(Eg(t))}function nc(t){return Zl(t).getComputedStyle(t)}function N0(t){return tc(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ud(t){if(Eg(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Hx(t)&&t.host||Gc(t);return Hx(e)?e.host:e}function Gx(t){const e=Ud(t);return wg(e)?t.ownerDocument?t.ownerDocument.body:t.body:qc(e)&&Gy(e)?e:Gx(e)}function qy(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=Gx(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),l=Zl(i);if(o){const c=u1(l);return e.concat(l,l.visualViewport||[],Gy(i)?i:[],c&&n?qy(c):[])}return e.concat(i,qy(i,[],n))}function u1(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function qx(t){const e=nc(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=qc(t),o=i?t.offsetWidth:n,l=i?t.offsetHeight:r,c=I0(n)!==o||I0(r)!==l;return c&&(n=o,r=l),{width:n,height:r,$:c}}function c1(t){return tc(t)?t:t.contextElement}function Tg(t){const e=c1(t);if(!qc(e))return Hc(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:o}=qx(e);let l=(o?I0(n.width):n.width)/r,c=(o?I0(n.height):n.height)/i;return(!l||!Number.isFinite(l))&&(l=1),(!c||!Number.isFinite(c))&&(c=1),{x:l,y:c}}const aB=Hc(0);function Wx(t){const e=Zl(t);return!l1()||!e.visualViewport?aB:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function lB(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Zl(t)?!1:e}function jh(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),o=c1(t);let l=Hc(1);e&&(r?tc(r)&&(l=Tg(r)):l=Tg(t));const c=lB(o,n,r)?Wx(o):Hc(0);let f=(i.left+c.x)/l.x,g=(i.top+c.y)/l.y,y=i.width/l.x,h=i.height/l.y;if(o){const p=Zl(o),E=r&&tc(r)?Zl(r):r;let A=p,_=u1(A);for(;_&&r&&E!==A;){const I=Tg(_),C=_.getBoundingClientRect(),v=nc(_),T=C.left+(_.clientLeft+parseFloat(v.paddingLeft))*I.x,S=C.top+(_.clientTop+parseFloat(v.paddingTop))*I.y;f*=I.x,g*=I.y,y*=I.x,h*=I.y,f+=T,g+=S,A=Zl(_),_=u1(A)}}return A0({width:y,height:h,x:f,y:g})}function O0(t,e){const n=N0(t).scrollLeft;return e?e.left+n:jh(Gc(t)).left+n}function Kx(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-O0(t,n),i=n.top+e.scrollTop;return{x:r,y:i}}function uB(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const o=i==="fixed",l=Gc(r),c=e?x0(e.floating):!1;if(r===l||c&&o)return n;let f={scrollLeft:0,scrollTop:0},g=Hc(1);const y=Hc(0),h=qc(r);if((h||!h&&!o)&&((Eg(r)!=="body"||Gy(l))&&(f=N0(r)),qc(r))){const E=jh(r);g=Tg(r),y.x=E.x+r.clientLeft,y.y=E.y+r.clientTop}const p=l&&!h&&!o?Kx(l,f):Hc(0);return{width:n.width*g.x,height:n.height*g.y,x:n.x*g.x-f.scrollLeft*g.x+y.x+p.x,y:n.y*g.y-f.scrollTop*g.y+y.y+p.y}}function cB(t){return Array.from(t.getClientRects())}function fB(t){const e=Gc(t),n=N0(t),r=t.ownerDocument.body,i=bg(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=bg(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let l=-n.scrollLeft+O0(t);const c=-n.scrollTop;return nc(r).direction==="rtl"&&(l+=bg(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:l,y:c}}const Yx=25;function dB(t,e){const n=Zl(t),r=Gc(t),i=n.visualViewport;let o=r.clientWidth,l=r.clientHeight,c=0,f=0;if(i){o=i.width,l=i.height;const y=l1();(!y||y&&e==="fixed")&&(c=i.offsetLeft,f=i.offsetTop)}const g=O0(r);if(g<=0){const y=r.ownerDocument,h=y.body,p=getComputedStyle(h),E=y.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,A=Math.abs(r.clientWidth-h.clientWidth-E);A<=Yx&&(o-=A)}else g<=Yx&&(o+=g);return{width:o,height:l,x:c,y:f}}const hB=new Set(["absolute","fixed"]);function pB(t,e){const n=jh(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,o=qc(t)?Tg(t):Hc(1),l=t.clientWidth*o.x,c=t.clientHeight*o.y,f=i*o.x,g=r*o.y;return{width:l,height:c,x:f,y:g}}function Qx(t,e,n){let r;if(e==="viewport")r=dB(t,n);else if(e==="document")r=fB(Gc(t));else if(tc(e))r=pB(e,n);else{const i=Wx(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return A0(r)}function Xx(t,e){const n=Ud(t);return n===e||!tc(n)||wg(n)?!1:nc(n).position==="fixed"||Xx(n,e)}function gB(t,e){const n=e.get(t);if(n)return n;let r=qy(t,[],!1).filter(c=>tc(c)&&Eg(c)!=="body"),i=null;const o=nc(t).position==="fixed";let l=o?Ud(t):t;for(;tc(l)&&!wg(l);){const c=nc(l),f=a1(l);!f&&c.position==="fixed"&&(i=null),(o?!f&&!i:!f&&c.position==="static"&&!!i&&hB.has(i.position)||Gy(l)&&!f&&Xx(t,l))?r=r.filter(y=>y!==l):i=c,l=Ud(l)}return e.set(t,r),r}function mB(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const l=[...n==="clippingAncestors"?x0(e)?[]:gB(e,this._c):[].concat(n),r],c=l[0],f=l.reduce((g,y)=>{const h=Qx(e,y,i);return g.top=bg(h.top,g.top),g.right=s1(h.right,g.right),g.bottom=s1(h.bottom,g.bottom),g.left=bg(h.left,g.left),g},Qx(e,c,i));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function yB(t){const{width:e,height:n}=qx(t);return{width:e,height:n}}function vB(t,e,n){const r=qc(e),i=Gc(e),o=n==="fixed",l=jh(t,!0,o,e);let c={scrollLeft:0,scrollTop:0};const f=Hc(0);function g(){f.x=O0(i)}if(r||!r&&!o)if((Eg(e)!=="body"||Gy(i))&&(c=N0(e)),r){const E=jh(e,!0,o,e);f.x=E.x+e.clientLeft,f.y=E.y+e.clientTop}else i&&g();o&&!r&&i&&g();const y=i&&!r&&!o?Kx(i,c):Hc(0),h=l.left+c.scrollLeft-f.x-y.x,p=l.top+c.scrollTop-f.y-y.y;return{x:h,y:p,width:l.width,height:l.height}}function f1(t){return nc(t).position==="static"}function Jx(t,e){if(!qc(t)||nc(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Gc(t)===n&&(n=n.ownerDocument.body),n}function eN(t,e){const n=Zl(t);if(x0(t))return n;if(!qc(t)){let i=Ud(t);for(;i&&!wg(i);){if(tc(i)&&!f1(i))return i;i=Ud(i)}return n}let r=Jx(t,e);for(;r&&eB(r)&&f1(r);)r=Jx(r,e);return r&&wg(r)&&f1(r)&&!a1(r)?n:r||oB(t)||n}const _B=async function(t){const e=this.getOffsetParent||eN,n=this.getDimensions,r=await n(t.floating);return{reference:vB(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function bB(t){return nc(t).direction==="rtl"}const EB={convertOffsetParentRelativeRectToViewportRelativeRect:uB,getDocumentElement:Gc,getClippingRect:mB,getOffsetParent:eN,getElementRects:_B,getClientRects:cB,getDimensions:yB,getScale:Tg,isElement:tc,isRTL:bB};function tN(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function wB(t,e){let n=null,r;const i=Gc(t);function o(){var c;clearTimeout(r),(c=n)==null||c.disconnect(),n=null}function l(c,f){c===void 0&&(c=!1),f===void 0&&(f=1),o();const g=t.getBoundingClientRect(),{left:y,top:h,width:p,height:E}=g;if(c||e(),!p||!E)return;const A=C0(h),_=C0(i.clientWidth-(y+p)),I=C0(i.clientHeight-(h+E)),C=C0(y),T={rootMargin:-A+"px "+-_+"px "+-I+"px "+-C+"px",threshold:bg(0,s1(1,f))||1};let S=!0;function O($){const V=$[0].intersectionRatio;if(V!==f){if(!S)return l();V?l(!1,V):r=setTimeout(()=>{l(!1,1e-7)},1e3)}V===1&&!tN(g,t.getBoundingClientRect())&&l(),S=!1}try{n=new IntersectionObserver(O,{...T,root:i.ownerDocument})}catch{n=new IntersectionObserver(O,T)}n.observe(t)}return l(!0),o}function nN(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:f=!1}=r,g=c1(t),y=i||o?[...g?qy(g):[],...qy(e)]:[];y.forEach(C=>{i&&C.addEventListener("scroll",n,{passive:!0}),o&&C.addEventListener("resize",n)});const h=g&&c?wB(g,n):null;let p=-1,E=null;l&&(E=new ResizeObserver(C=>{let[v]=C;v&&v.target===g&&E&&(E.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var T;(T=E)==null||T.observe(e)})),n()}),g&&!f&&E.observe(g),E.observe(e));let A,_=f?jh(t):null;f&&I();function I(){const C=jh(t);_&&!tN(_,C)&&n(),_=C,A=requestAnimationFrame(I)}return n(),()=>{var C;y.forEach(v=>{i&&v.removeEventListener("scroll",n),o&&v.removeEventListener("resize",n)}),h?.(),(C=E)==null||C.disconnect(),E=null,f&&cancelAnimationFrame(A)}}const TB=QU,SB=WU,AB=(t,e,n)=>{const r=new Map,i={platform:EB,...n},o={...i.platform,_c:r};return qU(t,e,{...i,platform:o})},d1="#157ad8",IB={position:"fixed",pointerEvents:"none",boxSizing:"border-box",zIndex:"2147483646",backgroundColor:"transparent",border:"4px solid",borderColor:d1};class L0{constructor(e,n=document){this.autoUpdateCleanup=null,this.id=ja(),this.options=e??{type:null,color:d1},this.targetDocument=n,this.pill=new FU(this.id,this.targetDocument)}getElementId(){return`highlighter-${this.id}`}getElement(){return this.targetDocument.getElementById(this.getElementId())}getOrCreateElement(){const e=this.getElement();if(e!=null)return e;const n=this.targetDocument.createElement("div");return n.setAttribute("id",this.getElementId()),xd(this.targetDocument).appendChild(n),n}show(e,n){n!=null&&(this.options=n),this.updateHighlight(e)}attachToElement(e){this.autoUpdateCleanup?.();const n=this.getOrCreateElement();this.autoUpdateCleanup=nN(e,n,()=>{const r=e.getBoundingClientRect();this.show(r)})}update(e){return this.options=e(this.options),this.options}hide(){this.autoUpdateCleanup?.(),this.autoUpdateCleanup=null,this.getElement()?.remove(),this.pill.remove()}updateHighlight(e){const n=this.getOrCreateElement(),r=CB(e,this.options);Object.entries(r).forEach(([i,o])=>{const l=i.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase();n.style.setProperty(l,o)}),this.options?.selector?this.pill.update(this.options.selector,e,this.options):this.pill.hide()}}function CB(t,e){const{width:n,height:r,top:i,left:o}=t,l={...IB,borderColor:e?.color??d1,display:e?.type==="none"?"none":"block"};if(e?.type==="none")return l;switch(e?.type){case"inset":l.top=`${i}px`,l.left=`${o}px`,l.width=`${n}px`,l.height=`${r}px`;break;case"outset":l.top=`${i-4}px`,l.left=`${o-4}px`,l.width=`${n+8}px`,l.height=`${r+8}px`;break;default:l.top=`${i-2}px`,l.left=`${o-2}px`,l.width=`${n+4}px`,l.height=`${r+4}px`}return l}function RB(t,e,n={}){const{interval:r=100,immediate:i=!0}=n;let o=null,l=!1;const c=y=>o===null?!0:o.top!==y.top||o.left!==y.left||o.width!==y.width||o.height!==y.height,f=async()=>{if(l)return;const y=await t();c(y)&&(o=y,e(y))};i&&f();const g=setInterval(()=>{f()},r);return()=>{l=!0,clearInterval(g)}}class D0{constructor(e,n,r,i,o=[]){this.cleanupFunctions=[],this.highlight=null,this.highlightMoveUnlistener=null,this.resultId=e,this.crossId=n,this.boxing=r,this.domInfo=i,this.iframes=o}setText(e){ec.getWindowById(this.crossId)?.send({action:"SET_TEXT",value:{resultId:this.resultId,text:e}})}async getText(){return await new Promise(e=>{this.getWindow()?.send({action:"GET_TEXT",value:this.resultId}).then(n=>{e(n?.value??null)})})}async getAttributes(){return this.domInfo.attributes??{}}async getTagName(){return this.domInfo.tagName??""}async getRect(){const e=await this.updateBoxing();return e!=null&&(this.boxing=e),new DOMRect(this.boxing.left,this.boxing.top,this.boxing.width,this.boxing.height)}remove(){ec.getWindowById(this.crossId)?.send({action:"REMOVE",value:this.resultId})}async isInViewport(){return await new Promise(e=>{setTimeout(()=>{e(!1)},150),this.getWindow()?.send({action:"IS_IN_VIEWPORT",value:this.resultId}).then(n=>{e(n?.value!=null)}).catch(()=>{e(!1)})})}async safeIsInViewport(){return this.isInViewport()}async isRendered(){return await new Promise(e=>{setTimeout(()=>{e(!1)},150),this.getWindow()?.send({action:"IS_RENDERED",value:this.resultId}).then(n=>{e(n?.value===!0)}).catch(()=>{e(!1)})})}async safeIsRendered(){return this.isRendered()}onClick(e,n=!0){const r=n?null:ja(),i={action:"SETUP_TRIGGER",streamId:r??void 0,value:{resultId:this.resultId,triggerType:"click",once:n}};if(n)return this.getWindow()?.send(i).then(()=>{e()}),()=>null;{const o=this.getWindow()?.stream(r,()=>{e()});return typeof o=="function"&&this.cleanupFunctions.push(o),this.getWindow()?.send(i,!1),typeof o=="function"?o:null}}onMousedown(e,n=!0){const r=n?null:ja(),i={action:"SETUP_TRIGGER",streamId:r??void 0,value:{resultId:this.resultId,triggerType:"mousedown",once:n}};if(n){let o=!1;return this.getWindow()?.send(i).then(()=>{o||e()}),()=>o=!0}else{const o=this.getWindow()?.stream(r,()=>{e()});return typeof o=="function"&&this.cleanupFunctions.push(o),this.getWindow()?.send(i,!1),typeof o=="function"?o:null}}onHover(e,n=!0){const r=n?null:ja(),i={action:"SETUP_TRIGGER",streamId:r??void 0,value:{resultId:this.resultId,triggerType:"hover",once:n}};if(n){let o=!1;return this.getWindow()?.send(i).then(()=>{o||e()}),()=>o=!0}else{const o=this.getWindow()?.stream(r,()=>{e()});return typeof o=="function"&&this.cleanupFunctions.push(o),this.getWindow()?.send(i,!1),typeof o=="function"?o:null}}onMouseLeave(e,n=!0){const r=n?null:ja(),i={action:"SETUP_TRIGGER",streamId:r??void 0,value:{resultId:this.resultId,triggerType:"mouseleave",once:n}};if(n){let o=!1;return this.getWindow()?.send(i).then(()=>{o||e()}),()=>o=!0}else{const o=this.getWindow()?.stream(r,()=>{e()});return typeof o=="function"&&this.cleanupFunctions.push(o),this.getWindow()?.send(i,!1),typeof o=="function"?o:null}}onFocus(e,n=!0){const r=n?null:ja(),i={action:"SETUP_TRIGGER",streamId:r??void 0,value:{resultId:this.resultId,triggerType:"focus",once:n}};if(n){let o=!1;return this.getWindow()?.send(i).then(()=>{o||e()}),()=>o=!0}else{const o=this.getWindow()?.stream(r,()=>{e()});return typeof o=="function"&&this.cleanupFunctions.push(o),this.getWindow()?.send(i,!1),typeof o=="function"?o:null}}onBlur(e,n=!0){const r=n?null:ja(),i={action:"SETUP_TRIGGER",streamId:r??void 0,value:{resultId:this.resultId,triggerType:"blur",once:n}};if(n){let o=!1;return this.getWindow()?.send(i).then(()=>{o||e()}),()=>o=!0}else{const o=this.getWindow()?.stream(r,()=>{e()});return typeof o=="function"&&this.cleanupFunctions.push(o),this.getWindow()?.send(i,!1),typeof o=="function"?o:null}}onChange(e,n=!0){const r=n?null:ja(),i={action:"SETUP_TRIGGER",streamId:r??void 0,value:{resultId:this.resultId,triggerType:"change",once:n}};if(n){let o=!1;return this.getWindow()?.send(i).then(()=>{o||e(void 0)}),()=>o=!0}else{const o=this.getWindow()?.stream(r,()=>{e(void 0)});return typeof o=="function"&&this.cleanupFunctions.push(o),this.getWindow()?.send(i,!1),typeof o=="function"?o:null}}onAppear(e,n=!0,r=150){let i=null,o=!0;(async()=>{let f=!1,g=await this.isInViewport();g&&(e(),f=!0);const y=async()=>{const h=g;g=await this.isInViewport(),h!==g&&g&&o&&(!n||n&&!f)&&(e(),f=!0)};i=setInterval(()=>{y()},r)})();const c=()=>{o=!1,i!=null&&clearInterval(i)};return this.cleanupFunctions.push(c),c}onDisappear(e,n=!0,r=150){let i=null,o=!0;(async()=>{let f=!1,g=await this.isInViewport();g||(e(),f=!0);const y=async()=>{const h=g;g=await this.isInViewport(),h!==g&&(g||o&&(!n||n&&!f)&&(e(),f=!0))};i=setInterval(()=>{y()},r)})();const c=()=>{o=!1,i!=null&&clearInterval(i)};return this.cleanupFunctions.push(c),c}onInput(e,n){const r=n===!0?null:ja(),i={action:"SETUP_TRIGGER",streamId:r??void 0,value:{resultId:this.resultId,triggerType:"input",once:n}};if(n===!0){let o=!1;return this.getWindow()?.send(i).then(()=>{o||e(null)}),()=>o=!0}else{const o=this.getWindow()?.stream(r,l=>{e(l.value)})??null;return typeof o=="function"&&this.cleanupFunctions.push(o),this.getWindow()?.send(i,!1),o}}async updateBoxing(){return await this.getWindow()?.send({action:"GET_BOXING",value:{resultId:this.resultId}}).then(e=>{const n=e?.value?.boxing??vx;return this.iframes.filter(zc).forEach(r=>{const i=r.getBoundingClientRect(),o=window.getComputedStyle(r);n.top+=i.top+(o.borderTopWidth!=null?P0(o.borderTopWidth):0)+(o.paddingTop!=null?P0(o.paddingTop):0),n.right+=i.left,n.bottom+=i.top,n.left+=i.left+(o.borderLeftWidth!=null?P0(o.borderLeftWidth):0)+(o.paddingLeft!=null?P0(o.paddingLeft):0)}),n})??null}async focus(){this.getWindow()?.send({action:"SCROLL_INTO_VIEW"})}onMove(e){let n=null;const r=async()=>{const l=await this.getRect();n==null&&(n=l),!(n.x===l.x&&n.y===l.y&&n.width===l.width&&n.height===l.height)&&(n=l,e({rect:l}))},i=setInterval(()=>{r()},250),o=()=>{clearInterval(i)};return this.cleanupFunctions.push(o),o}onRemove(e){const n=ja(),r={action:"SETUP_TRIGGER",streamId:n,value:{resultId:this.resultId,triggerType:"remove"}},i=this.getWindow()?.stream(n,()=>{e()})??(()=>{});return this.cleanupFunctions.push(i),this.getWindow()?.send(r,!1),i}getWindow(){return ec.getWindowById(this.crossId)??null}destroy(){this.cleanupFunctions.forEach(e=>{e()}),this.cleanupFunctions=[]}attachHighlight(e){this.detachHighlight(),this.highlight=new L0({color:e.color,type:e.type,selector:e.selector},document),this.highlightMoveUnlistener=RB(async()=>this.getRect(),n=>this.highlight?.show(n))}detachHighlight(){this.highlightMoveUnlistener?.(),this.highlightMoveUnlistener=null,this.highlight?.hide(),this.highlight=null}async attachBeacon(e,n="v1"){const r=new S0(this,e);return r.render(),new xB(r)}}class xB{constructor(e){this.onClick=n=>{this.beacon.onClick(n)},this.onMouseEnter=n=>{this.beacon.onMouseEnter(n)},this.onMouseLeave=n=>{this.beacon.onMouseLeave(n)},this.destroy=()=>{this.beacon.unmount()},this.getTarget=()=>this.beacon.element,this.beacon=e}}function P0(t){return t==null||t===""?0:parseInt(t.replace("px","").trim(),10)}const h1=t=>{t.parentNode?.removeChild!==null&&t.parentNode?.removeChild(t)};function M0(t){const e=t.getBoundingClientRect();return e.width>0&&e.height>0}function rN(t){return"offsetParent"in t&&t?.offsetParent!=null}function iN(t){return t.isConnected!=null?!!t.isConnected:!0}const oN=t=>{const e=window.getComputedStyle(t);return t.tagName.toUpperCase()==="IFRAME"?!0:e.visibility==="hidden"?!1:e.position==="fixed"?M0(t):rN(t)?iN(t)?sN(t):!1:e.position==="static"?M0(t):!1};function sN(t){const e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView;if(!n)return!1;const r=e.left<n.innerWidth&&e.right>0,i=e.top<n.innerHeight&&e.bottom>0;if(!r||!i)return!1;const o=n.frameElement;return o?sN(o):!0}function $f(t){const e=window.getComputedStyle(t);if(e.visibility==="hidden"||e.display==="none"||!iN(t))return!1;if(t.tagName.toUpperCase()==="IFRAME"){const r=t.ownerDocument.defaultView;if(r){const i=r.frameElement;if(i)return $f(i)}return!0}if(e.position==="fixed"){if(!M0(t))return!1}else if(!rN(t))if(e.position==="static"){if(!M0(t))return!1}else return!1;const n=t.ownerDocument.defaultView;if(n){const r=n.frameElement;if(r)return $f(r)}return!0}const Tu=5,aN=12,Su={very_small:{height:11,svg:{width:"auto",height:"auto",padding:"1px",marginTop:"0px"},text:{padding:"0 3px 0 0",fontSize:"6px"},textWithoutIcon:{padding:"0 3px 0 3px",fontSize:"6px"}},small:{height:20,svg:{width:"20px",height:"14px",marginTop:"3px"},text:{padding:"0 7px 0 0",fontSize:"12px"},textWithoutIcon:{padding:"0 7px 0 7px",fontSize:"12px"}},medium:{height:26,svg:{width:"26px",height:"18px",marginTop:"4px"},text:{padding:"0 12px 0 0",fontSize:"14px"},textWithoutIcon:{padding:"0 12px",fontSize:"12px"}},large:{height:32,svg:{width:"32px",height:"22px",marginTop:"5px"},text:{padding:"0 15px 0 0",fontSize:"14px"},textWithoutIcon:{padding:"0 15px 0 15px",fontSize:"12px"}}},NB={very_small:Su.very_small.height,small:Su.small.height,medium:Su.medium.height,large:Su.large.height},OB=t=>{switch(t){case"top":return"translateX(-50%) translateY(-100%)";case"right":return"translateY(-50%)";case"bottom":return"translateX(-50%)";case"left":return"translateX(-100%) translateY(-50%)";default:return null}},lN=1e4,k0={},uN={};function LB(t){return t==null?!1:k0[t]>lN}function DB(t){t!=null&&(k0[t]<=0&&(k0[t]=0),k0[t]++)}function PB(t,e){t!=null&&(uN[t]||(Re.warn(`The beacon position targeting the following element has been updated ${lN} times. This probably indicates an infinite loop, further updates are cancelled to prevent freezing the application`,e),uN[t]=!0))}const MB=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 612 792">
    <path style='fill: currentColor' d="M306,522.51c21.559,0,39.503-16.516,41.319-38l28.028-334.747c1.631-19.415-4.951-38.607-18.13-52.942 C344.056,82.505,325.468,74.347,306,74.347c-19.47,0-38.056,8.158-51.219,22.474c-13.181,14.335-19.76,33.527-18.128,52.942 l28.028,334.747C266.496,505.994,284.441,522.51,306,522.51z"/>
    <path style='fill: currentColor' d="M306,576.316c-30.198,0-54.669,24.469-54.669,54.668s24.471,54.668,54.669,54.668c30.197,0,54.669-24.469,54.669-54.668 S336.197,576.316,306,576.316z"/>
</svg>`,kB=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" onClick={this.props.onClick}
    className='ll-editor--icon ll-editor--icon-empty'>
</svg>`,FB=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
	<path style='fill: currentColor' d="M12.79,15.2A7.34,7.34,0,0,1,8.6,17.82c-.69,0-1.22-.47-.72-2.57L9.12,9.91c.12-.59.15-.83,0-.83a4.56,4.56,0,0,0-1.45.83l-.34-.67c1.72-1.59,3.48-2.52,4.34-2.52.69,0,.81.93.48,2.36l-1.36,5.53c-.17.69-.1.93.07.93a3.65,3.65,0,0,0,1.53-1ZM13.1,3.41a1.84,1.84,0,0,1-1.81,1.85c-.83,0-1.31-.54-1.33-1.47A1.81,1.81,0,0,1,11.77,2,1.29,1.29,0,0,1,13.1,3.41Z"/>
</svg>`,$B=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 511.625 511.625">
    <path style='fill: currentColor' d="M432.497,157.859c-18.216-22.387-42.959-40.071-74.224-53.049c-31.265-12.976-65.42-19.466-102.456-19.466 c-27.627,0-54.038,3.832-79.233,11.497c-25.196,7.665-46.9,18.024-65.115,31.078c-18.218,13.054-32.71,28.574-43.488,46.559 c-10.779,17.986-16.167,36.847-16.167,56.58c0,22.767,6.866,44.099,20.604,63.982c13.738,19.882,32.519,36.58,56.352,50.09 c-1.671,6.068-3.645,11.84-5.921,17.299c-2.277,5.465-4.326,9.947-6.147,13.438c-1.823,3.491-4.288,7.363-7.402,11.614 c-3.109,4.249-5.462,7.246-7.056,8.99c-1.592,1.746-4.211,4.635-7.855,8.651c-3.641,4.026-5.995,6.644-7.056,7.859 c-0.154,0.071-0.76,0.758-1.822,2.046c-1.062,1.289-1.594,1.934-1.594,1.934l-1.366,2.047c-0.76,1.14-1.101,1.86-1.027,2.158 c0.077,0.298-0.074,1.061-0.454,2.272c-0.381,1.219-0.342,2.13,0.113,2.738v0.228c0.61,2.733,1.938,4.933,3.986,6.599 c2.048,1.669,4.365,2.354,6.944,2.046c9.868-1.215,18.519-2.877,25.956-5.006c39.769-10.174,74.681-28.535,104.733-55.102 c11.381,1.214,22.386,1.822,33.012,1.822c37.034,0,71.189-6.489,102.456-19.472c31.268-12.976,56.009-30.66,74.221-53.044 c18.218-22.378,27.324-46.781,27.324-73.191C459.813,204.645,450.708,180.243,432.497,157.859z"/>
</svg>`,UB=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" >
    <path style='fill: currentColor' d="M5.71,8a4.2,4.2,0,0,1,4.34-4.41c3.36,0,4.45,2.09,4.45,3.45,0,3.41-2.95,2.95-3.25,5.11v.68H8.83v-.8c.25-3.1,2.92-2.81,2.86-4.74a1.4,1.4,0,0,0-1.52-1.61C8.89,5.71,8.33,6.77,8.33,8Zm2.87,5.9h2.81v2.75H8.58Z"/>
</svg>`,BB=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path style='fill: currentColor' d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.507 13.941c-1.512 1.195-3.174 1.931-5.506 1.931-2.334 0-3.996-.736-5.508-1.931l-.493.493c1.127 1.72 3.2 3.566 6.001 3.566 2.8 0 4.872-1.846 5.999-3.566l-.493-.493zm-9.007-5.941c-.828 0-1.5.671-1.5 1.5s.672 1.5 1.5 1.5 1.5-.671 1.5-1.5-.672-1.5-1.5-1.5zm7 0c-.828 0-1.5.671-1.5 1.5s.672 1.5 1.5 1.5 1.5-.671 1.5-1.5-.672-1.5-1.5-1.5z"/>
</svg>`,ZB=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
            <path className='ll-editor--icon-fill' fill="currentColor"
                d="M478.21 334.093L336 256l142.21-78.093c11.795-6.477 15.961-21.384 9.232-33.037l-19.48-33.741c-6.728-11.653-21.72-15.499-33.227-8.523L296 186.718l3.475-162.204C299.763 11.061 288.937 0 275.48 0h-38.96c-13.456 0-24.283 11.061-23.994 24.514L216 186.718 77.265 102.607c-11.506-6.976-26.499-3.13-33.227 8.523l-19.48 33.741c-6.728 11.653-2.562 26.56 9.233 33.037L176 256 33.79 334.093c-11.795 6.477-15.961 21.384-9.232 33.037l19.48 33.741c6.728 11.653 21.721 15.499 33.227 8.523L216 325.282l-3.475 162.204C212.237 500.939 223.064 512 236.52 512h38.961c13.456 0 24.283-11.061 23.995-24.514L296 325.282l138.735 84.111c11.506 6.976 26.499 3.13 33.227-8.523l19.48-33.741c6.728-11.653 2.563-26.559-9.232-33.036z">
            </path>
</svg>`,Sg={textWithIcon:"_textWithIcon_t2uk3_1",textWithoutIcon:"_textWithoutIcon_t2uk3_7"};function cN(t){switch(t){case"info":return FB;case"question":return UB;case"danger":return MB;case"message":return $B;case"smiley":return BB;case"empty":return kB;case"star":return ZB;default:return null}}function fN(t,e){const n=document.createElement("span");return n.innerText=t,n.classList.add(e),n}function dN(t,e){const n=cN(e.icon);if(!(e.label!=null&&e.label.length>0))n!==null&&(t.innerHTML+=n);else{const i=e.label??"";e.icon!=="empty"?(n!==null&&(t.innerHTML+=n),t.appendChild(fN(i,Sg.textWithIcon))):t.appendChild(fN(i,Sg.textWithoutIcon))}}function jB(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}function F0(t){return Object.entries(t).filter(([e,n])=>n!=null&&n!=="").map(([e,n])=>`${jB(e)}: ${n} !important`).join("; ")}function hN(t){const e=t.size??"medium",n=t.position??"right",r=Su[e]??Su.medium,i=`${r.height}px`,o=`${r.height/2}px`,l=t.color??"#157ad8",c=t.text_color??"#fff",f=t.z_index??void 0,g=OB(n),y={zIndex:f,display:"inline-flex",flexWrap:"nowrap",alignItems:"center",height:i,minWidth:i,margin:"0",padding:"0",color:c,lineHeight:i,fontFamily:"Helvetica, Arial, sans-serif",backgroundColor:l,borderRadius:o,overflow:"hidden",cursor:"pointer"};return g!=null&&(y.transform=g),F0(y)}function pN(t){const e=Su[t.size??"medium"]??Su.medium,n=t.text_color??"#fff",r={float:"left",width:e.svg.width,height:e.svg.height,color:n,background:"none",boxShadow:"none",padding:e.svg.padding??"0"};return F0(r)}function gN(t){const e=Su[t.size??"medium"]??Su.medium,n=t.text_color??"#fff",r={display:"inline-flex",alignItems:"center",float:"left",height:e.svg.height,padding:e.text.padding,color:n,fontSize:e.text.fontSize,fontWeight:"normal",textWrap:"nowrap"};return F0(r)}function mN(t){const e=Su[t.size??"medium"]??Su.medium,n=t.text_color??"#fff",r={display:"inline-flex",alignItems:"center",float:"left",height:e.svg.height,padding:e.textWithoutIcon.padding,color:n,fontSize:e.text.fontSize,fontWeight:"normal",textWrap:"nowrap"};return F0(r)}const _a=t=>Math.round(t*1e3)/1e3;function VB(t,e){const n=e.offset??{x:0,y:0},r=e.position??"right";let i="auto";const o="auto",l="auto";let c="auto";const f="fixed",g=t?.dom.getBoundingClientRect()??DOMRect.fromRect({x:0,y:0,width:0,height:0}),y={top:g.top,bottom:g.bottom,left:g.left,right:g.right,width:g.width,height:g.height};switch(t?.dom.ownerDocument===document||t?.iframes.filter(zc).forEach(E=>{const A=E.getBoundingClientRect();y.top+=A.top,y.bottom+=A.top,y.left+=A.left,y.right+=A.left}),r){case"top":c=`${_a(y.left+y.width/2)+n.x}px`,i=`${_a(y.top-Tu)+n.y}px`;break;case"right":c=`${_a(y.left+y.width+Tu)+n.x}px`,i=`${_a(y.top+y.height/2)+n.y}px`;break;case"bottom":c=`${_a(y.left+y.width/2)+n.x}px`,i=`${_a(y.top+y.height+Tu)+n.y}px`;break;case"left":c=`${_a(y.left-Tu)+n.x}px`,i=`${_a(y.top+y.height/2)+n.y}px`;break}return{top:i,right:o,bottom:l,left:c,position:f}}async function zB(t,e){const n=e.offset??{x:0,y:0},r=e.position??"right";let i="auto";const o="auto",l="auto";let c="auto";const f="fixed",g=await t?.getRect();if(g==null)throw new Error("Target boxing is null");switch(r){case"top":c=`${_a(g.left+g.width/2)+n.x}px`,i=`${_a(g.top-Tu)+n.y}px`;break;case"right":c=`${_a(g.left+g.width+Tu)+n.x}px`,i=`${_a(g.top+g.height/2)+n.y}px`;break;case"bottom":c=`${_a(g.left+g.width/2)+n.x}px`,i=`${_a(g.top+g.height+Tu)+n.y}px`;break;case"left":c=`${_a(g.left-Tu)+n.x}px`,i=`${_a(g.top+g.height/2)+n.y}px`;break}return{top:i,right:o,bottom:l,left:c,position:f}}function HB(t,e){let n=null;return{debouncedFn:()=>{n!==null&&window.clearTimeout(n),n=window.setTimeout(()=>{n=null,t()},e)},clear:()=>{n!==null&&(window.clearTimeout(n),n=null)}}}function GB(t,e){const n=t.onDisappear(()=>{e(!1)},!1),r=t.onAppear(()=>{e(!0)},!1);return()=>{n(),r()}}function qB(t,e){const n=t.dom.parentElement??t.dom,r=new MutationObserver(e);return r.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style","class"]}),r}class p1{constructor(e){this.cleanups=[],this.onClick=(n,r)=>{this.element.addEventListener("click",n,{once:r});const i=()=>this.element.removeEventListener("click",n);return r||this.cleanups.push(i),i},this.onMouseEnter=(n,r)=>{this.element.addEventListener("mouseenter",n,{once:r});const i=()=>this.element.removeEventListener("mouseenter",n);return r||this.cleanups.push(i),i},this.onMouseLeave=(n,r)=>{this.element.addEventListener("mouseleave",n,{once:r});const i=()=>this.element.removeEventListener("mouseleave",n);return r||this.cleanups.push(i),i},this.element=e}onKeydown(e,n){this.element.addEventListener("keydown",e,{once:n});const r=()=>this.element.removeEventListener("keydown",e);return n||this.cleanups.push(r),r}cleanup(){this.cleanups.forEach(e=>e()),this.cleanups=[]}}const $0=(t,e=[])=>t===null?e:(e.push(t),t.parentElement!=null?$0(t.parentElement,e):e);class WB{constructor(){this._listeners=[]}setupScrollListeners(e,n){const r=$0(e.dom),i=()=>{n()};this.addScrollListener(window,()=>{this.removeScrollListener(e.dom.ownerDocument,i),n()}),this.addScrollListener(e.dom.ownerDocument,i),r.forEach(o=>{this.addScrollListener(o,i)})}addScrollListener(e,n){e.addEventListener("scroll",n,{passive:!0}),this._listeners.push({element:e,callback:n})}removeScrollListener(e,n){e.removeEventListener("scroll",n),this._listeners=this._listeners.filter(r=>r.element!==e)}cleanup(){this._listeners.splice(0).forEach(({element:e,callback:n})=>{e&&e.removeEventListener("scroll",n)})}}const U0=[];let yN=(eh=class{constructor(e,n,r=null,i=null){this.target=null,this.element=null,this.mutationObserver=null,this.identifier=null,this._isVisible=!0,this._eventManager=null,this.container=e,this.target=n,this.options={...eh.defaultOptions,...r??{}},this._scrollManager=new WB,this._boundOnWindowResize=this.onWindowResize.bind(this),this._boundSetBeaconPosition=this.setBeaconPosition.bind(this);const o=HB(this._boundSetBeaconPosition,16);this._debouncedSetBeaconPosition=o.debouncedFn,this._clearDebouncedPosition=o.clear;const l=document.createElement("div");l.classList.add(eh.getCssClassName()),dN(l,{icon:r?.icon,label:this.options.label}),this.element=l,this._eventManager=new p1(l),i===null?this.identifier=t0():this.identifier=i;const c=U0.findIndex(f=>f.identifier===this.identifier);c>-1&&(U0[c].unmount(),U0.splice(c,1)),U0.push(this)}static getCssClassName(){return"d41b89d10619cdd3e30fb6c401c17c7d9"}render(){this.container.contains(this.element)||(this.container.appendChild(this.element),this.applyStyles(),this.setupObservers(),this.setupResize(),this.setupScroll()),this.setBeaconPosition()}unmount(){this.target!==null&&this.target.destroy(),this.element!=null&&h1(this.element),window.removeEventListener("resize",this._boundOnWindowResize),this._clearDebouncedPosition(),this._scrollManager.cleanup(),this.mutationObserver?.disconnect(),this._unlistenVisibility&&this._unlistenVisibility(),this._unlistenMove?.()}getPosition(){return VB(this.target,this.options)}onWindowResize(){this.element!==null&&this.setBeaconPosition()}setupResize(){window.addEventListener("resize",this._boundOnWindowResize)}setupObservers(){this.target!=null&&(this._unlistenVisibility=GB(this.target,e=>{this._isVisible=e,e?(this.element?.style.setProperty("visibility","visible"),this.setBeaconPosition()):this.element?.style.setProperty("visibility","hidden")}),this.mutationObserver=qB(this.target,this._debouncedSetBeaconPosition),this._unlistenMove=this.target.onMove(()=>{this._debouncedSetBeaconPosition()}))}setupScroll(){this.target!=null&&this._scrollManager.setupScrollListeners(this.target,this._boundSetBeaconPosition)}applyStyles(){if(this.element!=null){this.element.setAttribute("style",hN(this.options));const e=this.element.children.length;for(let n=0;n<e;n++){const r=this.element.children[n],i=r.classList.contains(Sg.textWithIcon),o=r.classList.contains(Sg.textWithoutIcon);i?r.setAttribute("style",gN(this.options)):o?r.setAttribute("style",mN(this.options)):r.setAttribute("style",pN(this.options))}this.setBeaconPosition()}}setBeaconPosition(){if(!this._isVisible)return;if(LB(this.identifier)){PB(this.identifier,this.target);return}const e=this.getPosition();Object.keys(e).some(n=>this.element?.style[n]!==e[n])&&(Object.keys(e).forEach(n=>{this.element?.style.setProperty(n,e[n])}),DB(this.identifier))}onClick(e,n){return this._eventManager?.onClick(e,n)??(()=>{})}onMouseEnter(e,n){return this._eventManager?.onMouseEnter(e,n)??(()=>{})}onMouseLeave(e,n){return this._eventManager?.onMouseLeave(e,n)??(()=>{})}},eh.defaultOptions=T0,eh);class KB extends yN{get shift(){return{vertical:0,horizontal:0}}constructor(e,n="bottom-left",r=null){super(e,null,r,null),this.position=n}getPosition(){let e="auto",n="auto",r="auto",i="auto";const o="fixed",l=`${aN}px`;switch(this.position){case"top-left":e=l,i=l;break;case"top-right":e=l,n=l;break;case"bottom-right":r=l,n=l;break;case"bottom-left":r=l,i=l;break}return{top:e,right:n,bottom:r,left:i,position:o}}}const r_=class r_{constructor(e,n,r=null,i=null){this.target=null,this.element=null,this.mutationObserver=null,this.intersectionObserver=null,this.identifier=null,this._isVisible=!0,this._eventManager=null,this.container=e,this.target=n,this.options={...r_.defaultOptions,...r};const o=document.createElement("div");o.classList.add(r_.getCssClassName()),dN(o,{icon:r?.icon,label:this.options.label}),this.element=o,this._eventManager=new p1(o),i===null?this.identifier=t0():this.identifier=i,this.unlistenMove=this.target?.onMove(()=>{this.setBeaconPosition()}),this.unlistenDisappear=this.target?.onDisappear(()=>{this._isVisible=!1,this.hide()},!1),this.unlistenRemove=this.target?.onRemove(()=>{this.unmount()}),this.unlistenAppear=this.target?.onAppear(()=>{this._isVisible=!0,this.show()},!1)}static getCssClassName(){return"d41b89d10619cdd3e30fb6c401c17c7d9"}show(){this.setBeaconPosition(),this.element?.style.setProperty("display","inline-flex","important")}hide(){this.element?.style.setProperty("display","none","important")}render(){this.container.contains(this.element)||(this.container.appendChild(this.element),this.applyStyles()),this.setBeaconPosition()}unmount(){this.target!=null&&this.target.destroy(),this.element?.remove!=null&&this.element.remove(),this.unlistenMove&&this.unlistenMove(),this.unlistenDisappear&&this.unlistenDisappear(),this.unlistenAppear&&this.unlistenAppear(),this.unlistenRemove&&this.unlistenRemove()}async getPosition(){return zB(this.target,this.options)}applyStyles(){if(this.element!=null){this.element.setAttribute("style",hN(this.options));const e=this.element.children.length;for(let n=0;n<e;n++){const r=this.element.children[n],i=r.classList.contains(Sg.textWithIcon),o=r.classList.contains(Sg.textWithoutIcon);i?r.setAttribute("style",gN(this.options)):o?r.setAttribute("style",mN(this.options)):r.setAttribute("style",pN(this.options))}this.setBeaconPosition()}}async setBeaconPosition(){if(!this._isVisible)return;const e=await this.getPosition();Object.keys(e).forEach(n=>{this.element?.style.setProperty(n,e[n])})}onClick(e,n){return this._eventManager?.onClick(e,n)??(()=>{})}onMouseEnter(e,n){return this._eventManager?.onMouseEnter(e,n)??(()=>{})}onMouseLeave(e,n){return this._eventManager?.onMouseLeave(e,n)??(()=>{})}};r_.defaultOptions=T0;let g1=r_;function m1(t){if(t.target instanceof D0)return new S0(t.target,t.options);if(!t.container)throw new Error("container is required");if(t.target==null)return new KB(t.container,t.position,t.options);if(t.target instanceof Hs)return new yN(t.container,t.target,t.options,t.id);if(t.target instanceof Z0)return new g1(t.container,t.target,t.options);throw new Error("Invalid target type")}const Bd={beacon:"_beacon_17wtz_1",textWithIcon:"_textWithIcon_17wtz_25",textWithoutIcon:"_textWithoutIcon_17wtz_25",verySmall:"_verySmall_17wtz_51",small:"_small_17wtz_59",medium:"_medium_17wtz_67",large:"_large_17wtz_75"},YB=(t,e)=>t.x!==e.x||t.y!==e.y||t.width!==e.width||t.height!==e.height;function QB(t,e,n){let i=e,o=0;for(;i.parentElement&&o<4;){const l=i.getBoundingClientRect();i.parentElement.insertBefore(t,i.nextSibling);const c=i.getBoundingClientRect();if(!YB(l,c))return;t.remove(),i=i.parentElement,o+=1}n.appendChild(t)}class y1{constructor(e){this.options=e}static getCssClassName(){return Bd.beacon}getSizeClassName(){const e={very_small:Bd.verySmall,small:Bd.small,medium:Bd.medium,large:Bd.large};return this.options.size!==void 0?e[this.options.size]:Bd.medium}createElement(){const e=document.createElement("div");e.classList.add(y1.getCssClassName(),this.getSizeClassName()),e.setAttribute("data-testid","lemon-beacon"),this.applyAriaAttributes(e);const n=cN(this.options.icon);return this.options.label&&this.options.label.length>0?this.options.icon!=="empty"?this.renderLabelWithIcon(e,n,this.options.label):this.renderLabelOnly(e,this.options.label):this.renderIconOnly(e,n),e}applyAriaAttributes(e){e.setAttribute("role","button"),e.setAttribute("tabindex","0"),this.options.label?e.setAttribute("aria-label",this.options.label):e.setAttribute("aria-label","Information beacon")}renderIconOnly(e,n){n!==null&&(e.innerHTML+=n)}renderLabelWithIcon(e,n,r){n!==null&&(e.innerHTML+=n);const i=document.createElement("span");i.innerText=r,i.classList.add(Bd.textWithIcon),e.appendChild(i)}renderLabelOnly(e,n){const r=document.createElement("span");r.innerText=n,r.classList.add(Bd.textWithoutIcon),e.appendChild(r)}insertInDOM(e,n){const r=xd(n?.ownerDocument),i=n?.getRootNode();if(!r.contains(e)){if(!n?.parentElement||i instanceof ShadowRoot){r.appendChild(e);return}QB(e,n,r)}}applyStyles(e){const n=this.options.size!==void 0?NB[this.options.size]:26,r=n/2,i=this.options.label!=null?"auto":`${n}px`;this.options.z_index!=null&&e.style.setProperty("--beacon-z-index",this.options.z_index.toString()),e.style.setProperty("--beacon-height",`${n}px`),e.style.setProperty("--beacon-border-radius",`${r}px`),e.style.setProperty("--beacon-min-width",i),this.options.text_color!==void 0&&e.style.setProperty("--beacon-text-color",this.options.text_color),this.options.color!==void 0&&e.style.setProperty("--beacon-bg-color",this.options.color)}}class XB{constructor(e,n){this.autoUpdateCleanup=null,this.options={...T0,...n},this.targetElement=e,this.renderer=new y1(this.options),this.element=this.renderer.createElement(),this.eventManager=new p1(this.element),this.render(),this.setupKeyboardNavigation()}get offset(){return this.options.offset??{x:0,y:0}}getOffsetByPlacement(e){switch(e){case"top":return{mainAxis:Tu-this.offset.y,crossAxis:this.offset.x};case"bottom":return{mainAxis:Tu+this.offset.y,crossAxis:this.offset.x};case"left":return{mainAxis:Tu-this.offset.x,crossAxis:this.offset.y};default:return{mainAxis:Tu+this.offset.x,crossAxis:this.offset.y}}}setupKeyboardNavigation(){this.eventManager.onKeydown(e=>{(e?.key==="Enter"||e?.key===" ")&&(e.preventDefault(),this.element.click())})}render(){this.renderer.insertInDOM(this.element,this.targetElement),this.renderer.applyStyles(this.element),this.targetElement?(this.updateFloatingPosition(),this.autoUpdateCleanup=nN(this.targetElement,this.element,()=>{this.updateFloatingPosition()})):this.applyFixedPosition()}getFloatingPlacement(e){switch(e){case"top":return"top";case"bottom":return"bottom";case"left":return"left";default:return"right"}}updateFloatingPosition(){if(!this.targetElement)return;const e=this.options.position;AB(this.targetElement,this.element,{placement:this.getFloatingPlacement(e),middleware:[TB(({placement:n})=>this.getOffsetByPlacement(n)),SB()]}).then(({x:n,y:r,middlewareData:i})=>{const{referenceHidden:o}=i.hide??{};this.element.style.setProperty("position","absolute","important"),this.element.style.setProperty("left",`${n}px`,"important"),this.element.style.setProperty("top",`${r}px`,"important"),this.element.style.setProperty("visibility",o===!0?"hidden":"visible","important"),this.element.style.setProperty("display",o===!0?"none":"inline-flex","important")})}applyFixedPosition(){this.element.style.setProperty("position","fixed","important");const{position:e}=this.options,n=`${aN}px`;switch(e){case"top-left":this.element.style.setProperty("top",n,"important"),this.element.style.setProperty("left",n,"important");break;case"top-right":this.element.style.setProperty("top",n,"important"),this.element.style.setProperty("right",n,"important");break;case"bottom-right":this.element.style.setProperty("bottom",n,"important"),this.element.style.setProperty("right",n,"important");break;case"bottom-left":default:this.element.style.setProperty("bottom",n,"important"),this.element.style.setProperty("left",n,"important");break}(this.offset.x!==0||this.offset.y!==0)&&(this.element.style.setProperty("margin-left",`${this.offset.x}px`,"important"),this.element.style.setProperty("margin-top",`${this.offset.y}px`,"important"))}unmount(){this.autoUpdateCleanup?.(),this.autoUpdateCleanup=null,this.eventManager.cleanup(),h1(this.element)}onClick(e,n){return this.eventManager.onClick(e,n)}onMouseEnter(e,n){return this.eventManager.onMouseEnter(e,n)}onMouseLeave(e,n){return this.eventManager.onMouseLeave(e,n)}}function v1(t,e){return new XB(t,e)}class vN{constructor(e){this.onClick=n=>{this.beacon.onClick(n)},this.onMouseEnter=n=>{this.beacon.onMouseEnter(n)},this.onMouseLeave=n=>{this.beacon.onMouseLeave(n)},this.destroy=()=>{this.beacon.unmount()},this.getTarget=()=>{const{element:n}=this.beacon;return n instanceof Element?n:null},this.beacon=e}}class Hs{constructor(e,n=[]){this.cleanupFunctions=[],this.highlight=null,this._element=e,this.iframes=n}get dom(){return this._element}async getAttributes(){const e=["id","class"];return Array.from(this._element.attributes).slice(0,7).reduce((n,r)=>e.indexOf(r.name.toLowerCase())>0||r.value.length>500?n:{...n,[r.name]:r.value},{})}async getTagName(){return this._element.tagName.toLowerCase()}async getText(){return new Promise(e=>{this._element instanceof HTMLInputElement?e(this._element.value):this._element instanceof HTMLElement?e(this._element.innerText):e("")})}async getRect(){const e=this._element.getBoundingClientRect(),n={x:e.x,y:e.y};return this.iframes.forEach(r=>{const i=r.getBoundingClientRect(),o=window.getComputedStyle(r);n.y+=i.top+(parseInt(o.borderTopWidth)||0)+(parseInt(o.paddingTop)||0),n.x+=i.left+(parseInt(o.borderLeftWidth)||0)+(parseInt(o.paddingLeft)||0)}),new DOMRect(n.x,n.y,e.width,e.height)}remove(){h1(this._element)}async isInViewport(){return new Promise(e=>{e(oN(this._element))})}async safeIsInViewport(){return this.isInViewport()}async isRendered(){return new Promise(e=>{e($f(this._element))})}async safeIsRendered(){return this.isRendered()}onClick(e,n=!0){this._element.addEventListener("click",e,{once:n,capture:!0});const r=()=>{this._element.removeEventListener("click",e,{capture:!0})};return this.cleanupFunctions.push(r),r}onMousedown(e,n=!0){this._element.addEventListener("mousedown",e,{once:n,capture:!0});const r=()=>{this._element.removeEventListener("mousedown",e,{capture:!0})};return this.cleanupFunctions.push(r),r}onHover(e,n=!0){this._element.addEventListener("mouseenter",e,{once:n,capture:!0});const r=()=>{this._element.removeEventListener("mouseenter",e,{capture:!0})};return this.cleanupFunctions.push(r),r}onMouseLeave(e,n=!0){this._element.addEventListener("mouseleave",e,{once:n,capture:!0});const r=()=>{this._element.removeEventListener("mouseleave",e,{capture:!0})};return this.cleanupFunctions.push(r),r}onFocus(e,n=!0){this._element.addEventListener("focus",e,{once:n,capture:!0});const r=()=>{this._element.removeEventListener("focus",e,{capture:!0})};return this.cleanupFunctions.push(r),r}onBlur(e,n=!0){this._element.addEventListener("blur",e,{once:n,capture:!0});const r=()=>{this._element.removeEventListener("blur",e,{capture:!0})};return this.cleanupFunctions.push(r),r}onChange(e,n=!0){let r=null;const i=y=>{e(y),n&&o()},o=()=>{this._element.removeEventListener("change",i,{capture:!0}),r!==null&&clearInterval(r)};this._element.addEventListener("change",i,{once:n,capture:!0});let l=f(this._element),c=g(this._element);return r=setInterval(()=>{const y=f(this._element),h=g(this._element);(l!==y||c!==h)&&(l=y,c=h,i())},150),this.cleanupFunctions.push(o),o;function f(y){return"value"in y&&typeof y.value=="string"?y.value:""}function g(y){return y instanceof HTMLElement?y.innerText:""}}onAppear(e,n=!0,r=150){let i=!1,o=$f(this._element);o&&(e(),i=!0);const l=async()=>{const g=o;o=await this.isRendered(),g!==o&&o&&(!n||n&&!i)&&(e(),i=!0)},c=setInterval(()=>{l()},r),f=()=>{clearInterval(c)};return this.cleanupFunctions.push(f),f}onDisappear(e,n=!0,r=150){let i=!1,o=$f(this._element);o||(e(),i=!0);const l=async()=>{const g=o;o=await this.isRendered(),g!==o&&(o||(!n||n&&!i)&&(e(),i=!0))},c=setInterval(()=>{l()},r),f=()=>{clearInterval(c)};return this.cleanupFunctions.push(f),f}onInput(e,n=!0){function r(o){o.target!==null&&"value"in o.target&&typeof o.target.value=="string"?e(o.target?.value):e(null)}this._element.addEventListener("keyup",r,{once:n,capture:!0});const i=()=>{this._element.removeEventListener("keyup",r,{capture:!0})};return this.cleanupFunctions.push(i),i}async focus(){this.dom.scrollIntoView({behavior:"smooth",block:"center"})}onMove(e){let n=null;const r=async()=>{const c=await this.getRect();n!=null&&n.x===c.x&&n.y===c.y&&n.width===c.width&&n.height===c.height||(n=c,e({rect:c}))};r();const o=setInterval(()=>{r()},125),l=()=>{clearInterval(o)};return this.cleanupFunctions.push(l),l}onRemove(e){const n=new MutationObserver(i=>{i.forEach(o=>{if(o.removedNodes.length>0){const l=Array.from(o.removedNodes);(l.includes(this._element)||l.some(c=>c.contains(this._element)))&&(e(),n.disconnect())}})});n.observe(document.body,{childList:!0,subtree:!0});const r=()=>{n.disconnect()};return this.cleanupFunctions.push(r),r}destroy(){this.cleanupFunctions.forEach(e=>{e()}),this.cleanupFunctions=[],this.detachHighlight()}attachHighlight(e){this.detachHighlight(),this.highlight=new L0({color:e.color,type:e.type,selector:e.selector},this._element.ownerDocument),this.highlight.attachToElement(this._element)}detachHighlight(){this.highlight?.hide(),this.highlight=null}async attachBeacon(e,n="v1",r=xd()){if(n==="v2"){const i=v1(this._element,e);return new vN(i)}else{const i=m1({container:r,target:this,options:e});return i.render(),new vN(i)}}}const Mi={STOP:"OBSERVER_STOP",FOCUS:"OBSERVER_FOCUS",RECT:"OBSERVER_RECT",TEXT:"OBSERVER_TEXT",ATTRIBUTES:"OBSERVER_ATTRIBUTES",TAG_NAME:"OBSERVER_TAG_NAME",OBSERVE:"OBSERVER_OBSERVE",IN_VIEWPORT:"OBSERVER_IN_VIEWPORT",RENDERED:"OBSERVER_RENDERED",SHOW_HIGHLIGHT:"OBSERVER_SHOW_HIGHLIGHT",HIDE_HIGHLIGHT:"OBSERVER_HIDE_HIGHLIGHT",ATTACH_BEACON:"OBSERVER_ATTACH_BEACON"},Lr={OBSERVE_ACK:"OBSERVABLE_OBSERVE_ACK",HOVER:"OBSERVABLE_HOVER",CLICK:"OBSERVABLE_CLICK",RECT:"OBSERVABLE_RECT",TEXT:"OBSERVABLE_TEXT",FOCUS:"OBSERVABLE_FOCUS",BLUR:"OBSERVABLE_BLUR",MOUSE_ENTER:"OBSERVABLE_MOUSE_ENTER",MOUSE_LEAVE:"OBSERVABLE_MOUSE_LEAVE",INPUT:"OBSERVABLE_INPUT",REMOVED:"OBSERVABLE_REMOVED",ATTRIBUTES:"OBSERVABLE_ATTRIBUTES",TAG_NAME:"OBSERVABLE_TAG_NAME",CHANGE:"OBSERVABLE_CHANGE",MOUSE_DOWN:"OBSERVABLE_MOUSE_DOWN",IN_VIEWPORT:"OBSERVABLE_IN_VIEWPORT",RENDERED:"OBSERVABLE_RENDERED",BEACON_ATTACHED:"OBSERVABLE_BEACON_ATTACHED"},Zd={SCROLL:"BRIDGE_SCROLL",AI_REQUEST:"BRIDGE_AI_REQUEST"};function _1(t){const e=[...Array.from(t.querySelectorAll("iframe")),...Array.from(t.querySelectorAll("frame"))];return t.childNodes.forEach(n=>{n instanceof HTMLElement&&n.shadowRoot!==null&&e.push(..._1(n.shadowRoot))}),e}class JB{constructor(e,n,r){this.observerPort=e,this.observablePort=n,this.observableMessageModifier=r,this.observableHasReplied=!1,this.removeListenersFns=[],this.setupDownwardPropagation(),this.setupUpwardPropagation()}setupDownwardPropagation(){const e=this.observerPort.addMessageListener(async n=>{this.observablePort.postMessage(n)});this.removeListenersFns.push(e)}setupUpwardPropagation(){this.observablePort.start();const e=this.observablePort.addMessageListener(async n=>{this.observableHasReplied=!0,this.observerPort.postMessage(this.observableMessageModifier(n))});this.removeListenersFns.push(e)}hasEstablishedConnection(){return this.observableHasReplied}removeListeners(){this.removeListenersFns.forEach(e=>{e()})}}class Uf{constructor(){this.initMessagePropagationChannel(),this.initUpwardMessageRelay(),window.addEventListener("scroll",()=>{Uf.broadcastToChildFrames({type:Zd.SCROLL})})}initMessagePropagationChannel(){rs.addMessageListener(async(e,n)=>{if(!_N(e))return;const r=e;if(r.type===Zd.AI_REQUEST)return;if(n==null){const o=_1(document.body);for(const l of o)rs.sendToChildFrame(l,r);return}n.start();const i=_1(document.body);for(const o of i){const l=rs.createChannel(),c=l.getPort1(),f=new JB(n,c,g=>t9(g,o));rs.sendToChildFrame(o,r,l.getPort2()),setTimeout(()=>{f.hasEstablishedConnection()||(f.removeListeners(),c.close())},2e3)}})}initUpwardMessageRelay(){window.parent!==window&&rs.addMessageListener(async(e,n)=>{const r=e;r.type===Zd.AI_REQUEST&&rs.sendToParentFrame(r,n)})}static broadcastToChildFrames(e,n){rs.sendToCurrentFrame(e,n)}static addMessageListener(e,n){rs.addMessageListener(async(r,i)=>{_N(r)&&e(r,i)},n)}}function e9(t){const e=t.getBoundingClientRect(),n=window.getComputedStyle(t),r={top:0,right:0,bottom:0,left:0};return r.top+=e.top+(n.borderTopWidth!=null?B0(n.borderTopWidth):0)+(n.paddingTop!=null?B0(n.paddingTop):0),r.right+=e.left,r.bottom+=e.top,r.left+=e.left+(n.borderLeftWidth!=null?B0(n.borderLeftWidth):0)+(n.paddingLeft!=null?B0(n.paddingLeft):0),r}function B0(t){return t==null||t===""?0:parseInt(t.replace("px","").trim(),10)}function _N(t){return[Mi.OBSERVE,Mi.RECT,Mi.FOCUS,Mi.ATTRIBUTES,Mi.TAG_NAME,Mi.TEXT,Mi.IN_VIEWPORT,Mi.RENDERED,Mi.STOP,Zd.SCROLL,Zd.AI_REQUEST,Mi.SHOW_HIGHLIGHT,Mi.HIDE_HIGHLIGHT,Mi.ATTACH_BEACON].includes(t.type)}function t9(t,e){if(t.type==null)return t;switch(t.type){case Lr.RECT:if(e!=null){const n=e9(e),r={...t.payload,rect:{...t.payload.rect,top:t.payload.rect.top+n.top,right:t.payload.rect.right+n.right,bottom:t.payload.rect.bottom+n.bottom,left:t.payload.rect.left+n.left,width:t.payload.rect.width,height:t.payload.rect.height}};return{...t,payload:r}}return t;default:return t}}class n9{constructor(e){this.onClick=n=>{this.beacon.onClick(n)},this.onMouseEnter=n=>{this.beacon.onMouseEnter(n)},this.onMouseLeave=n=>{this.beacon.onMouseLeave(n)},this.destroy=()=>{this.beacon.unmount()},this.getTarget=()=>{const{element:n}=this.beacon;return n instanceof Element?n:null},this.beacon=e}}class r9{constructor(e){this.onClick=n=>{this.beaconObserver.onClick(n,!1)},this.onMouseEnter=n=>{this.beaconObserver.onMouseEnter(n)},this.onMouseLeave=n=>{this.beaconObserver.onMouseLeave(n)},this.destroy=()=>{this.beaconObserver.destroy()},this.getTarget=()=>this.beaconObserver,this.beaconObserver=e}}class Z0{constructor(e){this.abortController=null,this.listeners=new Map,this.rect=null,this.onMoveCallbacks=new Set,this.onAppearCallbacks=new Set,this.onDisappearCallbacks=new Set,this.isObserving=!1,this.observationChannel=null,this._isInViewport=null,this.id=e,this.start()}async start(){this.isObserving=!0,this.abortController=new AbortController,this.abortController.signal.addEventListener("abort",()=>{this.listeners.forEach(r=>{r.forEach(i=>{i.cleanup()})}),this.listeners.clear()});const e=this.onMessage.bind(this);rs.addMessageListener(async r=>{e(r)},this.abortController.signal),this.observationChannel=rs.createChannel(),this.observationChannel.getPort1().addMessageListener(async r=>{e(r)},this.abortController.signal),this.observationChannel.getPort1().start(),Uf.broadcastToChildFrames({observableId:this.id,type:Mi.OBSERVE},this.observationChannel.getPort2());const n=r=>{const i=new DOMRect(r.rect.left,r.rect.top,r.rect.width,r.rect.height);(this.rect==null||!i9(this.rect,i))&&(this.onMoveCallbacks.forEach(o=>{o({rect:i})}),this.rect=i)};this.addListener(Lr.RECT,n),this.addListener(Lr.IN_VIEWPORT,r=>{this._isInViewport=r.inViewport,r.inViewport?this.onAppearCallbacks.forEach(i=>{i()}):this.onDisappearCallbacks.forEach(i=>{i()})}),this.addListener(Lr.REMOVED,()=>{this.stop()})}destroy(){this.stop()}stop(){this.isObserving&&(Uf.broadcastToChildFrames({observableId:this.id,type:Mi.STOP}),this.abortController?.abort(),this.isObserving=!1)}onMessage(e){switch(e.type){case Lr.HOVER:case Lr.CLICK:case Lr.FOCUS:case Lr.BLUR:case Lr.MOUSE_ENTER:case Lr.MOUSE_LEAVE:case Lr.INPUT:case Lr.REMOVED:case Lr.ATTRIBUTES:case Lr.TAG_NAME:case Lr.CHANGE:case Lr.IN_VIEWPORT:case Lr.RENDERED:case Lr.RECT:return this.handleObservablEvent(e.type,e.payload)}return!1}handleObservablEvent(e,n){const r=this.listeners.get(e);return r&&[...r].forEach(i=>{i.callback(n),i.once&&this.removeListener(e,i)}),!0}async focus(){await this.requestFromObservable(Mi.FOCUS)}async getRect(){const{payload:e}=await this.requestFromObservable(Mi.RECT);return new DOMRect(e.rect.left,e.rect.top,e.rect.width,e.rect.height)}async getAttributes(){const{payload:e}=await this.requestFromObservable(Mi.ATTRIBUTES);return e.attributes}async getTagName(){const{payload:e}=await this.requestFromObservable(Mi.TAG_NAME);return e.tagName}onRemove(e){return this.addListener(Lr.REMOVED,e)}onHover(e,n=!0){return this.addListener(Lr.HOVER,e,n)}onClick(e,n=!0){return this.addListener(Lr.CLICK,e,n)}onFocus(e,n=!0){return this.addListener(Lr.FOCUS,e,n)}onBlur(e,n=!0){return this.addListener(Lr.BLUR,e,n)}onMouseEnter(e){return this.addListener(Lr.MOUSE_ENTER,e)}onMouseLeave(e,n=!1){return this.addListener(Lr.MOUSE_LEAVE,e,n)}onMousedown(e,n){return this.addListener(Lr.MOUSE_DOWN,e,n)}onChange(e,n){return this.addListener(Lr.CHANGE,e,n)}onInput(e,n=!0){const r=i=>{e(i?.value??null)};return this.addListener(Lr.INPUT,r,n)}onMove(e){return this.onMoveCallbacks.add(e),()=>{this.onMoveCallbacks.delete(e)}}onDisappear(e,n=!0){let r=!1;const i=()=>{(!r||!n)&&(r=!0,e())};this.onDisappearCallbacks.add(i),this._isInViewport===!1&&i();const o=()=>{this.onDisappearCallbacks.delete(i)};return this.abortController?.signal.addEventListener("abort",o),o}onAppear(e,n=!0){let r=!1;const i=()=>{(!r||!n)&&(r=!0,e())};this.onAppearCallbacks.add(i),this._isInViewport===!0&&i();const o=()=>{this.onAppearCallbacks.delete(i)};return this.abortController?.signal.addEventListener("abort",o),o}async getText(){const{payload:e}=await this.requestFromObservable(Mi.TEXT);return e.text}async isInViewport(){const{payload:e}=await this.requestFromObservable(Mi.IN_VIEWPORT);return e.inViewport}async safeIsInViewport(){try{return await this.isInViewport()}catch{return!1}}async isRendered(){const{payload:e}=await this.requestFromObservable(Mi.RENDERED);return e.rendered}async safeIsRendered(){try{return await this.isRendered()}catch{return!1}}async requestFromObservable(e){const n={observableId:this.id,requestId:ja(),type:e};return new Promise((r,i)=>{const o=this.observationChannel?.getPort1().addMessageListener(async f=>{f.requestId===n.requestId&&(o?.(),clearTimeout(c),r(f))}),c=setTimeout(()=>{o?.(),i(new Error(`Sending message timed out: ${JSON.stringify(n)}`)),clearTimeout(c)},2e3);this.observationChannel?.getPort1().postMessage(n)})}addListener(e,n,r=!1){this.listeners.has(e)||this.listeners.set(e,new Set);const i=()=>{this.removeListener(e,o)},o={callback:n,once:r,cleanup:i};return this.listeners.get(e)?.add(o),i}removeListener(e,n){this.listeners.get(e)?.delete(n)}attachHighlight(e){const n={observableId:this.id,color:e.color,type:e.type,selector:e.selector};this.observationChannel?.getPort1().postMessage({type:Mi.SHOW_HIGHLIGHT,payload:n})}detachHighlight(){this.observationChannel?.getPort1().postMessage({type:Mi.HIDE_HIGHLIGHT,payload:{observableId:this.id}})}async attachBeacon(e,n="v1",r=xd()){if(n==="v2"){const i=await this.attachBeaconInChildFrame(e),o=new Z0(i);return new r9(o)}else{const i=m1({container:r,target:this,options:e});return i.render(),new n9(i)}}async attachBeaconInChildFrame(e){const n={observableId:this.id,options:e};return new Promise((r,i)=>{const o=ja(),l=this.observationChannel?.getPort1().addMessageListener(async g=>{const y=g;y.type===Lr.BEACON_ATTACHED&&y.payload&&(l?.(),clearTimeout(f),r(y.payload.beaconId))}),f=setTimeout(()=>{l?.(),i(new Error("attachBeacon timed out"))},5e3);this.observationChannel?.getPort1().postMessage({type:Mi.ATTACH_BEACON,payload:n,requestId:o})})}}function i9(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}var b1,bN;function o9(){if(bN)return b1;bN=1;var t="Expected a function",e="__lodash_hash_undefined__",n="[object Function]",r="[object GeneratorFunction]",i=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,l=typeof $a=="object"&&$a&&$a.Object===Object&&$a,c=typeof self=="object"&&self&&self.Object===Object&&self,f=l||c||Function("return this")();function g(U,j){return U?.[j]}function y(U){var j=!1;if(U!=null&&typeof U.toString!="function")try{j=!!(U+"")}catch{}return j}var h=Array.prototype,p=Function.prototype,E=Object.prototype,A=f["__core-js_shared__"],_=(function(){var U=/[^.]+$/.exec(A&&A.keys&&A.keys.IE_PROTO||"");return U?"Symbol(src)_1."+U:""})(),I=p.toString,C=E.hasOwnProperty,v=E.toString,T=RegExp("^"+I.call(C).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),S=h.splice,O=xt(f,"Map"),$=xt(Object,"create");function V(U){var j=-1,he=U?U.length:0;for(this.clear();++j<he;){var de=U[j];this.set(de[0],de[1])}}function B(){this.__data__=$?$(null):{}}function ne(U){return this.has(U)&&delete this.__data__[U]}function D(U){var j=this.__data__;if($){var he=j[U];return he===e?void 0:he}return C.call(j,U)?j[U]:void 0}function X(U){var j=this.__data__;return $?j[U]!==void 0:C.call(j,U)}function ve(U,j){var he=this.__data__;return he[U]=$&&j===void 0?e:j,this}V.prototype.clear=B,V.prototype.delete=ne,V.prototype.get=D,V.prototype.has=X,V.prototype.set=ve;function ie(U){var j=-1,he=U?U.length:0;for(this.clear();++j<he;){var de=U[j];this.set(de[0],de[1])}}function ye(){this.__data__=[]}function Ne(U){var j=this.__data__,he=Ze(j,U);if(he<0)return!1;var de=j.length-1;return he==de?j.pop():S.call(j,he,1),!0}function Me(U){var j=this.__data__,he=Ze(j,U);return he<0?void 0:j[he][1]}function oe(U){return Ze(this.__data__,U)>-1}function Ce(U,j){var he=this.__data__,de=Ze(he,U);return de<0?he.push([U,j]):he[de][1]=j,this}ie.prototype.clear=ye,ie.prototype.delete=Ne,ie.prototype.get=Me,ie.prototype.has=oe,ie.prototype.set=Ce;function Ye(U){var j=-1,he=U?U.length:0;for(this.clear();++j<he;){var de=U[j];this.set(de[0],de[1])}}function et(){this.__data__={hash:new V,map:new(O||ie),string:new V}}function Y(U){return jt(this,U).delete(U)}function Ee(U){return jt(this,U).get(U)}function Pe(U){return jt(this,U).has(U)}function Xe(U,j){return jt(this,U).set(U,j),this}Ye.prototype.clear=et,Ye.prototype.delete=Y,Ye.prototype.get=Ee,Ye.prototype.has=Pe,Ye.prototype.set=Xe;function Ze(U,j){for(var he=U.length;he--;)if(_t(U[he][0],j))return he;return-1}function at(U){if(!x(U)||It(U))return!1;var j=M(U)||y(U)?T:o;return j.test(Ue(U))}function jt(U,j){var he=U.__data__;return ht(j)?he[typeof j=="string"?"string":"hash"]:he.map}function xt(U,j){var he=g(U,j);return at(he)?he:void 0}function ht(U){var j=typeof U;return j=="string"||j=="number"||j=="symbol"||j=="boolean"?U!=="__proto__":U===null}function It(U){return!!_&&_ in U}function Ue(U){if(U!=null){try{return I.call(U)}catch{}try{return U+""}catch{}}return""}function Ve(U,j){if(typeof U!="function"||j&&typeof j!="function")throw new TypeError(t);var he=function(){var de=arguments,ot=j?j.apply(this,de):de[0],wt=he.cache;if(wt.has(ot))return wt.get(ot);var st=U.apply(this,de);return he.cache=wt.set(ot,st),st};return he.cache=new(Ve.Cache||Ye),he}Ve.Cache=Ye;function _t(U,j){return U===j||U!==U&&j!==j}function M(U){var j=x(U)?v.call(U):"";return j==n||j==r}function x(U){var j=typeof U;return!!U&&(j=="object"||j=="function")}return b1=Ve,b1}var s9=o9();const EN=Lf(s9);function wN(t){const e=t.split(",").filter(n=>n.length>0);return e.length>0?e.map(n=>p9(n)):[]}const a9=/(\[[^\]]+\])/g,l9=/(#[^#\s+>~.[:]+)/g,u9=/(\.[^\s+>~.[:]+)/g,c9=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,f9=/(:[\w-]+\([^)]*\))/gi,d9=/(:[^\s+>~.[:]+)/g,h9=/([^\s+>~.[:]+)/g,p9=EN(t=>({parts:[{regex:a9,type:"attribute"},{regex:l9,type:"id"},{regex:u9,type:"class"},{regex:c9,type:"pseudo"},{regex:f9,type:"pseudo"},{regex:d9,type:"pseudo"},{regex:h9,type:"element"}].reduce((r,{regex:i,type:o})=>{const{selector:l,parts:c}=m9(r.selector,i,o);return{selector:l,parts:[...r.parts,...c]}},{selector:[v9,_9,b9].reduce((r,i)=>i(r),t),parts:[]}).parts.sort((r,i)=>r.index-i.index),selector:t})),g9=function(t,e){const n=t.match(e);return n!=null&&n?.length>0?n.reduce((r,i)=>r.replace(i,Array(i.length+1).join("A")),t):t},m9=function(t,e,n){const r=[];return y9(t,n).match(e)?.reduce((o,l)=>(o.parts.push({selector:l,type:n,index:t.indexOf(l),length:l.length}),{selector:o.selector.replace(l,Array(l.length+1).join(" ")),parts:o.parts}),{selector:t,parts:r})??{selector:t,parts:r}};function y9(t,e){switch(e){case"element":return[/[*\s+>~]/g,/[#.]/g].reduce((n,r)=>n.replace(r," "),t);default:return t}}function v9(t){return[/\\[0-9A-Fa-f]{6}\s?/g,/\\[0-9A-Fa-f]{1,5}\s/g,/\\./g].reduce(g9,t)}function _9(t){const e=/:not\(([^)]*)\)/g;return e.test(t)?t.replace(e,"     $1 "):t}function b9(t){const e=/{[^]*/gm;return t.match(e)?.reduce((r,i)=>r.replace(i,Array(i.length+1).join(" ")),t)??t}function E9(t){try{const[{parts:e}]=wN(t);return`//${e.reduce((r,i)=>{switch(i.type){case"element":r.push({tagName:i.selector,id:null,classList:[],texts:[]});break;case"id":r[r.length-1].id=i.selector.substr(1);break;case"class":r[r.length-1].classList.push(i.selector.substr(1));break;case"pseudo":const o=i.selector.match(/^:contains\("(.*)"\)$/);o!=null&&r[r.length-1].texts.push(o[1]);break}return r},[]).map(({tagName:r,id:i,classList:o,texts:l})=>E1(r,i,o,l)).join(" / ")}`}catch(e){return Re.debug(e,"Error while converting CSS to XPath, returning empty string"),""}}function E1(t="div",e=null,n=[],r=[]){const i=[],o=[];e!=null&&i.push({name:"@id",check:"equals",value:e}),n.length>0&&n.forEach(g=>{i.push({name:"@class",check:"strictly_contains",value:g})}),r.length>0&&r.forEach(g=>{o.push({name:".",check:"contains",value:g})});const l=TN(i),c=TN(o,"or"),f=l+(c!==""?(l!==""?" and ":"")+"("+c+")":"");return`${t}${f?"["+f+"]":""}`}const TN=EN((t,e="and")=>t.reduce((n,r)=>{const i=r.value.split('"')[0];switch(r.check){case"equals":n.push(`${r.name}="${i}"`);break;case"contains":n.push(`contains(${r.name}, "${i}")`);break;case"strictly_contains":const o=`(starts-with(${r.name}, "${i} "))`,l=`(substring(${r.name}, string-length(${r.name}) - string-length(" ${i}") +1) = " ${i}")`,c=`(contains(${r.name}, " ${i} "))`,f=`(${r.name}="${i}")`;n.push(`(${o} or ${l} or ${c} or ${f})`);break}return n},[]).join(` ${e} `).trim());class ba{constructor(e,n=1){this.path=e,this._score=new Md(n)}get score(){return this._score.value}get xPath(){return E9(this.path)}static qualityOf(e,n){const[{parts:r}]=wN(e.path),i=new Md(0);return r.forEach(({type:o,selector:l})=>{const c=w9(o);if(c!=null&&(i.increment(c,o.toUpperCase()),n!=null)){const f=new Md;n.forEach(g=>{f.increment(g.calc(l,o),g.constructor.name)}),i.multiplyWithScore(f,"Modifiers",{modifiersScore:f})}}),i}}function w9(t){switch(t){case"id":return 10;case"class":return 6;case"element":return 4;case"pseudo":return 1;case"attribute":return 2;default:throw new Error(`Unknown type ${t}`)}}function SN(t){return t instanceof HTMLElement?t.innerText?.trim()??t.textContent?.trim():null}const T9=/^([A-Za-z])[A-Za-z\-_:.0-9]+$/;function Vh(t){return t==null?!1:T9.test(t)}function zh(t){return t==null?!1:/^-?[_a-zA-Z]+[_a-zA-Z0-9-]*$/.test(t)}function j0(t){let e=null;return typeof t=="string"?e=t:e=t?.id!=null&&t.id!==""?t.id:null,e==null?null:"#"+e.replace(/(:|\.|;|#)/g,"\\$1")}function S9(t,e=[]){let n="";typeof t=="string"?n=t:t instanceof Array?n=t.filter(i=>i.trim().length>0).join(" "):n=t.classList?t.classList.toString():t.className,n=n.trim().replace(/ {2,}/g,"");let r=n.split(" ").filter(i=>zh(i));return e.length>0&&(r=r.filter(i=>!e.includes(i))),r.length>0?"."+r.join(".").replace(/^\.{1,}/,"").replace(/\.{1,}$/,""):""}class Ag{constructor(e,n=null,r=[],i=[],o=[]){this._elementType=e,this._id=n,this._classList=r,this._attributesList=i,this._texts=o}get elementType(){return this._elementType}get id(){return this._id}get classList(){return this._classList}get attributesList(){return this._attributesList}get texts(){return this._texts}toStringPaths(e=10){if(this._id==null&&this._classList.length===0&&this._attributesList.length===0&&this._texts.length===0)return[];const n=`${this._elementType}`,i=(Vh(this._id)?[this._id]:[null]).concat(this._classList).concat(this._attributesList).map((c,f)=>f===0?{type:"id",value:c}:f>0&&f<=this._classList.length?{type:"class",value:c}:f>this._classList.length&&f<this._classList.length+this._attributesList.length+1?{type:"attribute",value:c}:{type:"text",value:c});let o=[];for(let c=0;c<Math.min(i.length,e);c++){let f=n;if(i[c].type==="id")if(Vh(i[c].value)){const g=j0(i[c].value);f=g!=null?`${n}${g}`:f}else continue;else if(i[c].type==="class")if(zh(i[c].value))f=`${n}.${i[c].value}`;else continue;else i[c].type==="attribute"?f=`${n}${i[c].value}`:i[c].type==="text"&&(f=`${n}:contains("${i[c].value}")`);o=o.concat(this.pathsFor(f,i.slice(c+1,e)))}const l=i.slice(e);for(let c=0;c<l.length;c++)if(l[c].type==="id")if(Vh(l[c].value)){const f=j0(l[c].value);f!=null&&o.push(`${n}${f}`)}else continue;else if(l[c].type==="class")if(zh(l[c].value))o.push(`${n}.${l[c].value}`);else continue;else l[c].type==="attribute"?o.push(`${n}${l[c].value}`):l[c].type==="text"&&o.push(`${n}:contains("${l[c].value}")`);return o.length===0?this._texts.map(c=>`${n}:contains("${c}")`):o.reduce((c,f)=>c.concat([f]).concat(this._texts.map(g=>`${f}:contains("${g}")`)),[])}toXPaths(e=10){if(this._id!==null&&this._classList.length===0&&this._attributesList.length===0&&this._texts.length===0)return[];const r=(Vh(this._id)?[this._id]:[null]).concat(this._classList).concat(this._attributesList).map((l,c)=>c===0?{type:"id",value:l}:c>0&&c<=this._classList.length?{type:"class",value:l}:c>this._classList.length&&c<this._classList.length+this._attributesList.length+1?{type:"attribute",value:l}:{type:"text",value:l}).slice(0,e);let i=[];const o={tagName:this._elementType,id:null,classList:[]};for(let l=0;l<Math.min(r.length,e);l++){const c={...o};if(r[l].type==="id")if(zh(r[l].value))c.id=r[l].value;else continue;else if(r[l].type==="class"){const y=r[l].value;if(zh(y))c.classList=c.classList.concat([y]);else continue}const f=r.slice(l+1),g={tagName:o.tagName,id:f.length>0&&f[0].type==="id"?f[0].value:null,classList:f.filter(y=>y.type==="class"&&y.value!==null).map(y=>y.value)};i=i.concat(this.XPathsFor(c,g))}return i.reduce((l,{usedAttributes:c,path:f})=>(l.push(f),l.push(E1(c.tagName,c.id,c.classList,this._texts)),l),[])}pathsFor(e,n=[]){let r=[e];for(let i=0;i<n.length;i++){let o=e;if(n[i].type==="id")if(Vh(n[i].value)){const l=j0(n[i].value);o=l!=null?`${e}${l}`:o}else continue;else if(n[i].type==="class")if(zh(n[i].value))o=`${e}.${n[i].value}`;else continue;else n[i].type==="attribute"?o=`${e}${n[i].value}`:n[i].type==="text"&&(o=`${e}:contains("${n[i].value}")`);r=r.concat(this.pathsFor(o,n.slice(i+1)))}return r}XPathsFor(e,n){let r=[{path:E1(e.tagName,e.id??"",e.classList),usedAttributes:e}];if(n.id)r=r.concat(this.XPathsFor({...e,id:n.id},{...n,id:null}));else if(n.classList.length>0)for(let i=0;i<n.classList.length;i++)r=r.concat(this.XPathsFor({...e,classList:e.classList.concat(n.classList.slice(i,i+1))},{...n,classList:n.classList.slice(i+1)}));return r}static forElement(e){const n=Vh(e.id)?e.id:null,r=(()=>{const c=SN(e)?.split(`
`)[0].split("").reduce((f,g,y)=>f+=(e.textContent??"").trim()[y]??g,"")??"";if(c.length<=60&&c.trim().length>0)return c.trim().replace(/"/g,'\\"')})(),i=e.classList.toString().trim().replace("	"," ").replace(/ {2,}/g," "),o=i.length>0?i.split(" ").filter(c=>zh(c)):[],l=r!==void 0&&r!==""?[r]:[];return new Ag(e.tagName.toLowerCase(),n,o,[],l)}}var w1=(t=>(t[t.NEXT_TO=0]="NEXT_TO",t[t.CONTAINS=1]="CONTAINS",t[t.PARENT_NEXT_TO=2]="PARENT_NEXT_TO",t[t.DYNAMIC=3]="DYNAMIC",t))(w1||{});const A9=1e5;let AN=(um=class{constructor(e,n=.3){this._bonus=.3,this._elements=e,this._bonus=n}get bonus(){return this._bonus}get elements(){return this._elements}scoreFor(e,n){const r=new Md(1);return this._elements.forEach(i=>{let o=null,l=0;switch(i.proximity){case 0:o=e.parentElement;break;case 1:o=e;break;case 2:o=e.parentElement,o?.parentElement!=null?o=o.parentElement:o=null;break;case 3:o=e;do o=o.parentElement,l++;while(l<i.level&&o!=null&&o!==document.documentElement);break}const c=o!=null?n(i.selector,o):null;c!=null&&c.length>0&&r.increment(this._bonus,"CONTEXT_ELEMENT",{elements:c})}),r}static blackList(e){this._blackList.push(e)}static clearBlackList(){this._blackList=[]}static around(e,n,r=A9){let i=[];const o=n.getOptions().contextWidth??3,l=e.parentElement;if(i=i.concat(this.siblings(e,o,0,n)),e.tagName.toLowerCase()!=="svg"&&(i=i.concat(this.childs(e,n))),l!=null&&(i=i.concat(this.siblings(l,o,2,n))),i.length===0){let f=e,g=0;do{const y=f.parentElement;if(g++,y!=null&&y.children.length>1){const h=this.siblings(f,o,3,n,{level:g});i=i.concat(h)}f=y}while(f!==null&&f!==document.documentElement&&i.length<5)}return i.length>r&&(i=i.sort((c,f)=>{const g=ba.qualityOf(c.selector),y=ba.qualityOf(f.selector);return g>y?-1:g===y?0:1}).splice(0,r)),i.filter((c,f)=>!i.slice(0,f).some(g=>g.selector.path===c.selector.path&&g.proximity===c.proximity))}static childs(e,n,r="",i=2){if(i<=0)return[];const o=e.children;let l=[];for(let c=0;c<o.length;c++){const f=r+" > "+n.stringSelectorsFor(o[c]).toString();l=l.concat([{selector:new ba(f),proximity:1}]),l=l.concat(this.childs(o[c],n,f,i-1))}return l}static siblings(e,n=3,r,i,o={}){const l=e.parentElement;if(l==null)return[];const c=l.children;let f=[];for(let g=0;g<c.length;g++)if(e!==c[g]&&!this.isBlackListed(c[g])){const y=" > "+i.stringSelectorsFor(c[g]).toString();f=f.concat([{selector:new ba(y),proximity:r,...o}]),f=f.concat(this.deepSiblingSelectors(c[g],y,n,r,i,o))}return f}static deepSiblingSelectors(e,n,r,i,o,l={}){if(r<=0)return[];const c=e.children;let f=[];for(let g=0;g<c.length;g++){const y=n+" > "+o.stringSelectorsFor(c[g]).toString();f=f.concat([{selector:new ba(y),proximity:i,...l}]),f=f.concat(this.deepSiblingSelectors(c[g],y,r-1,i,o,l))}return f}static isBlackListed(e){for(let n=0;n<this._blackList.length;n++){const r=this._blackList[n];if(typeof r=="string"&&e.tagName.toLowerCase()===r)return!0;if(typeof r=="function"&&r(e))return!0;if(r===e)return!0}return!1}},um._blackList=[],um);var T1={exports:{}};/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */var S1,IN;function I9(){if(IN)return S1;IN=1;const{entries:t,setPrototypeOf:e,isFrozen:n,getPrototypeOf:r,getOwnPropertyDescriptor:i}=Object;let{freeze:o,seal:l,create:c}=Object,{apply:f,construct:g}=typeof Reflect<"u"&&Reflect;o||(o=function(nt){return nt}),l||(l=function(nt){return nt}),f||(f=function(nt,rt){for(var ct=arguments.length,St=new Array(ct>2?ct-2:0),Wt=2;Wt<ct;Wt++)St[Wt-2]=arguments[Wt];return nt.apply(rt,St)}),g||(g=function(nt){for(var rt=arguments.length,ct=new Array(rt>1?rt-1:0),St=1;St<rt;St++)ct[St-1]=arguments[St];return new nt(...ct)});const y=B(Array.prototype.forEach),h=B(Array.prototype.lastIndexOf),p=B(Array.prototype.pop),E=B(Array.prototype.push),A=B(Array.prototype.splice),_=B(String.prototype.toLowerCase),I=B(String.prototype.toString),C=B(String.prototype.match),v=B(String.prototype.replace),T=B(String.prototype.indexOf),S=B(String.prototype.trim),O=B(Object.prototype.hasOwnProperty),$=B(RegExp.prototype.test),V=ne(TypeError);function B(st){return function(nt){nt instanceof RegExp&&(nt.lastIndex=0);for(var rt=arguments.length,ct=new Array(rt>1?rt-1:0),St=1;St<rt;St++)ct[St-1]=arguments[St];return f(st,nt,ct)}}function ne(st){return function(){for(var nt=arguments.length,rt=new Array(nt),ct=0;ct<nt;ct++)rt[ct]=arguments[ct];return g(st,rt)}}function D(st,nt){let rt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_;e&&e(st,null);let ct=nt.length;for(;ct--;){let St=nt[ct];if(typeof St=="string"){const Wt=rt(St);Wt!==St&&(n(nt)||(nt[ct]=Wt),St=Wt)}st[St]=!0}return st}function X(st){for(let nt=0;nt<st.length;nt++)O(st,nt)||(st[nt]=null);return st}function ve(st){const nt=c(null);for(const[rt,ct]of t(st))O(st,rt)&&(Array.isArray(ct)?nt[rt]=X(ct):ct&&typeof ct=="object"&&ct.constructor===Object?nt[rt]=ve(ct):nt[rt]=ct);return nt}function ie(st,nt){for(;st!==null;){const ct=i(st,nt);if(ct){if(ct.get)return B(ct.get);if(typeof ct.value=="function")return B(ct.value)}st=r(st)}function rt(){return null}return rt}const ye=o(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ne=o(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Me=o(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),oe=o(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Ce=o(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Ye=o(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),et=o(["#text"]),Y=o(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Ee=o(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Pe=o(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Xe=o(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Ze=l(/\{\{[\w\W]*|[\w\W]*\}\}/gm),at=l(/<%[\w\W]*|[\w\W]*%>/gm),jt=l(/\$\{[\w\W]*/gm),xt=l(/^data-[\-\w.\u00B7-\uFFFF]+$/),ht=l(/^aria-[\-\w]+$/),It=l(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ue=l(/^(?:\w+script|data):/i),Ve=l(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),_t=l(/^html$/i),M=l(/^[a-z][.\w]*(-[.\w]+)+$/i);var x=Object.freeze({__proto__:null,ARIA_ATTR:ht,ATTR_WHITESPACE:Ve,CUSTOM_ELEMENT:M,DATA_ATTR:xt,DOCTYPE_NAME:_t,ERB_EXPR:at,IS_ALLOWED_URI:It,IS_SCRIPT_OR_DATA:Ue,MUSTACHE_EXPR:Ze,TMPLIT_EXPR:jt});const U={element:1,text:3,progressingInstruction:7,comment:8,document:9},j=function(){return typeof window>"u"?null:window},he=function(nt,rt){if(typeof nt!="object"||typeof nt.createPolicy!="function")return null;let ct=null;const St="data-tt-policy-suffix";rt&&rt.hasAttribute(St)&&(ct=rt.getAttribute(St));const Wt="dompurify"+(ct?"#"+ct:"");try{return nt.createPolicy(Wt,{createHTML($t){return $t},createScriptURL($t){return $t}})}catch{return console.warn("TrustedTypes policy "+Wt+" could not be created."),null}},de=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function ot(){let st=arguments.length>0&&arguments[0]!==void 0?arguments[0]:j();const nt=Tr=>ot(Tr);if(nt.version="3.3.0",nt.removed=[],!st||!st.document||st.document.nodeType!==U.document||!st.Element)return nt.isSupported=!1,nt;let{document:rt}=st;const ct=rt,St=ct.currentScript,{DocumentFragment:Wt,HTMLTemplateElement:$t,Node:hn,Element:dn,NodeFilter:_n,NamedNodeMap:En=st.NamedNodeMap||st.MozNamedAttrMap,HTMLFormElement:tr,DOMParser:Ir,trustedTypes:Fr}=st,Dr=dn.prototype,ni=ie(Dr,"cloneNode"),bi=ie(Dr,"remove"),Jr=ie(Dr,"nextSibling"),eo=ie(Dr,"childNodes"),ei=ie(Dr,"parentNode");if(typeof $t=="function"){const Tr=rt.createElement("template");Tr.content&&Tr.content.ownerDocument&&(rt=Tr.content.ownerDocument)}let jr,qi="";const{implementation:ro,createNodeIterator:To,createDocumentFragment:di,getElementsByTagName:xo}=rt,{importNode:pn}=ct;let nn=de();nt.isSupported=typeof t=="function"&&typeof ei=="function"&&ro&&ro.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:be,ERB_EXPR:Te,TMPLIT_EXPR:je,DATA_ATTR:Je,ARIA_ATTR:Ge,IS_SCRIPT_OR_DATA:vt,ATTR_WHITESPACE:Tt,CUSTOM_ELEMENT:Qt}=x;let{IS_ALLOWED_URI:sn}=x,qt=null;const Nt=D({},[...ye,...Ne,...Me,...Ce,...et]);let en=null;const vn=D({},[...Y,...Ee,...Pe,...Xe]);let On=Object.seal(c(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Un=null,Er=null;const cn=Object.seal(c(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let ze=!0,pt=!0,Gt=!1,Gn=!0,Rn=!1,pr=!0,Sr=!1,Ri=!1,xi=!1,oi=!1,Vr=!1,yi=!1,Ni=!0,Ja=!1;const po="user-content-";let _s=!0,yo=!1,Aa={},Qo=null;const El=D({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ia=null;const aa=D({},["audio","video","img","source","image","track"]);let el=null;const xn=D({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),nr="http://www.w3.org/1998/Math/MathML",Rr="http://www.w3.org/2000/svg",si="http://www.w3.org/1999/xhtml";let ti=si,io=!1,hi=null;const Kr=D({},[nr,Rr,si],I);let Oi=D({},["mi","mo","mn","ms","mtext"]),Ei=D({},["annotation-xml"]);const No=D({},["title","style","font","a","script"]);let vo=null;const Ms=["application/xhtml+xml","text/html"],bs="text/html";let Li=null,Vo=null;const qs=rt.createElement("form"),Es=function(Ot){return Ot instanceof RegExp||Ot instanceof Function},ls=function(){let Ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Vo&&Vo===Ot)){if((!Ot||typeof Ot!="object")&&(Ot={}),Ot=ve(Ot),vo=Ms.indexOf(Ot.PARSER_MEDIA_TYPE)===-1?bs:Ot.PARSER_MEDIA_TYPE,Li=vo==="application/xhtml+xml"?I:_,qt=O(Ot,"ALLOWED_TAGS")?D({},Ot.ALLOWED_TAGS,Li):Nt,en=O(Ot,"ALLOWED_ATTR")?D({},Ot.ALLOWED_ATTR,Li):vn,hi=O(Ot,"ALLOWED_NAMESPACES")?D({},Ot.ALLOWED_NAMESPACES,I):Kr,el=O(Ot,"ADD_URI_SAFE_ATTR")?D(ve(xn),Ot.ADD_URI_SAFE_ATTR,Li):xn,Ia=O(Ot,"ADD_DATA_URI_TAGS")?D(ve(aa),Ot.ADD_DATA_URI_TAGS,Li):aa,Qo=O(Ot,"FORBID_CONTENTS")?D({},Ot.FORBID_CONTENTS,Li):El,Un=O(Ot,"FORBID_TAGS")?D({},Ot.FORBID_TAGS,Li):ve({}),Er=O(Ot,"FORBID_ATTR")?D({},Ot.FORBID_ATTR,Li):ve({}),Aa=O(Ot,"USE_PROFILES")?Ot.USE_PROFILES:!1,ze=Ot.ALLOW_ARIA_ATTR!==!1,pt=Ot.ALLOW_DATA_ATTR!==!1,Gt=Ot.ALLOW_UNKNOWN_PROTOCOLS||!1,Gn=Ot.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Rn=Ot.SAFE_FOR_TEMPLATES||!1,pr=Ot.SAFE_FOR_XML!==!1,Sr=Ot.WHOLE_DOCUMENT||!1,oi=Ot.RETURN_DOM||!1,Vr=Ot.RETURN_DOM_FRAGMENT||!1,yi=Ot.RETURN_TRUSTED_TYPE||!1,xi=Ot.FORCE_BODY||!1,Ni=Ot.SANITIZE_DOM!==!1,Ja=Ot.SANITIZE_NAMED_PROPS||!1,_s=Ot.KEEP_CONTENT!==!1,yo=Ot.IN_PLACE||!1,sn=Ot.ALLOWED_URI_REGEXP||It,ti=Ot.NAMESPACE||si,Oi=Ot.MATHML_TEXT_INTEGRATION_POINTS||Oi,Ei=Ot.HTML_INTEGRATION_POINTS||Ei,On=Ot.CUSTOM_ELEMENT_HANDLING||{},Ot.CUSTOM_ELEMENT_HANDLING&&Es(Ot.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(On.tagNameCheck=Ot.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ot.CUSTOM_ELEMENT_HANDLING&&Es(Ot.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(On.attributeNameCheck=Ot.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ot.CUSTOM_ELEMENT_HANDLING&&typeof Ot.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(On.allowCustomizedBuiltInElements=Ot.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Rn&&(pt=!1),Vr&&(oi=!0),Aa&&(qt=D({},et),en=[],Aa.html===!0&&(D(qt,ye),D(en,Y)),Aa.svg===!0&&(D(qt,Ne),D(en,Ee),D(en,Xe)),Aa.svgFilters===!0&&(D(qt,Me),D(en,Ee),D(en,Xe)),Aa.mathMl===!0&&(D(qt,Ce),D(en,Pe),D(en,Xe))),Ot.ADD_TAGS&&(typeof Ot.ADD_TAGS=="function"?cn.tagCheck=Ot.ADD_TAGS:(qt===Nt&&(qt=ve(qt)),D(qt,Ot.ADD_TAGS,Li))),Ot.ADD_ATTR&&(typeof Ot.ADD_ATTR=="function"?cn.attributeCheck=Ot.ADD_ATTR:(en===vn&&(en=ve(en)),D(en,Ot.ADD_ATTR,Li))),Ot.ADD_URI_SAFE_ATTR&&D(el,Ot.ADD_URI_SAFE_ATTR,Li),Ot.FORBID_CONTENTS&&(Qo===El&&(Qo=ve(Qo)),D(Qo,Ot.FORBID_CONTENTS,Li)),_s&&(qt["#text"]=!0),Sr&&D(qt,["html","head","body"]),qt.table&&(D(qt,["tbody"]),delete Un.tbody),Ot.TRUSTED_TYPES_POLICY){if(typeof Ot.TRUSTED_TYPES_POLICY.createHTML!="function")throw V('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Ot.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw V('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');jr=Ot.TRUSTED_TYPES_POLICY,qi=jr.createHTML("")}else jr===void 0&&(jr=he(Fr,St)),jr!==null&&typeof qi=="string"&&(qi=jr.createHTML(""));o&&o(Ot),Vo=Ot}},Ca=D({},[...Ne,...Me,...oe]),tl=D({},[...Ce,...Ye]),Ra=function(Ot){let qn=ei(Ot);(!qn||!qn.tagName)&&(qn={namespaceURI:ti,tagName:"template"});const ir=_(Ot.tagName),Fi=_(qn.tagName);return hi[Ot.namespaceURI]?Ot.namespaceURI===Rr?qn.namespaceURI===si?ir==="svg":qn.namespaceURI===nr?ir==="svg"&&(Fi==="annotation-xml"||Oi[Fi]):!!Ca[ir]:Ot.namespaceURI===nr?qn.namespaceURI===si?ir==="math":qn.namespaceURI===Rr?ir==="math"&&Ei[Fi]:!!tl[ir]:Ot.namespaceURI===si?qn.namespaceURI===Rr&&!Ei[Fi]||qn.namespaceURI===nr&&!Oi[Fi]?!1:!tl[ir]&&(No[ir]||!Ca[ir]):!!(vo==="application/xhtml+xml"&&hi[Ot.namespaceURI]):!1},Ws=function(Ot){E(nt.removed,{element:Ot});try{ei(Ot).removeChild(Ot)}catch{bi(Ot)}},la=function(Ot,qn){try{E(nt.removed,{attribute:qn.getAttributeNode(Ot),from:qn})}catch{E(nt.removed,{attribute:null,from:qn})}if(qn.removeAttribute(Ot),Ot==="is")if(oi||Vr)try{Ws(qn)}catch{}else try{qn.setAttribute(Ot,"")}catch{}},ua=function(Ot){let qn=null,ir=null;if(xi)Ot="<remove></remove>"+Ot;else{const Ur=C(Ot,/^[\r\n\t ]+/);ir=Ur&&Ur[0]}vo==="application/xhtml+xml"&&ti===si&&(Ot='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ot+"</body></html>");const Fi=jr?jr.createHTML(Ot):Ot;if(ti===si)try{qn=new Ir().parseFromString(Fi,vo)}catch{}if(!qn||!qn.documentElement){qn=ro.createDocument(ti,"template",null);try{qn.documentElement.innerHTML=io?qi:Fi}catch{}}const $o=qn.body||qn.documentElement;return Ot&&ir&&$o.insertBefore(rt.createTextNode(ir),$o.childNodes[0]||null),ti===si?xo.call(qn,Sr?"html":"body")[0]:Sr?qn.documentElement:$o},af=function(Ot){return To.call(Ot.ownerDocument||Ot,Ot,_n.SHOW_ELEMENT|_n.SHOW_COMMENT|_n.SHOW_TEXT|_n.SHOW_PROCESSING_INSTRUCTION|_n.SHOW_CDATA_SECTION,null)},wl=function(Ot){return Ot instanceof tr&&(typeof Ot.nodeName!="string"||typeof Ot.textContent!="string"||typeof Ot.removeChild!="function"||!(Ot.attributes instanceof En)||typeof Ot.removeAttribute!="function"||typeof Ot.setAttribute!="function"||typeof Ot.namespaceURI!="string"||typeof Ot.insertBefore!="function"||typeof Ot.hasChildNodes!="function")},Tl=function(Ot){return typeof hn=="function"&&Ot instanceof hn};function us(Tr,Ot,qn){y(Tr,ir=>{ir.call(nt,Ot,qn,Vo)})}const lf=function(Ot){let qn=null;if(us(nn.beforeSanitizeElements,Ot,null),wl(Ot))return Ws(Ot),!0;const ir=Li(Ot.nodeName);if(us(nn.uponSanitizeElement,Ot,{tagName:ir,allowedTags:qt}),pr&&Ot.hasChildNodes()&&!Tl(Ot.firstElementChild)&&$(/<[/\w!]/g,Ot.innerHTML)&&$(/<[/\w!]/g,Ot.textContent)||Ot.nodeType===U.progressingInstruction||pr&&Ot.nodeType===U.comment&&$(/<[/\w]/g,Ot.data))return Ws(Ot),!0;if(!(cn.tagCheck instanceof Function&&cn.tagCheck(ir))&&(!qt[ir]||Un[ir])){if(!Un[ir]&&ai(ir)&&(On.tagNameCheck instanceof RegExp&&$(On.tagNameCheck,ir)||On.tagNameCheck instanceof Function&&On.tagNameCheck(ir)))return!1;if(_s&&!Qo[ir]){const Fi=ei(Ot)||Ot.parentNode,$o=eo(Ot)||Ot.childNodes;if($o&&Fi){const Ur=$o.length;for(let So=Ur-1;So>=0;--So){const Uo=ni($o[So],!0);Uo.__removalCount=(Ot.__removalCount||0)+1,Fi.insertBefore(Uo,Jr(Ot))}}}return Ws(Ot),!0}return Ot instanceof dn&&!Ra(Ot)||(ir==="noscript"||ir==="noembed"||ir==="noframes")&&$(/<\/no(script|embed|frames)/i,Ot.innerHTML)?(Ws(Ot),!0):(Rn&&Ot.nodeType===U.text&&(qn=Ot.textContent,y([be,Te,je],Fi=>{qn=v(qn,Fi," ")}),Ot.textContent!==qn&&(E(nt.removed,{element:Ot.cloneNode()}),Ot.textContent=qn)),us(nn.afterSanitizeElements,Ot,null),!1)},wr=function(Ot,qn,ir){if(Ni&&(qn==="id"||qn==="name")&&(ir in rt||ir in qs))return!1;if(!(pt&&!Er[qn]&&$(Je,qn))){if(!(ze&&$(Ge,qn))){if(!(cn.attributeCheck instanceof Function&&cn.attributeCheck(qn,Ot))){if(!en[qn]||Er[qn]){if(!(ai(Ot)&&(On.tagNameCheck instanceof RegExp&&$(On.tagNameCheck,Ot)||On.tagNameCheck instanceof Function&&On.tagNameCheck(Ot))&&(On.attributeNameCheck instanceof RegExp&&$(On.attributeNameCheck,qn)||On.attributeNameCheck instanceof Function&&On.attributeNameCheck(qn,Ot))||qn==="is"&&On.allowCustomizedBuiltInElements&&(On.tagNameCheck instanceof RegExp&&$(On.tagNameCheck,ir)||On.tagNameCheck instanceof Function&&On.tagNameCheck(ir))))return!1}else if(!el[qn]){if(!$(sn,v(ir,Tt,""))){if(!((qn==="src"||qn==="xlink:href"||qn==="href")&&Ot!=="script"&&T(ir,"data:")===0&&Ia[Ot])){if(!(Gt&&!$(vt,v(ir,Tt,"")))){if(ir)return!1}}}}}}}return!0},ai=function(Ot){return Ot!=="annotation-xml"&&C(Ot,Qt)},Ks=function(Ot){us(nn.beforeSanitizeAttributes,Ot,null);const{attributes:qn}=Ot;if(!qn||wl(Ot))return;const ir={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:en,forceKeepAttr:void 0};let Fi=qn.length;for(;Fi--;){const $o=qn[Fi],{name:Ur,namespaceURI:So,value:Uo}=$o,nl=Li(Ur),Sl=Uo;let Ti=Ur==="value"?Sl:S(Sl);if(ir.attrName=nl,ir.attrValue=Ti,ir.keepAttr=!0,ir.forceKeepAttr=void 0,us(nn.uponSanitizeAttribute,Ot,ir),Ti=ir.attrValue,Ja&&(nl==="id"||nl==="name")&&(la(Ur,Ot),Ti=po+Ti),pr&&$(/((--!?|])>)|<\/(style|title|textarea)/i,Ti)){la(Ur,Ot);continue}if(nl==="attributename"&&C(Ti,"href")){la(Ur,Ot);continue}if(ir.forceKeepAttr)continue;if(!ir.keepAttr){la(Ur,Ot);continue}if(!Gn&&$(/\/>/i,Ti)){la(Ur,Ot);continue}Rn&&y([be,Te,je],Ao=>{Ti=v(Ti,Ao," ")});const uf=Li(Ot.nodeName);if(!wr(uf,nl,Ti)){la(Ur,Ot);continue}if(jr&&typeof Fr=="object"&&typeof Fr.getAttributeType=="function"&&!So)switch(Fr.getAttributeType(uf,nl)){case"TrustedHTML":{Ti=jr.createHTML(Ti);break}case"TrustedScriptURL":{Ti=jr.createScriptURL(Ti);break}}if(Ti!==Sl)try{So?Ot.setAttributeNS(So,Ur,Ti):Ot.setAttribute(Ur,Ti),wl(Ot)?Ws(Ot):p(nt.removed)}catch{la(Ur,Ot)}}us(nn.afterSanitizeAttributes,Ot,null)},xa=function Tr(Ot){let qn=null;const ir=af(Ot);for(us(nn.beforeSanitizeShadowDOM,Ot,null);qn=ir.nextNode();)us(nn.uponSanitizeShadowNode,qn,null),lf(qn),Ks(qn),qn.content instanceof Wt&&Tr(qn.content);us(nn.afterSanitizeShadowDOM,Ot,null)};return nt.sanitize=function(Tr){let Ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},qn=null,ir=null,Fi=null,$o=null;if(io=!Tr,io&&(Tr="<!-->"),typeof Tr!="string"&&!Tl(Tr))if(typeof Tr.toString=="function"){if(Tr=Tr.toString(),typeof Tr!="string")throw V("dirty is not a string, aborting")}else throw V("toString is not a function");if(!nt.isSupported)return Tr;if(Ri||ls(Ot),nt.removed=[],typeof Tr=="string"&&(yo=!1),yo){if(Tr.nodeName){const Uo=Li(Tr.nodeName);if(!qt[Uo]||Un[Uo])throw V("root node is forbidden and cannot be sanitized in-place")}}else if(Tr instanceof hn)qn=ua("<!---->"),ir=qn.ownerDocument.importNode(Tr,!0),ir.nodeType===U.element&&ir.nodeName==="BODY"||ir.nodeName==="HTML"?qn=ir:qn.appendChild(ir);else{if(!oi&&!Rn&&!Sr&&Tr.indexOf("<")===-1)return jr&&yi?jr.createHTML(Tr):Tr;if(qn=ua(Tr),!qn)return oi?null:yi?qi:""}qn&&xi&&Ws(qn.firstChild);const Ur=af(yo?Tr:qn);for(;Fi=Ur.nextNode();)lf(Fi),Ks(Fi),Fi.content instanceof Wt&&xa(Fi.content);if(yo)return Tr;if(oi){if(Vr)for($o=di.call(qn.ownerDocument);qn.firstChild;)$o.appendChild(qn.firstChild);else $o=qn;return(en.shadowroot||en.shadowrootmode)&&($o=pn.call(ct,$o,!0)),$o}let So=Sr?qn.outerHTML:qn.innerHTML;return Sr&&qt["!doctype"]&&qn.ownerDocument&&qn.ownerDocument.doctype&&qn.ownerDocument.doctype.name&&$(_t,qn.ownerDocument.doctype.name)&&(So="<!DOCTYPE "+qn.ownerDocument.doctype.name+`>
`+So),Rn&&y([be,Te,je],Uo=>{So=v(So,Uo," ")}),jr&&yi?jr.createHTML(So):So},nt.setConfig=function(){let Tr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ls(Tr),Ri=!0},nt.clearConfig=function(){Vo=null,Ri=!1},nt.isValidAttribute=function(Tr,Ot,qn){Vo||ls({});const ir=Li(Tr),Fi=Li(Ot);return wr(ir,Fi,qn)},nt.addHook=function(Tr,Ot){typeof Ot=="function"&&E(nn[Tr],Ot)},nt.removeHook=function(Tr,Ot){if(Ot!==void 0){const qn=h(nn[Tr],Ot);return qn===-1?void 0:A(nn[Tr],qn,1)[0]}return p(nn[Tr])},nt.removeHooks=function(Tr){nn[Tr]=[]},nt.removeAllHooks=function(){nn=de()},nt}var wt=ot();return S1=wt,S1}var CN;function C9(){return CN||(CN=1,(function(t){var e=I9();/*!
 * Sizzle CSS Selector Engine v2.3.10
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://js.foundation/
 *
 * Date: 2024-09-24
 */(function(n){var r,i,o,l,c,f,g,y,h,p,E,A,_,I,C,v,T,S,O,$="sizzle"+1*new Date,V=n.document,B=0,ne=0,D=dn(),X=dn(),ve=dn(),ie=dn(),ye=function(be,Te){return be===Te&&(E=!0),0},Ne={}.hasOwnProperty,Me=[],oe=Me.pop,Ce=Me.push,Ye=Me.push,et=Me.slice,Y=function(be,Te){for(var je=0,Je=be.length;je<Je;je++)if(be[je]===Te)return je;return-1},Ee="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Pe="[\\x20\\t\\r\\n\\f]",Xe="(?:\\\\[\\da-fA-F]{1,6}"+Pe+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Ze="\\["+Pe+"*("+Xe+")(?:"+Pe+"*([*^$|!~]?=)"+Pe+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Xe+"))|)"+Pe+"*\\]",at=":("+Xe+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Ze+")*)|.*)\\)|)",jt=new RegExp(Pe+"+","g"),xt=new RegExp("^"+Pe+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Pe+"+$","g"),ht=new RegExp("^"+Pe+"*,"+Pe+"*"),It=new RegExp("^"+Pe+"*([>+~]|"+Pe+")"+Pe+"*"),Ue=new RegExp(Pe+"|>"),Ve=new RegExp(at),_t=new RegExp("^"+Xe+"$"),M={ID:new RegExp("^#("+Xe+")"),CLASS:new RegExp("^\\.("+Xe+")"),TAG:new RegExp("^("+Xe+"|[*])"),ATTR:new RegExp("^"+Ze),PSEUDO:new RegExp("^"+at),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Pe+"*(even|odd|(([+-]|)(\\d*)n|)"+Pe+"*(?:([+-]|)"+Pe+"*(\\d+)|))"+Pe+"*\\)|)","i"),bool:new RegExp("^(?:"+Ee+")$","i"),needsContext:new RegExp("^"+Pe+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Pe+"*((?:-\\d)?\\d*)"+Pe+"*\\)|)(?=[^-]|$)","i")},x=/HTML$/i,U=/^(?:input|select|textarea|button)$/i,j=/^h\d$/i,he=/^[^{]+\{\s*\[native \w/,de=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ot=/[+~]/,wt=new RegExp("\\\\[\\da-fA-F]{1,6}"+Pe+"?|\\\\([^\\r\\n\\f])","g"),st=function(be,Te){var je="0x"+be.slice(1)-65536;return Te||(je<0?String.fromCharCode(je+65536):String.fromCharCode(je>>10|55296,je&1023|56320))},nt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,rt=function(be,Te){return Te?be==="\0"?"":be.slice(0,-1)+"\\"+be.charCodeAt(be.length-1).toString(16)+" ":"\\"+be},ct=function(){A()},St=jr(function(be){return be.disabled===!0&&be.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"}),Wt,$t=function(be){return Wt===void 0&&(Wt={createHTML:function(Te){return Te}},typeof n.trustedTypes<"u"&&n.trustedTypes.createPolicy&&(Wt=n.trustedTypes.createPolicy("dompurify",{createHTML:function(Te){return e.sanitize(Te)}}))),Wt.createHTML(be)};try{Ye.apply(Me=et.call(V.childNodes),V.childNodes),Me[V.childNodes.length].nodeType}catch{Ye={apply:Me.length?function(Te,je){Ce.apply(Te,et.call(je))}:function(Te,je){for(var Je=Te.length,Ge=0;Te[Je++]=je[Ge++];);Te.length=Je-1}}}function hn(be,Te,je,Je){var Ge,vt,Tt,Qt,sn,qt,Nt,en=Te&&Te.ownerDocument,vn=Te?Te.nodeType:9;if(je=je||[],typeof be!="string"||!be||vn!==1&&vn!==9&&vn!==11)return je;if(!Je&&(A(Te),Te=Te||_,C)){if(vn!==11&&(sn=de.exec(be)))if(Ge=sn[1]){if(vn===9)if(Tt=Te.getElementById(Ge)){if(Tt.id===Ge)return je.push(Tt),je}else return je;else if(en&&(Tt=en.getElementById(Ge))&&O(Te,Tt)&&Tt.id===Ge)return je.push(Tt),je}else{if(sn[2])return Ye.apply(je,Te.getElementsByTagName(be)),je;if((Ge=sn[3])&&i.getElementsByClassName&&Te.getElementsByClassName)return Ye.apply(je,Te.getElementsByClassName(Ge)),je}if(i.qsa&&!ie[be+" "]&&(!v||!v.test(be))&&(vn!==1||Te.nodeName.toLowerCase()!=="object")){if(Nt=be,en=Te,vn===1&&(Ue.test(be)||It.test(be))){for(en=ot.test(be)&&Jr(Te.parentNode)||Te,(en!==Te||!i.scope)&&((Qt=Te.getAttribute("id"))?Qt=Qt.replace(nt,rt):Te.setAttribute("id",Qt=$)),qt=f(be),vt=qt.length;vt--;)qt[vt]=(Qt?"#"+Qt:":scope")+" "+ei(qt[vt]);Nt=qt.join(",")}try{return Ye.apply(je,en.querySelectorAll(Nt)),je}catch{ie(be,!0)}finally{Qt===$&&Te.removeAttribute("id")}}}return y(be.replace(xt,"$1"),Te,je,Je)}function dn(){var be=[];function Te(je,Je){return be.push(je+" ")>o.cacheLength&&delete Te[be.shift()],Te[je+" "]=Je}return Te}function _n(be){return be[$]=!0,be}function En(be){var Te=_.createElement("fieldset");try{return!!be(Te)}catch{return!1}finally{Te.parentNode&&Te.parentNode.removeChild(Te),Te=null}}function tr(be,Te){for(var je=be.split("|"),Je=je.length;Je--;)o.attrHandle[je[Je]]=Te}function Ir(be,Te){var je=Te&&be,Je=je&&be.nodeType===1&&Te.nodeType===1&&be.sourceIndex-Te.sourceIndex;if(Je)return Je;if(je){for(;je=je.nextSibling;)if(je===Te)return-1}return be?1:-1}function Fr(be){return function(Te){var je=Te.nodeName.toLowerCase();return je==="input"&&Te.type===be}}function Dr(be){return function(Te){var je=Te.nodeName.toLowerCase();return(je==="input"||je==="button")&&Te.type===be}}function ni(be){return function(Te){return"form"in Te?Te.parentNode&&Te.disabled===!1?"label"in Te?"label"in Te.parentNode?Te.parentNode.disabled===be:Te.disabled===be:Te.isDisabled===be||Te.isDisabled!==!be&&St(Te)===be:Te.disabled===be:"label"in Te?Te.disabled===be:!1}}function bi(be){return _n(function(Te){return Te=+Te,_n(function(je,Je){for(var Ge,vt=be([],je.length,Te),Tt=vt.length;Tt--;)je[Ge=vt[Tt]]&&(je[Ge]=!(Je[Ge]=je[Ge]))})})}function Jr(be){return be&&typeof be.getElementsByTagName<"u"&&be}i=hn.support={},c=hn.isXML=function(be){var Te=be&&be.namespaceURI,je=be&&(be.ownerDocument||be).documentElement;return!x.test(Te||je&&je.nodeName||"HTML")},A=hn.setDocument=function(be){var Te,je,Je=be?be.ownerDocument||be:V;return Je==_||Je.nodeType!==9||!Je.documentElement||(_=Je,I=_.documentElement,C=!c(_),V!=_&&(je=_.defaultView)&&je.top!==je&&(je.addEventListener?je.addEventListener("unload",ct,!1):je.attachEvent&&je.attachEvent("onunload",ct)),i.scope=En(function(Ge){return I.appendChild(Ge).appendChild(_.createElement("div")),typeof Ge.querySelectorAll<"u"&&!Ge.querySelectorAll(":scope fieldset div").length}),i.attributes=En(function(Ge){return Ge.className="i",!Ge.getAttribute("className")}),i.getElementsByTagName=En(function(Ge){return Ge.appendChild(_.createComment("")),!Ge.getElementsByTagName("*").length}),i.getElementsByClassName=he.test(_.getElementsByClassName),i.getById=En(function(Ge){return I.appendChild(Ge).id=$,!_.getElementsByName||!_.getElementsByName($).length}),i.getById?(o.filter.ID=function(Ge){var vt=Ge.replace(wt,st);return function(Tt){return Tt.getAttribute("id")===vt}},o.find.ID=function(Ge,vt){if(typeof vt.getElementById<"u"&&C){var Tt=vt.getElementById(Ge);return Tt?[Tt]:[]}}):(o.filter.ID=function(Ge){var vt=Ge.replace(wt,st);return function(Tt){var Qt=typeof Tt.getAttributeNode<"u"&&Tt.getAttributeNode("id");return Qt&&Qt.value===vt}},o.find.ID=function(Ge,vt){if(typeof vt.getElementById<"u"&&C){var Tt,Qt,sn,qt=vt.getElementById(Ge);if(qt){if(Tt=qt.getAttributeNode("id"),Tt&&Tt.value===Ge)return[qt];for(sn=vt.getElementsByName(Ge),Qt=0;qt=sn[Qt++];)if(Tt=qt.getAttributeNode("id"),Tt&&Tt.value===Ge)return[qt]}return[]}}),o.find.TAG=i.getElementsByTagName?function(Ge,vt){if(typeof vt.getElementsByTagName<"u")return vt.getElementsByTagName(Ge);if(i.qsa)return vt.querySelectorAll(Ge)}:function(Ge,vt){var Tt,Qt=[],sn=0,qt=vt.getElementsByTagName(Ge);if(Ge==="*"){for(;Tt=qt[sn++];)Tt.nodeType===1&&Qt.push(Tt);return Qt}return qt},o.find.CLASS=i.getElementsByClassName&&function(Ge,vt){if(typeof vt.getElementsByClassName<"u"&&C)return vt.getElementsByClassName(Ge)},T=[],v=[],(i.qsa=he.test(_.querySelectorAll))&&(En(function(Ge){var vt;I.appendChild(Ge).innerHTML=$t("<a id='"+$+"'></a><select id='"+$+"-\r\\' msallowcapture=''><option selected=''></option></select>"),Ge.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+Pe+`*(?:''|"")`),Ge.querySelectorAll("[selected]").length||v.push("\\["+Pe+"*(?:value|"+Ee+")"),Ge.querySelectorAll("[id~="+$+"-]").length||v.push("~="),vt=_.createElement("input"),vt.setAttribute("name",""),Ge.appendChild(vt),Ge.querySelectorAll("[name='']").length||v.push("\\["+Pe+"*name"+Pe+"*="+Pe+`*(?:''|"")`),Ge.querySelectorAll(":checked").length||v.push(":checked"),Ge.querySelectorAll("a#"+$+"+*").length||v.push(".#.+[+~]"),Ge.querySelectorAll("\\\f"),v.push("[\\r\\n\\f]")}),En(function(Ge){Ge.innerHTML=$t("<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>");var vt=_.createElement("input");vt.setAttribute("type","hidden"),Ge.appendChild(vt).setAttribute("name","D"),Ge.querySelectorAll("[name=d]").length&&v.push("name"+Pe+"*[*^$|!~]?="),Ge.querySelectorAll(":enabled").length!==2&&v.push(":enabled",":disabled"),I.appendChild(Ge).disabled=!0,Ge.querySelectorAll(":disabled").length!==2&&v.push(":enabled",":disabled"),Ge.querySelectorAll("*,:x"),v.push(",.*:")})),(i.matchesSelector=he.test(S=I.matches||I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&En(function(Ge){i.disconnectedMatch=S.call(Ge,"*"),S.call(Ge,"[s!='']:x"),T.push("!=",at)}),v=v.length&&new RegExp(v.join("|")),T=T.length&&new RegExp(T.join("|")),Te=he.test(I.compareDocumentPosition),O=Te||he.test(I.contains)?function(Ge,vt){var Tt=Ge.nodeType===9?Ge.documentElement:Ge,Qt=vt&&vt.parentNode;return Ge===Qt||!!(Qt&&Qt.nodeType===1&&(Tt.contains?Tt.contains(Qt):Ge.compareDocumentPosition&&Ge.compareDocumentPosition(Qt)&16))}:function(Ge,vt){if(vt){for(;vt=vt.parentNode;)if(vt===Ge)return!0}return!1},ye=Te?function(Ge,vt){if(Ge===vt)return E=!0,0;var Tt=!Ge.compareDocumentPosition-!vt.compareDocumentPosition;return Tt||(Tt=(Ge.ownerDocument||Ge)==(vt.ownerDocument||vt)?Ge.compareDocumentPosition(vt):1,Tt&1||!i.sortDetached&&vt.compareDocumentPosition(Ge)===Tt?Ge==_||Ge.ownerDocument==V&&O(V,Ge)?-1:vt==_||vt.ownerDocument==V&&O(V,vt)?1:p?Y(p,Ge)-Y(p,vt):0:Tt&4?-1:1)}:function(Ge,vt){if(Ge===vt)return E=!0,0;var Tt,Qt=0,sn=Ge.parentNode,qt=vt.parentNode,Nt=[Ge],en=[vt];if(!sn||!qt)return Ge==_?-1:vt==_?1:sn?-1:qt?1:p?Y(p,Ge)-Y(p,vt):0;if(sn===qt)return Ir(Ge,vt);for(Tt=Ge;Tt=Tt.parentNode;)Nt.unshift(Tt);for(Tt=vt;Tt=Tt.parentNode;)en.unshift(Tt);for(;Nt[Qt]===en[Qt];)Qt++;return Qt?Ir(Nt[Qt],en[Qt]):Nt[Qt]==V?-1:en[Qt]==V?1:0}),_},hn.matches=function(be,Te){return hn(be,null,null,Te)},hn.matchesSelector=function(be,Te){if(A(be),i.matchesSelector&&C&&!ie[Te+" "]&&(!T||!T.test(Te))&&(!v||!v.test(Te)))try{var je=S.call(be,Te);if(je||i.disconnectedMatch||be.document&&be.document.nodeType!==11)return je}catch{ie(Te,!0)}return hn(Te,_,null,[be]).length>0},hn.contains=function(be,Te){return(be.ownerDocument||be)!=_&&A(be),O(be,Te)},hn.attr=function(be,Te){(be.ownerDocument||be)!=_&&A(be);var je=o.attrHandle[Te.toLowerCase()],Je=je&&Ne.call(o.attrHandle,Te.toLowerCase())?je(be,Te,!C):void 0;return Je!==void 0?Je:i.attributes||!C?be.getAttribute(Te):(Je=be.getAttributeNode(Te))&&Je.specified?Je.value:null},hn.escape=function(be){return(be+"").replace(nt,rt)},hn.error=function(be){throw new Error("Syntax error, unrecognized expression: "+be)},hn.uniqueSort=function(be){var Te,je=[],Je=0,Ge=0;if(E=!i.detectDuplicates,p=!i.sortStable&&be.slice(0),be.sort(ye),E){for(;Te=be[Ge++];)Te===be[Ge]&&(Je=je.push(Ge));for(;Je--;)be.splice(je[Je],1)}return p=null,be},l=hn.getText=function(be){var Te,je="",Je=0,Ge=be.nodeType;if(Ge){if(Ge===1||Ge===9||Ge===11){if(typeof be.textContent=="string")return be.textContent;for(be=be.firstChild;be;be=be.nextSibling)je+=l(be)}else if(Ge===3||Ge===4)return be.nodeValue}else for(;Te=be[Je++];)je+=l(Te);return je},o=hn.selectors={cacheLength:50,createPseudo:_n,match:M,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(be){return be[1]=be[1].replace(wt,st),be[3]=(be[3]||be[4]||be[5]||"").replace(wt,st),be[2]==="~="&&(be[3]=" "+be[3]+" "),be.slice(0,4)},CHILD:function(be){return be[1]=be[1].toLowerCase(),be[1].slice(0,3)==="nth"?(be[3]||hn.error(be[0]),be[4]=+(be[4]?be[5]+(be[6]||1):2*(be[3]==="even"||be[3]==="odd")),be[5]=+(be[7]+be[8]||be[3]==="odd")):be[3]&&hn.error(be[0]),be},PSEUDO:function(be){var Te,je=!be[6]&&be[2];return M.CHILD.test(be[0])?null:(be[3]?be[2]=be[4]||be[5]||"":je&&Ve.test(je)&&(Te=f(je,!0))&&(Te=je.indexOf(")",je.length-Te)-je.length)&&(be[0]=be[0].slice(0,Te),be[2]=je.slice(0,Te)),be.slice(0,3))}},filter:{TAG:function(be){var Te=be.replace(wt,st).toLowerCase();return be==="*"?function(){return!0}:function(je){return je.nodeName&&je.nodeName.toLowerCase()===Te}},CLASS:function(be){var Te=D[be+" "];return Te||(Te=new RegExp("(^|"+Pe+")"+be+"("+Pe+"|$)"))&&D(be,function(je){return Te.test(typeof je.className=="string"&&je.className||typeof je.getAttribute<"u"&&je.getAttribute("class")||"")})},ATTR:function(be,Te,je){return function(Je){var Ge=hn.attr(Je,be);return Ge==null?Te==="!=":Te?(Ge+="",Te==="="?Ge===je:Te==="!="?Ge!==je:Te==="^="?je&&Ge.indexOf(je)===0:Te==="*="?je&&Ge.indexOf(je)>-1:Te==="$="?je&&Ge.slice(-je.length)===je:Te==="~="?(" "+Ge.replace(jt," ")+" ").indexOf(je)>-1:Te==="|="?Ge===je||Ge.slice(0,je.length+1)===je+"-":!1):!0}},CHILD:function(be,Te,je,Je,Ge){var vt=be.slice(0,3)!=="nth",Tt=be.slice(-4)!=="last",Qt=Te==="of-type";return Je===1&&Ge===0?function(sn){return!!sn.parentNode}:function(sn,qt,Nt){var en,vn,On,Un,Er,cn,ze=vt!==Tt?"nextSibling":"previousSibling",pt=sn.parentNode,Gt=Qt&&sn.nodeName.toLowerCase(),Gn=!Nt&&!Qt,Rn=!1;if(pt){if(vt){for(;ze;){for(Un=sn;Un=Un[ze];)if(Qt?Un.nodeName.toLowerCase()===Gt:Un.nodeType===1)return!1;cn=ze=be==="only"&&!cn&&"nextSibling"}return!0}if(cn=[Tt?pt.firstChild:pt.lastChild],Tt&&Gn){for(Un=pt,On=Un[$]||(Un[$]={}),vn=On[Un.uniqueID]||(On[Un.uniqueID]={}),en=vn[be]||[],Er=en[0]===B&&en[1],Rn=Er&&en[2],Un=Er&&pt.childNodes[Er];Un=++Er&&Un&&Un[ze]||(Rn=Er=0)||cn.pop();)if(Un.nodeType===1&&++Rn&&Un===sn){vn[be]=[B,Er,Rn];break}}else if(Gn&&(Un=sn,On=Un[$]||(Un[$]={}),vn=On[Un.uniqueID]||(On[Un.uniqueID]={}),en=vn[be]||[],Er=en[0]===B&&en[1],Rn=Er),Rn===!1)for(;(Un=++Er&&Un&&Un[ze]||(Rn=Er=0)||cn.pop())&&!((Qt?Un.nodeName.toLowerCase()===Gt:Un.nodeType===1)&&++Rn&&(Gn&&(On=Un[$]||(Un[$]={}),vn=On[Un.uniqueID]||(On[Un.uniqueID]={}),vn[be]=[B,Rn]),Un===sn)););return Rn-=Ge,Rn===Je||Rn%Je===0&&Rn/Je>=0}}},PSEUDO:function(be,Te){var je,Je=o.pseudos[be]||o.setFilters[be.toLowerCase()]||hn.error("unsupported pseudo: "+be);return Je[$]?Je(Te):Je.length>1?(je=[be,be,"",Te],o.setFilters.hasOwnProperty(be.toLowerCase())?_n(function(Ge,vt){for(var Tt,Qt=Je(Ge,Te),sn=Qt.length;sn--;)Tt=Y(Ge,Qt[sn]),Ge[Tt]=!(vt[Tt]=Qt[sn])}):function(Ge){return Je(Ge,0,je)}):Je}},pseudos:{not:_n(function(be){var Te=[],je=[],Je=g(be.replace(xt,"$1"));return Je[$]?_n(function(Ge,vt,Tt,Qt){for(var sn,qt=Je(Ge,null,Qt,[]),Nt=Ge.length;Nt--;)(sn=qt[Nt])&&(Ge[Nt]=!(vt[Nt]=sn))}):function(Ge,vt,Tt){return Te[0]=Ge,Je(Te,null,Tt,je),Te[0]=null,!je.pop()}}),has:_n(function(be){return function(Te){return hn(be,Te).length>0}}),contains:_n(function(be){return be=be.replace(wt,st),function(Te){return(Te.textContent||l(Te)).indexOf(be)>-1}}),lang:_n(function(be){return _t.test(be||"")||hn.error("unsupported lang: "+be),be=be.replace(wt,st).toLowerCase(),function(Te){var je;do if(je=C?Te.lang:Te.getAttribute("xml:lang")||Te.getAttribute("lang"))return je=je.toLowerCase(),je===be||je.indexOf(be+"-")===0;while((Te=Te.parentNode)&&Te.nodeType===1);return!1}}),target:function(be){var Te=n.location&&n.location.hash;return Te&&Te.slice(1)===be.id},root:function(be){return be===I},focus:function(be){return be===_.activeElement&&(!_.hasFocus||_.hasFocus())&&!!(be.type||be.href||~be.tabIndex)},enabled:ni(!1),disabled:ni(!0),checked:function(be){var Te=be.nodeName.toLowerCase();return Te==="input"&&!!be.checked||Te==="option"&&!!be.selected},selected:function(be){return be.parentNode&&be.parentNode.selectedIndex,be.selected===!0},empty:function(be){for(be=be.firstChild;be;be=be.nextSibling)if(be.nodeType<6)return!1;return!0},parent:function(be){return!o.pseudos.empty(be)},header:function(be){return j.test(be.nodeName)},input:function(be){return U.test(be.nodeName)},button:function(be){var Te=be.nodeName.toLowerCase();return Te==="input"&&be.type==="button"||Te==="button"},text:function(be){var Te;return be.nodeName.toLowerCase()==="input"&&be.type==="text"&&((Te=be.getAttribute("type"))==null||Te.toLowerCase()==="text")},first:bi(function(){return[0]}),last:bi(function(be,Te){return[Te-1]}),eq:bi(function(be,Te,je){return[je<0?je+Te:je]}),even:bi(function(be,Te){for(var je=0;je<Te;je+=2)be.push(je);return be}),odd:bi(function(be,Te){for(var je=1;je<Te;je+=2)be.push(je);return be}),lt:bi(function(be,Te,je){for(var Je=je<0?je+Te:je>Te?Te:je;--Je>=0;)be.push(Je);return be}),gt:bi(function(be,Te,je){for(var Je=je<0?je+Te:je;++Je<Te;)be.push(Je);return be})}},o.pseudos.nth=o.pseudos.eq;for(r in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})o.pseudos[r]=Fr(r);for(r in{submit:!0,reset:!0})o.pseudos[r]=Dr(r);function eo(){}eo.prototype=o.filters=o.pseudos,o.setFilters=new eo,f=hn.tokenize=function(be,Te){var je,Je,Ge,vt,Tt,Qt,sn,qt=X[be+" "];if(qt)return Te?0:qt.slice(0);for(Tt=be,Qt=[],sn=o.preFilter;Tt;){(!je||(Je=ht.exec(Tt)))&&(Je&&(Tt=Tt.slice(Je[0].length)||Tt),Qt.push(Ge=[])),je=!1,(Je=It.exec(Tt))&&(je=Je.shift(),Ge.push({value:je,type:Je[0].replace(xt," ")}),Tt=Tt.slice(je.length));for(vt in o.filter)(Je=M[vt].exec(Tt))&&(!sn[vt]||(Je=sn[vt](Je)))&&(je=Je.shift(),Ge.push({value:je,type:vt,matches:Je}),Tt=Tt.slice(je.length));if(!je)break}return Te?Tt.length:Tt?hn.error(be):X(be,Qt).slice(0)};function ei(be){for(var Te=0,je=be.length,Je="";Te<je;Te++)Je+=be[Te].value;return Je}function jr(be,Te,je){var Je=Te.dir,Ge=Te.next,vt=Ge||Je,Tt=je&&vt==="parentNode",Qt=ne++;return Te.first?function(sn,qt,Nt){for(;sn=sn[Je];)if(sn.nodeType===1||Tt)return be(sn,qt,Nt);return!1}:function(sn,qt,Nt){var en,vn,On,Un=[B,Qt];if(Nt){for(;sn=sn[Je];)if((sn.nodeType===1||Tt)&&be(sn,qt,Nt))return!0}else for(;sn=sn[Je];)if(sn.nodeType===1||Tt)if(On=sn[$]||(sn[$]={}),vn=On[sn.uniqueID]||(On[sn.uniqueID]={}),Ge&&Ge===sn.nodeName.toLowerCase())sn=sn[Je]||sn;else{if((en=vn[vt])&&en[0]===B&&en[1]===Qt)return Un[2]=en[2];if(vn[vt]=Un,Un[2]=be(sn,qt,Nt))return!0}return!1}}function qi(be){return be.length>1?function(Te,je,Je){for(var Ge=be.length;Ge--;)if(!be[Ge](Te,je,Je))return!1;return!0}:be[0]}function ro(be,Te,je){for(var Je=0,Ge=Te.length;Je<Ge;Je++)hn(be,Te[Je],je);return je}function To(be,Te,je,Je,Ge){for(var vt,Tt=[],Qt=0,sn=be.length,qt=Te!=null;Qt<sn;Qt++)(vt=be[Qt])&&(!je||je(vt,Je,Ge))&&(Tt.push(vt),qt&&Te.push(Qt));return Tt}function di(be,Te,je,Je,Ge,vt){return Je&&!Je[$]&&(Je=di(Je)),Ge&&!Ge[$]&&(Ge=di(Ge,vt)),_n(function(Tt,Qt,sn,qt){var Nt,en,vn,On=[],Un=[],Er=Qt.length,cn=Tt||ro(Te||"*",sn.nodeType?[sn]:sn,[]),ze=be&&(Tt||!Te)?To(cn,On,be,sn,qt):cn,pt=je?Ge||(Tt?be:Er||Je)?[]:Qt:ze;if(je&&je(ze,pt,sn,qt),Je)for(Nt=To(pt,Un),Je(Nt,[],sn,qt),en=Nt.length;en--;)(vn=Nt[en])&&(pt[Un[en]]=!(ze[Un[en]]=vn));if(Tt){if(Ge||be){if(Ge){for(Nt=[],en=pt.length;en--;)(vn=pt[en])&&Nt.push(ze[en]=vn);Ge(null,pt=[],Nt,qt)}for(en=pt.length;en--;)(vn=pt[en])&&(Nt=Ge?Y(Tt,vn):On[en])>-1&&(Tt[Nt]=!(Qt[Nt]=vn))}}else pt=To(pt===Qt?pt.splice(Er,pt.length):pt),Ge?Ge(null,Qt,pt,qt):Ye.apply(Qt,pt)})}function xo(be){for(var Te,je,Je,Ge=be.length,vt=o.relative[be[0].type],Tt=vt||o.relative[" "],Qt=vt?1:0,sn=jr(function(en){return en===Te},Tt,!0),qt=jr(function(en){return Y(Te,en)>-1},Tt,!0),Nt=[function(en,vn,On){var Un=!vt&&(On||vn!==h)||((Te=vn).nodeType?sn(en,vn,On):qt(en,vn,On));return Te=null,Un}];Qt<Ge;Qt++)if(je=o.relative[be[Qt].type])Nt=[jr(qi(Nt),je)];else{if(je=o.filter[be[Qt].type].apply(null,be[Qt].matches),je[$]){for(Je=++Qt;Je<Ge&&!o.relative[be[Je].type];Je++);return di(Qt>1&&qi(Nt),Qt>1&&ei(be.slice(0,Qt-1).concat({value:be[Qt-2].type===" "?"*":""})).replace(xt,"$1"),je,Qt<Je&&xo(be.slice(Qt,Je)),Je<Ge&&xo(be=be.slice(Je)),Je<Ge&&ei(be))}Nt.push(je)}return qi(Nt)}function pn(be,Te){var je=Te.length>0,Je=be.length>0,Ge=function(vt,Tt,Qt,sn,qt){var Nt,en,vn,On=0,Un="0",Er=vt&&[],cn=[],ze=h,pt=vt||Je&&o.find.TAG("*",qt),Gt=B+=ze==null?1:Math.random()||.1,Gn=pt.length;for(qt&&(h=Tt==_||Tt||qt);Un!==Gn&&(Nt=pt[Un])!=null;Un++){if(Je&&Nt){for(en=0,!Tt&&Nt.ownerDocument!=_&&(A(Nt),Qt=!C);vn=be[en++];)if(vn(Nt,Tt||_,Qt)){sn.push(Nt);break}qt&&(B=Gt)}je&&((Nt=!vn&&Nt)&&On--,vt&&Er.push(Nt))}if(On+=Un,je&&Un!==On){for(en=0;vn=Te[en++];)vn(Er,cn,Tt,Qt);if(vt){if(On>0)for(;Un--;)Er[Un]||cn[Un]||(cn[Un]=oe.call(sn));cn=To(cn)}Ye.apply(sn,cn),qt&&!vt&&cn.length>0&&On+Te.length>1&&hn.uniqueSort(sn)}return qt&&(B=Gt,h=ze),Er};return je?_n(Ge):Ge}g=hn.compile=function(be,Te){var je,Je=[],Ge=[],vt=ve[be+" "];if(!vt){for(Te||(Te=f(be)),je=Te.length;je--;)vt=xo(Te[je]),vt[$]?Je.push(vt):Ge.push(vt);vt=ve(be,pn(Ge,Je)),vt.selector=be}return vt},y=hn.select=function(be,Te,je,Je){var Ge,vt,Tt,Qt,sn,qt=typeof be=="function"&&be,Nt=!Je&&f(be=qt.selector||be);if(je=je||[],Nt.length===1){if(vt=Nt[0]=Nt[0].slice(0),vt.length>2&&(Tt=vt[0]).type==="ID"&&Te.nodeType===9&&C&&o.relative[vt[1].type]){if(Te=(o.find.ID(Tt.matches[0].replace(wt,st),Te)||[])[0],Te)qt&&(Te=Te.parentNode);else return je;be=be.slice(vt.shift().value.length)}for(Ge=M.needsContext.test(be)?0:vt.length;Ge--&&(Tt=vt[Ge],!o.relative[Qt=Tt.type]);)if((sn=o.find[Qt])&&(Je=sn(Tt.matches[0].replace(wt,st),ot.test(vt[0].type)&&Jr(Te.parentNode)||Te))){if(vt.splice(Ge,1),be=Je.length&&ei(vt),!be)return Ye.apply(je,Je),je;break}}return(qt||g(be,Nt))(Je,Te,!C,je,!Te||ot.test(be)&&Jr(Te.parentNode)||Te),je},i.sortStable=$.split("").sort(ye).join("")===$,i.detectDuplicates=!!E,A(),i.sortDetached=En(function(be){return be.compareDocumentPosition(_.createElement("fieldset"))&1}),En(function(be){return be.innerHTML=$t("<a href='#'></a>"),be.firstChild.getAttribute("href")==="#"})||tr("type|href|height|width",function(be,Te,je){if(!je)return be.getAttribute(Te,Te.toLowerCase()==="type"?1:2)}),(!i.attributes||!En(function(be){return be.innerHTML=$t("<input/>"),be.firstChild.setAttribute("value",""),be.firstChild.getAttribute("value")===""}))&&tr("value",function(be,Te,je){if(!je&&be.nodeName.toLowerCase()==="input")return be.defaultValue}),En(function(be){return be.getAttribute("disabled")==null})||tr(Ee,function(be,Te,je){var Je;if(!je)return be[Te]===!0?Te.toLowerCase():(Je=be.getAttributeNode(Te))&&Je.specified?Je.value:null});var nn=n.Sizzle;hn.noConflict=function(){return n.Sizzle===hn&&(n.Sizzle=nn),hn},t.exports?t.exports=hn:n.Sizzle=hn})(window)})(T1)),T1.exports}var R9=C9();const jd=Lf(R9);function x9(t){return t!==null}async function N9(t,e){return await new Promise((n,r)=>{let i=!1;t.send({action:"START_FINDER"}).then(()=>i=!0).then(async()=>await t.send({action:"FIND",value:e})).then(o=>{o?.value?.success?n(o?.value):n(null)}).catch(o=>{r(o)}),setTimeout(()=>{!i&&n(null)},150)})}function O9(t=null){return t==null?{_bonus:0,_elements:[]}:{_bonus:t.bonus,_elements:t.elements.map(e=>{if(e.proximity===w1.DYNAMIC){const{proximity:n,level:r,selector:i}=e;return{proximity:n,level:r,selector:i.path}}else{const{proximity:n,selector:r}=e;return{proximity:n,selector:r.path}}})}}async function L9(t,e,n=[],r,i,o,l=0){const c=ec.getWindows(y=>y.getDepth()===l),f=t.getOptions(),g={options:f,selectors:e.map(y=>y.path),iframes:n.map(y=>y.map(h=>h.path)),context:f.contextEnabled?O9(r):null,validationData:f.validationEnabled?o:null,rigidity:i};return await Promise.all(c.map(async y=>await N9(y,g))).then(y=>y.filter(x9))}function D9(t){const e=ec.getWindows(n=>n.getDepth()===1).map(n=>P9(n,t));return n=>{e.splice(0).forEach(r=>{r(n)})}}function P9(t,e){t.send({action:"START_PICKER",value:{source:null,domain:window.location.origin,options:e.getOptions()}},!1).catch(Re.error);const n=i=>{try{switch(i.payload.action){case"PICKER_CROSS_HOVER":e.hideHighlighter();break;case"PICKER_CROSS_SELECT":M9(i,e);break;case"PICKER_CROSS_STOP":e.stop();break;default:break}}catch(o){Re.error(o),e.stop()}},r=t.onMessage(n);return async i=>{await t.send({action:"STOP_PICKER",value:{reason:i}},!1),r()}}function M9(t,e){const n=t.value?.result;if(Vd.lastHoveredEvent==null)throw new Error("No last hovered event");const r=[...e.getTrailForMouseEvent(Vd.lastHoveredEvent),Ig(Vd.lastHoveredEvent)],i=e.getOptions().dynamicIframes?[]:[...r.reduce((l,c)=>(c!=null&&l.push(e.selectorsFor(c)),l),[]),...(n?.iframes??[]).map(l=>l.map(c=>new ba(c.path)))],o={selectors:n?.selectors.map(l=>new ba(l.path)),pathElement:n!=null?new Ag(n.pathElement?.elementType??"div",n.pathElement?.id??null,n.pathElement?.classList??[],n.pathElement?.attributesList??[],n.pathElement?.texts??[]):null,iframes:i,contextElements:n?.contextElements!=null?n?.contextElements?.map(l=>({selector:new ba(l.selector.path),proximity:l.proximity,level:"level"in l?l.level:null})):void 0,validationData:n?.validationData,element:null,isCross:!0};e.event?.trigger(Vd.SELECT,o),e.stop(Vd.SELECT)}function k9(t,e,n){const r=new URL(e,"https://www.google.fr"),o=new URLSearchParams(r.search).get(n),l=t.tagName.toLowerCase();return o==null||o===""?`${l}[src="${e}"]`:`${l}[src*="${n}=${o}"]`}function F9(t,e){const n=[];return e.forEach(r=>{const i=t.getAttribute("src");if(i!=null)switch(r.attributeRule){case"keepOnlyURLVar":n.push(k9(t,i,r.ruleValue));break;default:n.push(`iframe[src="${i}"]`);break}}),n}const fo=class fo{constructor(e){this.contextEnabled=!1,this.contextWidth=3,this.textsEnabled=!0,this.limitTextSelectorToTarget=!0,this.validationEnabled=!0,this.validators=[],this.pathExtensions=[],this.eventsToBlock=[],this.cssClassesBlacklist=[],this.useCssClassesInPath=!0,this.useIdSelector=!0,this.dynamicIframes=!1,this.event=pC(),this.highlighter=null,this.iframesSettings={},this.highlighterStyles=`
    position: fixed; z-index: 2147483647;
    top: -10000px; left: -10000px;
    width: 0; height: 0;
    box-sizing: border-box !important;
    box-shadow: 0 0 0px 2px blue;
    pointer-events: none;
    background-color: transparent;
  `,this.unlisteners=[],this.iframes=[],this.cross=n=>D9(n),this.stopCross=null,this.useIdSelector=e?.useIdSelector??fo.defaultOptions.useIdSelector,this.useCssClassesInPath=e?.useCssClassesInPath??fo.defaultOptions.useCssClassesInPath,this.setOptions(e??{})}start(){return fo.active===this?null:(fo.active!=null&&fo.active!==this&&fo.active.stop("picker-start"),fo.active=this,this.event.trigger(fo.START),this.iframes=this.getIframes(document),this.createHighlighter(),this.stopCross=this.cross(this),this.setupListeners(),this.event)}stop(e="unknown"){this.event?.trigger(fo.STOP,e),this.unlisteners.splice(0).forEach(n=>{n()}),this.removeHighlighter(),typeof this.stopCross=="function"&&(this.stopCross(e),this.stopCross=null),fo.active=null,fo.lastHoveredEvent=null}getUnlistenersCount(){return this.unlisteners.length}setTextsEnabled(e){this.textsEnabled=e}setLimitTextSelectorToTarget(e){this.limitTextSelectorToTarget=e}setContextEnabled(e){this.contextEnabled=e}setContextWidth(e){this.contextWidth=typeof e!="number"?this.contextWidth:e}setEventsToBlock(e){this.eventsToBlock=e}getEventsToBlock(){return this.eventsToBlock}setCssClassesBlacklist(e){this.cssClassesBlacklist=e}setIframesSettings(e){e!==void 0&&(this.iframesSettings=e)}getCssClassesBlacklist(){return this.cssClassesBlacklist}setValidationEnabled(e){this.validationEnabled=e}addValidator(e){this.validators.push(e)}addPathExtension(e){this.pathExtensions.push(e)}setCrossResolver(e){this.stopCross!=null&&(this.stopCross(),this.stopCross=null),this.cross=e}getOptions(){return{textsEnabled:this.textsEnabled,limitTextSelectorToTarget:this.limitTextSelectorToTarget,contextEnabled:this.contextEnabled,contextWidth:this.contextWidth,validationEnabled:this.validationEnabled,pathExtensions:this.pathExtensions,iframesSettings:this.iframesSettings,validators:this.validators,eventsToBlock:this.eventsToBlock,cssClassesBlacklist:this.cssClassesBlacklist,useIdSelector:this.useIdSelector,useCssClassesInPath:this.useCssClassesInPath,dynamicIframes:this.dynamicIframes}}setOptions(e){const n={...fo.defaultOptions,...e,eventsToBlock:e?.eventsToBlock??fo.defaultOptions.eventsToBlock};this.setTextsEnabled(n.textsEnabled),this.setLimitTextSelectorToTarget(n.limitTextSelectorToTarget),this.setValidationEnabled(n.validationEnabled),this.setContextEnabled(n.contextEnabled),this.setContextWidth(n.contextWidth),this.setEventsToBlock(n.eventsToBlock),this.setCssClassesBlacklist(n.cssClassesBlacklist),this.dynamicIframes=n.dynamicIframes,n.validators.forEach(r=>{this.addValidator(r)}),n.pathExtensions.forEach(r=>{this.addPathExtension(r)})}static getLastHoveredElement(){if(fo.lastHoveredEvent==null)return null;const e=Ig(fo.lastHoveredEvent);return e instanceof Element?e:null}setupListeners(){const e=i=>{this.onMouseEvent(i)};window.addEventListener("mouseover",e,!0),this.unlisteners.push(()=>{window.removeEventListener("mouseover",e,!0)}),window.addEventListener("mousemove",e,!0),this.unlisteners.push(()=>{window.removeEventListener("mousemove",e,!0)});const n=i=>{this.onKeyUp(i)};window.addEventListener("keyup",n,!0),this.unlisteners.push(()=>{window.removeEventListener("keyup",n,!0)});const r=i=>{this.onClick(i)};if(window.addEventListener("click",r,!0),this.unlisteners.push(()=>{window.removeEventListener("click",r,!0)}),this.eventsToBlock.length>0){const i=o=>{o.preventDefault(),o.stopImmediatePropagation()};this.eventsToBlock.forEach(o=>{window.addEventListener(o,i,!0),this.unlisteners.push(function(){window.removeEventListener(o,i,!0)})})}this.setupIframesListeners({onMouseEvent:e,onKeyUp:n,onClick:r})}setupIframesListeners(e,n=null){const{onIframeEnter:r,onIframeLeave:i,onClick:o,onKeyUp:l,onMouseEvent:c}=e;(n??this.iframes).forEach(({iframe:f,childFrames:g})=>{try{const y=f.contentWindow;y!=null&&(r!=null&&(f.addEventListener("mouseenter",r,!0),this.unlisteners.push(()=>{f.removeEventListener("mouseenter",r,!0)})),i!=null&&(f.addEventListener("mouseleave",i,!0),this.unlisteners.push(()=>{f.removeEventListener("mouseleave",i,!0)})),y.addEventListener("click",o,!0),this.unlisteners.push(()=>{y.removeEventListener("click",o,!0)}),y.addEventListener("keyup",l,!0),this.unlisteners.push(()=>{y.removeEventListener("keyup",l,!0)}),y.addEventListener("mousemove",c,!0),this.unlisteners.push(()=>{y.removeEventListener("mousemove",c,!0)}),y.addEventListener("mouseover",c,!0),this.unlisteners.push(()=>{y.removeEventListener("mouseover",c,!0)})),this.setupIframesListeners(e,g)}catch(y){Re.debug(y,"Error while setting up listeners for iframes, probably because the iframe is CROSS_DOMAIN")}})}getIframes(e){const n=[],r=e.evaluate("//frame",e,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null),i=e.evaluate("//iframe",e,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null);for(let o=0;o<r.snapshotLength;o++)n.push(r.snapshotItem(o));for(let o=0;o<i.snapshotLength;o++)n.push(i.snapshotItem(o));return n.filter(U9).map(o=>({iframe:o,childFrames:this.getIframes(o.contentDocument)}))}createSelectorsForMouseEvent(e){if(e==null)throw new Error("No event provided");const n=Ig(e);if(n==null)throw new Error("No target found");const r=this.selectorsFor(n),i=this.getTrailForMouseEvent(e).map(f=>this.selectorsFor(f)),o=this.contextEnabled?AN.around(n,this):void 0,l=this.validationEnabled?this.collectValidationData(n):void 0;let c=Ag.forElement(n);return this.textsEnabled||(c=new Ag(c.elementType,c.id,c.classList,c.attributesList,[])),{selectors:r,iframes:this.dynamicIframes?[]:i,pathElement:c,contextElements:o,validationData:l,element:n}}shouldCreatePath(e,n){return e==null?!1:e===n||n===document.body||n?.id!=null&&n.id!==""||!$9(n?.tagName)}selectorsFor(e){const n=new Set,r=[];let i=e;const o=e.ownerDocument.documentElement;do r.unshift(i),this.shouldCreatePath(e,i)&&this.stringSelectorsFor(r,e).forEach(c=>n.add(new ba(c))),window.ShadowRoot!=null&&i.parentNode instanceof window.ShadowRoot&&i.parentNode.host!=null?i=i.parentNode.host:i=i!=null?i.parentElement:null;while(i!==o&&i!=null&&i.parentElement!==o);return Array.from(n.values())}stringSelectorsFor(e,n){const r=[];if(e instanceof Array)return e.reduce((f,g)=>{const y=this.stringSelectorsFor(g,n);return f.length===0&&y.length>0?f.concat(y):y.length>0?f.reduce((h,p)=>(y.forEach(E=>{p.includes(":nth-child")?h.push(p):h.push(`${p} > ${E}`)}),h),[]):f},[]);const i=e.tagName.toLowerCase(),o=this.pathExtensions.find(f=>i===f.tagName.toLowerCase());let l=e.tagName.toLowerCase();if(e.id&&Vh(e.id)&&this.useIdSelector){const f=j0(e);f!=null&&(l+=f)}if(typeof e.className=="string"&&e.className.trim()&&this.useCssClassesInPath&&(l+=S9(e,this.cssClassesBlacklist)),i==="input"){const f=e.getAttribute("type");f!==null&&(l+=`[type=${f}]`)}if(r.push(l),["iframe","frame","frameset"].includes(e.tagName.toLowerCase())&&e.getAttribute("name")&&(o==null||o.attributes.findIndex(f=>f.name.toLowerCase()==="name"&&!f.include)<0)&&r.push(`${l}[name="${e.getAttribute("name")}"]`),["iframe","frame","frameset"].includes(e.tagName.toLowerCase())&&e.getAttribute("src")&&(o==null||o.attributes.findIndex(f=>f.name.toLowerCase()==="src"&&!f.include)<0)){const f=this.iframesSettings.src;f?F9(e,f).forEach(g=>r.push(g)):r.push(`${l}[src="${e.getAttribute("src")}"]`)}if(l==="img"&&(o==null||o.attributes.findIndex(f=>f.name.toLowerCase()==="src"&&!f.include)<0)&&r.push(`${l}[src="${e.getAttribute("src")}"]`),this.textsEnabled){const f=SN(e)?.split(`
`)[0].split("").reduce((g,y,h)=>g+=e.textContent?.trim()[h]??y,"")??"";f.length<=60&&f.trim().length>0&&(this.limitTextSelectorToTarget&&e===n?r.push(l+':contains("'+f.trim().replace(/"/g,'\\"')+'")'):this.limitTextSelectorToTarget||r.push(l+':contains("'+f.trim().replace(/"/g,'\\"')+'")'))}return["svg","rect","circle","ellipse","line","polyline","polygon","path","image"].includes(l)&&["x","y","d","width","height","rx","ry","cx","cy","x1","y1","x2","y2"].forEach(f=>{const g=e.getAttribute(f);g!=null&&r.push(`${l}[${f}="${g.replace(/"/g,'\\"')}"]`)}),o?.attributes.filter(f=>f.include).forEach(f=>{const g=e.getAttribute(f.name);g!==null&&r.push(`${l}[${f.name}="${g.replace(/"/g,'\\"')}"]`)}),n?.parentElement===e&&r.push(l+` :nth-child(${Array.from(e.childNodes).indexOf(n)})`),r}collectValidationData(e){return this.validators.reduce((n,r)=>({...n,...r.collect(e)}),{})}createHighlighter(){return this.highlighter!=null?this.highlighter:(this.highlighter=document.createElement("div"),this.highlighter.setAttribute("id","lemon-highlighter"),this.highlighter.setAttribute("style",this.highlighterStyles),document.body.tagName.toLowerCase()==="frameset"?document.firstElementChild?.appendChild(this.highlighter):document.body.appendChild(this.highlighter),this.highlighter)}removeHighlighter(){try{return this.highlighter==null||(document.body.tagName.toLowerCase()==="frameset"?document.firstElementChild?.removeChild(this.highlighter):document.body.removeChild(this.highlighter),this.highlighter=null),null}catch{return null}}hideHighlighter(){return this.highlighter==null||(this.highlighter.style.display="none"),null}getTrailForMouseEvent(e,n){if(e==null)return[];const r=Ig(e),i=n??this.iframes,o=i.find(({iframe:l})=>l.contentDocument===r?.ownerDocument);if(o!=null)return[o.iframe,...xN(e)];for(let l=0;l<i.length;l++){const c=this.getTrailForMouseEvent(e,i[l].childFrames);if(c.length>0)return[i[l].iframe,...c]}return xN(e)}onKeyUp(e){e.key==="Escape"&&this.stop("cancel")}onClick(e){if(e.altKey||e.metaKey||e.ctrlKey||!e.isTrusted)return null;e.preventDefault(),e.stopPropagation();try{this.event?.trigger(fo.SELECT,this.createSelectorsForMouseEvent(e))}catch(n){this.event?.trigger(fo.ERROR,n)}return this.stop("selected"),null}onMouseEvent(e){const n=Ig(e);if(n==null){Re.trace("onMouseEvent: target is null");return}if(n===document.documentElement||n===document.body||n===this.highlighter){Re.trace("Target can't be documentElement, body or higlighter");return}fo.lastHoveredEvent=e;const r=n.getBoundingClientRect();let{top:i,left:o,width:l,height:c}=r;this.getTrailForMouseEvent(e).filter(f=>zc(f)).forEach(f=>{const g=f.getBoundingClientRect(),y=window.getComputedStyle(f),h=(isNaN(parseInt(y.borderTopWidth))?0:parseInt(y.borderTopWidth))+(isNaN(parseInt(y.paddingTop))?0:parseInt(y.paddingTop)),p=(isNaN(parseInt(y.borderLeftWidth))?0:parseInt(y.borderLeftWidth))+(isNaN(parseInt(y.paddingLeft))?0:parseInt(y.paddingLeft));i+=g.top+h,o+=g.left+p}),this.highlighter!=null&&(this.highlighter.style.display="block",this.highlighter.style.pointerEvents="none",this.highlighter.style.left=`${o}px`,this.highlighter.style.top=`${i}px`,this.highlighter.style.width=`${l}px`,this.highlighter.style.height=`${c}px`),this.event?.trigger(fo.HOVER,n)}};fo.START="start",fo.STOP="stop",fo.SELECT="select",fo.HOVER="hover",fo.ERROR="error",fo.active=null,fo.defaultOptions={textsEnabled:!0,limitTextSelectorToTarget:!0,contextEnabled:!1,contextWidth:3,validationEnabled:!0,iframesSettings:{},validators:[],pathExtensions:[],eventsToBlock:[],cssClassesBlacklist:[],useCssClassesInPath:!0,useIdSelector:!0,dynamicIframes:!1},fo.lastHoveredEvent=null;let Vd=fo;function $9(t){try{if(t==null||customElements.get(t.toLowerCase())!=null)return!1;const e=document.createElement(t),n=e.toString();return e.remove(),n!=="[object HTMLUnknownElement]"}catch{return!1}}function U9(t){let e=!1;try{e=t?.contentDocument??!1}catch(n){Re.error(n)}return!!e}function Ig(t){const n=t.composedPath()[0]??t.target;return RN(n)?B9(n):null}function B9(t){return Z9(t)?t:null}function RN(t){return t!=null&&"nodeType"in t}function Z9(t){return t!=null&&typeof t=="object"&&"nodeType"in t&&t.nodeType===Node.ELEMENT_NODE}function xN(t){return Ig(t)?.getRootNode().nodeType!==Node.DOCUMENT_FRAGMENT_NODE?[]:t.composedPath().reduce((n,r)=>(RN(r)&&r.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&n.push(r.host),n),[]).reverse()}const A1=At.object({strategy:At.enum(["regular","xpath"]).optional(),enableCrossDomain:At.boolean().optional(),context:At.object({enabled:At.boolean().optional(),levels:At.number().optional(),bonus:At.unknown().optional()}).optional(),dynamicIframes:At.boolean().optional(),trustSpecificity:At.boolean().optional(),postMessagesAdditionalProperties:At.array(At.unknown()).catch([]),validation:At.object({enabled:At.boolean().optional(),threshold:At.number().optional(),mode:At.enum(["regular","xpath","dynamic"]).optional(),validators:At.array(At.object({enabled:At.boolean(),name:At.enum(["nth","position","dimensions","attributes"]),weight:At.number(),options:At.record(At.union([At.string(),At.unknown()])).catch({})})).optional()}).optional(),cssClassesBlacklist:At.array(At.string()).catch([]),eventsToBlock:At.array(At.string()).catch([]),pathExtensions:At.array(At.string()).catch([]),iframesSettings:At.record(At.union([At.string(),At.unknown()])).optional(),useTexts:At.boolean().optional(),projectRigidity:At.number().optional(),useCssClassesInPath:At.boolean().optional(),modifiers:At.array(At.object({enabled:At.boolean(),name:At.literal("keywords"),options:At.object({words:At.array(At.string()).optional()})})).optional(),useIdSelector:At.boolean().optional()}).passthrough(),j9=/^(.*)\((.*):(.*)\)$/;function V9(t){try{return JSON.parse(t)}catch(e){return Re.debug(e,"Error while getting the algo configuration, returning empty configuration"),null}}function ho(t,e,n){return e.map(r=>typeof r=="string"?V9(r):r).reverse().reduce((r,i)=>{if(i!=null){const o=ON(t,i,n);if(o!==void 0)return o}return r},void 0)}function NN(t,e,n={}){const r=t.match(j9);if(r!=null){const[,i,o,l]=r;return e!=null&&typeof e=="object"&&i in e&&Array.isArray(e[i])?e[i].find(c=>{if(!(o in c))return!1;const f=c[o];if(l[0]==="$"){const g=n[l.substr(1)];return typeof g=="function"?g(f,c):g===f}return f===l}):void 0}return e!=null&&typeof e=="object"&&t in e?e[t]:void 0}function ON(t,e,n){const r=t.split(".").filter(Boolean);if(r.length===1)return NN(t,e,n);if(r.length>1){const i=r.shift();if(i==null)return;const o=NN(i,e,n);return o!=null?ON(r.join("."),o,n):void 0}}function z9(t){const e={strategy:ho("strategy",t),useTexts:ho("useTexts",t),enableCrossDomain:ho("enableCrossDomain",t),pathExtensions:ho("pathExtensions",t)??[],modifiers:ho("modifiers",t)??[],iframesSettings:ho("iframesSettings",t),validation:{enabled:ho("validation.enabled",t),threshold:ho("validation.threshold",t),mode:ho("validation.mode",t),validators:ho("validation.validators",t)??[]},context:{enabled:ho("context.enabled",t),levels:ho("context.levels",t),bonus:ho("context.bonus",t)},eventsToBlock:ho("eventsToBlock",t),cssClassesBlacklist:ho("cssClassesBlacklist",t),projectRigidity:ho("projectRigidity",t),useCssClassesInPath:ho("useCssClassesInPath",t),useIdSelector:ho("useIdSelector",t),dynamicIframes:ho("dynamicIframes",t),trustSpecificity:ho("trustSpecificity",t),postMessagesAdditionalProperties:ho("postMessagesAdditionalProperties",t)??[]};return t.reverse().forEach(n=>{(ho("validation.validators",[n])??[])?.forEach(o=>{const l=e.validation?.validators?.findIndex(c=>c.name===o.name);l==null||l<0?e.validation?.validators?.push(o):e.validation?.validators?.[l]!=null&&(e.validation.validators[l].enabled=ho("validation.validators(name:$name).enabled",[n,e],{name:o.name})??!1,e.validation.validators[l].weight=ho("validation.validators(name:$name).weight",[n,e],{name:o.name})??0,e.validation.validators[l].options=ho("validation.validators(name:$name).options",[n,e],{name:o.name})??{})}),(ho("modifiers",[n])??[])?.forEach(o=>{const l=e?.modifiers?.findIndex(c=>c.name===o.name);l==null||l<0?e.modifiers?.push(o):e.modifiers!=null&&(e.modifiers[l].enabled=ho("modifiers(name:$name).enabled",[n,e],{name:o.name})??!1,e.modifiers[l].options=ho("modifiers(name:$name).options",[n,e],{name:o.name})??{})})}),A1.parse(e)}class H9{constructor(e=1){this.name="nth",this._rate=.1,this.weight=e}async validate(e,n,r){if(typeof n.nthPosition!="number"||!(e.element instanceof Hs))return;const i=e.element.dom,o=i.parentElement;if(o==null)return;const l=o.children;let c=0,f=null;do f=l[c],c++;while(f!==i&&c<l.length);if(f!==i)return;const g=Math.abs(n.nthPosition-c),y=1+r*(1-g*this._rate);y>1&&e.score.multiply((g===0?y*1.5:y)*this.weight,"VALIDATOR",{validator:this.name,originalPosition:n.nthPosition,matchedPosition:c})}collect(e){return{nthPosition:G9(e)}}}function G9(t){const e=t.parentElement;if(e==null)return null;const n=e.children;for(let r=0;r<n.length;r++)if(n[r]===t)return r+1;return null}class q9{constructor(e=1){this.name="position",this.weight=1,this._range=40,this.weight=Number(e)??1}async validate(e,n,r){if(n.position==null||!(e.element instanceof Hs))return;const i=e.element.dom,{top:o,left:l}=LN(i),c=n.position,f=Math.sqrt(Math.pow(Math.abs(o-c.top),2)+Math.pow(Math.abs(l-c.left),2)),g=1+r*(this._range/(this._range+f));e.score.multiply(g*this.weight,"VALIDATOR",{validator:this.name,distance:f})}collect(e){const{top:n,left:r}=LN(e),i=e.ownerDocument,o=i.body.clientWidth-r,l=i.body.clientHeight-n;return{position:{top:n,left:r,right:o,bottom:l}}}}function LN(t){let e=t,n=0,r=0;for(;e instanceof HTMLElement&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)n+=e.offsetLeft-e.scrollLeft+e.clientLeft,r+=e.offsetTop-e.scrollTop+e.clientTop,e=e.offsetParent;return{top:r,left:n}}class W9{constructor(e=1){this.name="dimensions",this.weight=1,this._margin=.2,this.weight=Number(e)??1}async validate(e,n,r){if(typeof n.width!="number"||typeof n.height!="number"||n.width<=0||n.height<=0)return;const o=await e.element.getRect(),l=n.width,c=n.height;let f=1;if(o.width>=l*(1-this._margin)&&o.width<=l*(1+this._margin)){const g=1-Math.abs(l-o.width)/(l*this._margin);f+=r/2*g}if(o.height>=c*(1-this._margin)&&o.height<=c*(1+this._margin)){const g=1-Math.abs(c-o.height)/(c*this._margin);f+=r/2*g}f>1&&e.score.multiply(f*this.weight,"VALIDATOR",{validator:this.name,dimensions:{original:{width:l,height:c},element:{width:o.width,height:o.height}}})}collect(e){const n=e.getBoundingClientRect();return{width:n.width,height:n.height}}}class K9{constructor(e=1){this.name="attributes",this.weight=e}async validate(e,n){if(n?.attributes==null)return;const r=await e.element.getAttributes(),i=1.05;for(const o in n.attributes){const l=n.attributes[o];r?.[o]!=null&&(Array.isArray(l)&&l.includes(r[o])||!Array.isArray(l)&&r[o]===l)&&e.score.multiply(i*this.weight,"VALIDATOR",{validator:this.name,attribute:o,values:l})}}collect(e){return{attributes:Y9(e)}}}function Y9(t,e=["id","class"]){return Array.from(t.attributes).slice(0,7).reduce((n,r)=>e.indexOf(r.name.toLowerCase())>0||r.value.length>500?n:{...n,[r.name]:r.value},{})}const DN={nth:t=>new H9(t),position:t=>new q9(t),dimensions:t=>new W9(t),attributes:t=>new K9(t)};function Q9(t){return Array.isArray(t)?t.filter(({enabled:e,name:n})=>e&&DN[n]).map(({name:e,weight:n})=>DN[e](n)):[]}function X9(t,{nthTagIndex:e,tagName:n,targetPositionComparedToPivot:r}){switch(r){case"after":return J9(t,{nthTagIndex:e,tagName:n});default:throw Error("Unavailable targetPositionComparedToPivot")}}function J9(t,{tagName:e,nthTagIndex:n}){return`${t} ~ ${e.toLowerCase()}:nth-of-type(${n})`}function PN(t){return t.nodeType===Node.ELEMENT_NODE}async function MN(t){return await Promise.all(t.map(async e=>{try{return{status:"fulfilled",value:await e}}catch(n){return{status:"rejected",reason:n}}}))}async function I1(t,{signal:e,retryOnError:n=!1,shouldRetry:r=()=>!1}={}){let i=!1;e?.addEventListener("abort",()=>{i=!0});let o=null,l=0;for(;(o===null||r(o))&&!i;){try{o=await t()}catch(g){if(!n)throw g}(o===null||r(o))&&await f(c(l++))}return o;function c(g){return Math.min(1e3,g*100)}async function f(g){return new Promise(y=>setTimeout(y,g))}}let e7=(uc=class{constructor(e){this.contextEnabled=!1,this.contextBonus=.3,this.modifiers=[],this.validationEnabled=!0,this.validators=[],this.validationThreshold=uc.defaultOptions.validationThreshold,this.validationMode=uc.defaultOptions.validationMode,this.pathsType="regular",this.dynamicIframes=!1,this.trustSpecificity=!1,this.projectRigidity=uc.defaultOptions.projectRigidity,this.CrossResolver=L9;const n={...uc.defaultOptions,...e};n.pathsType!=null&&this.setPathsType(n.pathsType),this.setContextEnabled(n.contextEnabled),this.setContextBonus(n.contextBonus),this.setValidationEnabled(n.validationEnabled),this.setValidationMode(n.validationMode),n.validationThreshold!=null&&this.setValidationThreshold(n.validationThreshold),this.setProjectRigidity(n.projectRigidity),this.dynamicIframes=n.dynamicIframes,this.trustSpecificity=n.trustSpecificity,n.validators.forEach(r=>{this.addValidator(r)}),n.modifiers.forEach(r=>{this.addModifier(r)})}setProjectRigidity(e){this.projectRigidity=typeof e>"u"||e===null?uc.defaultOptions.projectRigidity:+e}setPathsType(e){this.pathsType=e}setContextEnabled(e){this.contextEnabled=e}setContextBonus(e){this.contextBonus=e}setValidationEnabled(e){this.validationEnabled=e}setValidationThreshold(e){e>=0&&e<=1&&(this.validationThreshold=e)}setValidationMode(e){e!==void 0&&(this.validationMode=e)}addValidator(e){this.validators.push(e)}addModifier(e){this.modifiers.push(e)}setCrossResolver(e){this.CrossResolver=e}getOptions(){return{pathsType:this.pathsType,contextEnabled:this.contextEnabled,contextBonus:this.contextBonus,dynamicIframes:this.dynamicIframes,trustSpecificity:this.trustSpecificity,validationEnabled:this.validationEnabled,validationThreshold:this.validationThreshold,validationMode:this.validationMode,validators:this.validators,modifiers:this.modifiers,projectRigidity:this.projectRigidity}}async find(e,n,r,i,o){let l=[n];this.dynamicIframes&&(l=this.getAllIframesSelectors(this.getIframesElement(document)),l.unshift([]));const c=l.map(async f=>this.search(e,f,r,i,o));return MN(c).then(f=>{const g=f.reduce((E,A)=>(A.status==="fulfilled"&&A.value.matches.length>0&&E.push(A.value),E),[]);if(g.length===0)return{match:null,iframes:[]};const{matches:y,iframes:h}=g[0],p=y.sort(C1);return{match:p.length>0?p[0]:null,iframes:h}})}async findAll(e,n=[],r,i,o,l=!1,c=null){let f=[n];this.dynamicIframes&&(f=this.getAllIframesSelectors(this.getIframesElement(document)),f.unshift([]));const g=f.map(async y=>this.search(e,y,r,i,o,null,l,c));return Promise.all(g).then(y=>y.filter(h=>h.matches.length>0)).then(y=>{if(y.length===0)return{matches:[],iframes:[]};const{matches:h,iframes:p}=y[0];return{matches:h.sort(C1),iframes:p}})}async awaitAll(e,n,r,i,o,l){const c={selectors:e,iframes:n,context:r,rigidity:i,validationData:o};return I1(async()=>{const f=await this.findAll(c.selectors,c.iframes,c.context,c.rigidity,c.validationData);return f.matches.length===0?null:f},{signal:l}).then(f=>{if(f!=null)return f;throw new Error("Unable to find element")}).catch(f=>{throw new Error(`Unable to find element: ${f instanceof Error?f.message:"Unknown error"}`)})}async awaitAllWithJSON(e,{validate:n,signal:r}={}){return new Promise((i,o)=>{let l=[];try{l=this.buildParametersFromJSON(e)}catch(I){o(I);return}const[c,f,g,y,h,p,E,A]=l,_={selectors:c,iframes:f,context:g,rigidity:y,validationData:h,pathElement:p,isPivot:E,pivotOptions:A};I1(async()=>{const I=await this.findAll(_.selectors,_.iframes??void 0,_.context??void 0,_.rigidity??void 0,_.validationData??void 0,E??void 0,A);return I.matches.length===0||!(n===void 0?!0:await n(I))?null:I},{signal:r,retryOnError:!0}).then(I=>{I!=null?i(I):i({matches:[],iframes:[]})}).catch(I=>{o(new Error(`Unable to find element: ${I instanceof Error?I.message:"Unknown error"}`))})})}async search(e,n,r,i,o,l,c=!1,f=null){return this.trustSpecificity&&e.sort((g,y)=>y.path.length-g.path.length),this.findTrail(n).then(async g=>new Promise((y,h)=>{const p=[];n!=null&&n.length>0&&g.length===0&&h(new Error("No matching iframe found."));const E=this.getDocumentRoot(g,l??void 0),[A,_]=E;if(_)this.CrossResolver(this,e,n?.slice(g.length)??[],r??void 0,i??void 0,o??void 0,g.length).then(I=>{y({matches:I.map(C=>(g.filter(zc).forEach(v=>{const T=v.getBoundingClientRect(),S=window.getComputedStyle(v);C.boxing.top+=T.top+(isNaN(parseInt(S.borderTopWidth))?0:parseInt(S.borderTopWidth))+(isNaN(parseInt(S.paddingTop))?0:parseInt(S.paddingTop)),C.boxing.bottom+=T.top,C.boxing.left+=T.left+(isNaN(parseInt(S.borderLeftWidth))?0:parseInt(S.borderLeftWidth))+(isNaN(parseInt(S.paddingLeft))?0:parseInt(S.paddingLeft)),C.boxing.right+=T.left}),new h0(new D0(C.resultId,C.crossId,C.boxing,C.DOM,g),C.score))),iframes:g})}).catch(h);else{const I=e.reduce((S,O)=>((O.path.match(/#[a-zA-Z0-9-_]+/g)?.map(V=>V.slice(1))??[]).every(V=>A?.querySelector(`#${V}`)!=null)&&S.push(O),S),[])??[],C=I.length>0?I:e;let v=0;const T=C.length;e:for(;v<T;){let S=C[v++];c&&f!=null&&(S=new ba(X9(S.path,f)));const O=ba.qualityOf(S,this.modifiers),$=this.findElements(S,A,g);let V=0;for(;V<$.length;){const B=$[V++],ne=p.findIndex(({element:D})=>D instanceof Hs&&B.element instanceof Hs&&D.dom===B.element.dom);if(ne>-1){if(p[ne].score.incrementWithScore(O,"MATCH",{matchScore:O}),this.trustSpecificity)break e}else c?(B.score.incrementWithScore(O,"MATCH",{matchScore:O}),p.push(B)):this.respectsRigidity(B,i??null)&&(B.score.incrementWithScore(O,"MATCH",{matchScore:O}),p.push(B))}}if(this.contextEnabled&&r!=null&&p.forEach(S=>{if(!(S.element instanceof Hs))throw new Error("Match element is not a DOMElement");const O=r.scoreFor(S.element.dom,this.findElements);S.score.multiplyWithScore(O,"CONTEXT",{contextScore:O})}),this.validationEnabled&&o!=null&&p.length>=2){this.applyValidators(p,o).then(S=>{y({matches:S,iframes:g})});return}y({matches:p,iframes:g})}}))}buildParametersFromJSON(e){const n=typeof e=="string"?JSON.parse(e):null;let r=[],i=null,o=null,l=null,c=null,f=null,g=!1,y=null;return r=n?.paths?.reduce((h,p)=>p?.active?[...h,new ba(p?.value??null)]:h,[])??[],n?.pathElement&&(i=new Ag(n?.pathElement?.elementType??"div",n?.pathElement?.id??"",n?.pathElement?.classList?n?.pathElement?.classList.filter(({active:h})=>h).map(({value:h})=>h):[],n?.pathElement?.attributesList??[],n?.pathElement?.texts?n?.pathElement?.texts.filter(({active:h})=>h).map(({value:h})=>h):[]),r=[...r,...i.toStringPaths().map(h=>new ba(h))],r=r.filter((h,p)=>p===r.findIndex(E=>E.path===h.path))),n?.iframes!=null&&(l=n.iframes.map(h=>h.reduce((p,E)=>E.active==null?p:[...p,new ba(E.value)],[]))),this.contextEnabled&&(o=new AN((n?.contextElements??[]).map(h=>{switch(h.proximity){case w1.DYNAMIC:return{selector:new ba(h.path),proximity:h.proximity,level:h.level};default:return{selector:new ba(h.path),proximity:h.proximity}}}),this.contextBonus)),c={rigidity:n?.rigidity==null||Number.isNaN(n.rigidity)?this.projectRigidity:typeof n.rigidity=="string"?parseInt(n.rigidity,10):n.rigidity,pathElement:i},this.validationEnabled&&n?.validationData!=null&&(f=n.validationData),Object.prototype.hasOwnProperty.call(n,"isPivot")&&n.isPivot===!0&&(g=!0,Object.prototype.hasOwnProperty.call(n,"pivotOptions")&&typeof n.pivotOptions=="object"&&(y=n.pivotOptions)),[r,l,o,c,f,i,g,y]}async findTrail(e=[],n=[]){return new Promise((r,i)=>{if(e==null||e.length===0){r(n);return}const o=n.length>0?n[n.length-1]:null,l=o!=null?FN(o):null;if(o!=null&&l==null){r(n);return}this.search(e[0],null,null,null,null,l).then(({matches:c})=>c.filter(f=>f.element instanceof Hs)).then(async c=>{if(c.length===0)throw new Error("Failed finding iframes (no matches).");const f=await kN(c);if(f==null)throw new Error("Failed finding iframes (no visible iframe).");const g=(f?.element).dom;n.push(g),this.findTrail(e.slice(1),n).then(r).catch(i)}).catch(c=>{Re.error(c),r([])})})}getDocumentRoot(e,n){let r=!1,i=n??document.body;const o=e.length>0?e[e.length-1]:null;try{const l=o!=null?FN(o):null;if(l==null&&zc(o))return[null,!0];if(l!=null&&(i=l),zc(o)&&o?.contentDocument?.readyState==="loading"){const c=t7(window.location.origin),f=n7(o.src)??c;c!==f&&(r=!0)}}catch(l){Re.debug(l,"Error while getting document root, setting isCross to true."),r=!0}return[i,r]}selectorIsXPath(e){return e.path.substring(0,2)==="//"}selectorContainsText(e){return e.path.includes(":contains")}findElements(e,n,r=[]){try{const i=this.selectorIsXPath(e);if((this.pathsType==="xpath"||i)&&"XPathResult"in window){const o=n instanceof Document?n:n?.ownerDocument??document,l=i?e.path:e.xPath,c=o?.evaluate(l,n??document,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null),f=[];for(let g=0;g<(c?.snapshotLength??0);g++){const y=c?.snapshotItem(g);y!=null&&PN(y)&&f.push(new h0(new Hs(y)))}return f}else{const o=n??document;return(this.selectorContainsText(e)?jd(e.path,o):Array.from(o.querySelectorAll(e.path))).reduce((c,f)=>(PN(f)&&c.push(new h0(new Hs(f,r))),c),[])}}catch(i){return Re.debug(i,"Error while finding elements, returning an empty array"),[]}}respectsRigidity(e,n){if(n?.rigidity==null)return!0;if(e instanceof h0){const g=e;return g.element instanceof Hs?this.respectsRigidity(g.element.dom,n):!0}const r=e,{rigidity:i,pathElement:o}=n,l=(o?.classList.length??0)+(o?.attributesList.length??0)+(o?.id!=null&&o?.id!==""?1:0)+(o?.texts!=null&&o?.texts.length>0?1:0);if(l<=0)return!0;const c=1/l;let f=0;if(o?.id!=null&&r.id===o?.id&&(f+=c),o?.texts!=null&&r instanceof HTMLElement&&r.innerText!=null){const g=r.innerText.toLowerCase();for(let y=0;y<(o?.texts.length??0);y++){const h=o?.texts[y].trim().toLowerCase();if(g.includes(h)){f+=c;break}}}return o?.classList.forEach(g=>{r.classList.contains(g)&&(f+=c)}),o?.attributesList.forEach(g=>{r.getAttribute(g)!=null&&(f+=c)}),f>=i}async applyValidators(e,n){const r=[];let i=e[0].score.value,o=e[0],l=0;do r.push(o),this.validationMode==="dynamic"&&(i=o.score.value),o=e[++l];while(o!=null&&i===o.score.value);return r.length<2?e:(await Promise.all(this.validators.map(async c=>await Promise.all(r.map(async f=>{await c.validate(f,n,this.validationThreshold)})))),e.sort(C1))}getIframesElement(e){const n=[],r=e.evaluate("//frame",e,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null),i=e.evaluate("//iframe",e,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null);for(let o=0;o<r.snapshotLength;o++){const l=r.snapshotItem(o);l?.nodeName.toLowerCase()==="frame"&&n.push(l)}for(let o=0;o<i.snapshotLength;o++){const l=i.snapshotItem(o);l?.nodeName.toLowerCase()==="iframe"&&n.push(l)}return n.reduce((o,l)=>((l instanceof HTMLIFrameElement||l instanceof HTMLFrameElement)&&o.push(l),o),[]).map(o=>{let l=null;try{l=o.contentDocument}catch(c){Re.error(c)}return{iframe:o,childFrames:l!=null?this.getIframesElement(l):[]}})}getAllIframesSelectors(e){const n=new Vd({}),r=[];return e.forEach(i=>{const o=n.selectorsFor(i.iframe);r.push([o]);const l=this.getAllIframesSelectors(i.childFrames);l.length>0&&l.forEach(c=>{r.push([o,...c])})}),r}},uc.defaultOptions={contextEnabled:!1,contextBonus:.3,validationEnabled:!0,validationThreshold:.1,validationMode:"regular",dynamicIframes:!1,trustSpecificity:!1,pathsType:"regular",validators:[],modifiers:[],projectRigidity:.65},uc);function C1(t,e){return t.score.value===e.score.value?0:t.score.value>e.score.value?-1:1}async function kN(t){let e=t[0];for(const n of t)n.score.value>e.score.value&&await n.element.safeIsRendered()&&(e=n);return e}const t7=t=>{const e=t.match(/^(?:https?:\/\/)?(?:[^@\n]+@)?(?:www\.)?([^:/\n?]+)/);return e!=null&&e.length>1?e[1]:null},n7=t=>{const e=t.match(/^(?:https?:\/\/)?(?:[^@\n]+@)?(?:www\.)?([^:/\n?]+)/);return t!=="about:blank"&&e!=null&&e.length>1?e[1]:null};function r7(t){return zc(t)?t.contentDocument?.body??null:null}function i7(t){return t?.shadowRoot??null}function FN(t){return r7(t)??i7(t)}class o7{constructor(e=[]){this.name="keywords",this._words=e}calc(e){const n=typeof e=="string"?e:e.path;return this._words.reduce((r,i)=>n.includes(i)?r+.2:r,0)}}const $N={keywords:t=>{let e=[];try{e=t.options.words??[]}catch(n){Re.debug(n,"This should never happen")}return new o7(e)}};function s7(t){return Array.isArray(t)?t.filter(({enabled:e,name:n})=>e&&$N[n]).map(e=>$N[e.name](e)):[]}const a7={strategy:"regular",useTexts:!0,enableCrossDomain:!0,pathExtensions:[],eventsToBlock:[],cssClassesBlacklist:[],useCssClassesInPath:!0,useIdSelector:!0,projectRigidity:.65,modifiers:[],postMessagesAdditionalProperties:[],iframesSettings:{},dynamicIframes:!1,trustSpecificity:!1,validation:{enabled:!0,threshold:.1,mode:"regular",validators:[{name:"nth",enabled:!0,weight:1,options:{}},{name:"dimensions",enabled:!0,weight:1,options:{}},{name:"position",enabled:!0,weight:1,options:{}},{name:"attributes",enabled:!0,weight:1,options:{}}]},context:{enabled:!1,levels:3,bonus:.3}},UN=A1.parse(a7);function l7(t){const e=A1;try{return e.parse(JSON.parse(t))}catch(n){return Re.debug(n,"Error while parsing finder configuration"),null}}function u7(t=[]){const e=z9(t);return{pathsType:e.strategy,contextEnabled:e.context?.enabled,dynamicIframes:e.dynamicIframes,trustSpecificity:e.trustSpecificity,validationEnabled:e.validation?.enabled,validationThreshold:e.validation?.threshold,validationMode:e.validation?.mode,validators:e.validation?.enabled===!0?Q9(e.validation?.validators):[],modifiers:s7(e.modifiers),projectRigidity:e.projectRigidity}}function c7(t=[UN]){return new e7(u7(t))}function Hh(t){let e="";return t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement?e=t.value:t instanceof HTMLSelectElement?e=t.selectedOptions?.[0]?.text??"":t instanceof HTMLElement&&(e=t.innerText??""),e.trim().split(`
`)[0].slice(0,255)}const f7=[/data-dashlane.*/,"async","charset","checked","disabled","style"];class Gh{constructor(e){this.element=e}get tagName(){return this.element.tagName.toLowerCase()}get isShadowRoot(){return this.element.shadowRoot!=null}get text(){return Hh(this.element)}get parent(){if(this.element.parentElement!=null&&this.element.parentElement.tagName!=="BODY")return new Gh(this.element.parentElement);const e=this.element.getRootNode();return e.nodeType===Node.DOCUMENT_FRAGMENT_NODE?new Gh(e.host):null}get position(){const e=Array.from(this.element.parentElement?.children??[]).indexOf(this.element);return e>=0?e:null}get siblings(){return Array.from(this.element.parentElement?.children??[]).filter(e=>["script","style","link","lemon"].some(n=>e.tagName.toLowerCase().startsWith(n))?!1:e!==this.element).map(e=>new Gh(e))}get attributes(){return this.element.attributes.length>0?Array.from(this.element.attributes).filter(({name:n,value:r})=>e(n)?!1:r.length>0).reduce((n,r)=>[...n,{name:r.name,value:r.value,comparison:"equal",modifiedValue:null,ignored:!1}],[]):[];function e(n){return f7.some(r=>typeof r=="string"?r===n:r.test(n))}}async json(e){return{tagName:this.tagName,attributes:this.attributes,text:this.text,...e!=null?{children:e}:{},position:this.position,manualCssPaths:[],siblings:this.siblings.map(n=>({tagName:n.tagName,attributes:n.attributes,text:n.text}))}}static async toJSON(e,n){let r=e,i=await r.json(n);for(;r.parent!=null;){const o=r;r=r.parent,i={...await r.json(),shadowRoot:r.isShadowRoot&&o.element.assignedSlot==null,children:i}}return i}}const d7=At.object({name:At.string(),value:At.string(),comparison:At.enum(["equal","contains"]),modifiedValue:At.string().nullable().default(null),ignored:At.boolean().default(!1)}),BN=At.object({tagName:At.string(),attributes:At.array(d7),text:At.string()}),ZN=BN.extend({manualTexts:At.array(At.string()).optional(),manualCssPaths:At.array(At.string()).default([]),position:At.union([At.number(),At.null()]),siblings:At.array(BN),shadowRoot:At.boolean().optional()}).extend({children:At.lazy(()=>ZN.optional())});function jN(t){const e=[];let n=t;for(;n;)n.text?.trim()&&e.push(n.text.trim()),n.manualTexts&&n.manualTexts.forEach(r=>{r?.trim()&&e.push(r.trim())}),n.siblings.forEach(r=>{r.text?.trim()&&e.push(r.text.trim())}),n=n.children;return e}class h7{constructor(e){this.strategies=e}async findWithinSpecificDOM(e,n){const r=[];for(const i of this.strategies){const o=await i.findWithinSpecificDOM(e,n);if(r.push(...o.debugInformation),o.element!==null)return{element:o.element,debugInformation:r}}return{element:null,debugInformation:r}}}const p7=["id","data-testid","data-cy","data-test","href","src","role",/data-.*/,"name","placeholder","title","alt","class"];function VN(t){return t==null?p7:t.length===0?[]:t.map(e=>{if(/[.*+?^${}()|[\]\\]/.test(e))try{return new RegExp(e)}catch{return e}return e})}function zN(t,e){return e.findIndex(n=>typeof n=="string"&&n===t||n instanceof RegExp&&n.test(t))}function HN(t){return(e,n)=>{const r=zN(e.name,t),i=zN(n.name,t);return r===i?0:r===-1?1:i===-1?-1:r-i}}function GN(t){if(!t?.trim())return null;try{const e=new URL(t),r=e.hostname.split("."),i=r.length>=2?r.slice(-2).join("."):"",o=r.length>2?r.slice(0,-2).join("."):"",l=e.pathname.split("/").filter(f=>f.length>0),c=new Map;return e.searchParams.forEach((f,g)=>{c.set(g,f)}),{domain:i,subdomain:o,pathSegments:l,searchParams:c}}catch{return null}}function qN(t,e){const n=GN(t),r=GN(e);if(!n||!r)return 0;const i=g7(n.searchParams,r.searchParams),o=m7(n.pathSegments,r.pathSegments),l=y7(n.domain,r.domain),c=v7(n.subdomain,r.subdomain),f={searchParams:.4,path:.3,domain:.2,subdomain:.1};return i*f.searchParams+o*f.path+l*f.domain+c*f.subdomain}function g7(t,e){if(t.size===0&&e.size===0)return 1;if(t.size===0||e.size===0)return 0;let n=0;return t.forEach((r,i)=>{e.get(i)===r&&n++}),n/t.size}function m7(t,e){if(t.length===0&&e.length===0)return 1;if(t.length===0||e.length===0)return 0;let n=0;const r=Math.min(t.length,e.length);for(let i=0;i<r;i++)t[i]===e[i]&&n++;return n/t.length}function y7(t,e){return!t&&!e?1:!t||!e?0:t===e?1:0}function v7(t,e){return!t&&!e?1:!t||!e?0:t===e?1:0}function WN(t){return t==="src"||t==="href"}class V0{constructor(e,n){this.debugInformation=n,this.name=e}getWinners(e){const n=e.map(r=>({element:r,score:this.computeScore(r)})).sort(this.compareScore.bind(this)).filter((r,i,o)=>r.score===o[0].score);return this.debugInformation.push(`Score Strategy: ${this.name} | Winners: ${n.map(r=>`${r.element.tagName.toLowerCase()}#${r.element.id}.${Array.from(r.element.classList).join(".")} (score: ${r.score.toFixed(3)})`).join(", ")}`),n.map(r=>r.element)}}function KN(t,e){return e.score-t.score}function YN(t,e){return t.score-e.score}function _7(t){let e=t;for(;e.children!=null;)e=e.children;return e}class QN extends V0{constructor(e,n){super("URL similarity matching",n),this.json=e,this.debugInformation=n}computeScore(e){const r=_7(this.json).attributes.find(c=>WN(c.name));if(!r)return 0;const i=e.getAttribute(r.name);if(!i)return 0;const o=r.modifiedValue??r.value;if(r.comparison==="contains")return i.includes(o)?1:0;const l=qN(o,i);return this.debugInformation.push(`URL similarity score for ${i}: ${l}`),l}compareScore(e,n){return KN(e,n)}}function z0(t,e){return rc(t).attributes.filter(n=>!n.ignored).filter(n=>!b7(n.name,e)).map(n=>({name:n.name,value:n.modifiedValue??n.value,comparison:n.comparison}))}function b7(t,e){for(const n of e)if(n.includes("*")){if(new RegExp(n.replace("*",".*")).test(t))return!0}else if(n===t)return!0;return!1}function rc(t){let e=t;for(;e.children!=null;)e=e.children;return e}function H0(t){return t.comparison==="contains"?`[${t.name}*='${t.value.replace(/'/g,"\\'")}']`:t.name==="class"?`.${t.value.replace(/\./g,"\\.")}`:`[${t.name}='${t.value.replace(/'/g,"\\'")}']`}class XN extends V0{constructor(e,n,r){super("the number of matching attributes",r),this.json=e,this.blacklist=n}computeScore(e){return z0(this.json,this.blacklist).reduce((i,o)=>i+r(o),0);function r(i){if(i.name==="class"){const l=i.value.split(/\s+/);return Array.from(e.classList).reduce((c,f)=>i.comparison==="contains"&&l.some(g=>g.includes(f))||l.some(g=>g===f)?c+1:c,0)}const o=e.getAttribute(i.name);return o==null?0:i.comparison==="contains"&&o.includes(i.value)||o===i.value?1:0}}compareScore(e,n){return KN(e,n)}}class JN extends V0{constructor(e,n){super("the position of the element in its parent",n),this.json=e}computeScore(e){return Math.abs(rc(this.json).position-Array.from(e.parentElement?.children??[]).indexOf(e))}compareScore(e,n){return YN(e,n)}}class eO extends V0{constructor(e,n){super("the depth of the element in the DOM",n),this.json=e}computeScore(e){return Math.abs(r(this.json)-n(e));function n(i){let o=0,l=i;for(;l.parentElement!==document.body&&l.parentElement!==null;)o++,l=l.parentElement;return o}function r(i){let o=i,l=0;for(;o.children!=null;)o=o.children,l++;return l}}compareScore(e,n){return YN(e,n)}}const tO=At.object({attributes_blacklist:At.array(At.string()).default([]),attributes_ordering:At.array(At.string()).optional()}).default({attributes_blacklist:[]}),E7=At.object({settings:tO.optional(),ignoreInvisibleResults:At.boolean().default(!1)}).default({});class Wy{constructor(e){const n=E7.parse(e);this.attributesBlacklist=n.settings?.attributes_blacklist??[],this.attributesOrdering=VN(n.settings?.attributes_ordering),this.ignoreInvisibleResults=n.ignoreInvisibleResults}findWithinSpecificDOM(e,n){let r=null;const i=["Strategy Beta"],o=z0(e,this.attributesBlacklist);if(o.length===0)return i.push("There is no attributes to try, either because there is no attribute or because all attributes are ignored, returning null"),{element:null,debugInformation:i};const l=o.map(c=>c.name==="class"?c.value.split(/\s+/).map(f=>({comparison:c.comparison,name:"class",value:f})).filter(f=>f.value.trim()!==""):c).flat().sort(HN(this.attributesOrdering));do{const c=l.shift();if(c==null)break;i.push(`Trying selector: "${H0(c)}"`);let f=jd(H0(c),n);if(i.push(`Found ${f.length} elements with that selector`),this.ignoreInvisibleResults){const g=f.length;f=f.filter(h=>$f(h));const y=f.length;i.push(`Filtered out ${g-y} invisible elements, ${y} remaining.`)}if(f.length===1){i.push("Found 1 element, returning it"),r=f[0];break}f.length>1&&(i.push(`Found ${f.length} elements, trying to elect a winner`),r=this.selectBestElement(f,e,i))}while(r==null&&l.length>0);return{element:r,debugInformation:i}}selectBestElement(e,n,r){const i=e.filter(c=>c.tagName.toLocaleLowerCase()===rc(n).tagName);if(r.push(`Found ${i.length} elements with the right tag name`),i.length===1)return i[0];let o=i;const l=[new QN(n,r),new XN(n,this.attributesBlacklist,r),new eO(n,r)];for(rc(n).position!==null&&l.push(new JN(n,r));o.length>1&&l.length>0;){const c=l.shift();r.push(`Trying to elect the best element using ${c.name}`),o=c.getWinners(o)}return o.length===1?(r.push("Found the best element, returning it"),o[0]):(r.push(`There are still ${o.length} elements after trying to find the best one, returning null`),null)}}var R1={},nO;function w7(){return nO||(nO=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.stringSimilarity=void 0;var e=function(n,r,i,o){if(i===void 0&&(i=2),o===void 0&&(o=!1),o||(n=n.toLowerCase(),r=r.toLowerCase()),n.length<i||r.length<i)return 0;for(var l=new Map,c=0;c<n.length-(i-1);c++){var f=n.substr(c,i);l.set(f,l.has(f)?l.get(f)+1:1)}for(var g=0,y=0;y<r.length-(i-1);y++){var h=r.substr(y,i),p=l.has(h)?l.get(h):0;p>0&&(l.set(h,p-1),g++)}return g*2/(n.length+r.length-(i-1)*2)};t.stringSimilarity=e,t.default=t.stringSimilarity})(R1)),R1}var T7=w7();const x1=[],rO=[];function S7(t,e){if(t===e)return 0;const n=t;t.length>e.length&&(t=e,e=n);let r=t.length,i=e.length;for(;r>0&&t.charCodeAt(~-r)===e.charCodeAt(~-i);)r--,i--;let o=0;for(;o<r&&t.charCodeAt(o)===e.charCodeAt(o);)o++;if(r-=o,i-=o,r===0)return i;let l,c,f,g,y=0,h=0;for(;y<r;)rO[y]=t.charCodeAt(o+y),x1[y]=++y;for(;h<i;)for(l=e.charCodeAt(o+h),f=h++,c=h,y=0;y<r;y++)g=l===rO[y]?f:f+1,f=x1[y],c=x1[y]=f>c?g>c?c+1:g:g>f?f+1:g;return c}const Cg=t=>t.toLowerCase().trim().replace(/\s+/g," ");function A7(t,e,n){const r=Math.abs(t.length-e.length);return t.length===e.length?{insertions:0,deletions:0,substitutions:n}:t.length<e.length?{insertions:r,deletions:0,substitutions:n-r}:{insertions:0,deletions:r,substitutions:n-r}}function I7(t,e){const n=Cg(t),r=Cg(e);if(n===r)return 1;const i=S7(n,r),o=Math.max(n.length,r.length),l=1-i/o,c=T7.stringSimilarity(n,r),g=o<=10?.7:.4,y=1-g;let h=l*g+c*y;const p=n.split(" ").filter(I=>I.length>2),E=r.split(" ").filter(I=>I.length>2),A=p.length===1&&E.length===1,_=o<8;if(A&&_&&h<.75&&h>.3){const I=A7(n,r,i),C=I.insertions+I.deletions+I.substitutions,v=n.length===r.length;C===1&&!v||v&&C===2||(h*=.7)}return h}function C7(t,e){const n=t.split(/\s+/).filter(f=>f.length>0),r=e.split(/\s+/).filter(f=>f.length>0),i=Math.abs(n.length-r.length),o=Math.abs(t.length-e.length),l=Math.max(t.length,e.length);if(i===0&&o===0)return 1;let c=1;if(i>=2){const f=Math.max(n.length,r.length),g=i/f;c*=Math.max(.85,1-g*.15)}if(i===1&&o>=6){const f=o/l;c*=Math.max(.1,1-f*.9)}return c}function R7(t,e){const n=Cg(t),r=Cg(e);if(n===r)return 1;if(n.includes(r)||r.includes(n)){const E=n.length<r.length?n:r,A=n.length>=r.length?n:r;return E.length/A.length*.9}const i=n.split(" ").filter(E=>E.length>2),o=r.split(" ").filter(E=>E.length>2);if(i.length===0||o.length===0)return iO(n,r);const l=i.filter(E=>o.includes(E)).length,c=Math.max(i.length,o.length),f=l/c,g=iO(n,r),y=i.length===1&&o.length===1,p=Math.max(n.length,r.length)<8;return y&&p&&l===0&&g<.75?g*.7:Math.max(f*.7+g*.3,g)}function iO(t,e){const n=Math.max(t.length,e.length);return n===0?1:1-x7(t,e)/n}function x7(t,e){const n=Array(e.length+1).fill(null).map(()=>Array(t.length+1).fill(null));for(let r=0;r<=t.length;r++)n[0][r]=r;for(let r=0;r<=e.length;r++)n[r][0]=r;for(let r=1;r<=e.length;r++)for(let i=1;i<=t.length;i++){const o=t[i-1]===e[r-1]?0:1;n[r][i]=Math.min(n[r][i-1]+1,n[r-1][i]+1,n[r-1][i-1]+o)}return n[e.length][t.length]}function oO(t,e){let n=t.parentElement;for(;n;){if(n===e)return!0;n=n.parentElement}return!1}function sO(t){let e=0,n=t;for(;n.parentElement;)e++,n=n.parentElement;return e}function N7(t){const e=new Map;t.forEach(r=>{const i=Hh(r).trim();if(!i)return;const o=e.get(i);if(!o)e.set(i,r);else{const l=oO(r,o),c=oO(o,r);if(l)e.set(i,r);else if(!c){const f=sO(r),g=sO(o);f>g&&e.set(i,r)}}});const n={textToElement:e,originalCount:t.length,deduplicatedCount:e.size};return Re.trace(`Deduplicated ${n.originalCount} elements to ${n.deduplicatedCount} unique texts`),n}function aO(t,e){const n=N7(t);return e&&e.push(`Deduplicated candidates: ${n.originalCount} elements -> ${n.deduplicatedCount} unique texts`),Array.from(n.textToElement.values())}const lO=50,uO=0;function O7(t){if(typeof t!="object"||t===null)return!1;const e=t;return e.type==="BRIDGE_AI_REQUEST"&&e.payload!=null}function L7(t){if(typeof t!="object"||t===null)return!1;const e=t;return typeof e.targetText=="string"&&Array.isArray(e.candidates)&&typeof e.threshold=="number"}let N1=null,G0=null,cO=!1;function D7(t,e){if(cO){Re.warn("AIServiceHandler already initialized, skipping");return}if(window.parent!==window){Re.trace("AIServiceHandler: Not in top frame, skipping initialization");return}N1=t,G0=e,P7(),cO=!0,Re.trace("AIServiceHandler: Initialized and listening for AI requests",{toolIDs:e.toolIDs.length,useNativeBrowserAPI:e.useNativeBrowserAPI})}function P7(){rs.addMessageListener(async(t,e)=>{if(!O7(t))return;if(!e){Re.error("AIServiceHandler: No reply port provided in AI request");return}await M7(t,r=>{e.postMessage(r)})})}async function M7(t,e){const n=t.payload;Re.trace("AIServiceHandler: Processing AI request",{operation:n.operation});try{let r=null;switch(n.operation){case"findBestTextMatch":if(!L7(n.params))throw new Error("Invalid params for findBestTextMatch operation");r=await fO(n.params);break;default:throw new Error(`Unknown AI operation: ${n.operation}`)}e({result:r}),Re.trace("AIServiceHandler: Response sent successfully")}catch(r){const i=r instanceof Error?r.message:"Unknown error";e({result:null,error:i}),Re.error("AIServiceHandler: Error processing request",r)}}async function fO(t){if(!N1)throw new Error("AIServiceHandler not initialized with service class");if(!G0)throw new Error("AIServiceHandler not initialized with config");const{targetText:e,candidates:n,threshold:r,contextTexts:i}=t;Re.trace("AIServiceHandler: Finding best text match",{targetText:e.substring(uO,lO),candidatesCount:n.length,threshold:r,contextTextsCount:i?.length??0,useNativeBrowserAPI:G0.useNativeBrowserAPI});const o=N1,c=await new o(G0).findBestTextMatch(e,n,r,i);return c?Re.trace("AIServiceHandler: Match found",{text:c.text.substring(uO,lO),score:c.score}):Re.trace("AIServiceHandler: No match found"),c}async function k7(t,e,n=5e3){return new Promise((r,i)=>{const o=rs.createChannel(),l=o.getPort1();l.start();let c=!1;const f=setTimeout(()=>{c||(c=!0,l.close(),i(new Error(`AI request timeout after ${n}ms`)))},n);l.addMessageListener(async h=>{if(!c){c=!0,clearTimeout(f),l.close();const p=h;p.error?i(new Error(p.error)):r(p.result)}});const g={type:Zd.AI_REQUEST,payload:{operation:t,params:e}},y=window.parent===window;Re.trace(`Sending AI request: ${t} from ${y?"TOP FRAME":"IFRAME"}`,e),rs.sendToCurrentFrame(g,o.getPort2())})}async function F7(t,e,n,r){const i={targetText:t,candidates:e,threshold:n,contextTexts:r};return window.parent===window?(Re.trace("Calling AI handler directly (same-frame)",i),fO(i)):k7("findBestTextMatch",i)}function O1(t,e,n){const r={attempt:"",result:"","no-match":""},i={attempt:`Attempting AI text matching in ${e} strategy with:`,result:`AI matching result in ${e}:`,"no-match":`No match found in ${e}:`};Re.trace(`${r[t]} ${i[t]}`,n)}async function dO(t,e,n,r="AI",i){const o=[],l=new Map;for(let c=0;c<t.length;c++){const f=t[c],g=Hh(f);g&&g.trim()!==""&&(o.push(g.trim()),l.set(o.length-1,f))}if(o.length===0)return n.push("No text content found in candidate elements for AI matching"),null;try{O1("attempt",r,{targetText:e,candidatesCount:o.length});const c=await F7(e,o,.3,i);if(O1("result",r,c),c==null)return n.push("AI matching returned null result"),null;let f=null;for(let g=0;g<o.length;g++)if(o[g]===c.text){f=l.get(g)??null;break}return f==null?(n.push("AI matched text but element not found"),O1("no-match",r,{targetText:e,message:`No element found for matched text "${c.text}"`}),null):(n.push(`AI Match found - Text: "${c.text}", Score: ${c.score.toFixed(4)}`),f)}catch(c){return c instanceof Error&&n.push(`AI matching failed: ${c.message}`),null}}const L1={weights:{text:.7,position:.3,refinements:{tag:.4,attributes:.3,siblings:.2,parent:.1}},thresholds:{minimum:.3,default:.5,highPosition:.8}},$7=At.object({weights:At.object({text:At.number().min(0).max(1),position:At.number().min(0).max(1),refinements:At.object({tag:At.number().min(0).max(1),attributes:At.number().min(0).max(1),siblings:At.number().min(0).max(1),parent:At.number().min(0).max(1)})}),thresholds:At.object({minimum:At.number().min(0).max(1),default:At.number().min(0).max(1),highPosition:At.number().min(0).max(1)})}),U7=At.object({settings:$7.optional(),ignoreInvisibleResults:At.boolean().default(!1),isAiServiceAvailable:At.boolean().default(!1),betaSettings:tO.optional()}).default({settings:L1,ignoreInvisibleResults:!1,isAiServiceAvailable:!1});class hO{constructor(e){const n=U7.parse(e);this.weights=n.settings?.weights??L1.weights,this.thresholds=n.settings?.thresholds??L1.thresholds,this.ignoreInvisibleResults=n.ignoreInvisibleResults,this.shouldUseAiTextMatching=n.isAiServiceAvailable,this.betaSettings=n.betaSettings}async findWithinSpecificDOM(e,n=document){const r=["Strategy Gamma",`Weights: text=${this.weights.text}, position=${this.weights.position}`,`Refinements: tag=${this.weights.refinements.tag}, attributes=${this.weights.refinements.attributes}, siblings=${this.weights.refinements.siblings}, parent=${this.weights.refinements.parent}`,`Thresholds: minimum=${this.thresholds.minimum}, default=${this.thresholds.default}, highPosition=${this.thresholds.highPosition}`];Re.trace("Strategy Gamma - Configuration",{weights:this.weights,thresholds:this.thresholds});const i=this.getDeepestElement(e);if(i.manualTexts!=null&&i.manualTexts.length<=0||i.manualTexts==null&&i.text.length<=0)return r.push("No text content available, falling back to Beta strategy"),new Wy({settings:this.betaSettings}).findWithinSpecificDOM(e,n);const o=this.buildPositionPath(e),l=i.manualTexts?.join(", ")??i.text;r.push(`Target text: ${l}`,`Position path: ${JSON.stringify(o)}`),Re.trace("Strategy Gamma - Target",{targetText:l,positionPath:o});const c=await this.findMatches(n,i,o,r,e);let f=c;return this.ignoreInvisibleResults&&(f=c.filter(g=>$f(g.element)),r.push(`ignoreInvisibleResults is enabled, filtering out ${c.length-f.length} invisible matches`)),{element:f[0]?.element??null,debugInformation:r}}async findMatches(e,n,r,i,o){if(n.manualTexts!=null){const l=n.manualTexts.map(async g=>this.findMatchesForText(e,n,g,r,i,o));return(await Promise.all(l)).flat().sort((g,y)=>y.similarity-g.similarity)}return this.findMatchesForText(e,n,n.text,r,i,o)}async findMatchesForText(e,n,r,i,o,l){const f=Array.from(e.querySelectorAll("*")).map(async h=>{const p=new Gh(h);if(!p.text)return null;const E=I7(p.text,r);if(E<this.thresholds.minimum)return null;const A=this.getPositionMatch(p,i),_=this.calculatePrimaryScore(E,A);if(_<this.getThreshold(A))return null;const I=this.calculateRefinementScore(p,n),C=_*.8+I*.2,v=C7(Cg(p.text),Cg(r)),T=C*v,S=this.getThreshold(A);return T<S?null:(o.push(`Match found - Text: ${p.text}, Text Similarity: ${E.toFixed(4)}, Position: ${A.toFixed(4)}, Primary Score: ${_.toFixed(4)}, Refinement Score: ${I.toFixed(4)}, Word Penalty: ${v.toFixed(4)}, Threshold: ${S.toFixed(4)}, Final Score: ${T.toFixed(4)}`),Re.trace("Strategy Gamma - Match found",{text:p.text,textScore:E,positionScore:A,primaryScore:_,refinementScore:I,wordCountPenalty:v,threshold:S,finalScore:T}),{element:h,similarity:T})}),y=(await MN(f)).filter(h=>h.status==="fulfilled").map(h=>h.value).filter(h=>h!==null).sort((h,p)=>p.similarity-h.similarity);return y.length>0?y:this.shouldUseAiTextMatching?(o.push("No traditional matches found, trying AI semantic matching"),this.findMatchesWithAI(e,n,r,i,o,l)):(o.push("AI text matching not available"),[])}async findMatchesWithAI(e,n,r,i,o,l){const c=Array.from(e.querySelectorAll("*")).filter(g=>g.tagName.toUpperCase()!=="SCRIPT"&&g.tagName.toUpperCase()!=="STYLE").filter(g=>new Gh(g).text.trim());if(c.length===0)return o.push("No text content found for AI matching"),[];const f=aO(c,o);if(f.length===0)return o.push("No text content found in candidate elements for AI matching"),[];try{const g=jN(l);o.push(`Context texts collected: ${g.length} texts`);const y=await dO(f,r,o,"Gamma",g);if(!y)return[];const h=new Gh(y),p=this.getPositionMatch(h,i),E=this.calculatePrimaryScore(.8,p),A=this.calculateFinalScore(E,h,n);return o.push(`Position: ${p.toFixed(4)}, Final Score: ${A.toFixed(4)}`),[{element:y,similarity:A}]}catch(g){return g instanceof Error&&o.push(`AI matching failed: ${g.message}`),[]}}calculatePrimaryScore(e,n){return e*this.weights.text+n*this.weights.position}getThreshold(e){return e>this.thresholds.highPosition?this.thresholds.minimum:this.thresholds.default}calculateRefinementScore(e,n){return this.matchTag(e,n)*this.weights.refinements.tag+this.matchAttributes(e,n)*this.weights.refinements.attributes+this.matchSiblings(e,n)*this.weights.refinements.siblings+this.matchParent(e,n)*this.weights.refinements.parent}calculateFinalScore(e,n,r){const i=this.calculateRefinementScore(n,r);return e*.8+i*.2}matchTag(e,n){return n.tagName&&e.tagName===n.tagName.toLowerCase()?1:0}matchAttributes(e,n){if(!n.attributes.length)return 1;const r=n.attributes.filter(l=>!l.ignored).map(l=>({comparison:l.comparison,name:l.name,value:l.modifiedValue??l.value}));let i=0,o=0;return r.forEach(l=>{o++;const c=e.attributes.find(f=>f.name===l.name);if(c){if(WN(l.name)){if(l.comparison==="contains"){c.value.includes(l.value)&&(i+=1);return}const f=qN(l.value,c.value);i+=f;return}if(l.comparison==="contains"){c.value.includes(l.value)&&(i+=1);return}c.value===l.value&&(i+=1)}}),o>0?i/o:1}matchSiblings(e,n){return n.siblings.length?n.siblings.filter(i=>e.siblings.some(o=>o.tagName===i.tagName&&(!i.text||o.text===i.text))).length/n.siblings.length:1}matchParent(e,n){return!n.tagName||n.tagName==="body"||e.parent?.tagName===n.tagName.toLowerCase()?1:0}getPositionMatch(e,n){const r=this.buildElementPath(e);let i=0;const o=Math.max(n.length,r.length);for(let l=1;l<=Math.min(n.length,r.length);l++){const c=n[n.length-l],f=r[r.length-l];if(c.tagName===f.tagName){const g=Math.abs(c.position-f.position);i+=g===0?1:1/(g+1)}}return i/o}buildElementPath(e){const n=[];let r=e.element;for(;r.parentElement;){const i=Array.from(r.parentElement.children);n.unshift({position:i.indexOf(r),tagName:r.tagName.toLowerCase()}),r=r.parentElement}return n}buildPositionPath(e){const n=[];let r=e;for(;r;)r.position!==null&&r.tagName&&n.push({position:r.position,tagName:r.tagName.toLowerCase()}),r=r.children??null;return n}getDeepestElement(e){let n=e;for(;n.children;)n=n.children;return n}}function B7(t){const e=t.attributes.find(n=>n.name==="id")?.value;return e!=null?CSS.escape(e):null}function Z7(t){const e=t.attributes.find(n=>n.name==="class")?.value??null;return e!=null?e.split(" ").filter(n=>n.trim().length>0).map(CSS.escape):null}function j7(t){return t.attributes.reduce((e,n)=>(["id","class"].includes(n.name)||e.push(`[${n.name}='${n.value.replace(/'/g,"\\'")}']`),e),[])}var Rg=(t=>(t.ID="id",t.CLASS="class",t.ATTRIBUTE="attribute",t.TEXT="text",t.POSITION="position",t))(Rg||{});function q0(t,e=["id","class","attribute","text","position"]){const n=[t.tagName];if(t.position!=null&&e.includes("position")&&n.push(`:nth-child(${t.position+1})`),e.includes("id")){const r=B7(t);r!=null&&n.push(`#${r}`)}if(e.includes("class")){const r=Z7(t);r!=null&&r.length>0&&n.push(`.${r.join(".")}`)}if(e.includes("attribute")){const r=j7(t);n.push(...r)}return t.text.length>0&&e.includes("text")&&n.push(`:contains(${t.text.split(`
`)[0].slice(0,128)})`),t.children!=null&&(n.push(" > "),n.push(q0(t.children,e))),n.join("")}class pO{findWithinSpecificDOM(e,n){const r=["Strategy Alpha"],i=q0(e);r.push(i);let o=jd(i,n);if(o.length===0){const l=q0(e,[Rg.POSITION,Rg.ATTRIBUTE,Rg.TEXT]);r.push(l),o=jd(l,n)}if(o.length===0){const l=q0(e,[Rg.POSITION,Rg.TEXT]);r.push(l),o=jd(l,n)}return{element:o[0]??null,debugInformation:r}}}class V7{findWithinSpecificDOM(e,n){let r=e;for(;r.children!=null;)r=r.children;let i=null;const o=["Manual CSS paths strategy"];if(r.manualCssPaths.length===0)return o.push("No manual CSS paths defined, returning null"),{element:i,debugInformation:o};const l=[...r.manualCssPaths];for(;i==null&&l.length>0;){const c=l.shift();if(c==null){Re.warn("Trying to find element with Manual CSS paths strategy, the list of paths contains a null element");break}o.push(c);const f=jd(c,n);if(f.length===0){o.push(l.length===0?"No elements found, returning null":"No elements found, trying next css path");continue}if(f.length===1){i=f[0];break}if(f.length>1){o.push(l.length===0?"Multiple elements found, returning null":"Multiple elements found, trying next css path");continue}}return{element:i,debugInformation:o}}}const z7=At.object({attributes_blacklist:At.array(At.string()).default([]),attributes_ordering:At.array(At.string()).optional()}).default({attributes_blacklist:[]}),H7=At.object({settings:z7.optional(),ignoreInvisibleResults:At.boolean().default(!1),isAiServiceAvailable:At.boolean().default(!1)}).default({});class G7{constructor(e){const n=H7.parse(e);this.attributesBlacklist=n.settings?.attributes_blacklist??[],this.shouldUseAiTextMatching=n.isAiServiceAvailable,this.attributesOrdering=VN(n.settings?.attributes_ordering),this.ignoreInvisibleResults=n.ignoreInvisibleResults}async findWithinSpecificDOM(e,n){let r=null;const i=["Strategy Delta"],o=z0(e,this.attributesBlacklist);if(o.length===0){if(i.push("There is no attributes to try, either because there is no attribute or because all attributes are ignored"),i.push("Trying to find the target element with the tag name"),r=this.findTargetWithTagName(n??document,e),r===null)return i.push("No element found, returning null"),{element:null,debugInformation:i};const c=rc(e).text?.trim();if(c&&c.length>0){const f=Hh(r).trim();if(f!==c)return i.push(`Tag name fallback found element but text mismatch: found "${f}", expected "${c}"`),{element:null,debugInformation:i}}return i.push("Found one target element with the tag name, returning it"),{element:r,debugInformation:i}}const l=o.map(c=>c.name==="class"?c.value.split(/\s+/).map(f=>({comparison:c.comparison,name:"class",value:f})).filter(f=>f.value.trim()!==""):c).flat().sort(HN(this.attributesOrdering));for(let c=0;c<l.length&&r==null;c++){const f=l[c],g=H0(f);i.push(`Trying selector: ${g}`);let y=jd(g,n);if(i.push(`Found ${y.length} elements with that selector`),this.ignoreInvisibleResults){const h=y.length;y=y.filter(E=>$f(E));const p=y.length;i.push(`Filtered out ${h-p} invisible elements, ${p} remaining.`)}if(y.length===1){const h=y[0];if(this.validateElementMatch(h,e,i)){i.push("Found exactly 1 element, validation passed"),r=h;break}else i.push("Found 1 element but validation failed, continuing search")}if(y.length>1&&(i.push(`Found ${y.length} elements with single attribute, trying to select best element`),r=await this.selectBestElement(y,e,i),r!==null))break}if(r==null&&l.length>1){i.push("Single attributes failed, trying combined selectors");for(let c=2;c<=Math.min(4,l.length)&&r==null;c++)for(let f=0;f<=l.length-c&&r==null;f++){const y=l.slice(f,f+c).map(p=>H0(p)).join("");i.push(`Trying combined selector: ${y}`);const h=jd(y,n);if(h.length===1){const p=h[0];if(this.validateElementMatch(p,e,i)){i.push("Found exactly 1 element with combined selector, validation passed"),r=p;break}else i.push("Found 1 element but validation failed, continuing search")}if(h.length>1&&(i.push(`Combined selector still found ${h.length} elements, trying to select best element`),r=await this.selectBestElement(h,e,i),r!==null))break}}if(r===null&&(r=this.findTargetWithTagName(n??document,e),r!==null)){const c=rc(e).text?.trim();if(c&&c.length>0){const f=Hh(r).trim();f!==c&&(i.push(`Tag name fallback found element but text mismatch: found "${f}", expected "${c}"`),r=null)}}return r!==null&&i.push("Found one target element with the tag name, returning it"),{element:r,debugInformation:i}}validateElementMatch(e,n,r){const i=rc(n);if(e.tagName.toLowerCase()!==i.tagName.toLowerCase())return r.push(`Tag name mismatch: found ${e.tagName.toLowerCase()}, expected ${i.tagName.toLowerCase()}`),!1;const o=i.text?.trim();if(o&&o.length>0){const f=Hh(e).trim();if(f!==o)return r.push(`Text mismatch: found "${f}", expected "${o}"`),!1}const l=z0(n,this.attributesBlacklist),c=[];for(const f of l){const g=e.getAttribute(f.name);if(g===null){c.push(f.name);continue}let y=!1;if(f.comparison==="contains"?y=g.includes(f.value):f.name==="class"?y=g.split(/\s+/).includes(f.value):y=g===f.value,!y)return r.push(`Attribute ${f.name} value mismatch: found "${g}", expected "${f.value}"`),!1}return c.length>0?(r.push(`Missing attributes: ${c.join(", ")}`),!1):(r.push("All validations passed"),!0)}async selectBestElement(e,n,r){const i=e.filter(y=>y.tagName.toLocaleLowerCase()===rc(n).tagName);r.push(`Found ${i.length} elements with the right tag name`);const l=rc(n).text?.trim();let c=i;if(l&&l.length>0){const y=i.filter(h=>Hh(h).trim()===l);if(r.push(`Found ${y.length} elements with matching text "${l}"`),y.length>0)c=y;else return r.push("No elements match the required text, returning null"),null}if(c.length===1)return c[0];let f=c;const g=[new QN(n,r),new XN(n,this.attributesBlacklist,r),new eO(n,r)];for(rc(n).position!==null&&g.push(new JN(n,r));f.length>1&&g.length>0;){const y=g.shift();r.push(`Trying to elect the best element using ${y.name}`),f=y.getWinners(f)}if(f.length===1)return r.push("Found the best element, returning it"),f[0];if(f.length>1&&l&&l.length>0)if(!this.shouldUseAiTextMatching)r.push("AI text matching not available");else{r.push(`${f.length} elements remain after traditional scoring, trying AI text matching`);const y=aO(f,r);if(y.length>0){const h=jN(n),p=await dO(y,l,r,"Delta",h);if(p)return p}}return r.push(`There are still ${f.length} elements after trying all selection methods, returning null`),null}findTargetWithTagName(e,n){const r=rc(n);if(e instanceof DocumentFragment){const o=e.querySelectorAll(r.tagName);return o.length===1?o[0]:null}const i=e.getElementsByTagName(r.tagName);return i.length===1?i[0]:null}}function W0(t,e=8,n={entropy:3.5,compression:.8,distribution:.3,runLength:1.8,finalScore:.65}){if(t.length<e)return{isRandom:!1,scores:{entropy:0,compressionRatio:0,charDistribution:0,runLength:0,final:0}};if(new Set(t.split("")).size===1)return{isRandom:!1,scores:{entropy:0,compressionRatio:0,charDistribution:0,runLength:0,final:0}};if(t.length>=6){const _=t.substring(0,2);let I=!0;for(let C=0;C<t.length-1;C+=2)if(t.substring(C,C+2)!==_){I=!1;break}if(I)return{isRandom:!1,scores:{entropy:.2,compressionRatio:.1,charDistribution:.2,runLength:.1,final:.15}}}if(t.length>=5){let _=!0;for(let I=1;I<t.length;I++)if(t.charCodeAt(I)!==t.charCodeAt(I-1)+1){_=!1;break}if(_)return{isRandom:!1,scores:{entropy:.3,compressionRatio:.2,charDistribution:.3,runLength:.2,final:.25}}}if(t.length>=6){let _=!0;const I=t.split("").map(C=>/[a-zA-Z]/.test(C));for(let C=2;C<I.length;C++)if(I[C]!==I[C-2]){_=!1;break}if(_&&I[0]!==I[1]){const C=1.1538461538461537,v={entropy:.8/C,compressionRatio:.7/C,charDistribution:.8/C,runLength:.7/C,final:.75};return{isRandom:v.final>n.finalScore,scores:v}}}if(t.includes(" ")){const _=t.split(/\s+/);if(_.length>3){const I=t.replace(/\s+/g,"").length/_.length;if(I>=2&&I<=10&&(t.match(/[a-zA-Z]/g)??[]).length/t.length>.6)return{isRandom:!1,scores:{entropy:.5,compressionRatio:.5,charDistribution:.5,runLength:.5,final:.5}}}}const r={};for(const _ of t)r[_]=(r[_]||0)+1;let i=0;for(const _ in r){const I=r[_]/t.length;i-=I*Math.log2(I)}const o=Object.keys(r).length,l=Math.log2(o),c=l>0?i/l:0,f=q7(t),g=o/Math.min(t.length,256),y=W7(t),h={entropy:.35,compression:.3,distribution:.15,runLength:.2},p=c*h.entropy+f*h.compression+g*h.distribution+y*h.runLength,E={entropy:c,compressionRatio:f,charDistribution:g,runLength:y,final:p};return{isRandom:y<.3?!1:p>n.finalScore,scores:E}}function q7(t){const e={};for(let i=1;i<=Math.min(8,Math.floor(t.length/2));i++)for(let o=0;o<=t.length-i;o++){const l=t.substring(o,o+i);e[l]=(e[l]||0)+1}let n=0;for(const i in e)e[i]>1&&i.length>1&&(n+=e[i]*i.length);const r=n/(t.length*2);return Math.max(0,Math.min(1,1-r))}function W7(t){if(t.length<=1)return 0;const e=[];let[n]=t,r=1;for(let E=1;E<t.length;E++)t[E]===n?r++:(e.push(r),n=t[E],r=1);e.push(r);const i=e.length,o=Math.max(...e),l=e.reduce((E,A)=>E+A,0)/i,c=Math.min(1,o/(t.length/2)),f=Math.min(1,(l-1)/3),y=Math.min(1,i/t.length)*.3+(1-c)*.4+(1-f)*.3,h=new Set(t.split("")).size,p=Math.max(0,1-h/Math.min(10,t.length));return Math.max(0,Math.min(1,y-p))}const Ky={dynamicId:[/^[0-9a-f]{8}(-[0-9a-f]{4}){3}-[0-9a-f]{12}$/i,/^[0-9a-f]{32}$/i,/^id_[0-9a-f]{5,}$/i,/^[a-z]+-[0-9a-f]{6,}$/i,/^[a-z]+_[0-9]{3,}$/i,/^el-[0-9]+$/i,/^[a-z]{1,3}[0-9]{4,}$/i,/^id[0-9]{3,}$/i,/^[a-z]+-[0-9]+-[0-9a-f]+$/i,/^[a-z]{1,2}-[a-z]{1,2}-[0-9a-f]{4,}$/i,/^[a-z]+-[0-9]{10,}$/i,/^[a-z]+[0-9]+-[0-9a-f]{5,}$/i,/^[a-z]+\/[a-z]+\/[0-9a-f]+$/i],stableId:[/^[a-z]+(-[a-z]+){0,3}$/,/^[a-z]+(_[a-z]+){0,3}$/,/^[a-z][a-zA-Z0-9]{1,15}$/,/^(header|footer|main|nav|sidebar|content)$/,/^(container|wrapper|root|app)$/,/^form-[a-z]+$/,/^section-[a-z]+$/,/^tab-[a-z]+$/,/^(login|signup|contact|search)-[a-z]*$/,/^btn-[a-z]+$/,/^[a-z]+-panel$/,/^page-[a-z]+$/,/^[a-z]+-view$/],stableClass:[/^(btn|button)(-[a-z]+)?$/,/^(container|wrapper|row|col)(-[a-z0-9]+)?$/,/^(header|footer|nav|sidebar|main|content)$/,/^(text|font|bg|border|m|p)(-[a-z0-9]+)?$/,/^(sm|md|lg|xl):[a-z0-9-]+$/,/^(flex|grid|block|inline|hidden)$/,/^(active|disabled|selected|open|closed)$/,/^(animate|transition|transform)(-[a-z]+)?$/,/^(rounded|shadow|opacity|z)(-[a-z0-9]+)?$/],unstableClass:[/^[a-z]_[a-zA-Z0-9]{5,}$/,/^[a-z][A-Z0-9][a-zA-Z0-9]{3,}$/,/^jsx-[a-zA-Z0-9_-]{4,}$/,/^[a-z]{1,3}[0-9]{3,}$/,/^([a-z]+-)?[a-f0-9]{4,}$/,/^_[a-zA-Z0-9]{5,}$/,/^[a-z]+-[a-zA-Z0-9]{8,}$/],frameworkGeneratedClass:[/^css-[a-zA-Z0-9]+$/,/^[a-z][a-z0-9]?[0-9a-f]{4,}$/,/^(MUI|Mui)-[a-zA-Z0-9-]+$/,/^(mantine|chakra)-[a-zA-Z0-9-]+$/,/^(svelte|ng|vue|react)-[a-zA-Z0-9-]+$/,/^__[a-zA-Z0-9_-]+$/,/^[a-z]+-module_[a-zA-Z0-9]+$/,/^data-v-[a-f0-9]+$/]},xg={potentiallyDynamicAttrs:new Set(["id","name","key","data-id","data-test","data-testid","data-uid","data-v-","guid","uuid","token","hash","nonce"]),generallyStableAttrs:new Set(["class","type","role","aria-label","title","alt","rel","href","src","target","method","action","aria-labelledby","aria-describedby","aria-controls","aria-expanded","aria-haspopup","aria-hidden","aria-live","aria-atomic","for","name","value","placeholder","required","disabled","readonly","autocomplete"]),stableElements:new Set(["header","footer","nav","main","article","section","aside","h1","h2","h3","h4","h5","h6","ul","ol","table","form","fieldset","legend","figure","figcaption","details","summary"]),lessStableElements:new Set(["div","span","p","a","button","input","img","li","tr","td"]),commonWords:new Set(["header","footer","sidebar","menu","nav","content","main","button","form","input","section","container","wrapper","tab","panel","modal","dialog","alert","banner","card","item","list","grid","table","row","column","cell","page","view","screen","app","root","login","logout","signup","register","contact","about","home","search","user","profile","account","admin","dashboard","settings"])},Yy={stabilityV1:{id:.3,classes:.25,attributes:.2,structure:.15,semantics:.1}},gO={id:{finalScore:.6},classes:{finalScore:.55}};function Qy(t,e){return e.some(n=>n.test(t))}function mO(t,e){const n={id:e?.stability_v1?.subscore_weights?.id??Yy.stabilityV1.id,classes:e?.stability_v1?.subscore_weights?.classes??Yy.stabilityV1.classes,attributes:e?.stability_v1?.subscore_weights?.attributes??Yy.stabilityV1.attributes,structure:e?.stability_v1?.subscore_weights?.structure??Yy.stabilityV1.structure,semantics:e?.stability_v1?.subscore_weights?.semantics??Yy.stabilityV1.semantics},r={id:K7(t),classes:Y7(t),attributes:Q7(t),structure:X7(t),semantics:J7(t)};let i=0;for(const c in r)i+=r[c]*n[c];r.id>.7&&r.classes>.7&&(i+=.1),r.structure>.8&&r.semantics>.7&&(i+=.1);const o=Math.max(0,Math.min(1,(i-.3)*(1/.4))),l=Math.pow(o,.8);return Math.round(l*100)/100}function K7(t){const e=t.attributes.find(y=>y.name==="id");if(!e||e.ignored||!e.value||e.value.length===0)return .5;const n=e.value;let i=W0(n,5,gO.id).isRandom?.2:.7;Qy(n,Ky.dynamicId)&&(i=Math.min(i,.15)),Qy(n,Ky.stableId)&&(i=Math.max(i,.85)),n.length>20?i=Math.min(i,.4):n.length>10&&n.length<=20?i=Math.min(i,.6):n.length<=10&&n.length>3&&(i+=.1);const l=(n.match(/\d/g)??[]).length/n.length;l>.5?i=Math.min(i,.3):l>.3&&(i=Math.min(i,.5)),(n.match(/[^a-zA-Z0-9_-]/g)??[]).length>0&&(i=Math.min(i,.4));const f=n.toLowerCase().split(/[-_]/);let g=0;for(const y of f)xg.commonWords.has(y)&&g++;return g>0&&(i=Math.max(i,.5+g/f.length*.4)),/[a-z]+-\d{1,2}$/.test(n)&&(i=Math.max(i,.6)),i}function Y7(t){const e=t.attributes.find(_=>_.name==="class");if(!e||e.ignored||!e.value||e.value.length===0)return .5;const n=A(e.value.split(" "));let r=0;for(const _ of n){let I=.5;const C=W0(_,5,gO.classes);C.isRandom&&(I=.3-(C.scores.final-.55)*.5),Qy(_,Ky.stableClass)&&(I=Math.max(I,.8)),Qy(_,Ky.unstableClass)&&(I=Math.min(I,.2)),Qy(_,Ky.frameworkGeneratedClass)&&(I=Math.min(I,.3)),_.length>20&&(I=Math.min(I,.4)),/^[a-z]+(-[a-z]+){0,3}$/.test(_)&&(I=Math.max(I,.7)),/^[a-z]+[0-9]{1,2}$/.test(_)&&(I=Math.max(I,.6)),/[A-Z]/.test(_)&&(I=Math.min(I,.4)),/_{2,}/.test(_)&&(I=Math.min(I,.3));const v=Math.min(1.5,.5+_.length/20);r+=I*v}const i=new Set(n.map(_=>{const I=_.match(/^([a-z-]+)-/);return I?I[1]:""}).filter(_=>_)),o=i.size>0?Math.max(.2,1-i.size/n.length*.8):.5,l=n.map(_=>_.length),c=l.reduce((_,I)=>_+I,0)/l.length,f=l.reduce((_,I)=>_+Math.abs(I-c),0)/l.length,g=f<2?.3:Math.min(1,f/10),y=.7,h=.15,p=.15,E=y+h+p;return(r/(n.length||1)*y+o*h+g*p)/E;function A(_){return Array.from(new Set(_))}}function Q7(t){const e=t.attributes.filter(i=>!i.ignored);if(e.length===0)return .5;let n=0,r=0;for(const i of e){const{name:o,value:l}=i;let c=1;(o==="id"||o==="data-id"||o==="key")&&(c=2);let f;xg.generallyStableAttrs.has(o)?f=.8:Array.from(xg.potentiallyDynamicAttrs).some(g=>o===g||o.startsWith(g))?f=.3:f=.5,!xg.generallyStableAttrs.has(o)&&l&&l.length>5&&W0(l,5).isRandom&&(f=Math.min(f,.4)),n+=f*c,r+=c}return r>0?n/r:.5}function X7(t){const e=t.tagName.toLowerCase();return xg.stableElements.has(e)?.9:xg.lessStableElements.has(e)?.6:.4}function J7(t){let e=.4;i(t,"role")&&(e+=.3),(i(t,"aria-label")||i(t,"aria-labelledby"))&&(e+=.2),i(t,"title")&&(e+=.1);const n=t.text?.trim()??"";n.length>0&&!/^\d+$/.test(n)&&(e+=.1);const r=Array.from(t.attributes).filter(o=>o.name.startsWith("data-"));for(const o of r)if(/data-(role|type|purpose|function|section|component)/i.test(o.name)){e+=.1;break}return Math.min(1,e);function i(o,l){return o.attributes.some(c=>c.name===l)}}class eZ{constructor({beta:e,pivot:n}={}){this.betaStrategy=new Wy({settings:e}),this.settings=n}findWithinSpecificDOM(e,n){const r=["Strategy Pivot"],i=this.findPivotElement(e);r.push(`Searching for pivot ${f(i)} element using Beta strategy`);const{element:o,debugInformation:l}=this.betaStrategy.findWithinSpecificDOM({...i,children:void 0},n);if(r.push(...l),!o)return r.push("Failed to find pivot element in the DOM"),{element:null,debugInformation:r};r.push("Found pivot element, trying to find the target element");const c=this.findTargetElement(o,i);if(c===null)return r.push("Failed finding the target element from the pivot element"),{element:null,debugInformation:r};return r.push("Successfully found target element using pivot strategy"),{element:c,debugInformation:r};function f(g){let y=g.tagName;return g.attributes?.length>0&&g.attributes.forEach(h=>{y+=`[${h.name}="${h.value}"]`}),y}}getTargetJSONDomElement(e){let n=e;for(;n.children;)n=n.children;return n}findPivotElement(e){const n=nZ(e,this.settings),r=tZ(n),i=this.getTargetJSONDomElement(r);if(i.scores?.stabilityV1===void 0)return i;let o=r,l=i;for(;o;)o.scores?.stabilityV1!==void 0&&l.scores?.stabilityV1!==void 0&&o.scores.stabilityV1>=l.scores.stabilityV1&&(l=o),o=o.children;return l}findTargetElement(e,n){let r=e,i=n;if(!i.children)return r;for(;i.children;){if(i=i.children,i.position==null)return null;const o=r.children[i.position];if(o===void 0)return null;r=o}return r}}function tZ(t){const n=structuredClone(t),r=l(t);let i=n,o=r;for(;i.children;)i.scores?.stabilityV1&&(i.scores.stabilityV1*=Math.pow(.96,o)),i=i.children,o--;return n;function l(c){let f=0;for(;c.children;)c=c.children,f++;return f}}function nZ(t,e){const n=structuredClone(t);let r=n;for(;r.children;)r.scores={stabilityV1:mO(r,e)},r=r.children;return r.scores={stabilityV1:mO(r,e)},n}const rZ=At.object({strategies:At.array(At.string()),strategies_settings:At.object({beta:At.any().optional(),delta:At.any().optional(),pivot:At.any().optional(),gamma:At.any().optional()}).nullable(),isAiServiceAvailable:At.boolean().default(!1)}).nullable(),yO=["manual_css_paths","alpha","beta","gamma","delta","pivot"],iZ="beta",oZ=t=>t?t.includes("manual_css_paths")?t:["manual_css_paths",...t]:["manual_css_paths",iZ],sZ=({optionsV3:t,ignoreInvisibleResults:e})=>{const n=rZ.parse(t);function r(i){switch(i){case"beta":return n?.strategies_settings?.beta;case"delta":return n?.strategies_settings?.delta;case"pivot":return n?.strategies_settings?.pivot;case"gamma":return n?.strategies_settings?.gamma;default:return}}return new h7(oZ(n?.strategies).map(i=>{switch(i){case"beta":return new Wy({settings:r("beta"),ignoreInvisibleResults:e});case"gamma":return Re.trace("Creating Gamma strategy with settings",{rawSettings:r("gamma")}),new hO({settings:r("gamma"),ignoreInvisibleResults:e,isAiServiceAvailable:n?.isAiServiceAvailable,betaSettings:r("beta")});case"delta":return new G7({settings:r("delta"),ignoreInvisibleResults:e,isAiServiceAvailable:n?.isAiServiceAvailable});case"alpha_then_beta":return Re.trace("alpha_then_beta is deprecated"),[new pO,new Wy({settings:r("beta")})];case"gamma_then_beta":return Re.trace("gamma_then_beta is deprecated"),[new hO({settings:r("gamma"),ignoreInvisibleResults:e,isAiServiceAvailable:n?.isAiServiceAvailable,betaSettings:r("beta")}),new Wy({settings:r("beta")})];case"manual_css_paths":return new V7;case"pivot":return new eZ({beta:r("beta"),pivot:r("pivot")});case"alpha":default:return new pO}}).flat())},aZ=At.object({version:At.string(),json:ZN,strategies:At.union([At.array(At.string()),At.string()]).optional().nullable(),strategy:At.union([At.array(At.string()),At.string()]).optional().nullable()}).transform(t=>{let e=[];const n=t.strategies??t.strategy;n!=null&&(e=typeof n=="string"?n.split(";").map(o=>o.trim()):n,t.strategies==null&&t.strategy!=null&&delete t.strategy);const r=[];e.forEach(o=>{o.includes("_then_")?r.push(...o.split("_then_")):r.push(o)});const i=Array.from(new Set(r.filter(o=>yO.some(l=>l===o))));if(i.length===0)return{...t,strategies:[]};if(!i.includes("manual_css_paths"))i.unshift("manual_css_paths");else if(i.indexOf("manual_css_paths")!==0){const o=i.indexOf("manual_css_paths");i.splice(o,1),i.unshift("manual_css_paths")}return{...t,strategies:i}}).parse.bind(void 0);class vO{constructor(e){this.abortController=null,this.highlight=null,this.isInViewport=null,this.id=ja(),this.element=e,this.start()}start(){if(this.abortController==null){this.abortController=new AbortController,this.abortController.signal.addEventListener("abort",()=>{this.abortController=null},{once:!0});const e=this.onMessage.bind(this);Uf.addMessageListener((n,r)=>{if(_O(n)&&n.observableId===this.id&&n.type===Mi.OBSERVE){r?.start();const i=o=>{r?.postMessage(o)};r?.addMessageListener(async o=>{e(o,i)}),this.observe(i),i({type:Lr.OBSERVE_ACK})}},this.abortController.signal),Uf.addMessageListener(n=>{e(n,()=>{})},this.abortController.signal)}}stop(){this.detachHighlight(),this.abortController?.abort()}onMessage(e,n){if(_O(e)&&e.observableId===this.id)switch(e.type){case Mi.FOCUS:{this.focus(),n({type:Lr.FOCUS,requestId:e.requestId});return}case Mi.RECT:{n({type:Lr.RECT,requestId:e.requestId,payload:{rect:this.getRect()}});return}case Mi.TEXT:{n({type:Lr.TEXT,requestId:e.requestId,payload:{text:this.text()}});return}case Mi.ATTRIBUTES:{n({type:Lr.ATTRIBUTES,requestId:e.requestId,payload:{attributes:this.attributes()}});return}case Mi.TAG_NAME:{n({type:Lr.TAG_NAME,requestId:e.requestId,payload:{tagName:this.tagName()}});return}case Mi.IN_VIEWPORT:{n({type:Lr.IN_VIEWPORT,requestId:e.requestId,payload:{inViewport:this.visible()}});return}case Mi.RENDERED:{n({type:Lr.RENDERED,requestId:e.requestId,payload:{rendered:this.rendered()}});return}case Mi.STOP:this.stop()}if(e&&typeof e=="object"&&"type"in e&&"payload"in e)switch(e.type){case Mi.SHOW_HIGHLIGHT:{const r=e.payload;r.observableId===this.id&&this.attachHighlight(r);break}case Mi.HIDE_HIGHLIGHT:{e.payload.observableId===this.id&&this.detachHighlight();break}case Mi.ATTACH_BEACON:{const r=e.payload;r.observableId===this.id&&this.attachBeacon(r,n);break}}}attachBeacon(e,n){const r=lZ(this.element,e.options);n({type:Lr.BEACON_ATTACHED,payload:{beaconId:r.id}})}setupResizeListener(e){window.addEventListener("resize",()=>{const n=this.getRect();e({type:Lr.RECT,payload:{rect:n}}),this.highlight&&this.highlight.show(n)},{signal:this.abortController?.signal})}setupChangeListener(e,n){let r=null;const i=y=>{e({type:Lr.CHANGE})},o=()=>{this.element.removeEventListener("change",i,{capture:!0}),r!==null&&clearInterval(r)};n?.addEventListener("abort",o),this.element.addEventListener("change",i,{once:!0,capture:!0});let l=f(this.element),c=g(this.element);r=setInterval(()=>{const y=f(this.element),h=g(this.element);(l!==y||c!==h)&&(l=y,c=h,i())},150);function f(y){return"value"in y&&typeof y.value=="string"?y.value:""}function g(y){return y instanceof HTMLElement?y.innerText:""}}setupInputListener(e){this.element.addEventListener("input",()=>{e({type:Lr.INPUT,payload:{value:this.text()}})})}setupScrollListener(e){Uf.addMessageListener(r=>{if(r.type===Zd.SCROLL){const i=this.getRect();e({type:Lr.RECT,payload:{rect:i}}),this.highlight&&this.highlight.show(i)}},this.abortController?.signal);let n=this.element;for(;n!=null;)n.addEventListener("scroll",()=>{const r=this.getRect();e({type:Lr.RECT,payload:{rect:r}}),this.highlight&&this.highlight.show(r)},{signal:this.abortController?.signal}),n=n.parentElement??n.shadowRoot?.parentElement??void 0;window.addEventListener("scroll",()=>{const r=this.getRect();e({type:Lr.RECT,payload:{rect:r}}),this.highlight&&this.highlight.show(r)},{signal:this.abortController?.signal})}setupUserEventListeners(e){const n={mouseover:Lr.HOVER,click:Lr.CLICK,focus:Lr.FOCUS,blur:Lr.BLUR,mouseenter:Lr.MOUSE_ENTER,mouseleave:Lr.MOUSE_LEAVE,mousedown:Lr.MOUSE_DOWN};Object.keys(n).forEach(r=>{this.element.addEventListener(r,()=>{e({type:n[r]})},{signal:this.abortController?.signal,capture:!0})})}setupIntersectionObserver(e){const n=new IntersectionObserver(r=>{const i=r[0].isIntersecting;(this.isInViewport===null||this.isInViewport!==i)&&(this.isInViewport=i,e({type:Lr.IN_VIEWPORT,payload:{inViewport:i}}));const o=this.getRect();e({type:Lr.RECT,payload:{rect:o}})});n.observe(this.element),this.abortController?.signal.addEventListener("abort",()=>{n.disconnect()},{once:!0})}setupMutationObserver(e){const n=()=>{e({type:Lr.RECT,payload:{rect:this.getRect()}})},r=new MutationObserver(n.bind(this));r.observe(this.element,{attributes:!0,childList:!0,subtree:!0}),this.abortController?.signal.addEventListener("abort",()=>{r.disconnect()},{once:!0})}setupRemovedMutationObserver(e){if(this.element.parentElement==null)return;const n=l=>{l.forEach(c=>{if(c.removedNodes.length>0){const f=Array.from(c.removedNodes);(f.includes(this.element)||f.some(g=>g.contains(this.element)))&&(e({type:Lr.REMOVED}),this.abortController?.abort())}})},r=new MutationObserver(n.bind(this)),i=this.element.getRootNode(),o=i instanceof ShadowRoot?i:xd(document);r.observe(o,{childList:!0,subtree:!0}),this.abortController?.signal.addEventListener("abort",()=>{r.disconnect()},{once:!0})}observe(e){return this.setupIntersectionObserver(e),this.setupMutationObserver(e),this.setupRemovedMutationObserver(e),this.setupResizeListener(e),this.setupScrollListener(e),this.setupInputListener(e),this.setupChangeListener(e,this.abortController?.signal),this.setupUserEventListeners(e),!0}getRect(){return this.element.getBoundingClientRect()}visible(){return oN(this.element)}rendered(){return $f(this.element)}text(){return this.element instanceof HTMLInputElement?this.element.value:this.element.textContent}attributes(){return Array.from(this.element.attributes).reduce((e,n)=>(e[n.name]=n.value,e),{})}tagName(){return this.element.tagName}focus(){this.element.scrollIntoView({behavior:"smooth",block:"center"})}attachHighlight(e){this.detachHighlight(),this.highlight=new L0({color:e.color,type:e.type,selector:e.selector}),this.highlight.attachToElement(this.element)}detachHighlight(){this.highlight?.hide(),this.highlight=null}}function _O(t){return At.object({observableId:At.string(),type:At.string()}).safeParse(t).success}function lZ(t,e){const n=v1(t,e),r=n.element;if(!(r instanceof Element))throw new Error("createBeaconObservable requires beacon.element to be an Element");const i=new vO(r),o=i.stop.bind(i);return i.stop=()=>{n.unmount(),o()},i}const uZ=At.object({strategy:At.enum(["regular","xpath"]).optional(),context:At.object({enabled:At.boolean().optional(),levels:At.number().optional(),bonus:At.unknown().optional()}).catch({}),dynamicIframes:At.boolean().optional(),trustSpecificity:At.boolean().optional(),validation:At.object({enabled:At.boolean().optional(),threshold:At.number().optional(),mode:At.enum(["regular","xpath","dynamic"]).optional(),validators:At.array(At.object({enabled:At.boolean().catch(!0),name:At.enum(["nth","position","dimensions","attributes"]),weight:At.number(),options:At.record(At.union([At.string(),At.unknown()])).catch({})})).optional()}).catch({}),cssClassesBlacklist:At.array(At.string()).catch([]),eventsToBlock:At.array(At.string()).catch([]),pathExtensions:At.array(At.string()).catch([]),iframesSettings:At.record(At.union([At.string(),At.unknown()])).optional(),useTexts:At.boolean().optional(),projectRigidity:At.number().optional(),useCssClassesInPath:At.boolean().optional(),modifiers:At.array(At.object({enabled:At.boolean(),name:At.literal("keywords"),options:At.object({words:At.array(At.string()).optional()})})).catch([]),useIdSelector:At.boolean().optional(),postMessagesAdditionalProperties:At.array(At.unknown()).catch([])}).optional(),cZ=At.object({paths:At.array(At.object({value:At.string(),active:At.boolean()})),settings:uZ,pathElement:At.object({id:At.string().nullable().catch(null),elementType:At.string().optional(),classList:At.array(At.object({value:At.string(),active:At.boolean()})),attributesList:At.array(At.object({value:At.string(),active:At.boolean()})),texts:At.array(At.object({value:At.string(),active:At.boolean()}))}),iframes:At.array(At.array(At.object({value:At.string(),active:At.boolean()}))),validationData:At.object({position:At.object({top:At.number(),right:At.number(),bottom:At.number(),left:At.number()}).optional(),width:At.number().optional(),height:At.number().optional(),nthPosition:At.number().nullable().optional(),attributes:At.record(At.union([At.string(),At.number()])).catch({})}).nullable().optional(),isPivot:At.boolean().catch(!1),pivotOptions:At.object({nthTagIndex:At.number(),tagName:At.string(),targetPositionComparedToPivot:At.enum(["after","before"])}).nullable().catch(null),contextElements:At.array(At.object({path:At.string(),proximity:At.number(),level:At.number().nullable()})).catch([]),contextEnabled:At.boolean().catch(!1)});class Qi{constructor(e){const n=JSON.parse(e);if(typeof n!="object")throw new Error("Target: data is not an object");if(n&&"v3"in n){this.data=aZ(n.v3);return}this.data=cZ.parse(n)}static parse(e){if(e instanceof Qi)return e;if(e==null)return null;if(typeof e=="string")try{return new Qi(e)}catch(n){return Re.error(n,"TargetAdapter.parse: failed to parse string",{data:e}),null}if(typeof e=="object")try{return new Qi(JSON.stringify(e))}catch(n){return Re.error(n,"TargetAdapter.parse: failed to parse object",{data:e}),null}return null}isV1(){return"paths"in this.data}isV3(){return"json"in this.data}get target(){return this.data}get version(){if(this.isV1())return K0.v1;if(this.isV3())return K0.v3;throw new Error("Target: version not found")}get text(){if(this.isV1()){const e=this.target.pathElement.texts;if(e[0])return e[0].value}if(this.isV3()){let e=this.target.json;for(;e.children!=null;)e=e.children;if(e)return e.text}return""}setStrategies(e=[]){if(!this.isV3()){Re.warn("Target: Cannot set strategies on v1 target");return}this.target.strategies=e}clone(){return new Qi(this.serialize())}serialize(){if(this.isV3())return JSON.stringify({v3:this.data});if(this.isV1())return JSON.stringify(this.data);throw new Error("Target: cannot serialize target")}toJSON(){return this.serialize()}}var K0=(t=>(t.v1="v1",t.v3="v3",t))(K0||{});function bO(t){if(t.length<=0)throw new Error("nodes is empty");let e=t.shift();for(;t.length>0;){const n=t.shift();n!=null&&(e={...n,children:e??void 0})}if(e==null)throw new Error("nextNode is null");return e}function fZ(t){let e=t;const n=[];for(;e!=null;){const{children:o,...l}=e;if(n.unshift(l),r(e)||i(e))return{current:bO(n),remaining:o};e=o??null}return{current:bO(n)};function r(o){return o.tagName==="iframe"||o.tagName==="frame"}function i(o){return o.shadowRoot===!0}}class Xy{constructor(){rs.addMessageListener(async(e,n)=>{e.type==="FIND"&&await Xy.findObservableElement(e.payload.json,document,e.payload.options).then(r=>{n?.postMessage(r)})})}static async find(e,n){const r=await Xy.findObservableElement(e,document,n);return r.id!=null?{element:new Z0(r.id),debugInformation:r.debugInformation}:{element:null,debugInformation:r.debugInformation??[]}}static async findObservableElement(e,n,r){const{current:i,remaining:o}=fZ(e),{element:l,debugInformation:c}=await sZ(r).findWithinSpecificDOM(i,n);if(l==null)return{id:null,debugInformation:c};if(l.shadowRoot!=null&&o!=null){const g=await this.findObservableElement(o,l.shadowRoot,r);return EO(l),{id:g.id,debugInformation:[...c,"Shadow DOM found, finding remaining",...g.debugInformation]}}if(zc(l)&&o!=null){const g=await dZ(o,l,r);return l instanceof HTMLIFrameElement&&EO(l),{id:g.id,debugInformation:[...c,"Iframe found, finding remaining",...g.debugInformation]}}return{id:new vO(l).id,debugInformation:c}}}async function dZ(t,e,n){try{return await rs.requestFromFrame(e,{type:"FIND",payload:{json:t,options:n}})}catch{return{id:null,debugInformation:[]}}}function EO(t){let e=t;for(;e!=null;)e.addEventListener("scroll",()=>{Uf.broadcastToChildFrames({type:Zd.SCROLL})}),e=e.parentElement}const hZ=async(t,{signal:e,optionsV1:n={},optionsV3:r=null,ignoreInvisibleResults:i=!0}={})=>t.target===null?{element:null,debugInformation:[]}:t.isV3()?pZ(t.target,{signal:e,ignoreInvisibleResults:i,optionsV3:r}):{element:await gZ(t,{signal:e,optionsV1:n,ignoreInvisibleResults:i}),debugInformation:[]};async function pZ(t,{signal:e,ignoreInvisibleResults:n,optionsV3:r}){return await I1(async()=>{let o=r;t.strategies&&t.strategies?.length>0&&(o={strategies:t.strategies,strategies_settings:r?.strategies_settings??null,isAiServiceAvailable:r?.isAiServiceAvailable??!1});const{element:l,debugInformation:c}=await Xy.find(t.json,{optionsV3:o,ignoreInvisibleResults:n});return l===null?{element:null,debugInformation:c}:n&&!await l.safeIsRendered()?(c.push("Found element is not visible, returning null"),l.destroy(),{element:null,debugInformation:c}):(e?.addEventListener("abort",()=>{l.destroy()}),{element:l,debugInformation:c})},{signal:e,shouldRetry:o=>o.element===null})??{element:null,debugInformation:[]}}async function gZ(t,{signal:e,ignoreInvisibleResults:n,optionsV1:{settings:r=[]}}){const i=t.target.settings,o=Array.isArray(r)?r:[r],c=await c7([i,...o,UN].filter(g=>g!=null)).awaitAllWithJSON(t.serialize(),{validate:async g=>n&&!await mZ(g)?!1:g.matches.length>0,signal:e}),f=n?await yZ(c):c;return(await kN(f.matches))?.element??null}async function mZ(t){return(await Promise.all(t.matches.map(async n=>n.element.safeIsRendered()))).some(n=>n)}async function yZ(t){const e=await Promise.all(t.matches.map(async n=>n.element.safeIsRendered()));return{...t,matches:t.matches.filter((n,r)=>e[r])}}const na={find:hZ};function vZ(t){if(!t||t.trim().length===0)return!1;const e=t.trim();return/\s/.test(e)||/^https?:\/\/|^ftp:\/\//i.test(e)||e.includes("@")||/^[\d.,\s%-]+$/.test(e)||/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e)||e.length<3?!1:!!(/^[a-z][a-z0-9]*[A-Z][a-zA-Z0-9]*$/.test(e)||/^[A-Z][a-z]+[A-Z][a-zA-Z0-9]*$/.test(e)||e.includes("_")&&/^[a-z0-9_]+$/.test(e)||e.includes("_")&&/^[A-Z0-9_]+$/.test(e))}function _Z(t){if(!t||t.trim().length===0)return!1;const e=t.trim();if(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e)||/^[a-f0-9]{32}$/i.test(e)||/^[a-f0-9]{40}$/i.test(e)||/^[a-f0-9]{64}$/i.test(e))return!0;if(e.length>=8&&e.length<=16&&/^[a-z0-9]+$/i.test(e)){const n=/[a-z]/i.test(e),r=/\d/.test(e);if(n&&r)return!0}if(e.length>=16&&/^[A-Za-z0-9+/]+=*$/.test(e)&&/[+/=]/.test(e))return!0;if(/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/.test(e)){const n=e.split(".");return!!(n.length===4&&n.every(r=>{const i=parseInt(r,10);return!isNaN(i)&&i>=0&&i<=255}))}if(/^([0-9a-f]{0,4}:){2,7}[0-9a-f]{0,4}$/i.test(e)||/^::1$/.test(e)||/^#[0-9a-f]{3}$/i.test(e)||/^#[0-9a-f]{6}$/i.test(e)||/^#[0-9a-f]{8}$/i.test(e)||/^rgba?\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*(,\s*[\d.]+\s*)?\)$/i.test(e))return!0;if(/^-?\d{1,3}\.\d+,\s*-?\d{1,3}\.\d+$/.test(e)){const[n,r]=e.split(",").map(i=>parseFloat(i.trim()));if(!isNaN(n)&&!isNaN(r)&&n>=-90&&n<=90&&r>=-180&&r<=180)return!0}if(/^[$]\s?-?\d{1,3}(,\d{3})*(\.\d{2})?$/.test(e)||/^-?\d{1,3}(,\d{3})*(\.\d{2})?\s?[]$/.test(e)||/^-?\d+$/.test(e)||/^-?\d+\.\d+$/.test(e)||/^-?\d{1,3}(,\d{3})*(\.\d+)?$/.test(e)||/^-?\d+(\s\d{3})*(\.\d+)?$/.test(e)||/^-?\d+(\.\d+)?%$/.test(e)||/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(Z|[+-]\d{2}:\d{2})$/.test(e)||/^\d{2}[/\-.]\d{2}[/\-.]\d{4}$/.test(e)||/^\d{1,2}:\d{2}(:\d{2})?(\s?(AM|PM))?$/i.test(e))return!0;if(e.startsWith("{")&&e.endsWith("}")||e.startsWith("[")&&e.endsWith("]"))try{return JSON.parse(e),!0}catch{}if(/^\d{5}(-\d{4})?$/.test(e)||/^[A-Z]{1,2}\d{1,2}[A-Z]?\s?\d[A-Z]{2}$/i.test(e)||/^[A-Z]\d[A-Z]\s?\d[A-Z]\d$/i.test(e))return!0;if(/^[+(\d][\d\s.\-()]{6,}$/.test(e)){const n=(e.match(/\d/g)||[]).length;if(n>=6&&n<=15)return!0}return!1}function bZ(t){if(!t||t.trim().length===0)return!1;const e=t.trim();return/\s/.test(e)?!1:/^(https?|ftp|ftps):\/\//i.test(e)||/^www\./i.test(e)||/\.\w{2,}\//.test(e)||/^[\w.-]+:\d{1,5}$/.test(e)||/@\{.+\}/.test(e)?!0:e.includes("@")?!!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e):!!(/\.(js|ts|jsx|tsx|css|scss|html|json|xml|svg|md|txt|yaml|yml|png|jpg|gif|pdf)$/i.test(e)||/^[A-Z]:\\/i.test(e)||/^\/[\w/.-]+/.test(e)||/^\w+\.\w+/.test(e)&&!e.endsWith(".")&&!/^\d+\.\d+$/.test(e)||/\{\{.+\}\}/.test(e)||/\$\{.+\}/.test(e)||/<%=.+%>/.test(e)||/^\{.+\}$/.test(e)&&!e.startsWith("{{")||/@\{.+\}/.test(e)||/%[0-9A-F]{2}/i.test(e))}function EZ(t){if(!t||t.trim().length===0)return!1;const e=t.trim();if(vZ(e)||_Z(e)||bZ(e))return!1;if(wZ(e)||/\s/.test(e)&&(e.match(/[a-zA-Z\u00C0-\u024F\u1E00-\u1EFF]/g)||[]).length/e.length>=.5||/[.,!?;:]/.test(e)&&(e.match(/[a-zA-Z\u00C0-\u024F\u1E00-\u1EFF]/g)||[]).length>=2||e.length>=3&&(e.match(/[a-zA-Z\u00C0-\u024F\u1E00-\u1EFF]/g)||[]).length/e.length>=.8&&!e.includes("_"))return!0;const n=e.includes(" "),r=e.length>=12;return!(!n&&r&&W0(e).isRandom)}function wZ(t){return/[\u4E00-\u9FFF\u3040-\u309F\u30A0-\u30FF\uAC00-\uD7AF\u0400-\u04FF\u0600-\u06FF\u0590-\u05FF\u0E00-\u0E7F]/.test(t)}const TZ=()=>{new Xy,new Uf};function SZ(t){return t?.beacon?.use_legacy_behavior??!0?"v1":"v2"}function Bf(t){const e=Za(),{userId:n,profileAndTagsHash:r}=ms();return py({queryKey:["v3-init-scopes",n,r],enabled:n!==null,queryFn:i,select:t});async function i(){const o=await e(`${Ii("API_URL")}/v3/init/scopes`,{method:"GET"});if(o.status!==200)throw Re.error(`Unexpected HTTP status code while fetching user scope: ${o.status}`),new Eu({expected:200,received:o.status});return o.body}}function Jy(){const t=xe.useCallback(e=>e,[]);return Bf(t)}function D1(){const t=xe.useCallback(e=>I$(e.player.tools),[]);return Bf(t)}function ml(){const{config:{host:t}}=zs(),{data:e}=D1();return xe.useMemo(()=>e?.filter(n=>Pd(n.client_side_conditions,t))??[],[e,t])}function AZ(t){const e=ml(),n=xe.useCallback(r=>r.condition==null?!0:Pd([{type:"contains",target:"url_path",pattern:r.condition,case_sensitive:!1}],t),[t]);return xe.useMemo(()=>e.flatMap(r=>r.content_targets.filter(n).flatMap(i=>i.id)),[e,n])}function za(){const t=xe.useCallback(r=>r.player.projects,[]),e=ml(),{data:n}=Bf(t);return xe.useMemo(()=>n?.find(r=>r.legacy_id===e[0]?.project_id),[n,e])}function wO(){const t=za();return xe.useMemo(()=>SZ(t?.config?.content_display),[t])}function P1(){const t=xe.useCallback(n=>n.player.company,[]),{data:e}=Bf(t);return xe.useMemo(()=>e,[e])}function ev(){const t=ml()[0],e=P1();return xe.useMemo(()=>{if(t==null)return{v1:null,v3:null};if(t.algorithm.version===K0.v1)return{v1:l7(JSON.stringify(t.algorithm_settings)),v3:null};const n=e?.config.targeting.translation.use_native_browser_api===!0&&e?.config.targeting.translation.provider!=null;return{v1:null,v3:{strategies:CZ(t.algorithm.strategy),strategies_settings:RZ(t.algorithm.strategy_settings),isAiServiceAvailable:n}}},[t,e])}function IZ(){const t=xe.useCallback(n=>n.player.global_variables,[]),{data:e}=Bf(t);return xe.useMemo(()=>e,[e])}const M1=()=>{const t=xe.useCallback(n=>n.player.feature_flag_slugs,[]),{data:e}=Bf(t);return xe.useMemo(()=>e??[],[e])},k1=()=>{const t=xe.useCallback(n=>n.player.company.id,[]),{data:e}=Bf(t);return xe.useMemo(()=>e??null,[e])},TO=()=>{const t=xe.useCallback(n=>n.player.tag_attribute_uuids,[]),{data:e}=Bf(t);return xe.useMemo(()=>e??[],[e])},SO=()=>{const t=xe.useCallback(n=>n.player.profile_uuids,[]),{data:e}=Bf(t);return xe.useMemo(()=>e??[],[e])};function CZ(t){return t?.split(";").filter(e)??[];function e(n){return yO.includes(n)}}function RZ(t){if(t==null)return null;const e={};return t.beta!=null&&F1(t.beta)?e.beta=t.beta:F1(t)&&(e.beta={attributes_blacklist:t.attributes_blacklist}),t.delta!=null&&xZ(t.delta)&&(e.delta=t.delta),t.pivot!=null&&NZ(t.pivot)&&(e.pivot=t.pivot),e}function F1(t){return typeof t=="object"&&t!==null&&"attributes_blacklist"in t&&Array.isArray(t.attributes_blacklist)&&t.attributes_blacklist.every(e=>typeof e=="string")}function xZ(t){return F1(t)}function NZ(t){return!(typeof t!="object"||t===null||Object.keys(t).length!==1||!("stability_v1"in t)||typeof t.stability_v1!="object"||t.stability_v1===null||Object.keys(t.stability_v1).length!==1||!("subscore_weights"in t.stability_v1)||typeof t.stability_v1.subscore_weights!="object"||t.stability_v1.subscore_weights===null||Object.entries(t.stability_v1.subscore_weights).some(([i,o])=>!["id","classes","attributes","structure","semantics"].includes(i)||typeof o!="number"))}const $1=Vs.createContext(null),OZ=2,LZ=({children:t})=>{const{i18n:{language:e,changeLanguage:n},t:r}=fR(),{cachedLanguage:i,cacheLanguage:o}=DZ(),{config:l}=zs(),c=za(),f=c!==void 0,g=c?.config.languages,y=c?.config.default_locale,h=xe.useMemo(()=>{if(g===void 0||y===void 0)return;const v=g.find(T=>T.locale===y);if(v===void 0){Re.error("The project doesn't have a default language or the default language is not in the app. Please add it in the admin app.");return}return v},[g,y]),p=xe.useMemo(()=>i!==null?(Re.debug(`Language detection: Detected "${i}" in cache.`),i):l.language!=null?(Re.debug(`Language detection: Detected "${l.language}" in configuration. (No language detected in cache.)`),l.language):(Re.debug(`Language detection: Detected "${e}" by i18next. (No language detected in cache or in configuration.)`),e),[i,e,l.language]),E=xe.useCallback(v=>g===void 0?!1:g.map(S=>S.locale).includes(v),[g]),A=xe.useMemo(()=>g===void 0||y===void 0||E(p)?p:(Re.warn(`The detected language "${p}" is not included in the project languages. Using the default project language instead : "${y}".`),y),[g,y,p,E]);xe.useEffect(()=>{Re.info(`Setting language to "${A}".`),n(A)},[n,A]);const _=g?.find(v=>v.locale===A)?.legacy_id??null,I=xe.useCallback(v=>{o(v)},[o]),C=xe.useCallback(v=>{if(v.includes(A))return A;const T=navigator.language.split("-")[0];return v.includes(T)?T:v.includes("en")?"en":v[0]},[A]);return pe.jsx($1.Provider,{value:{currentLanguage:A,currentLanguageId:_,defaultProjectLanguage:h,projectLanguages:g??[],t:r,changeLanguage:I,languageIsValidatedAfterAuth:f,getBestMatchingLanguage:C},children:t})},{Consumer:Ywe}=$1;function Gi(){const t=xe.useContext($1);if(t===null)throw new Error("useLanguage must be used within a LanguageProvider");return{currentLanguage:t.currentLanguage,t:t.t,changeLanguage:t.changeLanguage,currentLanguageId:t.currentLanguageId,defaultProjectLanguage:t.defaultProjectLanguage,projectLanguages:t.projectLanguages,languageIsValidatedAfterAuth:t.languageIsValidatedAfterAuth,getBestMatchingLanguage:t.getBestMatchingLanguage}}function DZ(){const[t,e]=xe.useState(Q6),n=xe.useCallback(r=>{Y6(r),e(r)},[]);return{cachedLanguage:t,cacheLanguage:n}}const yl={primary:"#fae100",secondary:"#1479d7",highlight:"#1479d7",text:"#2d2e2f"};function Y0(t,e=.5){if(t.match(/^#([a-f0-9]{1,6})$/i)===null)return!1;const n=t.replace("#",""),r=h=>parseInt(h.substring(0,2),16),i=h=>parseInt(h.substring(2,4),16),o=h=>parseInt(h.substring(4,6),16),l=(h,p,E)=>(h*299+p*587+E*114)/1e3,[c,f,g]=[r(n),i(n),o(n)];return!(l(c,f,g)>255*e)}function U1(t,e=.5){return Y0(t,e)?"#ffffff":"#333333"}const PZ=document.body,AO=xe.createContext(void 0),qh=()=>{const t=xe.useContext(AO);return t===void 0?PZ:t};function MZ(t,e){return t.reduce((n,r)=>{try{const i=kZ(r,e);return[...n,i]}catch(i){return Re.error(`Error while creating a offline news with id (${r.id}): "${i.message}". Skipping it. Full news response object:`,r),n}},[])}function kZ(t,e){const n=e.find(r=>r.id===t.tool_id);if(n===void 0)throw new Error(`No valid tool found with id = (${t.tool_id})`);return{...t,tool:n,display:{...t.display,not_after:t.display.not_after!==null?new Date(t.display.not_after):null,not_before:t.display.not_before!==null?new Date(t.display.not_before):null}}}const Wc={publishedLocales:[],locale:"",launcher:{color:"#fae100",shape:"classic",customIconUrl:null,defaultPosition:"bottom_right",isFixed:!1},loginScreen:{loginButtonColor:"#1479d7",gradientColor:"#fae100",customLogoUrl:null,customWelcomeText:null}};function FZ(t){return{publishedLocales:t.published_locales,locale:t.locale,launcher:{color:t.launcher.color??Wc.launcher.color,shape:t.launcher.shape??Wc.launcher.shape,customIconUrl:t.launcher.icon_url??Wc.launcher.customIconUrl,defaultPosition:t.launcher.default_position??Wc.launcher.defaultPosition,isFixed:t.launcher.is_fixed??Wc.launcher.isFixed},loginScreen:{loginButtonColor:t.login_screen.login_button_color??Wc.loginScreen.loginButtonColor,gradientColor:t.login_screen.background_color??Wc.loginScreen.gradientColor,customLogoUrl:t.login_screen.logo_url??Wc.loginScreen.customLogoUrl,customWelcomeText:t.login_screen.welcome_text??Wc.loginScreen.customWelcomeText}}}function IO(t){return{...t,contents:{...t.contents,news:MZ(t.contents.news,t.contents.tools)},theme:t.theme!=null?FZ(t.theme):Wc}}const $Z=async(t,e)=>{const n=await Dd(`${Ii("API_URL")}/v3/init/offline?lang=${e}`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({company_key:t})});if(n.status!==200)throw new Eu({expected:200,received:n.status});return n.body};function B1(){const t=Qu(),{isAuthenticated:e}=ms(),{config:{companyKey:n}}=zs(),{currentLanguage:r}=Gi(),{data:i}=py({queryKey:["offline-init-data",n,r],enabled:!!n&&!e,queryFn:async()=>$Z(n,r).catch(c=>{throw Re.error(c,"An error occurred while fetching offline content"),c}),select:IO}),o=xe.useCallback(c=>{t.setQueryData(["offline-init-data",n],c)},[t,n]);return{offlineInitData:BZ()??i,mutate:o}}const UZ={analyze:{ingressToken:""},stats:{ingressToken:""},contents:{news:[],tools:[]},theme:{published_locales:["fr"],locale:"fr",launcher:{color:"#000069",shape:null,icon_url:"https://files.lemonlearning.com/image-uploads/custom-player/d462df98ff727b013b391fc4c71d4d6f",default_position:null,is_fixed:!1},login_screen:{login_button_color:"#000069",background_color:"#ffffff",logo_url:"https://files.lemonlearning.com/image-uploads/custom-player/a89f88ab55e3c00bace92c56697dea86",welcome_text:"Connectez vous afin d'utiliser votre assistant Hello !"}}};function BZ(){const{config:{ssoId:t}}=zs(),e=187;return xe.useMemo(()=>t!==null&&t===e?IO(UZ):null,[t])}const br={bubble:"_bubble_3yyug_1",noborder:"_noborder_3yyug_24","bubble-arrow-top-middle":"_bubble-arrow-top-middle_3yyug_30",error:"_error_3yyug_48","bubble-arrow-top-left":"_bubble-arrow-top-left_3yyug_51","bubble-arrow-top-right":"_bubble-arrow-top-right_3yyug_76","bubble-arrow-right-middle":"_bubble-arrow-right-middle_3yyug_102","bubble-arrow-right-top":"_bubble-arrow-right-top_3yyug_124","bubble-arrow-right-bottom":"_bubble-arrow-right-bottom_3yyug_150","bubble-arrow-bottom-middle":"_bubble-arrow-bottom-middle_3yyug_176","bubble-arrow-bottom-right":"_bubble-arrow-bottom-right_3yyug_198","bubble-arrow-bottom-left":"_bubble-arrow-bottom-left_3yyug_224","bubble-arrow-left-middle":"_bubble-arrow-left-middle_3yyug_249","bubble-arrow-left-top":"_bubble-arrow-left-top_3yyug_272","bubble-arrow-left-bottom":"_bubble-arrow-left-bottom_3yyug_298","screen-center":"_screen-center_3yyug_324",animated:"_animated_3yyug_328","position-above":"_position-above_3yyug_333","position-right":"_position-right_3yyug_336","position-below":"_position-below_3yyug_339","position-left":"_position-left_3yyug_342",visible:"_visible_3yyug_345",content:"_content_3yyug_353","icons-box":"_icons-box_3yyug_415",cross:"_cross_3yyug_424",moveable:"_moveable_3yyug_436",completion:"_completion_3yyug_447",footer:"_footer_3yyug_461",footerBubble:"_footerBubble_3yyug_467",logo:"_logo_3yyug_470",action:"_action_3yyug_482",previous:"_previous_3yyug_499",single:"_single_3yyug_511",afterprev:"_afterprev_3yyug_537",actions:"_actions_3yyug_541","action-item":"_action-item_3yyug_546","action-item-disabled":"_action-item-disabled_3yyug_568",corner:"_corner_3yyug_582","corner-top-left":"_corner-top-left_3yyug_582","corner-top-right":"_corner-top-right_3yyug_588","corner-bottom-right":"_corner-bottom-right_3yyug_594","corner-bottom-left":"_corner-bottom-left_3yyug_600","push-title":"_push-title_3yyug_635","center-push":"_center-push_3yyug_647",validator:"_validator_3yyug_684","modal-overlay":"_modal-overlay_3yyug_697","video-bubble":"_video-bubble_3yyug_712","image-bubble":"_image-bubble_3yyug_721","center-bubble":"_center-bubble_3yyug_760","not-found-target-bubble":"_not-found-target-bubble_3yyug_780","not-found-next-step":"_not-found-next-step_3yyug_789","bubble-inner":"_bubble-inner_3yyug_812","question-bubble":"_question-bubble_3yyug_819",label:"_label_3yyug_825","active-label":"_active-label_3yyug_841","answers-labels":"_answers-labels_3yyug_847",answers:"_answers_3yyug_847",active:"_active_3yyug_841"};function ZZ(){return pe.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 462.58 196.5",fill:"none",children:[pe.jsxs("g",{clipPath:"url(#a)",children:[pe.jsx("mask",{id:"b",width:362,height:153,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"luminance"},children:pe.jsx("path",{fill:"#fff",d:"M362 0H0v153h362V0Z"})}),pe.jsxs("g",{mask:"url(#b)",children:[pe.jsx("path",{fill:"#C7C7C7",d:"M288.355 88.59c-5.4 0-29.701 4.525-45.901-11.774-16.201-16.3-14.403-41.65-11.703-44.366 2.7-2.716-4.498-6.34 0-10.866 4.498-4.525 8.1 2.717 10.8 0 2.701-2.716 27.897-4.525 44.098 11.774 16.2 16.3 11.702 40.748 11.702 46.181 0 3.49-1.116 5.117-1.911 5.83-.455.41-.889.84-1.297 1.304-.708.8-2.319 1.924-5.794 1.924l.006-.007Z"}),pe.jsx("path",{fill:"#242F42",d:"M264.121.02c-.427-.034-12.13-.464-18.472 5.231l-.542.545c-5.661 6.381-5.233 18.148-5.199 18.592.427.034 12.13.464 18.472-5.231l.542-.545c5.661-6.381 5.233-18.148 5.199-18.592ZM15.693 6v68.66h36.27v13.22H0V6h15.693ZM89.284 88.692c-5.888 0-11.048-1.284-15.466-3.86-4.417-2.575-7.846-6.158-10.285-10.758-2.44-4.6-3.663-9.904-3.663-15.909 0-5.689 1.223-10.759 3.663-15.203 2.44-4.445 5.794-7.955 10.058-10.53 4.264-2.575 9.143-3.86 14.65-3.86s10.5 1.19 14.764 3.57c4.264 2.381 7.572 5.75 9.938 10.12 2.366 4.371 3.582 9.434 3.663 15.204 0 .86-.061 1.815-.174 2.864a37.641 37.641 0 0 1-.522 3.335H75.917c.307 2.495 1.103 4.62 2.386 6.375 1.283 1.755 2.867 3.12 4.765 4.095 1.898.975 4.09 1.459 6.57 1.459 2.787 0 5.327-.585 7.612-1.755 2.286-1.17 3.93-2.77 4.939-4.794l13.254 3.86c-2.326 4.989-5.795 8.868-10.406 11.639-4.612 2.77-9.865 4.148-15.753 4.148Zm11.047-35.906c-.153-2.186-.775-4.156-1.858-5.904-1.082-1.755-2.5-3.12-4.243-4.095-1.745-.975-3.743-1.46-5.989-1.46-1.938.081-3.763.606-5.467 1.581-1.704.975-3.161 2.3-4.357 3.974-1.203 1.681-1.999 3.644-2.386 5.904h24.3ZM128.93 29.393h13.487l1.049 5.73c1.858-1.95 4.09-3.53 6.683-4.741 2.594-1.21 5.447-1.816 8.548-1.816 3.643 0 7.011.8 10.112 2.4 3.102 1.601 5.621 3.88 7.559 6.846 2.012-2.885 4.726-5.144 8.141-6.785 3.408-1.64 7.091-2.454 11.047-2.454 4.572 0 8.548.975 11.917 2.925 3.368 1.95 5.988 4.774 7.846 8.48 1.858 3.704 2.787 8.283 2.787 13.743v34.152h-14.884V55.59c0-4.363-.969-7.678-2.907-9.944-1.938-2.26-4.692-3.39-8.254-3.39-3.562 0-6.49 1.15-8.548 3.45-2.052 2.3-3.081 5.716-3.081 10.234v31.933h-14.884V55.59c0-4.363-.856-7.678-2.56-9.944-1.704-2.26-4.377-3.39-8.02-3.39-3.642 0-6.51 1.15-8.374 3.45-1.858 2.3-2.787 5.675-2.787 10.12v32.047h-14.884v-58.48h.007ZM310.264 29.393h13.487l1.049 5.964c1.858-2.105 4.124-3.759 6.804-4.97 2.673-1.21 5.56-1.815 8.661-1.815 4.652 0 8.582.975 11.803 2.925 3.215 1.95 5.675 4.774 7.386 8.48 1.704 3.704 2.559 8.283 2.559 13.743v34.152h-14.884V55.59c0-4.364-.909-7.72-2.733-10.06-1.825-2.34-4.518-3.51-8.08-3.51-3.563 0-6.416 1.17-8.315 3.51-1.898 2.34-2.847 5.77-2.847 10.295v32.047H310.27v-58.48h-.006ZM140.592 95.986h3.522v44.574h-3.522V95.986ZM167.533 140.996c-2.881 0-5.427-.692-7.632-2.084-2.206-1.385-3.924-3.308-5.16-5.749-1.236-2.441-1.851-5.265-1.851-8.452 0-3.026.628-5.723 1.884-8.083 1.257-2.36 2.974-4.216 5.16-5.561 2.185-1.344 4.678-2.024 7.479-2.024 2.8 0 5.219.612 7.385 1.836 2.165 1.224 3.849 2.898 5.066 5.036 1.216 2.139 1.804 4.573 1.758 7.303 0 .417-.014.861-.034 1.338-.02.477-.053.982-.093 1.526h-24.782c.04 2.28.534 4.29 1.483 6.032.949 1.741 2.212 3.1 3.803 4.075 1.584.975 3.389 1.459 5.407 1.459 2.553 0 4.745-.531 6.583-1.587 1.831-1.056 3.161-2.555 3.983-4.505L181 132.8c-1.156 2.656-2.901 4.686-5.253 6.092-2.346 1.412-5.086 2.111-8.221 2.111l.007-.007Zm10.259-18.027c.04-2.071-.368-3.893-1.236-5.473-.863-1.574-2.092-2.818-3.676-3.732-1.584-.915-3.449-1.365-5.594-1.365-1.898 0-3.603.457-5.126 1.365-1.524.914-2.774 2.165-3.736 3.759-.97 1.593-1.538 3.409-1.698 5.439h21.073l-.007.007ZM210.36 140.559l-.247-6.589c-.862 2.239-2.212 3.967-4.05 5.191-1.831 1.223-4.15 1.835-6.951 1.835-2.225 0-4.117-.343-5.687-1.028-1.564-.686-2.774-1.668-3.616-2.952-.842-1.285-1.27-2.818-1.27-4.6 0-2.609.969-4.733 2.907-6.374 1.939-1.634 4.819-2.643 8.649-3.012l10.011-1.117v-2.609c0-2.151-.708-3.846-2.132-5.07-1.423-1.223-3.388-1.835-5.901-1.835s-4.378.558-5.962 1.681c-1.584 1.116-2.646 2.716-3.181 4.787l-3.215-1.116c.782-2.777 2.246-4.922 4.385-6.435 2.145-1.513 4.818-2.273 8.033-2.273 3.623 0 6.45.915 8.468 2.737s3.028 4.33 3.028 7.524v21.262h-3.275l.006-.007Zm-.247-15.606-10.072 1.183c-2.64.289-4.585.941-5.841 1.957-1.257 1.015-1.885 2.394-1.885 4.135 0 1.742.608 3.107 1.825 4.102 1.216.995 2.954 1.493 5.219 1.493 2.386 0 4.378-.485 5.962-1.46 1.584-.975 2.78-2.319 3.582-4.041.802-1.721 1.203-3.658 1.203-5.816v-1.553h.007ZM223.955 109.475h3.274l.188 5.534a11.01 11.01 0 0 1 2.84-3.356 11.17 11.17 0 0 1 4.077-2.05c1.524-.417 3.195-.458 5.006-.122v3.544c-1.771-.37-3.375-.363-4.819.034-1.444.396-2.687 1.089-3.736 2.084-1.049.995-1.865 2.239-2.439 3.732-.575 1.493-.863 3.194-.863 5.097v16.602h-3.522v-31.086l-.006-.013ZM246.818 109.474h3.275l.187 5.655c.863-1.903 2.152-3.396 3.863-4.478 1.711-1.076 3.803-1.614 6.269-1.614 2.306 0 4.358.511 6.149 1.526 1.791 1.016 3.195 2.528 4.204 4.539 1.009 2.01 1.517 4.566 1.517 7.679v17.778h-3.522v-17.408c0-3.524-.782-6.22-2.346-8.083-1.564-1.862-3.749-2.797-6.55-2.797-2.967 0-5.293.995-6.984 2.986-1.691 1.99-2.533 4.955-2.533 8.889v16.413h-3.522v-31.085h-.007ZM285.195 102.515c-.782 0-1.424-.248-1.918-.746-.495-.498-.742-1.123-.742-1.862 0-.787.247-1.432.742-1.93.494-.498 1.136-.746 1.918-.746.701 0 1.31.248 1.824.746.515.498.776 1.143.776 1.93 0 .746-.261 1.371-.776 1.862a2.534 2.534 0 0 1-1.824.746Zm-1.791 6.967h3.462v31.085h-3.462v-31.085ZM298.541 109.474h3.275l.187 5.655c.862-1.903 2.152-3.396 3.863-4.478 1.711-1.076 3.803-1.614 6.269-1.614 2.306 0 4.358.511 6.149 1.526 1.791 1.016 3.194 2.528 4.204 4.539 1.009 2.01 1.517 4.566 1.517 7.679v17.778h-3.522v-17.408c0-3.524-.782-6.22-2.346-8.083-1.564-1.862-3.75-2.797-6.55-2.797-2.967 0-5.293.995-6.984 2.986-1.691 1.99-2.533 4.955-2.533 8.889v16.413h-3.522v-31.085h-.007ZM358.478 109.474h3.275v24.866c0 3.94-.842 7.295-2.533 10.072-1.691 2.777-4.13 4.902-7.325 6.375-3.195 1.472-7.098 2.205-11.709 2.205l-.555-3.295c6.055-.04 10.667-1.365 13.841-3.98 3.175-2.609 4.759-6.402 4.759-11.377v-1.117l.307.128c-.862 2.071-2.285 3.853-4.264 5.346-1.978 1.493-4.571 2.259-7.786 2.299-2.887 0-5.387-.652-7.505-1.956-2.119-1.305-3.77-3.161-4.946-5.568-1.176-2.4-1.758-5.224-1.758-8.452 0-3.228.588-6.038 1.758-8.425 1.176-2.381 2.82-4.236 4.946-5.568 2.118-1.324 4.625-1.99 7.505-1.99 2.059 0 3.863.329 5.407.995 1.544.666 2.841 1.547 3.896 2.643a12.357 12.357 0 0 1 2.44 3.637l.247-6.838Zm-22.429 15.546c0 3.893.996 6.986 2.994 9.266 1.998 2.279 4.725 3.422 8.187 3.422 2.099 0 3.983-.517 5.654-1.553 1.671-1.035 2.974-2.508 3.923-4.411.949-1.903 1.424-4.142 1.424-6.717 0-2.576-.475-4.862-1.424-6.745-.949-1.882-2.259-3.348-3.923-4.384-1.671-1.035-3.555-1.553-5.654-1.553-3.422 0-6.142 1.15-8.16 3.45-2.019 2.299-3.028 5.379-3.028 9.232l.007-.007Z"})]})]}),pe.jsx("defs",{children:pe.jsx("clipPath",{id:"a",children:pe.jsx("path",{fill:"#fff",d:"M0 0h362v153H0z"})})})]})}const jZ=xe.forwardRef(function({onClick:e,fill:n=""},r){return pe.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:pe.jsx("g",{children:pe.jsx("g",{children:pe.jsx("path",{className:"fill",d:"M16,9H6.41l4.29-4.29L9.29,3.29l-6,6h0L2.59,10l.71.71h0l6,6,1.41-1.41L6.41,11H16a1,1,0,0,0,0-2Z"})})})})}),Wh={},CO={};function Ng(t=""){try{if(!t?.includes("."))return Wh[t];const{scope:e,key:n}=xO(t);return Wh[e][n]}catch(e){return Re.debug(e,"Error while getting a variable"),null}}function tv(t=""){const e=Ng(t);return typeof e!="string"?null:e}function Q0(t,e){const{scope:n,key:r}=xO(t);n in Wh||(Wh[n]={});const i=Wh[n][r];Wh[n][r]=e,t in CO&&CO[t].map(o=>o(e,i))}function VZ(t){return t.name!==void 0}function nv(t,e){e?.forEach(n=>{VZ(n)&&Q0(`${t}.${n.name}`,n.value)})}function RO(t){Wh[t]={}}const xO=t=>{const e=t.split("."),n=e[0],r=e[1];return{scope:n,key:r}};/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */const{entries:NO,setPrototypeOf:OO,isFrozen:zZ,getPrototypeOf:HZ,getOwnPropertyDescriptor:GZ}=Object;let{freeze:Ha,seal:Au,create:Z1}=Object,{apply:j1,construct:V1}=typeof Reflect<"u"&&Reflect;Ha||(Ha=function(e){return e}),Au||(Au=function(e){return e}),j1||(j1=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return e.apply(n,i)}),V1||(V1=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return new e(...r)});const X0=qa(Array.prototype.forEach),qZ=qa(Array.prototype.lastIndexOf),LO=qa(Array.prototype.pop),rv=qa(Array.prototype.push),WZ=qa(Array.prototype.splice),J0=qa(String.prototype.toLowerCase),z1=qa(String.prototype.toString),H1=qa(String.prototype.match),iv=qa(String.prototype.replace),KZ=qa(String.prototype.indexOf),YZ=qa(String.prototype.trim),ic=qa(Object.prototype.hasOwnProperty),Ga=qa(RegExp.prototype.test),ov=QZ(TypeError);function qa(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return j1(t,e,r)}}function QZ(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return V1(t,n)}}function Ci(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:J0;OO&&OO(t,null);let r=e.length;for(;r--;){let i=e[r];if(typeof i=="string"){const o=n(i);o!==i&&(zZ(e)||(e[r]=o),i=o)}t[i]=!0}return t}function XZ(t){for(let e=0;e<t.length;e++)ic(t,e)||(t[e]=null);return t}function Zf(t){const e=Z1(null);for(const[n,r]of NO(t))ic(t,n)&&(Array.isArray(r)?e[n]=XZ(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=Zf(r):e[n]=r);return e}function sv(t,e){for(;t!==null;){const r=GZ(t,e);if(r){if(r.get)return qa(r.get);if(typeof r.value=="function")return qa(r.value)}t=HZ(t)}function n(){return null}return n}const DO=Ha(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),G1=Ha(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),q1=Ha(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),JZ=Ha(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),W1=Ha(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),ej=Ha(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),PO=Ha(["#text"]),MO=Ha(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),K1=Ha(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),kO=Ha(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),eb=Ha(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),tj=Au(/\{\{[\w\W]*|[\w\W]*\}\}/gm),nj=Au(/<%[\w\W]*|[\w\W]*%>/gm),rj=Au(/\$\{[\w\W]*/gm),ij=Au(/^data-[\-\w.\u00B7-\uFFFF]+$/),oj=Au(/^aria-[\-\w]+$/),FO=Au(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),sj=Au(/^(?:\w+script|data):/i),aj=Au(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),$O=Au(/^html$/i),lj=Au(/^[a-z][.\w]*(-[.\w]+)+$/i);var UO=Object.freeze({__proto__:null,ARIA_ATTR:oj,ATTR_WHITESPACE:aj,CUSTOM_ELEMENT:lj,DATA_ATTR:ij,DOCTYPE_NAME:$O,ERB_EXPR:nj,IS_ALLOWED_URI:FO,IS_SCRIPT_OR_DATA:sj,MUSTACHE_EXPR:tj,TMPLIT_EXPR:rj});const av={element:1,text:3,progressingInstruction:7,comment:8,document:9},uj=function(){return typeof window>"u"?null:window},cj=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";n&&n.hasAttribute(i)&&(r=n.getAttribute(i));const o="dompurify"+(r?"#"+r:"");try{return e.createPolicy(o,{createHTML(l){return l},createScriptURL(l){return l}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}},BO=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function ZO(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:uj();const e=cn=>ZO(cn);if(e.version="3.3.0",e.removed=[],!t||!t.document||t.document.nodeType!==av.document||!t.Element)return e.isSupported=!1,e;let{document:n}=t;const r=n,i=r.currentScript,{DocumentFragment:o,HTMLTemplateElement:l,Node:c,Element:f,NodeFilter:g,NamedNodeMap:y=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:h,DOMParser:p,trustedTypes:E}=t,A=f.prototype,_=sv(A,"cloneNode"),I=sv(A,"remove"),C=sv(A,"nextSibling"),v=sv(A,"childNodes"),T=sv(A,"parentNode");if(typeof l=="function"){const cn=n.createElement("template");cn.content&&cn.content.ownerDocument&&(n=cn.content.ownerDocument)}let S,O="";const{implementation:$,createNodeIterator:V,createDocumentFragment:B,getElementsByTagName:ne}=n,{importNode:D}=r;let X=BO();e.isSupported=typeof NO=="function"&&typeof T=="function"&&$&&$.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:ve,ERB_EXPR:ie,TMPLIT_EXPR:ye,DATA_ATTR:Ne,ARIA_ATTR:Me,IS_SCRIPT_OR_DATA:oe,ATTR_WHITESPACE:Ce,CUSTOM_ELEMENT:Ye}=UO;let{IS_ALLOWED_URI:et}=UO,Y=null;const Ee=Ci({},[...DO,...G1,...q1,...W1,...PO]);let Pe=null;const Xe=Ci({},[...MO,...K1,...kO,...eb]);let Ze=Object.seal(Z1(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),at=null,jt=null;const xt=Object.seal(Z1(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let ht=!0,It=!0,Ue=!1,Ve=!0,_t=!1,M=!0,x=!1,U=!1,j=!1,he=!1,de=!1,ot=!1,wt=!0,st=!1;const nt="user-content-";let rt=!0,ct=!1,St={},Wt=null;const $t=Ci({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let hn=null;const dn=Ci({},["audio","video","img","source","image","track"]);let _n=null;const En=Ci({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),tr="http://www.w3.org/1998/Math/MathML",Ir="http://www.w3.org/2000/svg",Fr="http://www.w3.org/1999/xhtml";let Dr=Fr,ni=!1,bi=null;const Jr=Ci({},[tr,Ir,Fr],z1);let eo=Ci({},["mi","mo","mn","ms","mtext"]),ei=Ci({},["annotation-xml"]);const jr=Ci({},["title","style","font","a","script"]);let qi=null;const ro=["application/xhtml+xml","text/html"],To="text/html";let di=null,xo=null;const pn=n.createElement("form"),nn=function(ze){return ze instanceof RegExp||ze instanceof Function},be=function(){let ze=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(xo&&xo===ze)){if((!ze||typeof ze!="object")&&(ze={}),ze=Zf(ze),qi=ro.indexOf(ze.PARSER_MEDIA_TYPE)===-1?To:ze.PARSER_MEDIA_TYPE,di=qi==="application/xhtml+xml"?z1:J0,Y=ic(ze,"ALLOWED_TAGS")?Ci({},ze.ALLOWED_TAGS,di):Ee,Pe=ic(ze,"ALLOWED_ATTR")?Ci({},ze.ALLOWED_ATTR,di):Xe,bi=ic(ze,"ALLOWED_NAMESPACES")?Ci({},ze.ALLOWED_NAMESPACES,z1):Jr,_n=ic(ze,"ADD_URI_SAFE_ATTR")?Ci(Zf(En),ze.ADD_URI_SAFE_ATTR,di):En,hn=ic(ze,"ADD_DATA_URI_TAGS")?Ci(Zf(dn),ze.ADD_DATA_URI_TAGS,di):dn,Wt=ic(ze,"FORBID_CONTENTS")?Ci({},ze.FORBID_CONTENTS,di):$t,at=ic(ze,"FORBID_TAGS")?Ci({},ze.FORBID_TAGS,di):Zf({}),jt=ic(ze,"FORBID_ATTR")?Ci({},ze.FORBID_ATTR,di):Zf({}),St=ic(ze,"USE_PROFILES")?ze.USE_PROFILES:!1,ht=ze.ALLOW_ARIA_ATTR!==!1,It=ze.ALLOW_DATA_ATTR!==!1,Ue=ze.ALLOW_UNKNOWN_PROTOCOLS||!1,Ve=ze.ALLOW_SELF_CLOSE_IN_ATTR!==!1,_t=ze.SAFE_FOR_TEMPLATES||!1,M=ze.SAFE_FOR_XML!==!1,x=ze.WHOLE_DOCUMENT||!1,he=ze.RETURN_DOM||!1,de=ze.RETURN_DOM_FRAGMENT||!1,ot=ze.RETURN_TRUSTED_TYPE||!1,j=ze.FORCE_BODY||!1,wt=ze.SANITIZE_DOM!==!1,st=ze.SANITIZE_NAMED_PROPS||!1,rt=ze.KEEP_CONTENT!==!1,ct=ze.IN_PLACE||!1,et=ze.ALLOWED_URI_REGEXP||FO,Dr=ze.NAMESPACE||Fr,eo=ze.MATHML_TEXT_INTEGRATION_POINTS||eo,ei=ze.HTML_INTEGRATION_POINTS||ei,Ze=ze.CUSTOM_ELEMENT_HANDLING||{},ze.CUSTOM_ELEMENT_HANDLING&&nn(ze.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ze.tagNameCheck=ze.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ze.CUSTOM_ELEMENT_HANDLING&&nn(ze.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ze.attributeNameCheck=ze.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ze.CUSTOM_ELEMENT_HANDLING&&typeof ze.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ze.allowCustomizedBuiltInElements=ze.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),_t&&(It=!1),de&&(he=!0),St&&(Y=Ci({},PO),Pe=[],St.html===!0&&(Ci(Y,DO),Ci(Pe,MO)),St.svg===!0&&(Ci(Y,G1),Ci(Pe,K1),Ci(Pe,eb)),St.svgFilters===!0&&(Ci(Y,q1),Ci(Pe,K1),Ci(Pe,eb)),St.mathMl===!0&&(Ci(Y,W1),Ci(Pe,kO),Ci(Pe,eb))),ze.ADD_TAGS&&(typeof ze.ADD_TAGS=="function"?xt.tagCheck=ze.ADD_TAGS:(Y===Ee&&(Y=Zf(Y)),Ci(Y,ze.ADD_TAGS,di))),ze.ADD_ATTR&&(typeof ze.ADD_ATTR=="function"?xt.attributeCheck=ze.ADD_ATTR:(Pe===Xe&&(Pe=Zf(Pe)),Ci(Pe,ze.ADD_ATTR,di))),ze.ADD_URI_SAFE_ATTR&&Ci(_n,ze.ADD_URI_SAFE_ATTR,di),ze.FORBID_CONTENTS&&(Wt===$t&&(Wt=Zf(Wt)),Ci(Wt,ze.FORBID_CONTENTS,di)),rt&&(Y["#text"]=!0),x&&Ci(Y,["html","head","body"]),Y.table&&(Ci(Y,["tbody"]),delete at.tbody),ze.TRUSTED_TYPES_POLICY){if(typeof ze.TRUSTED_TYPES_POLICY.createHTML!="function")throw ov('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ze.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw ov('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');S=ze.TRUSTED_TYPES_POLICY,O=S.createHTML("")}else S===void 0&&(S=cj(E,i)),S!==null&&typeof O=="string"&&(O=S.createHTML(""));Ha&&Ha(ze),xo=ze}},Te=Ci({},[...G1,...q1,...JZ]),je=Ci({},[...W1,...ej]),Je=function(ze){let pt=T(ze);(!pt||!pt.tagName)&&(pt={namespaceURI:Dr,tagName:"template"});const Gt=J0(ze.tagName),Gn=J0(pt.tagName);return bi[ze.namespaceURI]?ze.namespaceURI===Ir?pt.namespaceURI===Fr?Gt==="svg":pt.namespaceURI===tr?Gt==="svg"&&(Gn==="annotation-xml"||eo[Gn]):!!Te[Gt]:ze.namespaceURI===tr?pt.namespaceURI===Fr?Gt==="math":pt.namespaceURI===Ir?Gt==="math"&&ei[Gn]:!!je[Gt]:ze.namespaceURI===Fr?pt.namespaceURI===Ir&&!ei[Gn]||pt.namespaceURI===tr&&!eo[Gn]?!1:!je[Gt]&&(jr[Gt]||!Te[Gt]):!!(qi==="application/xhtml+xml"&&bi[ze.namespaceURI]):!1},Ge=function(ze){rv(e.removed,{element:ze});try{T(ze).removeChild(ze)}catch{I(ze)}},vt=function(ze,pt){try{rv(e.removed,{attribute:pt.getAttributeNode(ze),from:pt})}catch{rv(e.removed,{attribute:null,from:pt})}if(pt.removeAttribute(ze),ze==="is")if(he||de)try{Ge(pt)}catch{}else try{pt.setAttribute(ze,"")}catch{}},Tt=function(ze){let pt=null,Gt=null;if(j)ze="<remove></remove>"+ze;else{const pr=H1(ze,/^[\r\n\t ]+/);Gt=pr&&pr[0]}qi==="application/xhtml+xml"&&Dr===Fr&&(ze='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ze+"</body></html>");const Gn=S?S.createHTML(ze):ze;if(Dr===Fr)try{pt=new p().parseFromString(Gn,qi)}catch{}if(!pt||!pt.documentElement){pt=$.createDocument(Dr,"template",null);try{pt.documentElement.innerHTML=ni?O:Gn}catch{}}const Rn=pt.body||pt.documentElement;return ze&&Gt&&Rn.insertBefore(n.createTextNode(Gt),Rn.childNodes[0]||null),Dr===Fr?ne.call(pt,x?"html":"body")[0]:x?pt.documentElement:Rn},Qt=function(ze){return V.call(ze.ownerDocument||ze,ze,g.SHOW_ELEMENT|g.SHOW_COMMENT|g.SHOW_TEXT|g.SHOW_PROCESSING_INSTRUCTION|g.SHOW_CDATA_SECTION,null)},sn=function(ze){return ze instanceof h&&(typeof ze.nodeName!="string"||typeof ze.textContent!="string"||typeof ze.removeChild!="function"||!(ze.attributes instanceof y)||typeof ze.removeAttribute!="function"||typeof ze.setAttribute!="function"||typeof ze.namespaceURI!="string"||typeof ze.insertBefore!="function"||typeof ze.hasChildNodes!="function")},qt=function(ze){return typeof c=="function"&&ze instanceof c};function Nt(cn,ze,pt){X0(cn,Gt=>{Gt.call(e,ze,pt,xo)})}const en=function(ze){let pt=null;if(Nt(X.beforeSanitizeElements,ze,null),sn(ze))return Ge(ze),!0;const Gt=di(ze.nodeName);if(Nt(X.uponSanitizeElement,ze,{tagName:Gt,allowedTags:Y}),M&&ze.hasChildNodes()&&!qt(ze.firstElementChild)&&Ga(/<[/\w!]/g,ze.innerHTML)&&Ga(/<[/\w!]/g,ze.textContent)||ze.nodeType===av.progressingInstruction||M&&ze.nodeType===av.comment&&Ga(/<[/\w]/g,ze.data))return Ge(ze),!0;if(!(xt.tagCheck instanceof Function&&xt.tagCheck(Gt))&&(!Y[Gt]||at[Gt])){if(!at[Gt]&&On(Gt)&&(Ze.tagNameCheck instanceof RegExp&&Ga(Ze.tagNameCheck,Gt)||Ze.tagNameCheck instanceof Function&&Ze.tagNameCheck(Gt)))return!1;if(rt&&!Wt[Gt]){const Gn=T(ze)||ze.parentNode,Rn=v(ze)||ze.childNodes;if(Rn&&Gn){const pr=Rn.length;for(let Sr=pr-1;Sr>=0;--Sr){const Ri=_(Rn[Sr],!0);Ri.__removalCount=(ze.__removalCount||0)+1,Gn.insertBefore(Ri,C(ze))}}}return Ge(ze),!0}return ze instanceof f&&!Je(ze)||(Gt==="noscript"||Gt==="noembed"||Gt==="noframes")&&Ga(/<\/no(script|embed|frames)/i,ze.innerHTML)?(Ge(ze),!0):(_t&&ze.nodeType===av.text&&(pt=ze.textContent,X0([ve,ie,ye],Gn=>{pt=iv(pt,Gn," ")}),ze.textContent!==pt&&(rv(e.removed,{element:ze.cloneNode()}),ze.textContent=pt)),Nt(X.afterSanitizeElements,ze,null),!1)},vn=function(ze,pt,Gt){if(wt&&(pt==="id"||pt==="name")&&(Gt in n||Gt in pn))return!1;if(!(It&&!jt[pt]&&Ga(Ne,pt))){if(!(ht&&Ga(Me,pt))){if(!(xt.attributeCheck instanceof Function&&xt.attributeCheck(pt,ze))){if(!Pe[pt]||jt[pt]){if(!(On(ze)&&(Ze.tagNameCheck instanceof RegExp&&Ga(Ze.tagNameCheck,ze)||Ze.tagNameCheck instanceof Function&&Ze.tagNameCheck(ze))&&(Ze.attributeNameCheck instanceof RegExp&&Ga(Ze.attributeNameCheck,pt)||Ze.attributeNameCheck instanceof Function&&Ze.attributeNameCheck(pt,ze))||pt==="is"&&Ze.allowCustomizedBuiltInElements&&(Ze.tagNameCheck instanceof RegExp&&Ga(Ze.tagNameCheck,Gt)||Ze.tagNameCheck instanceof Function&&Ze.tagNameCheck(Gt))))return!1}else if(!_n[pt]){if(!Ga(et,iv(Gt,Ce,""))){if(!((pt==="src"||pt==="xlink:href"||pt==="href")&&ze!=="script"&&KZ(Gt,"data:")===0&&hn[ze])){if(!(Ue&&!Ga(oe,iv(Gt,Ce,"")))){if(Gt)return!1}}}}}}}return!0},On=function(ze){return ze!=="annotation-xml"&&H1(ze,Ye)},Un=function(ze){Nt(X.beforeSanitizeAttributes,ze,null);const{attributes:pt}=ze;if(!pt||sn(ze))return;const Gt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Pe,forceKeepAttr:void 0};let Gn=pt.length;for(;Gn--;){const Rn=pt[Gn],{name:pr,namespaceURI:Sr,value:Ri}=Rn,xi=di(pr),oi=Ri;let Vr=pr==="value"?oi:YZ(oi);if(Gt.attrName=xi,Gt.attrValue=Vr,Gt.keepAttr=!0,Gt.forceKeepAttr=void 0,Nt(X.uponSanitizeAttribute,ze,Gt),Vr=Gt.attrValue,st&&(xi==="id"||xi==="name")&&(vt(pr,ze),Vr=nt+Vr),M&&Ga(/((--!?|])>)|<\/(style|title|textarea)/i,Vr)){vt(pr,ze);continue}if(xi==="attributename"&&H1(Vr,"href")){vt(pr,ze);continue}if(Gt.forceKeepAttr)continue;if(!Gt.keepAttr){vt(pr,ze);continue}if(!Ve&&Ga(/\/>/i,Vr)){vt(pr,ze);continue}_t&&X0([ve,ie,ye],Ni=>{Vr=iv(Vr,Ni," ")});const yi=di(ze.nodeName);if(!vn(yi,xi,Vr)){vt(pr,ze);continue}if(S&&typeof E=="object"&&typeof E.getAttributeType=="function"&&!Sr)switch(E.getAttributeType(yi,xi)){case"TrustedHTML":{Vr=S.createHTML(Vr);break}case"TrustedScriptURL":{Vr=S.createScriptURL(Vr);break}}if(Vr!==oi)try{Sr?ze.setAttributeNS(Sr,pr,Vr):ze.setAttribute(pr,Vr),sn(ze)?Ge(ze):LO(e.removed)}catch{vt(pr,ze)}}Nt(X.afterSanitizeAttributes,ze,null)},Er=function cn(ze){let pt=null;const Gt=Qt(ze);for(Nt(X.beforeSanitizeShadowDOM,ze,null);pt=Gt.nextNode();)Nt(X.uponSanitizeShadowNode,pt,null),en(pt),Un(pt),pt.content instanceof o&&cn(pt.content);Nt(X.afterSanitizeShadowDOM,ze,null)};return e.sanitize=function(cn){let ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pt=null,Gt=null,Gn=null,Rn=null;if(ni=!cn,ni&&(cn="<!-->"),typeof cn!="string"&&!qt(cn))if(typeof cn.toString=="function"){if(cn=cn.toString(),typeof cn!="string")throw ov("dirty is not a string, aborting")}else throw ov("toString is not a function");if(!e.isSupported)return cn;if(U||be(ze),e.removed=[],typeof cn=="string"&&(ct=!1),ct){if(cn.nodeName){const Ri=di(cn.nodeName);if(!Y[Ri]||at[Ri])throw ov("root node is forbidden and cannot be sanitized in-place")}}else if(cn instanceof c)pt=Tt("<!---->"),Gt=pt.ownerDocument.importNode(cn,!0),Gt.nodeType===av.element&&Gt.nodeName==="BODY"||Gt.nodeName==="HTML"?pt=Gt:pt.appendChild(Gt);else{if(!he&&!_t&&!x&&cn.indexOf("<")===-1)return S&&ot?S.createHTML(cn):cn;if(pt=Tt(cn),!pt)return he?null:ot?O:""}pt&&j&&Ge(pt.firstChild);const pr=Qt(ct?cn:pt);for(;Gn=pr.nextNode();)en(Gn),Un(Gn),Gn.content instanceof o&&Er(Gn.content);if(ct)return cn;if(he){if(de)for(Rn=B.call(pt.ownerDocument);pt.firstChild;)Rn.appendChild(pt.firstChild);else Rn=pt;return(Pe.shadowroot||Pe.shadowrootmode)&&(Rn=D.call(r,Rn,!0)),Rn}let Sr=x?pt.outerHTML:pt.innerHTML;return x&&Y["!doctype"]&&pt.ownerDocument&&pt.ownerDocument.doctype&&pt.ownerDocument.doctype.name&&Ga($O,pt.ownerDocument.doctype.name)&&(Sr="<!DOCTYPE "+pt.ownerDocument.doctype.name+`>
`+Sr),_t&&X0([ve,ie,ye],Ri=>{Sr=iv(Sr,Ri," ")}),S&&ot?S.createHTML(Sr):Sr},e.setConfig=function(){let cn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};be(cn),U=!0},e.clearConfig=function(){xo=null,U=!1},e.isValidAttribute=function(cn,ze,pt){xo||be({});const Gt=di(cn),Gn=di(ze);return vn(Gt,Gn,pt)},e.addHook=function(cn,ze){typeof ze=="function"&&rv(X[cn],ze)},e.removeHook=function(cn,ze){if(ze!==void 0){const pt=qZ(X[cn],ze);return pt===-1?void 0:WZ(X[cn],pt,1)[0]}return LO(X[cn])},e.removeHooks=function(cn){X[cn]=[]},e.removeAllHooks=function(){X=BO()},e}var jO=ZO();jO.addHook("afterSanitizeAttributes",function(t){t instanceof HTMLAnchorElement&&t.getAttribute("target")===null&&t.setAttribute("target","_blank"),t.getAttribute("target")==="_blank"&&t.setAttribute("rel","noreferrer")});const lv=(t,{allowIframes:e}={allowIframes:!1})=>jO.sanitize(t,{RETURN_TRUSTED_TYPE:!0,ADD_TAGS:e?["iframe"]:void 0,ADD_ATTR:["target"]}),VO=(t,e=!1)=>{const n=document.createElement("div");return n.innerHTML=lv(t,{allowIframes:!0}),n.querySelectorAll(".ql-variableblot").forEach(i=>{const o=i,l=Ng(`${o.dataset.varNamespace??""}.${o.dataset.varName??""}`);o.innerHTML=lv(fj(l))}),e?n.innerText:n.innerHTML},fj=t=>t instanceof Array?t.map(e=>e.name).join(", "):t,Y1=t=>t?{width:`${t}px`,minWidth:"200px",maxWidth:"1000px"}:{},th=class th{constructor(e){this.root=null,this.bubble=null,this._width=null,this._content="",this._footerAction=()=>{},this._footerEnabled=!1,this._previousEnabled=!1,this._footerPreviousLabel="",this._footerActionLabel="",this._completionRate=1,this._draggable=!1,this._footerPreviousCallback=()=>{},this._completionEnabled=!1,this._onClose=()=>{},this._offsetX=0,this._offsetY=0,this._overlayEnabled=!1,this._interfaceLocale=null,this.container=e}set interfaceLocale(e){this._interfaceLocale=e}get interfaceLocale(){return this._interfaceLocale}set draggable(e){this._draggable=e}get draggable(){return this._draggable}set overlayEnabled(e){this._overlayEnabled=e}get overlayEnabled(){return this._overlayEnabled}set width(e){this._width=e}get width(){return this._width}set content(e){this._content=VO(e)}get content(){return this._content}set offsetX(e){this._offsetX=e}set offsetY(e){this._offsetY=e}get offsetX(){return this._offsetX}get offsetY(){return this._offsetY}static set watermarkIcon(e){th._watermarkIcon=e}static get watermarkIcon(){return th._watermarkIcon}static set borderColor(e){th._borderColor=e}static get borderColor(){return th._borderColor}addNextAction(e,n){this._footerEnabled=!0,this._footerAction=n,this._footerActionLabel=e}addPreviousAction(e,n){this._footerEnabled=!0,this._previousEnabled=!0,this._footerPreviousLabel=e,this._footerPreviousCallback=n}setCompletionRate(e){this._completionEnabled=!0,this._completionRate=e}getCompletionRate(){return!this._completionEnabled||this._completionRate==null?null:this._completionRate}set onClose(e){this._onClose=e,this.remove()}get onClose(){return this._onClose}show(){this.bubble||(this.bubble=document.createElement("div")),this.root||(this.container.appendChild(this.bubble),this.root=H_.createRoot(this.bubble))}remove(){this.root&&(this.root.unmount(),this.root=null)}getDefaultProps(){return{onClose:()=>{this.onClose(),this.remove()},content:this.content,width:this.width,draggable:this.draggable}}getFooterProps(){return this._footerEnabled?{handleNextButtonClick:this._footerAction,nextButtonLabel:this._footerActionLabel,handlePreviousButtonClick:this._footerPreviousCallback,showPreviousButton:this._previousEnabled,previousButtonLabel:this._footerPreviousLabel,nextButtonEnabled:!0}:void 0}};th._borderColor=null,th._watermarkIcon=null;let Iu=th;const dj=({handlePreviousButtonClick:t,handleNextButtonClick:e,previousButtonLabel:n,showPreviousButton:r,nextButtonLabel:i,nextButtonEnabled:o=!0})=>pe.jsxs("div",{className:br.footer,children:[Iu.watermarkIcon?pe.jsx("img",{src:Iu.watermarkIcon,className:br.logo}):pe.jsx("div",{className:br.logo,children:pe.jsx(ZZ,{})}),pe.jsxs("div",{className:br.footerButtons,children:[pe.jsxs("div",{style:{display:r?"block":"none"},className:`${br.action} ${br.previous} ${i?"":br.single}`,onClick:t,children:[pe.jsx(jZ,{}),n]}),i&&pe.jsx("div",{className:`
              ${br.action} ${r?br.afterprev:""}
              ${o?"":br["action-item-disabled"]}
            `,onClick:()=>o&&e(),children:i})]})]}),tb=xe.memo(dj),hj=xe.forwardRef(function({onClick:e,fill:n=""},r){return pe.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"ll-editor--icon ll-editor--icon-move",children:[pe.jsx("path",{fill:"none",d:"M0 0h24v24H0z"}),pe.jsx("path",{className:"ll-editor--icon-move fill",style:{fill:n},d:"M18 11V8l4 4-4 4v-3h-5v5h3l-4 4-4-4h3v-5H6v3l-4-4 4-4v3h5V6H8l4-4 4 4h-3v5z"})]})}),uv=xe.forwardRef(function(e,n){const r=xe.useRef(null),i=xe.useRef(0),o=xe.useRef(0),l=xe.useCallback(c=>{if(typeof n=="function")throw new Error("This component is not compatible with functions as refs");if(!n?.current)return;c.preventDefault();const f=n.current.getBoundingClientRect(),g=window?.getComputedStyle(n.current),[y,h]=["top","left"].map(O=>parseInt(g?.getPropertyValue(O)?.replace("px",""))??0),p=c.type==="touchmove"&&c.targetTouches[0]?c.targetTouches[0]:null,E=p?p.screenX:c.screenX,A=p?p.screenY:c.screenY,_=i.current?E-i.current:0,I=o.current?A-o.current:0,C=f.left+_<=0||f.right+_>=window.innerWidth,T=f.top+I<=0||f.bottom+I>=window.innerHeight?y:y+I,S=C?h:h+_;n.current.style.left=`${S}px`,n.current.style.top=`${T}px`,i.current=E,o.current=A},[n]);return xe.useEffect(()=>{function c(){i.current=0,o.current=0,window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",c),window.removeEventListener("touchmove",l),window.removeEventListener("touchend",c)}function f(g){g.preventDefault(),window.addEventListener("mousemove",l),window.addEventListener("mouseup",c),window.addEventListener("touchmove",l,{passive:!1}),window.addEventListener("touchend",c,{passive:!0})}r.current&&(r.current.addEventListener("mousedown",f),r.current.addEventListener("touchstart",f,{passive:!1}))},[l]),pe.jsx("div",{className:br.moveable,ref:r,children:pe.jsx(hj,{})})}),Kh=xe.forwardRef(function({onClick:e,fill:n=""},r){return pe.jsx("svg",{ref:r,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",onClick:e,className:"ll-editor--icon ll-editor--icon-cross",children:pe.jsx("polygon",{style:{fill:n},className:"ll-editor--icon-fill fill",points:"15.71 5.71 14.29 4.29 10 8.59 5.71 4.29 4.29 5.71 8.59 10 4.29 14.29 5.71 15.71 10 11.41 14.29 15.71 15.71 14.29 11.41 10 15.71 5.71"})})}),pj=({content:t})=>pe.jsx("div",{className:br.content,children:pe.jsx("div",{dangerouslySetInnerHTML:{__html:lv(t,{allowIframes:!0})}})}),cv=xe.memo(pj),nb=({completionRate:t})=>pe.jsx("div",{className:br.completion,children:pe.jsx("span",{style:{width:Math.ceil(t*100)+"%"}})}),gj=({content:t,width:e,onClose:n,footerProps:r,draggable:i,completionRate:o,overlayEnabled:l,offset:c})=>{const f=xe.useRef(null);return pe.jsx("div",{className:`${l?br["modal-overlay"]:""} ${br["center-bubble"]}`,children:pe.jsxs("div",{ref:f,className:`${br.bubble}`,style:{...Y1(e),top:c.y,left:c.x},children:[pe.jsxs("div",{className:br["icons-box"],children:[i&&pe.jsx(uv,{ref:f}),pe.jsx("div",{className:br.cross,onClick:n,children:pe.jsx(Kh,{})})]}),pe.jsx(cv,{content:t}),o!=null&&pe.jsx(nb,{completionRate:o}),r&&pe.jsx(tb,{...r})]})})};class Q1 extends Iu{constructor(){super(...arguments),this.show=()=>{super.show(),this.root?.render(pe.jsx(gj,{...super.getDefaultProps(),completionRate:this.getCompletionRate(),footerProps:super.getFooterProps(),overlayEnabled:this.overlayEnabled,offset:{x:this.offsetX,y:this.offsetY}}))}}}const mj=({onClose:t,imageLink:e})=>{const n=xe.useRef(null);return xe.useEffect(()=>{!n.current||!e||(n.current.src=e)},[e]),pe.jsxs("div",{className:`${br["modal-overlay"]} ${br["image-bubble"]}`,children:[pe.jsx("div",{className:br.cross,onClick:t,children:pe.jsx(Kh,{})}),pe.jsx("img",{ref:n,src:""})]})};class yj{constructor(e,n){this.imageLink="",this.root=null,this.bubble=null,this.show=()=>{this.bubble||(this.bubble=document.createElement("div")),this.root||(this.container.appendChild(this.bubble),this.root=H_.createRoot(this.bubble)),this.root.render(pe.jsx(mj,{onClose:this.hide,imageLink:this.imageLink}))},this.hide=()=>{this.root&&(this.root.unmount(),this.root=null)},this.container=e,this.imageLink=n}}var X1={exports:{}};/*! For license information please see dash.all.min.js.LICENSE.txt */var zO;function vj(){return zO||(zO=1,(function(t,e){(function(n,r){t.exports=r()})(self,(function(){return(function(){var n={4593:function(l,c){var f,g,y,h,p,E=function(I){for(var C=[],v=0;v<I.length;++v){var T=I.charCodeAt(v);T<128?C.push(T):T<2048?(C.push(192|T>>6),C.push(128|63&T)):T<65536?(C.push(224|T>>12),C.push(128|63&T>>6),C.push(128|63&T)):(C.push(240|T>>18),C.push(128|63&T>>12),C.push(128|63&T>>6),C.push(128|63&T))}return C},A=function(I){for(var C=[],v=0;v<I.length;){var T=I[v++];T<128||(T<224?(T=(31&T)<<6,T|=63&I[v++]):T<240?(T=(15&T)<<12,T|=(63&I[v++])<<6,T|=63&I[v++]):(T=(7&T)<<18,T|=(63&I[v++])<<12,T|=(63&I[v++])<<6,T|=63&I[v++])),C.push(String.fromCharCode(T))}return C.join("")},_={};f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=function(I){for(var C=0,v=[],T=0|I.length/3;0<T--;){var S=(I[C]<<16)+(I[C+1]<<8)+I[C+2];C+=3,v.push(f.charAt(63&S>>18)),v.push(f.charAt(63&S>>12)),v.push(f.charAt(63&S>>6)),v.push(f.charAt(63&S))}return I.length-C==2?(S=(I[C]<<16)+(I[C+1]<<8),v.push(f.charAt(63&S>>18)),v.push(f.charAt(63&S>>12)),v.push(f.charAt(63&S>>6)),v.push("=")):I.length-C==1&&(S=I[C]<<16,v.push(f.charAt(63&S>>18)),v.push(f.charAt(63&S>>12)),v.push("==")),v.join("")},y=(function(){for(var I=[],C=0;C<f.length;++C)I[f.charCodeAt(C)]=C;return I[61]=0,I})(),h=function(I){for(var C=0,v=[],T=0|I.length/4;0<T--;){var S=(y[I.charCodeAt(C)]<<18)+(y[I.charCodeAt(C+1)]<<12)+(y[I.charCodeAt(C+2)]<<6)+y[I.charCodeAt(C+3)];v.push(255&S>>16),v.push(255&S>>8),v.push(255&S),C+=4}return v&&(I.charAt(C-2)=="="?(v.pop(),v.pop()):I.charAt(C-1)=="="&&v.pop()),v},p={encode:function(I){for(var C=[],v=0;v<I.length;++v)C.push(I.charCodeAt(v));return C},decode:function(I){for(var C=0;C<s.length;++C)a[C]=String.fromCharCode(a[C]);return a.join("")}},_.decodeArray=function(I){var C=h(I);return new Uint8Array(C)},_.encodeASCII=function(I){var C=p.encode(I);return g(C)},_.decodeASCII=function(I){var C=h(I);return p.decode(C)},_.encode=function(I){var C=E(I);return g(C)},_.decode=function(I){var C=h(I);return A(C)},c.decode=_.decode,c.decodeArray=_.decodeArray,c.encode=_.encode,c.encodeASCII=_.encodeASCII},452:function(l,c){(function(f){var g={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},y=function(D){var X=D;return g.hasOwnProperty(D)&&(X=g[D]),String.fromCharCode(X)},h=15,p=32,E={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},A={17:2,18:4,21:6,22:8,23:10,19:13,20:15},_={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},I={25:2,26:4,29:6,30:8,31:10,27:13,28:15},C=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],v={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(D){this.time=D},log:function(D,X){var ve=this.verboseFilter[D];this.verboseLevel>=ve&&console.log(this.time+" ["+D+"] "+X)}},T=function(D){for(var X=[],ve=0;ve<D.length;ve++)X.push(D[ve].toString(16));return X},S=function(D,X,ve,ie,ye){this.foreground=D||"white",this.underline=X||!1,this.italics=ve||!1,this.background=ie||"black",this.flash=ye||!1};S.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(D){for(var X=["foreground","underline","italics","background","flash"],ve=0;ve<X.length;ve++){var ie=X[ve];D.hasOwnProperty(ie)&&(this[ie]=D[ie])}},isDefault:function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},equals:function(D){return this.foreground===D.foreground&&this.underline===D.underline&&this.italics===D.italics&&this.background===D.background&&this.flash===D.flash},copy:function(D){this.foreground=D.foreground,this.underline=D.underline,this.italics=D.italics,this.background=D.background,this.flash=D.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var O=function(D,X,ve,ie,ye,Ne){this.uchar=D||" ",this.penState=new S(X,ve,ie,ye,Ne)};O.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(D,X){this.uchar=D,this.penState.copy(X)},setPenState:function(D){this.penState.copy(D)},equals:function(D){return this.uchar===D.uchar&&this.penState.equals(D.penState)},copy:function(D){this.uchar=D.uchar,this.penState.copy(D.penState)},isEmpty:function(){return this.uchar===" "&&this.penState.isDefault()}};var $=function(){this.chars=[];for(var D=0;D<p;D++)this.chars.push(new O);this.pos=0,this.currPenState=new S};$.prototype={equals:function(D){for(var X=!0,ve=0;ve<p;ve++)if(!this.chars[ve].equals(D.chars[ve])){X=!1;break}return X},copy:function(D){for(var X=0;X<p;X++)this.chars[X].copy(D.chars[X])},isEmpty:function(){for(var D=!0,X=0;X<p;X++)if(!this.chars[X].isEmpty()){D=!1;break}return D},setCursor:function(D){this.pos!==D&&(this.pos=D),this.pos<0?(v.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>p&&(v.log("ERROR","Too large cursor position "+this.pos),this.pos=p)},moveCursor:function(D){var X=this.pos+D;if(D>1)for(var ve=this.pos+1;ve<X+1;ve++)this.chars[ve].setPenState(this.currPenState);this.setCursor(X)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(D){D>=144&&this.backSpace();var X=y(D);this.pos>=p?v.log("ERROR","Cannot insert "+D.toString(16)+" ("+X+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(X,this.currPenState),this.moveCursor(1))},clearFromPos:function(D){var X;for(X=D;X<p;X++)this.chars[X].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var D=[],X=!0,ve=0;ve<p;ve++){var ie=this.chars[ve].uchar;ie!==" "&&(X=!1),D.push(ie)}return X?"":D.join("")},setPenStyles:function(D){this.currPenState.setStyles(D),this.chars[this.pos].setPenState(this.currPenState)}};var V=function(){this.rows=[];for(var D=0;D<h;D++)this.rows.push(new $);this.currRow=14,this.nrRollUpRows=null,this.reset()};V.prototype={reset:function(){for(var D=0;D<h;D++)this.rows[D].clear();this.currRow=14},equals:function(D){for(var X=!0,ve=0;ve<h;ve++)if(!this.rows[ve].equals(D.rows[ve])){X=!1;break}return X},copy:function(D){for(var X=0;X<h;X++)this.rows[X].copy(D.rows[X])},isEmpty:function(){for(var D=!0,X=0;X<h;X++)if(!this.rows[X].isEmpty()){D=!1;break}return D},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(D){this.rows[this.currRow].insertChar(D)},setPen:function(D){this.rows[this.currRow].setPenStyles(D)},moveCursor:function(D){this.rows[this.currRow].moveCursor(D)},setCursor:function(D){v.log("INFO","setCursor: "+D),this.rows[this.currRow].setCursor(D)},setPAC:function(D){v.log("INFO","pacData = "+JSON.stringify(D));var X=D.row-1;this.nrRollUpRows&&X<this.nrRollUpRows-1&&(X=this.nrRollUpRows-1),this.currRow=X;var ve=this.rows[this.currRow];if(D.indent!==null){var ie=D.indent,ye=Math.max(ie-1,0);ve.setCursor(D.indent),D.color=ve.chars[ye].penState.foreground}var Ne={foreground:D.color,underline:D.underline,italics:D.italics,background:"black",flash:!1};this.setPen(Ne)},setBkgData:function(D){v.log("INFO","bkgData = "+JSON.stringify(D)),this.backSpace(),this.setPen(D),this.insertChar(32)},setRollUpRows:function(D){this.nrRollUpRows=D},rollUp:function(){if(this.nrRollUpRows!==null){v.log("TEXT",this.getDisplayText());var D=this.currRow+1-this.nrRollUpRows,X=this.rows.splice(D,1)[0];X.clear(),this.rows.splice(this.currRow,0,X),v.log("INFO","Rolling up")}else v.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(D){D=D||!1;for(var X=[],ve="",ie=-1,ye=0;ye<h;ye++){var Ne=this.rows[ye].getTextString();Ne&&(ie=ye+1,D?X.push("Row "+ie+': "'+Ne+'"'):X.push(Ne.trim()))}return X.length>0&&(ve=D?"["+X.join(" | ")+"]":X.join(`
`)),ve},getTextAndFormat:function(){return this.rows}};var B=function(D,X){this.chNr=D,this.outputFilter=X,this.mode=null,this.verbose=0,this.displayedMemory=new V,this.nonDisplayedMemory=new V,this.lastOutputScreen=new V,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};B.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(D){this.outputFilter=D},setPAC:function(D){this.writeScreen.setPAC(D)},setBkgData:function(D){this.writeScreen.setBkgData(D)},setMode:function(D){D!==this.mode&&(this.mode=D,v.log("INFO","MODE="+D),this.mode=="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=D)},insertChars:function(D){for(var X=0;X<D.length;X++)this.writeScreen.insertChar(D[X]);var ve=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";v.log("INFO",ve+": "+this.writeScreen.getDisplayText(!0)),this.mode!=="MODE_PAINT-ON"&&this.mode!=="MODE_ROLL-UP"||(v.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){v.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){v.log("INFO","BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){v.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(D){v.log("INFO","RU("+D+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(D)},cc_FON:function(){v.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){v.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){v.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){v.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){v.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){v.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){v.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(v.log("INFO","EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var D=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=D,this.writeScreen=this.nonDisplayedMemory,v.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(D){v.log("INFO","TO("+D+") - Tab Offset"),this.writeScreen.moveCursor(D)},cc_MIDROW:function(D){var X={flash:!1};if(X.underline=D%2==1,X.italics=D>=46,X.italics)X.foreground="white";else{var ve=Math.floor(D/2)-16;X.foreground=["white","green","blue","cyan","red","yellow","magenta"][ve]}v.log("INFO","MIDROW: "+JSON.stringify(X)),this.writeScreen.setPen(X)},outputDataUpdate:function(){var D=v.time;D!==null&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(D,this.displayedMemory),this.cueStartTime!==null||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,D,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:D):this.cueStartTime=D,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(D){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,D,this.displayedMemory),this.cueStartTime=D))}};var ne=function(D,X,ve){this.field=D||1,this.outputs=[X,ve],this.channels=[new B(1,X),new B(2,ve)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};ne.prototype={getHandler:function(D){return this.channels[D].getHandler()},setHandler:function(D,X){this.channels[D].setHandler(X)},addData:function(D,X){var ve,ie,ye,Ne=!1;this.lastTime=D,v.setTime(D);for(var Me=0;Me<X.length;Me+=2)ie=127&X[Me],ye=127&X[Me+1],ie>=16&&ie<=31&&ie===this.lastCmdA&&ye===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,v.log("DEBUG","Repeated command ("+T([ie,ye])+") is dropped")):ie!==0||ye!==0?(v.log("DATA","["+T([X[Me],X[Me+1]])+"] -> ("+T([ie,ye])+")"),(ve=this.parseCmd(ie,ye))||(ve=this.parseMidrow(ie,ye)),ve||(ve=this.parsePAC(ie,ye)),ve||(ve=this.parseBackgroundAttributes(ie,ye)),ve||(Ne=this.parseChars(ie,ye))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(Ne):v.log("WARNING","No channel found yet. TEXT-MODE?")),ve?this.dataCounters.cmd+=2:Ne?this.dataCounters.char+=2:(this.dataCounters.other+=2,v.log("WARNING","Couldn't parse cleaned data "+T([ie,ye])+" orig: "+T([X[Me],X[Me+1]])))):this.dataCounters.padding+=2},parseCmd:function(D,X){var ve;if(!((D===20||D===21||D===28||D===29)&&32<=X&&X<=47||(D===23||D===31)&&33<=X&&X<=35))return!1;ve=D===20||D===21||D===23?1:2;var ie=this.channels[ve-1];return D===20||D===21||D===28||D===29?X===32?ie.cc_RCL():X===33?ie.cc_BS():X===34?ie.cc_AOF():X===35?ie.cc_AON():X===36?ie.cc_DER():X===37?ie.cc_RU(2):X===38?ie.cc_RU(3):X===39?ie.cc_RU(4):X===40?ie.cc_FON():X===41?ie.cc_RDC():X===42?ie.cc_TR():X===43?ie.cc_RTD():X===44?ie.cc_EDM():X===45?ie.cc_CR():X===46?ie.cc_ENM():X===47&&ie.cc_EOC():ie.cc_TO(X-32),this.lastCmdA=D,this.lastCmdB=X,this.currChNr=ve,!0},parseMidrow:function(D,X){var ve=null;if((D===17||D===25)&&32<=X&&X<=47){if((ve=D===17?1:2)!==this.currChNr)return v.log("ERROR","Mismatch channel in midrow parsing"),!1;var ie=this.channels[ve-1];return ie.insertChars([32]),ie.cc_MIDROW(X),v.log("DEBUG","MIDROW ("+T([D,X])+")"),this.lastCmdA=D,this.lastCmdB=X,!0}return!1},parsePAC:function(D,X){var ve,ie;if(!((17<=D&&D<=23||25<=D&&D<=31)&&64<=X&&X<=127||(D===16||D===24)&&64<=X&&X<=95))return!1;ve=D<=23?1:2,ie=64<=X&&X<=95?ve===1?E[D]:_[D]:ve===1?A[D]:I[D];var ye=this.interpretPAC(ie,X);return this.channels[ve-1].setPAC(ye),this.lastCmdA=D,this.lastCmdB=X,this.currChNr=ve,!0},interpretPAC:function(D,X){var ve,ie={color:null,italics:!1,indent:null,underline:!1,row:D};return ve=X>95?X-96:X-64,ie.underline=(1&ve)==1,ve<=13?ie.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(ve/2)]:ve<=15?(ie.italics=!0,ie.color="white"):ie.indent=4*Math.floor((ve-16)/2),ie},parseChars:function(D,X){var ve=null,ie=null,ye=null;if(D>=25?(ve=2,ye=D-8):(ve=1,ye=D),17<=ye&&ye<=19){var Ne;Ne=ye===17?X+80:ye===18?X+112:X+144,v.log("INFO","Special char '"+y(Ne)+"' in channel "+ve),ie=[Ne],this.lastCmdA=D,this.lastCmdB=X}else 32<=D&&D<=127&&(ie=X===0?[D]:[D,X],this.lastCmdA=null,this.lastCmdB=null);if(ie){var Me=T(ie);v.log("DEBUG","Char codes =  "+Me.join(","))}return ie},parseBackgroundAttributes:function(D,X){var ve,ie,ye;return((D===16||D===24)&&32<=X&&X<=47||(D===23||D===31)&&45<=X&&X<=47)&&(ve={},D===16||D===24?(ie=Math.floor((X-32)/2),ve.background=C[ie],X%2==1&&(ve.background=ve.background+"_semi")):X===45?ve.background="transparent":(ve.foreground="black",X===47&&(ve.underline=!0)),ye=D<24?1:2,this.channels[ye-1].setBkgData(ve),this.lastCmdA=D,this.lastCmdB=X,!0)},reset:function(){for(var D=0;D<this.channels.length;D++)this.channels[D]&&this.channels[D].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(D){for(var X=0;X<this.channels.length;X++)this.channels[X]&&this.channels[X].cueSplitAtTime(D)}},f.logger=v,f.PenState=S,f.CaptionScreen=V,f.Cea608Parser=ne,f.findCea608Nalus=function(D,X,ve){for(var ie=0,ye=X,Ne=[],Me=function(Y,Ee,Pe,Xe){if(Y!==4||Ee<8)return null;var Ze=Pe.getUint8(Xe),at=Pe.getUint16(Xe+1),jt=Pe.getUint32(Xe+3),xt=Pe.getUint8(Xe+7);return Ze==181&&at==49&&jt==1195456820&&xt==3};ye<X+ve;){if(ie=D.getUint32(ye),(31&D.getUint8(ye+4))==6)for(var oe=ye+5,Ce=-1;oe<ye+4+ie-1;){Ce=0;for(var Ye=255;Ye===255;)Ce+=Ye=D.getUint8(oe),oe++;var et=0;for(Ye=255;Ye===255;)et+=Ye=D.getUint8(oe),oe++;Me(Ce,et,D,oe)&&Ne.push([oe,et]),oe+=et}ye+=ie+4}return Ne},f.extractCea608DataFromRange=function(D,X){var ve=X[0],ie=[[],[]];ve+=8;var ye=31&D.getUint8(ve);ve+=2;for(var Ne=0;Ne<ye;Ne++){var Me=D.getUint8(ve),oe=4&Me,Ce=3&Me;ve++;var Ye=D.getUint8(ve);ve++;var et=D.getUint8(ve);ve++,oe&&(127&Ye)+(127&et)!=0&&(Ce===0?(ie[0].push(Ye),ie[0].push(et)):Ce===1&&(ie[1].push(Ye),ie[1].push(et)))}return ie}})(c)},8416:function(l,c,f){var g=f(1139),y=f(5448),h=f(6398),p=f(2032),E=(f(5530),typeof window<"u"&&window||f.g),A=E.dashjs;A||(A=E.dashjs={}),A.MediaPlayer=g.Z,A.FactoryMaker=y.Z,A.Debug=h.Z,A.Version=(0,p.e)()},6398:function(l,c,f){var g=f(5595),y=f(8512),h=f(5448),p=1,E=2,A=3,_=4,I=5;function C(T){T=T||{};var S,O,$,V,B=this.context,ne=(0,g.Z)(B).getInstance(),D=T.settings,X=[];function ve(Ye){return Ye&&Ye.bind?Ye.bind(window.console):window.console.log.bind(window.console)}function ie(){for(var Ye=arguments.length,et=new Array(Ye),Y=0;Y<Ye;Y++)et[Y]=arguments[Y];Ce.apply(void 0,[p,this].concat(et))}function ye(){for(var Ye=arguments.length,et=new Array(Ye),Y=0;Y<Ye;Y++)et[Y]=arguments[Y];Ce.apply(void 0,[E,this].concat(et))}function Ne(){for(var Ye=arguments.length,et=new Array(Ye),Y=0;Y<Ye;Y++)et[Y]=arguments[Y];Ce.apply(void 0,[A,this].concat(et))}function Me(){for(var Ye=arguments.length,et=new Array(Ye),Y=0;Y<Ye;Y++)et[Y]=arguments[Y];Ce.apply(void 0,[_,this].concat(et))}function oe(){for(var Ye=arguments.length,et=new Array(Ye),Y=0;Y<Ye;Y++)et[Y]=arguments[Y];Ce.apply(void 0,[I,this].concat(et))}function Ce(Ye,et){var Y="",Ee=null;O&&(Ee=new Date().getTime(),Y+="["+(Ee-V)+"]"),$&&et&&et.getClassName&&(Y+="["+et.getClassName()+"]",et.getType&&(Y+="["+et.getType()+"]")),Y.length>0&&(Y+=" ");for(var Pe=arguments.length,Xe=new Array(Pe>2?Pe-2:0),Ze=2;Ze<Pe;Ze++)Xe[Ze-2]=arguments[Ze];Array.apply(null,Xe).forEach((function(at){Y+=at+" "})),X[Ye]&&D&&D.get().debug.logLevel>=Ye&&X[Ye](Y),D&&D.get().debug.dispatchEvent&&ne.trigger(y.Z.LOG,{message:Y,level:Ye})}return S={getLogger:function(Ye){return{fatal:ie.bind(Ye),error:ye.bind(Ye),warn:Ne.bind(Ye),info:Me.bind(Ye),debug:oe.bind(Ye)}},setLogTimestampVisible:function(Ye){O=Ye},setCalleeNameVisible:function(Ye){$=Ye}},O=!0,$=!0,V=new Date().getTime(),typeof window<"u"&&window.console&&(X[p]=ve(window.console.error),X[E]=ve(window.console.error),X[A]=ve(window.console.warn),X[_]=ve(window.console.info),X[I]=ve(window.console.debug)),S}C.__dashjs_factory_name="Debug";var v=h.Z.getSingletonFactory(C);v.LOG_LEVEL_NONE=0,v.LOG_LEVEL_FATAL=p,v.LOG_LEVEL_ERROR=E,v.LOG_LEVEL_WARNING=A,v.LOG_LEVEL_INFO=_,v.LOG_LEVEL_DEBUG=I,h.Z.updateSingletonFactory(C.__dashjs_factory_name,v),c.Z=v},5595:function(l,c,f){var g=f(5448),y=f(8825);function h(){var E={};function A(I,C,v){var T=-1;return E[I]&&E[I].some((function(S,O){if(S&&S.callback===C&&(!v||v===S.scope))return T=O,!0})),T}var _={on:function(I,C,v){var T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(!I)throw new Error("event type cannot be null or undefined");if(!C||typeof C!="function")throw new Error("listener must be a function: "+C);var S=T.priority||0;if(!(A(I,C,v)>=0)){E[I]=E[I]||[];var O={callback:C,scope:v,priority:S};v&&v.getStreamId&&(O.streamId=v.getStreamId()),v&&v.getType&&(O.mediaType=v.getType()),T&&T.mode&&(O.mode=T.mode);var $=E[I].some((function(V,B){if(V&&S>V.priority)return E[I].splice(B,0,O),!0}));$||E[I].push(O)}},off:function(I,C,v){if(I&&C&&E[I]){var T=A(I,C,v);T<0||(E[I][T]=null)}},trigger:function(I){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(I&&E[I]){if((C=C||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");C.type=I,v.streamId&&(C.streamId=v.streamId),v.mediaType&&(C.mediaType=v.mediaType),E[I].filter((function(T){return!(!T||v.streamId&&T.streamId&&T.streamId!==v.streamId||v.mediaType&&T.mediaType&&T.mediaType!==v.mediaType||v.mode&&T.mode&&T.mode!==v.mode||!T.mode&&v.mode&&v.mode===y.Z.EVENT_MODE_ON_RECEIVE)})).forEach((function(T){return T&&T.callback.call(T.scope,C)}))}},reset:function(){E={}}};return _}h.__dashjs_factory_name="EventBus";var p=g.Z.getSingletonFactory(h);p.EVENT_PRIORITY_LOW=0,p.EVENT_PRIORITY_HIGH=5e3,g.Z.updateSingletonFactory(h.__dashjs_factory_name,p),c.Z=p},5448:function(l,c){var f=(function(){var g,y=[],h={},p={};function E(C,v){for(var T in y){var S=y[T];if(S.context===C&&S.name===v)return S.instance}return null}function A(C,v){return v[C]}function _(C,v,T){C in T&&(T[C]=v)}function I(C,v,T){var S,O=C.__dashjs_factory_name,$=v[O];if($){var V=$.instance;if(!$.override)return V.apply({context:v,factory:g},T);for(var B in S=C.apply({context:v},T),V=V.apply({context:v,factory:g,parent:S},T))S.hasOwnProperty(B)&&(S[B]=V[B])}else S=C.apply({context:v},T);return S.getClassName=function(){return O},S}return g={extend:function(C,v,T,S){!S[C]&&v&&(S[C]={instance:v,override:T})},getSingletonInstance:E,setSingletonInstance:function(C,v,T){for(var S in y){var O=y[S];if(O.context===C&&O.name===v)return void(y[S].instance=T)}y.push({name:v,context:C,instance:T})},deleteSingletonInstances:function(C){y=y.filter((function(v){return v.context!==C}))},getSingletonFactory:function(C){var v=A(C.__dashjs_factory_name,h);return v||(v=function(T){var S;return T===void 0&&(T={}),{getInstance:function(){return S||(S=E(T,C.__dashjs_factory_name)),S||(S=I(C,T,arguments),y.push({name:C.__dashjs_factory_name,context:T,instance:S})),S}}},h[C.__dashjs_factory_name]=v),v},getSingletonFactoryByName:function(C){return A(C,h)},updateSingletonFactory:function(C,v){_(C,v,h)},getClassFactory:function(C){var v=A(C.__dashjs_factory_name,p);return v||(v=function(T){return T===void 0&&(T={}),{create:function(){return I(C,T,arguments)}}},p[C.__dashjs_factory_name]=v),v},getClassFactoryByName:function(C){return A(C,p)},updateClassFactory:function(C,v){_(C,v,p)}},g})();c.Z=f},1264:function(l,c,f){var g=f(5448),y=f(703),h=f(6398),p=f(3393),E=f(7855),A=f(5595),_=f(8512);function I(S){return I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},I(S)}function C(S,O,$){return O in S?Object.defineProperty(S,O,{value:$,enumerable:!0,configurable:!0,writable:!0}):S[O]=$,S}function v(){var S,O,$=this.context,V=(0,A.Z)($).getInstance(),B={"streaming.delay.liveDelay":_.Z.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":_.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":_.Z.SETTING_UPDATED_CATCHUP_ENABLED,"streaming.liveCatchup.playbackRate.min":_.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,"streaming.liveCatchup.playbackRate.max":_.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX},ne={debug:{logLevel:h.Z.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,liveUpdateTimeThresholdInMilliseconds:0,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,applyContentSteering:!0,eventControllerRefreshDelay:100,enableManifestDurationMismatchFix:!0,parseInbandPrft:!1,enableManifestTimescaleMismatchFix:!1,capabilities:{filterUnsupportedEssentialProperties:!0,useMediaCapabilitiesApi:!1},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:!0,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,stableBufferTime:12,longFormContentDurationThreshold:600,stallThreshold:.3,useAppendWindow:!0,setStallState:!0,avoidCurrentTimeRangePruning:!1,useChangeTypeForTrackSwitch:!0,mediaSourceDurationInfinity:!0,resetSourceBuffersForTrackSwitch:!1},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0,dispatchForManualRendering:!1,extendSegmentedCues:!0,imsc:{displayForcedOnlyMode:!1,enableRollUp:!0},webvtt:{customRenderingEnabled:!1}},liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN},playbackBufferMin:.5,enabled:null,mode:p.Z.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},saveLastMediaSettingsForCurrentStreamingSession:!0,cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:p.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:p.Z.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:p.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY,fragmentRequestTimeout:2e4,fragmentRequestProgressTimeout:-1,manifestRequestTimeout:1e4,retryIntervals:(S={},C(S,E.w.MPD_TYPE,500),C(S,E.w.XLINK_EXPANSION_TYPE,500),C(S,E.w.MEDIA_SEGMENT_TYPE,1e3),C(S,E.w.INIT_SEGMENT_TYPE,1e3),C(S,E.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),C(S,E.w.INDEX_SEGMENT_TYPE,1e3),C(S,E.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),C(S,E.w.LICENSE,1e3),C(S,E.w.OTHER_TYPE,1e3),C(S,"lowLatencyReductionFactor",10),S),retryAttempts:(O={},C(O,E.w.MPD_TYPE,3),C(O,E.w.XLINK_EXPANSION_TYPE,1),C(O,E.w.MEDIA_SEGMENT_TYPE,3),C(O,E.w.INIT_SEGMENT_TYPE,3),C(O,E.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),C(O,E.w.INDEX_SEGMENT_TYPE,3),C(O,E.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),C(O,E.w.LICENSE,3),C(O,E.w.OTHER_TYPE,3),C(O,"lowLatencyMultiplyFactor",5),O),abr:{movingAverageMethod:p.Z.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:p.Z.ABR_STRATEGY_DYNAMIC,additionalAbrRules:{insufficientBufferRule:!0,switchHistoryRule:!0,droppedFramesRule:!0,abandonRequestsRule:!0},abrRulesParameters:{abandonRequestsRule:{graceTimeThreshold:500,abandonMultiplier:1.8,minLengthToAverage:5}},bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:p.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:p.Z.CMCD_MODE_QUERY,enabledKeys:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"]},cmsd:{enabled:!1,abr:{applyMb:!1,etpWeightRatio:0}}},errors:{recoverAttempts:{mediaErrorDecode:5}}},D=y.Z.clone(ne);function X(ve,ie,ye){for(var Ne in ve)ve.hasOwnProperty(Ne)&&(ie.hasOwnProperty(Ne)?I(ve[Ne])!=="object"||ve[Ne]instanceof Array||ve[Ne]===null?(ie[Ne]=y.Z.clone(ve[Ne]),B[ye+Ne]&&V.trigger(B[ye+Ne])):X(ve[Ne],ie[Ne],ye.slice()+Ne+"."):console.error("Settings parameter "+ye+Ne+" is not supported"))}return{get:function(){return D},update:function(ve){I(ve)==="object"&&X(ve,D,"")},reset:function(){D=y.Z.clone(ne)}}}v.__dashjs_factory_name="Settings";var T=g.Z.getSingletonFactory(v);c.Z=T},703:function(l,c,f){var g=f(3875),y=f.n(g),h=f(1067);function p(_){return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},p(_)}function E(_,I){for(var C=0;C<I.length;C++){var v=I[C];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(_,v.key,v)}}var A=(function(){function _(){(function(v,T){if(!(v instanceof T))throw new TypeError("Cannot call a class as a function")})(this,_)}var I,C;return I=_,C=[{key:"mixin",value:function(v,T,S){var O,$={};if(v)for(var V in T)T.hasOwnProperty(V)&&(O=T[V],V in v&&(v[V]===O||V in $&&$[V]===O)||(p(v[V])==="object"&&v[V]!==null?v[V]=_.mixin(v[V],O,S):v[V]=S(O)));return v}},{key:"clone",value:function(v){if(!v||p(v)!=="object")return v;var T;if(v instanceof Array){T=[];for(var S=0,O=v.length;S<O;++S)S in v&&T.push(_.clone(v[S]))}else T={};return _.mixin(T,v,_.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(v,T){try{if(!T||T.length===0)return v;var S=new URL(v);return T.forEach((function(O){O.key&&O.value&&S.searchParams.set(O.key,O.value)})),S.href}catch{return v}}},{key:"parseHttpHeaders",value:function(v){var T={};if(!v)return T;for(var S=v.trim().split(`\r
`),O=0,$=S.length;O<$;O++){var V=S[O],B=V.indexOf(": ");B>0&&(T[V.substring(0,B)]=V.substring(B+2))}return T}},{key:"generateUuid",value:function(){var v=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(T){var S=(v+16*Math.random())%16|0;return v=Math.floor(v/16),(T=="x"?S:3&S|8).toString(16)}))}},{key:"generateHashCode",value:function(v){var T=0;if(v.length===0)return T;for(var S=0;S<v.length;S++)T=(T<<5)-T+v.charCodeAt(S),T|=0;return T}},{key:"getRelativeUrl",value:function(v,T){try{var S=new URL(v),O=new URL(T);if(S.protocol=O.protocol,S.origin!==O.origin)return T;var $=y().relative(S.pathname.substr(0,S.pathname.lastIndexOf("/")),O.pathname.substr(0,O.pathname.lastIndexOf("/"))),V=$.length===0?1:0;return $+=O.pathname.substr(O.pathname.lastIndexOf("/")+V,O.pathname.length-1),O.pathname.length<$.length?O.pathname:$}catch{return T}}},{key:"parseUserAgent",value:function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{var T=v===null&&typeof navigator<"u"?navigator.userAgent.toLowerCase():"";return(0,h.UAParser)(T)}catch{return{}}}},{key:"stringHasProtocol",value:function(v){return/(http(s?)):\/\//i.test(v)}}],C&&E(I,C),_})();c.Z=A},2032:function(l,c,f){function g(){return"4.7.4"}f.d(c,{e:function(){return g}})},2230:function(l,c){function f(y,h){for(var p=0;p<h.length;p++){var E=h[p];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(y,E.key,E)}}var g=(function(){function y(){(function(E,A){if(!(E instanceof A))throw new TypeError("Cannot call a class as a function")})(this,y)}var h,p;return h=y,(p=[{key:"extend",value:function(E,A){if(E){var _=!!A&&A.override,I=!!A&&A.publicOnly;for(var C in E)!E.hasOwnProperty(C)||this[C]&&!_||I&&E[C].indexOf("public_")===-1||(this[C]=E[C])}}}])&&f(h.prototype,p),y})();c.Z=g},4351:function(l,c,f){function g(A){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},g(A)}function y(A,_){return y=Object.setPrototypeOf||function(I,C){return I.__proto__=C,I},y(A,_)}function h(A,_){return!_||g(_)!=="object"&&typeof _!="function"?(function(I){if(I===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I})(A):_}function p(A){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)},p(A)}var E=(function(A){(function(T,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(S&&S.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),S&&y(T,S)})(v,A);var _,I,C=(_=v,I=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}})(),function(){var T,S=p(_);if(I){var O=p(this).constructor;T=Reflect.construct(S,arguments,O)}else T=S.apply(this,arguments);return h(this,T)});function v(){var T;return(function(S,O){if(!(S instanceof O))throw new TypeError("Cannot call a class as a function")})(this,v),(T=C.call(this)).ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",T.BUFFERING_COMPLETED="bufferingCompleted",T.BUFFER_CLEARED="bufferCleared",T.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",T.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",T.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",T.CMSD_STATIC_HEADER="cmsdStaticHeader",T.CURRENT_TRACK_CHANGED="currentTrackChanged",T.DATA_UPDATE_COMPLETED="dataUpdateCompleted",T.INBAND_EVENTS="inbandEvents",T.INITIAL_STREAM_SWITCH="initialStreamSwitch",T.INIT_FRAGMENT_LOADED="initFragmentLoaded",T.INIT_FRAGMENT_NEEDED="initFragmentNeeded",T.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",T.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",T.LOADING_COMPLETED="loadingCompleted",T.LOADING_PROGRESS="loadingProgress",T.LOADING_DATA_PROGRESS="loadingDataProgress",T.LOADING_ABANDONED="loadingAborted",T.MANIFEST_UPDATED="manifestUpdated",T.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",T.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",T.QUOTA_EXCEEDED="quotaExceeded",T.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",T.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",T.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD="serviceLocationBlacklistAdd",T.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",T.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD="serviceLocationLocationBlacklistAdd",T.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED="serviceLocationLocationBlacklistChanged",T.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",T.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",T.SOURCE_BUFFER_ERROR="sourceBufferError",T.STREAMS_COMPOSED="streamsComposed",T.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",T.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",T.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",T.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",T.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",T.URL_RESOLUTION_FAILED="urlResolutionFailed",T.VIDEO_CHUNK_RECEIVED="videoChunkReceived",T.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",T.XLINK_ELEMENT_LOADED="xlinkElementLoaded",T.XLINK_READY="xlinkReady",T.SEEK_TARGET="seekTarget",T.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",T.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",T.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",T.SETTING_UPDATED_PLAYBACK_RATE_MIN="settingUpdatedPlaybackRateMin",T.SETTING_UPDATED_PLAYBACK_RATE_MAX="settingUpdatedPlaybackRateMax",T}return v})(f(8342).Z);c.Z=E},8512:function(l,c,f){function g(I){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},g(I)}function y(I,C){if(!(I instanceof C))throw new TypeError("Cannot call a class as a function")}function h(I,C){return h=Object.setPrototypeOf||function(v,T){return v.__proto__=T,v},h(I,C)}function p(I,C){return!C||g(C)!=="object"&&typeof C!="function"?(function(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v})(I):C}function E(I){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(C){return C.__proto__||Object.getPrototypeOf(C)},E(I)}var A=(function(I){(function(O,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function");O.prototype=Object.create($&&$.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),$&&h(O,$)})(S,I);var C,v,T=(C=S,v=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}})(),function(){var O,$=E(C);if(v){var V=E(this).constructor;O=Reflect.construct($,arguments,V)}else O=$.apply(this,arguments);return p(this,O)});function S(){return y(this,S),T.apply(this,arguments)}return S})(f(4351).Z),_=new A;c.Z=_},8342:function(l,c){function f(y,h){for(var p=0;p<h.length;p++){var E=h[p];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(y,E.key,E)}}var g=(function(){function y(){(function(E,A){if(!(E instanceof A))throw new TypeError("Cannot call a class as a function")})(this,y)}var h,p;return h=y,(p=[{key:"extend",value:function(E,A){if(E){var _=!!A&&A.override,I=!!A&&A.publicOnly;for(var C in E)!E.hasOwnProperty(C)||this[C]&&!_||I&&E[C].indexOf("public_")===-1||(this[C]=E[C])}}}])&&f(h.prototype,p),y})();c.Z=g},9326:function(l,c,f){var g=f(3186),y=f(7855),h=f(5448),p=f(8825),E=f(7387),A=f(1553);function _(I){var C,v,T,S,O,$=(I=I||{}).eventBus,V=I.debug,B=I.urlUtils,ne=I.type,D=I.streamInfo,X=I.segmentsController,ve=I.timelineConverter,ie=I.baseURLController;function ye(){return ne}function Ne(){T=null}function Me(Y,Ee,Pe){var Xe,Ze,at=ie.resolve(Pe.path),jt={};return at&&Ee!==at.url&&B.isRelative(Ee)?(Xe=at.url,Ze=at.serviceLocation,jt=at.queryParams,Ee&&(Xe=B.resolve(Ee,Xe))):Xe=Ee,!B.isRelative(Xe)&&(Y.url=Xe,Y.serviceLocation=Ze,Y.queryParams=jt,!0)}function oe(Y,Ee){if(Ee==null)return null;var Pe=new g.Z,Xe=Ee.representation,Ze=Xe.adaptation.period.mpd.manifest.Period_asArray[Xe.adaptation.period.index].AdaptationSet_asArray[Xe.adaptation.index].Representation_asArray[Xe.index].bandwidth,at=Ee.media;return at=(0,E.vi)(at,"Number",Ee.replacementNumber),at=(0,E.vi)(at,"Time",Ee.replacementTime),at=(0,E.vi)(at,"Bandwidth",Ze),at=(0,E.Aj)(at,Xe.id),at=(0,E.eR)(at),Pe.mediaType=ye(),Pe.type=y.w.MEDIA_SEGMENT_TYPE,Pe.range=Ee.mediaRange,Pe.startTime=Ee.presentationStartTime,Pe.mediaStartTime=Ee.mediaStartTime,Pe.duration=Ee.duration,Pe.timescale=Xe.timescale,Pe.availabilityStartTime=Ee.availabilityStartTime,Pe.availabilityEndTime=Ee.availabilityEndTime,Pe.availabilityTimeComplete=Xe.availabilityTimeComplete,Pe.wallStartTime=Ee.wallStartTime,Pe.quality=Xe.index,Pe.index=Ee.index,Pe.mediaInfo=Y,Pe.adaptationIndex=Xe.adaptation.index,Pe.representationId=Xe.id,Me(Pe,at,Xe)?Pe:void 0}function Ce(Y,Ee,Pe){var Xe=null;if(!Ee||!Ee.segmentInfoType)return Xe;var Ze=X.getSegmentByTime(Ee,Pe);return Ze&&(T=Ze,v.debug("Index for time "+Pe+" is "+Ze.index),Xe=oe(Y,Ze)),Xe}function Ye(Y,Ee,Pe){var Xe=null,Ze=X.getSegmentByIndex(Ee,Pe,T?T.mediaStartTime:-1);if(Ze)Xe=oe(Y,Ze),T=Ze;else{if(S&&!O)return v.debug(ye()+" No segment found at index: "+Pe+". Wait for next loop"),null;O=!0}return Xe}function et(){v.debug("Dynamic stream complete"),O=!0}return C={getCurrentIndex:function(){return T?T.index:-1},getInitRequest:function(Y,Ee){return Ee?(function(Pe,Xe,Ze){var at=new g.Z,jt=Xe.adaptation.period,xt=jt.start;if(at.mediaType=Ze,at.type=y.w.INIT_SEGMENT_TYPE,at.range=Xe.range,at.availabilityStartTime=ve.calcAvailabilityStartTimeFromPresentationTime(xt,Xe,S),at.availabilityEndTime=ve.calcAvailabilityEndTimeFromPresentationTime(xt+jt.duration,Xe,S),at.quality=Xe.index,at.mediaInfo=Pe,at.representationId=Xe.id,Me(at,Xe.initialization,Xe))return at.url=(0,E.vi)(at.url,"Bandwidth",Xe.bandwidth),at})(Y,Ee,ye()):null},getNextSegmentRequest:function(Y,Ee){return Ee&&Ee.segmentInfoType?Ye(Y,Ee,T?T.index+1:0):null},getNextSegmentRequestIdempotent:function(Y,Ee){var Pe=T?T.index+1:0,Xe=X.getSegmentByIndex(Ee,Pe,T?T.mediaStartTime:-1);return Xe?oe(Y,Xe):null},getSegmentRequestForTime:Ce,getStreamId:function(){return D.id},getStreamInfo:function(){return D},getType:ye,getValidTimeAheadOfTargetTime:function(Y,Ee,Pe,Xe){try{if(isNaN(Y)||!Ee||!Pe)return NaN;if(Y<0&&(Y=0),isNaN(Xe)&&(Xe=.5),Ce(Ee,Pe,Y))return Y;if(Pe.adaptation.period.start+Pe.adaptation.period.duration<Y)return NaN;for(var Ze=isFinite(Pe.adaptation.period.duration)?Pe.adaptation.period.start+Pe.adaptation.period.duration:Y+30,at=Math.min(Y+Xe,Ze),jt=NaN,xt=null;at<=Ze;){var ht=null;if(at<=Ze&&(ht=Ce(Ee,Pe,at)),ht){jt=at,xt=ht;break}at+=Xe}if(xt){var It=xt.startTime+xt.duration;return Y>xt.startTime&&It-Y>Xe?Y:!isNaN(xt.startTime)&&Y<xt.startTime&&jt>xt.startTime?xt.startTime+.001:Math.min(It-Xe,jt)}return jt}catch{return NaN}},initialize:function(Y){S=Y,O=!1,X.initialize(Y)},isLastSegmentRequested:function(Y,Ee){return!Y||!T?!1:O?!0:!isFinite(Y.adaptation.period.duration)||T.presentationStartTime+T.duration>Ee?!1:Y.mediaFinishedInformation&&!isNaN(Y.mediaFinishedInformation.numberOfSegments)&&!isNaN(T.index)&&T.index>=Y.mediaFinishedInformation.numberOfSegments-1&&(!S||Y.segmentInfoType===A.Z.SEGMENT_TEMPLATE||S&&Y.segmentInfoType===A.Z.SEGMENT_LIST&&Y.adaptation.period.nextPeriodId)?!0:!!(S&&Y.adaptation.period.nextPeriodId&&Y.segmentInfoType===A.Z.SEGMENT_TIMELINE&&Y.mediaFinishedInformation&&!isNaN(Y.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&T&&!isNaN(T.mediaStartTime)&&!isNaN(T.duration)&&T.mediaStartTime+T.duration>=Y.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},repeatSegmentRequest:function(Y,Ee){return Ee&&Ee.segmentInfoType?Ye(Y,Ee,T?T.index:0):null},reset:function(){Ne(),$.off(p.Z.DYNAMIC_TO_STATIC,et,C)}},v=V.getLogger(C),Ne(),$.on(p.Z.DYNAMIC_TO_STATIC,et,C),C}_.__dashjs_factory_name="DashHandler",c.Z=h.Z.getClassFactory(_)},1553:function(l,c){function f(y,h){for(var p=0;p<h.length;p++){var E=h[p];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(y,E.key,E)}}var g=new((function(){function y(){(function(E,A){if(!(E instanceof A))throw new TypeError("Cannot call a class as a function")})(this,y),this.init()}var h,p;return h=y,(p=[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.ESSENTIAL_PROPERTY_ASARRAY="EssentialProperty_asArray",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.SUPPLEMENTAL_PROPERTY_ASARRAY="SupplementalProperty_asArray",this.INBAND_EVENT_STREAM="InbandEventStream",this.PRODUCER_REFERENCE_TIME="ProducerReferenceTime",this.INBAND="inband",this.TYPE="type",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.VIEWPOINT_ASARRAY="Viewpoint_asArray",this.ROLE_ASARRAY="Role_asArray",this.REPRESENTATION_ASARRAY="Representation_asArray",this.PRODUCERREFERENCETIME_ASARRAY="ProducerReferenceTime_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.DVB_URL="dvb:url",this.DVB_MIMETYPE="dvb:mimeType",this.DVB_FONTFAMILY="dvb:fontFamily",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate",this.SERVICE_DESCRIPTION_OPERATING_QUALITY="OperatingQuality",this.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH="OperatingBandwidth",this.PATCH_LOCATION="PatchLocation",this.PATCH_LOCATION_AS_ARRAY="PatchLocation_asArray",this.LOCATION="Location",this.LOCATION_AS_ARRAY="Location_asArray",this.PUBLISH_TIME="publishTime",this.ORIGINAL_PUBLISH_TIME="originalPublishTime",this.ORIGINAL_MPD_ID="mpdId",this.WALL_CLOCK_TIME="wallClockTime",this.PRESENTATION_TIME="presentationTime",this.LABEL="Label",this.GROUP_LABEL="GroupLabel",this.CONTENT_STEERING="ContentSteering",this.CONTENT_STEERING_AS_ARRAY="ContentSteering_asArray",this.DEFAULT_SERVICE_LOCATION="defaultServiceLocation",this.QUERY_BEFORE_START="queryBeforeStart",this.CLIENT_REQUIREMENT="clientRequirement",this.TTL="ttl",this.CONTENT_STEERING_RESPONSE={VERSION:"VERSION",TTL:"TTL",RELOAD_URI:"RELOAD-URI",PATHWAY_PRIORITY:"PATHWAY-PRIORITY",PATHWAY_CLONES:"PATHWAY-CLONES",BASE_ID:"BASE-ID",ID:"ID",URI_REPLACEMENT:"URI-REPLACEMENT",HOST:"HOST",PARAMS:"PARAMS"},this.PRODUCER_REFERENCE_TIME_TYPE={ENCODER:"encoder",CAPTURED:"captured",APPLICATION:"application"},this.SEGMENT_ALIGNMENT="segmentAlignment",this.SUB_SEGMENT_ALIGNMENT="subsegmentAlignment"}}])&&f(h.prototype,p),y})());c.Z=g},7802:function(l,c,f){var g=f(5448),y=f(1724),h=f(3636),p=f(1736),E=f(5246);function A(I){I=I||{};var C,v,T=this.context,S=I.dashConstants,O=I.type,$=I.segmentBaseController;function V(B){return B?B.segments?v[S.SEGMENT_BASE]:v[B.segmentInfoType]:null}return C={initialize:function(B){v[S.SEGMENT_TIMELINE]=(0,y.Z)(T).create(I,B),v[S.SEGMENT_TEMPLATE]=(0,h.Z)(T).create(I,B),v[S.SEGMENT_LIST]=(0,p.Z)(T).create(I,B),v[S.SEGMENT_BASE]=(0,E.Z)(T).create(I,B)},updateInitData:function(B,ne){return ne?Promise.resolve():$.getSegmentBaseInitSegment({representation:B,mediaType:O})},updateSegmentData:function(B,ne){return ne?Promise.resolve():$.getSegmentList({mimeType:B.mimeType,representation:B,mediaType:O})},getSegmentByIndex:function(B,ne,D){var X=V(B);return X?X.getSegmentByIndex(B,ne,D):null},getSegmentByTime:function(B,ne){var D=V(B);return D?D.getSegmentByTime(B,ne):null},getMediaFinishedInformation:function(B){var ne=V(B);return ne?ne.getMediaFinishedInformation(B):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},v={},C}A.__dashjs_factory_name="SegmentsController";var _=g.Z.getClassFactory(A);c.Z=_},1736:function(l,c,f){var g=f(5448),y=f(3393),h=f(7387);function p(A,_){var I=(A=A||{}).timelineConverter;function C(){if(!I||!I.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(y.Z.MISSING_CONFIG_ERROR)}function v(T,S){if(C(),!T)return null;var O=T.adaptation.period.mpd.manifest.Period_asArray[T.adaptation.period.index].AdaptationSet_asArray[T.adaptation.index].Representation_asArray[T.index].SegmentList,$=O.SegmentURL_asArray.length,V=T&&!isNaN(T.startNumber)?T.startNumber:1,B=Math.max(V-1,0),ne=Math.max(S-B,0),D=null;if(ne<$){var X=O.SegmentURL_asArray[ne];(D=(0,h.NF)(I,_,T,S))&&(D.replacementTime=(V+S-1)*T.segmentDuration,D.media=X.media?X.media:"",D.mediaRange=X.mediaRange,D.indexRange=X.indexRange)}return D}return{getSegmentByIndex:v,getSegmentByTime:function(T,S){if(C(),!T)return null;var O=T.segmentDuration;if(isNaN(O))return null;var $=I.calcPeriodRelativeTimeFromMpdRelativeTime(T,S);return v(T,Math.floor($/O))},getMediaFinishedInformation:function(T){var S={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!T)return S;var O=T.adaptation.period.mpd.manifest.Period_asArray[T.adaptation.period.index].AdaptationSet_asArray[T.adaptation.index].Representation_asArray[T.index].SegmentList,$=T&&!isNaN(T.startNumber)?T.startNumber:1,V=Math.max($-1,0);return S.numberOfSegments=V+O.SegmentURL_asArray.length,S}}}p.__dashjs_factory_name="ListSegmentsGetter";var E=g.Z.getClassFactory(p);c.Z=E},5246:function(l,c,f){var g=f(5448),y=f(3393);function h(E){var A=(E=E||{}).timelineConverter;function _(){if(!A||!A.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(y.Z.MISSING_CONFIG_ERROR)}function I(C,v){if(_(),!C)return null;var T,S=C.segments?C.segments.length:-1;if(v<S&&(T=C.segments[v])&&T.index===v)return T;for(var O=0;O<S;O++)if((T=C.segments[O])&&T.index===v)return T;return null}return{getSegmentByIndex:I,getSegmentByTime:function(C,v){_();var T=(function(S,O){if(!S)return-1;var $,V,B,ne,D,X=S.segments,ve=X?X.length:null,ie=-1;if(X&&ve>0){for(D=0;D<ve;D++)if(B=(V=X[D]).presentationStartTime,O+($=(ne=V.duration)/2)>=B&&O-$<B+ne){ie=V.index;break}}return ie})(C,v);return I(C,T)},getMediaFinishedInformation:function(C){var v={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return C&&C.segments&&(v.numberOfSegments=C.segments.length),v}}}h.__dashjs_factory_name="SegmentBaseGetter";var p=g.Z.getClassFactory(h);c.Z=p},7387:function(l,c,f){f.d(c,{Aj:function(){return p},NF:function(){return I},TJ:function(){return C},eR:function(){return h},vi:function(){return E}});var g=f(2011);function y(v,T){for(;v.length<T;)v="0"+v;return v}function h(v){return v&&v.split("$$").join("$")}function p(v,T){if(!T||!v||v.indexOf("$RepresentationID$")===-1)return v;var S=T.toString();return v.split("$RepresentationID$").join(S)}function E(v,T,S){var O,$,V,B,ne,D,X=T.length,ve=2;if(!v)return v;for(;;){if((O=v.indexOf("$"+T))<0||($=v.indexOf("$",O+X))<0)return v;if((V=v.indexOf("%0",O+X))>O&&V<$)switch(B=v.charAt($-1),ne=parseInt(v.substring(V+ve,$-1),10),B){case"d":case"i":case"u":D=y(S.toString(),ne);break;case"x":D=y(S.toString(16),ne);break;case"X":D=y(S.toString(16),ne).toUpperCase();break;case"o":D=y(S.toString(8),ne);break;default:return v}else D=S;v=v.substring(0,O)+D+v.substring($+1)}}function A(v,T,S,O,$,V,B,ne){var D,X=new g.Z;return X.representation=v,X.duration=T,X.presentationStartTime=S,X.mediaStartTime=O,X.availabilityStartTime=$.calcAvailabilityStartTimeFromPresentationTime(V,v,B),X.availabilityEndTime=$.calcAvailabilityEndTimeFromPresentationTime(V+T,v,B),X.wallStartTime=$.calcWallTimeForSegment(X,B),X.replacementNumber=(D=ne,X.representation.startNumber+D),X.index=ne,X}function _(v,T,S,O){var $=T.adaptation.period;if(isFinite($.duration)&&$.start+$.duration<=S.presentationStartTime)return!1;if(O){if(T.availabilityTimeOffset==="INF")return!0;var V=v.getClientReferenceTime();return S.availabilityStartTime.getTime()<=V&&(!isFinite(S.availabilityEndTime)||S.availabilityEndTime.getTime()>=V)}return!0}function I(v,T,S,O){var $,V,B;$=S.segmentDuration,isNaN($)&&($=S.adaptation.period.duration),V=parseFloat((S.adaptation.period.start+O*$).toFixed(5)),B=parseFloat((V+$).toFixed(5));var ne=A(S,$,V,v.calcMediaTimeFromPresentationTime(V,S),v,B,T,O);return _(v,S,ne,T)?ne:null}function C(v,T,S,O,$,V,B,ne,D,X){var ve,ie,ye=O/V,Ne=$/V;return ve=v.calcPresentationTimeFromMediaTime(ye,S),_(v,S,ie=A(S,Ne,ve,ye,v,ve+Ne,T,D),T)?(ie.replacementTime=X||O,B=E(B,"Number",ie.replacementNumber),B=E(B,"Time",ie.replacementTime),ie.media=B,ie.mediaRange=ne,ie):null}},3636:function(l,c,f){var g=f(5448),y=f(3393),h=f(7387);function p(A,_){var I=(A=A||{}).timelineConverter;function C(){if(!I||!I.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(y.Z.MISSING_CONFIG_ERROR)}function v(T,S){if(C(),!T)return null;var O=T.adaptation.period.mpd.manifest.Period_asArray[T.adaptation.period.index].AdaptationSet_asArray[T.adaptation.index].Representation_asArray[T.index].SegmentTemplate;S=Math.max(S,0);var $=(0,h.NF)(I,_,T,S);if($){$.replacementTime=Math.round((S-1)*T.segmentDuration*T.timescale,10);var V=O.media;V=(0,h.vi)(V,"Number",$.replacementNumber),V=(0,h.vi)(V,"Time",$.replacementTime),$.media=V}return $}return{getSegmentByIndex:v,getSegmentByTime:function(T,S){if(C(),!T)return null;var O=T.segmentDuration;if(isNaN(O))return null;var $=I.calcPeriodRelativeTimeFromMpdRelativeTime(T,S);return v(T,Math.floor($/O))},getMediaFinishedInformation:function(T){var S={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!T)return S;var O=T.segmentDuration;return isNaN(O)?S.numberOfSegments=1:S.numberOfSegments=Math.ceil(T.adaptation.period.duration/O),S}}}p.__dashjs_factory_name="TemplateSegmentsGetter";var E=g.Z.getClassFactory(p);c.Z=E},1724:function(l,c,f){var g=f(5448),y=f(3393),h=f(7387);function p(A,_){var I=(A=A||{}).timelineConverter,C=A.dashMetrics;function v(){if(!I)throw new Error(y.Z.MISSING_CONFIG_ERROR)}function T(O,$){var V,B,ne,D,X,ve,ie,ye=O.adaptation.period.mpd.manifest.Period_asArray[O.adaptation.period.index].AdaptationSet_asArray[O.adaptation.index].Representation_asArray[O.index].SegmentTemplate||O.adaptation.period.mpd.manifest.Period_asArray[O.adaptation.period.index].AdaptationSet_asArray[O.adaptation.index].Representation_asArray[O.index].SegmentList,Ne=ye.SegmentTimeline,Me=ye.SegmentURL_asArray,oe=0,Ce=-1;ie=O.timescale;var Ye=!1;for(ne=0,D=(V=Ne.S_asArray).length;ne<D&&!Ye;ne++)for(ve=0,(B=V[ne]).hasOwnProperty("r")&&(ve=B.r),B.hasOwnProperty("t")&&(oe=B.t),ve<0&&(ve=S(O,V[ne+1],B,ie,oe/ie)),X=0;X<=ve&&!Ye;X++)(Ye=$(oe,ye,Me,B,ie,++Ce,ne))&&(O.segmentDuration=B.d/ie),oe+=B.d}function S(O,$,V,B,ne){var D;if($&&$.hasOwnProperty("t"))D=$.t/B;else try{var X=0;if(isNaN(O.adaptation.period.start)||isNaN(O.adaptation.period.duration)||!isFinite(O.adaptation.period.duration)){var ve=C.getCurrentDVRInfo();X=isNaN(ve.end)?0:ve.end}else X=O.adaptation.period.start+O.adaptation.period.duration;D=I.calcMediaTimeFromPresentationTime(X,O),O.segmentDuration=V.d/B}catch{D=0}return Math.max(Math.ceil((D-ne)/(V.d/B))-1,0)}return{getSegmentByIndex:function(O,$,V){if(v(),!O)return null;var B=null,ne=!1;return T(O,(function(D,X,ve,ie,ye,Ne,Me){if(ne||V<0){var oe=X.media,Ce=ie.mediaRange;return ve&&(oe=ve[Me].media||"",Ce=ve[Me].mediaRange),B=(0,h.TJ)(I,_,O,D,ie.d,ye,oe,Ce,Ne,ie.tManifest),!0}return D>=V*ye-.5*ie.d&&(ne=!0),!1})),B},getSegmentByTime:function(O,$){if(v(),!O)return null;$===void 0&&($=null);var V=null,B=I.calcMediaTimeFromPresentationTime($,O);return T(O,(function(ne,D,X,ve,ie,ye,Ne){var Me=parseFloat((B*ie).toPrecision(15));if(Me<ne+ve.d&&Me>=ne){var oe=D.media,Ce=ve.mediaRange;return X&&(oe=X[Ne].media||"",Ce=X[Ne].mediaRange),V=(0,h.TJ)(I,_,O,ne,ve.d,ie,oe,Ce,ye,ve.tManifest),!0}return!1})),V},getMediaFinishedInformation:function(O){if(!O)return 0;var $,V,B,ne,D,X,ve,ie=(O.adaptation.period.mpd.manifest.Period_asArray[O.adaptation.period.index].AdaptationSet_asArray[O.adaptation.index].Representation_asArray[O.index].SegmentTemplate||O.adaptation.period.mpd.manifest.Period_asArray[O.adaptation.period.index].AdaptationSet_asArray[O.adaptation.index].Representation_asArray[O.index].SegmentList).SegmentTimeline,ye=0,Ne=0,Me=0;for(ve=O.timescale,ne=($=ie.S_asArray).length,B=0;B<ne;B++)for(X=0,(V=$[B]).hasOwnProperty("r")&&(X=V.r),V.hasOwnProperty("t")&&(Ne=(ye=V.t)/ve),X<0&&(X=S(O,$[B+1],V,ve,Ne)),D=0;D<=X;D++)Me++,Ne=(ye+=V.d)/ve;return{numberOfSegments:Me,mediaTimeOfLastSignaledSegment:Ne}}}}p.__dashjs_factory_name="TimelineSegmentsGetter";var E=g.Z.getClassFactory(p);c.Z=E},2011:function(l,c){c.Z=function f(){(function(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")})(this,f),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.wallStartTime=NaN,this.representation=null}},2610:function(l,c){c.Z=function f(){(function(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")})(this,f),this.schemeIdUri="",this.value=""}},1139:function(l,c,f){f.d(c,{Z:function(){return Pa}});var g=f(452),y=f.n(g),h=f(3393),p=f(1553),E=f(3860),A=f(5595),_=f(8512),I=f(5448),C=f(6398),v=f(8825);function T(){var L,R,P,z,W,q,Z,K,le,_e,fe,Q,ce,ae,He,Oe,Be,Ke,me,Le,ge,Fe,F,se,te,re=this.context,G=(0,A.Z)(re).getInstance();function Ie(){ue(),ae=!1,_e=0,fe=0,Be=0,F=!1,Ke=!0,me=!1,se=!1,Le=NaN,Oe=NaN,Z&&(G.off(_.Z.DATA_UPDATE_COMPLETED,Lt,L),G.off(_.Z.LOADING_PROGRESS,Fn,L),G.off(_.Z.MANIFEST_UPDATED,Kt,L),G.off(_.Z.STREAMS_COMPOSED,We,L),G.off(v.Z.PLAYBACK_ENDED,Yt,L),G.off(v.Z.STREAM_INITIALIZING,Rt,L),G.off(v.Z.REPRESENTATION_SWITCH,ft,L),G.off(v.Z.BUFFER_LEVEL_STATE_CHANGED,Xt,L),tn(),Z.removeEventListener("canplay",an),Z.removeEventListener("canplaythrough",ln),Z.removeEventListener("play",Vn),Z.removeEventListener("waiting",Mn),Z.removeEventListener("playing",gr),Z.removeEventListener("pause",vr),Z.removeEventListener("error",Tn),Z.removeEventListener("seeking",Ct),Z.removeEventListener("seeked",rn),Z.removeEventListener("timeupdate",Ht),Z.removeEventListener("progress",yn),Z.removeEventListener("ratechange",In),Z.removeEventListener("loadedmetadata",Wn),Z.removeEventListener("loadeddata",Hn),Z.removeEventListener("stalled",Zn),Z.removeEventListener("ended",Yn),Z.removeEventListener("volumechange",rr)),le=null,Z=null,Q=null,ce=null}function we(){var tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return parseFloat((ke(tt)-ut()).toFixed(5))}function ke(tt){var Mt=tt||Q;return Mt.start+Mt.duration}function Ae(){var tt=arguments.length>0&&arguments[0]!==void 0&&arguments[0];Q&&Z&&Z.getElement()?(tt&&ce&&gt(ut()),Z.play()):ae=!0}function ue(){Q&&Z&&Z.pause()}function Se(tt){var Mt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],mn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Cn=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(Q&&Z&&Z.getElement()){var cr=isNaN(Le)?Z.getTime():Le;tt!==cr&&((ge=mn===!0)||(Le=tt),R.info("Requesting seek to time: "+tt+(ge?" (internal)":"")),ce&&Cn&&gt(tt),Z.setCurrentTime(tt,Mt))}}function qe(){if(Q&&Z&&ce){var tt=P&&P.hasVideoTrack()?h.Z.VIDEO:h.Z.AUDIO,Mt=W.getCurrentDVRInfo(tt);return Mt&&Mt.range?Mt.range.end:0}}function gt(tt){var Mt=new Date(K.getClientReferenceTime()),mn=q.getRegularPeriods()[0],Cn=K.calcPresentationTimeFromWallTime(Mt,mn);_e=Cn-tt}function ut(){return Q&&Z?Z.getTime():null}function mt(){return Q&&Z?Z.isPaused():null}function dt(){return Q&&Z?Z.isSeeking():null}function zt(){return Q&&Z?Z.isStalled():null}function Ut(){return Q&&Z?Z.getPlaybackRate():null}function Ft(){return Q&&Z?Z.getEnded():null}function Bt(){return ce}function Nn(){var tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(!mt()&&ce&&Z.getReadyState()!==0&&!dt()&&!F){tt||(tt=P.hasVideoTrack()?h.Z.VIDEO:h.Z.AUDIO);var Mt=ut(),mn=lt(Mt,tt),Cn=!isNaN(mn)&&mn!==Mt;Cn&&!dt()&&(zt()||Fe||Z.getReadyState()===1)&&(R.debug("UpdateCurrentTime: Seek to actual time: ".concat(mn," from currentTime: ").concat(Mt)),Se(mn,!1,!1))}}function lt(tt,Mt){var mn=W.getCurrentDVRInfo(Mt),Cn=mn?mn.range:null;return Cn?tt>Cn.end?Math.max(Cn.end-_e,Cn.start):tt>0&&tt+.25<Cn.start&&Math.abs(tt-Cn.start)<31536e4?me?Math.max(Cn.end-_e,Cn.start):Cn.start:tt:NaN}function bt(){le===null&&(le=setInterval((function(){(function(){if(G.trigger(_.Z.WALLCLOCK_TIME_UPDATED,{isDynamic:ce,time:new Date}),Bt()){var tt=Date.now();(isNaN(Oe)||tt>Oe+te.get().streaming.liveUpdateTimeThresholdInMilliseconds)&&(P.addDVRMetric(),mt()?(function(){var Mt=Date.now();(!He||Mt>He+500)&&(He=Mt,Ht())})():Nn(),Oe=tt)}})()}),te.get().streaming.wallclockTimeUpdateInterval))}function tn(){clearInterval(le),le=null}function Lt(tt){var Mt=q.convertRepresentationToRepresentationInfo(tt.currentRepresentation),mn=Mt?Mt.mediaInfo.streamInfo:null;mn!==null&&Q.id===mn.id&&(Q=mn)}function an(){G.trigger(_.Z.CAN_PLAY)}function ln(){G.trigger(_.Z.CAN_PLAY_THROUGH)}function Xt(tt){tt.streamId===P.getActiveStreamInfo().id&&(Fe=tt.state===E.Z.BUFFER_EMPTY,te.get().streaming.buffer.setStallState&&Z.setStallState(tt.mediaType,tt.state===E.Z.BUFFER_EMPTY))}function Vn(){R.info("Native video element event: play"),Nn(),bt(),G.trigger(_.Z.PLAYBACK_STARTED,{startTime:ut()})}function Mn(){R.info("Native video element event: waiting"),G.trigger(_.Z.PLAYBACK_WAITING,{playingTime:ut()})}function gr(){R.info("Native video element event: playing"),ge=!1,G.trigger(_.Z.PLAYBACK_PLAYING,{playingTime:ut()})}function vr(){R.info("Native video element event: pause"),G.trigger(_.Z.PLAYBACK_PAUSED,{ended:Ft()})}function Ct(){if(!ge){var tt=ut();isNaN(Le)||Le===tt||(tt=Le),Le=NaN,R.info("Seeking to: "+tt),bt(),G.trigger(_.Z.PLAYBACK_SEEKING,{seekTime:tt,streamId:Q.id})}}function rn(){R.info("Native video element event: seeked"),ge=!1,G.trigger(_.Z.PLAYBACK_SEEKED)}function Ht(){Q&&G.trigger(_.Z.PLAYBACK_TIME_UPDATED,{timeToEnd:we(),time:ut(),streamId:Q.id})}function yn(){G.trigger(_.Z.PLAYBACK_PROGRESS,{streamId:Q.id})}function In(){var tt=Ut();R.info("Native video element event: ratechange: ",tt),G.trigger(_.Z.PLAYBACK_RATE_CHANGED,{playbackRate:tt})}function Wn(){R.info("Native video element event: loadedmetadata"),G.trigger(_.Z.PLAYBACK_METADATA_LOADED),bt()}function Hn(){R.info("Native video element event: loadeddata"),G.trigger(_.Z.PLAYBACK_LOADED_DATA)}function Yn(){R.info("Native video element event: ended"),ue(),tn();var tt=P?P.getActiveStreamInfo():null;tt&&G.trigger(_.Z.PLAYBACK_ENDED,{isLast:tt.isLast})}function rr(){G.trigger(_.Z.PLAYBACK_VOLUME_CHANGED)}function Yt(tt){if(le&&tt.isLast){R.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");var Mt=tt.seekTime?tt.seekTime:ke();Z.setCurrentTime(Mt),ue(),tn()}}function Tn(tt){var Mt=tt.target||tt.srcElement;G.trigger(_.Z.PLAYBACK_ERROR,{error:Mt.error})}function Dn(){ce=!1}function Fn(tt){if(tt.stream===!1&&me&&!isNaN(tt.request.duration)){var Mt=1.2*tt.request.duration;Mt>_e&&(R.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",Mt.toFixed(2)),_e=Mt,fe=Mt)}}function Zn(tt){G.trigger(_.Z.PLAYBACK_STALLED,{e:tt})}function Rt(tt){var Mt;(Mt=tt.mediaInfo)&&Mt.supplementalProperties&&Mt.supplementalProperties[h.Z.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME]&&Mt.supplementalProperties[h.Z.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME].value==="true"&&(R.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),me=!0)}function ft(tt){var Mt=P.getActiveStreamInfo();tt&&Mt&&tt.currentRepresentation&&tt.streamId&&tt.streamId===Mt.id&&tt.mediaType&&(tt.mediaType===h.Z.VIDEO||tt.mediaType===h.Z.AUDIO)&&(Ke=tt.currentRepresentation.availabilityTimeComplete,(me=!Ke)&&!se&&(se=!0))}function Kt(){F=!0}function We(){F=!1}return L={initialize:function(tt,Mt){Q=tt,Mt!==!0&&(Z.addEventListener("canplay",an),Z.addEventListener("canplaythrough",ln),Z.addEventListener("play",Vn),Z.addEventListener("waiting",Mn),Z.addEventListener("playing",gr),Z.addEventListener("pause",vr),Z.addEventListener("error",Tn),Z.addEventListener("seeking",Ct),Z.addEventListener("seeked",rn),Z.addEventListener("timeupdate",Ht),Z.addEventListener("progress",yn),Z.addEventListener("ratechange",In),Z.addEventListener("loadedmetadata",Wn),Z.addEventListener("loadeddata",Hn),Z.addEventListener("stalled",Zn),Z.addEventListener("ended",Yn),Z.addEventListener("volumechange",rr),ce=Q.manifestInfo.isDynamic,Fe=!1,ge=!1,G.on(_.Z.DATA_UPDATE_COMPLETED,Lt,L),G.on(_.Z.LOADING_PROGRESS,Fn,L),G.on(_.Z.MANIFEST_UPDATED,Kt,L),G.on(_.Z.STREAMS_COMPOSED,We,L),G.on(v.Z.PLAYBACK_ENDED,Yt,L,{priority:A.Z.EVENT_PRIORITY_HIGH}),G.on(v.Z.STREAM_INITIALIZING,Rt,L),G.on(v.Z.REPRESENTATION_SWITCH,ft,L),G.on(v.Z.BUFFER_LEVEL_STATE_CHANGED,Xt,L),G.on(v.Z.DYNAMIC_TO_STATIC,Dn,L),ae&&(ae=!1,Ae()))},setConfig:function(tt){tt&&(tt.streamController&&(P=tt.streamController),tt.serviceDescriptionController&&(z=tt.serviceDescriptionController),tt.dashMetrics&&(W=tt.dashMetrics),tt.adapter&&(q=tt.adapter),tt.videoModel&&(Z=tt.videoModel),tt.timelineConverter&&(K=tt.timelineConverter),tt.settings&&(te=tt.settings))},getTimeToStreamEnd:we,getBufferLevel:function(){var tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,Mt=null;return P.getActiveStreamProcessors().forEach((function(mn){if(!tt||tt.length===0||tt.indexOf(mn.getType())===-1){var Cn=mn.getBufferLevel();Mt=Mt===null?Cn:Math.min(Mt,Cn)}})),Mt},getPlaybackStalled:function(){return Fe},getTime:ut,getLowLatencyModeEnabled:function(){return me},getInitialCatchupModeActivated:function(){return se},getIsManifestUpdateInProgress:function(){return F},getPlaybackRate:Ut,getPlayedRanges:function(){return Q&&Z?Z.getPlayedRanges():null},getEnded:Ft,getIsDynamic:Bt,getStreamController:function(){return P},computeAndSetLiveDelay:function(tt,Mt){var mn,Cn,cr,Si=!isNaN(tt)&&isFinite(tt)?tt:NaN,to=q.getSuggestedPresentationDelay(),Di=z.getServiceDescriptionSettings();return mn=isNaN(te.get().streaming.delay.liveDelay)?te.get().streaming.delay.liveDelayFragmentCount===null||isNaN(te.get().streaming.delay.liveDelayFragmentCount)||isNaN(Si)?Di&&!isNaN(Di.liveDelay)&&Di.liveDelay>0?Di.liveDelay:te.get().streaming.delay.useSuggestedPresentationDelay===!0&&to!==null&&!isNaN(to)&&to>0?to:isNaN(Si)?Mt&&!isNaN(Mt.minBufferTime)?4*Mt.minBufferTime:4*Q.manifestInfo.minBufferTime:4*Si:Si*te.get().streaming.delay.liveDelayFragmentCount:te.get().streaming.delay.liveDelay,(cr=q.getAvailabilityStartTime())!==null&&(Be=cr),Cn=Mt&&Mt.dvrWindowSize>0?Math.min(mn,Mt.dvrWindowSize):mn,_e=Cn,fe=Cn,Cn},getLiveDelay:function(){return _e},getOriginalLiveDelay:function(){return fe},getCurrentLiveLatency:function(){if(!ce||isNaN(Be))return NaN;var tt=ut();if(isNaN(tt)||tt===0)return 0;var Mt=new Date().getTime()+1e3*K.getClientTimeOffset();return Math.max(((Mt-Be-1e3*tt)/1e3).toFixed(3),0)},play:Ae,isPaused:mt,isStalled:zt,pause:ue,isSeeking:dt,getStreamEndTime:ke,seek:Se,seekToOriginalLive:function(){var tt=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Mt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],mn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Cn=qe();if(Cn!==0){var cr=Cn-(_e=fe);Se(cr,tt,Mt,mn)}},seekToCurrentLive:function(){var tt=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Mt=arguments.length>1&&arguments[1]!==void 0&&arguments[1],mn=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Cn=qe();if(Cn!==0){var cr=Cn-_e;Se(cr,tt,Mt,mn)}},reset:Ie,updateCurrentTime:Nn,getAvailabilityStartTime:function(){return Be}},R=(0,C.Z)(re).getInstance().getLogger(L),Ie(),L}T.__dashjs_factory_name="PlaybackController";var S=I.Z.getSingletonFactory(T),O=f(3186),$="loading",V="executed",B="failed";function ne(L){var R,P,z,W,q=(L=L||{}).eventBus,Z=L.events,K=L.dashMetrics,le=L.fragmentLoader,_e=L.debug,fe=L.streamInfo,Q=L.type;function ce(F){var se;return!!F&&(se=!1,z.some((function(te){if(re=F,G=te,!isNaN(re.index)&&re.startTime===G.startTime&&re.adaptationIndex===G.adaptationIndex&&re.type===G.type||(function(Ie,we){return isNaN(Ie.index)&&isNaN(we.index)&&Ie.quality===we.quality})(F,te)||(function(Ie,we){return Ie.action===O.Z.ACTION_COMPLETE&&Ie.action===we.action})(F,te))return se=!0;var re,G})),se)}function ae(F){return isNaN(F.duration)?.25:Math.min(F.duration/8,.5)}function He(F){z=z.filter((function(se){var te=ae(se);return isNaN(se.startTime)||F!==void 0&&se.startTime>=F-te}))}function Oe(F,se){se<=F+.5||(z=z.filter((function(te){var re=ae(te);return isNaN(te.startTime)||te.startTime>=se-re||isNaN(te.duration)||te.startTime+te.duration<=F+re})))}function Be(F,se,te){for(var re=F.length-1;re>=0;re--){var G=F[re],Ie=G.startTime,we=Ie+G.duration;if(te=isNaN(te)?ae(G):te,!isNaN(Ie)&&!isNaN(we)&&se+te>=Ie&&se-te<we||isNaN(Ie)&&isNaN(se))return G}return null}function Ke(F,se){K.addSchedulingInfo(F,se),K.addRequestsQueue(F.mediaType,W,z)}function me(F){F.sender===le&&(W.splice(W.indexOf(F.request),1),F.response&&!F.error&&z.push(F.request),Ke(F.request,F.error?B:V),q.trigger(Z.FRAGMENT_LOADING_COMPLETED,{request:F.request,response:F.response,error:F.error,sender:this},{streamId:fe.id,mediaType:Q}))}function Le(F){F.sender===le&&q.trigger(Z.FRAGMENT_LOADING_PROGRESS,{request:F.request,response:F.response,error:F.error,sender:this},{streamId:fe.id,mediaType:Q})}function ge(F){F.sender===le&&q.trigger(Z.FRAGMENT_LOADING_ABANDONED,{request:F.request},{streamId:fe.id,mediaType:Q})}function Fe(){z=[],W=[]}return R={getStreamId:function(){return fe.id},getType:function(){return Q},getRequests:function(F){var se=F?F.state instanceof Array?F.state:[F.state]:[],te=[];return se.forEach((function(re){var G=(function(Ie){var we;switch(Ie){case $:we=W;break;case V:we=z;break;default:we=[]}return we})(re);te=te.concat((function(Ie,we){return we.hasOwnProperty("time")?[Be(Ie,we.time,we.threshold)]:Ie.filter((function(ke){for(var Ae in we)if(Ae!=="state"&&we.hasOwnProperty(Ae)&&ke[Ae]!=we[Ae])return!1;return!0}))})(G,F))})),te},isFragmentLoaded:ce,isFragmentLoadedOrPending:function(F){var se,te=!1,re=0;if(!(te=ce(F)))for(re=0;re<W.length;re++)se=W[re],F.url===se.url&&F.startTime===se.startTime&&(te=!0);return te},removeExecutedRequestsBeforeTime:He,removeExecutedRequestsAfterTime:function(F){z=z.filter((function(se){return isNaN(se.startTime)||F!==void 0&&se.startTime<F}))},syncExecutedRequestsWithBufferedRange:function(F,se){if(F&&F.length!==0){for(var te=0,re=0,G=F.length;re<G;re++)Oe(te,F.start(re)),te=F.end(re);se>0&&Oe(te,se)}else He()},abortRequests:function(){P.debug("abort requests"),le.abort(),W=[]},executeRequest:function(F){F.action===O.Z.ACTION_DOWNLOAD?(Ke(F,$),W.push(F),(function(se){q.trigger(Z.FRAGMENT_LOADING_STARTED,{request:se},{streamId:fe.id,mediaType:Q}),le.load(se)})(F)):P.warn("Unknown request action.")},reset:function(){q.off(Z.LOADING_COMPLETED,me,this),q.off(Z.LOADING_DATA_PROGRESS,Le,this),q.off(Z.LOADING_ABANDONED,ge,this),le&&le.reset(),Fe()},resetInitialSettings:Fe,addExecutedRequest:function(F){z.push(F)}},P=_e.getLogger(R),Fe(),q.on(Z.LOADING_COMPLETED,me,R),q.on(Z.LOADING_DATA_PROGRESS,Le,R),q.on(Z.LOADING_ABANDONED,ge,R),R}ne.__dashjs_factory_name="FragmentModel";var D=I.Z.getClassFactory(ne);D.FRAGMENT_MODEL_LOADING=$,D.FRAGMENT_MODEL_EXECUTED=V,D.FRAGMENT_MODEL_CANCELED="canceled",D.FRAGMENT_MODEL_FAILED=B,I.Z.updateClassFactory(ne.__dashjs_factory_name,D);var X=D,ve=f(5459);function ie(L){return ie=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},ie(L)}function ye(L,R){return ye=Object.setPrototypeOf||function(P,z){return P.__proto__=z,P},ye(L,R)}function Ne(L,R){return!R||ie(R)!=="object"&&typeof R!="function"?(function(P){if(P===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P})(L):R}function Me(L){return Me=Object.setPrototypeOf?Object.getPrototypeOf:function(R){return R.__proto__||Object.getPrototypeOf(R)},Me(L)}var oe=new((function(L){(function(q,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Super expression must either be null or a function");q.prototype=Object.create(Z&&Z.prototype,{constructor:{value:q,writable:!0,configurable:!0}}),Z&&ye(q,Z)})(W,L);var R,P,z=(R=W,P=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}})(),function(){var q,Z=Me(R);if(P){var K=Me(this).constructor;q=Reflect.construct(Z,arguments,K)}else q=Z.apply(this,arguments);return Ne(this,q)});function W(){var q;return(function(Z,K){if(!(Z instanceof K))throw new TypeError("Cannot call a class as a function")})(this,W),(q=z.call(this)).MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,q.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,q.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,q.SEGMENT_BASE_LOADER_ERROR_CODE=15,q.TIME_SYNC_FAILED_ERROR_CODE=16,q.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,q.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,q.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,q.APPEND_ERROR_CODE=20,q.REMOVE_ERROR_CODE=21,q.DATA_UPDATE_FAILED_ERROR_CODE=22,q.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,q.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,q.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,q.DOWNLOAD_ERROR_ID_SIDX_CODE=26,q.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,q.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,q.DOWNLOAD_ERROR_ID_XLINK_CODE=29,q.MANIFEST_ERROR_ID_PARSE_CODE=31,q.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,q.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,q.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,q.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,q.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",q.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",q.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",q.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",q.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",q.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",q.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",q.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",q.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",q.APPEND_ERROR_MESSAGE="chunk is not defined",q.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",q.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",q.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",q.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",q.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",q.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",q}return W})(f(2230).Z)),Ce=f(1264),Ye=f(7855);function et(L){var R,P,z,W,q,Z,K=this.context,le=(0,Ce.Z)(K).getInstance(),_e=L.textController,fe=L.eventBus,Q=[],ce=[],ae=!1,He=L.mediaSource,Oe=null;function Be(G){return new Promise((function(Ie){re((function(){W.changeType&&W.changeType(G),Ie()}))}))}function Ke(G){return W=_e.getTextSourceBuffer(G),Promise.resolve()}function me(){if(typeof W.addEventListener=="function")try{W.addEventListener("updateend",se,!1),W.addEventListener("error",te,!1),W.addEventListener("abort",te,!1)}catch{Z=setInterval(se,50)}else Z=setInterval(se,50)}function Le(G){return new Promise((function(Ie){W&&le.get().streaming.buffer.useAppendWindow?re((function(){try{if(!W)return void Ie();var we=He.duration,ke=0;G&&!isNaN(G.start)&&!isNaN(G.duration)&&isFinite(G.duration)&&(we=G.start+G.duration),G&&!isNaN(G.start)&&(ke=G.start),W.appendWindowEnd===we&&W.appendWindowStart===ke||(W.appendWindowStart=0,W.appendWindowEnd=we+.01,W.appendWindowStart=Math.max(ke-.1,0),z.debug("Updated append window for ".concat(q.type,". Set start to ").concat(W.appendWindowStart," and end to ").concat(W.appendWindowEnd))),Ie()}catch{z.warn("Failed to set append window"),Ie()}})):Ie()}))}function ge(G){return new Promise((function(Ie){W?re((function(){try{W.timestampOffset===G||isNaN(G)||(W.timestampOffset=G,z.debug("Set MSE timestamp offset to ".concat(G))),Ie()}catch{Ie()}})):Ie()}))}function Fe(){if(!ae&&ce.length>0){ae=!0;var G=ce[0];ce.splice(0,1);var Ie=function(){ae=!1,ce.length>0&&Fe.call(this),G&&G.data&&G.data.segmentType&&G.data.segmentType!==Ye.w.INIT_SEGMENT_TYPE&&delete G.data.bytes,G.promise.resolve({chunk:G.data})};try{Oe=G.request,G.data.bytes.byteLength===0?Ie.call(this):(W.appendBuffer?W.appendBuffer(G.data.bytes):W.append(G.data.bytes,G.data),re(Ie.bind(this)))}catch(we){z.fatal('SourceBuffer append failed "'+we+'"'),ce.length>0?Fe():ae=!1,delete G.data.bytes,G.promise.reject({chunk:G.data,error:new ve.Z(we.code,we.message)})}}}function F(){Q.length>0&&(W.updating||(Q.shift()(),F()))}function se(){W.updating||F()}function te(G){var Ie,we,ke=G.target||{};Ie=_.Z.SOURCE_BUFFER_ERROR,we={error:ke,lastRequestAppended:Oe},fe.trigger(Ie,we,{streamId:q.streamInfo.id,mediaType:P})}function re(G){Q.push(G),W.updating||F()}return R={getType:function(){return P},getAllBufferRanges:function(){try{return W.buffered}catch(G){return z.error("getAllBufferRanges exception: "+G.message),null}},getBuffer:function(){return W},append:function(G){var Ie=this,we=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise((function(ke,Ae){G?(ce.push({data:G,promise:{resolve:ke,reject:Ae},request:we}),re(Fe.bind(Ie))):Ae({chunk:G,error:new ve.Z(oe.APPEND_ERROR_CODE,oe.APPEND_ERROR_MESSAGE)})}))},remove:function(G){return new Promise((function(Ie,we){var ke=G.start,Ae=G.end;ke>=0&&Ae>ke?re((function(){try{W.remove(ke,Ae),re((function(){Ie({from:ke,to:Ae,unintended:!1}),G.resolve&&G.resolve()}))}catch(ue){we({from:ke,to:Ae,unintended:!1,error:new ve.Z(oe.REMOVE_ERROR_CODE,oe.REMOVE_ERROR_MESSAGE)}),G.reject&&G.reject(ue)}})):Ie()}))},abort:function(){return new Promise((function(G){try{ce=[],He.readyState==="open"?re((function(){try{W&&W.abort(),G()}catch{G()}})):(W&&W.setTextTrack&&He.readyState==="ended"&&W.abort(),G())}catch{G()}}))},reset:function(){if(W){try{Q=[],(function(){try{typeof W.removeEventListener=="function"&&(W.removeEventListener("updateend",se,!1),W.removeEventListener("error",te,!1),W.removeEventListener("abort",te,!1)),clearInterval(Z)}catch(G){z.error(G)}})(),ae=!1,ce=[],W.getClassName&&W.getClassName()==="TextSourceBuffer"||(z.debug("Removing sourcebuffer from media source"),He.removeSourceBuffer(W))}catch{}W=null}Oe=null},updateTimestampOffset:ge,initializeForStreamSwitch:function(G,Ie,we){P=(q=G).type;var ke=q.codec;(function(ue){W=ue.getBuffer()})(we),me();var Ae=[];return Ae.push(new Promise((function(ue){re((function(){var Se=W.appendWindowStart,qe=W.appendWindowEnd;W&&(W.abort(),W.appendWindowStart=Se,W.appendWindowEnd=qe),ue()}))}))),Ae.push(Le(q.streamInfo)),le.get().streaming.buffer.useChangeTypeForTrackSwitch&&Ae.push(Be(ke)),Ie&&Ie.MSETimeOffset!==void 0&&Ae.push(ge(Ie.MSETimeOffset)),Promise.all(Ae)},initializeForFirstUse:function(G,Ie,we){P=(q=Ie).type;var ke=q.codec;try{if(ke.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return Ke(G);W=He.addSourceBuffer(ke),me();var Ae=[];return Ae.push(Le(q.streamInfo)),we&&we.MSETimeOffset!==void 0&&Ae.push(ge(we.MSETimeOffset)),Promise.all(Ae)}catch(ue){return q.type==h.Z.TEXT&&!q.isFragmented||ke.indexOf('codecs="stpp')!==-1||ke.indexOf('codecs="vtt')!==-1||ke.indexOf("text/vtt")!==-1?Ke(G):Promise.reject(ue)}},updateAppendWindow:Le,changeType:Be},z=(0,C.Z)(K).getInstance().getLogger(R),R}et.__dashjs_factory_name="SourceBufferSink";var Y=I.Z.getClassFactory(et);function Ee(L){var R,P,z,W=this.context,q=[],Z=L;function K(le,_e){return q=q.filter((function(fe){return!((isNaN(_e)||fe.start<_e)&&(isNaN(le)||fe.end>le))})),Promise.resolve()}return R={getAllBufferRanges:function(){for(var le=[],_e=0;_e<q.length;_e++){var fe=q[_e];le.length===0||fe.start>le[le.length-1].end?le.push({start:fe.start,end:fe.end}):le[le.length-1].end=fe.end}var Q={start:function(ce){return le[ce].start},end:function(ce){return le[ce].end}};return Object.defineProperty(Q,"length",{get:function(){return le.length}}),Q},append:function(le){return le.segmentType!=="InitializationSegment"?(q.push(le),q.sort((function(_e,fe){return _e.start-fe.start})),z=null):z=le,P.debug("PreBufferSink appended chunk s: "+le.start+"; e: "+le.end),Z&&Z({chunk:le}),Promise.resolve()},remove:K,abort:function(){return Promise.resolve()},discharge:function(le,_e){var fe=(function(Q,ce){return q.filter((function(ae){return(isNaN(ce)||ae.start<ce)&&(isNaN(Q)||ae.end>Q)}))})(le,_e);return z&&(fe.push(z),z=null),K(le,_e),fe},reset:function(){q=[],z=null,Z=null},updateTimestampOffset:function(){return Promise.resolve()},waitForUpdateEnd:function(le){le()},getBuffer:function(){return this}},P=(0,C.Z)(W).getInstance().getLogger(R),R}Ee.__dashjs_factory_name="PreBufferSink";var Pe=I.Z.getClassFactory(Ee);function Xe(){var L={};return{save:function(R){var P=R.streamId,z=R.representationId;L[P]=L[P]||{},L[P][z]=R},extract:function(R,P){return L&&L[R]&&L[R][P]?L[R][P]:null},reset:function(){L={}}}}Xe.__dashjs_factory_name="InitCache";var Ze=I.Z.getSingletonFactory(Xe),at=.01,jt="BufferController";function xt(L){L=L||{};var R,P,z,W,q,Z,K,le,_e,fe,Q,ce,ae,He,Oe,Be,Ke,me,Le,ge,Fe,F=this.context,se=(0,A.Z)(F).getInstance(),te=L.errHandler,re=L.fragmentModel,G=L.representationController,Ie=L.adapter,we=L.textController,ke=L.abrController,Ae=L.playbackController,ue=L.streamInfo,Se=L.type,qe=L.settings;function gt(ft){var Kt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise((function(We,tt){Z=ft,_e&&Kt&&typeof _e.discharge=="function"?(fe=_e,mt(Kt).then((function(){We()})).catch((function(Mt){tt(Mt)}))):We()}))}function ut(ft){return Ie.convertRepresentationToRepresentationInfo(G.getRepresentationForQuality(ft))}function mt(ft){var Kt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return new Promise((function(We,tt){me&&ft?Z?(Q=!1,zt(ft,Kt).then((function(Mt){We(Mt)})).catch((function(Mt){tt(Mt)}))):(Q=!0,dt().then((function(Mt){We(Mt)})).catch((function(Mt){tt(Mt)}))):We(null)}))}function dt(){var ft=this;return new Promise((function(Kt,We){var tt=ke.getQualityFor(Se,ue.id);_e=Pe(F).create(lt.bind(ft)),Wn(ut(tt)).then((function(){Kt(_e)})).catch((function(){We()}))}))}function zt(ft,Kt){return new Promise((function(We,tt){var Mt=ke.getQualityFor(Se,ue.id);_e=Y(F).create({mediaSource:Z,textController:we,eventBus:se}),(function(mn,Cn,cr){var Si=ut(cr);return Cn&&Cn[Se]&&(Se===h.Z.VIDEO||Se===h.Z.AUDIO)?_e.initializeForStreamSwitch(mn,Si,Cn[Se]):_e.initializeForFirstUse(ue,mn,Si)})(ft,Kt,Mt).then((function(){return Wn(ut(Mt))})).then((function(){We(_e)})).catch((function(mn){P.fatal("Caught error on create SourceBuffer: "+mn),te.error(new ve.Z(oe.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,oe.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+Se)),tt(mn)}))}))}function Ut(ft){qe.get().streaming.cacheInitSegments&&(P.info("Init fragment finished loading saving to",Se+"'s init cache"),me.save(ft.chunk)),P.debug("Append Init fragment",Se," with representationId:",ft.chunk.representationId," and quality:",ft.chunk.quality,", data size:",ft.chunk.bytes.byteLength),Bt(ft.chunk)}function Ft(ft){Bt(ft.chunk,ft.request)}function Bt(ft){var Kt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;_e&&(_e.append(ft,Kt).then((function(We){lt(We)})).catch((function(We){lt(We)})),ft.mediaInfo.type===h.Z.VIDEO&&Zn(_.Z.VIDEO_CHUNK_RECEIVED,{chunk:ft}))}function Nn(ft){if(ft&&ft.length>0)for(var Kt=0,We=ft.length;Kt<We;Kt++)P.debug("Buffered range: "+ft.start(Kt)+" - "+ft.end(Kt)+", currentTime = ",Ae.getTime())}function lt(ft){if(ft.error)return ft.error.code===22&&(function(){if(Ke=!0,q=.8*Tn(),P.warn("Quota exceeded, Critical Buffer: "+q),q>0){var tt=Math.max(.2*q,1),Mt=q-tt,mn=Math.min(qe.get().streaming.buffer.bufferTimeAtTopQuality,.9*Mt),Cn=Math.min(qe.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*Mt),cr={streaming:{buffer:{bufferToKeep:parseFloat(tt.toFixed(5)),bufferTimeAtTopQuality:parseFloat(mn.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(Cn.toFixed(5))}}};qe.update(cr)}})(),void(ft.error.code!==22&&Fn()||(P.warn("Clearing playback buffer to overcome quota exceed situation"),Zn(_.Z.QUOTA_EXCEEDED,{criticalBufferLevel:q,quotaExceededTime:ft.chunk.start}),Ht(rn())));if(_e&&(Vn(),Ke=!1,(He=ft.chunk)&&He.endFragment)){He&&!isNaN(He.index)&&(K=Math.max(He.index,K),Mn());var Kt=_e.getAllBufferRanges();He.segmentType===Ye.w.MEDIA_SEGMENT_TYPE&&(Nn(Kt),Lt(),(function(){if(!isNaN(Fe)&&!Q)if(Se===h.Z.AUDIO||Se===h.Z.VIDEO){var tt=Ae.getTime(),Mt=Xt(tt,0),mn=Xt(Fe,0);if(Mt&&mn&&Mt.start===mn.start)Fe=NaN;else{var Cn=G.getCurrentRepresentation().segmentDuration,cr=Xt(Fe,Cn);cr&&(qe.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(tt-Fe)>Cn?Fe<=cr.end&&Ae.seek(Math.max(Fe,cr.start),!1,!0):tt<cr.start&&Ae.seek(cr.start,!1,!0))}}else Fe=NaN})());var We=!1;ce&&(ce.indexOf(He)>0&&(We=!0),ce=null),He&&!We&&Zn(_.Z.BYTES_APPENDED_END_FRAGMENT,{quality:He.quality,startTime:He.start,index:He.index,bufferedRanges:Kt,segmentType:He.segmentType,mediaType:Se})}}function bt(){return new Promise((function(ft,Kt){var We=tn();if(!We||We.length===0)return Lt(),void ft();Ht(We).then((function(){ft()})).catch((function(tt){Kt(tt)}))}))}function tn(ft){var Kt=[],We=_e.getAllBufferRanges();if(!We||We.length===0)return Kt;if(!ft&&ft!==0||isNaN(ft))Kt.push({start:We.start(0),end:We.end(We.length-1)+.5});else{var tt=(function(mn,Cn){var cr=qe.get().streaming.buffer.bufferToKeep,Si=Cn.start(0);if(mn-Si>cr){var to=Math.max(0,mn-cr),Di=re.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:mn,threshold:at})[0];if(Di&&(to=Math.min(Di.startTime,to)),to>0)return{start:Si,end:to}}return null})(ft,We),Mt=(function(mn,Cn){var cr=Cn.end(Cn.length-1)+.5,Si=Dn(mn),to=ue.manifestInfo.duration>=qe.get().streaming.buffer.longFormContentDurationThreshold?qe.get().streaming.buffer.bufferTimeAtTopQualityLongForm:qe.get().streaming.buffer.bufferTimeAtTopQuality,Di=isNaN(Si)?mn:Math.min(Si,mn+to);if(Di>=Cn.end(Cn.length-1))return null;var zo=re.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:mn,threshold:at})[0];if(zo&&(Di=Math.max(zo.startTime+zo.duration,Di)),qe.get().streaming.buffer.avoidCurrentTimeRangePruning){for(var bo=0;bo<Cn.length;bo++)if(Cn.start(bo)<=mn&&mn<=Cn.end(bo)&&Cn.start(bo)<=Di&&Di<=Cn.end(bo)){var Ma=Di;Di=bo+1<Cn.length?Cn.start(bo+1):Cn.end(bo)+1,P.debug("Buffered range ["+Cn.start(bo)+", "+Cn.end(bo)+"] overlaps with targetTime "+mn+" and range to be pruned ["+Ma+", "+cr+"], using ["+Di+", "+cr+"] instead"+(Di<cr?"":" (no actual pruning)"));break}}return Di<Cn.end(Cn.length-1)?{start:Di,end:cr}:null})(ft,We);tt&&Kt.push(tt),Mt&&Kt.push(Mt)}return Kt}function Lt(){(!ge||Se===h.Z.TEXT&&we.isTextEnabled())&&Vn()}function an(){gr()}function ln(){gr(),Fe=NaN}function Xt(ft,Kt){if(!_e)return null;var We,tt,Mt=_e.getAllBufferRanges(),mn=0,Cn=0,cr=null,Si=null,to=0,Di=isNaN(Kt)?.15:Kt;if(Mt!=null){for(tt=0,We=Mt.length;tt<We;tt++)if(mn=Mt.start(tt),Cn=Mt.end(tt),cr===null)to=Math.abs(mn-ft),(ft>=mn&&ft<Cn||to<=Di)&&(cr=mn,Si=Cn);else{if(!((to=mn-Si)<=Di))break;Si=Cn}if(cr!==null)return{start:cr,end:Si}}return null}function Vn(){if(Ae){var ft=Ae.getTime()||0;Q&&(ft=isNaN(Fe)?0:Fe);var Kt=qe.get().streaming.gaps.jumpGaps&&!isNaN(qe.get().streaming.gaps.smallGapLimit)?qe.get().streaming.gaps.smallGapLimit:NaN;W=Math.max((function(We,tt){var Mt;return qe.get().streaming.gaps.jumpGaps&&(tt=qe.get().streaming.gaps.smallGapLimit),(Mt=Xt(We,tt))===null?0:Mt.end-We})(ft,Kt),0),Zn(_.Z.BUFFER_LEVEL_UPDATED,{mediaType:Se,bufferLevel:W}),gr()}}function Mn(){var ft=K>=le-1,Kt=Ae.getTimeToStreamEnd(ue)-W<1e-5;!ft&&!Kt||z||(Yt(!0),P.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ".concat(ue.id," and type ").concat(Se)))}function gr(){Se!==h.Z.AUDIO&&Se!==h.Z.VIDEO||((!Ae.getLowLatencyModeEnabled()&&W<qe.get().streaming.buffer.stallThreshold||W===0)&&!z?vr(E.Z.BUFFER_EMPTY):(z||W>=qe.get().streaming.buffer.stallThreshold||Ae.getLowLatencyModeEnabled()&&W>0)&&vr(E.Z.BUFFER_LOADED))}function vr(ft){ae===ft||ft===E.Z.BUFFER_EMPTY&&Ae.getTime()===0||Se===h.Z.TEXT&&!we.isTextEnabled()||(ae=ft,Zn(_.Z.BUFFER_LEVEL_STATE_CHANGED,{state:ft}),Zn(ft===E.Z.BUFFER_LOADED?_.Z.BUFFER_LOADED:_.Z.BUFFER_EMPTY),P.debug(ft===E.Z.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function Ct(){_e&&Se!==h.Z.TEXT&&(z||Ht(rn()))}function rn(){var ft=[],Kt=_e.getAllBufferRanges();if(!Kt||Kt.length===0)return ft;var We=Ae.getTime(),tt=Math.max(0,We-qe.get().streaming.buffer.bufferToKeep),Mt=re.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:We,threshold:at})[0];if(Mt)tt=Math.min(Mt.startTime,tt);else if(We===0&&Ae.getIsDynamic())return[];if(Kt.start(0)<=tt){for(var mn={start:0,end:tt},Cn=0;Cn<Kt.length&&Kt.end(Cn)<=tt;Cn++)mn.end=Kt.end(Cn);mn.start<mn.end&&ft.push(mn)}return ft}function Ht(ft){return new Promise((function(Kt,We){if(ft&&_e&&ft.length!==0){var tt=[];ft.forEach((function(Mt){tt.push((function(mn){return new Promise((function(Cn,cr){mn.resolve=Cn,mn.reject=cr,Le.push(mn)}))})(Mt))})),Be||yn(),Promise.all(tt).then((function(){Kt()})).catch((function(Mt){We(Mt)}))}else Kt()}))}function yn(){try{if(Le.length===0||!_e)return P.debug("Nothing to prune, halt pruning"),Le=[],void(Be=!1);var ft=_e.getBuffer();if(!ft||!ft.buffered||ft.buffered.length===0)return P.debug("SourceBuffer is empty (or does not exist), halt pruning"),Le=[],void(Be=!1);var Kt=Le.shift();P.debug("".concat(Se,": Removing buffer from: ").concat(Kt.start," to ").concat(Kt.end)),Be=!0,Ae.getTime()<Kt.end&&Yt(!1),_e.remove(Kt).then((function(We){In(We)})).catch((function(We){In(We)}))}catch{Be=!1}}function In(ft){P.debug("onRemoved buffer from:",ft.from,"to",ft.to),_e&&(Nn(_e.getAllBufferRanges()),Le.length===0&&(Be=!1,Vn()),ft.unintended&&(P.warn("Detected unintended removal from:",ft.from,"to",ft.to,"setting streamprocessor time to",ft.from),Zn(_.Z.SEEK_TARGET,{time:ft.from})),Be?yn():(ge?ge=!1:Vn(),Zn(_.Z.BUFFER_CLEARED,{from:ft.from,to:ft.to,unintended:ft.unintended,hasEnoughSpaceToAppend:Fn(),quotaExceeded:Ke})))}function Wn(ft){return new Promise((function(Kt){ft&&ft.MSETimeOffset!==void 0&&_e&&_e.updateTimestampOffset?_e.updateTimestampOffset(ft.MSETimeOffset).then((function(){Kt()})).catch((function(){Kt()})):Kt()}))}function Hn(){return _e&&!z?_e.updateAppendWindow(ue):Promise.resolve()}function Yn(){++Oe*(qe.get().streaming.wallclockTimeUpdateInterval/1e3)>=qe.get().streaming.buffer.bufferPruningInterval&&(Oe=0,Ct())}function rr(){gr()}function Yt(ft){(z=ft)?Zn(_.Z.BUFFERING_COMPLETED):le=Number.POSITIVE_INFINITY}function Tn(){try{var ft,Kt,We=_e.getAllBufferRanges(),tt=0;if(!We)return tt;for(Kt=0,ft=We.length;Kt<ft;Kt++)tt+=We.end(Kt)-We.start(Kt);return tt}catch{return 0}}function Dn(ft){try{var Kt=ft,We=_e.getAllBufferRanges();if(!We||We.length===0)return NaN;for(var tt=0;Kt===ft&&tt<We.length;){var Mt=We.start(tt),mn=We.end(tt);Kt>=Mt&&Kt<=mn&&(Kt=mn),tt+=1}return Kt===ft?NaN:Kt}catch{}}function Fn(){var ft=Tn();return isNaN(ft)||ft<q}function Zn(ft,Kt){var We=Kt||{};se.trigger(ft,We,{streamId:ue.id,mediaType:Se})}function Rt(ft,Kt){if(q=Number.POSITIVE_INFINITY,ae=void 0,le=Number.POSITIVE_INFINITY,K=0,He=null,z=!1,Be=!1,Ke=!1,W=0,Oe=0,Le=[],Fe=NaN,Q=!1,_e){var We=_e;_e=null,ft||Kt||We.abort().then((function(){We.reset(Kt),We=null}))}ge=!1}return R={initialize:function(ft){gt(ft),se.on(_.Z.INIT_FRAGMENT_LOADED,Ut,R),se.on(_.Z.MEDIA_FRAGMENT_LOADED,Ft,R),se.on(_.Z.WALLCLOCK_TIME_UPDATED,Yn,R),se.on(v.Z.PLAYBACK_PLAYING,ln,R),se.on(v.Z.PLAYBACK_PROGRESS,Lt,R),se.on(v.Z.PLAYBACK_TIME_UPDATED,Lt,R),se.on(v.Z.PLAYBACK_RATE_CHANGED,rr,R),se.on(v.Z.PLAYBACK_STALLED,an,R)},getStreamId:function(){return ue.id},getType:function(){return Se},getBufferControllerType:function(){return jt},createBufferSink:mt,dischargePreBuffer:function(){if(_e&&fe&&typeof fe.discharge=="function"){var ft=fe.getAllBufferRanges();if(ft.length>0){for(var Kt="Beginning "+Se+"PreBuffer discharge, adding buffer for:",We=0;We<ft.length;We++)Kt+=" start: "+ft.start(We)+", end: "+ft.end(We)+";";P.debug(Kt)}else P.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");ce=[];for(var tt=fe.discharge(),Mt=null,mn=0;mn<tt.length;mn++){var Cn=tt[mn];if(Cn.segmentType!==Ye.w.INIT_SEGMENT_TYPE){var cr=me.extract(Cn.streamId,Cn.representationId);cr&&Mt!==cr&&(ce.push(cr),_e.append(cr),Mt=cr)}ce.push(Cn),_e.append(Cn)}fe.reset(),fe=null}},getBuffer:function(){return _e},getBufferLevel:function(){return W},getRangeAt:Xt,hasBufferAtTime:function(ft){try{var Kt=_e.getAllBufferRanges();if(!Kt||Kt.length===0)return!1;for(var We=0;We<Kt.length;){var tt=Kt.start(We),Mt=Kt.end(We);if(ft>=tt&&ft<=Mt)return!0;We+=1}return!1}catch(mn){return P.error(mn),!1}},pruneBuffer:Ct,setMediaSource:gt,getMediaSource:function(){return Z},appendInitSegmentFromCache:function(ft){var Kt=me.extract(ue.id,ft);return!!Kt&&(P.info("Append Init fragment",Se," with representationId:",Kt.representationId," and quality:",Kt.quality,", data size:",Kt.bytes.byteLength),Bt(Kt),!0)},getIsBufferingCompleted:function(){return z},setIsBufferingCompleted:Yt,getIsPruningInProgress:function(){return Be},reset:function(ft,Kt){se.off(_.Z.INIT_FRAGMENT_LOADED,Ut,this),se.off(_.Z.MEDIA_FRAGMENT_LOADED,Ft,this),se.off(_.Z.WALLCLOCK_TIME_UPDATED,Yn,this),se.off(v.Z.PLAYBACK_PLAYING,ln,this),se.off(v.Z.PLAYBACK_PROGRESS,Lt,this),se.off(v.Z.PLAYBACK_TIME_UPDATED,Lt,this),se.off(v.Z.PLAYBACK_RATE_CHANGED,rr,this),se.off(v.Z.PLAYBACK_STALLED,an,this),Rt(ft,Kt)},prepareForPlaybackSeek:function(){return z&&Yt(!1),_e.abort()},prepareForReplacementTrackSwitch:function(ft){return new Promise((function(Kt,We){_e.abort().then((function(){return Hn()})).then((function(){return qe.get().streaming.buffer.useChangeTypeForTrackSwitch?_e.changeType(ft):Promise.resolve()})).then((function(){return bt()})).then((function(){Yt(!1),Kt()})).catch((function(tt){We(tt)}))}))},prepareForNonReplacementTrackSwitch:function(ft){return new Promise((function(Kt,We){Hn().then((function(){return qe.get().streaming.buffer.useChangeTypeForTrackSwitch?_e.changeType(ft):Promise.resolve()})).then((function(){Kt()})).catch((function(tt){We(tt)}))}))},prepareForForceReplacementQualitySwitch:function(ft){return new Promise((function(Kt,We){_e.abort().then((function(){return Hn()})).then((function(){return bt()})).then((function(){return Wn(ft)})).then((function(){Yt(!1),Kt()})).catch((function(tt){We(tt)}))}))},updateAppendWindow:Hn,getAllRangesWithSafetyFactor:tn,getContinuousBufferTimeForTargetTime:Dn,clearBuffers:Ht,pruneAllSafely:bt,updateBufferTimestampOffset:Wn,setSeekTarget:function(ft){Fe=ft},segmentRequestingCompleted:function(ft){isNaN(ft)||(le=ft,Mn())}},P=(0,C.Z)(F).getInstance().getLogger(R),me=Ze(F).getInstance(),Rt(),R}xt.__dashjs_factory_name=jt;var ht=I.Z.getClassFactory(xt),It="NotFragmentedTextBufferController";function Ue(L){L=L||{};var R,P,z,W,q,Z,K=this.context,le=(0,A.Z)(K).getInstance(),_e=L.textController,fe=L.errHandler,Q=L.streamInfo,ce=L.type;function ae(Be){W=Be}function He(Be){var Ke,me;P!==Be&&(P=Be)&&(Ke=_.Z.BUFFERING_COMPLETED,me={},le.trigger(Ke,me,{streamId:Q.id,mediaType:ce}))}function Oe(Be){Be.chunk.bytes&&!P&&(Z.save(Be.chunk),q.append(Be.chunk),He(!0))}return R={initialize:function(Be){ae(Be)},getStreamId:function(){return Q.id},getType:function(){return ce},getBufferControllerType:function(){return It},createBufferSink:function(Be){return new Promise((function(Ke,me){try{(q=Y(K).create({mediaSource:W,textController:_e,eventBus:le})).initializeForFirstUse(Q,Be),z||(q.getBuffer()&&typeof q.getBuffer().initialize=="function"&&q.getBuffer().initialize(),z=!0),Ke(q)}catch(Le){fe.error(new ve.Z(oe.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,oe.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+ce)),me(Le)}}))},dischargePreBuffer:function(){},getBuffer:function(){return q},getBufferLevel:function(){return 0},getRangeAt:function(){return null},pruneBuffer:function(){},hasBufferAtTime:function(){return!0},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:ae,getMediaSource:function(){return W},appendInitSegmentFromCache:function(Be){return Z.extract(Q.id,Be)!==null},getIsBufferingCompleted:function(){return P},setIsBufferingCompleted:He,getIsPruningInProgress:function(){return!1},reset:function(Be){le.off(_.Z.INIT_FRAGMENT_LOADED,Oe,R),!Be&&q&&(q.abort(),q.reset(),q=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return P=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}},z=!1,W=null,P=!1,Z=Ze(K).getInstance(),le.on(_.Z.INIT_FRAGMENT_LOADED,Oe,R),R}Ue.__dashjs_factory_name=It;var Ve=I.Z.getClassFactory(Ue);function _t(L){L=L||{};var R,P,z,W,q,Z,K,le,_e,fe,Q,ce,ae,He=this.context,Oe=(0,A.Z)(He).getInstance(),Be=L.dashMetrics,Ke=L.mediaPlayerModel,me=L.fragmentModel,Le=L.abrController,ge=L.playbackController,Fe=L.textController,F=L.type,se=L.bufferController,te=L.representationController,re=L.settings;function G(){ce=!0}function Ie(){ce=!1}function we(zt){if(!se.getIsBufferingCompleted()){ke();var Ut=isNaN(zt)?0:zt;q=setTimeout(Ae,Ut)}}function ke(){q&&(clearTimeout(q),q=null)}function Ae(){try{if((function(){try{return F===h.Z.TEXT&&!Fe.isTextEnabled()||ge.isPaused()&&(!ge.getStreamController().getInitialPlayback()||!ge.getStreamController().getAutoPlay())&&!re.get().streaming.scheduling.scheduleWhilePaused}catch{return!1}})())return void ke();if((function(){try{return!!ce&&te.getCurrentRepresentationInfo()&&(isNaN(_e)||fe||(Ft=P.id,Bt=Le.getMaxAllowedIndexFor(F,Ft),!(!isNaN(le)&&le==Bt||(z.info("Top quality "+F+" index has changed from "+le+" to "+Bt),le=Bt,0)))||(function(){var Nn=te.getCurrentRepresentationInfo();return!F||!Nn||Be.getCurrentBufferLevel(F)<ue()})())}catch{return!1}var Ft,Bt})()){var zt=!1;ae&&(zt=Le.checkPlaybackQuality(F,P.id)),zt||(Ut=te.getCurrentRepresentationInfo(),Q||Ut.quality!==_e||fe?(fe?(z.debug("Switch track for "+F+", representation id = "+Ut.id),fe=!1):z.debug("Quality has changed, get init request for representationid = "+Ut.id),Oe.trigger(_.Z.INIT_FRAGMENT_NEEDED,{representationId:Ut.id,sender:R},{streamId:P.id,mediaType:F}),ae=!1,Q=!1):(z.debug("Media segment needed for ".concat(F," and stream id ").concat(P.id)),Oe.trigger(_.Z.MEDIA_FRAGMENT_NEEDED,{},{streamId:P.id,mediaType:F}),ae=!0))}else we(ge.getLowLatencyModeEnabled()?re.get().streaming.scheduling.lowLatencyTimeout:re.get().streaming.scheduling.defaultTimeout)}catch{we(ge.getLowLatencyModeEnabled()?re.get().streaming.scheduling.lowLatencyTimeout:re.get().streaming.scheduling.defaultTimeout)}var Ut}function ue(){var zt=NaN,Ut=te.getCurrentRepresentationInfo();return F&&Ut&&(zt=F===h.Z.TEXT?(function(){try{if(Fe.isTextEnabled()){var Ft=te.getCurrentRepresentationInfo();if(isNaN(Ft.fragmentDuration)){var Bt=Be.getCurrentSchedulingInfo(E.Z.SCHEDULING_INFO);return Bt?Bt.duration:0}return Ft.fragmentDuration}return 0}catch{return 0}})():F===h.Z.AUDIO&&Z?(function(){try{var Ft=Be.getCurrentBufferLevel(h.Z.VIDEO),Bt=te.getCurrentRepresentationInfo();return isNaN(Bt.fragmentDuration)?Ft+1:Math.max(Ft+1,Bt.fragmentDuration)}catch{return 0}})():(function(){try{var Ft=te.getCurrentRepresentationInfo().mediaInfo.streamInfo;return Le.isPlayingAtTopQuality(Ft)?Ft.manifestInfo.duration>=re.get().streaming.buffer.longFormContentDurationThreshold?re.get().streaming.buffer.bufferTimeAtTopQualityLongForm:re.get().streaming.buffer.bufferTimeAtTopQuality:Ke.getStableBufferTime()}catch{return Ke.getStableBufferTime()}})()),zt}function Se(){qe(!0)}function qe(zt){if(ge&&me){var Ut=me.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:ge.getTime(),threshold:0})[0];Ut&&ge.getTime()>=Ut.startTime&&((!K.mediaInfo||Ut.mediaInfo.type===K.mediaInfo.type&&Ut.mediaInfo.index!==K.mediaInfo.index)&&zt&&Oe.trigger(_.Z.TRACK_CHANGE_RENDERED,{mediaType:F,oldMediaInfo:K.mediaInfo,newMediaInfo:Ut.mediaInfo,streamId:P.id}),Ut.quality===K.quality&&Ut.adaptationIndex===K.adaptationIndex||!zt||(z.debug("Quality change rendered for streamId ".concat(P.id," and type ").concat(F)),Oe.trigger(_.Z.QUALITY_CHANGE_RENDERED,{mediaType:F,oldQuality:K.quality,newQuality:Ut.quality,streamId:P.id})),K={mediaInfo:Ut.mediaInfo,quality:Ut.quality,adaptationIndex:Ut.adaptationIndex})}}function gt(){me.abortRequests(),ke()}function ut(){re.get().streaming.scheduling.scheduleWhilePaused||we()}function mt(zt){Be.updatePlayListTraceMetrics({playbackspeed:zt.playbackRate.toString()})}function dt(){ae=!0,W=0,_e=NaN,K={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},le=NaN,fe=!1,Q=!1,ce=!0}return R={initialize:function(zt){Z=zt,Oe.on(_.Z.URL_RESOLUTION_FAILED,gt,R),Oe.on(v.Z.PLAYBACK_STARTED,ut,R),Oe.on(v.Z.PLAYBACK_RATE_CHANGED,mt,R),Oe.on(v.Z.PLAYBACK_TIME_UPDATED,Se,R),Oe.on(v.Z.MANAGED_MEDIA_SOURCE_START_STREAMING,G,R),Oe.on(v.Z.MANAGED_MEDIA_SOURCE_END_STREAMING,Ie,R)},getType:function(){return F},getStreamId:function(){return P.id},setTimeToLoadDelay:function(zt){W=zt},getTimeToLoadDelay:function(){return W},setSwitchTrack:function(zt){fe=zt},getSwitchTrack:function(){return fe},startScheduleTimer:we,clearScheduleTimer:ke,reset:function(){Oe.off(_.Z.URL_RESOLUTION_FAILED,gt,R),Oe.off(v.Z.PLAYBACK_STARTED,ut,R),Oe.off(v.Z.PLAYBACK_RATE_CHANGED,mt,R),Oe.off(v.Z.PLAYBACK_TIME_UPDATED,Se,R),Oe.off(v.Z.MANAGED_MEDIA_SOURCE_START_STREAMING,G,R),Oe.off(v.Z.MANAGED_MEDIA_SOURCE_END_STREAMING,Ie,R),ke(),qe(!1),dt(),P=null},getBufferTarget:ue,getPlaybackController:function(){return ge},setCheckPlaybackQuality:function(zt){ae=zt},setInitSegmentRequired:function(zt){Q=zt},setLastInitializedQuality:function(zt){_e=zt}},z=(0,C.Z)(He).getInstance().getLogger(R),dt(),P=L.streamInfo,R}_t.__dashjs_factory_name="ScheduleController";var M=I.Z.getClassFactory(_t),x=f(7387);function U(L){var R,P,z,W,q,Z,K=(L=L||{}).eventBus,le=L.events,_e=L.abrController,fe=L.dashMetrics,Q=L.playbackController,ce=L.timelineConverter,ae=L.type,He=L.streamInfo,Oe=L.dashConstants,Be=L.segmentsController,Ke=L.isDynamic,me=L.adapter;function Le(){return ae}function ge(){return z}function Fe(){return Z}function F(){P=null,z=!0,W=[],q=null}function se(ke){return new Promise((function(Ae,ue){var Se=ke.hasInitialization(),qe=ke.hasSegments(),gt=[];gt.push(Be.updateInitData(ke,Se)),gt.push(Be.updateSegmentData(ke,qe)),Promise.all(gt).then((function(ut){var mt;ut[0]&&!ut[0].error&&(ke=(function(dt,zt){return zt&&!zt.error&&zt.representation?zt.representation:dt})(ke,ut[0])),ut[1]&&!ut[1].error&&(ke=(function(dt,zt){if(zt&&!zt.error){var Ut,Ft,Bt,Nn,lt=zt.segments,bt=[],tn=0;for(Ut=0,Ft=lt?lt.length:0;Ut<Ft;Ut++)Bt=lt[Ut],(Nn=(0,x.TJ)(ce,Ke,dt,Bt.startTime,Bt.duration,Bt.timescale,Bt.media,Bt.mediaRange,tn))&&(bt.push(Nn),Nn=null,tn++);return bt.length>0&&(dt.segments=bt),dt}})(ke,ut[1])),(mt=ke).mediaFinishedInformation=Be.getMediaFinishedInformation(mt),(function(dt){if(ge()){var zt,Ut,Ft=fe.getCurrentManifestUpdate(),Bt=!1;if(Ft){for(var Nn=0;Nn<Ft.representationInfo.length;Nn++)if((zt=Ft.representationInfo[Nn]).index===dt.index&&zt.mediaType===Le()){Bt=!0;break}Bt||fe.addManifestUpdateRepresentationInfo(dt,Le())}if((function(){for(var bt=0,tn=W.length;bt<tn;bt++){var Lt=W[bt].segmentInfoType;if(!W[bt].hasInitialization()||(Lt===Oe.SEGMENT_BASE||Lt===Oe.BASE_URL)&&!W[bt].segments)return!1}return!0})()){_e.setPlaybackQuality(ae,He,(Ut=Z,W.indexOf(Ut)));var lt=fe.getCurrentDVRInfo(ae);lt&&fe.updateManifestUpdateInfo({latency:lt.range.end-Q.getTime()}),fe.getCurrentRepresentationSwitch(Fe().adaptation.type)||te(),G()}}})(ke),Ae()})).catch((function(ut){ue(ut)}))}))}function te(){(function(){if(!(_e&&fe&&Q&&ce))throw new Error(h.Z.MISSING_CONFIG_ERROR)})();var ke=new Date,Ae=Fe(),ue=1e3*Q.getTime();Ae&&fe.addRepresentationSwitch(Ae.adaptation.type,ke,ue,Ae.id),K.trigger(v.Z.REPRESENTATION_SWITCH,{mediaType:ae,streamId:He.id,currentRepresentation:Ae,numberOfRepresentations:W.length},{streamId:He.id,mediaType:ae})}function re(ke){return ke==null||ke>=W.length?null:W[ke]}function G(ke){z=!1,K.trigger(le.DATA_UPDATE_COMPLETED,{data:P,currentRepresentation:Z,error:ke},{streamId:He.id,mediaType:ae})}function Ie(ke){Z=ke,q=me.convertRepresentationToRepresentationInfo(Z)}function we(ke){if(ke.newDuration){var Ae=Fe();Ae&&Ae.adaptation.period&&(Ae.adaptation.period.duration=ke.newDuration)}}return R={getStreamId:function(){return He.id},getType:Le,getData:function(){return P},isUpdating:ge,updateData:function(ke,Ae,ue,Se,qe){return new Promise((function(gt,ut){if(z=!0,W=Ae,P=ke,Ie(re(qe)),ue!==h.Z.VIDEO&&ue!==h.Z.AUDIO&&(ue!==h.Z.TEXT||!Se))return G(),void gt();for(var mt=[],dt=0,zt=W.length;dt<zt;dt++){var Ut=W[dt];mt.push(se(Ut))}Promise.all(mt).then((function(){Ie(re(qe)),gt()})).catch((function(Ft){ut(Ft)}))}))},getCurrentRepresentation:Fe,getCurrentRepresentationInfo:function(){return q},getRepresentationForQuality:re,prepareQualityChange:function(ke){Ie(re(ke)),te()},reset:function(){K.off(v.Z.MANIFEST_VALIDITY_CHANGED,we,R),F()}},F(),K.on(v.Z.MANIFEST_VALIDITY_CHANGED,we,R),R}U.__dashjs_factory_name="RepresentationController";var j=I.Z.getClassFactory(U),he=f(3106),de=f(9326),ot=f(7473),wt=f(2594);function st(L,R){if(!(L instanceof R))throw new TypeError("Cannot call a class as a function")}var nt=function L(){st(this,L),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};nt.INITIAL_PLAYOUT_START_REASON="initial_playout",nt.SEEK_START_REASON="seek",nt.RESUME_FROM_PAUSE_START_REASON="resume",nt.METRICS_COLLECTION_START_REASON="metrics_collection_start";var rt=function L(){st(this,L),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};rt.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",rt.REBUFFERING_REASON="rebuffering",rt.USER_REQUEST_STOP_REASON="user_request",rt.END_OF_PERIOD_STOP_REASON="end_of_period",rt.END_OF_CONTENT_STOP_REASON="end_of_content",rt.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",rt.FAILURE_STOP_REASON="failure";var ct=f(7802);function St(){return{ntpToUTC:function(L){var R=new Date(Date.UTC(1900,0,1,0,0,0));return new Date(R.getTime()+L).getTime()}}}St.__dashjs_factory_name="TimeUtils";var Wt=I.Z.getSingletonFactory(St);function $t(L){L=L||{};var R,P,z,W,q,Z,K,le,_e,fe,Q,ce,ae,He,Oe,Be=this.context,Ke=(0,A.Z)(Be).getInstance(),me=L.streamInfo,Le=L.type,ge=L.errHandler,Fe=L.mimeType,F=L.timelineConverter,se=L.adapter,te=L.manifestModel,re=L.mediaPlayerModel,G=L.fragmentModel,Ie=L.abrController,we=L.playbackController,ke=L.mediaController,Ae=L.textController,ue=L.dashMetrics,Se=L.settings,qe=L.boxParser,gt=L.segmentBlacklistController;function ut(){return me.id}function mt(){return Le}function dt(){return se.getIsTextTrack(le.getData())}function zt(){q=[],W=null,He=0,_e=!1,fe=!1,Q=!1,Oe=null}function Ut(Rt){return!isNaN(Rt)&&!isNaN(me.duration)&&isFinite(me.duration)&&Rt>=me.start+me.duration}function Ft(Rt){var ft=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(Rt.sender){if(we.getIsManifestUpdateInProgress())tn();else if((!dt()||Ae.isTextEnabled())&&Z&&Rt.representationId&&!Z.appendInitSegmentFromCache(Rt.representationId)){var Kt=le.getCurrentRepresentation();if(Kt.range===0)return void Bt();var We=ce?ce.getInitRequest(W,Kt):null;We?G.executeRequest(We):ft&&(K.setInitSegmentRequired(!0),tn())}}}function Bt(Rt){var ft=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(we.getIsManifestUpdateInProgress()||Z.getIsPruningInProgress())tn();else{var Kt=bt();Kt?(_e=!1,fe=!1,Nn(Kt)):lt(ft)}}function Nn(Rt){isNaN(Rt.startTime+Rt.duration)||(He=Rt.startTime+Rt.duration),Rt.delayLoadingTime=new Date().getTime()+K.getTimeToLoadDelay(),K.setTimeToLoadDelay(0),(function(ft){var Kt=ft.url;return ft.range&&(Kt=Kt.concat("_",ft.range)),gt.contains(Kt)})(Rt)?(P.warn("Fragment request url ".concat(Rt.url," for stream id ").concat(me.id," and media type ").concat(Le," is on the ignore list and will be skipped")),tn()):(P.debug("Next fragment request url for stream id ".concat(me.id," and media type ").concat(Le," is ").concat(Rt.url)),G.executeRequest(Rt))}function lt(Rt){var ft,Kt=le.getCurrentRepresentation();if(!Se.get().streaming.gaps.enableSeekFix||!_e&&we.getTime()!==0||(z?z&&Kt.segmentInfoType===p.Z.SEGMENT_TIMELINE&&(ft=ce.getValidTimeAheadOfTargetTime(He,W,Kt,Se.get().streaming.gaps.threshold)):ft=ce.getValidTimeAheadOfTargetTime(He,W,Kt,Se.get().streaming.gaps.threshold),isNaN(ft)||ft===He)){if(ce.isLastSegmentRequested(Kt,He)){var We=ce.getCurrentIndex();return P.debug("Segment requesting for stream ".concat(me.id," has finished")),Ke.trigger(_.Z.STREAM_REQUESTING_COMPLETED,{segmentIndex:We},{streamId:me.id,mediaType:Le}),Z.segmentRequestingCompleted(We),void K.clearScheduleTimer()}Rt&&tn()}else we.isSeeking()||we.getTime()===0?(P.warn("Adjusting playback time ".concat(ft," because of gap in the manifest. Seeking by ").concat(ft-He)),we.seek(ft,!1,!1)):(P.warn("Adjusting buffering time ".concat(ft," because of gap in the manifest. Adjusting time by ").concat(ft-He)),Zn(ft),Rt&&tn())}function bt(){var Rt,ft=Hn();if(isNaN(He)||mt()===h.Z.TEXT&&!Ae.isTextEnabled())return null;if(ce){var Kt=le&&ft?le.getRepresentationForQuality(ft.quality):null;Rt=_e?ce.getSegmentRequestForTime(W,Kt,He):fe?ce.repeatSegmentRequest(W,Kt):ce.getNextSegmentRequest(W,Kt)}return Rt}function tn(){K.startScheduleTimer(we.getLowLatencyModeEnabled()?Se.get().streaming.scheduling.lowLatencyTimeout:Se.get().streaming.scheduling.defaultTimeout)}function Lt(Rt){Rt.error||Z.getIsBufferingCompleted()||Z.updateBufferTimestampOffset(Rt.currentRepresentation)}function an(Rt){ue.addBufferState(Le,Rt.state,K.getBufferTarget()),Rt.state!==E.Z.BUFFER_EMPTY||we.isSeeking()||(P.info("Buffer is empty! Stalling!"),ue.pushPlayListTraceMetrics(new Date,rt.REBUFFERING_REASON))}function ln(Rt){G.syncExecutedRequestsWithBufferedRange(Z.getBuffer().getAllBufferRanges(),me.duration),Rt.quotaExceeded&&Rt.from>we.getTime()&&Zn(Rt.from),Rt.hasEnoughSpaceToAppend&&Rt.quotaExceeded&&K.startScheduleTimer()}function Xt(Rt){if(Rt&&Rt.lastRequestAppended&&Rt.lastRequestAppended.url){var ft=Rt.lastRequestAppended.url;Rt.lastRequestAppended.range&&(ft=ft.concat("_",Rt.lastRequestAppended.range)),P.warn("Blacklisting segment with url ".concat(ft)),gt.add(ft)}}function Vn(Rt){if(P.debug("Appended bytes for ".concat(Rt.mediaType," and stream id ").concat(Rt.streamId)),Rt.segmentType===Ye.w.INIT_SEGMENT_TYPE){var ft=Rt.quality;K.setLastInitializedQuality(ft),P.info("["+Le+"] lastInitializedRepresentationInfo changed to "+Rt.quality)}Oe?Mn(Oe):K.startScheduleTimer(0)}function Mn(Rt){var ft=G.getRequests({state:X.FRAGMENT_MODEL_LOADING});if(ft&&ft.length>0)return P.debug("Preparing for default quality switch: Waiting for ongoing segment request to be finished before applying switch."),void(Oe=Rt);Z.updateBufferTimestampOffset(Rt).then((function(){K.setCheckPlaybackQuality(!1),W.segmentAlignment||W.subSegmentAlignment?K.startScheduleTimer():Dn(),Oe=null,Q=!1})).catch((function(){Oe=null,Q=!1}))}function gr(Rt){P.info("onFragmentLoadingAbandoned request: "+Rt.request.url+" has been aborted"),we.isSeeking()||K.getSwitchTrack()||Q||(P.info("onFragmentLoadingAbandoned request: "+Rt.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),Rt.request&&Rt.request.isInitializationRequest()?K.setInitSegmentRequired(!0):Zn(Rt.request.startTime+Rt.request.duration/2),K.startScheduleTimer(0))}function vr(Rt){P.info("OnFragmentLoadingCompleted for stream id "+me.id+" and media type "+Le+" - Url:",Rt.request?Rt.request.url:"undefined",Rt.request.range?", Range:"+Rt.request.range:""),dt()&&K.startScheduleTimer(0),Rt.error&&Rt.request.serviceLocation&&(function(ft){P.info("Fragment loading completed with an error"),ft&&ft.request&&ft.request.type&&(ft.request.type===Ye.w.INIT_SEGMENT_TYPE?Ft({representationId:ft.request.representationId,sender:{}},!1):ft.request.type===Ye.w.MEDIA_SEGMENT_TYPE&&(Zn(ft.request.startTime+ft.request.duration/2),Bt({},!1)))})(Rt)}function Ct(){Zn(we.getTime()),Wn().startScheduleTimer()}function rn(Rt){var ft=Rt.currentTrackInfo;if(ft){var Kt=q.find((function(We){return We.index===ft.index&&We.lang===ft.lang}));Kt&&In(Kt).then((function(){Z.setIsBufferingCompleted(!1),Zn(we.getTime()),K.setInitSegmentRequired(!0),K.startScheduleTimer()}))}}function Ht(Rt){Zn(Rt.quotaExceededTime),K.clearScheduleTimer()}function yn(){return Z?Z.getBuffer():null}function In(Rt){Rt===W||Rt&&W&&Rt.type!==W.type||(W=Rt);var ft=se.getRealAdaptation(me,W),Kt=se.getVoRepresentations(W);if(le){var We,tt=le.getData(),Mt=Ie.getMaxAllowedIndexFor(Le,me.id),mn=Ie.getMinAllowedIndexFor(Le,me.id),Cn=null;return tt!==null&&tt.id===ft.id||Le===h.Z.TEXT?We=Ie.getQualityFor(Le,me.id):(Cn=Ie.getThroughputHistory().getAverageThroughput(Le,z)||Ie.getInitialBitrateFor(Le,me.id),We=Ie.getQualityForBitrate(W,Cn,me.id)),mn!==void 0&&We<mn&&(We=mn),We>Mt&&(We=Mt),le.updateData(ft,Kt,Le,W.isFragmented,We)}return Promise.resolve()}function Wn(){return K}function Hn(Rt){var ft;return Rt!==void 0?((0,he.SE)(Rt),ft=le?le.getRepresentationForQuality(Rt):null):ft=le?le.getCurrentRepresentation():null,se.convertRepresentationToRepresentationInfo(ft)}function Yn(){return!!Z&&Z.getIsBufferingCompleted()}function rr(Rt){if(Se.get().streaming.enableManifestTimescaleMismatchFix){var ft=Rt.chunk,Kt=ft.bytes,We=Hn(ft.quality),tt=le&&We?le.getRepresentationForQuality(We.quality):null;We&&tt&&(tt.timescale=qe.getMediaTimescaleFromMoov(Kt))}}function Yt(Rt){var ft=Rt.chunk,Kt=ft.bytes,We=ft.quality,tt=Hn(We),Mt=le&&tt?le.getRepresentationForQuality(tt.quality):null;if(tt&&Mt){var mn;if(Se.get().streaming.parseInbandPrft&&Rt.request.type===Ye.w.MEDIA_SEGMENT_TYPE){var Cn=(function(zo,bo){var Ma=zo.getBoxes("prft"),Vu=[];return Ma.forEach((function(ou){Vu.push((function(ea,Eo){var Zi="unknown";switch(ea.flags){case 0:Zi=p.Z.PRODUCER_REFERENCE_TIME_TYPE.ENCODER;break;case 16:Zi=p.Z.PRODUCER_REFERENCE_TIME_TYPE.APPLICATION;break;case 24:Zi=p.Z.PRODUCER_REFERENCE_TIME_TYPE.CAPTURED}var su=1e3*ea.ntp_timestamp_sec+ea.ntp_timestamp_frac/Math.pow(2,32)*1e3;return{type:Zi,ntpTimestamp:su=Wt(Be).getInstance().ntpToUTC(su),mediaTime:ea.media_time/Eo}})(ou,bo))})),Vu})(mn=mn||qe.parse(Kt),Mt.timescale);Cn&&Cn.length&&Ke.trigger(v.Z.INBAND_PRFT,{data:Cn},{streamId:me.id,mediaType:Le})}var cr=se.getEventsFor(tt.mediaInfo,null,me),Si=se.getEventsFor(tt,Mt,me);if(cr&&cr.length>0||Si&&Si.length>0){var to=G.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,quality:We,index:ft.index})[0],Di=(function(zo,bo,Ma,Vu){try{for(var ou={},ea=[],Eo=Ma.concat(Vu),Zi=0,su=Eo.length;Zi<su;Zi++)ou[Eo[Zi].schemeIdUri+"/"+Eo[Zi].value]=Eo[Zi];var au=zo.getBoxes("emsg");if(!au||au.length===0)return ea;for(var Oo=zo.getBox("sidx"),Nc=!Oo||isNaN(Oo.earliest_presentation_time)||isNaN(Oo.timescale)?bo&&!isNaN(bo.mediaStartTime)?bo.mediaStartTime:0:Oo.earliest_presentation_time/Oo.timescale,wf=Math.max(Nc,0),Tf=le.getCurrentRepresentation(),Ll=0,Sf=au.length;Ll<Sf;Ll++){var zu=se.getEvent(au[Ll],ou,wf,Tf);zu&&ea.push(zu)}return ea}catch{return[]}})(mn=mn||qe.parse(Kt),to,cr,Si);Ke.trigger(_.Z.INBAND_EVENTS,{events:Di},{streamId:me.id})}}}function Tn(){var Rt=we.getTime();Se.get().streaming.buffer.flushBufferAtTrackSwitch&&we.seek(Rt+.001,!1,!0),Zn(Rt),Z.setSeekTarget(Rt),K.startScheduleTimer()}function Dn(){var Rt=we.getTime(),ft=Z.getContinuousBufferTimeForTargetTime(Rt);Zn(isNaN(ft)?Rt:ft),K.startScheduleTimer()}function Fn(Rt){Rt&&!isNaN(Rt.time)&&(Zn(Rt.time),Z.setSeekTarget(Rt.time))}function Zn(Rt){He=Rt,_e=!0}return R={initialize:function(Rt,ft,Kt){ae=(0,ct.Z)(Be).create({events:_.Z,eventBus:Ke,streamInfo:me,timelineConverter:F,dashConstants:p.Z,segmentBaseController:L.segmentBaseController,type:Le}),ce=(0,de.Z)(Be).create({streamInfo:me,type:Le,timelineConverter:F,dashMetrics:ue,mediaPlayerModel:re,baseURLController:L.baseURLController,errHandler:ge,segmentsController:ae,settings:Se,boxParser:qe,events:_.Z,eventBus:Ke,errors:oe,debug:(0,C.Z)(Be).getInstance(),requestModifier:(0,ot.Z)(Be).getInstance(),dashConstants:p.Z,constants:h.Z,urlUtils:(0,wt.Z)(Be).getInstance()}),z=me.manifestInfo.isDynamic,ce.initialize(z),Ie.registerStreamType(Le,R),le=j(Be).create({streamInfo:me,type:Le,abrController:Ie,dashMetrics:ue,playbackController:we,timelineConverter:F,dashConstants:p.Z,events:_.Z,eventBus:Ke,errors:oe,isDynamic:z,adapter:se,segmentsController:ae}),Z=(function(We,tt){return We?We!==h.Z.TEXT||tt?ht(Be).create({streamInfo:me,type:We,mediaPlayerModel:re,manifestModel:te,fragmentModel:G,errHandler:ge,mediaController:ke,representationController:le,adapter:se,textController:Ae,abrController:Ie,playbackController:we,settings:Se}):Ve(Be).create({streamInfo:me,type:We,mimeType:Fe,fragmentModel:G,textController:Ae,errHandler:ge,settings:Se}):(ge.error(new ve.Z(oe.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,oe.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)})(Le,Kt),Z&&Z.initialize(Rt),(K=M(Be).create({streamInfo:me,type:Le,mimeType:Fe,adapter:se,dashMetrics:ue,mediaPlayerModel:re,fragmentModel:G,abrController:Ie,playbackController:we,textController:Ae,mediaController:ke,bufferController:Z,representationController:le,settings:Se})).initialize(ft),He=0,_e=!1,fe=!1},getStreamId:ut,getType:mt,isUpdating:function(){return!!le&&le.isUpdating()},getBufferController:function(){return Z},dischargePreBuffer:function(){Z.dischargePreBuffer()},getFragmentModel:function(){return G},getScheduleController:Wn,getRepresentationController:function(){return le},getRepresentationInfo:Hn,getBufferLevel:function(){return Z?Z.getBufferLevel():0},isBufferingCompleted:Yn,createBufferSinks:function(Rt){var ft=yn();return ft?Promise.resolve(ft):Z?Z.createBufferSink(W,Rt):Promise.resolve(null)},updateStreamInfo:function(Rt){return me=Rt,Yn()?Promise.resolve():Z.updateAppendWindow()},getStreamInfo:function(){return me},selectMediaInfo:In,clearMediaInfoArray:function(){q=[]},addMediaInfo:function(Rt){q.indexOf(Rt)===-1&&q.push(Rt)},prepareTrackSwitch:function(){return new Promise((function(Rt){P.debug("Preparing track switch for type ".concat(Le));var ft=Le===h.Z.TEXT||Se.get().streaming.trackSwitchMode[Le]===h.Z.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&we.getTimeToStreamEnd(me)>Se.get().streaming.buffer.stallThreshold;if(Z.getIsBufferingCompleted()&&!ft)return Z.prepareForNonReplacementTrackSwitch(W.codec).then((function(){Ke.trigger(_.Z.BUFFERING_COMPLETED,{},{streamId:me.id,mediaType:Le})})).catch((function(){Ke.trigger(_.Z.BUFFERING_COMPLETED,{},{streamId:me.id,mediaType:Le})})),void Rt();K.clearScheduleTimer(),K.setSwitchTrack(!0),ft?(Ke.trigger(_.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:Le,streamId:me.id},{mediaType:Le,streamId:me.id}),G.abortRequests(),Z.prepareForReplacementTrackSwitch(W.codec).then((function(){var Kt=Hn();return Z.updateBufferTimestampOffset(Kt)})).then((function(){Tn(),Rt()})).catch((function(){Tn(),Rt()}))):Z.prepareForNonReplacementTrackSwitch(W.codec).then((function(){Dn(),Rt()})).catch((function(){Dn(),Rt()}))}))},prepareQualityChange:function(Rt){Oe&&P.warn("Canceling queued representation switch to ".concat(Oe.quality," for ").concat(Le)),P.debug("Preparing quality switch for type ".concat(Le));var ft=Rt.newQuality;Q=!0,K.clearScheduleTimer(),le.prepareQualityChange(ft);var Kt=Hn(ft);Rt.reason&&Rt.reason.forceReplace?(function(We){G.abortRequests(),Ke.trigger(_.Z.BUFFER_REPLACEMENT_STARTED,{mediaType:Le,streamId:me.id},{mediaType:Le,streamId:me.id}),K.setCheckPlaybackQuality(!1),Z.prepareForForceReplacementQualitySwitch(We).then((function(){Tn(),Oe=null,Q=!1})).catch((function(){Tn(),Oe=null,Q=!1}))})(Kt):Rt&&Rt.reason&&Rt.reason.forceAbandon?(function(We){Z.updateBufferTimestampOffset(We).then((function(){G.abortRequests(),fe=!0,K.setCheckPlaybackQuality(!1),K.startScheduleTimer(),Q=!1,Oe=null})).catch((function(){Oe=null,Q=!1}))})(Kt):Se.get().streaming.buffer.fastSwitchEnabled?(function(We){var tt=we.getTime(),Mt=1.5*(isNaN(We.fragmentDuration)?1:We.fragmentDuration),mn=G.getRequests({state:X.FRAGMENT_MODEL_EXECUTED,time:tt+Mt,threshold:0})[0];if(mn&&!dt()){var Cn=Z.getBufferLevel(),cr=Ie.getAbandonmentStateFor(me.id,Le);mn.quality<We.quality&&Cn>=Mt&&cr!==E.Z.ABANDON_LOAD?Z.updateBufferTimestampOffset(We).then((function(){G.abortRequests(),Zn(tt+Mt),K.setCheckPlaybackQuality(!1),K.startScheduleTimer(),Q=!1})).catch((function(){Q=!1})):Mn(We)}else Mn(We)})(Kt):Mn(Kt),ue.pushPlayListTraceMetrics(new Date,rt.REPRESENTATION_SWITCH_STOP_REASON),ue.createPlaylistTraceMetrics(Kt.id,1e3*we.getTime(),we.getPlaybackRate())},getMediaInfo:function(){return W},getMediaSource:function(){return Z.getMediaSource()},setMediaSource:function(Rt){return Z.setMediaSource(Rt,W)},getBuffer:yn,setExplicitBufferingTime:Zn,finalisePlayList:function(Rt,ft){ue.pushPlayListTraceMetrics(Rt,ft)},probeNextRequest:function(){var Rt=Hn(),ft=le&&Rt?le.getRepresentationForQuality(Rt.quality):null;return ce.getNextSegmentRequestIdempotent(W,ft)},prepareInnerPeriodPlaybackSeeking:function(Rt){return new Promise((function(ft){if(Z.hasBufferAtTime(Rt.seekTime))return Z.pruneBuffer(),Ut(Z.getContinuousBufferTimeForTargetTime(Rt.seekTime))&&Z.setIsBufferingCompleted(!0),void ft();K.clearScheduleTimer(),G.abortRequests(),Z.prepareForPlaybackSeek().then((function(){var Kt=Z.getAllRangesWithSafetyFactor(Rt.seekTime);return Z.clearBuffers(Kt)})).then((function(){var Kt=Z.getContinuousBufferTimeForTargetTime(Rt.seekTime);if(Ut(Kt))Z.setIsBufferingCompleted(!0),ft();else{var We=isNaN(Kt)?Rt.seekTime:Kt;Zn(We),Z.setSeekTarget(We);var tt=[];tt.push(Z.updateAppendWindow());var Mt=Hn();tt.push(Z.updateBufferTimestampOffset(Mt)),Promise.all(tt).then((function(){K.setInitSegmentRequired(!0),K.setCheckPlaybackQuality(!1),K.startScheduleTimer(),ft()}))}})).catch((function(Kt){P.error(Kt)}))}))},prepareOuterPeriodPlaybackSeeking:function(){return new Promise((function(Rt,ft){try{K.clearScheduleTimer(),G.abortRequests(),Z.prepareForPlaybackSeek().then((function(){return Z.pruneAllSafely()})).then((function(){Rt()}))}catch(Kt){ft(Kt)}}))},reset:function(Rt,ft){ce&&ce.reset(),Z&&(Z.reset(Rt,ft),Z=null),K&&(K.reset(),K=null),le&&(le.reset(),le=null),ae&&(ae=null),Ie&&Ie.unRegisterStreamType(ut(),Le),Ke.off(_.Z.DATA_UPDATE_COMPLETED,Lt,R),Ke.off(_.Z.INIT_FRAGMENT_NEEDED,Ft,R),Ke.off(_.Z.MEDIA_FRAGMENT_NEEDED,Bt,R),Ke.off(_.Z.INIT_FRAGMENT_LOADED,rr,R),Ke.off(_.Z.MEDIA_FRAGMENT_LOADED,Yt,R),Ke.off(_.Z.BUFFER_LEVEL_STATE_CHANGED,an,R),Ke.off(_.Z.BUFFER_CLEARED,ln,R),Ke.off(_.Z.SEEK_TARGET,Fn,R),Ke.off(_.Z.FRAGMENT_LOADING_ABANDONED,gr,R),Ke.off(_.Z.FRAGMENT_LOADING_COMPLETED,vr,R),Ke.off(_.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,Ct,R),Ke.off(_.Z.SET_NON_FRAGMENTED_TEXT,rn,R),Ke.off(_.Z.QUOTA_EXCEEDED,Ht,R),Ke.off(_.Z.SOURCE_BUFFER_ERROR,Xt,R),Ke.off(_.Z.BYTES_APPENDED_END_FRAGMENT,Vn,R),zt(),Le=null,me=null}},P=(0,C.Z)(Be).getInstance().getLogger(R),zt(),Ke.on(_.Z.DATA_UPDATE_COMPLETED,Lt,R,{priority:A.Z.EVENT_PRIORITY_HIGH}),Ke.on(_.Z.INIT_FRAGMENT_NEEDED,Ft,R),Ke.on(_.Z.MEDIA_FRAGMENT_NEEDED,Bt,R),Ke.on(_.Z.INIT_FRAGMENT_LOADED,rr,R),Ke.on(_.Z.MEDIA_FRAGMENT_LOADED,Yt,R),Ke.on(_.Z.BUFFER_LEVEL_STATE_CHANGED,an,R),Ke.on(_.Z.BUFFER_CLEARED,ln,R),Ke.on(_.Z.SEEK_TARGET,Fn,R),Ke.on(_.Z.FRAGMENT_LOADING_ABANDONED,gr,R),Ke.on(_.Z.FRAGMENT_LOADING_COMPLETED,vr,R),Ke.on(_.Z.QUOTA_EXCEEDED,Ht,R),Ke.on(_.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,Ct,R),Ke.on(_.Z.SET_NON_FRAGMENTED_TEXT,rn,R),Ke.on(_.Z.SOURCE_BUFFER_ERROR,Xt,R),Ke.on(_.Z.BYTES_APPENDED_END_FRAGMENT,Vn,R),R}$t.__dashjs_factory_name="StreamProcessor";var hn=I.Z.getClassFactory($t),dn=function L(){(function(R,P){if(!(R instanceof P))throw new TypeError("Cannot call a class as a function")})(this,L),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null},_n=f(9032);function En(L,R){if(L){if(typeof L=="string")return tr(L,R);var P=Object.prototype.toString.call(L).slice(8,-1);return P==="Object"&&L.constructor&&(P=L.constructor.name),P==="Map"||P==="Set"?Array.from(L):P==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(P)?tr(L,R):void 0}}function tr(L,R){(R==null||R>L.length)&&(R=L.length);for(var P=0,z=new Array(R);P<R;P++)z[P]=L[P];return z}function Ir(L){L=L||{};var R,P,z=this.context,W=L.requestModifier,q=L.lowLatencyThroughputModel,Z=L.boxParser,K=(0,Ce.Z)(z).getInstance();function le(Q){var ce,ae=new Date,He=Q.request,Oe=new Headers;if(He.range&&Oe.append("Range","bytes="+He.range),Q.headers)for(var Be in Q.headers){var Ke=Q.headers[Be];Ke&&Oe.append(Be,Ke)}He.requestStartDate||(He.requestStartDate=ae),W&&W.modifyRequestHeader&&W.modifyRequestHeader({setRequestHeader:function(F,se){Oe.append(F,se)}},{url:Q.url}),typeof window.AbortController=="function"&&(ce=new AbortController,Q.abortController=ce,ce.signal.onabort=Q.onabort);var me={method:Q.method,headers:Oe,credentials:Q.withCredentials?"include":void 0,signal:ce?ce.signal:void 0},Le=K.get().streaming.abr.fetchThroughputCalculationMode,ge=Date.now(),Fe=0;new Promise((function(F){if(Le===h.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&q&&(Fe=q.getThroughputCapacityDelayMS(He,1e3*P.getCurrentBufferLevel(He.mediaType))))return setTimeout(F,Fe);F()})).then((function(){var F=Date.now();fetch(Q.url,me).then((function(se){Q.response||(Q.response={}),Q.response.status=se.status,Q.response.statusText=se.statusText,Q.response.responseURL=se.url,se.ok||Q.onerror();var te,re="",G=(function(Lt,an){var ln;if(typeof Symbol>"u"||Lt[Symbol.iterator]==null){if(Array.isArray(Lt)||(ln=En(Lt))){ln&&(Lt=ln);var Xt=0,Vn=function(){};return{s:Vn,n:function(){return Xt>=Lt.length?{done:!0}:{done:!1,value:Lt[Xt++]}},e:function(Ct){throw Ct},f:Vn}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Mn,gr=!0,vr=!1;return{s:function(){ln=Lt[Symbol.iterator]()},n:function(){var Ct=ln.next();return gr=Ct.done,Ct},e:function(Ct){vr=!0,Mn=Ct},f:function(){try{gr||ln.return==null||ln.return()}finally{if(vr)throw Mn}}}})(se.headers.keys());try{for(G.s();!(te=G.n()).done;){var Ie=te.value;re+=Ie+": "+se.headers.get(Ie)+`\r
`}}catch(Lt){G.e(Lt)}finally{G.f()}if(Q.response.responseHeaders=re,!se.body)return se.arrayBuffer().then((function(Lt){Q.response.response=Lt;var an={loaded:Lt.byteLength,total:Lt.byteLength,stream:!1};Q.progress(an),Q.onload(),Q.onend()}));var we,ke,Ae,ue,Se=parseInt(se.headers.get("Content-Length"),10),qe=0,gt=!1,ut=new Uint8Array,mt=0;if(Le===h.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&q){var dt=F,zt=0,Ut=(Ae=se.body.tee(),ue=2,(function(Lt){if(Array.isArray(Lt))return Lt})(Ae)||(function(Lt,an){if(typeof Symbol<"u"&&Symbol.iterator in Object(Lt)){var ln=[],Xt=!0,Vn=!1,Mn=void 0;try{for(var gr,vr=Lt[Symbol.iterator]();!(Xt=(gr=vr.next()).done)&&(ln.push(gr.value),!an||ln.length!==an);Xt=!0);}catch(Ct){Vn=!0,Mn=Ct}finally{try{Xt||vr.return==null||vr.return()}finally{if(Vn)throw Mn}}return ln}})(Ae,ue)||En(Ae,ue)||(function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()),Ft=Ut[0],Bt=Ut[1];we=Ft.getReader(),ke=[],we.read().then((function Lt(an){var ln=an.value,Xt=an.done;if(zt=Date.now(),ln&&ln.length){var Vn=zt-dt,Mn=ln.length;ke.push({chunkDownloadTimeRelativeMS:zt-F,chunkDownloadDurationMS:Vn,chunkBytes:Mn,kbps:Math.round(8*Mn/(Vn/1e3)),bufferLevel:P.getCurrentBufferLevel(He.mediaType)})}if(Xt){var gr=zt-F,vr=ke.reduce((function(Ct,rn){return Ct+rn.chunkBytes}),0);return q.addMeasurement(He,gr,ke,ge,Fe,re),void Q.progress({loaded:vr,total:vr,lengthComputable:!0,time:q.getEstimatedDownloadDurationMS(He),stream:!0})}return dt=Date.now(),we.read().then(Lt)})),Q.reader=Bt.getReader()}else Q.reader=se.body.getReader();var Nn=[],lt=[],bt=[],tn=!0;_e(Q,(function Lt(an){var ln=an.value;if(an.done){if(ut){if(Le!==h.Z.ABR_FETCH_THROUGHPUT_CALCULATION_AAST){var Xt=null,Vn=null;Le===h.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING?(Xt=(function(Ct,rn){try{var Ht,yn;Ht=Ct.filter((function(Tn,Dn){return Dn<Ct.length-1})),yn=rn.filter((function(Tn,Dn){return Dn<rn.length-1}));var In=[];if(Ht.length>1){for(var Wn=0,Hn=0,Yn=0;Yn<Ht.length;Yn++)if(Ht[Yn]&&yn[Yn]){var rr=yn[Yn].ts-Ht[Yn].ts;if(rr>1)In.push(8*yn[Yn].bytes/rr),Hn=0;else{Hn===0&&(Hn=Ht[Yn].ts,Wn=0);var Yt=yn[Yn].ts-Hn;Yt>1?(Wn+=yn[Yn].bytes,In.push(8*Wn/Yt),Hn=0):Wn+=yn[Yn].bytes}}if(In.length>0)return In.reduce((function(Tn,Dn){return Tn+Dn}),0)/In.length}return null}catch{return null}})(lt,bt),Xt&&(Vn=8*qe/Xt)):Le===h.Z.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA&&(Vn=fe(Nn,qe)),Q.progress({loaded:qe,total:isNaN(Se)?qe:Se,lengthComputable:!0,time:Vn,stream:!0})}Q.response.response=ut.buffer}return Q.onload(),void Q.onend()}if(ln&&ln.length>0){ut=(function(Ct,rn){if(Ct.length===0)return rn;var Ht=new Uint8Array(Ct.length+rn.length);return Ht.set(Ct),Ht.set(rn,Ct.length),Ht})(ut,ln),qe+=ln.length,Nn.push({ts:Date.now(),bytes:ln.length}),Le===h.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&tn&&Z.findLastTopIsoBoxCompleted(["moof"],ut,mt).found&&(tn=!1,lt.push({ts:performance.now(),bytes:ln.length}));var Mn=Z.findLastTopIsoBoxCompleted(["moov","mdat"],ut,mt);if(Mn.found){var gr,vr=Mn.lastCompletedOffset+Mn.size;Le!==h.Z.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING||tn||(tn=!0,bt.push({ts:performance.now(),bytes:ut.length})),vr===ut.length?(gr=ut,ut=new Uint8Array):(gr=new Uint8Array(ut.subarray(0,vr)),ut=ut.subarray(vr)),Q.progress({data:gr.buffer,lengthComputable:!1,noTrace:!0}),mt=0}else mt=Mn.lastCompletedOffset,gt||(Q.progress({lengthComputable:!1,noTrace:!0}),gt=!0)}_e(Q,Lt)}))})).catch((function(se){Q.onerror&&Q.onerror(se)}))}))}function _e(Q,ce){Q.reader.read().then(ce).catch((function(ae){Q.onerror&&Q.response.status===200&&Q.onerror(ae)}))}function fe(Q,ce){try{if((Q=Q.filter((function(Oe){return Oe.bytes>ce/4/Q.length}))).length>1){var ae=0,He=(Q[Q.length-1].ts-Q[0].ts)/Q.length;return Q.forEach((function(Oe,Be){var Ke=Q[Be+1];if(Ke){var me=Ke.ts-Oe.ts;ae+=me<He?me:0}})),ae}return null}catch{return null}}return R={load:function(Q){W&&W.modifyRequest?(0,ot.k)(Q,W).then((function(){return le(Q)})):le(Q)},abort:function(Q){if(Q.abortController)Q.abortController.abort();else if(Q.reader)try{Q.reader.cancel(),Q.onabort()}catch{}},calculateDownloadedTime:fe,setup:function(Q){P=Q.dashMetrics}},R}Ir.__dashjs_factory_name="FetchLoader";var Fr=I.Z.getClassFactory(Ir),Dr=f(1180);function ni(L,R){for(var P=0;P<R.length;P++){var z=R[P];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(L,z.key,z)}}var bi=(function(){function L(){(function(z,W){if(!(z instanceof W))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.mimeType=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.frameRate=null}var R,P;return R=L,(P=[{key:"hasInitialization",value:function(){return this.initialization!==null||this.range!==null}},{key:"hasSegments",value:function(){return this.segmentInfoType!==p.Z.BASE_URL&&this.segmentInfoType!==p.Z.SEGMENT_BASE&&!this.indexRange}}])&&ni(R.prototype,P),L})(),Jr=function L(){(function(R,P){if(!(R instanceof P))throw new TypeError("Cannot call a class as a function")})(this,L),this.period=null,this.index=-1,this.type=null},eo=function L(){(function(R,P){if(!(R instanceof P))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null};eo.DEFAULT_ID="defaultId";var ei=eo,jr=function L(){(function(R,P){if(!(R instanceof P))throw new TypeError("Cannot call a class as a function")})(this,L),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.publishTime=null,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN},qi=f(2610),ro=function L(){(function(R,P){if(!(R instanceof P))throw new TypeError("Cannot call a class as a function")})(this,L),this.type="",this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN},To=function L(R,P,z,W){(function(q,Z){if(!(q instanceof Z))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=R||"",this.serviceLocation=P||R||"",this.dvbPriority=z||1,this.dvbWeight=W||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.queryParams={}};To.DEFAULT_DVB_PRIORITY=1,To.DEFAULT_DVB_WEIGHT=1;var di=To,xo=function L(){(function(R,P){if(!(R instanceof P))throw new TypeError("Cannot call a class as a function")})(this,L),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0},pn=function L(){(function(R,P){if(!(R instanceof P))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null},nn=function L(){(function(R,P){if(!(R instanceof P))throw new TypeError("Cannot call a class as a function")})(this,L),this.defaultServiceLocation=null,this.defaultServiceLocationArray=[],this.queryBeforeStart=!1,this.serverUrl=null,this.clientRequirement=!0};function be(L,R){for(var P=0;P<R.length;P++){var z=R[P];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(L,z.key,z)}}var Te=(function(){function L(){(function(z,W){if(!(z instanceof W))throw new TypeError("Cannot call a class as a function")})(this,L),this.schemeIdUri=null,this.value=null,this.id=null}var R,P;return R=L,(P=[{key:"init",value:function(z){return z&&(this.schemeIdUri=z.schemeIdUri?z.schemeIdUri:null,this.value=z.value?z.value:null,this.id=z.id?z.id:null,z[p.Z.DVB_URL]&&(this.dvbUrl=z[p.Z.DVB_URL]),z[p.Z.DVB_MIMETYPE]&&(this.dvbMimeType=z[p.Z.DVB_MIMETYPE]),z[p.Z.DVB_FONTFAMILY]&&(this.dvbFontFamily=z[p.Z.DVB_FONTFAMILY])),this}}])&&be(R.prototype,P),L})(),je=f(3101),Je=f.n(je);function Ge(){return{areEqual:function(L,R){return Je()(L,R)}}}Ge.__dashjs_factory_name="ObjectUtils";var vt=I.Z.getSingletonFactory(Ge),Tt=f(7803),Qt=function L(R,P){(function(z,W){if(!(z instanceof W))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=R||"",this.serviceLocation=P||null,this.queryParams={}},sn=function L(R,P,z){(function(W,q){if(!(W instanceof q))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=R||"",this.serviceLocation=P||null,this.ttl=z||NaN,this.queryParams={}};function qt(L,R){var P=Object.keys(L);if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(L);R&&(z=z.filter((function(W){return Object.getOwnPropertyDescriptor(L,W).enumerable}))),P.push.apply(P,z)}return P}function Nt(L){for(var R=1;R<arguments.length;R++){var P=arguments[R]!=null?arguments[R]:{};R%2?qt(Object(P),!0).forEach((function(z){en(L,z,P[z])})):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(P)):qt(Object(P)).forEach((function(z){Object.defineProperty(L,z,Object.getOwnPropertyDescriptor(P,z))}))}return L}function en(L,R,P){return R in L?Object.defineProperty(L,R,{value:P,enumerable:!0,configurable:!0,writable:!0}):L[R]=P,L}function vn(L,R){var P;if(typeof Symbol>"u"||L[Symbol.iterator]==null){if(Array.isArray(L)||(P=On(L))||R){P&&(L=P);var z=0,W=function(){};return{s:W,n:function(){return z>=L.length?{done:!0}:{done:!1,value:L[z++]}},e:function(le){throw le},f:W}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var q,Z=!0,K=!1;return{s:function(){P=L[Symbol.iterator]()},n:function(){var le=P.next();return Z=le.done,le},e:function(le){K=!0,q=le},f:function(){try{Z||P.return==null||P.return()}finally{if(K)throw q}}}}function On(L,R){if(L){if(typeof L=="string")return Un(L,R);var P=Object.prototype.toString.call(L).slice(8,-1);return P==="Object"&&L.constructor&&(P=L.constructor.name),P==="Map"||P==="Set"?Array.from(L):P==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(P)?Un(L,R):void 0}}function Un(L,R){(R==null||R>L.length)&&(R=L.length);for(var P=0,z=new Array(R);P<R;P++)z[P]=L[P];return z}function Er(){var L,R,P,z,W=this.context,q=(0,wt.Z)(W).getInstance(),Z=Number.isInteger||function(F){return typeof F=="number"&&isFinite(F)&&Math.floor(F)===F};function K(F,se){if(!F)throw new Error("adaptation is not defined");if(!se)throw new Error("type is not defined");if(F.Representation_asArray&&F.Representation_asArray.length){var te=Be(F.Representation_asArray[0]);if(te&&te.length>0&&Tt.Y.indexOf(te[0].schemeIdUri)>=0)return se===h.Z.IMAGE}if(F.ContentComponent_asArray&&F.ContentComponent_asArray.length>0){if(F.ContentComponent_asArray.length>1)return se===h.Z.MUXED;if(F.ContentComponent_asArray[0].contentType===se)return!0}var re=se===h.Z.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(se);if(F.Representation_asArray&&F.Representation_asArray.length){var G=F.Representation_asArray[0].codecs;if(re.test(G))return!0}if(F.hasOwnProperty(p.Z.MIME_TYPE))return re.test(F.mimeType);if(F.Representation_asArray){for(var Ie,we=0;we<F.Representation_asArray.length;we++)if((Ie=F.Representation_asArray[we]).hasOwnProperty(p.Z.MIME_TYPE))return re.test(Ie.mimeType)}return!1}function le(F){if(!F)throw new Error("adaptation is not defined");if(F.hasOwnProperty(p.Z.SEGMENT_TEMPLATE)||F.hasOwnProperty(p.Z.SEGMENT_TIMELINE)||F.hasOwnProperty(p.Z.SEGMENT_LIST)||F.hasOwnProperty(p.Z.SEGMENT_BASE))return!0;if(F.Representation_asArray&&F.Representation_asArray.length>0){var se=F.Representation_asArray[0];if(se.hasOwnProperty(p.Z.SEGMENT_TEMPLATE)||se.hasOwnProperty(p.Z.SEGMENT_TIMELINE)||se.hasOwnProperty(p.Z.SEGMENT_LIST)||se.hasOwnProperty(p.Z.SEGMENT_BASE))return!0}return!1}function _e(F){return K(F,h.Z.VIDEO)}function fe(F){return K(F,h.Z.TEXT)}function Q(F){return K(F,h.Z.IMAGE)}function ce(F){return F&&Array.isArray(F.Representation_asArray)&&F.Representation_asArray.sort((function(se,te){return se.bandwidth-te.bandwidth})),F}function ae(F,se){return F&&F.Period_asArray&&Z(se)&&F.Period_asArray[se]?F.Period_asArray[se].AdaptationSet_asArray:[]}function He(F){return F&&F.Period_asArray?F.Period_asArray:[]}function Oe(F){var se=!1;return F&&F.hasOwnProperty("type")&&(se=F.type===p.Z.DYNAMIC),se}function Be(F){return F&&F.EssentialProperty_asArray&&F.EssentialProperty_asArray.length?F.EssentialProperty_asArray.map((function(se){return{schemeIdUri:se.schemeIdUri,value:se.value}})):null}function Ke(F){if(!F||!F.S_asArray)return NaN;var se=F.S_asArray[0],te=F.S_asArray[1];return se.hasOwnProperty("d")?se.d:te.t-se.t}function me(F,se){if(!F)throw new Error("Period cannot be null or undefined");var te=ei.DEFAULT_ID+"_"+se;return F.hasOwnProperty(p.Z.ID)&&F.id.length>0&&F.id!=="__proto__"&&(te=F.id),te}function Le(F,se,te){var re,G=[];if(!F)return G;for(re=0;re<F.length;re++){var Ie=new xo;if(Ie.timescale=1,Ie.representation=se,!F[re].hasOwnProperty(h.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");Ie.schemeIdUri=F[re].schemeIdUri,F[re].hasOwnProperty(p.Z.TIMESCALE)&&(Ie.timescale=F[re].timescale),F[re].hasOwnProperty(p.Z.VALUE)&&(Ie.value=F[re].value),G.push(Ie),Ie.period=te}return G}function ge(F){var se=[],te=F.BaseURL_asArray||[F.baseUri],re=!1;return te.some((function(G){if(G){var Ie=new di,we=G.__text||G;return q.isRelative(we)&&(re=!0,F.baseUri&&(we=q.resolve(we,F.baseUri))),Ie.url=we,G.hasOwnProperty(p.Z.SERVICE_LOCATION)&&G.serviceLocation.length?Ie.serviceLocation=G.serviceLocation:Ie.serviceLocation=we,G.hasOwnProperty(p.Z.DVB_PRIORITY)&&(Ie.dvbPriority=G[p.Z.DVB_PRIORITY]),G.hasOwnProperty(p.Z.DVB_WEIGHT)&&(Ie.dvbWeight=G[p.Z.DVB_WEIGHT]),G.hasOwnProperty(p.Z.AVAILABILITY_TIME_OFFSET)&&(Ie.availabilityTimeOffset=G[p.Z.AVAILABILITY_TIME_OFFSET]),G.hasOwnProperty(p.Z.AVAILABILITY_TIME_COMPLETE)&&(Ie.availabilityTimeComplete=G[p.Z.AVAILABILITY_TIME_COMPLETE]!=="false"),se.push(Ie),re}})),se}function Fe(F){var se=new nn;return se.serverUrl=F.__text,F.hasOwnProperty(p.Z.DEFAULT_SERVICE_LOCATION)&&(se.defaultServiceLocation=F[p.Z.DEFAULT_SERVICE_LOCATION],se.defaultServiceLocationArray=se.defaultServiceLocation.split(" ")),F.hasOwnProperty(p.Z.QUERY_BEFORE_START)&&(se.queryBeforeStart=F[p.Z.QUERY_BEFORE_START].toLowerCase()==="true"),F.hasOwnProperty(p.Z.CLIENT_REQUIREMENT)&&(se.clientRequirement=F[p.Z.CLIENT_REQUIREMENT].toLowerCase()!=="false"),se}return L={getIsTypeOf:K,getIsText:fe,getIsFragmented:le,getProducerReferenceTimesForAdaptation:function(F){var se=F&&F.hasOwnProperty(p.Z.PRODUCERREFERENCETIME_ASARRAY)?F[p.Z.PRODUCERREFERENCETIME_ASARRAY]:[];(F&&F.hasOwnProperty(p.Z.REPRESENTATION_ASARRAY)?F[p.Z.REPRESENTATION_ASARRAY]:[]).forEach((function(re){var G;re.hasOwnProperty(p.Z.PRODUCERREFERENCETIME_ASARRAY)&&se.push.apply(se,(function(Ie){if(Array.isArray(Ie))return Un(Ie)})(G=re[p.Z.PRODUCERREFERENCETIME_ASARRAY])||(function(Ie){if(typeof Symbol<"u"&&Symbol.iterator in Object(Ie))return Array.from(Ie)})(G)||On(G)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})())}));var te=[];return se.forEach((function(re){var G=new pn;re.hasOwnProperty(p.Z.ID)&&(G[p.Z.ID]=re[p.Z.ID],re.hasOwnProperty(p.Z.WALL_CLOCK_TIME)&&(G[p.Z.WALL_CLOCK_TIME]=re[p.Z.WALL_CLOCK_TIME],re.hasOwnProperty(p.Z.PRESENTATION_TIME)&&(G[p.Z.PRESENTATION_TIME]=re[p.Z.PRESENTATION_TIME],re.hasOwnProperty(p.Z.INBAND)&&(G[p.Z.INBAND]=re[p.Z.INBAND]!=="false"),re.hasOwnProperty(p.Z.TYPE)&&(G[p.Z.TYPE]=re[p.Z.TYPE]),te.push(G))))})),te},getLanguageForAdaptation:function(F){var se="";return F&&F.hasOwnProperty(p.Z.LANG)&&(se=F.lang),se},getViewpointForAdaptation:function(F){return F&&F.hasOwnProperty(p.Z.VIEWPOINT_ASARRAY)&&F[p.Z.VIEWPOINT_ASARRAY].length?F[p.Z.VIEWPOINT_ASARRAY].map((function(se){return new Te().init(se)})):[]},getRolesForAdaptation:function(F){return F&&F.hasOwnProperty(p.Z.ROLE_ASARRAY)&&F[p.Z.ROLE_ASARRAY].length?F[p.Z.ROLE_ASARRAY].map((function(se){return new Te().init(se)})):[]},getAccessibilityForAdaptation:function(F){return F&&F.hasOwnProperty(p.Z.ACCESSIBILITY_ASARRAY)&&F[p.Z.ACCESSIBILITY_ASARRAY].length?F[p.Z.ACCESSIBILITY_ASARRAY].map((function(se){return new Te().init(se)})):[]},getAudioChannelConfigurationForAdaptation:function(F){return F&&F.hasOwnProperty(p.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&F[p.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?F[p.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map((function(se){return new Te().init(se)})):[]},getAudioChannelConfigurationForRepresentation:function(F){return F&&F.hasOwnProperty(p.Z.AUDIOCHANNELCONFIGURATION_ASARRAY)&&F[p.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].length?F[p.Z.AUDIOCHANNELCONFIGURATION_ASARRAY].map((function(se){return new Te().init(se)})):[]},getAdaptationForIndex:function(F,se,te){var re=ae(se,te);return re.length>0&&Z(F)?re[F]:null},getIndexForAdaptation:function(F,se,te){if(!F)return-1;for(var re=ae(se,te),G=0;G<re.length;G++)if(vt(W).getInstance().areEqual(re[G],F))return G;return-1},getAdaptationForId:function(F,se,te){var re,G,Ie=ae(se,te);for(re=0,G=Ie.length;re<G;re++)if(Ie[re].hasOwnProperty(p.Z.ID)&&Ie[re].id===F)return Ie[re];return null},getAdaptationsForType:function(F,se,te){var re,G,Ie=ae(F,se),we=[];for(re=0,G=Ie.length;re<G;re++)K(Ie[re],te)&&we.push(ce(Ie[re]));return we},getRealPeriods:He,getRealPeriodForIndex:function(F,se){var te=He(se);return te.length>0&&Z(F)?te[F]:null},getCodec:function(F,se,te){var re=null;if(F&&F.Representation_asArray&&F.Representation_asArray.length>0){var G=Z(se)&&se>=0&&se<F.Representation_asArray.length?F.Representation_asArray[se]:F.Representation_asArray[0];G&&(re=G.mimeType+';codecs="'+G.codecs+'"',te&&G.width!==void 0&&(re+=';width="'+G.width+'";height="'+G.height+'"'))}return re&&(re=re.replace(/\sprofiles=[^;]*/g,"")),re},getSelectionPriority:function(F){try{var se=F&&F.selectionPriority!==void 0?parseInt(F.selectionPriority):1;return isNaN(se)?1:se}catch{return 1}},getMimeType:function(F){return F&&F.Representation_asArray&&F.Representation_asArray.length>0?F.Representation_asArray[0].mimeType:null},getKID:function(F){return F&&F.hasOwnProperty(p.Z.CENC_DEFAULT_KID)?F[p.Z.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(F){if(!F||!Array.isArray(F.Label_asArray))return[];for(var se=[],te=0;te<F.Label_asArray.length;te++)se.push({lang:F.Label_asArray[te].lang,text:F.Label_asArray[te].__text||F.Label_asArray[te]});return se},getContentProtectionData:function(F){return F&&F.hasOwnProperty(p.Z.CONTENTPROTECTION_ASARRAY)&&F.ContentProtection_asArray.length!==0?F.ContentProtection_asArray:null},getIsDynamic:Oe,getId:function(F){return F&&F[p.Z.ID]||null},hasProfile:function(F,se){var te=!1;return F&&F.profiles&&F.profiles.length>0&&(te=F.profiles.indexOf(se)!==-1),te},getDuration:function(F){return F&&F.hasOwnProperty(p.Z.MEDIA_PRESENTATION_DURATION)?F.mediaPresentationDuration:F&&F.type=="dynamic"?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(F){return F&&F.bandwidth?F.bandwidth:NaN},getManifestUpdatePeriod:function(F){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,te=NaN;return F&&F.hasOwnProperty(p.Z.MINIMUM_UPDATE_PERIOD)&&(te=F.minimumUpdatePeriod),isNaN(te)?te:Math.max(te-se,1)},getPublishTime:function(F){return F&&F.hasOwnProperty(p.Z.PUBLISH_TIME)?new Date(F[p.Z.PUBLISH_TIME]):null},getRepresentationCount:function(F){return F&&Array.isArray(F.Representation_asArray)?F.Representation_asArray.length:0},getBitrateListForAdaptation:function(F){var se=ce(F);return(se&&Array.isArray(se.Representation_asArray)?se.Representation_asArray:[]).map((function(te){return{bandwidth:te.bandwidth,width:te.width||0,height:te.height||0,scanType:te.scanType||null,id:te.id||null}}))},getRepresentationFor:function(F,se){return se&&se.Representation_asArray&&se.Representation_asArray.length>0&&Z(F)?se.Representation_asArray[F]:null},getRepresentationsForAdaptation:function(F){var se,te,re,G,Ie=[],we=(function(ut){if(ut&&ut.period&&Z(ut.period.index)){var mt=ut.period.mpd.manifest.Period_asArray[ut.period.index];if(mt&&mt.AdaptationSet_asArray&&Z(ut.index))return ce(mt.AdaptationSet_asArray[ut.index])}})(F);if(we&&we.Representation_asArray){if(F&&F.period&&Z(F.period.index)){var ke=ge(F.period.mpd.manifest);ke&&(te=ke[0])}for(var Ae=0,ue=we.Representation_asArray.length;Ae<ue;++Ae){var Se=we.Representation_asArray[Ae],qe=new bi;if(qe.index=Ae,qe.adaptation=F,Se.hasOwnProperty(p.Z.ID)&&(qe.id=Se.id),Se.hasOwnProperty(p.Z.CODECS)&&(qe.codecs=Se.codecs),Se.hasOwnProperty(p.Z.MIME_TYPE)&&(qe.mimeType=Se[p.Z.MIME_TYPE]),Se.hasOwnProperty(p.Z.CODEC_PRIVATE_DATA)&&(qe.codecPrivateData=Se.codecPrivateData),Se.hasOwnProperty(p.Z.BANDWITH)&&(qe.bandwidth=Se.bandwidth),Se.hasOwnProperty(p.Z.WIDTH)&&(qe.width=Se.width),Se.hasOwnProperty(p.Z.HEIGHT)&&(qe.height=Se.height),Se.hasOwnProperty(p.Z.SCAN_TYPE)&&(qe.scanType=Se.scanType),Se.hasOwnProperty(p.Z.MAX_PLAYOUT_RATE)&&(qe.maxPlayoutRate=Se.maxPlayoutRate),Se.hasOwnProperty(p.Z.SEGMENT_BASE)?(se=Se.SegmentBase,qe.segmentInfoType=p.Z.SEGMENT_BASE):Se.hasOwnProperty(p.Z.SEGMENT_LIST)?(se=Se.SegmentList).hasOwnProperty(p.Z.SEGMENT_TIMELINE)?qe.segmentInfoType=p.Z.SEGMENT_TIMELINE:qe.segmentInfoType=p.Z.SEGMENT_LIST:Se.hasOwnProperty(p.Z.SEGMENT_TEMPLATE)?((se=Se.SegmentTemplate).hasOwnProperty(p.Z.SEGMENT_TIMELINE)?qe.segmentInfoType=p.Z.SEGMENT_TIMELINE:qe.segmentInfoType=p.Z.SEGMENT_TEMPLATE,se.hasOwnProperty(p.Z.INITIALIZATION_MINUS)&&(qe.initialization=se.initialization.split("$Bandwidth$").join(Se.bandwidth).split("$RepresentationID$").join(Se.id))):qe.segmentInfoType=p.Z.BASE_URL,qe.essentialProperties=Be(Se),se){if(se.hasOwnProperty(p.Z.INITIALIZATION)){var gt=se.Initialization;gt.hasOwnProperty(p.Z.SOURCE_URL)&&(qe.initialization=gt.sourceURL),gt.hasOwnProperty(p.Z.RANGE)&&(qe.range=gt.range)}else fe(we)&&le(we)&&we.mimeType&&we.mimeType.indexOf("application/mp4")===-1&&(qe.range=0);se.hasOwnProperty(p.Z.TIMESCALE)&&(qe.timescale=se.timescale),se.hasOwnProperty(p.Z.DURATION)?qe.segmentDuration=se.duration/qe.timescale:Se.hasOwnProperty(p.Z.SEGMENT_TEMPLATE)&&(se=Se.SegmentTemplate).hasOwnProperty(p.Z.SEGMENT_TIMELINE)&&(qe.segmentDuration=Ke(se.SegmentTimeline)/qe.timescale),se.hasOwnProperty(p.Z.MEDIA)&&(qe.media=se.media),se.hasOwnProperty(p.Z.START_NUMBER)&&(qe.startNumber=se.startNumber),se.hasOwnProperty(p.Z.INDEX_RANGE)&&(qe.indexRange=se.indexRange),se.hasOwnProperty(p.Z.PRESENTATION_TIME_OFFSET)&&(qe.presentationTimeOffset=se.presentationTimeOffset/qe.timescale),se.hasOwnProperty(p.Z.AVAILABILITY_TIME_OFFSET)?qe.availabilityTimeOffset=se.availabilityTimeOffset:te&&te.availabilityTimeOffset!==void 0&&(qe.availabilityTimeOffset=te.availabilityTimeOffset),se.hasOwnProperty(p.Z.AVAILABILITY_TIME_COMPLETE)?qe.availabilityTimeComplete=se.availabilityTimeComplete!=="false":te&&te.availabilityTimeComplete!==void 0&&(qe.availabilityTimeComplete=te.availabilityTimeComplete)}qe.MSETimeOffset=(G=(re=qe).presentationTimeOffset,re.adaptation.period.start-G),qe.path=[F.period.index,F.index,Ae],Ie.push(qe)}}return Ie},getAdaptationsForPeriod:function(F){var se,te,re,G=F&&Z(F.index)?F.mpd.manifest.Period_asArray[F.index]:null,Ie=[];if(G&&G.AdaptationSet_asArray)for(re=0;re<G.AdaptationSet_asArray.length;re++)te=G.AdaptationSet_asArray[re],se=new Jr,te.hasOwnProperty(p.Z.ID)&&(se.id=te.id),se.index=re,se.period=F,K(te,h.Z.MUXED)?se.type=h.Z.MUXED:K(te,h.Z.AUDIO)?se.type=h.Z.AUDIO:_e(te)?se.type=h.Z.VIDEO:fe(te)?se.type=h.Z.TEXT:Q(te)?se.type=h.Z.IMAGE:R.warn("Unknown Adaptation stream type"),Ie.push(se);return Ie},getRegularPeriods:function(F){var se,te,re=!!F&&Oe(F.manifest),G=[],Ie=null,we=null,ke=null,Ae=null;for(te=0,se=F&&F.manifest&&F.manifest.Period_asArray?F.manifest.Period_asArray.length:0;te<se;te++)(we=F.manifest.Period_asArray[te]).hasOwnProperty(p.Z.START)?(Ae=new ei).start=we.start:Ie!==null&&Ie.hasOwnProperty(p.Z.DURATION)&&ke!==null?(Ae=new ei).start=parseFloat((ke.start+ke.duration).toFixed(5)):te!==0||re||((Ae=new ei).start=0),ke!==null&&isNaN(ke.duration)&&(Ae!==null?ke.duration=parseFloat((Ae.start-ke.start).toFixed(5)):R.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),Ae!==null&&(Ae.id=me(we,te),Ae.index=te,Ae.mpd=F,we.hasOwnProperty(p.Z.DURATION)&&(Ae.duration=we.duration),ke&&(ke.nextPeriodId=Ae.id),G.push(Ae),Ie=we,ke=Ae),we=null,Ae=null;return G.length===0||ke!==null&&isNaN(ke.duration)&&(ke.duration=parseFloat(((function(ue){(function(){if(!P||!P.hasOwnProperty("error"))throw new Error(h.Z.MISSING_CONFIG_ERROR)})();var Se,qe=Oe(ue.mpd.manifest);return ue.mpd.manifest.mediaPresentationDuration?Se=ue.mpd.manifest.mediaPresentationDuration:ue.duration?Se=ue.duration:qe?Se=Number.POSITIVE_INFINITY:P.error(new ve.Z(oe.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",ue)),Se})(ke)-ke.start).toFixed(5))),G},getMpd:function(F){var se=new jr;return F&&(se.manifest=F,F.hasOwnProperty(p.Z.AVAILABILITY_START_TIME)?se.availabilityStartTime=new Date(F.availabilityStartTime.getTime()):F.loadedTime&&(se.availabilityStartTime=new Date(F.loadedTime.getTime())),F.hasOwnProperty(p.Z.AVAILABILITY_END_TIME)&&(se.availabilityEndTime=new Date(F.availabilityEndTime.getTime())),F.hasOwnProperty(p.Z.MINIMUM_UPDATE_PERIOD)&&(se.minimumUpdatePeriod=F.minimumUpdatePeriod),F.hasOwnProperty(p.Z.MEDIA_PRESENTATION_DURATION)&&(se.mediaPresentationDuration=F.mediaPresentationDuration),F.hasOwnProperty(p.Z.SUGGESTED_PRESENTATION_DELAY)&&(se.suggestedPresentationDelay=F.suggestedPresentationDelay),F.hasOwnProperty(p.Z.TIMESHIFT_BUFFER_DEPTH)&&(se.timeShiftBufferDepth=F.timeShiftBufferDepth),F.hasOwnProperty(p.Z.MAX_SEGMENT_DURATION)&&(se.maxSegmentDuration=F.maxSegmentDuration),F.hasOwnProperty(p.Z.PUBLISH_TIME)&&(se.publishTime=new Date(F.publishTime))),se},getEventsForPeriod:function(F){var se,te,re=F&&F.mpd&&F.mpd.manifest?F.mpd.manifest:null,G=re?re.Period_asArray:null,Ie=G&&F&&Z(F.index)?G[F.index].EventStream_asArray:null,we=[];if(Ie)for(se=0;se<Ie.length;se++){var ke=new xo;if(ke.period=F,ke.timescale=1,!Ie[se].hasOwnProperty(h.Z.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(ke.schemeIdUri=Ie[se][h.Z.SCHEME_ID_URI],Ie[se].hasOwnProperty(p.Z.TIMESCALE)&&(ke.timescale=Ie[se][p.Z.TIMESCALE]),Ie[se].hasOwnProperty(p.Z.VALUE)&&(ke.value=Ie[se][p.Z.VALUE]),Ie[se].hasOwnProperty(p.Z.PRESENTATION_TIME_OFFSET)&&(ke.presentationTimeOffset=Ie[se][p.Z.PRESENTATION_TIME_OFFSET]),te=0;Ie[se].Event_asArray&&te<Ie[se].Event_asArray.length;te++){var Ae=Ie[se].Event_asArray[te],ue=new ro;ue.presentationTime=0,ue.eventStream=ke,Ae.hasOwnProperty(p.Z.PRESENTATION_TIME)&&(ue.presentationTime=Ae.presentationTime);var Se=ke.presentationTimeOffset?ke.presentationTimeOffset/ke.timescale:0;ue.calculatedPresentationTime=ue.presentationTime/ke.timescale+F.start-Se,Ae.hasOwnProperty(p.Z.DURATION)&&(ue.duration=Ae.duration/ke.timescale),Ae.hasOwnProperty(p.Z.ID)?ue.id=Ae.id:ue.id=null,Ae.Signal&&Ae.Signal.Binary?ue.messageData=z.decodeArray(Ae.Signal.Binary.toString()):ue.messageData=Ae.messageData||Ae.__cdata||Ae.__text,we.push(ue)}}return we},getEssentialPropertiesForAdaptation:function(F){var se={};if(F&&F.hasOwnProperty(p.Z.ESSENTIAL_PROPERTY_ASARRAY)){var te,re=vn(F.EssentialProperty_asArray);try{for(re.s();!(te=re.n()).done;){var G=te.value;G.hasOwnProperty(h.Z.SCHEME_ID_URI)&&(se[G[h.Z.SCHEME_ID_URI]]=Nt({},G))}}catch(Ie){re.e(Ie)}finally{re.f()}}return se},getEssentialPropertiesAsArrayForAdaptation:function(F){return F&&F.hasOwnProperty(p.Z.ESSENTIAL_PROPERTY_ASARRAY)&&F.EssentialProperty_asArray.length?F.EssentialProperty_asArray.map((function(se){return new Te().init(se)})):[]},getEssentialPropertiesForRepresentation:Be,getEventStreamForAdaptationSet:function(F,se,te){var re,G,Ie;return F&&F.Period_asArray&&se&&se.period&&Z(se.period.index)&&(G=F.Period_asArray[se.period.index])&&G.AdaptationSet_asArray&&Z(se.index)&&(Ie=G.AdaptationSet_asArray[se.index])&&(re=Ie.InbandEventStream_asArray),Le(re,null,te)},getEventStreamForRepresentation:function(F,se,te){var re,G,Ie,we;return F&&F.Period_asArray&&se&&se.adaptation&&se.adaptation.period&&Z(se.adaptation.period.index)&&(G=F.Period_asArray[se.adaptation.period.index])&&G.AdaptationSet_asArray&&Z(se.adaptation.index)&&(Ie=G.AdaptationSet_asArray[se.adaptation.index])&&Ie.Representation_asArray&&Z(se.index)&&(we=Ie.Representation_asArray[se.index])&&(re=we.InbandEventStream_asArray),Le(re,se,te)},getUTCTimingSources:function(F){var se=Oe(F),te=!!F&&F.hasOwnProperty(p.Z.AVAILABILITY_START_TIME),re=F?F.UTCTiming_asArray:null,G=[];return(se||te)&&re&&re.forEach((function(Ie){var we=new qi.Z;Ie.hasOwnProperty(h.Z.SCHEME_ID_URI)&&(we.schemeIdUri=Ie.schemeIdUri,Ie.hasOwnProperty(p.Z.VALUE)&&(we.value=Ie.value.toString(),G.push(we)))})),G},getBaseURLsFromElement:ge,getRepresentationSortFunction:function(){return function(F,se){return F.bandwidth-se.bandwidth}},getContentSteering:function(F){if(F&&F.hasOwnProperty(p.Z.CONTENT_STEERING_AS_ARRAY))return Fe(F[p.Z.CONTENT_STEERING_AS_ARRAY][0])},getLocation:function(F){return F&&F.hasOwnProperty(p.Z.LOCATION_AS_ARRAY)?F[p.Z.LOCATION_AS_ARRAY].map((function(se){var te=se.__text||se,re=se.hasOwnProperty(p.Z.SERVICE_LOCATION)?se[p.Z.SERVICE_LOCATION]:null;return new Qt(te,re)})):[]},getPatchLocation:function(F){return F&&F.hasOwnProperty(p.Z.PATCH_LOCATION_AS_ARRAY)?F[p.Z.PATCH_LOCATION_AS_ARRAY].map((function(se){var te=se.__text||se,re=se.hasOwnProperty(p.Z.SERVICE_LOCATION)?se[p.Z.SERVICE_LOCATION]:null,G=se.hasOwnProperty(p.Z.TTL)?1e3*parseFloat(se[p.Z.TTL]):NaN;return new sn(te,re,G)})):[]},getSuggestedPresentationDelay:function(F){return F&&F.hasOwnProperty(p.Z.SUGGESTED_PRESENTATION_DELAY)?F.suggestedPresentationDelay:null},getAvailabilityStartTime:function(F){return F&&F.hasOwnProperty(p.Z.AVAILABILITY_START_TIME)&&F.availabilityStartTime!==null?F.availabilityStartTime.getTime():null},getServiceDescriptions:function(F){var se=[];if(F&&F.hasOwnProperty(p.Z.SERVICE_DESCRIPTION)){var te,re=vn(F.ServiceDescription_asArray);try{for(re.s();!(te=re.n()).done;){var G=te.value,Ie=null,we=null,ke=null,Ae=null,ue=null,Se=null,qe=null;for(var gt in G)G.hasOwnProperty(gt)&&(gt===p.Z.ID?Ie=G[gt]:gt===p.Z.SERVICE_DESCRIPTION_SCOPE?we=G[gt].schemeIdUri:gt===p.Z.SERVICE_DESCRIPTION_LATENCY?ke={target:parseInt(G[gt].target),max:parseInt(G[gt].max),min:parseInt(G[gt].min),referenceId:parseInt(G[gt].referenceId)}:gt===p.Z.SERVICE_DESCRIPTION_PLAYBACK_RATE?Ae={max:parseFloat(G[gt].max),min:parseFloat(G[gt].min)}:gt===p.Z.SERVICE_DESCRIPTION_OPERATING_QUALITY?ue={mediaType:G[gt].mediaType,max:parseInt(G[gt].max),min:parseInt(G[gt].min),target:parseInt(G[gt].target),type:G[gt].type,maxQualityDifference:parseInt(G[gt].maxQualityDifference)}:gt===p.Z.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH?Se={mediaType:G[gt].mediaType,max:parseInt(G[gt].max),min:parseInt(G[gt].min),target:parseInt(G[gt].target)}:gt===p.Z.CONTENT_STEERING&&(qe=Fe(G[gt])));se.push({id:Ie,schemeIdUri:we,latency:ke,playbackRate:Ae,operatingQuality:ue,operatingBandwidth:Se,contentSteering:qe})}}catch(ut){re.e(ut)}finally{re.f()}}return se},getSegmentAlignment:function(F){return!(!F||!F.hasOwnProperty(p.Z.SEGMENT_ALIGNMENT))&&F[p.Z.SEGMENT_ALIGNMENT]==="true"},getSubSegmentAlignment:function(F){return!(!F||!F.hasOwnProperty(p.Z.SUB_SEGMENT_ALIGNMENT))&&F[p.Z.SUB_SEGMENT_ALIGNMENT]==="true"},getSupplementalPropertiesForAdaptation:function(F){var se={};if(F&&F.hasOwnProperty(p.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var te,re=vn(F.SupplementalProperty_asArray);try{for(re.s();!(te=re.n()).done;){var G=te.value;G.hasOwnProperty(h.Z.SCHEME_ID_URI)&&(se[G[h.Z.SCHEME_ID_URI]]=Nt({},G))}}catch(Ie){re.e(Ie)}finally{re.f()}}return se},getSupplementalPropertiesAsArrayForAdaptation:function(F){return F&&F.hasOwnProperty(p.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&F.SupplementalProperty_asArray.length?F.SupplementalProperty_asArray.map((function(se){return new Te().init(se)})):[]},getSupplementalPropertiesForRepresentation:function(F){var se={};if(F&&F.hasOwnProperty(p.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)){var te,re=vn(F.SupplementalProperty_asArray);try{for(re.s();!(te=re.n()).done;){var G=te.value;G.hasOwnProperty(h.Z.SCHEME_ID_URI)&&(se[G[h.Z.SCHEME_ID_URI]]=Nt({},G))}}catch(Ie){re.e(Ie)}finally{re.f()}}return se},getSupplementalPropertiesAsArrayForRepresentation:function(F){return F&&F.hasOwnProperty(p.Z.SUPPLEMENTAL_PROPERTY_ASARRAY)&&F.SupplementalProperty_asArray.length?F.SupplementalProperty_asArray.map((function(se){return new Te().init(se)})):[]},setConfig:function(F){F&&(F.errHandler&&(P=F.errHandler),F.BASE64&&(z=F.BASE64))}},R=(0,C.Z)(W).getInstance().getLogger(L),L}Er.__dashjs_factory_name="DashManifestModel";var cn=I.Z.getSingletonFactory(Er),ze=f(703);function pt(L,R){var P;if(typeof Symbol>"u"||L[Symbol.iterator]==null){if(Array.isArray(L)||(P=(function(le,_e){if(le){if(typeof le=="string")return Gt(le,_e);var fe=Object.prototype.toString.call(le).slice(8,-1);return fe==="Object"&&le.constructor&&(fe=le.constructor.name),fe==="Map"||fe==="Set"?Array.from(le):fe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(fe)?Gt(le,_e):void 0}})(L))||R){P&&(L=P);var z=0,W=function(){};return{s:W,n:function(){return z>=L.length?{done:!0}:{done:!1,value:L[z++]}},e:function(le){throw le},f:W}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var q,Z=!0,K=!1;return{s:function(){P=L[Symbol.iterator]()},n:function(){var le=P.next();return Z=le.done,le},e:function(le){K=!0,q=le},f:function(){try{Z||P.return==null||P.return()}finally{if(K)throw q}}}}function Gt(L,R){(R==null||R>L.length)&&(R=L.length);for(var P=0,z=new Array(R);P<R;P++)z[P]=L[P];return z}function Gn(){var L,R,P,z,W,q,Z,K,le,_e,fe=this.context,Q=(0,A.Z)(fe).getInstance(),ce=(0,Ce.Z)(fe).getInstance();function ae(){P={pr:1,nor:null,st:null,sf:null,sid:"".concat(ze.Z.generateUuid()),cid:null},le={},K={},_e={},Oe()}function He(){Oe()}function Oe(){if(q){var G=q.getStreamController();if(G&&typeof G.getActiveStream=="function"){var Ie=G.getActiveStream();Ie&&(Z=Ie.getProcessors())}}}function Be(G,Ie){var we,ke={},Ae=pt(Ie);try{for(Ae.s();!(we=Ae.n()).done;){var ue=we.value;G[ue]&&(ke[ue]=G[ue])}}catch(Se){Ae.e(Se)}finally{Ae.f()}return ke}function Ke(G){var Ie=ce.get().streaming.cmcd.enabledKeys;return G.filter((function(we){return Ie.includes(we)}))}function me(G){try{return G.type===Ye.w.MPD_TYPE?((we=Le()).ot="m",we):G.type===Ye.w.MEDIA_SEGMENT_TYPE?(Ie=G.mediaType,_e.hasOwnProperty(Ie)||(_e[Ie]=!1),K.hasOwnProperty(Ie)||(K[Ie]=!1),le.hasOwnProperty(Ie)||(le[Ie]=!1),(function(ke){var Ae,ue=Le(),Se=(function(Bt){try{var Nn=Bt.quality,lt=Bt.mediaInfo.bitrateList;return parseInt(lt[Nn].bandwidth/1e3)}catch{return null}})(ke),qe=(function(Bt){try{return isNaN(Bt.duration)?NaN:Math.round(1e3*Bt.duration)}catch{return null}})(ke),gt=(function(Bt){try{return 100*parseInt(z.getThroughputHistory().getSafeAverageThroughput(Bt)/100)}catch{return null}})(ke.mediaType),ut=(function(Bt){try{var Nn=P.pr,lt=W.getCurrentBufferLevel(Bt);return isNaN(Nn)||isNaN(lt)?null:100*parseInt(lt/Nn*10)}catch{return null}})(ke.mediaType),mt=ge(ke.mediaType),dt=(function(Bt){try{var Nn=z.getTopBitrateInfoFor(Bt);return Math.round(Nn.bitrate/1e3)}catch{return null}})(ke.mediaType),zt=P.pr,Ut=(function(Bt){if(Z&&Z.length!==0){var Nn,lt=pt(Z);try{for(lt.s();!(Nn=lt.n()).done;){var bt=Nn.value;if(bt.getType()===Bt)return bt.probeNextRequest()}}catch(tn){lt.e(tn)}finally{lt.f()}}})(ke.mediaType);ke.mediaType===h.Z.VIDEO&&(Ae="v"),ke.mediaType===h.Z.AUDIO&&(Ae="a"),ke.mediaType===h.Z.TEXT&&(Ae=ke.mediaInfo.mimeType==="application/mp4"?"tt":"c");var Ft=ce.get().streaming.cmcd.rtp;return Ft||(Ft=(function(Bt){try{var Nn=q.getPlaybackRate();Nn||(Nn=1);var lt=Bt.quality,bt=Bt.mediaType,tn=Bt.mediaInfo,Lt=Bt.duration;if(!tn)return NaN;var an=ge(bt);an===0&&(an=500);var ln=tn.bitrateList[lt].bandwidth*Lt/1e3/(an/Nn/1e3),Xt=ce.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(ce.get().streaming.cmcd.rtpSafetyFactor)?ce.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(ln*Xt/100)+1)}catch{return NaN}})(ke)),isNaN(Ft)||(ue.rtp=Ft),Ut&&(ke.url!==Ut.url?ue.nor=encodeURIComponent(ze.Z.getRelativeUrl(ke.url,Ut.url)):Ut.range&&(ue.nrr=Ut.range)),Se&&(ue.br=Se),Ae&&(ue.ot=Ae),isNaN(qe)||(ue.d=qe),isNaN(gt)||(ue.mtp=gt),isNaN(ut)||(ue.dl=ut),isNaN(mt)||(ue.bl=mt),isNaN(dt)||(ue.tb=dt),isNaN(zt)||zt===1||(ue.pr=zt),le[ke.mediaType]&&(ue.bs=!0,le[ke.mediaType]=!1),!K[ke.mediaType]&&_e[ke.mediaType]||(ue.su=!0,K[ke.mediaType]=!1,_e[ke.mediaType]=!0),ue})(G)):G.type===Ye.w.INIT_SEGMENT_TYPE?(function(){var ke=Le();return ke.ot="i",ke.su=!0,ke})():G.type===Ye.w.OTHER_TYPE||G.type===Ye.w.XLINK_EXPANSION_TYPE?(function(){var ke=Le();return ke.ot="o",ke})():G.type===Ye.w.LICENSE?(function(ke){var Ae=Le();return Ae.ot="k",Ae})():null}catch{return null}var Ie,we}function Le(){var G={},Ie=ce.get().streaming.cmcd.cid?ce.get().streaming.cmcd.cid:P.cid;return G.v=1,G.sid=ce.get().streaming.cmcd.sid?ce.get().streaming.cmcd.sid:P.sid,G.sid="".concat(G.sid),Ie&&(G.cid="".concat(Ie)),isNaN(P.pr)||P.pr===1||P.pr===null||(G.pr=P.pr),P.st&&(G.st=P.st),P.sf&&(G.sf=P.sf),G}function ge(G){try{var Ie=W.getCurrentBufferLevel(G);return isNaN(Ie)?null:100*parseInt(10*Ie)}catch{return null}}function Fe(G){try{P.pr=G.playbackRate}catch{}}function F(G){try{var Ie=L.getIsDynamic(G.data)?"l":"v",we=G.protocol&&G.protocol==="MSS"?"s":"d";P.st="".concat(Ie),P.sf="".concat(we)}catch{}}function se(G){try{G.state&&G.mediaType&&G.state===v.Z.BUFFER_EMPTY&&(le[G.mediaType]||(le[G.mediaType]=!0),K[G.mediaType]||(K[G.mediaType]=!0))}catch{}}function te(){for(var G in le)le.hasOwnProperty(G)&&(le[G]=!0);for(var Ie in K)K.hasOwnProperty(Ie)&&(K[Ie]=!0)}function re(G){try{if(!G)return null;var Ie=Object.keys(G).sort((function(Ae,ue){return Ae.localeCompare(ue)})),we=Ie.length,ke=Ie.reduce((function(Ae,ue,Se){return ue==="v"&&G[ue]===1||(typeof G[ue]=="string"&&ue!=="ot"&&ue!=="sf"&&ue!=="st"?Ae+="".concat(ue,"=").concat(JSON.stringify(G[ue])):Ae+="".concat(ue,"=").concat(G[ue]),Se<we-1&&(Ae+=",")),Ae}),"");return(ke=ke.replace(/=true/g,"")).replace(/,\s*$/,"")}catch{return null}}return R={getQueryParameter:function(G){try{if(ce.get().streaming.cmcd&&ce.get().streaming.cmcd.enabled){var Ie=me(G),we=(function(Ae){try{var ue=ce.get().streaming.cmcd.enabledKeys;return Object.keys(Ae).filter((function(Se){return ue.includes(Se)})).reduce((function(Se,qe){return Se[qe]=Ae[qe],Se}),{})}catch{return Ae}})(Ie),ke=re(we);return Q.trigger(Dr.Z.CMCD_DATA_GENERATED,{url:G.url,mediaType:G.mediaType,cmcdData:Ie,cmcdString:ke}),{key:"CMCD",value:ke}}return null}catch{return null}},getHeaderParameters:function(G){try{if(ce.get().streaming.cmcd&&ce.get().streaming.cmcd.enabled){var Ie=me(G),we=Be(Ie,Ke(["br","d","ot","tb"])),ke=Be(Ie,Ke(["bl","dl","mtp","nor","nrr","su"])),Ae=Be(Ie,Ke(["bs","rtp"])),ue=Be(Ie,Ke(["cid","pr","sf","sid","st","v"])),Se={"CMCD-Object":re(we),"CMCD-Request":re(ke),"CMCD-Status":re(Ae),"CMCD-Session":re(ue)};return Q.trigger(Dr.Z.CMCD_DATA_GENERATED,{url:G.url,mediaType:G.mediaType,cmcdData:Ie,headers:Se}),Se}return null}catch{return null}},setConfig:function(G){G&&(G.abrController&&(z=G.abrController),G.dashMetrics&&(W=G.dashMetrics),G.playbackController&&(q=G.playbackController))},reset:function(){Q.off(v.Z.PLAYBACK_RATE_CHANGED,Fe,this),Q.off(v.Z.MANIFEST_LOADED,F,this),Q.off(v.Z.BUFFER_LEVEL_STATE_CHANGED,se,R),Q.off(v.Z.PLAYBACK_SEEKED,te,R),ae()},initialize:function(){Q.on(v.Z.PLAYBACK_RATE_CHANGED,Fe,R),Q.on(v.Z.MANIFEST_LOADED,F,R),Q.on(v.Z.BUFFER_LEVEL_STATE_CHANGED,se,R),Q.on(v.Z.PLAYBACK_SEEKED,te,R),Q.on(v.Z.PERIOD_SWITCH_COMPLETED,He,R)}},L=cn(fe).getInstance(),ae(),R}Gn.__dashjs_factory_name="CmcdModel";var Rn=I.Z.getSingletonFactory(Gn);function pr(L){return pr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},pr(L)}function Sr(L,R){Sr=function(K,le){return new q(K,void 0,le)};var P=xi(RegExp),z=RegExp.prototype,W=new WeakMap;function q(K,le,_e){var fe=P.call(this,K,le);return W.set(fe,_e||W.get(K)),fe}function Z(K,le){var _e=W.get(le);return Object.keys(_e).reduce((function(fe,Q){return fe[Q]=K[_e[Q]],fe}),Object.create(null))}return Ri(q,P),q.prototype.exec=function(K){var le=z.exec.call(this,K);return le&&(le.groups=Z(le,this)),le},q.prototype[Symbol.replace]=function(K,le){if(typeof le=="string"){var _e=W.get(this);return z[Symbol.replace].call(this,K,le.replace(/\$<([^>]+)>/g,(function(Q,ce){return"$"+_e[ce]})))}if(typeof le=="function"){var fe=this;return z[Symbol.replace].call(this,K,(function(){var Q=[];return Q.push.apply(Q,arguments),pr(Q[Q.length-1])!=="object"&&Q.push(Z(Q,fe)),le.apply(this,Q)}))}return z[Symbol.replace].call(this,K,le)},Sr.apply(this,arguments)}function Ri(L,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function");L.prototype=Object.create(R&&R.prototype,{constructor:{value:L,writable:!0,configurable:!0}}),R&&yi(L,R)}function xi(L){var R=typeof Map=="function"?new Map:void 0;return xi=function(P){if(P===null||(z=P,Function.toString.call(z).indexOf("[native code]")===-1))return P;var z;if(typeof P!="function")throw new TypeError("Super expression must either be null or a function");if(R!==void 0){if(R.has(P))return R.get(P);R.set(P,W)}function W(){return oi(P,arguments,Ni(this).constructor)}return W.prototype=Object.create(P.prototype,{constructor:{value:W,enumerable:!1,writable:!0,configurable:!0}}),yi(W,P)},xi(L)}function oi(L,R,P){return oi=Vr()?Reflect.construct:function(z,W,q){var Z=[null];Z.push.apply(Z,W);var K=new(Function.bind.apply(z,Z));return q&&yi(K,q.prototype),K},oi.apply(null,arguments)}function Vr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}function yi(L,R){return yi=Object.setPrototypeOf||function(P,z){return P.__proto__=z,P},yi(L,R)}function Ni(L){return Ni=Object.setPrototypeOf?Object.getPrototypeOf:function(R){return R.__proto__||Object.getPrototypeOf(R)},Ni(L)}var Ja="static",po="dynamic",_s="cmsd-",yo=_s+Ja,Aa=_s+po,Qo="stream",El=["mb","st","sf","v"],Ia={video:"v",audio:"a",text:"tt",stream:Qo},aa=/^[-0-9]/;function el(){var L,R,P,z,W=this.context,q=(0,A.Z)(W).getInstance();function Z(){P={},z={}}function K(ae){ae&&Object.keys(ae).forEach((function(He){El.includes(He)||delete ae[He]}))}function le(ae){return!ae||ae.toLowerCase()!=="false"&&(aa.test(ae)?parseInt(ae,10):ae.replace(/["]+/g,""))}function _e(ae){try{for(var He={},Oe=ae.split(","),Be=0;Be<Oe.length;Be++){var Ke=Oe[Be].split("="),me=Ke[0],Le=le(Ke[1]);He[me]=Le}return He}catch(ge){R.error("Failed to parse CMSD-Static response header value:",ge)}}function fe(ae){try{for(var He={},Oe=ae.split(","),Be=Oe[Oe.length-1].split(";"),Ke=1;Ke<Be.length;Ke++){var me=Be[Ke].split("="),Le=me[0],ge=le(me[1]);He[Le]=ge}return He}catch(Fe){return R.error("Failed to parse CMSD-Dynamic response header value:",Fe),[]}}function Q(ae){return Ia[ae]||"o"}function ce(ae,He,Oe){var Be=ae===Ja?P:z,Ke=Be[He]||{},me=Be[Qo]||{};return Ke[Oe]||me[Oe]}return L={setConfig:function(){},initialize:function(){},reset:function(){Z()},parseResponseHeaders:function(ae,He){for(var Oe=null,Be=null,Ke=ae.split(`\r
`),me=Ke.length-1;me>=0;me--){var Le=Ke[me].match(Sr(/^((?:(?!:)[\s\S])*):[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(.*)$/,{key:1,value:2}));if(Le&&Le.groups){var ge=Le.groups.key.toLowerCase(),Fe=Le.groups.value;switch(ge){case yo:Oe=_e(Fe),q.trigger(_.Z.CMSD_STATIC_HEADER,Oe);break;case Aa:Be||(Be=fe(Fe))}}}var F=Qo;return Oe&&Oe.ot?F=Oe.ot:He&&(F=Q(He)),K(P[F]),K(z[F]),Oe&&(P[F]=Object.assign(P[F]||{},Oe)),Be&&(z[F]=Object.assign(z[F]||{},Be)),{static:Oe,dynamic:Be}},getMaxBitrate:function(ae){var He=Q(ae);return ce(po,He,"mb")||-1},getEstimatedThroughput:function(ae){var He=Q(ae);return ce(po,He,"etp")||null},getResponseDelay:function(ae){var He=Q(ae);return ce(po,He,"rd")||null},getRoundTripTime:function(ae){var He=Q(ae);return ce(po,He,"rtt")||null}},R=(0,C.Z)(W).getInstance().getLogger(L),Z(),L}el.__dashjs_factory_name="CmsdModel";var xn=I.Z.getSingletonFactory(el);function nr(){var L,R,P=this.context,z={};function W(){R=(0,C.Z)(P).getInstance().getLogger(L)}function q(K){for(var le={},_e=0,fe=0,Q=0,ce=0,ae=K.length,He=0;He<ae;++He)_e+=K[He].chunkDownloadTimeRelativeMS,fe+=K[He].bufferLevel,Q+=K[He].chunkDownloadTimeRelativeMS*K[He].bufferLevel,ce+=K[He].chunkDownloadTimeRelativeMS*K[He].chunkDownloadTimeRelativeMS;return le.m=(Q-_e*fe/ae)/(ce-_e*_e/ae),le.b=fe/ae-le.m*_e/ae,function(Oe){return le.m*Oe+le.b}}function Z(K){var le,_e=!0,fe=K.reduce((function(Q,ce){return Q+ce.bufferLevelAtSegmentEnd}),0)/K.length;return K.forEach((function(Q){Math.abs(Q.bufferLevelAtSegmentEnd/Q.bufferLevelAtSegmentStart)<.95&&(_e=!1),Q.bufferLevelAtSegmentEnd/fe<.8&&(_e=!1),le?le>Q.bitrate&&(_e=!1):le=Q.bitrate})),_e}return L={setup:W,addMeasurement:function(K,le,_e,fe,Q){K&&K.mediaType&&!z[K.mediaType]&&(z[K.mediaType]=[]);var ce=K.mediaInfo.bitrateList.find((function(ae){return ae.id===K.representationId}));z[K.mediaType].push({index:K.index,repId:K.representationId,mediaType:K.mediaType,requestTimeMS:fe,adjustedAvailabilityStartTimeMS:K.availabilityStartTime.getTime(),segDurationMS:1e3*K.duration,chunksDurationMS:_e.reduce((function(ae,He){return ae+He.chunkDownloadDurationMS}),0),segmentBytes:_e.reduce((function(ae,He){return ae+He.chunkBytes}),0),bitrate:ce&&ce.bandwidth,bitrateList:K.mediaInfo.bitrateList,chunkMeasurements:_e,fetchDownloadDurationMS:le,throughputCapacityDelayMS:Q,getEstimatedBufferLevel:q(_e.slice(1))}),z[K.mediaType].length>10&&z[K.mediaType].shift()},getThroughputCapacityDelayMS:function(K,le){var _e=z[K.mediaType]&&z[K.mediaType].slice(-3);return!_e||_e.length<3?0:Z(_e)?le/4>250?250:le/4:0},getEstimatedDownloadDurationMS:function(K){var le=z[K.mediaType].slice(-1).pop(),_e=z[K.mediaType].slice(-3),fe=le.chunkMeasurements.slice(-1).pop().chunkDownloadTimeRelativeMS;le.bufferLevelAtSegmentStart=le.getEstimatedBufferLevel(fe/2),le.bufferLevelAtSegmentEnd=le.getEstimatedBufferLevel(fe);var Q=Z(_e),ce=Q?.6:.8;if(le.isBufferStable&&1.05*le.segDurationMS<le.fetchDownloadDurationMS)return le.fetchDownloadDurationMS;if(!Q||le.segDurationMS<le.fetchDownloadDurationMS||le.adjustedAvailabilityStartTimeMS<=le.requestTimeMS+le.throughputCapacityDelayMS-le.segDurationMS)return .8*le.fetchDownloadDurationMS;for(var ae=le.requestTimeMS+le.throughputCapacityDelayMS-le.adjustedAvailabilityStartTimeMS,He=0,Oe=0,Be=0,Ke=0;Ke<le.chunkMeasurements.length;Ke++){var me=le.chunkMeasurements[Ke];if(ae<Oe+me.chunkDownloadDurationMS)break;Oe+=me.chunkDownloadDurationMS,He+=me.chunkBytes,Be++}if(ae<0&&R.warn("request time was before adjusted availibitly start time"),He&&Oe&&Be>.2*le.chunkMeasurements.length){var Le=He/Oe,ge=le.segmentBytes/Le;return le.fetchDownloadDurationMS<ge?le.fetchDownloadDurationMS*ce:ge*ce}var Fe=le.bitrate;return le.bitrateList.some((function(F){if(F.bandwidth>le.bitrate)return Fe=F.bandwidth,!0})),Fe===le.bitrate?le.fetchDownloadDurationMS*ce:ce*le.segmentBytes*8*1e3/Fe}},W(),L}nr.__dashjs_factory_name="LowLatencyThroughputModel";var Rr=I.Z.getSingletonFactory(nr),si=f(5717);function ti(L,R,P){return R in L?Object.defineProperty(L,R,{value:P,enumerable:!0,configurable:!0,writable:!0}):L[R]=P,L}function io(L){L=L||{};var R,P,z,W,q,Z,K,le,_e,fe,Q,ce=this.context,ae=L.errHandler,He=L.dashMetrics,Oe=L.mediaPlayerModel,Be=L.requestModifier,Ke=L.boxParser,me=L.errors,Le=L.requestTimeout||0,ge=(0,A.Z)(ce).getInstance(),Fe=(0,Ce.Z)(ce).getInstance();function F(se,te){var re,G=se.request,Ie=[],we=!0,ke=!0,Ae=new Date,ue=Ae,Se=0,qe=null,gt=null;if(!Be||!He||!ae)throw new Error("config object is not correct or missing");var ut,mt=function(an){G.requestStartDate=Ae,G.requestEndDate=new Date,G.firstByteDate=G.firstByteDate||Ae,G.fileLoaderType=gt;var ln=re.response?re.response.responseURL:null,Xt=re.response?re.response.status:null,Vn=re.response&&re.response.getAllResponseHeaders?re.response.getAllResponseHeaders():re.response?re.response.responseHeaders:null,Mn=Vn&&Fe.get().streaming.cmsd&&Fe.get().streaming.cmsd.enabled?K.parseResponseHeaders(Vn,G.mediaType):null;He.addHttpRequest(G,ln,Xt,Vn,an?Ie:null,Mn)},dt=function(an){ke=!1,mt(an),G.type===Ye.w.MPD_TYPE&&(He.addManifestUpdate(G),ge.trigger(_.Z.MANIFEST_LOADING_FINISHED,{request:G}))},zt=function(){if(qe&&(clearTimeout(qe),qe=null),P.indexOf(re)!==-1&&(P.splice(P.indexOf(re),1),ke))if(dt(!1),te>0){try{Fe.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&G.type===Ye.w.MEDIA_SEGMENT_TYPE&&Oe.getRetryAttemptsForType(Ye.w.MEDIA_SEGMENT_TYPE)===te&&ge.trigger(_.Z.ATTEMPT_BACKGROUND_SYNC)}catch{}te--;var an={config:se};W.push(an),an.timeout=setTimeout((function(){W.indexOf(an)!==-1&&(W.splice(W.indexOf(an),1),F(se,te))}),Oe.getRetryIntervalsForType(G.type))}else{if(G.type===Ye.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;ae.error(new ve.Z(q[G.type],G.url+" is not available",{request:G,response:re.response})),se.error&&se.error(G,"error",re.response.statusText,re.response),se.complete&&se.complete(G,re.response.statusText)}};G.hasOwnProperty("availabilityTimeComplete")&&G.availabilityTimeComplete===!1&&window.fetch&&G.responseType==="arraybuffer"&&G.type===Ye.w.MEDIA_SEGMENT_TYPE?((ut=Fr(ce).create({requestModifier:Be,lowLatencyThroughputModel:_e,boxParser:Ke})).setup({dashMetrics:He}),gt=h.Z.FILE_LOADER_TYPES.FETCH):(ut=(0,_n.Z)(ce).create({requestModifier:Be}),gt=h.Z.FILE_LOADER_TYPES.XHR);var Ut=null,Ft=Be.modifyRequestURL?Be.modifyRequestURL(G.url):G.url;if(Fe.get().streaming.cmcd&&Fe.get().streaming.cmcd.enabled){var Bt=Fe.get().streaming.cmcd.mode;if(Bt===h.Z.CMCD_MODE_QUERY){var Nn=(function(an){try{var ln=[],Xt=Z.getQueryParameter(an);return Xt&&ln.push(Xt),ln}catch{return[]}})(G);Ft=ze.Z.addAditionalQueryParameterToUrl(Ft,Nn)}else Bt===h.Z.CMCD_MODE_HEADER&&(Ut=Z.getHeaderParameters(G))}var lt=le.getXHRWithCredentialsForType(G.type);if(G.queryParams){var bt=Object.keys(G.queryParams).map((function(an){return{key:an,value:G.queryParams[an]}}));Ft=ze.Z.addAditionalQueryParameterToUrl(Ft,bt)}G.url=Ft,re={url:Ft,method:Ye.w.GET,withCredentials:lt,request:G,onload:function(){re.response.status>=200&&re.response.status<=299&&(dt(!0),se.success&&se.success(re.response.response,re.response.statusText,re.response.responseURL),se.complete&&se.complete(G,re.response.statusText))},onend:zt,onerror:zt,progress:function(an){var ln=new Date;we&&(we=!1,(!an.lengthComputable||an.lengthComputable&&an.total!==an.loaded)&&(G.firstByteDate=ln)),an.lengthComputable&&(G.bytesLoaded=an.loaded,G.bytesTotal=an.total),an.noTrace||(Ie.push({s:ue,d:an.time?an.time:ln.getTime()-ue.getTime(),b:[an.loaded?an.loaded-Se:0]}),ue=ln,Se=an.loaded),qe&&(clearTimeout(qe),qe=null),Fe.get().streaming.fragmentRequestProgressTimeout>0&&(qe=setTimeout((function(){fe.warn("Abort request "+re.url+" due to progress timeout"),re.response.onabort=null,re.loader.abort(re),zt()}),Fe.get().streaming.fragmentRequestProgressTimeout)),se.progress&&an&&se.progress(an)},onabort:function(){mt(!0),qe&&(clearTimeout(qe),qe=null),se.abort&&se.abort(G)},ontimeout:function(an){var ln;if(an.lengthComputable){var Xt=an.loaded/an.total*100;ln="Request timeout: loaded: "+an.loaded+", out of: "+an.total+" : "+Xt.toFixed(3)+"% Completed"}else ln="Request timeout: non-computable download size";fe.warn(ln)},loader:ut,timeout:Le,headers:Ut};var tn=new Date().getTime();if(isNaN(G.delayLoadingTime)||tn>=G.delayLoadingTime)P.push(re),ut.load(re);else{var Lt={httpRequest:re};z.push(Lt),Lt.delayTimeout=setTimeout((function(){if(z.indexOf(Lt)!==-1){z.splice(z.indexOf(Lt),1);try{Ae=new Date,ue=Ae,P.push(Lt.httpRequest),ut.load(Lt.httpRequest)}catch{Lt.httpRequest.onerror()}}}),G.delayLoadingTime-tn)}}return R={load:function(se){se.request?F(se,Oe.getRetryAttemptsForType(se.request.type)):se.error&&se.error(se.request,"error")},abort:function(){W.forEach((function(se){clearTimeout(se.timeout),se.config.request&&se.config.abort&&se.config.abort(se.config.request)})),W=[],z.forEach((function(se){return clearTimeout(se.delayTimeout)})),z=[],P.forEach((function(se){se.request.type!==Ye.w.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(se.onloadend=se.onerror=se.onprogress=void 0,se.loader.abort(se))})),P=[]}},fe=(0,C.Z)(ce).getInstance().getLogger(R),P=[],z=[],W=[],Z=Rn(ce).getInstance(),K=xn(ce).getInstance(),_e=Rr(ce).getInstance(),le=(0,si.Z)(ce).getInstance(),ti(Q={},Ye.w.MPD_TYPE,me.DOWNLOAD_ERROR_ID_MANIFEST_CODE),ti(Q,Ye.w.XLINK_EXPANSION_TYPE,me.DOWNLOAD_ERROR_ID_XLINK_CODE),ti(Q,Ye.w.INIT_SEGMENT_TYPE,me.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),ti(Q,Ye.w.MEDIA_SEGMENT_TYPE,me.DOWNLOAD_ERROR_ID_CONTENT_CODE),ti(Q,Ye.w.INDEX_SEGMENT_TYPE,me.DOWNLOAD_ERROR_ID_CONTENT_CODE),ti(Q,Ye.w.BITSTREAM_SWITCHING_SEGMENT_TYPE,me.DOWNLOAD_ERROR_ID_CONTENT_CODE),ti(Q,Ye.w.OTHER_TYPE,me.DOWNLOAD_ERROR_ID_CONTENT_CODE),q=Q,R}io.__dashjs_factory_name="HTTPLoader";var hi=I.Z.getClassFactory(io);function Kr(){var L;function R(){L={}}function P(){R()}return P(),{getLoader:function(z){for(var W in L)if(L.hasOwnProperty(W)&&z.startsWith(W))return L[W];return hi},registerLoader:function(z,W){L[z]=W},unregisterLoader:function(z){L[z]&&delete L[z]},unregisterAllLoader:R,reset:P}}Kr.__dashjs_factory_name="SchemeLoaderFactory";var Oi=I.Z.getSingletonFactory(Kr);function Ei(L){L=L||{};var R,P,z=this.context;return R=Oi(z).getInstance(),{load:function(W){if(!P){var q=R.getLoader(W&&W.request?W.request.url:null);P=q(z).create({errHandler:L.errHandler,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,dashMetrics:L.dashMetrics,boxParser:L.boxParser?L.boxParser:null,constants:L.constants?L.constants:null,dashConstants:L.dashConstants?L.dashConstants:null,urlUtils:L.urlUtils?L.urlUtils:null,requestTimeout:isNaN(L.requestTimeout)?0:L.requestTimeout,errors:L.errors})}P.load(W)},abort:function(){P&&P.abort()}}}Ei.__dashjs_factory_name="URLLoader";var No=I.Z.getClassFactory(Ei);function vo(L){return vo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},vo(L)}function Ms(L,R){return Ms=Object.setPrototypeOf||function(P,z){return P.__proto__=z,P},Ms(L,R)}function bs(L,R){return!R||vo(R)!=="object"&&typeof R!="function"?(function(P){if(P===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P})(L):R}function Li(L){return Li=Object.setPrototypeOf?Object.getPrototypeOf:function(R){return R.__proto__||Object.getPrototypeOf(R)},Li(L)}var Vo=(function(L){(function(q,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Super expression must either be null or a function");q.prototype=Object.create(Z&&Z.prototype,{constructor:{value:q,writable:!0,configurable:!0}}),Z&&Ms(q,Z)})(W,L);var R,P,z=(R=W,P=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}})(),function(){var q,Z=Li(R);if(P){var K=Li(this).constructor;q=Reflect.construct(Z,arguments,K)}else q=Z.apply(this,arguments);return bs(this,q)});function W(q){var Z;return(function(K,le){if(!(K instanceof le))throw new TypeError("Cannot call a class as a function")})(this,W),(Z=z.call(this,q)).checkForExistenceOnly=!0,Z}return W})(O.Z);function qs(L){L=L||{};var R,P,z=this.context,W=L.eventBus,q=L.events,Z=L.urlUtils,K=L.errors,le=L.streamId;return R={checkForExistence:function(_e){var fe=function(ce){W.trigger(q.CHECK_FOR_EXISTENCE_COMPLETED,{request:_e,exists:ce})};if(_e){var Q=new Vo(_e.url);P.load({request:Q,success:function(){fe(!0)},error:function(){fe(!1)}})}else fe(!1)},load:function(_e){var fe=function(Q,ce){W.trigger(q.LOADING_COMPLETED,{request:_e,response:Q||null,error:ce||null,sender:R})};_e?P.load({request:_e,progress:function(Q){W.trigger(q.LOADING_PROGRESS,{request:_e,stream:Q.stream,streamId:le}),Q.data&&W.trigger(q.LOADING_DATA_PROGRESS,{request:_e,response:Q.data||null,error:null,sender:R})},success:function(Q){fe(Q)},error:function(Q,ce,ae){fe(void 0,new ve.Z(K.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,ae,ce))},abort:function(Q){Q&&W.trigger(q.LOADING_ABANDONED,{mediaType:Q.mediaType,request:Q,sender:R})}}):fe(void 0,new ve.Z(K.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,K.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){P&&P.abort()},reset:function(){P&&(P.abort(),P=null)}},P=No(z).create({errHandler:L.errHandler,errors:K,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,urlUtils:Z,constants:h.Z,boxParser:L.boxParser,dashConstants:L.dashConstants,requestTimeout:L.settings.get().streaming.fragmentRequestTimeout}),R}qs.__dashjs_factory_name="FragmentLoader";var Es=I.Z.getClassFactory(qs);function ls(){return{modifyResponseAsync:function(L){return Promise.resolve(L)}}}ls.__dashjs_factory_name="SegmentResponseModifier";var Ca=I.Z.getSingletonFactory(ls);function tl(L){L=L||{};var R,P,z,W=this.context,q=(0,A.Z)(W).getInstance(),Z=L.errHandler,K=L.mediaPlayerModel,le=L.dashMetrics,_e=(0,C.Z)(W).getInstance(),fe=Ca(W).getInstance(),Q=L.streamInfo;function ce(){return Q.id}function ae(){for(var Oe in z)z[Oe].reset();z={}}function He(Oe){if(Oe.sender){var Be=Oe.request,Ke=Oe.response,me=Be.isInitializationRequest(),Le=Be.mediaInfo.streamInfo;if(Oe.error&&(Be.mediaType===h.Z.AUDIO||Be.mediaType===h.Z.VIDEO||Be.mediaType===h.Z.TEXT&&Be.mediaInfo.isFragmented)&&q.trigger(_.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD,{entry:Oe.request.serviceLocation}),Ke&&Le){var ge=(function(Fe,F,se,te){var re=new dn;return re.streamId=se,re.mediaInfo=F.mediaInfo,re.segmentType=F.type,re.start=F.startTime,re.duration=F.duration,re.end=re.start+re.duration,re.bytes=Fe,re.index=F.index,re.quality=F.quality,re.representationId=F.representationId,re.endFragment=te,re})(Ke,Be,Q.id,Oe.type!==_.Z.FRAGMENT_LOADING_PROGRESS);fe.modifyResponseAsync(ge).then((function(Fe){q.trigger(me?_.Z.INIT_FRAGMENT_LOADED:_.Z.MEDIA_FRAGMENT_LOADED,{chunk:Fe,request:Be},{streamId:Le.id,mediaType:Be.mediaType})})).catch((function(Fe){P.error(Fe),q.trigger(me?_.Z.INIT_FRAGMENT_LOADED:_.Z.MEDIA_FRAGMENT_LOADED,{chunk:ge,request:Be},{streamId:Le.id,mediaType:Be.mediaType})}))}else P.warn("No "+Be.mediaType+" bytes to push or stream is inactive.")}}return R={getStreamId:ce,getModel:function(Oe){var Be=z[Oe];return Be||(Be=X(W).create({streamInfo:Q,type:Oe,dashMetrics:le,fragmentLoader:Es(W).create({dashMetrics:le,mediaPlayerModel:K,errHandler:Z,requestModifier:(0,ot.Z)(W).getInstance(),settings:L.settings,boxParser:L.boxParser,eventBus:q,events:_.Z,errors:oe,dashConstants:L.dashConstants,urlUtils:L.urlUtils,streamId:ce()}),debug:_e,eventBus:q,events:_.Z}),z[Oe]=Be),Be},reset:function(){q.off(v.Z.FRAGMENT_LOADING_COMPLETED,He,this),q.off(v.Z.FRAGMENT_LOADING_PROGRESS,He,this),ae()}},P=_e.getLogger(R),ae(),q.on(v.Z.FRAGMENT_LOADING_COMPLETED,He,R),q.on(v.Z.FRAGMENT_LOADING_PROGRESS,He,R),R}tl.__dashjs_factory_name="FragmentController";var Ra=I.Z.getClassFactory(tl),Ws=function L(){(function(R,P){if(!(R instanceof P))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null},la=function L(){(function(R,P){if(!(R instanceof P))throw new TypeError("Cannot call a class as a function")})(this,L),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN};function ua(L){var R,P,z=this.context,W=L.streamInfo;function q(K){P.setTrackByIndex(K)}function Z(){P&&P.reset()}return R={getStreamId:function(){return W.id},initialize:function(){P.addTracks();var K=P.getTracks();K&&K.length>0&&q(0)},provide:function(K,le){if(typeof le=="function"){var _e,fe,Q=P.getCurrentTrack();if(!Q||Q.segmentDuration<=0||K==null)le(null);else{(fe=P.getThumbnailRequestForTime(K))&&(Q.segmentDuration=fe.duration),_e=K%Q.segmentDuration;var ce=Math.floor(_e*Q.tilesHor*Q.tilesVert/Q.segmentDuration),ae=new Ws;if(ae.width=Math.floor(Q.widthPerTile),ae.height=Math.floor(Q.heightPerTile),ae.x=Math.floor(ce%Q.tilesHor)*Q.widthPerTile,ae.y=Math.floor(ce/Q.tilesHor)*Q.heightPerTile,"readThumbnail"in Q)return Q.readThumbnail(K,(function(Oe){ae.url=Oe,le(ae)}));if(fe)ae.url=fe.url,Q.segmentDuration=NaN;else{var He=Math.floor(K/Q.segmentDuration);ae.url=(function(Oe,Be){var Ke=Be+Oe.startNumber,me=(0,x.vi)(Oe.templateUrl,"Number",Ke);return me=(0,x.vi)(me,"Time",(Ke-1)*Oe.segmentDuration*Oe.timescale),me=(0,x.vi)(me,"Bandwidth",Oe.bandwidth),(0,x.eR)(me)})(Q,He)}le(ae)}}},setTrackByIndex:q,getCurrentTrackIndex:function(){return P.getCurrentTrackIndex()},getBitrateList:function(){var K=P.getTracks(),le=0;return K.map((function(_e){var fe=new la;return fe.mediaType=h.Z.IMAGE,fe.qualityIndex=le++,fe.bitrate=_e.bitrate,fe.width=_e.width,fe.height=_e.height,fe}))},reset:Z},Z(),P=(0,Tt.Z)(z).create({streamInfo:W,adapter:L.adapter,baseURLController:L.baseURLController,timelineConverter:L.timelineConverter,debug:L.debug,eventBus:L.eventBus,events:L.events,dashConstants:L.dashConstants,dashMetrics:L.dashMetrics,segmentBaseController:L.segmentBaseController}),R}ua.__dashjs_factory_name="ThumbnailController";var af=I.Z.getClassFactory(ua),wl=f(7417);function Tl(L){var R;L=L||{};var P=[],z=(0,A.Z)(this.context).getInstance(),W=L.updateEventName,q=L.addBlacklistEventName;function Z(K){P.indexOf(K)===-1&&(P.push(K),z.trigger(W,{entry:K}))}return R={add:Z,contains:function(K){return!!(P.length&&K&&K.length)&&P.indexOf(K)!==-1},reset:function(){P=[]}},q&&z.on(q,(function(K){Z(K.entry)}),R),R}Tl.__dashjs_factory_name="BlackListController";var us=I.Z.getClassFactory(Tl),lf=[h.Z.VIDEO,h.Z.AUDIO,h.Z.TEXT,h.Z.MUXED,h.Z.IMAGE];function wr(L){L=L||{};var R,P,z,W,q,Z,K,le,_e,fe,Q,ce,ae,He,Oe,Be,Ke,me,Le=this.context,ge=(0,A.Z)(Le).getInstance(),Fe=(0,wt.Z)(Le).getInstance(),F=L.manifestModel,se=L.mediaPlayerModel,te=L.dashMetrics,re=L.manifestUpdater,G=L.adapter,Ie=L.timelineConverter,we=L.capabilities,ke=L.errHandler,Ae=L.abrController,ue=L.playbackController,Se=L.eventController,qe=L.mediaController,gt=L.protectionController,ut=L.textController,mt=L.videoModel,dt=L.streamInfo,zt=L.settings;function Ut(Yt,Tn){return new Promise((function(Dn,Fn){ln(),fe=!0,Vn();var Zn=mt.getElement(),Rt=[];lf.forEach((function(ft){(ft!==h.Z.TEXT||Yt)&&(ft!==h.Z.VIDEO||!Zn||Zn&&/^VIDEO$/i.test(Zn.nodeName))&&Rt.push(Ft(ft,Yt))})),Promise.all(Rt).then((function(){return ft=Tn,new Promise((function(Kt){var We={},tt=z.map((function(Mt){return Mt.createBufferSinks(ft)}));Promise.all(tt).then((function(Mt){Mt.forEach((function(mn){mn&&(We[mn.getType()]=mn)})),Kt(We)})).catch((function(){Kt(We)}))}));var ft})).then((function(ft){if(fe=!1,z.length===0){var Kt="No streams to play.";ke.error(new ve.Z(oe.MANIFEST_ERROR_ID_NOSTREAMS_CODE,Kt,F.getValue())),P.fatal(Kt)}else Mn();Yt&&ut.createTracks(dt),Dn(ft)})).catch((function(ft){Fn(ft)}))}))}function Ft(Yt,Tn){var Dn,Fn=G.getAllMediaInfoForType(dt,Yt),Zn=[],Rt=null;if(!Fn||Fn.length===0)return P.info("No "+Yt+" data."),Promise.resolve();Yt===h.Z.VIDEO&&(K=!0),Yt===h.Z.AUDIO&&(le=!0);for(var ft=0,Kt=Fn.length;ft<Kt;ft++)Rt=Fn[ft],Yt===h.Z.TEXT&&Rt.isEmbedded&&(ut.addEmbeddedTrack(dt,Rt),Zn.push(Rt)),Bt(Rt)&&qe.addTrack(Rt);if(Zn.length>0&&(qe.setInitialMediaSettingsForType(Yt,dt),ut.addMediaInfosToBuffer(dt,Yt,Zn)),Fn=Fn.filter((function(tt){return!tt.isEmbedded})),Fn.length===0)return Promise.resolve();if(Yt===h.Z.IMAGE)return(ce=af(Le).create({streamInfo:dt,adapter:G,baseURLController:L.baseURLController,timelineConverter:L.timelineConverter,debug:Be,eventBus:ge,events:_.Z,dashConstants:p.Z,dashMetrics:L.dashMetrics,segmentBaseController:L.segmentBaseController})).initialize(),Promise.resolve();ge.trigger(_.Z.STREAM_INITIALIZING,{streamInfo:dt,mediaInfo:Rt}),qe.setInitialMediaSettingsForType(Yt,dt);var We=(function(tt,Mt){var mn=tt&&tt.length>0?tt[0]:null,Cn=Q.getModel(mn?mn.type:null),cr=mn?mn.type:null,Si=mn?mn.mimeType:null,to=mn?mn.isFragmented:null,Di=hn(Le).create({streamInfo:dt,type:cr,mimeType:Si,timelineConverter:Ie,adapter:G,manifestModel:F,mediaPlayerModel:se,fragmentModel:Cn,dashMetrics:L.dashMetrics,baseURLController:L.baseURLController,segmentBaseController:L.segmentBaseController,abrController:Ae,playbackController:ue,mediaController:qe,textController:ut,errHandler:ke,settings:zt,boxParser:Oe,segmentBlacklistController:ae});Di.initialize(Mt,K,to),z.push(Di);for(var zo=0;zo<tt.length;zo++)Di.addMediaInfo(tt[zo]);return cr===h.Z.TEXT&&ut.addMediaInfosToBuffer(dt,cr,tt,Cn),Di})(Fn,Tn);return(Dn=qe.getCurrentTrackFor(Yt,dt.id))?(Ae.updateTopQualityIndex(Dn),We.selectMediaInfo(Yt===h.Z.TEXT&&Dn.isEmbedded?Fn[0]:Dn)):Promise.resolve()}function Bt(Yt){var Tn,Dn=Yt?Yt.type:null;return Dn===h.Z.MUXED?(Tn="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",P.fatal(Tn),ke.error(new ve.Z(oe.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,Tn,F.getValue())),!1):!(Dn!==h.Z.TEXT&&Dn!==h.Z.IMAGE&&Yt.contentProtection&&!we.supportsEncryptedMedia()&&(ke.error(new ve.Z(oe.CAPABILITY_MEDIAKEYS_ERROR_CODE,oe.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),1))}function Nn(Yt){for(var Tn=z?z.length:0,Dn=0;Dn<Tn;Dn++){var Fn=z[Dn].getFragmentModel();Fn.abortRequests(),Fn.resetInitialSettings(),z[Dn].reset(!1,Yt)}ut&&ut.deactivateStream(dt),z=[],q=!1,Z=!1,Yn(!1),bt(!1),ge.trigger(_.Z.STREAM_DEACTIVATED,{streamInfo:dt})}function lt(Yt){Nn(Yt),W=!1,K=!1,le=!1,_e={},fe=!1,Ke=!1,me=[]}function bt(Yt){Ke=Yt}function tn(){return dt?dt.start:NaN}function Lt(){return dt?dt.id:null}function an(){return dt}function ln(){if(!mt||!Ae)throw new Error(h.Z.MISSING_CONFIG_ERROR)}function Xt(Yt){Yt.error&&(ke.error(Yt.error),P.fatal(Yt.error.message))}function Vn(){if(Se){var Yt=G.getEventsFor(dt);Yt&&Yt.length>0&&Se.addInlineEvents(Yt,dt.id)}}function Mn(){for(var Yt=z.length,Tn=_e.audio||_e.video?new ve.Z(oe.DATA_UPDATE_FAILED_ERROR_CODE,oe.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,Dn=0;Dn<Yt;Dn++)if(z[Dn].isUpdating()||fe)return;if(gt){gt.clearMediaInfoArray();for(var Fn=0;Fn<Yt&&z[Fn];Fn++){var Zn=z[Fn].getType(),Rt=z[Fn].getMediaInfo();if(Zn===h.Z.AUDIO||Zn===h.Z.VIDEO||Zn===h.Z.TEXT&&Rt.isFragmented){var ft=z[Fn].getMediaInfo();ft&&gt.initializeForMedia(ft)}}gt.handleKeySystemFromManifest()}Tn?ke.error(Tn):W||(W=!0,mt.waitForReadyState(h.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,(function(){ge.trigger(_.Z.STREAM_INITIALIZED,{streamInfo:dt})})))}function gr(){var Yt=yn(),Tn=Yt.length;if(Tn!==0){for(var Dn=0;Dn<Tn;Dn++)if(!Yt[Dn].isBufferingCompleted()&&(Yt[Dn].getType()===h.Z.AUDIO||Yt[Dn].getType()===h.Z.VIDEO))return void P.debug("onBufferingCompleted - One streamProcessor has finished but",Yt[Dn].getType(),"one is not buffering completed");P.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),Z=!0,ge.trigger(_.Z.STREAM_BUFFERING_COMPLETED,{streamInfo:dt},{streamInfo:dt})}else P.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function vr(Yt){_e[Yt.mediaType]=Yt.error,Mn()}function Ct(Yt){Se&&Se.addInbandEvents(Yt.events,dt.id)}function rn(Yt){return Yt&&Yt.type?Ht(Yt.type):null}function Ht(Yt){return Yt?yn().filter((function(Tn){return Tn.getType()===Yt}))[0]:null}function yn(){for(var Yt,Tn,Dn=[],Fn=0;Fn<z.length;Fn++)(Yt=(Tn=z[Fn]).getType())!==h.Z.AUDIO&&Yt!==h.Z.VIDEO&&Yt!==h.Z.TEXT||Dn.push(Tn);return Dn}function In(Yt,Tn){var Dn=an(),Fn=Tn.getStreamInfo();if(!Fn||!Dn)return!0;var Zn=G.getAdaptationForType(Fn.index,Yt,Fn),Rt=G.getAdaptationForType(Dn.index,Yt,Dn);return Zn&&Rt?!(!Wn(Rt)&&Wn(Zn)):!Zn&&!Rt}function Wn(Yt){return!!Yt&&!!(Yt.ContentProtection||Yt.Representation_asArray&&Yt.Representation_asArray.length>0&&Yt.Representation_asArray[0].ContentProtection)}function Hn(Yt,Tn){var Dn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!Yt||!Yt.hasOwnProperty("getStreamInfo"))return!1;var Fn=Yt.getStreamInfo(),Zn=Dn?Dn.getStreamInfo():an();if(!Fn||!Zn)return!1;var Rt=G.getAdaptationForType(Fn.index,Tn,Fn),ft=G.getAdaptationForType(Zn.index,Tn,Zn);if(!Rt||!ft)return!Rt&&!ft;var Kt=Rt&&ft&&Rt.mimeType===ft.mimeType,We=ft.Representation_asArray.map((function(Cn){return Cn.codecs})),tt=Rt.Representation_asArray.map((function(Cn){return Cn.codecs})),Mt=tt.some((function(Cn){return We.indexOf(Cn)>-1})),mn=tt.some((function(Cn){return We.some((function(cr){return we.codecRootCompatibleWithCodec(cr,Cn)}))}));return Mt||mn&&Kt}function Yn(Yt){He=Yt}function rr(){return He}return R={initialize:function(){ge.on(_.Z.BUFFERING_COMPLETED,gr,R),ge.on(_.Z.DATA_UPDATE_COMPLETED,vr,R),ge.on(_.Z.INBAND_EVENTS,Ct,R),gt&&(ge.on(_.Z.KEY_ERROR,Xt,R),ge.on(_.Z.SERVER_CERTIFICATE_UPDATED,Xt,R),ge.on(_.Z.LICENSE_REQUEST_COMPLETE,Xt,R),ge.on(_.Z.KEY_SYSTEM_SELECTED,Xt,R),ge.on(_.Z.KEY_SESSION_CREATED,Xt,R),ge.on(_.Z.KEY_STATUSES_CHANGED,Xt,R)),ut.initializeForStream(dt),ge.trigger(_.Z.STREAM_UPDATED,{streamInfo:dt})},getStreamId:function(){return dt?dt.id:null},activate:function(Yt,Tn){return new Promise((function(Dn,Fn){if(!q)return rr()?(q=!0,ge.trigger(_.Z.STREAM_ACTIVATED,{streamInfo:dt}),void Dn(Tn)):void(function(Zn,Rt){return Ut(Zn,Rt)})(Yt,Tn).then((function(Zn){q=!0,ge.trigger(_.Z.STREAM_ACTIVATED,{streamInfo:dt}),Dn(Zn)})).catch((function(Zn){Fn(Zn)}));Dn(Tn)}))},deactivate:Nn,getIsActive:function(){return q},getDuration:function(){return dt?dt.duration:NaN},getStartTime:tn,getId:Lt,getStreamInfo:an,getHasAudioTrack:function(){return le},getHasVideoTrack:function(){return K},startPreloading:function(Yt,Tn){return new Promise((function(Dn,Fn){rr()?Fn():(P.info("[startPreloading] Preloading next stream with id ".concat(Lt())),Yn(!0),Ut(Yt,Tn).then((function(){for(var Zn=0;Zn<z.length&&z[Zn];Zn++)z[Zn].setExplicitBufferingTime(tn()),z[Zn].getScheduleController().startScheduleTimer();Dn()})).catch((function(){Yn(!1),Fn()})))}))},initializeForTextWithMediaSource:function(Yt){return new Promise((function(Tn,Dn){Ft(h.Z.TEXT,Yt).then((function(){return(Fn=Ht(h.Z.TEXT))?Fn.createBufferSinks():Promise.resolve();var Fn})).then((function(){ut.createTracks(dt),Tn()})).catch((function(Fn){Dn(Fn)}))}))},getThumbnailController:function(){return ce},getBitrateListFor:function(Yt){if(ln(),Yt===h.Z.IMAGE)return ce?ce.getBitrateList():[];var Tn=(function(Dn){for(var Fn=null,Zn=0;Zn<z.length;Zn++)if((Fn=z[Zn]).getType()===Dn)return Fn.getMediaInfo();return null})(Yt);return Ae.getBitrateList(Tn)},updateData:function(Yt){return new Promise((function(Tn){fe=!0,dt=Yt,Se&&Vn();for(var Dn=[],Fn=0,Zn=z.length;Fn<Zn;Fn++){var Rt=z[Fn],ft=Rt.getMediaInfo();Dn.push(Rt.updateStreamInfo(dt));var Kt=G.getAllMediaInfoForType(dt,Rt.getType());if(Kt=Kt.filter((function(Mt){return!Mt.isEmbedded}))){Rt.clearMediaInfoArray();for(var We=0;We<Kt.length;We++){var tt=Kt[We];Rt.addMediaInfo(Kt[We]),G.areMediaInfosEqual(ft,tt)&&(Ae.updateTopQualityIndex(tt),Dn.push(Rt.selectMediaInfo(tt)))}}}Promise.all(Dn).then((function(){for(Dn=[];me.length>0;){var Mt=me.pop(),mn=Mt.newMediaInfo,Cn=rn(Mt.oldMediaInfo);if(!Cn)return;Dn.push(Cn.prepareTrackSwitch()),Dn.push(Cn.selectMediaInfo(mn))}return Promise.all(Dn)})).then((function(){fe=!1,Mn(),ge.trigger(_.Z.STREAM_UPDATED,{streamInfo:dt}),Tn()}))}))},reset:function(Yt){Q&&(Q.reset(),Q=null),Ae&&dt&&Ae.clearDataForStream(dt.id),ae&&(ae.reset(),ae=null),lt(Yt),dt=null,ge.off(_.Z.DATA_UPDATE_COMPLETED,vr,R),ge.off(_.Z.BUFFERING_COMPLETED,gr,R),ge.off(_.Z.INBAND_EVENTS,Ct,R),gt&&(ge.off(_.Z.KEY_ERROR,Xt,R),ge.off(_.Z.SERVER_CERTIFICATE_UPDATED,Xt,R),ge.off(_.Z.LICENSE_REQUEST_COMPLETE,Xt,R),ge.off(_.Z.KEY_SYSTEM_SELECTED,Xt,R),ge.off(_.Z.KEY_SESSION_CREATED,Xt,R),ge.off(_.Z.KEY_STATUSES_CHANGED,Xt,R))},getProcessors:yn,setMediaSource:function(Yt){return new Promise((function(Tn,Dn){for(var Fn=[],Zn=0;Zn<z.length;)Bt(z[Zn].getMediaInfo())?(Fn.push(z[Zn].setMediaSource(Yt)),Zn++):(z[Zn].reset(),z.splice(Zn,1));Promise.all(Fn).then((function(){for(var Rt=0;Rt<z.length;Rt++)z[Rt].dischargePreBuffer();if(z.length===0){var ft="No streams to play.";ke.error(new ve.Z(oe.MANIFEST_ERROR_ID_NOSTREAMS_CODE,ft+"nostreams",F.getValue())),P.fatal(ft)}Tn()})).catch((function(Rt){P.error(Rt),Dn(Rt)}))}))},isMediaCodecCompatible:function(Yt){var Tn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return Hn(Yt,h.Z.VIDEO,Tn)&&Hn(Yt,h.Z.AUDIO,Tn)},isProtectionCompatible:function(Yt){return!Yt||In(h.Z.VIDEO,Yt)&&In(h.Z.AUDIO,Yt)},getPreloaded:rr,getIsEndedEventSignaled:function(){return Ke},setIsEndedEventSignaled:bt,getAdapter:function(){return G},getHasFinishedBuffering:function(){return Z},setPreloaded:Yn,startScheduleControllers:function(){for(var Yt=z.length,Tn=0;Tn<Yt&&z[Tn];Tn++)z[Tn].getScheduleController().startScheduleTimer()},prepareTrackChange:function(Yt){if(q&&dt){Z=!1;var Tn=Yt.newMediaInfo,Dn=F.getValue();G.setCurrentMediaInfo(dt.id,Tn.type,Tn);var Fn=rn(Tn);if(Fn){var Zn=ue.getTime();P.info("Stream -  Process track changed at current time "+Zn),Dn.refreshManifestOnSwitchTrack?(me.push(Yt),re.getIsUpdating()||(P.debug("Stream -  Refreshing manifest for switch track"),re.refreshManifest())):Fn.selectMediaInfo(Tn).then((function(){Tn.type!==h.Z.VIDEO&&Tn.type!==h.Z.AUDIO||Ae.updateTopQualityIndex(Tn),Fn.prepareTrackSwitch()}))}}},prepareQualityChange:function(Yt){var Tn=Ht(Yt.mediaType);Tn&&Tn.prepareQualityChange(Yt)}},(function(){try{Be=(0,C.Z)(Le).getInstance(),P=Be.getLogger(R),lt(),Oe=(0,wl.Z)(Le).getInstance(),ae=us(Le).create({updateEventName:_.Z.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:_.Z.SEGMENT_LOCATION_BLACKLIST_ADD}),Q=Ra(Le).create({streamInfo:dt,mediaPlayerModel:se,dashMetrics:te,errHandler:ke,settings:zt,boxParser:Oe,dashConstants:p.Z,urlUtils:Fe})}catch(Yt){throw Yt}})(),R}wr.__dashjs_factory_name="Stream";var ai=I.Z.getClassFactory(wr),Ks=function L(R){(function(P,z){if(!(P instanceof z))throw new TypeError("Cannot call a class as a function")})(this,L),this.url=R||null,this.type=Ye.w.CONTENT_STEERING_TYPE,this.responseType="json"},xa=function L(){(function(R,P){if(!(R instanceof P))throw new TypeError("Cannot call a class as a function")})(this,L),this.version=null,this.ttl=300,this.reloadUri=null,this.pathwayPriority=[],this.pathwayClones=[]};function Tr(){var L,R,P,z,W,q,Z,K,le,_e,fe,Q,ce,ae,He,Oe=this.context,Be=(0,wt.Z)(Oe).getInstance();function Ke(Ae){F(Ae,"baseUrl")}function me(Ae){F(Ae,"location")}function Le(Ae){if(Ae&&Ae.request&&Ae.request.serviceLocation&&Ae.request.requestStartDate&&Ae.request.requestEndDate&&!isNaN(Ae.request.bytesTotal)){var ue=Ae.request.serviceLocation,Se=Ae.request.requestEndDate.getTime()-Ae.request.requestStartDate.getTime();Fe(ue,parseInt(8*Ae.request.bytesTotal/Se*1e3))}}function ge(Ae){Ae&&Ae.httpRequest&&Ae.httpRequest._serviceLocation&&!isNaN(Ae.throughput)&&Fe(Ae.httpRequest._serviceLocation,1e3*Ae.throughput)}function Fe(Ae,ue){W[Ae]||(W[Ae]=[]),W[Ae].push(ue),W[Ae].length>4&&W[Ae].shift()}function F(Ae,ue){if(Ae&&Ae.request&&Ae.request.serviceLocation){var Se=Ae.request.serviceLocation;z[ue].all.indexOf(Se)===-1&&z[ue].all.push(Se),z[ue].current=Se}}function se(){var Ae=fe.getValue(),ue=He.getContentSteering(Ae);return ue||(ue=ce.getServiceDescriptionSettings().contentSteering),ue}function te(){return new Promise((function(Ae){try{var ue=se();if(!ue||!ue.serverUrl)return void Ae();var Se=(function(gt){var ut=gt.serverUrl;P&&P.reloadUri&&(ut=Be.isRelative(P.reloadUri)?Be.resolve(P.reloadUri,gt.serverUrl):P.reloadUri);var mt=[],dt=z.baseUrl.all.concat(z.location.all);if(dt.length>0){var zt=dt.map((function(Bt){var Nn=(function(lt){if(!lt||!W[lt]||W[lt].length===0)return-1;var bt=W[lt].reduce((function(tn,Lt){return tn+Lt}))/W[lt].length;return parseInt(bt)})(Bt);return{serviceLocation:Bt,throughput:Nn}}));zt.sort((function(Bt,Nn){return Nn.throughput-Bt.throughput}));var Ut="",Ft="";zt.forEach((function(Bt,Nn){Nn!==0&&(Ut="".concat(Ut,","),Bt.throughput>-1&&(Ft="".concat(Ft,","))),Ut="".concat(Ut).concat(Bt.serviceLocation),Bt.throughput>-1&&(Ft="".concat(Ft).concat(Bt.throughput))})),mt.push({key:"_DASH_pathway",value:'"'.concat(Ut,'"')}),mt.push({key:"_DASH_throughput",value:Ft})}return ut=ze.Z.addAditionalQueryParameterToUrl(ut,mt)})(ue),qe=new Ks(Se);Z.load({request:qe,success:function(gt){(function(ut){ut&&ut[p.Z.CONTENT_STEERING_RESPONSE.VERSION]&&parseInt(ut[p.Z.CONTENT_STEERING_RESPONSE.VERSION])===1&&((P=new xa).version=ut[p.Z.CONTENT_STEERING_RESPONSE.VERSION],ut[p.Z.CONTENT_STEERING_RESPONSE.TTL]&&!isNaN(ut[p.Z.CONTENT_STEERING_RESPONSE.TTL])&&(P.ttl=ut[p.Z.CONTENT_STEERING_RESPONSE.TTL]),ut[p.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]&&(P.reloadUri=ut[p.Z.CONTENT_STEERING_RESPONSE.RELOAD_URI]),ut[p.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]&&(P.pathwayPriority=ut[p.Z.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]),ut[p.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES]&&(P.pathwayClones=ut[p.Z.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES],P.pathwayClones=P.pathwayClones.filter((function(mt){return(function(dt){return dt[p.Z.CONTENT_STEERING_RESPONSE.BASE_ID]&&dt[p.Z.CONTENT_STEERING_RESPONSE.ID]&&dt[p.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT]&&dt[p.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][p.Z.CONTENT_STEERING_RESPONSE.HOST]})(mt)}))),Ie())})(gt),ae.trigger(v.Z.CONTENT_STEERING_REQUEST_COMPLETED,{currentSteeringResponseData:P,url:Se}),Ae()},error:function(gt,ut,mt,dt){(function(zt,Ut){try{switch(R.warn("Error fetching data from content steering server",zt),Ut.status){case 410:break;case 429:var Ft=Ut&&Ut.getResponseHeader?Ut.getResponseHeader("retry-after"):null;Ft!==null&&(P||(P={}),P.ttl=parseInt(Ft)),Ie();break;default:Ie()}}catch(Bt){R.error(Bt)}})(gt,dt),Ae(gt)},complete:function(){z.baseUrl.all=re(z.baseUrl),z.location.all=re(z.location)}})}catch(gt){Ae(gt)}}))}function re(Ae){return Ae.all&&Ae.all.length!==0&&Ae.current?Ae.all.filter((function(ue){return ue===Ae.current})):[]}function G(Ae){try{var ue=[];return Ae&&Ae.length!==0&&P&&P.pathwayClones&&P.pathwayClones.length!==0&&P.pathwayClones.forEach((function(Se){var qe=Ae.filter((function(zt){return Se[p.Z.CONTENT_STEERING_RESPONSE.BASE_ID]===zt.serviceLocation})),gt=null;if(qe&&qe.length>0&&(gt=qe[0]),gt){var ut=new URL(gt.url),mt=Se[p.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][p.Z.CONTENT_STEERING_RESPONSE.HOST];mt=ze.Z.stringHasProtocol(mt)?mt:"".concat(ut.protocol,"//").concat(mt);var dt={synthesizedUrl:"".concat(mt).concat(ut.pathname),serviceLocation:Se[p.Z.CONTENT_STEERING_RESPONSE.ID],queryParams:Se[p.Z.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][p.Z.CONTENT_STEERING_RESPONSE.PARAMS],reference:gt};ue.push(dt)}})),ue}catch(Se){return R.error(Se),[]}}function Ie(){P&&P.ttl&&!isNaN(P.ttl)&&(q&&clearTimeout(q),q=setTimeout((function(){te()}),1e3*P.ttl))}function we(){q&&clearTimeout(q),q=null}function ke(){P=null,W={},z={baseUrl:{current:null,all:[]},location:{current:null,all:[]}},we()}return L={reset:function(){ke(),ae.off(v.Z.FRAGMENT_LOADING_STARTED,Ke,L),ae.off(v.Z.MANIFEST_LOADING_STARTED,me,L),ae.off(v.Z.MANIFEST_LOADING_FINISHED,Le,L),ae.off(v.Z.THROUGHPUT_MEASUREMENT_STORED,ge,L)},setConfig:function(Ae){Ae&&(Ae.adapter&&(He=Ae.adapter),Ae.errHandler&&(K=Ae.errHandler),Ae.dashMetrics&&(le=Ae.dashMetrics),Ae.mediaPlayerModel&&(_e=Ae.mediaPlayerModel),Ae.requestModifier&&(Q=Ae.requestModifier),Ae.manifestModel&&(fe=Ae.manifestModel),Ae.serviceDescriptionController&&(ce=Ae.serviceDescriptionController),Ae.eventBus&&(ae=Ae.eventBus))},loadSteeringData:te,getCurrentSteeringResponseData:function(){return P},shouldQueryBeforeStart:function(){var Ae=se();return!!Ae&&Ae.queryBeforeStart},getSteeringDataFromManifest:se,stopSteeringRequestTimer:we,getSynthesizedBaseUrlElements:function(Ae){try{return G(Ae).map((function(ue){var Se=new di(ue.synthesizedUrl,ue.serviceLocation);return Se.queryParams=ue.queryParams,Se.dvbPriority=ue.reference.dvbPriority,Se.dvbWeight=ue.reference.dvbWeight,Se.availabilityTimeOffset=ue.reference.availabilityTimeOffset,Se.availabilityTimeComplete=ue.reference.availabilityTimeComplete,Se}))}catch(ue){return R.error(ue),[]}},getSynthesizedLocationElements:function(Ae){try{return G(Ae).map((function(ue){var Se=new Qt(ue.synthesizedUrl,ue.serviceLocation);return Se.queryParams=ue.queryParams,Se}))}catch(ue){return R.error(ue),[]}},initialize:function(){Z=No(Oe).create({errHandler:K,dashMetrics:le,mediaPlayerModel:_e,requestModifier:Q,errors:oe}),ae.on(v.Z.FRAGMENT_LOADING_STARTED,Ke,L),ae.on(v.Z.MANIFEST_LOADING_STARTED,me,L),ae.on(v.Z.MANIFEST_LOADING_FINISHED,Le,L),ae.on(v.Z.THROUGHPUT_MEASUREMENT_STORED,ge,L)}},R=(0,C.Z)(Oe).getInstance().getLogger(L),ke(),L}Tr.__dashjs_factory_name="ContentSteeringController";var Ot=I.Z.getSingletonFactory(Tr);function qn(){var L,R,P,z=this.context,W=(0,Ce.Z)(z).getInstance();return L={select:function(q){if(!q||q.length===0)return null;var Z=null;return W.get().streaming.applyContentSteering&&(Z=(function(K){var le=P.getCurrentSteeringResponseData();return le&&le.pathwayPriority&&le.pathwayPriority.length>0?(function(){for(var _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Q=0,ce=null,ae=function(){var He=_e[Q],Oe=fe.findIndex((function(Be){return Be.serviceLocation&&Be.serviceLocation===He}));if(Oe!==-1&&!R.contains(fe[Oe].serviceLocation))return ce=fe[Oe],"break";Q+=1};Q<_e.length&&ae()!=="break";);return ce})(le.pathwayPriority,K):null})(q)),Z||(Z=(function(K){return K[0]})(q)),Z},setConfig:function(q){q.blacklistController&&(R=q.blacklistController),q.contentSteeringController&&(P=q.contentSteeringController)},reset:function(){R.reset()}},R=us(z).create({updateEventName:_.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:_.Z.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD}),P=Ot(z).getInstance(),L}qn.__dashjs_factory_name="LocationSelector";var ir=I.Z.getClassFactory(qn);function Fi(){var L,R,P,z,W,q,Z,K,le,_e,fe,Q,ce,ae,He=this.context,Oe=(0,A.Z)(He).getInstance(),Be=(0,wt.Z)(He).getInstance();function Ke(){P=NaN,Z=!1,W=!0,q=!1,me()}function me(){z!==null&&(clearTimeout(z),z=null)}function Le(we){me(),q||(isNaN(we)&&!isNaN(P)&&(we=1e3*P),isNaN(we)||(R.debug("Refresh manifest in "+we+" milliseconds."),z=setTimeout(se,we)))}function ge(){var we=arguments.length>0&&arguments[0]!==void 0&&arguments[0];Z=!0;var ke=le.getValue(),Ae=ke.url,ue=null,Se=fe.getPatchLocation(ke),qe=_e.select(Se),gt=null;if(qe&&!we)Ae=qe.url,ue=qe.serviceLocation,gt=qe.queryParams;else{var ut=Fe(ke),mt=_e.select(ut);mt&&(Ae=mt.url,ue=mt.serviceLocation,gt=mt.queryParams)}Be.isRelative(Ae)&&(Ae=Be.resolve(Ae,ke.url)),K.load(Ae,ue,gt)}function Fe(we){var ke=fe.getLocation(we),Ae=ce.getSynthesizedLocationElements(ke);return ke.concat(Ae)}function F(we){if(we){if(fe.getIsPatch(we)){var ke=we;we=le.getValue();var Ae=fe.isPatchValid(we,ke),ue=Ae;if(Ae){var Se=fe.getPublishTime(we);ue=fe.applyPatchToManifest(we,ke);var qe=fe.getPublishTime(we);ue=Se.getTime()!=qe.getTime()}if(!ue)return R.debug("Patch provided is invalid, performing full manifest refresh"),void ge(!0);we.loadedTime=new Date}}else(we=le.getValue()).loadedTime=new Date;if(le.getValue()&&le.getValue().type===p.Z.DYNAMIC&&we.type===p.Z.STATIC)return Oe.trigger(_.Z.DYNAMIC_TO_STATIC),Z=!1,void(q=!0);le.setValue(we);var gt=new Date,ut=(gt.getTime()-we.loadedTime.getTime())/1e3;1e3*(P=fe.getManifestUpdatePeriod(we,ut))>2147483647&&(P=2147483647e-3),Oe.trigger(_.Z.MANIFEST_UPDATED,{manifest:we}),R.info("Manifest has been refreshed at "+gt+"["+gt.getTime()/1e3+"] "),W||Le()}function se(){W||(Z?Le(ae.get().streaming.manifestUpdateRetryInterval):ge())}function te(we){we.error?we.error.code===oe.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&Q.error(we.error):F(we.manifest)}function re(){W=!1,Le()}function G(){(W=!ae.get().streaming.scheduling.scheduleWhilePaused)&&me()}function Ie(){Z=!1}return L={initialize:function(){Ke(),Oe.on(_.Z.STREAMS_COMPOSED,Ie,this),Oe.on(v.Z.PLAYBACK_STARTED,re,this),Oe.on(v.Z.PLAYBACK_PAUSED,G,this),Oe.on(_.Z.INTERNAL_MANIFEST_LOADED,te,this)},setManifest:function(we){F(we)},refreshManifest:ge,getIsUpdating:function(){return Z},setConfig:function(we){we&&(we.manifestModel&&(le=we.manifestModel),we.adapter&&(fe=we.adapter),we.manifestLoader&&(K=we.manifestLoader),we.errHandler&&(Q=we.errHandler),we.locationSelector&&(_e=we.locationSelector),we.settings&&(ae=we.settings),we.contentSteeringController&&(ce=we.contentSteeringController))},reset:function(){Oe.off(v.Z.PLAYBACK_STARTED,re,this),Oe.off(v.Z.PLAYBACK_PAUSED,G,this),Oe.off(_.Z.STREAMS_COMPOSED,Ie,this),Oe.off(_.Z.INTERNAL_MANIFEST_LOADED,te,this),Ke()}},R=(0,C.Z)(He).getInstance().getLogger(L),_e=ir(He).create(),L}Fi.__dashjs_factory_name="ManifestUpdater";var $o=I.Z.getClassFactory(Fi);function Ur(){var L,R,P,z,W,q,Z,K,le,_e,fe,Q,ce,ae,He,Oe,Be=this.context,Ke=(0,A.Z)(Be).getInstance(),me=(0,wt.Z)(Be).getInstance();function Le(){K=[],le=[],_e=null,fe=null,ce=null,Q=NaN,P=!1,z=!1,ae=W.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function ge(){W.get().streaming.utcSynchronization.enabled&&!P&&!z&&ce&&ce.value&&ce.schemeIdUri&&!isNaN(Q)&&!isNaN(W.get().streaming.utcSynchronization.backgroundAttempts)&&(fe&&(Date.now()-fe)/1e3<30||(K=[],z=!0,Fe(isNaN(W.get().streaming.utcSynchronization.backgroundAttempts)?2:W.get().streaming.utcSynchronization.backgroundAttempts)))}function Fe(mt){try{if(mt<=0)return void gt();var dt=Date.now();q[ce.schemeIdUri](ce.value,(function(zt){var Ut=Date.now(),Ft=se(dt,Ut,zt);K.push(Ft),Fe(mt-1)}),(function(){gt()}))}catch{gt()}}function F(){var mt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,dt=mt||0;if(!le||le.length===0||dt>=le.length)te();else{var zt=le[dt];if(zt)if(q.hasOwnProperty(zt.schemeIdUri)){var Ut=new Date().getTime();q[zt.schemeIdUri](zt.value,(function(Ft){var Bt=new Date().getTime(),Nn=se(Ut,Bt,Ft);ce=zt,te(Nn)}),(function(){F(dt+1)}))}else F(dt+1);else te()}}function se(mt,dt,zt){return zt-(dt-(dt-mt)/2)}function te(){var mt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN,dt=isNaN(mt);dt&&W.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?Se():qe(dt,mt)}function re(mt){var dt=Date.parse(mt);return isNaN(dt)&&(dt=(function(zt){var Ut,Ft,Bt=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(zt);return Ut=Date.UTC(parseInt(Bt[1],10),parseInt(Bt[2],10)-1,parseInt(Bt[3],10),parseInt(Bt[4],10),parseInt(Bt[5],10),Bt[6]&&(parseInt(Bt[6],10)||0),Bt[7]&&1e3*parseFloat(Bt[7])||0),Bt[9]&&Bt[10]&&(Ft=60*parseInt(Bt[9],10)+parseInt(Bt[10],10),Ut+=(Bt[8]==="+"?-1:1)*Ft*60*1e3),new Date(Ut).getTime()})(mt)),dt}function G(mt){return Date.parse(mt)}function Ie(mt){return Date.parse(mt)}function we(mt,dt,zt){zt()}function ke(mt,dt,zt){var Ut=re(mt);isNaN(Ut)?zt():dt(Ut)}function Ae(mt,dt,zt,Ut,Ft){var Bt,Nn,lt=!1,bt=new XMLHttpRequest,tn=Ft?Ye.w.HEAD:Ye.w.GET,Lt=dt.match(/\S+/g);if(dt=Lt.shift(),Bt=function(){lt||(lt=!0,Lt.length?Ae(mt,Lt.join(" "),zt,Ut,Ft):Ut())},Nn=function(){var ln,Xt;bt.status===200&&(ln=Ft?bt.getResponseHeader("Date"):bt.response,Xt=mt(ln),isNaN(Xt)||(zt(Xt),lt=!0))},me.isRelative(dt)){var an=Oe.resolve();an&&(dt=me.resolve(dt,an.url))}bt.open(tn,dt),bt.timeout=5e3,bt.onload=Nn,bt.onloadend=Bt,bt.send()}function ue(mt,dt,zt){Ae(Ie,mt,dt,zt,!0)}function Se(){var mt=Z.getLatestMPDRequestHeaderValueByID("Date"),dt=mt!==null?new Date(mt).getTime():Number.NaN;isNaN(dt)?qe(!0):qe(!1,dt-Date.now())}function qe(mt,dt){if(isNaN(Q)||isNaN(dt)||mt||(function(Ut){try{var Ft,Bt=ut(Ut),Nn=isNaN(ae)?30:ae,lt=isNaN(W.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:W.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,bt=isNaN(W.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:W.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,tn=isNaN(W.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:W.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;Bt?(Ft=Math.min(Nn*lt,bt),R.debug("Increasing timeBetweenSyncAttempts to ".concat(Ft))):(Ft=Math.max(Nn/lt,tn),R.debug("Decreasing timeBetweenSyncAttempts to ".concat(Ft))),ae=Ft}catch{}})(dt),!mt&&!isNaN(dt)){_e=Date.now(),P=!1;var zt=isNaN(Q);Q=dt,zt&&ge(),R.debug("Completed UTC sync. Setting client - server offset to ".concat(dt))}mt&&(ce=null,P=!1,He.error(new ve.Z(oe.TIME_SYNC_FAILED_ERROR_CODE,oe.TIME_SYNC_FAILED_ERROR_MESSAGE))),Ke.trigger(_.Z.UPDATE_TIME_SYNC_OFFSET,{offset:dt}),Ke.trigger(_.Z.TIME_SYNCHRONIZATION_COMPLETED)}function gt(){if(K&&K.length!==0){var mt=K.reduce((function(dt,zt){return dt+zt}),0)/K.length;ut(mt)?R.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(R.debug("Completed background UTC sync. Setting client - server offset to ".concat(mt)),Q=mt,Ke.trigger(_.Z.UPDATE_TIME_SYNC_OFFSET,{offset:Q})),z=!1,fe=Date.now()}}function ut(mt){try{if(isNaN(Q))return!0;var dt=W.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(W.get().streaming.utcSynchronization.maximumAllowedDrift)?W.get().streaming.utcSynchronization.maximumAllowedDrift:100;return mt>=Q-dt&&mt<=Q+dt}catch{return!0}}return L={initialize:function(){Le(),q={"urn:mpeg:dash:utc:http-head:2014":ue,"urn:mpeg:dash:utc:http-xsdate:2014":Ae.bind(null,re),"urn:mpeg:dash:utc:http-iso:2014":Ae.bind(null,G),"urn:mpeg:dash:utc:direct:2014":ke,"urn:mpeg:dash:utc:http-head:2012":ue,"urn:mpeg:dash:utc:http-xsdate:2012":Ae.bind(null,re),"urn:mpeg:dash:utc:http-iso:2012":Ae.bind(null,G),"urn:mpeg:dash:utc:direct:2012":ke,"urn:mpeg:dash:utc:http-ntp:2014":we,"urn:mpeg:dash:utc:ntp:2014":we,"urn:mpeg:dash:utc:sntp:2014":we}},attemptSync:function(mt,dt){le=mt,P||((function(zt){try{if(!zt||!W.get().streaming.utcSynchronization.enabled)return!1;var Ut=isNaN(ae)?30:ae;return!(_e&&Ut&&!isNaN(Ut))||(Date.now()-_e)/1e3>=Ut}catch{return!0}})(dt)?(P=!0,F()):Ke.trigger(_.Z.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function(mt){mt&&(mt.dashMetrics&&(Z=mt.dashMetrics),mt.baseURLController&&(Oe=mt.baseURLController),mt.errHandler&&(He=mt.errHandler),mt.settings&&(W=mt.settings))},reset:function(){Le(),Ke.off(_.Z.ATTEMPT_BACKGROUND_SYNC,ge,L)}},R=(0,C.Z)(Be).getInstance().getLogger(L),Ke.on(_.Z.ATTEMPT_BACKGROUND_SYNC,ge,L),L}Ur.__dashjs_factory_name="TimeSyncController";var So=I.Z.getSingletonFactory(Ur);So.HTTP_TIMEOUT_MS=5e3,I.Z.updateSingletonFactory(Ur.__dashjs_factory_name,So);var Uo=So;function nl(){var L,R,P,z,W,q=this.context,Z=(0,A.Z)(q).getInstance();return L={attachMediaSource:function(K){var le=window.URL.createObjectURL(R);return K.setSource(le),z==="managedMediaSource"&&(K.setDisableRemotePlayback(!0),R.addEventListener("startstreaming",(function(){Z.trigger(v.Z.MANAGED_MEDIA_SOURCE_START_STREAMING)})),R.addEventListener("endstreaming",(function(){Z.trigger(v.Z.MANAGED_MEDIA_SOURCE_END_STREAMING)}))),le},createMediaSource:function(){var K="WebKitMediaSource"in window,le="MediaSource"in window;return"ManagedMediaSource"in window?(R=new ManagedMediaSource,z="managedMediaSource",W.info("Created ManagedMediaSource")):le?(R=new MediaSource,z="mediaSource",W.info("Created MediaSource")):K&&(R=new WebKitMediaSource,W.info("Created WebkitMediaSource")),R},detachMediaSource:function(K){K.setSource(null)},setConfig:function(K){K&&K.settings&&(P=K.settings)},setDuration:function K(le){R&&R.readyState==="open"&&(le===null&&isNaN(le)||R.duration!==le&&(le!==1/0||P.get().streaming.buffer.mediaSourceDurationInfinity||(le=Math.pow(2,32)),(function(_e){for(var fe=_e.sourceBuffers,Q=0;Q<fe.length;Q++)if(fe[Q].updating)return!0;return!1})(R)?setTimeout(K.bind(null,le),50):(W.info("Set MediaSource duration:"+le),R.duration=le)))},setSeekable:function(K,le){R&&typeof R.setLiveSeekableRange=="function"&&typeof R.clearLiveSeekableRange=="function"&&R.readyState==="open"&&K>=0&&K<le&&(R.clearLiveSeekableRange(),R.setLiveSeekableRange(K,le))},signalEndOfStream:function(K){if(K&&K.readyState==="open"){for(var le=K.sourceBuffers,_e=0;_e<le.length;_e++)if(le[_e].updating||le[_e].buffered.length===0)return;W.info("call to mediaSource endOfStream"),K.endOfStream()}}},W=(0,C.Z)(q).getInstance().getLogger(L),L}nl.__dashjs_factory_name="MediaSourceController";var Sl=I.Z.getSingletonFactory(nl);function Ti(){var L,R,P,z,W,q,Z,K,le,_e,fe,Q="urn:mpeg:dash:event:2012",ce="discarded",ae="updated",He="added",Oe=this.context,Be=(0,A.Z)(Oe).getInstance();function Ke(){if(!Z||!K)throw new Error("setConfig function has to be called previously")}function me(){fe=!1,P={},z={},W=null,_e=!1,q=Date.now()/1e3}function Le(){try{if(!_e){_e=!0;var we=K.getTime(),ke=we-q;ke=q>0?Math.max(0,ke):0,ge(z,ke,we),ge(P,ke,we),Fe(z),Fe(P),q=we,_e=!1}}catch(Ae){_e=!1,R.error(Ae)}}function ge(we,ke,Ae){try{re(we,(function(ue){if(ue!==void 0){var Se=isNaN(ue.duration)?0:ue.duration;ue.calculatedPresentationTime<=Ae&&ue.calculatedPresentationTime+ke+Se>=Ae?Ie(ue,v.Z.EVENT_MODE_ON_START):(G(Ae,Se+ke,ue.calculatedPresentationTime)||(function(qe){try{var gt=qe.eventStream.period.start+qe.eventStream.period.duration;return qe.calculatedPresentationTime>gt}catch(ut){return R.error(ut),!1}})(ue))&&(R.debug("Removing event ".concat(ue.id," from period ").concat(ue.eventStream.period.id," as it is expired or invalid")),(function(qe,gt){try{var ut=gt.eventStream.schemeIdUri,mt=gt.eventStream.period.id,dt=gt.eventStream.value,zt=gt.id;qe[mt][ut]=qe[mt][ut].filter((function(Ut){return dt&&Ut.eventStream.value&&Ut.eventStream.value!==dt||Ut.id!==zt})),qe[mt][ut].length===0&&delete qe[mt][ut]}catch(Ut){R.error(Ut)}})(we,ue))}}))}catch(ue){R.error(ue)}}function Fe(we){try{for(var ke in we)we.hasOwnProperty(ke)&&Object.keys(we[ke]).length===0&&delete we[ke]}catch(Ae){R.error(Ae)}}function F(we,ke){var Ae=arguments.length>2&&arguments[2]!==void 0&&arguments[2],ue=we.eventStream.schemeIdUri,Se=we.eventStream.value,qe=we.id,gt=ce;ke[ue]||(ke[ue]=[]);var ut=ke[ue].findIndex((function(dt){return(!Se||dt.eventStream.value&&dt.eventStream.value===Se)&&dt.id===qe}));if(ut===-1)ke[ue].push(we),we.triggeredReceivedEvent=!1,we.triggeredStartEvent=!1,gt=He;else if(Ae){var mt=ke[ue][ut];we.triggeredReceivedEvent=mt.triggeredReceivedEvent,we.triggeredStartEvent=mt.triggeredStartEvent,ke[ue][ut]=we,gt=ae}return gt}function se(we){try{if(we.eventStream.value==1){var ke,Ae=we.calculatedPresentationTime;ke=we.calculatedPresentationTime==4294967295?NaN:we.calculatedPresentationTime+we.duration,Be.trigger(v.Z.MANIFEST_VALIDITY_CHANGED,{id:we.id,validUntil:Ae,newDuration:ke,newManifestValidAfter:NaN},{mode:v.Z.EVENT_MODE_ON_START})}}catch(ue){R.error(ue)}}function te(we){try{var ke=K.getTime();re(we,(function(Ae){var ue=Ae.eventStream&&Ae.eventStream.period&&!isNaN(Ae.eventStream.period.duration)?Ae.eventStream.period.duration:NaN,Se=Ae.eventStream&&Ae.eventStream.period&&!isNaN(Ae.eventStream.period.start)?Ae.eventStream.period.start:NaN;if(!isNaN(ue)&&!isNaN(Se)){var qe=Ae.calculatedPresentationTime;Math.abs(qe-ke)<300&&Ie(Ae,v.Z.EVENT_MODE_ON_START)}}))}catch(Ae){R.error(Ae)}}function re(we,ke){try{if(we)for(var Ae=Object.keys(we),ue=0;ue<Ae.length;ue++)for(var Se=we[Ae[ue]],qe=Object.keys(Se),gt=0;gt<qe.length;gt++)Se[qe[gt]].forEach((function(ut){ut!==void 0&&ke(ut)}))}catch(ut){R.error(ut)}}function G(we,ke,Ae){try{return we-ke>Ae}catch(ue){return R.error(ue),!1}}function Ie(we,ke){try{var Ae=K.getTime(),ue=we.id;if(ke===v.Z.EVENT_MODE_ON_RECEIVE&&!we.triggeredReceivedEvent)return R.debug("Received event ".concat(ue)),we.triggeredReceivedEvent=!0,void Be.trigger(we.eventStream.schemeIdUri,{event:we},{mode:ke});we.triggeredStartEvent||(we.eventStream.schemeIdUri===Q&&we.eventStream.value==1?we.duration===0&&we.presentationTimeDelta===0||(R.debug("Starting manifest refresh event ".concat(ue," at ").concat(Ae)),(function(){try{Ke(),Z.refreshManifest()}catch(Se){R.error(Se)}})()):we.eventStream.schemeIdUri==="urn:mpeg:dash:event:callback:2015"&&we.eventStream.value==1?(R.debug("Starting callback event ".concat(ue," at ").concat(Ae)),(function(Se){try{(0,_n.Z)(Oe).create({}).load({method:"get",url:Se,request:{responseType:"arraybuffer"}})}catch(qe){R.error(qe)}})(we.messageData)):(R.debug("Starting event ".concat(ue," from period ").concat(we.eventStream.period.id," at ").concat(Ae)),Be.trigger(we.eventStream.schemeIdUri,{event:we},{mode:ke})),we.triggeredStartEvent=!0)}catch(Se){R.error(Se)}}return L={addInlineEvents:function(we,ke){try{if(Ke(),P[ke]||(P[ke]={}),we)for(var Ae=0;Ae<we.length;Ae++){var ue=we[Ae];if(!G(K.getTime(),isNaN(ue.duration)?0:ue.duration,ue.calculatedPresentationTime)){var Se=F(ue,P[ke],!0);Se===He?(R.debug("Added inline event with id ".concat(ue.id," from period ").concat(ke)),Ie(ue,v.Z.EVENT_MODE_ON_RECEIVE)):Se===ae&&R.debug("Updated inline event with id ".concat(ue.id," from period ").concat(ke))}}}catch(qe){throw qe}},addInbandEvents:function(we,ke){try{Ke(),z[ke]||(z[ke]={});for(var Ae=0;Ae<we.length;Ae++){var ue=we[Ae];G(K.getTime(),isNaN(ue.duration)?0:ue.duration,ue.calculatedPresentationTime)||(F(ue,z[ke],!1)===He?(ue.eventStream.schemeIdUri===Q&&se(ue),R.debug("Added inband event with id ".concat(ue.id," from period ").concat(ke)),Ie(ue,v.Z.EVENT_MODE_ON_RECEIVE)):R.debug("Inband event with scheme_id_uri ".concat(ue.eventStream.schemeIdUri,", value ").concat(ue.eventStream.value,", period id ").concat(ke," and event id ").concat(ue.id," was ignored because it has been added before.")))}Le()}catch(Se){throw Se}},getInbandEvents:function(){return z},getInlineEvents:function(){return P},start:function(){try{Ke(),R.debug("Start Event Controller");var we=le.get().streaming.eventControllerRefreshDelay;fe||isNaN(we)||(fe=!0,W=setInterval(Le,we))}catch(ke){throw ke}},setConfig:function(we){try{if(!we)return;we.manifestUpdater&&(Z=we.manifestUpdater),we.playbackController&&(K=we.playbackController),we.settings&&(le=we.settings)}catch(ke){throw ke}},reset:function(){(function(){try{W!==null&&fe&&(clearInterval(W),W=null,fe=!1,(function(){try{te(z),te(P)}catch(we){R.error(we)}})())}catch(we){throw we}})(),me()}},R=(0,C.Z)(Oe).getInstance().getLogger(L),me(),L}Ti.__dashjs_factory_name="EventController";var uf=I.Z.getSingletonFactory(Ti),Ao={LEVELS:{WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}};function Hl(L,R){(R==null||R>L.length)&&(R=L.length);for(var P=0,z=new Array(R);P<R;P++)z[P]=L[P];return z}function Kf(){var L,R,P,z,W,q,Z,K,le,_e,fe,Q,ce,ae,He,Oe,Be,Ke,me,Le,ge,Fe,F,se,te,re,G,Ie,we,ke,Ae,ue,Se,qe,gt,ut,mt,dt,zt,Ut,Ft,Bt,Nn,lt,bt,tn,Lt,an,ln=this.context,Xt=(0,A.Z)(ln).getInstance();function Vn(){if(!(q&&q.hasOwnProperty("load")&&ge&&ge.hasOwnProperty("initialize")&&ge.hasOwnProperty("reset")&&ge.hasOwnProperty("getClientTimeOffset")&&Z&&Le&&le&&Se))throw new Error(h.Z.MISSING_CONFIG_ERROR)}function Mn(){if(!W||!W.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}function gr(){(function(){try{var Dt=K.getStreamsInfo();if(!F&&Dt.length===0)throw new Error("There are no periods in the MPD");F&&Dt.length>0&&le.updateManifestUpdateInfo({currentTime:Se.getTime(),buffered:ue.getBufferRange(),presentationStartTime:Dt[0].start,clientTimeOffset:ge.getClientTimeOffset()}),Fe.length>0&&(function($r){$r.length!==0?Fe=Fe.filter((function($n){var Bi=$r.filter((function(Ai){return Ai.id===$n.getId()})).length>0||$n.getId()===F.getId();return Bi||(R.debug("Removing stream ".concat($n.getId())),$n.reset(!0)),Bi})):R.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects.")})(Dt);for(var wn=[],er=0,mr=Dt.length;er<mr;er++){var Zr=Dt[er];wn.push(Ct(Zr)),le.addManifestUpdateStreamInfo(Zr)}Promise.all(wn).then((function(){return new Promise((function($r,$n){F?$r():rn(Dt,$r,$n)}))})).then((function(){Xt.trigger(_.Z.STREAMS_COMPOSED),Cn()})).catch((function($r){throw $r}))}catch($r){Le.error(new ve.Z(oe.MANIFEST_ERROR_ID_NOSTREAMS_CODE,$r.message+" nostreamscomposed",Z.getValue())),ke=!0,Ll()}})()}function vr(){bt=!0}function Ct(Dt){var wn=Nc(Dt.id);return wn?wn.updateData(Dt):(wn=ai(ln).create({manifestModel:Z,mediaPlayerModel:gt,dashMetrics:le,manifestUpdater:W,adapter:K,timelineConverter:ge,capabilities:P,capabilitiesFilter:z,errHandler:Le,baseURLController:ce,segmentBaseController:ae,textController:te,abrController:Oe,playbackController:Se,eventController:Ke,mediaController:Be,protectionController:se,videoModel:ue,streamInfo:Dt,settings:lt}),Fe.push(wn),wn.initialize(),Promise.resolve())}function rn(Dt,wn,er){try{Zn();var mr=le.getCurrentDVRInfo().range;if(mr.end<mr.start){tn&&clearTimeout(tn);var Zr=Math.min(1e3*(-1*(mr.end-mr.start)+2),2147483647);return R.debug("Waiting for ".concat(Zr," ms before playback can start")),Xt.trigger(_.Z.AST_IN_FUTURE,{delay:Zr}),void(tn=setTimeout((function(){rn(Dt,wn,er)}),Zr))}lt.get().streaming.applyProducerReferenceTime&&qe.calculateProducerReferenceTimeOffsets(Dt);var $r=Dt[0].manifestInfo;if(lt.get().streaming.applyServiceDescription&&qe.applyServiceDescription($r),K.getIsDynamic()){var $n=Vu(Dt,$r);Se.computeAndSetLiveDelay($n,$r)}(lt.get().streaming.applyContentSteering&&Q.shouldQueryBeforeStart()?Q.loadSteeringData():Promise.resolve()).then((function(){var Bi=Z.getValue();Bi&&ce.update(Bi),Ht(),wn()})).catch((function(Bi){R.error(Bi),Ht(),wn()}))}catch(Bi){er(Bi)}}function Ht(){var Dt=(function(){var mr;if(K.getIsDynamic()){var Zr=le.getCurrentDVRInfo();mr=(Zr&&Zr.range?Zr.range.end:0)-Se.getOriginalLiveDelay();var $r=Zr?Zr.range:null;if($r){if(isNaN(Lt)&&Lt.toString().indexOf("posix:")===-1){var $n=zo(!0);isNaN($n)||(R.info("Start time from URI parameters: ".concat($n)),mr=Math.min(mr,$n))}else{R.info("Start time provided by the app: ".concat(Lt));var Bi=bo(!0,Lt);isNaN(Bi)||(mr=Math.min(mr,Bi))}var Ai=lt.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;mr=Math.max(mr,$r.start+Ai)}}else if(mr=zu()[0].getStreamInfo().start,isNaN(Lt)){var xs=zo(!1);isNaN(xs)||(R.info("Start time from URI parameters: ".concat(xs)),mr=Math.max(mr,xs))}else{R.info("Start time provided by the app: ".concat(Lt));var lu=bo(!1,Lt);isNaN(lu)||(mr=Math.max(mr,lu))}return mr})(),wn=Fn(Dt),er=wn!==null?wn:Fe[0];Xt.trigger(_.Z.INITIAL_STREAM_SWITCH,{startTime:Dt}),yn(er,null,Dt),Ut||(Ut=setInterval((function(){!Ie&&Se.getTimeToStreamEnd()<=0&&!Se.isSeeking()&&Xt.trigger(_.Z.PLAYBACK_ENDED,{isLast:Oo().isLast})}),200))}function yn(Dt,wn,er){try{if(Ie||!Dt||wn===Dt&&Dt.getIsActive())return;Ie=!0,Xt.trigger(_.Z.PERIOD_SWITCH_STARTED,{fromStreamInfo:wn?wn.getStreamInfo():null,toStreamInfo:Dt.getStreamInfo()});var mr=!1;F=Dt,wn&&(mr=Tn(Dt,wn),wn.deactivate(mr)),er=isNaN(er)?!mr&&wn?Dt.getStreamInfo().start:NaN:er,R.info("Switch to stream ".concat(Dt.getId(),". Seektime is ").concat(er,", current playback time is ").concat(Se.getTime(),". Seamless period switch is set to ").concat(mr)),Bt=Bt.filter((function(Zr){return Zr.getId()!==F.getId()})),Se.initialize(Oo(),!!wn),ue.getElement()?In(er,mr,!1):Wn(er,mr)}catch{Ie=!1}}function In(Dt,wn){var er,mr=arguments.length>2&&arguments[2]!==void 0&&arguments[2];function Zr(){if(Ae&&Ae.readyState==="open"){R.debug("MediaSource is open!"),window.URL.revokeObjectURL(er),Ae.removeEventListener("sourceopen",Zr),Ae.removeEventListener("webkitsourceopen",Zr),Di();var $n=le.getCurrentDVRInfo();_e.setSeekable($n.range.start,$n.range.end),mr?(isNaN(Dt)||Se.seek(Dt,!0,!0),F.setMediaSource(Ae).then((function(){F.initializeForTextWithMediaSource(Ae)}))):Wn(Dt,wn)}}function $r(){Ae.addEventListener("sourceopen",Zr,!1),Ae.addEventListener("webkitsourceopen",Zr,!1),er=_e.attachMediaSource(ue),R.debug("MediaSource attached to element.  Waiting on open...")}Ae?wn?Wn(Dt,wn):(_e.detachMediaSource(ue),$r()):(Ae=_e.createMediaSource(),$r())}function Wn(Dt,wn){F.activate(Ae,wn?Ft:void 0,Dt).then((function(er){if(er){var mr=Object.keys(er);mr.length>0&&er[mr[0]].getBuffer().changeType&&(Nn=!0),Ft=er}isNaN(Dt)||(Xt.trigger(_.Z.SEEK_TARGET,{time:Dt},{streamId:F.getId()}),Se.seek(Dt,!1,!0),F.startScheduleControllers()),Ie=!1,Xt.trigger(_.Z.PERIOD_SWITCH_COMPLETED,{toStreamInfo:Oo()})}))}function Hn(Dt){var wn=Fn(Dt.seekTime);wn&&wn!==F?wn&&wn!==F&&(Yn(),(function(er,mr){var Zr=er&&!isNaN(er.seekTime)?er.seekTime:NaN,$r=F.getProcessors().map((function($n){return $n.prepareOuterPeriodPlaybackSeeking(er)}));Promise.all($r).then((function(){yn(mr,F,Zr)})).catch((function($n){Le.error($n)}))})(Dt,wn)):(Yn(),(function(er){F.getProcessors().forEach((function(mr){return mr.prepareInnerPeriodPlaybackSeeking(er)})),Zi(rt.USER_REQUEST_STOP_REASON)})(Dt)),su(nt.SEEK_START_REASON)}function Yn(){rr()}function rr(){Bt&&Bt.length>0&&(Bt.forEach((function(Dt){Dt.deactivate(!0)})),Bt=[])}function Yt(Dt){if(Dt.newMediaInfo.streamInfo.id===F.getId()){if(rr(),lt.get().streaming.buffer.resetSourceBuffersForTrackSwitch&&Dt.oldMediaInfo&&Dt.oldMediaInfo.codec!==Dt.newMediaInfo.codec){var wn=Se.getTime();return F.deactivate(!1),void In(wn,!1,!1)}F.prepareTrackChange(Dt)}}function Tn(Dt,wn){try{return lt.get().streaming.buffer.reuseExistingSourceBuffers&&(wn.isProtectionCompatible(Dt)||bt)&&(Nn&&lt.get().streaming.buffer.useChangeTypeForTrackSwitch||wn.isMediaCodecCompatible(Dt,wn))}catch{return!1}}function Dn(Dt){var wn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(Ae&&!Dt.getPreloaded()){var er=Tn(Dt,wn);er&&Dt.startPreloading(Ae,Ft).then((function(){Bt.push(Dt)}))}}function Fn(Dt){if(isNaN(Dt))return null;for(var wn=Fe.length,er=0;er<wn;er++){var mr=Fe[er];if(Dt<parseFloat((mr.getStartTime()+mr.getDuration()).toFixed(5)))return mr}return null}function Zn(){try{var Dt=K.getIsDynamic(),wn=K.getStreamsInfo()[0].manifestInfo,er=Se.getTime(),mr=ge.calcTimeShiftBufferWindow(Fe,Dt),Zr=Si();if(mr.start===void 0||mr.end===void 0)return;Zr&&Zr.length!==0?Zr.forEach((function($r){le.addDVRInfo($r.getType(),er,wn,mr)})):le.addDVRInfo(h.Z.VIDEO,er,wn,mr)}catch{}}function Rt(Dt){if(dt&&G){var wn=gt.getInitialBufferLevel(),er=[h.Z.TEXT];(isNaN(wn)||wn<=Se.getBufferLevel(er)||K.getIsDynamic()&&wn>Se.getLiveDelay())&&(dt=!1,su(nt.INITIAL_PLAYOUT_START_REASON),Se.play())}Dt&&Dt.mediaType&&le.addBufferLevel(Dt.mediaType,new Date,1e3*Dt.bufferLevel)}function ft(Dt){Dt.streamInfo.id===F.getId()&&Dt.reason&&Dt.reason.forceReplace&&rr(),Nc(Dt.streamInfo.id).prepareQualityChange(Dt)}function Kt(){if(K.getIsDynamic()&&Se.getOriginalLiveDelay()!==0&&F){var Dt=K.getStreamsInfo();if(Dt.length>0){var wn=Dt[0].manifestInfo,er=Vu(Dt,wn);Se.computeAndSetLiveDelay(er,wn)}}}function We(){if(ea()){var Dt=ue.getPlaybackQuality();Dt&&le.addDroppedFrames(Dt)}}function tt(){R.debug("[onPlaybackStarted]"),!dt&&mt&&su(nt.RESUME_FROM_PAUSE_START_REASON),dt&&(dt=!1),zt&&(zt=!1,lt.get().streaming.applyContentSteering&&!Q.shouldQueryBeforeStart()&&Q.loadSteeringData()),mt=!1}function Mt(Dt){R.debug("[onPlaybackPaused]"),Dt.ended||(mt=!0,Zi(rt.USER_REQUEST_STOP_REASON))}function mn(Dt){R.debug("Stream with id ".concat(Dt.streamInfo.id," finished buffering"));var wn=Dt.streamInfo.isLast;Ae&&wn?(R.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),_e.signalEndOfStream(Ae)):Cn()}function Cn(){if(F&&F.getHasFinishedBuffering())for(var Dt=(function(){var Zr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{var $r=Zr||F||null;if($r){var $n=$r.getStreamInfo();return Fe.filter((function(Bi){var Ai=Bi.getStreamInfo();return Ai.start>$n.start&&$n.id!==Ai.id}))}}catch{return[]}})(F),wn=0;wn<Dt.length;){var er=Dt[wn],mr=wn===0?F:Dt[wn-1];!er.getPreloaded()&&mr.getHasFinishedBuffering()&&Ae&&Dn(er,mr),wn+=1}}function cr(){Ut&&(clearInterval(Ut),Ut=null)}function Si(){return F?F.getProcessors():[]}function to(Dt){if(F&&!F.getIsEndedEventSignaled()){F.setIsEndedEventSignaled(!0);var wn=(function(){var er=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,mr=er||F||null;if(!mr)return null;for(var Zr=mr.getStreamInfo(),$r=Zr.start,$n=0,Bi=-1,Ai=NaN;$n<Fe.length;){var xs=Fe[$n].getStreamInfo(),lu=xs.start-$r;lu>0&&(isNaN(Ai)||lu<Ai)&&Zr.id!==xs.id&&(Ai=lu,Bi=$n),$n+=1}return Bi>=0?Fe[Bi]:null})();wn?(R.debug("StreamController onEnded, found next stream with id ".concat(wn.getStreamInfo().id,". Switching from ").concat(F.getStreamInfo().id," to ").concat(wn.getStreamInfo().id)),yn(wn,F,NaN)):(R.debug("StreamController no next stream found"),F.setIsEndedEventSignaled(!1)),Zi(wn?rt.END_OF_PERIOD_STOP_REASON:rt.END_OF_CONTENT_STOP_REASON)}Dt&&Dt.isLast&&(cr(),Q.stopSteeringRequestTimer())}function Di(Dt){var wn=Dt||Oo().manifestInfo.duration;_e.setDuration(wn)}function zo(Dt){var wn=He.getURIFragmentData();if(!wn||!wn.t)return NaN;var er=zu()[0].getStreamInfo().start;return wn.t=wn.t.split(",")[0],Ma(Dt,wn.t,er)}function bo(Dt,wn){var er=0;return Dt||(er=zu()[0].getStreamInfo().start),Ma(Dt,wn,er)}function Ma(Dt,wn,er){var mr=K.getRegularPeriods()[0],Zr=wn.toString(),$r=Zr.indexOf("posix:")!==-1?Zr.substring(6)==="now"?Date.now()/1e3:parseFloat(Zr.substring(6)):NaN;return Dt&&!isNaN($r)?ge.calcPresentationTimeFromWallTime(new Date(1e3*$r),mr):parseFloat(Zr)+er}function Vu(Dt,wn){try{var er=NaN;if(wn&&!isNaN(wn.maxFragmentDuration)&&isFinite(wn.maxFragmentDuration))return wn.maxFragmentDuration;if(Dt&&Dt.length===1){var mr=Dt[0],Zr=[h.Z.VIDEO,h.Z.AUDIO,h.Z.TEXT].reduce((function($n,Bi){var Ai=K.getMediaInfoForType(mr,Bi);return Ai&&Ai.isFragmented!==!1&&$n.push(Ai),$n}),[]).reduce((function($n,Bi){var Ai=K.getVoRepresentations(Bi);return Ai&&Ai.length>0&&Ai.forEach((function(xs){xs&&$n.push(xs)})),$n}),[]).reduce((function($n,Bi){var Ai=K.convertRepresentationToRepresentationInfo(Bi);return Ai&&Ai.fragmentDuration&&!isNaN(Ai.fragmentDuration)&&$n.push(Ai.fragmentDuration),$n}),[]);er=Math.max.apply(Math,(function($n){if(Array.isArray($n))return Hl($n)})($r=Zr)||(function($n){if(typeof Symbol<"u"&&Symbol.iterator in Object($n))return Array.from($n)})($r)||(function($n,Bi){if($n){if(typeof $n=="string")return Hl($n,Bi);var Ai=Object.prototype.toString.call($n).slice(8,-1);return Ai==="Object"&&$n.constructor&&(Ai=$n.constructor.name),Ai==="Map"||Ai==="Set"?Array.from($n):Ai==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ai)?Hl($n,Bi):void 0}})($r)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})())}return isFinite(er)?er:NaN}catch{return NaN}var $r}function ou(Dt){if(Dt.error)ke=!0,Ll();else{R.info("Manifest updated... updating data system wide.");var wn=Dt.manifest;K.updatePeriods(wn);var er=K.getUTCTimingSources();!K.getIsDynamic()||er&&er.length!==0||Xt.trigger(v.Z.CONFORMANCE_VIOLATION,{level:Ao.LEVELS.WARNING,event:Ao.EVENTS.NO_UTC_TIMING_ELEMENT});var mr=K.getIsDynamic()?er.concat(ut.getUTCTimingSources()):er;z.filterUnsupportedFeatures(wn).then((function(){ce.initialize(wn),fe.attemptSync(mr,K.getIsDynamic())}))}}function ea(){return!!F&&F.getHasVideoTrack()}function Eo(){return!!F&&F.getHasAudioTrack()}function Zi(Dt,wn){wn=wn||new Date,Si().forEach((function(er){er.finalisePlayList(wn,Dt)})),le.addPlayList()}function su(Dt){le.createPlaylistMetrics(1e3*Se.getTime(),Dt)}function au(Dt){if(Dt.error){var wn="";switch(Dt.error.code){case 1:wn="MEDIA_ERR_ABORTED";break;case 2:wn="MEDIA_ERR_NETWORK";break;case 3:wn="MEDIA_ERR_DECODE",an.counts.mediaErrorDecode+=1;break;case 4:wn="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:wn="MEDIA_ERR_ENCRYPTED";break;default:wn="UNKNOWN"}wn==="MEDIA_ERR_DECODE"&&lt.get().errors.recoverAttempts.mediaErrorDecode>=an.counts.mediaErrorDecode?(function(){R.warn("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");var er=Se.getTime();F.deactivate(!1),R.warn("MediaSource has been resetted. Resuming playback from time ".concat(er)),In(er,!1,!1)})():(we=!0,Dt.error.message&&(wn+=" ("+Dt.error.message+")"),Dt.error.msExtendedCode&&(wn+=" (0x"+(Dt.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),R.fatal("Video Element Error: "+wn),Dt.error&&R.fatal(Dt.error),Le.error(new ve.Z(Dt.error.code,wn)),Ll())}}function Oo(){return F?F.getStreamInfo():null}function Nc(Dt){for(var wn=0,er=Fe.length;wn<er;wn++)if(Fe[wn].getId()===Dt)return Fe[wn];return null}function wf(Dt){isNaN(Dt.newDuration)||Di(Dt.newDuration)}function Tf(){Fe=[],Lt=NaN,se=null,Ie=!1,F=null,we=!1,ke=!1,dt=!0,zt=!0,mt=!1,G=!0,Ut=null,bt=!1,Nn=!1,Bt=[],tn=null,an={counts:{mediaErrorDecode:0}}}function Ll(){Vn(),fe.reset(),Zi(we||ke?rt.FAILURE_STOP_REASON:rt.USER_REQUEST_STOP_REASON);for(var Dt=0,wn=Fe?Fe.length:0;Dt<wn;Dt++)Fe[Dt].reset(we);Xt.off(v.Z.PLAYBACK_TIME_UPDATED,We,L),Xt.off(v.Z.PLAYBACK_SEEKING,Hn,L),Xt.off(v.Z.PLAYBACK_ERROR,au,L),Xt.off(v.Z.PLAYBACK_STARTED,tt,L),Xt.off(v.Z.PLAYBACK_PAUSED,Mt,L),Xt.off(v.Z.PLAYBACK_ENDED,to,L),Xt.off(v.Z.METRIC_ADDED,Sf,L),Xt.off(v.Z.MANIFEST_VALIDITY_CHANGED,wf,L),Xt.off(v.Z.BUFFER_LEVEL_UPDATED,Rt,L),Xt.off(v.Z.QUALITY_CHANGE_REQUESTED,ft,L),_.Z.KEY_SESSION_UPDATED&&Xt.off(_.Z.KEY_SESSION_UPDATED,vr,L),Xt.off(_.Z.MANIFEST_UPDATED,ou,L),Xt.off(_.Z.STREAM_BUFFERING_COMPLETED,mn,L),Xt.off(_.Z.TIME_SYNCHRONIZATION_COMPLETED,gr,L),Xt.off(_.Z.CURRENT_TRACK_CHANGED,Yt,L),Xt.off(_.Z.SETTING_UPDATED_LIVE_DELAY,Kt,L),Xt.off(_.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Kt,L),ce.reset(),W.reset(),Ke.reset(),le.clearAllCurrentMetrics(),Z.setValue(null),q.reset(),ge.reset(),me.reset(),Ae&&(_e.detachMediaSource(ue),Ae=null),ue=null,se&&(se=null,re=null,Z.getValue()&&Xt.trigger(_.Z.PROTECTION_DESTROYED,{data:Z.getValue().url})),cr(),Xt.trigger(_.Z.STREAM_TEARDOWN_COMPLETE),Tf()}function Sf(Dt){if(Dt.metric===E.Z.DVR_INFO){var wn=Eo()?h.Z.AUDIO:h.Z.VIDEO;Dt.mediaType===wn&&_e.setSeekable(Dt.value.range.start,Dt.value.range.end)}}function zu(){return Fe}return L={initialize:function(Dt,wn){Vn(),G=Dt,re=wn,ge.initialize(),(W=$o(ln).create()).setConfig({manifestModel:Z,adapter:K,manifestLoader:q,errHandler:Le,settings:lt,contentSteeringController:Q}),W.initialize(),(Ke=uf(ln).getInstance()).setConfig({manifestUpdater:W,playbackController:Se,settings:lt}),Ke.start(),fe.setConfig({dashMetrics:le,baseURLController:ce,errHandler:Le,settings:lt}),fe.initialize(),_e.setConfig({settings:lt}),se&&(Xt.trigger(_.Z.PROTECTION_CREATED,{controller:se}),se.setMediaElement(ue.getElement()),re&&se.setProtectionData(re)),Xt.on(v.Z.PLAYBACK_TIME_UPDATED,We,L),Xt.on(v.Z.PLAYBACK_SEEKING,Hn,L),Xt.on(v.Z.PLAYBACK_ERROR,au,L),Xt.on(v.Z.PLAYBACK_STARTED,tt,L),Xt.on(v.Z.PLAYBACK_PAUSED,Mt,L),Xt.on(v.Z.PLAYBACK_ENDED,to,L),Xt.on(v.Z.METRIC_ADDED,Sf,L),Xt.on(v.Z.MANIFEST_VALIDITY_CHANGED,wf,L),Xt.on(v.Z.BUFFER_LEVEL_UPDATED,Rt,L),Xt.on(v.Z.QUALITY_CHANGE_REQUESTED,ft,L),_.Z.KEY_SESSION_UPDATED&&Xt.on(_.Z.KEY_SESSION_UPDATED,vr,L),Xt.on(_.Z.MANIFEST_UPDATED,ou,L),Xt.on(_.Z.STREAM_BUFFERING_COMPLETED,mn,L),Xt.on(_.Z.TIME_SYNCHRONIZATION_COMPLETED,gr,L),Xt.on(_.Z.CURRENT_TRACK_CHANGED,Yt,L),Xt.on(_.Z.SETTING_UPDATED_LIVE_DELAY,Kt,L),Xt.on(_.Z.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Kt,L)},getActiveStreamInfo:Oo,addDVRMetric:Zn,hasVideoTrack:ea,hasAudioTrack:Eo,getStreamById:Nc,getStreamForTime:Fn,getTimeRelativeToStreamId:function(Dt,wn){for(var er=null,mr=0,Zr=0,$r=null,$n=0;$n<Fe.length;$n++){if(Zr=(er=Fe[$n]).getStartTime(),$r=er.getDuration(),Number.isFinite(Zr)&&(mr=Zr),er.getId()===wn)return Dt-mr;Number.isFinite($r)&&(mr+=$r)}return null},load:function(Dt){var wn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;Vn(),Lt=wn,q.load(Dt)},loadWithManifest:function(Dt){var wn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;Mn(),Lt=wn,W.setManifest(Dt)},getActiveStreamProcessors:Si,setConfig:function(Dt){Dt&&(Dt.capabilities&&(P=Dt.capabilities),Dt.capabilitiesFilter&&(z=Dt.capabilitiesFilter),Dt.manifestLoader&&(q=Dt.manifestLoader),Dt.manifestModel&&(Z=Dt.manifestModel),Dt.mediaPlayerModel&&(gt=Dt.mediaPlayerModel),Dt.customParametersModel&&(ut=Dt.customParametersModel),Dt.protectionController&&(se=Dt.protectionController),Dt.adapter&&(K=Dt.adapter),Dt.dashMetrics&&(le=Dt.dashMetrics),Dt.errHandler&&(Le=Dt.errHandler),Dt.timelineConverter&&(ge=Dt.timelineConverter),Dt.videoModel&&(ue=Dt.videoModel),Dt.playbackController&&(Se=Dt.playbackController),Dt.serviceDescriptionController&&(qe=Dt.serviceDescriptionController),Dt.contentSteeringController&&(Q=Dt.contentSteeringController),Dt.textController&&(te=Dt.textController),Dt.abrController&&(Oe=Dt.abrController),Dt.mediaController&&(Be=Dt.mediaController),Dt.settings&&(lt=Dt.settings),Dt.baseURLController&&(ce=Dt.baseURLController),Dt.uriFragmentModel&&(He=Dt.uriFragmentModel),Dt.segmentBaseController&&(ae=Dt.segmentBaseController),Dt.manifestUpdater&&(W=Dt.manifestUpdater))},setProtectionData:function(Dt){re=Dt,se&&se.setProtectionData(re)},getIsStreamSwitchInProgress:function(){return Ie},switchToVideoElement:function(Dt){F&&(Se.initialize(Oo()),In(Dt,!1,!0))},getHasMediaOrInitialisationError:function(){return we||ke},getStreams:zu,getActiveStream:function(){return F},getInitialPlayback:function(){return dt},getAutoPlay:function(){return G},refreshManifest:function(){W.getIsUpdating()||W.refreshManifest()},reset:Ll},R=(0,C.Z)(ln).getInstance().getLogger(L),fe=Uo(ln).getInstance(),_e=Sl(ln).getInstance(),me=Ze(ln).getInstance(),Tf(),L}Kf.__dashjs_factory_name="StreamController";var cc=I.Z.getSingletonFactory(Kf);function fp(){var L,R,P,z,W,q,Z,K,le,_e,fe,Q,ce=this.context,ae=(0,A.Z)(ce).getInstance();function He(){Q.debug("Stopping the gap controller"),W&&(clearInterval(W),W=null),(function(){ae.off(_.Z.WALLCLOCK_TIME_UPDATED,Le,this),ae.off(_.Z.INITIAL_STREAM_SWITCH,me,this),ae.off(_.Z.PLAYBACK_SEEKING,Oe,this),ae.off(_.Z.BUFFER_REPLACEMENT_STARTED,Be,L),ae.off(_.Z.TRACK_CHANGE_RENDERED,Ke,L)})(),W=null,q=NaN,z=0,_e=null,fe={}}function Oe(){_e&&(clearTimeout(_e),_e=null)}function Be(re){try{if(re.streamId!==K.getActiveStreamInfo().id||re.mediaType!==h.Z.VIDEO&&re.mediaType!==h.Z.AUDIO)return;re.streamId===K.getActiveStreamInfo().id&&(fe[re.mediaType]=!0)}catch(G){Q.error(G)}}function Ke(re){re&&re.mediaType&&(fe[re.mediaType]=!1)}function me(){W||(function(){try{W||(Q.debug("Starting the gap controller"),W=setInterval((function(){ge()&&te(Z.getTime())}),100))}catch{}})()}function Le(){if(ge(P.get().streaming.gaps.enableSeekFix)&&++z>=10){var re=Z.getTime();R===re?te(re,!0):(R=re,q=NaN),z=0}}function ge(){var re=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!K.getActiveStream())return!1;var G=Object.keys(fe).some((function(we){return fe[we]})),Ie=!!re&&Fe();return!G&&P.get().streaming.gaps.jumpGaps&&K.getActiveStreamProcessors().length>0&&(!Z.isSeeking()||Ie)&&!Z.isPaused()&&!K.getIsStreamSwitchInProgress()&&!K.getHasMediaOrInitialisationError()}function Fe(){var re=K.getActiveStream(),G=parseFloat((re.getStartTime()+re.getDuration()).toFixed(5));return Z.getTime()+P.get().streaming.gaps.threshold>=G}function F(re,G){try{if(!re||re.length<=1&&G>0)return NaN;for(var Ie=NaN,we=0;isNaN(Ie)&&we<re.length;){var ke=we>0?re.end(we-1):0;G<re.start(we)&&ke-G<P.get().streaming.gaps.threshold&&(Ie=we),we+=1}return Ie}catch{return null}}function se(re,G){for(var Ie=0,we=re.length;Ie<we;Ie++)if(G>=re.start(Ie)&&G<=re.end(Ie))return!0;return!1}function te(re){var G,Ie=arguments.length>1&&arguments[1]!==void 0&&arguments[1],we=P.get().streaming.gaps.enableStallFix,ke=P.get().streaming.gaps.stallSeek,Ae=P.get().streaming.gaps.smallGapLimit,ue=P.get().streaming.gaps.jumpLargeGaps,Se=le.getBufferRange(),qe=NaN,gt=!1;if(G=F(Se,re),!isNaN(G)){var ut=Se.start(G),mt=ut-re;mt>0&&(mt<=Ae||ue)&&(qe=ut)}var dt=Z.getTimeToStreamEnd();if(isNaN(qe)&&Ie&&isFinite(dt)&&!isNaN(dt)&&dt<Ae&&(qe=parseFloat(Z.getStreamEndTime().toFixed(5)),gt=!0),we&&isNaN(qe)&&Ie&&isNaN(G)&&se(Se,re)&&(ke===0?(Q.warn("Toggle play pause to break stall"),le.pause(),le.play()):(Q.warn("Jumping ".concat(ke,"s to break stall")),qe=re+ke)),qe>0&&q!==qe&&qe>re&&!_e){var zt=qe-re;if(gt){var Ut=K.getStreamForTime(qe),Ft=Ut&&!!Ut.getPreloaded();Q.warn("Jumping to end of stream because of gap from ".concat(re," to ").concat(qe,". Gap duration: ").concat(zt)),Z.seek(qe,!0,Ft)}else{var Bt=Z.getIsDynamic(),Nn=G>0?Se.end(G-1):re,lt=Bt?1e3*Math.max(0,zt-.1):0;_e=window.setTimeout((function(){Z.seek(qe,!0,!0),Q.warn("Jumping gap occuring in period ".concat(K.getActiveStream().getStreamId()," starting at ").concat(Nn," and ending at ").concat(qe,". Jumping by: ").concat(qe-Nn)),_e=null}),lt)}q=qe}}return L={reset:He,setConfig:function(re){re&&(re.settings&&(P=re.settings),re.playbackController&&(Z=re.playbackController),re.streamController&&(K=re.streamController),re.videoModel&&(le=re.videoModel))},initialize:function(){(function(){ae.on(_.Z.WALLCLOCK_TIME_UPDATED,Le,this),ae.on(_.Z.INITIAL_STREAM_SWITCH,me,this),ae.on(_.Z.PLAYBACK_SEEKING,Oe,this),ae.on(_.Z.BUFFER_REPLACEMENT_STARTED,Be,L),ae.on(_.Z.TRACK_CHANGE_RENDERED,Ke,L)})()}},Q=(0,C.Z)(ce).getInstance().getLogger(L),He(),L}fp.__dashjs_factory_name="GapController";var ks=I.Z.getSingletonFactory(fp);function nh(){var L,R,P,z,W,q,Z,K,le,_e,fe=this.context,Q=(0,A.Z)(fe).getInstance();function ce(){R=!1;var Fe=ze.Z.parseUserAgent();P=Fe&&Fe.browser&&Fe.browser.name&&Fe.browser.name.toLowerCase()==="safari"}function ae(){R=!1}function He(Fe){if(Fe.streamId===q.getActiveStreamInfo().id&&le){var F=Z.getLiveDelay();Z.getBufferLevel()>F/2&&(le=!1)}}function Oe(Fe){Fe.streamId===q.getActiveStreamInfo().id&&(le=Fe.state===E.Z.BUFFER_EMPTY)}function Be(){K.getCatchupModeEnabled()||z.setPlaybackRate(1)}function Ke(){Z.getIsDynamic()&&K.getCatchupModeEnabled()&&(K.getCatchupPlaybackRates().max>0||K.getCatchupPlaybackRates().min<0)&&!Z.isPaused()&&!Z.isSeeking()&&(function(){try{return!(!Z.getTime()>0||R)&&(Le()===h.Z.LIVE_CATCHUP_MODE_LOLP?(function(Fe,F){try{return Math.abs(me())>0||Fe<F}catch{return!1}})(Z.getBufferLevel(),W.get().streaming.liveCatchup.playbackBufferMin):(function(){try{return Math.abs(me())>0}catch{return!1}})())}catch{return!1}})()&&(function(){if(!R&&z){var Fe,F=z.getPlaybackRate(),se=K.getCatchupPlaybackRates(),te=Z.getBufferLevel(),re=me(),G=K.getCatchupMaxDrift();if(!isNaN(G)&&G>0&&re>G)_e.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),R=!0,Z.seekToCurrentLive(!0,!1);else{var Ie=Z.getCurrentLiveLatency(),we=Z.getLiveDelay();Fe=Le()===h.Z.LIVE_CATCHUP_MODE_LOLP?(function(Ae,ue,Se,qe,gt){var ut;if(gt<qe){var mt=Math.abs(Ae.min),dt=5*(gt-qe);ut=1-mt+2*mt/(1+Math.pow(Math.E,-dt)),_e.debug("[LoL+ playback control_buffer-based] bufferLevel: "+gt+", newRate: "+ut)}else{if(Math.abs(ue-Se)<=.02*Se)ut=1;else{var zt=ue-Se,Ut=zt<0?Math.abs(Ae.min):Ae.max,Ft=5*zt;ut=1-Ut+2*Ut/(1+Math.pow(Math.E,-Ft))}_e.debug("[LoL+ playback control_latency-based] latency: "+ue+", newRate: "+ut)}return ut})(se,Ie,we,W.get().streaming.liveCatchup.playbackBufferMin,te):(function(Ae,ue,Se,qe){if(le)return 1;var gt=ue-Se,ut=gt<0?Math.abs(Ae.min):Ae.max,mt=5*gt,dt=1-ut+2*ut/(1+Math.pow(Math.E,-mt));return Z.getPlaybackStalled()&&qe<=Se/2&&gt>0&&(dt=1),dt})(se,Ie,we,te);var ke=P?.25:.02/(.5/se.max);Fe&&Math.abs(F-Fe)>=ke&&(_e.debug("[CatchupController]: Setting playback rate to ".concat(Fe)),z.setPlaybackRate(Fe))}}})()}function me(){return Z.getCurrentLiveLatency()-Z.getLiveDelay()}function Le(){var Fe=W.get().streaming.liveCatchup.playbackBufferMin;return W.get().streaming.liveCatchup.mode!==h.Z.LIVE_CATCHUP_MODE_LOLP||Fe===null||isNaN(Fe)?h.Z.LIVE_CATCHUP_MODE_DEFAULT:h.Z.LIVE_CATCHUP_MODE_LOLP}function ge(){K.getCatchupPlaybackRates(!0)}return L={reset:function(){Q.off(v.Z.BUFFER_LEVEL_UPDATED,He,L),Q.off(v.Z.BUFFER_LEVEL_STATE_CHANGED,Oe,L),Q.off(v.Z.PLAYBACK_PROGRESS,Ke,L),Q.off(v.Z.PLAYBACK_TIME_UPDATED,Ke,L),Q.off(v.Z.PLAYBACK_SEEKED,ae,L),Q.off(_.Z.SETTING_UPDATED_CATCHUP_ENABLED,Be,L),Q.off(_.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,ge,L),Q.off(_.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,ge,L),Q.off(v.Z.STREAM_INITIALIZED,ge,L),ce(),z.setPlaybackRate(1,!0)},setConfig:function(Fe){Fe&&(Fe.settings&&(W=Fe.settings),Fe.videoModel&&(z=Fe.videoModel),Fe.streamController&&(q=Fe.streamController),Fe.playbackController&&(Z=Fe.playbackController),Fe.mediaPlayerModel&&(K=Fe.mediaPlayerModel))},initialize:function(){Q.on(v.Z.BUFFER_LEVEL_UPDATED,He,L),Q.on(v.Z.BUFFER_LEVEL_STATE_CHANGED,Oe,L),Q.on(v.Z.PLAYBACK_PROGRESS,Ke,L),Q.on(v.Z.PLAYBACK_TIME_UPDATED,Ke,L),Q.on(v.Z.PLAYBACK_SEEKED,ae,L),Q.on(_.Z.SETTING_UPDATED_CATCHUP_ENABLED,Be,L),Q.on(_.Z.SETTING_UPDATED_PLAYBACK_RATE_MIN,ge,L),Q.on(_.Z.SETTING_UPDATED_PLAYBACK_RATE_MAX,ge,L),Q.on(v.Z.STREAM_INITIALIZED,ge,L),ge()}},_e=(0,C.Z)(fe).getInstance().getLogger(L),ce(),L}nh.__dashjs_factory_name="CatchupController";var ws=I.Z.getSingletonFactory(nh),rh=[h.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME],ih="video",Gl="audio";function Yf(){var L,R,P,z,W,q=this.context;function Z(){R={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN}},minBitrate:{},maxBitrate:{},initialBitrate:{},contentSteering:null},P=[]}function K(le,_e,fe){try{R[le][_e]=fe/1e3}catch(Q){z.error(Q)}}return L={getServiceDescriptionSettings:function(){return R},getProducerReferenceTimeOffsets:function(){return P},calculateProducerReferenceTimeOffsets:function(le){try{var _e=[];if(le&&le.length>0){var fe=[h.Z.VIDEO,h.Z.AUDIO,h.Z.TEXT],Q=W.getAvailabilityStartTime()/1e3;le.forEach((function(ce){var ae=fe.reduce((function(He,Oe){return He.concat(W.getAllMediaInfoForType(ce,Oe))}),[]).reduce((function(He,Oe){return W.getProducerReferenceTimes(ce,Oe).forEach((function(Be){var Ke=W.getVoRepresentations(Oe);if(Ke&&Ke.length>0&&Ke[0].adaptation&&Ke[0].segmentInfoType===p.Z.SEGMENT_TEMPLATE){var me=Ke[0],Le=new Date(Be[p.Z.WALL_CLOCK_TIME]).getTime()/1e3-(Be[p.Z.PRESENTATION_TIME]/me[p.Z.TIMESCALE]-me[p.Z.PRESENTATION_TIME_OFFSET]+ce.start),ge=Q-Le;He.push({id:Be[p.Z.ID],to:ge})}})),He}),[]);_e=_e.concat(ae)}))}P=_e}catch(ce){z.error(ce),P=[]}},applyServiceDescription:function(le){if(le&&le.serviceDescriptions){var _e=le.serviceDescriptions.filter((function(ce){return rh.includes(ce.schemeIdUri)})),fe=le.serviceDescriptions.filter((function(ce){return ce.schemeIdUri==null})),Q=_e.length>0?_e[_e.length-1]:fe[fe.length-1];Q&&(Q.latency&&Q.latency.target>0&&(function(ce){var ae;if(ce.schemeIdUri,h.Z.SERVICE_DESCRIPTION_DVB_LL_SCHEME,ae=(function(Ke){return{liveDelay:Ke.latency.target/1e3,maxDrift:!isNaN(Ke.latency.max)&&Ke.latency.max>Ke.latency.target?(Ke.latency.max-Ke.latency.target+500)/1e3:NaN,referenceId:Ke.latency.referenceId||NaN}})(ce),P.length>0){var He=(function(Ke){var me,Le=0,ge=P.filter((function(Fe){return Fe.id===Ke.referenceId}));return ge.length===0?(Le=P.length>0?P[0].to:0,me=P[0].id||NaN):(Le=ge[0].to||0,me=ge[0].id||NaN),{to:Le,id:me}})(ae),Oe=He.to,Be=He.id;R.liveDelay=ae.liveDelay-Oe,R.liveCatchup.maxDrift=ae.maxDrift,z.debug(`
                Found latency properties coming from service description. Applied time offset of `.concat(Oe," from ProducerReferenceTime element with id ").concat(Be,`.
                Live Delay: `).concat(ae.liveDelay-Oe,", Live catchup max drift: ").concat(ae.maxDrift,`
            `))}else R.liveDelay=ae.liveDelay,R.liveCatchup.maxDrift=ae.maxDrift,z.debug("Found latency properties coming from service description: Live Delay: ".concat(ae.liveDelay,", Live catchup max drift: ").concat(ae.maxDrift))})(Q),Q.playbackRate&&(function(ce){var ae=ce.playbackRate.min?Math.round(1e3*(ce.playbackRate.min-1))/1e3:NaN,He=ce.playbackRate.max?Math.round(1e3*(ce.playbackRate.max-1))/1e3:NaN;R.liveCatchup.playbackRate.min=ae,R.liveCatchup.playbackRate.max=He,z.debug("Found latency properties coming from service description: Live catchup min playback rate: ".concat(ae)),z.debug("Found latency properties coming from service description: Live catchup max playback rate: ".concat(He))})(Q),Q.operatingQuality,Q.operatingBandwidth&&(function(ce){if(ce&&ce.operatingBandwidth&&ce.operatingBandwidth.mediaType&&ce.operatingBandwidth.mediaType!=="all"){var ae={};ae.minBandwidth=ce.operatingBandwidth.min,ae.maxBandwidth=ce.operatingBandwidth.max,ae.targetBandwidth=ce.operatingBandwidth.target;var He=[];ce.operatingBandwidth.mediaType===ih||ce.operatingBandwidth.mediaType===Gl?He.push(ce.operatingBandwidth.mediaType):ce.operatingBandwidth.mediaType==="any"&&(He.push(Gl),He.push(ih)),He.forEach((function(Oe){isNaN(ae.minBandwidth)||K("minBitrate",Oe,ae.minBandwidth),isNaN(ae.maxBandwidth)||K("maxBitrate",Oe,ae.maxBandwidth),isNaN(ae.targetBandwidth)||K("initialBitrate",Oe,ae.targetBandwidth)}))}})(Q),Q.contentSteering&&(function(ce){R.contentSteering=ce.contentSteering})(Q))}},reset:function(){Z()},setConfig:function(le){le&&le.adapter&&(W=le.adapter)}},z=(0,C.Z)(q).getInstance().getLogger(L),Z(),L}Yf.__dashjs_factory_name="ServiceDescriptionController";var dp=I.Z.getSingletonFactory(Yf),oo=f(3973),rl=f.n(oo),oh=f(3039);function hp(){var L,R,P,z,W,q,Z,K,le=this.context,_e=(0,A.Z)(le).getInstance();function fe(ue,Se){return ue&&P[Se]&&P[Se][ue]?P[Se][ue].list:[]}function Q(ue,Se){return ue&&P[Se]&&P[Se][ue]?P[Se][ue].current:null}function ce(ue){var Se=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(ue&&ue.streamInfo){var qe=ue.type,gt=ue.streamInfo,ut=gt.id,mt=Q(qe,ut);if(P[ut]&&P[ut][qe]&&(P[ut][qe].current=ue,P[ut][qe].current&&(qe!==h.Z.TEXT&&!Oe(ue,mt)||qe===h.Z.TEXT&&ue.isFragmented)&&_e.trigger(_.Z.CURRENT_TRACK_CHANGED,{oldMediaInfo:mt,newMediaInfo:ue,switchMode:z.get().streaming.trackSwitchMode[qe]},{streamId:ut}),!Se)){var dt=Ke(ue);if(!dt||!P[ut][qe].storeLastSettings)return;dt.roles&&(dt.role=dt.roles[0],delete dt.roles),dt.accessibility&&(dt.accessibility=dt.accessibility[0]),dt.audioChannelConfiguration&&(dt.audioChannelConfiguration=dt.audioChannelConfiguration[0]),q[qe]=dt,K.setSavedMediaSettings(qe,dt)}}}function ae(ue,Se){ue&&Se&&(W[ue]=Se)}function He(ue){return ue?W[ue]:null}function Oe(ue,Se){if(!ue&&!Se)return!0;if(!ue||!Se)return!1;var qe=ue.id===Se.id,gt=ue.viewpoint===Se.viewpoint,ut=JSON.stringify(ue.viewpointsWithSchemeIdUri)===JSON.stringify(Se.viewpointsWithSchemeIdUri),mt=ue.lang===Se.lang,dt=ue.codec===Se.codec,zt=ue.roles.toString()===Se.roles.toString(),Ut=JSON.stringify(ue.rolesWithSchemeIdUri)===JSON.stringify(Se.rolesWithSchemeIdUri),Ft=ue.accessibility.toString()===Se.accessibility.toString(),Bt=JSON.stringify(ue.accessibilitiesWithSchemeIdUri)===JSON.stringify(Se.accessibilitiesWithSchemeIdUri),Nn=ue.audioChannelConfiguration.toString()===Se.audioChannelConfiguration.toString(),lt=JSON.stringify(ue.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(Se.audioChannelConfigurationsWithSchemeIdUri);return qe&&dt&&gt&&ut&&mt&&zt&&Ut&&Ft&&Bt&&Nn&&lt}function Be(){P={},q={},W={audio:null,video:null,text:null}}function Ke(ue){var Se={lang:ue.lang,viewpoint:ue.viewpoint,roles:ue.roles,accessibility:ue.accessibility,audioChannelConfiguration:ue.audioChannelConfiguration,codec:ue.codec};return Se.lang||Se.viewpoint||Se.role&&Se.role.length>0||Se.accessibility&&Se.accessibility.length>0||Se.audioChannelConfiguration&&Se.audioChannelConfiguration.length>0?Se:null}function me(ue,Se,qe){var gt=[];return ue.forEach((function(ut){Se(qe,ut)&&gt.push(ut)})),gt.length!==0?gt:ue}function Le(ue,Se){try{return!ue.lang||ue.lang instanceof RegExp?Se.lang.match(ue.lang):Se.lang!==""&&(0,oh.extendedFilter)(Se.lang,rl()(ue.lang)).length>0}catch{return!1}}function ge(ue,Se){return ue.index===void 0||ue.index===null||Se.index===ue.index}function Fe(ue,Se){return!ue.viewpoint||ue.viewpoint===Se.viewpoint}function F(ue,Se){var qe=arguments.length>2&&arguments[2]!==void 0&&arguments[2],gt=!ue.role||!!Se.roles.filter((function(ut){return ut===ue.role}))[0];return gt||Se.type===h.Z.AUDIO&&qe}function se(ue,Se){return ue.accessibility?!!Se.accessibility.filter((function(qe){return qe===ue.accessibility}))[0]:!Se.accessibility.length}function te(ue,Se){return!ue.audioChannelConfiguration||!!Se.audioChannelConfiguration.filter((function(qe){return qe===ue.audioChannelConfiguration}))[0]}function re(ue,Se){return!ue.codec||ue.codec===Se.codec}function G(ue){var Se,qe=0,gt=[];return ue.forEach((function(ut){(Se=Math.max.apply(Math,ut.bitrateList.map((function(mt){return mt.bandwidth}))))>qe?(qe=Se,gt=[ut]):Se===qe&&gt.push(ut)})),gt}function Ie(ue){var Se,qe=1/0,gt=[];return ue.forEach((function(ut){var mt=ut.bitrateList.reduce((function(dt,zt){var Ut=Math.max(1,zt.width*zt.height);return dt+zt.bandwidth/Ut}),0);(Se=mt/ut.bitrateList.length)<qe?(qe=Se,gt=[ut]):Se===qe&&gt.push(ut)})),gt}function we(ue){var Se,qe=0,gt=[];return ue.forEach((function(ut){(Se=ut.representationCount)>qe?(qe=Se,gt=[ut]):Se===qe&&gt.push(ut)})),gt}function ke(ue,Se){if(ue===h.Z.TEXT)return Se[0];var qe,gt=z.get().streaming.selectionModeForInitialTrack,ut=Z.getCustomInitialTrackSelectionFunction();if(ut&&typeof ut=="function")qe=ut(Se);else switch(gt){case h.Z.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY:qe=(function(mt){var dt,zt,Ut=(dt=0,zt=[],mt.forEach((function(Ft){isNaN(Ft.selectionPriority)||(Ft.selectionPriority>dt?(dt=Ft.selectionPriority,zt=[Ft]):Ft.selectionPriority===dt&&zt.push(Ft))})),zt);return Ut.length>1&&(Ut=G(Ut)),Ut.length>1&&(Ut=we(Ut)),Ut})(Se);break;case h.Z.TRACK_SELECTION_MODE_HIGHEST_BITRATE:qe=(function(mt){var dt=G(mt);return dt.length>1&&(dt=we(dt)),dt})(Se);break;case h.Z.TRACK_SELECTION_MODE_FIRST_TRACK:qe=Ae(Se);break;case h.Z.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:qe=(function(mt){var dt=Ie(mt);return dt.length>1&&(dt=G(dt)),dt})(Se);break;case h.Z.TRACK_SELECTION_MODE_WIDEST_RANGE:qe=(function(mt){var dt=we(mt);return dt.length>1&&(dt=G(mt)),dt})(Se);break;default:R.warn("Track selection mode ".concat(gt," is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK")),qe=Ae(Se)}return qe.length>0?qe[0]:Se[0]}function Ae(ue){return ue[0]}return L={setInitialMediaSettingsForType:function(ue,Se){var qe=q[ue]||He(ue),gt=fe(ue,Se.id),ut=[];qe||((qe=K.getSavedMediaSettings(ue))&&delete qe.codec,ae(ue,qe)),gt&&gt.length!==0&&(qe&&(ut=me(ut=Array.from(gt),Le,qe),ut=me(ut,ge,qe),ut=me(ut,Fe,qe),ue===h.Z.AUDIO&&q[ue]||(ut=me(ut,F,qe)),ut=me(ut,se,qe),ut=me(ut,te,qe),ut=me(ut,re,qe)),ut.length===0?ce(ke(ue,gt),!0):ut.length>1?ce(ke(ue,ut)):ce(ut[0]))},addTrack:function(ue){if(ue){var Se=ue.type;if((qe=Se)===h.Z.AUDIO||qe===h.Z.VIDEO||qe===h.Z.TEXT||qe===h.Z.IMAGE){var qe,gt,ut=ue.streamInfo.id;P[ut]||(P[ut]={audio:{list:[],storeLastSettings:gt=z.get().streaming.saveLastMediaSettingsForCurrentStreamingSession,current:null},video:{list:[],storeLastSettings:gt,current:null},text:{list:[],storeLastSettings:gt,current:null},image:{list:[],storeLastSettings:gt,current:null}});for(var mt=P[ut][Se].list,dt=0,zt=mt.length;dt<zt;++dt)if(Oe(mt[dt],ue))return;mt.push(ue)}}},getTracksFor:fe,getCurrentTrackFor:Q,isCurrentTrack:function(ue){if(!ue)return!1;var Se=ue.type,qe=ue.streamInfo.id;return P[qe]&&P[qe][Se]&&Oe(P[qe][Se].current,ue)},setTrack:ce,selectInitialTrack:ke,setInitialSettings:ae,getInitialSettings:He,getTracksWithHighestBitrate:G,getTracksWithHighestEfficiency:Ie,getTracksWithWidestRange:we,isTracksEqual:Oe,matchSettings:function(ue,Se){var qe=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{var gt=!1;if(ue.lang){if(ue.lang instanceof RegExp)gt=Se.lang.match(ue.lang);else if(Se.lang!==""){var ut=rl()(ue.lang);ut&&(gt=(0,oh.extendedFilter)(Se.lang,ut).length>0)}}else gt=!0;var mt=ue.index===void 0||ue.index===null||Se.index===ue.index,dt=!ue.viewpoint||ue.viewpoint===Se.viewpoint,zt=!ue.role||!!Se.roles.filter((function(Bt){return Bt===ue.role}))[0],Ut=!ue.accessibility||!!Se.accessibility.filter((function(Bt){return Bt===ue.accessibility}))[0],Ft=!ue.audioChannelConfiguration||!!Se.audioChannelConfiguration.filter((function(Bt){return Bt===ue.audioChannelConfiguration}))[0];return gt&&mt&&dt&&(zt||Se.type===h.Z.AUDIO&&qe)&&Ut&&Ft}catch{return!1}},matchSettingsLang:Le,matchSettingsIndex:ge,matchSettingsViewPoint:Fe,matchSettingsRole:F,matchSettingsAccessibility:se,matchSettingsAudioChannelConfig:te,saveTextSettingsDisabled:function(){K.setSavedMediaSettings(h.Z.TEXT,null)},setConfig:function(ue){ue&&(ue.domStorage&&(K=ue.domStorage),ue.settings&&(z=ue.settings),ue.customParametersModel&&(Z=ue.customParametersModel))},reset:Be},R=(0,C.Z)(le).getInstance().getLogger(L),Be(),L}hp.__dashjs_factory_name="MediaController";var sh=I.Z.getSingletonFactory(hp);I.Z.updateSingletonFactory(hp.__dashjs_factory_name,sh);var i_=sh,Qf=NaN,fm=function L(R,P){(function(z,W){if(!(z instanceof W))throw new TypeError("Cannot call a class as a function")})(this,L),this.data={baseUrls:R||null,selectedIdx:P||Qf},this.children=[]};function pp(){var L,R,P,z,W=this.context,q=vt(W).getInstance();function Z(fe,Q,ce){var ae=K(ce);fe[Q]?q.areEqual(ae,fe[Q].data.baseUrls)||(fe[Q].data.baseUrls=ae,fe[Q].data.selectedIdx=Qf):fe[Q]=new fm(ae)}function K(fe){var Q=P.getBaseURLsFromElement(fe),ce=z.getSynthesizedBaseUrlElements(Q);return ce&&ce.length>0&&(Q=Q.concat(ce)),Q}function le(fe,Q){var ce=Q||R;fe(ce.data),ce.children&&ce.children.forEach((function(ae){return le(fe,ae)}))}function _e(){R=new fm}return L={reset:_e,update:function(fe){(function(Q){(function(){if(!P||!P.hasOwnProperty("getBaseURLsFromElement")||!P.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")})();var ce=K(Q);q.areEqual(ce,R.data.baseUrls)||(R.data.baseUrls=ce,R.data.selectedIdx=Qf),Q&&Q.Period_asArray&&Q.Period_asArray.forEach((function(ae,He){Z(R.children,He,ae),ae.AdaptationSet_asArray&&ae.AdaptationSet_asArray.forEach((function(Oe,Be){Z(R.children[He].children,Be,Oe),Oe.Representation_asArray&&Oe.Representation_asArray.sort(P.getRepresentationSortFunction()).forEach((function(Ke,me){Z(R.children[He].children[Be].children,me,Ke)}))}))}))})(fe)},getForPath:function(fe){var Q=R,ce=[Q.data];return fe&&fe.forEach((function(ae){(Q=Q.children[ae])&&ce.push(Q.data)})),ce.filter((function(ae){return ae.baseUrls.length}))},invalidateSelectedIndexes:function(fe){le((function(Q){isNaN(Q.selectedIdx)||fe===Q.baseUrls[Q.selectedIdx].serviceLocation&&(Q.selectedIdx=Qf)}))},setConfig:function(fe){fe.adapter&&(P=fe.adapter),fe.contentSteeringController&&(z=fe.contentSteeringController)},getBaseUrls:function(fe){return K(fe)}},_e(),L}pp.__dashjs_factory_name="BaseURLTreeModel";var ah=I.Z.getClassFactory(pp);function fc(L){var R=(L=L||{}).blacklistController;return{select:function(P){return P&&(function(W){var q,Z,K=0,le=[],_e=0;if((Z=W.sort((function(fe,Q){var ce=fe.dvbPriority-Q.dvbPriority;return isNaN(ce)?0:ce})).filter((function(fe,Q,ce){return!Q||ce[0].dvbPriority&&fe.dvbPriority&&ce[0].dvbPriority===fe.dvbPriority}))).length)return Z.length>1&&(Z.forEach((function(fe){K+=fe.dvbWeight,le.push(K)})),q=Math.floor(Math.random()*(K-1)),le.every((function(fe,Q){return _e=Q,!(q<fe)}))),Z[_e]})((z=[],P.filter((function(W){return!R.contains(W.serviceLocation)||(W.dvbPriority&&z.push(W.dvbPriority),!1)})).filter((function(W){return!z.length||!W.dvbPriority||z.indexOf(W.dvbPriority)===-1}))));var z}}}fc.__dashjs_factory_name="DVBSelector";var gp=I.Z.getClassFactory(fc);function mp(L){var R=(L=L||{}).blacklistController;return{select:function(P){var z,W=0;return P&&P.some((function(q,Z){return W=Z,!R.contains(q.serviceLocation)}))&&(z=P[W]),z}}}mp.__dashjs_factory_name="BasicSelector";var dm=I.Z.getClassFactory(mp);function lh(){var L,R,P,z=this.context;function W(){for(var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],K=0,le=NaN,_e=function(){var Q=q[K],ce=Z.findIndex((function(ae){return ae.serviceLocation&&ae.serviceLocation===Q}));if(ce!==-1&&!P.contains(Z[ce].serviceLocation))return le=ce,"break";K+=1};K<q.length;){var fe=_e();if(fe==="break")break}return le}return L={selectBaseUrlIndex:function(q){var Z=NaN;if(isNaN(q.selectedIdx)){var K=R.getSteeringDataFromManifest();K&&K.defaultServiceLocationArray.length>0&&(Z=W(K.defaultServiceLocationArray,q.baseUrls))}var le=R.getCurrentSteeringResponseData();return q.baseUrls&&q.baseUrls.length&&le&&le.pathwayPriority&&le.pathwayPriority.length&&(Z=W(le.pathwayPriority,q.baseUrls)),Z},setConfig:function(q){q.blacklistController&&(P=q.blacklistController),q.contentSteeringController&&(R=q.contentSteeringController)}},R=Ot(z).getInstance(),L}lh.__dashjs_factory_name="ContentSteeringSelector";var uh=I.Z.getClassFactory(lh);function yp(){var L,R,P,z,W,q,Z=this.context,K=(0,A.Z)(Z).getInstance(),le=(0,Ce.Z)(Z).getInstance();function _e(){R.reset()}return L={chooseSelector:function(fe){(0,he.PS)(fe,"boolean"),q=fe?z:P},select:function(fe){if(fe){if(le.get().streaming.applyContentSteering){var Q=W.selectBaseUrlIndex(fe);isNaN(Q)||Q===-1||(fe.selectedIdx=Q)}if(!isNaN(fe.selectedIdx))return fe.baseUrls[fe.selectedIdx];var ce=q.select(fe.baseUrls);return ce?(fe.selectedIdx=fe.baseUrls.indexOf(ce),ce):(K.trigger(_.Z.URL_RESOLUTION_FAILED,{error:new ve.Z(oe.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,oe.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(q===P&&_e()))}},reset:_e,setConfig:function(fe){fe.selector&&(q=fe.selector),fe.contentSteeringSelector&&(W=fe.contentSteeringSelector)}},R=us(Z).create({updateEventName:_.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,addBlacklistEventName:_.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),P=dm(Z).create({blacklistController:R}),z=gp(Z).create({blacklistController:R}),(W=uh(Z).create()).setConfig({blacklistController:R}),q=P,L}yp.__dashjs_factory_name="BaseURLSelector";var o_=I.Z.getClassFactory(yp);function ch(){var L,R,P,z,W,q=this.context,Z=(0,A.Z)(q).getInstance(),K=(0,wt.Z)(q).getInstance();function le(fe){P.update(fe),z.chooseSelector(R.getIsDVB(fe)),Z.trigger(v.Z.BASE_URLS_UPDATED,{baseUrls:_e(fe)})}function _e(fe){return P.getBaseUrls(fe)}return L={reset:function(){P.reset(),z.reset()},initialize:function(fe){P.setConfig({adapter:R,contentSteeringController:W}),le(fe)},resolve:function(fe){var Q=P.getForPath(fe).reduce((function(ce,ae){var He=z.select(ae);return He?(K.isRelative(He.url)?ce.url=K.resolve(He.url,ce.url):(ce.url=He.url,ce.serviceLocation=He.serviceLocation),ce.availabilityTimeOffset=He.availabilityTimeOffset,ce.availabilityTimeComplete=He.availabilityTimeComplete,ce.queryParams=He.queryParams,ce):new di}),new di);if(!K.isRelative(Q.url))return Q},setConfig:function(fe){fe.baseURLTreeModel&&(P=fe.baseURLTreeModel),fe.baseURLSelector&&(z=fe.baseURLSelector),fe.adapter&&(R=fe.adapter),fe.contentSteeringController&&(W=fe.contentSteeringController)},getBaseUrls:_e,update:le},P=ah(q).create(),z=o_(q).create(),Z.on(_.Z.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,(function(fe){P.invalidateSelectedIndexes(fe.entry)}),L),L}ch.__dashjs_factory_name="BaseURLController";var vp=I.Z.getClassFactory(ch);function _p(L){return _p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},_p(L)}function fh(L,R){return fh=Object.setPrototypeOf||function(P,z){return P.__proto__=z,P},fh(L,R)}function ca(L,R){return!R||_p(R)!=="object"&&typeof R!="function"?(function(P){if(P===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P})(L):R}function Pu(L){return Pu=Object.setPrototypeOf?Object.getPrototypeOf:function(R){return R.__proto__||Object.getPrototypeOf(R)},Pu(L)}var Al=(function(L){(function(q,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Super expression must either be null or a function");q.prototype=Object.create(Z&&Z.prototype,{constructor:{value:q,writable:!0,configurable:!0}}),Z&&fh(q,Z)})(W,L);var R,P,z=(R=W,P=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}})(),function(){var q,Z=Pu(R);if(P){var K=Pu(this).constructor;q=Reflect.construct(Z,arguments,K)}else q=Z.apply(this,arguments);return ca(this,q)});function W(q,Z){var K;return(function(le,_e){if(!(le instanceof _e))throw new TypeError("Cannot call a class as a function")})(this,W),(K=z.call(this)).url=q||null,K.type=Z||null,K.mediaType=h.Z.STREAM,K.responseType="",K}return W})(O.Z);function bp(L){L=L||{};var R=this.context,P=(0,A.Z)(R).getInstance(),z=No(R).create({errHandler:L.errHandler,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,errors:oe});return{load:function(W,q,Z){var K=function(_e,fe){q.resolved=!0,q.resolvedContent=_e||null,P.trigger(_.Z.XLINK_ELEMENT_LOADED,{element:q,resolveObject:Z,error:_e||fe?null:new ve.Z(oe.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,oe.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+W)})};if(W==="urn:mpeg:dash:resolve-to-zero:2013")K(null,!0);else{var le=new Al(W,Ye.w.XLINK_EXPANSION_TYPE);z.load({request:le,success:function(_e){K(_e)},error:function(){K(null)}})}},reset:function(){z&&(z.abort(),z=null)}}}bp.__dashjs_factory_name="XlinkLoader";var Ep=I.Z.getClassFactory(bp),wp=function(L){(L=L||{}).escapeMode===void 0&&(L.escapeMode=!0),L.attributePrefix===void 0&&(L.attributePrefix="_"),L.arrayAccessForm=L.arrayAccessForm||"none",L.emptyNodeForm=L.emptyNodeForm||"text",L.enableToStringFunc===void 0&&(L.enableToStringFunc=!0),L.arrayAccessFormPaths=L.arrayAccessFormPaths||[],L.skipEmptyTextNodesForObj===void 0&&(L.skipEmptyTextNodesForObj=!0),L.stripWhitespaces===void 0&&(L.stripWhitespaces=!0),L.datetimeAccessFormPaths=L.datetimeAccessFormPaths||[],L.useDoubleQuotes===void 0&&(L.useDoubleQuotes=!1),L.xmlElementsFilter=L.xmlElementsFilter||[],L.jsonPropertiesFilter=L.jsonPropertiesFilter||[],L.keepCData===void 0&&(L.keepCData=!1),L.ignoreRoot===void 0&&(L.ignoreRoot=!1);function R(me){var Le=me.localName;return Le==null&&(Le=me.baseName),Le!=null&&Le!=""||(Le=me.nodeName),Le}function P(me){return typeof me=="string"?me.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):me}function z(me,Le,ge,Fe){for(var F=0;F<me.length;F++){var se=me[F];if(typeof se=="string"){if(se==Fe)break}else if(se instanceof RegExp){if(se.test(Fe))break}else if(typeof se=="function"&&se(Le,ge,Fe))break}return F!=me.length}function W(me,Le,ge){L.arrayAccessForm==="property"&&(me[Le]instanceof Array?me[Le+"_asArray"]=me[Le]:me[Le+"_asArray"]=[me[Le]]),!(me[Le]instanceof Array)&&L.arrayAccessFormPaths.length>0&&z(L.arrayAccessFormPaths,me,Le,ge)&&(me[Le]=[me[Le]])}function q(me){var Le=me.split(/[-T:+Z]/g),ge=new Date(Le[0],Le[1]-1,Le[2]),Fe=Le[5].split(".");if(ge.setHours(Le[3],Le[4],Fe[0]),Fe.length>1&&ge.setMilliseconds(Fe[1]),Le[6]&&Le[7]){var F=60*Le[6]+Number(Le[7]);F=0+((/\d\d-\d\d:\d\d$/.test(me)?"-":"+")=="-"?-1*F:F),ge.setMinutes(ge.getMinutes()-F-ge.getTimezoneOffset())}else me.indexOf("Z",me.length-1)!==-1&&(ge=new Date(Date.UTC(ge.getFullYear(),ge.getMonth(),ge.getDate(),ge.getHours(),ge.getMinutes(),ge.getSeconds(),ge.getMilliseconds())));return ge}function Z(me,Le,ge,Fe){return!(Le==1&&L.xmlElementsFilter.length>0)||z(L.xmlElementsFilter,me,ge,Fe)}function K(me,Le){if(me.nodeType==9){for(var ge=new Object,Fe=me.childNodes,F=0;F<Fe.length;F++)(te=Fe[F]).nodeType==1&&(L.ignoreRoot?ge=K(te):(ge={})[re=R(te)]=K(te));return ge}if(me.nodeType==1){(ge=new Object).__cnt=0;var se=[];for(Fe=me.childNodes,F=0;F<Fe.length;F++){var te,re=R(te=Fe[F]);if(te.nodeType!=8){var G=Le+"."+re;if(Z(ge,te.nodeType,re,G))if(ge.__cnt++,ge[re]==null){var Ie=K(te,G);(re!="#text"||/[^\s]/.test(Ie))&&((we={})[re]=Ie,se.push(we)),ge[re]=Ie,W(ge,re,G)}else{var we;ge[re]!=null&&(ge[re]instanceof Array||(ge[re]=[ge[re]],W(ge,re,G))),Ie=K(te,G),(re!="#text"||/[^\s]/.test(Ie))&&((we={})[re]=Ie,se.push(we)),ge[re][ge[re].length]=Ie}}}ge.__children=se;for(var ke=R(me),Ae=0;Ae<me.attributes.length;Ae++){var ue=me.attributes[Ae];ge.__cnt++;for(var Se=ue.value,qe=0,gt=L.matchers.length;qe<gt;qe++){var ut=L.matchers[qe];ut.test(ue,ke)&&(Se=ut.converter(ue.value))}ge[L.attributePrefix+ue.name]=Se}var mt=(function(dt){return dt.prefix})(me);return mt!=null&&mt!=""&&(ge.__cnt++,ge.__prefix=mt),ge["#text"]!=null&&(ge.__text=ge["#text"],ge.__text instanceof Array&&(ge.__text=ge.__text.join(`
`)),L.stripWhitespaces&&(ge.__text=ge.__text.trim()),delete ge["#text"],L.arrayAccessForm=="property"&&delete ge["#text_asArray"],ge.__text=(function(dt,zt,Ut){if(L.datetimeAccessFormPaths.length>0){var Ft=Ut.split(".#")[0];return z(L.datetimeAccessFormPaths,dt,zt,Ft)?q(dt):dt}return dt})(ge.__text,re,Le+"."+re)),ge["#cdata-section"]!=null&&(ge.__cdata=ge["#cdata-section"],delete ge["#cdata-section"],L.arrayAccessForm=="property"&&delete ge["#cdata-section_asArray"]),ge.__cnt==0&&L.emptyNodeForm=="text"?ge="":ge.__cnt==1&&ge.__text!=null?ge=ge.__text:ge.__cnt!=1||ge.__cdata==null||L.keepCData?ge.__cnt>1&&ge.__text!=null&&L.skipEmptyTextNodesForObj&&(L.stripWhitespaces&&ge.__text==""||ge.__text.trim()=="")&&delete ge.__text:ge=ge.__cdata,delete ge.__cnt,!L.enableToStringFunc||ge.__text==null&&ge.__cdata==null||(ge.toString=function(){return(this.__text!=null?this.__text:"")+(this.__cdata!=null?this.__cdata:"")}),ge}if(me.nodeType==3||me.nodeType==4)return me.nodeValue}function le(me,Le,ge,Fe){var F="<"+(me!=null&&me.__prefix!=null?me.__prefix+":":"")+Le;if(ge!=null)for(var se=0;se<ge.length;se++){var te=ge[se],re=me[te];L.escapeMode&&(re=P(re)),F+=" "+te.substr(L.attributePrefix.length)+"=",L.useDoubleQuotes?F+='"'+re+'"':F+="'"+re+"'"}return F+(Fe?"/>":">")}function _e(me,Le){return"</"+(me.__prefix!=null?me.__prefix+":":"")+Le+">"}function fe(me,Le){return L.arrayAccessForm=="property"&&(Fe="_asArray",(ge=Le.toString()).indexOf(Fe,ge.length-Fe.length)!==-1)||Le.toString().indexOf(L.attributePrefix)==0||Le.toString().indexOf("__")==0||me[Le]instanceof Function;var ge,Fe}function Q(me){var Le=0;if(me instanceof Object)for(var ge in me)fe(me,ge)||Le++;return Le}function ce(me,Le,ge){return L.jsonPropertiesFilter.length==0||ge==""||z(L.jsonPropertiesFilter,me,Le,ge)}function ae(me){var Le=[];if(me instanceof Object)for(var ge in me)ge.toString().indexOf("__")==-1&&ge.toString().indexOf(L.attributePrefix)==0&&Le.push(ge);return Le}function He(me){var Le="";return me instanceof Object?Le+=(function(ge){var Fe="";return ge.__cdata!=null&&(Fe+="<![CDATA["+ge.__cdata+"]]>"),ge.__text!=null&&(L.escapeMode?Fe+=P(ge.__text):Fe+=ge.__text),Fe})(me):me!=null&&(L.escapeMode?Le+=P(me):Le+=me),Le}function Oe(me,Le){return me===""?Le:me+"."+Le}function Be(me,Le,ge,Fe){var F="";if(me.length==0)F+=le(me,Le,ge,!0);else for(var se=0;se<me.length;se++)F+=le(me[se],Le,ae(me[se]),!1),F+=Ke(me[se],Oe(Fe,Le)),F+=_e(me[se],Le);return F}function Ke(me,Le){var ge="";if(Q(me)>0){for(var Fe in me)if(!fe(me,Fe)&&(Le==""||ce(me,Fe,Oe(Le,Fe)))){var F=me[Fe],se=ae(F);F==null||F==null?ge+=le(F,Fe,se,!0):F instanceof Object?F instanceof Array?ge+=Be(F,Fe,se,Le):F instanceof Date?(ge+=le(F,Fe,se,!1),ge+=F.toISOString(),ge+=_e(F,Fe)):Q(F)>0||F.__text!=null||F.__cdata!=null?(ge+=le(F,Fe,se,!1),ge+=Ke(F,Oe(Le,Fe)),ge+=_e(F,Fe)):ge+=le(F,Fe,se,!0):(ge+=le(F,Fe,se,!1),ge+=He(F),ge+=_e(F,Fe))}}return ge+He(me)}this.parseXmlString=function(me){var Le;if(me===void 0)return null;if(window.DOMParser){var ge=new window.DOMParser;try{(Le=ge.parseFromString(me,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(Le=null)}catch{Le=null}}else me.indexOf("<?")==0&&(me=me.substr(me.indexOf("?>")+2)),(Le=new ActiveXObject("Microsoft.XMLDOM")).async="false",Le.loadXML(me);return Le},this.asArray=function(me){return me===void 0||me==null?[]:me instanceof Array?me:[me]},this.toXmlDateTime=function(me){return me instanceof Date?me.toISOString():typeof me=="number"?new Date(me).toISOString():null},this.asDateTime=function(me){return typeof me=="string"?q(me):me},this.xml2json=function(me){return K(me)},this.xml_str2json=function(me){var Le=this.parseXmlString(me);return Le!=null?this.xml2json(Le):null},this.json2xml_str=function(me){return Ke(me,"")},this.json2xml=function(me){var Le=this.json2xml_str(me);return this.parseXmlString(Le)},this.getVersion=function(){return"1.2.0"}},dc="onLoad";function Tp(L){L=L||{};var R,P,z,W,q,Z,K=this.context,le=(0,A.Z)(K).getInstance(),_e=(0,wt.Z)(K).getInstance();function fe(Oe,Be,Ke){var me,Le,ge={};ge.elements=Oe,ge.type=Be,ge.resolveType=Ke,ge.elements.length===0&&ce(ge);for(var Fe=0;Fe<ge.elements.length;Fe++)me=ge.elements[Fe],Le=_e.isHTTPURL(me.url)?me.url:me.originalContent.BaseURL+me.url,Z.load(Le,me,ge)}function Q(Oe){var Be,Ke,me="";if(Be=Oe.element,Ke=Oe.resolveObject,Be.resolvedContent){var Le=0;Be.resolvedContent.indexOf("<?xml")===0&&(Le=Be.resolvedContent.indexOf("?>")+2),me=Be.resolvedContent.substr(0,Le)+"<response>"+Be.resolvedContent.substr(Le)+"</response>",Be.resolvedContent=q.xml_str2json(me)}(function(ge){var Fe;for(Fe=0;Fe<ge.elements.length;Fe++)if(ge.elements[Fe].resolved===!1)return!1;return!0})(Ke)&&ce(Ke)}function ce(Oe){var Be,Ke,me=[];if((function(Le){var ge,Fe,F,se,te,re,G=[];for(se=Le.elements.length-1;se>=0;se--){if(Fe=(ge=Le.elements[se]).type+"_asArray",ge.resolvedContent){if(ge.resolvedContent)for(te=0;te<ge.resolvedContent[Fe].length;te++)F=ge.resolvedContent[Fe][te],G.push(F)}else delete ge.originalContent["xlink:actuate"],delete ge.originalContent["xlink:href"],G.push(ge.originalContent);for(ge.parentElement[Fe].splice(ge.index,1),re=0;re<G.length;re++)ge.parentElement[Fe].splice(ge.index+re,0,G[re]);G=[]}Le.elements.length>0&&z.run(W)})(Oe),Oe.resolveType==="onActuate"&&le.trigger(_.Z.XLINK_READY,{manifest:W}),Oe.resolveType===dc)switch(Oe.type){case p.Z.PERIOD:for(Be=0;Be<W[p.Z.PERIOD+"_asArray"].length;Be++)(Ke=W[p.Z.PERIOD+"_asArray"][Be]).hasOwnProperty(p.Z.ADAPTATION_SET+"_asArray")&&(me=me.concat(ae(Ke[p.Z.ADAPTATION_SET+"_asArray"],Ke,p.Z.ADAPTATION_SET,dc))),Ke.hasOwnProperty(p.Z.EVENT_STREAM+"_asArray")&&(me=me.concat(ae(Ke[p.Z.EVENT_STREAM+"_asArray"],Ke,p.Z.EVENT_STREAM,dc)));fe(me,p.Z.ADAPTATION_SET,dc);break;case p.Z.ADAPTATION_SET:le.trigger(_.Z.XLINK_READY,{manifest:W})}}function ae(Oe,Be,Ke,me){var Le,ge,Fe,F=[];for(ge=Oe.length-1;ge>=0;ge--)(Le=Oe[ge]).hasOwnProperty("xlink:href")&&Le["xlink:href"]==="urn:mpeg:dash:resolve-to-zero:2013"&&Oe.splice(ge,1);for(ge=0;ge<Oe.length;ge++)(Le=Oe[ge]).hasOwnProperty("xlink:href")&&Le.hasOwnProperty("xlink:actuate")&&Le["xlink:actuate"]===me&&(Fe=He(Le["xlink:href"],Be,Ke,ge,me,Le),F.push(Fe));return F}function He(Oe,Be,Ke,me,Le,ge){return{url:Oe,parentElement:Be,type:Ke,index:me,resolveType:Le,originalContent:ge,resolvedContent:null,resolved:!1}}return R={resolveManifestOnLoad:function(Oe){q=new wp({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:P}),(W=Oe).Period_asArray?fe(ae(W.Period_asArray,W,p.Z.PERIOD,dc),p.Z.PERIOD,dc):le.trigger(_.Z.XLINK_READY,{manifest:W})},setMatchers:function(Oe){Oe&&(P=Oe)},setIron:function(Oe){Oe&&(z=Oe)},reset:function(){le.off(_.Z.XLINK_ELEMENT_LOADED,Q,R),Z&&(Z.reset(),Z=null)}},le.on(_.Z.XLINK_ELEMENT_LOADED,Q,R),Z=Ep(K).create({errHandler:L.errHandler,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,settings:L.settings}),R}Tp.__dashjs_factory_name="XlinkController";var hm=I.Z.getClassFactory(Tp);function Il(L){return Il=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},Il(L)}function hc(L){function R(W,q){for(var Z in W)q.hasOwnProperty(Z)||(q[Z]=W[Z])}function P(W,q,Z){for(var K=0,le=W.length;K<le;++K){var _e=W[K];if(q[_e.name])if(Z[_e.name]){if(_e.merge){var fe=q[_e.name],Q=Z[_e.name];Il(fe)==="object"&&Il(Q)==="object"?R(fe,Q):Z[_e.name]=fe+Q}}else Z[_e.name]=q[_e.name]}}function z(W,q){for(var Z=0,K=W.children.length;Z<K;++Z){var le=W.children[Z],_e=q[le.name+"_asArray"];if(_e)for(var fe=0,Q=_e.length;fe<Q;++fe){var ce=_e[fe];P(W.properties,q,ce),z(le,ce)}}}return{run:function(W){if(W===null||Il(W)!=="object")return W;if(W.Period_asArray&&"period"in L)for(var q=L.period,Z=W.Period_asArray,K=0,le=Z.length;K<le;++K){var _e=Z[K];if(z(q,_e),"adaptationset"in L){var fe=_e.AdaptationSet_asArray;if(fe)for(var Q=L.adaptationset,ce=0,ae=fe.length;ce<ae;++ce)z(Q,fe[ce])}}return W}}}hc.__dashjs_factory_name="ObjectIron";var s_=I.Z.getClassFactory(hc);function a_(L,R){for(var P=0;P<R.length;P++){var z=R[P];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(L,z.key,z)}}var Mu=(function(){function L(z,W){(function(q,Z){if(!(q instanceof Z))throw new TypeError("Cannot call a class as a function")})(this,L),this._test=z,this._converter=W}var R,P;return R=L,(P=[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}])&&a_(R.prototype,P),L})();function Xf(L){return Xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},Xf(L)}function li(L,R,P){return R in L?Object.defineProperty(L,R,{value:P,enumerable:!0,configurable:!0,writable:!0}):L[R]=P,L}function Cl(L,R){return Cl=Object.setPrototypeOf||function(P,z){return P.__proto__=z,P},Cl(L,R)}function l_(L,R){return!R||Xf(R)!=="object"&&typeof R!="function"?(function(P){if(P===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P})(L):R}function pc(L){return pc=Object.setPrototypeOf?Object.getPrototypeOf:function(R){return R.__proto__||Object.getPrototypeOf(R)},pc(L)}var u_=(function(L){(function(q,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Super expression must either be null or a function");q.prototype=Object.create(Z&&Z.prototype,{constructor:{value:q,writable:!0,configurable:!0}}),Z&&Cl(q,Z)})(W,L);var R,P,z=(R=W,P=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}})(),function(){var q,Z=pc(R);if(P){var K=pc(this).constructor;q=Reflect.construct(Z,arguments,K)}else q=Z.apply(this,arguments);return l_(this,q)});function W(){return(function(q,Z){if(!(q instanceof Z))throw new TypeError("Cannot call a class as a function")})(this,W),z.call(this,(function(q,Z){var K,le=(li(K={},p.Z.MPD,[p.Z.ID,p.Z.PROFILES]),li(K,p.Z.PERIOD,[p.Z.ID]),li(K,p.Z.BASE_URL,[p.Z.SERVICE_LOCATION,p.Z.BYTE_RANGE]),li(K,p.Z.SEGMENT_BASE,[p.Z.INDEX_RANGE]),li(K,p.Z.INITIALIZATION,[p.Z.RANGE]),li(K,p.Z.REPRESENTATION_INDEX,[p.Z.RANGE]),li(K,p.Z.SEGMENT_LIST,[p.Z.INDEX_RANGE]),li(K,p.Z.BITSTREAM_SWITCHING,[p.Z.RANGE]),li(K,p.Z.SEGMENT_URL,[p.Z.MEDIA_RANGE,p.Z.INDEX_RANGE]),li(K,p.Z.SEGMENT_TEMPLATE,[p.Z.INDEX_RANGE,p.Z.MEDIA,p.Z.INDEX,p.Z.INITIALIZATION_MINUS,p.Z.BITSTREAM_SWITCHING_MINUS]),li(K,p.Z.ASSET_IDENTIFIER,[p.Z.VALUE,p.Z.ID]),li(K,p.Z.EVENT_STREAM,[p.Z.VALUE]),li(K,p.Z.ADAPTATION_SET,[p.Z.PROFILES,p.Z.MIME_TYPE,p.Z.SEGMENT_PROFILES,p.Z.CODECS,p.Z.CONTENT_TYPE]),li(K,p.Z.FRAME_PACKING,[p.Z.VALUE,p.Z.ID]),li(K,p.Z.AUDIO_CHANNEL_CONFIGURATION,[p.Z.VALUE,p.Z.ID]),li(K,p.Z.CONTENT_PROTECTION,[p.Z.VALUE,p.Z.ID]),li(K,p.Z.ESSENTIAL_PROPERTY,[p.Z.VALUE,p.Z.ID]),li(K,p.Z.SUPPLEMENTAL_PROPERTY,[p.Z.VALUE,p.Z.ID]),li(K,p.Z.INBAND_EVENT_STREAM,[p.Z.VALUE,p.Z.ID]),li(K,p.Z.ACCESSIBILITY,[p.Z.VALUE,p.Z.ID]),li(K,p.Z.ROLE,[p.Z.VALUE,p.Z.ID]),li(K,p.Z.RATING,[p.Z.VALUE,p.Z.ID]),li(K,p.Z.VIEWPOINT,[p.Z.VALUE,p.Z.ID]),li(K,p.Z.CONTENT_COMPONENT,[p.Z.CONTENT_TYPE]),li(K,p.Z.REPRESENTATION,[p.Z.ID,p.Z.DEPENDENCY_ID,p.Z.MEDIA_STREAM_STRUCTURE_ID]),li(K,p.Z.SUBSET,[p.Z.ID]),li(K,p.Z.METRICS,[p.Z.METRICS_MINUS]),li(K,p.Z.REPORTING,[p.Z.VALUE,p.Z.ID]),K);if(le.hasOwnProperty(Z)){var _e=le[Z];return _e!==void 0&&_e.indexOf(q.name)>=0}return!1}),(function(q){return String(q)}))}return W})(Mu);function ql(L){return ql=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},ql(L)}function Fs(L,R){return Fs=Object.setPrototypeOf||function(P,z){return P.__proto__=z,P},Fs(L,R)}function dh(L,R){return!R||ql(R)!=="object"&&typeof R!="function"?(function(P){if(P===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P})(L):R}function Jf(L){return Jf=Object.setPrototypeOf?Object.getPrototypeOf:function(R){return R.__proto__||Object.getPrototypeOf(R)},Jf(L)}var Sp=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,pm=(function(L){(function(q,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Super expression must either be null or a function");q.prototype=Object.create(Z&&Z.prototype,{constructor:{value:q,writable:!0,configurable:!0}}),Z&&Fs(q,Z)})(W,L);var R,P,z=(R=W,P=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}})(),function(){var q,Z=Jf(R);if(P){var K=Jf(this).constructor;q=Reflect.construct(Z,arguments,K)}else q=Z.apply(this,arguments);return dh(this,q)});function W(){return(function(q,Z){if(!(q instanceof Z))throw new TypeError("Cannot call a class as a function")})(this,W),z.call(this,(function(q){for(var Z=[p.Z.MIN_BUFFER_TIME,p.Z.MEDIA_PRESENTATION_DURATION,p.Z.MINIMUM_UPDATE_PERIOD,p.Z.TIMESHIFT_BUFFER_DEPTH,p.Z.MAX_SEGMENT_DURATION,p.Z.MAX_SUBSEGMENT_DURATION,p.Z.SUGGESTED_PRESENTATION_DELAY,p.Z.START,h.Z.START_TIME,p.Z.DURATION],K=Z.length,le=0;le<K;le++)if(q.nodeName===Z[le])return Sp.test(q.value);return!1}),(function(q){var Z=Sp.exec(q),K=31536e3*parseFloat(Z[3]||0)+2592e3*parseFloat(Z[5]||0)+86400*parseFloat(Z[7]||0)+3600*parseFloat(Z[9]||0)+60*parseFloat(Z[11]||0)+parseFloat(Z[13]||0);return Z[1]!==void 0&&(K=-K),K}))}return W})(Mu);function Ap(L){return Ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},Ap(L)}function Ip(L,R){return Ip=Object.setPrototypeOf||function(P,z){return P.__proto__=z,P},Ip(L,R)}function cf(L,R){return!R||Ap(R)!=="object"&&typeof R!="function"?(function(P){if(P===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P})(L):R}function Vt(L){return Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(R){return R.__proto__||Object.getPrototypeOf(R)},Vt(L)}var Sn=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,fn=(function(L){(function(q,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Super expression must either be null or a function");q.prototype=Object.create(Z&&Z.prototype,{constructor:{value:q,writable:!0,configurable:!0}}),Z&&Ip(q,Z)})(W,L);var R,P,z=(R=W,P=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}})(),function(){var q,Z=Vt(R);if(P){var K=Vt(this).constructor;q=Reflect.construct(Z,arguments,K)}else q=Z.apply(this,arguments);return cf(this,q)});function W(){return(function(q,Z){if(!(q instanceof Z))throw new TypeError("Cannot call a class as a function")})(this,W),z.call(this,(function(q){return Sn.test(q.value)}),(function(q){var Z,K=Sn.exec(q);if(Z=Date.UTC(parseInt(K[1],10),parseInt(K[2],10)-1,parseInt(K[3],10),parseInt(K[4],10),parseInt(K[5],10),K[6]&&parseInt(K[6],10)||0,K[7]&&1e3*parseFloat(K[7])||0),K[9]&&K[10]){var le=60*parseInt(K[9],10)+parseInt(K[10],10);Z+=(K[8]==="+"?-1:1)*le*60*1e3}return new Date(Z)}))}return W})(Mu);function or(L){return or=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},or(L)}function Br(L,R){return Br=Object.setPrototypeOf||function(P,z){return P.__proto__=z,P},Br(L,R)}function $i(L,R){return!R||or(R)!=="object"&&typeof R!="function"?(function(P){if(P===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P})(L):R}function _o(L){return _o=Object.setPrototypeOf?Object.getPrototypeOf:function(R){return R.__proto__||Object.getPrototypeOf(R)},_o(L)}var Yi=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,ed=(function(L){(function(q,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Super expression must either be null or a function");q.prototype=Object.create(Z&&Z.prototype,{constructor:{value:q,writable:!0,configurable:!0}}),Z&&Br(q,Z)})(W,L);var R,P,z=(R=W,P=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}})(),function(){var q,Z=_o(R);if(P){var K=_o(this).constructor;q=Reflect.construct(Z,arguments,K)}else q=Z.apply(this,arguments);return $i(this,q)});function W(){return(function(q,Z){if(!(q instanceof Z))throw new TypeError("Cannot call a class as a function")})(this,W),z.call(this,(function(q){return Yi.test(q.value)}),(function(q){return parseFloat(q)}))}return W})(Mu);function Cp(L){return Cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},Cp(L)}function Ts(L,R,P){return R in L?Object.defineProperty(L,R,{value:P,enumerable:!0,configurable:!0,writable:!0}):L[R]=P,L}function il(L,R){return il=Object.setPrototypeOf||function(P,z){return P.__proto__=z,P},il(L,R)}function Rp(L,R){return!R||Cp(R)!=="object"&&typeof R!="function"?(function(P){if(P===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P})(L):R}function fa(L){return fa=Object.setPrototypeOf?Object.getPrototypeOf:function(R){return R.__proto__||Object.getPrototypeOf(R)},fa(L)}var ff=(function(L){(function(q,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Super expression must either be null or a function");q.prototype=Object.create(Z&&Z.prototype,{constructor:{value:q,writable:!0,configurable:!0}}),Z&&il(q,Z)})(W,L);var R,P,z=(R=W,P=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}})(),function(){var q,Z=fa(R);if(P){var K=fa(this).constructor;q=Reflect.construct(Z,arguments,K)}else q=Z.apply(this,arguments);return Rp(this,q)});function W(){return(function(q,Z){if(!(q instanceof Z))throw new TypeError("Cannot call a class as a function")})(this,W),z.call(this,(function(q,Z){var K,le=(Ts(K={},p.Z.ADAPTATION_SET,[p.Z.LANG]),Ts(K,p.Z.REPRESENTATION,[p.Z.LANG]),Ts(K,p.Z.CONTENT_COMPONENT,[p.Z.LANG]),Ts(K,p.Z.LABEL,[p.Z.LANG]),Ts(K,p.Z.GROUP_LABEL,[p.Z.LANG]),K);if(le.hasOwnProperty(Z)){var _e=le[Z];return _e!==void 0&&_e.indexOf(q.name)>=0}return!1}),(function(q){return rl()(q)||String(q)}))}return W})(Mu);function td(L,R){for(var P=0;P<R.length;P++){var z=R[P];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(L,z.key,z)}}var Ui=(function(){function L(z){var W;(function(q,Z){if(!(q instanceof Z))throw new TypeError("Cannot call a class as a function")})(this,L),this._name=z,this._merge=(W=z)&&W.length&&W.charAt(0)===W.charAt(0).toUpperCase()}var R,P;return R=L,(P=[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}])&&td(R.prototype,P),L})();function df(L,R){for(var P=0;P<R.length;P++){var z=R[P];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(L,z.key,z)}}var Wl=(function(){function L(z,W,q){var Z=this;(function(K,le){if(!(K instanceof le))throw new TypeError("Cannot call a class as a function")})(this,L),this._name=z||"",this._properties=[],this._children=q||[],Array.isArray(W)&&W.forEach((function(K){Z._properties.push(new Ui(K))}))}var R,P;return R=L,(P=[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}])&&df(R.prototype,P),L})();function gc(L){return gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},gc(L)}function hf(L,R){return hf=Object.setPrototypeOf||function(P,z){return P.__proto__=z,P},hf(L,R)}function gm(L,R){return!R||gc(R)!=="object"&&typeof R!="function"?(function(P){if(P===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P})(L):R}function nd(L){return nd=Object.setPrototypeOf?Object.getPrototypeOf:function(R){return R.__proto__||Object.getPrototypeOf(R)},nd(L)}var rd=(function(L){(function(q,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Super expression must either be null or a function");q.prototype=Object.create(Z&&Z.prototype,{constructor:{value:q,writable:!0,configurable:!0}}),Z&&hf(q,Z)})(W,L);var R,P,z=(R=W,P=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}})(),function(){var q,Z=nd(R);if(P){var K=nd(this).constructor;q=Reflect.construct(Z,arguments,K)}else q=Z.apply(this,arguments);return gm(this,q)});function W(){(function(Z,K){if(!(Z instanceof K))throw new TypeError("Cannot call a class as a function")})(this,W);var q=[p.Z.PROFILES,p.Z.WIDTH,p.Z.HEIGHT,p.Z.SAR,p.Z.FRAMERATE,p.Z.AUDIO_SAMPLING_RATE,p.Z.MIME_TYPE,p.Z.SEGMENT_PROFILES,p.Z.CODECS,p.Z.MAXIMUM_SAP_PERIOD,p.Z.START_WITH_SAP,p.Z.MAX_PLAYOUT_RATE,p.Z.CODING_DEPENDENCY,p.Z.SCAN_TYPE,p.Z.FRAME_PACKING,p.Z.AUDIO_CHANNEL_CONFIGURATION,p.Z.CONTENT_PROTECTION,p.Z.ESSENTIAL_PROPERTY,p.Z.ESSENTIAL_PROPERTY+"_asArray",p.Z.SUPPLEMENTAL_PROPERTY,p.Z.INBAND_EVENT_STREAM];return z.call(this,p.Z.ADAPTATION_SET,q,[new Wl(p.Z.REPRESENTATION,q,[new Wl(p.Z.SUB_REPRESENTATION,q)])])}return W})(Wl);function ol(L){return ol=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},ol(L)}function mc(L,R){return mc=Object.setPrototypeOf||function(P,z){return P.__proto__=z,P},mc(L,R)}function xp(L,R){return!R||ol(R)!=="object"&&typeof R!="function"?(function(P){if(P===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P})(L):R}function Ys(L){return Ys=Object.setPrototypeOf?Object.getPrototypeOf:function(R){return R.__proto__||Object.getPrototypeOf(R)},Ys(L)}var hh=(function(L){(function(q,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Super expression must either be null or a function");q.prototype=Object.create(Z&&Z.prototype,{constructor:{value:q,writable:!0,configurable:!0}}),Z&&mc(q,Z)})(W,L);var R,P,z=(R=W,P=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}})(),function(){var q,Z=Ys(R);if(P){var K=Ys(this).constructor;q=Reflect.construct(Z,arguments,K)}else q=Z.apply(this,arguments);return xp(this,q)});function W(){(function(Z,K){if(!(Z instanceof K))throw new TypeError("Cannot call a class as a function")})(this,W);var q=[p.Z.SEGMENT_BASE,p.Z.SEGMENT_TEMPLATE,p.Z.SEGMENT_LIST];return z.call(this,p.Z.PERIOD,q,[new Wl(p.Z.ADAPTATION_SET,q,[new Wl(p.Z.REPRESENTATION,q)])])}return W})(Wl);function id(L){L=L||{};var R,P,z,W,q,Z=this.context,K=L.debug;return R={parse:function(le){var _e,fe=window.performance.now();if(!(_e=W.xml_str2json(le)))throw new Error("parsing the manifest failed");var Q=window.performance.now();_e.Patch?((_e=_e.Patch).add_asArray&&_e.add_asArray.forEach((function(ae){return q.run(ae)})),_e.replace_asArray&&_e.replace_asArray.forEach((function(ae){return q.run(ae)}))):(_e=_e.MPD,q.run(_e));var ce=window.performance.now();return P.info("Parsing complete: ( xml2json: "+(Q-fe).toPrecision(3)+"ms, objectiron: "+(ce-Q).toPrecision(3)+"ms, total: "+((ce-fe)/1e3).toPrecision(3)+"s)"),_e.protocol="DASH",_e},getMatchers:function(){return z},getIron:function(){return q}},P=K.getLogger(R),z=[new pm,new fn,new ed,new ff,new u_],W=new wp({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!1,matchers:z}),q=s_(Z).create({adaptationset:new rd,period:new hh}),R}id.__dashjs_factory_name="DashParser";var ph=I.Z.getClassFactory(id);function Np(L){L=L||{};var R,P,z,W,q,Z=this.context,K=L.debug,le=L.settings,_e=(0,A.Z)(Z).getInstance(),fe=(0,wt.Z)(Z).getInstance(),Q=L.mssHandler,ce=L.errHandler;function ae(Oe){_e.trigger(_.Z.INTERNAL_MANIFEST_LOADED,{manifest:Oe.manifest})}function He(Oe){var Be=null;return Oe.indexOf("SmoothStreamingMedia")>-1?(Q&&(Be=Q.createMssParser(),Q.createMssFragmentProcessor(),Q.registerEvents()),Be):Oe.indexOf("MPD")>-1||Oe.indexOf("Patch")>-1?ph(Z).create({debug:K}):Be}return R={load:function(Oe){var Be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,Ke=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,me=new Date,Le=new Al(Oe,Ye.w.MPD_TYPE);Be&&(Le.serviceLocation=Be),Ke&&(Le.queryParams=Ke),Le.requestStartDate||(Le.requestStartDate=me),_e.trigger(_.Z.MANIFEST_LOADING_STARTED,{request:Le}),z.load({request:Le,success:function(ge,Fe,F){var se,te,re;if(W)if(F&&F!==Oe?(te=fe.parseBaseUrl(F),se=F):(fe.isRelative(Oe)&&(Oe=fe.resolve(Oe,window.location.href)),te=fe.parseBaseUrl(Oe)),Fe!="No Content")if(q===null&&(q=He(ge)),q!==null){W.setMatchers(q.getMatchers()),W.setIron(q.getIron());try{re=q.parse(ge)}catch{return void _e.trigger(_.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ve.Z(oe.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,oe.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(Oe))})}if(re){if(re.url=se||Oe,re.originalUrl||(re.originalUrl=re.url),le&&le.get().streaming.enableManifestDurationMismatchFix&&re.mediaPresentationDuration&&re.Period_asArray.length>1){var G=re.Period_asArray.reduce((function(Ie,we){return Ie+we.duration}),0);!isNaN(G)&&re.mediaPresentationDuration>G&&(P.warn("Media presentation duration greater than duration of all periods. Setting duration to total period duration"),re.mediaPresentationDuration=G)}re.baseUri=te,re.loadedTime=new Date,W.resolveManifestOnLoad(re),_e.trigger(_.Z.ORIGINAL_MANIFEST_LOADED,{originalManifest:ge})}else _e.trigger(_.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ve.Z(oe.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,oe.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(Oe))})}else _e.trigger(_.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ve.Z(oe.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,oe.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(Oe))});else _e.trigger(_.Z.INTERNAL_MANIFEST_LOADED,{manifest:null})},error:function(ge,Fe,F){_e.trigger(_.Z.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new ve.Z(oe.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,oe.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+"".concat(Oe,", ").concat(F))})}})},reset:function(){_e.off(_.Z.XLINK_READY,ae,R),Q&&Q.reset(),W&&(W.reset(),W=null),z&&(z.abort(),z=null)}},P=K.getLogger(R),_e.on(_.Z.XLINK_READY,ae,R),z=No(Z).create({errHandler:L.errHandler,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,urlUtils:fe,constants:h.Z,dashConstants:p.Z,errors:oe,requestTimeout:L.settings.get().streaming.manifestRequestTimeout}),W=hm(Z).create({errHandler:ce,dashMetrics:L.dashMetrics,mediaPlayerModel:L.mediaPlayerModel,requestModifier:L.requestModifier,settings:L.settings}),q=null,R}Np.__dashjs_factory_name="ManifestLoader";var Kl=I.Z.getClassFactory(Np);function ku(){var L=this.context,R=(0,A.Z)(L).getInstance();return{error:function(P){R.trigger(_.Z.ERROR,{error:P})}}}ku.__dashjs_factory_name="ErrorHandler";var od=I.Z.getSingletonFactory(ku),Op=f(1715);function so(){var L,R,P,z,W,q,Z=this.context,K=(0,A.Z)(Z).getInstance();function le(_e,fe){if(!fe||!fe.Period_asArray||fe.Period_asArray.length===0)return Promise.resolve();var Q=[];return fe.Period_asArray.forEach((function(ce){Q.push((function(ae,He){return new Promise((function(Oe){if(ae&&ae.AdaptationSet_asArray&&ae.AdaptationSet_asArray.length!==0){var Be=[];ae.AdaptationSet_asArray.forEach((function(Ke){R.getIsTypeOf(Ke,He)&&Be.push((function(me,Le){return new Promise((function(ge){if(me.Representation_asArray&&me.Representation_asArray.length!==0){var Fe=[],F=[];me.Representation_asArray.forEach((function(se,te){var re=R.getCodec(me,te,!1),G=(function(Ie,we,ke){switch(Ie){case h.Z.VIDEO:return(function(Ae,ue){return{codec:ue,width:Ae.width||null,height:Ae.height||null,framerate:Ae.frameRate||null,bitrate:Ae.bandwidth||null}})(we,ke);case h.Z.AUDIO:return(function(Ae,ue){var Se=Ae.audioSamplingRate||null;return{codec:ue,bitrate:Ae.bandwidth||null,samplerate:Se}})(we,ke);default:return null}})(Le,se,re);F.push(G),Fe.push(P.supportsCodec(G,Le))})),Promise.all(Fe).then((function(se){me.Representation_asArray=me.Representation_asArray.filter((function(te,re){return se[re]||q.debug("[Stream] Codec ".concat(F[re].codec," not supported ")),se[re]})),ge()})).catch((function(){ge()}))}else ge()}))})(Ke,He))})),Promise.all(Be).then((function(){ae.AdaptationSet_asArray=ae.AdaptationSet_asArray.filter((function(Ke){var me=Ke.Representation_asArray&&Ke.Representation_asArray.length>0;return me||(K.trigger(_.Z.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:Ke}),q.warn("AdaptationSet has been removed because of no supported Representation")),me})),Oe()})).catch((function(){Oe()}))}else Oe()}))})(ce,_e))})),Promise.all(Q)}return L={setConfig:function(_e){_e&&(_e.adapter&&(R=_e.adapter),_e.capabilities&&(P=_e.capabilities),_e.settings&&(z=_e.settings),_e.customParametersModel&&(W=_e.customParametersModel))},filterUnsupportedFeatures:function(_e){return new Promise((function(fe){var Q=[];Q.push(le(h.Z.VIDEO,_e)),Q.push(le(h.Z.AUDIO,_e)),Promise.all(Q).then((function(){z.get().streaming.capabilities.filterUnsupportedEssentialProperties&&(function(ce){ce&&ce.Period_asArray&&ce.Period_asArray.length!==0&&ce.Period_asArray.forEach((function(ae){ae.AdaptationSet_asArray=ae.AdaptationSet_asArray.filter((function(He){return!He.Representation_asArray||He.Representation_asArray.length===0||(He.Representation_asArray=He.Representation_asArray.filter((function(Oe){var Be=R.getEssentialPropertiesForRepresentation(Oe);if(Be&&Be.length>0)for(var Ke=0;Ke<Be.length;){if(!P.supportsEssentialProperty(Be[Ke]))return q.debug("[Stream] EssentialProperty not supported: "+Be[Ke].schemeIdUri),!1;Ke+=1}return!0})),He.Representation_asArray&&He.Representation_asArray.length>0)}))}))})(_e),(function(ce){var ae=W.getCustomCapabilitiesFilters();ae&&ae.length!==0&&ce&&ce.Period_asArray&&ce.Period_asArray.length!==0&&ce.Period_asArray.forEach((function(He){He.AdaptationSet_asArray=He.AdaptationSet_asArray.filter((function(Oe){return!Oe.Representation_asArray||Oe.Representation_asArray.length===0||(Oe.Representation_asArray=Oe.Representation_asArray.filter((function(Be){return!ae.some((function(Ke){return!Ke(Be)}))})),Oe.Representation_asArray&&Oe.Representation_asArray.length>0)}))}))})(_e),fe()})).catch((function(){fe()}))}))}},q=(0,C.Z)(Z).getInstance().getLogger(L),L}so.__dashjs_factory_name="CapabilitiesFilter";var Lp=I.Z.getSingletonFactory(so),yc=function L(){(function(R,P){if(!(R instanceof P))throw new TypeError("Cannot call a class as a function")})(this,L),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null};function Yl(){var L;return{initialize:function(R){if(L=new yc,!R)return null;var P=R.indexOf("#");if(P!==-1)for(var z=R.substr(P+1).split("&"),W=0,q=z.length;W<q;++W){var Z=z[W],K=Z.indexOf("=");if(K!==-1){var le=Z.substring(0,K);L.hasOwnProperty(le)&&(L[le]=Z.substr(K+1))}}},getURIFragmentData:function(){return L}}}Yl.__dashjs_factory_name="URIFragmentModel";var gh=I.Z.getSingletonFactory(Yl);function mh(){var L,R=this.context,P=(0,A.Z)(R).getInstance();return{getValue:function(){return L},setValue:function(z){L=z,z&&P.trigger(_.Z.MANIFEST_LOADED,{data:z})}}}mh.__dashjs_factory_name="ManifestModel";var pf=I.Z.getSingletonFactory(mh),gf=-.5;function vc(){var L,R,P,z,W=this.context,q=(0,Ce.Z)(W).getInstance();function Z(_e,fe){return isNaN(_e)?0:_e>0?(fe&&R.warn("Supplied minimum playback rate is a positive value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):_e<gf?(fe&&R.warn("Supplied minimum playback rate is out of range and will be limited to ".concat(gf,": ").concat(-50,"% playback speed.")),gf):_e}function K(_e,fe){return isNaN(_e)?0:_e<0?(fe&&R.warn("Supplied maximum playback rate is a negative value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):_e>1?(fe&&R.warn("Supplied maximum playback rate is out of range and will be limited to ".concat(1,": ").concat(200,"% playback speed.")),1):_e}function le(){var _e=q.get().streaming.buffer.stableBufferTime>0?q.get().streaming.buffer.stableBufferTime:q.get().streaming.buffer.fastSwitchEnabled?20:12,fe=P.getLiveDelay();return!isNaN(fe)&&fe>0?Math.min(_e,fe):_e}return L={getCatchupMaxDrift:function(){if(!isNaN(q.get().streaming.liveCatchup.maxDrift)&&q.get().streaming.liveCatchup.maxDrift>0)return q.get().streaming.liveCatchup.maxDrift;var _e=z.getServiceDescriptionSettings();return _e&&_e.liveCatchup&&!isNaN(_e.liveCatchup.maxDrift)&&_e.liveCatchup.maxDrift>0?_e.liveCatchup.maxDrift:12},getCatchupModeEnabled:function(){return q.get().streaming.liveCatchup.enabled!==null?q.get().streaming.liveCatchup.enabled:P.getInitialCatchupModeActivated()},getStableBufferTime:le,getInitialBufferLevel:function(){var _e=q.get().streaming.buffer.initialBufferLevel;return isNaN(_e)||_e<0?0:Math.min(le(),_e)},getRetryAttemptsForType:function(_e){var fe=isNaN(q.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:q.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return P.getLowLatencyModeEnabled()?q.get().streaming.retryAttempts[_e]*fe:q.get().streaming.retryAttempts[_e]},getRetryIntervalsForType:function(_e){var fe=isNaN(q.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:q.get().streaming.retryIntervals.lowLatencyReductionFactor;return P.getLowLatencyModeEnabled()?q.get().streaming.retryIntervals[_e]/fe:q.get().streaming.retryIntervals[_e]},getCatchupPlaybackRates:function(_e){var fe=q.get().streaming.liveCatchup.playbackRate;if(!isNaN(fe.min)||!isNaN(fe.max))return{min:Z(fe.min,_e),max:K(fe.max,_e)};var Q=z.getServiceDescriptionSettings();if(Q&&Q.liveCatchup&&(!isNaN(Q.liveCatchup.playbackRate.min)||!isNaN(Q.liveCatchup.playbackRate.max))){var ce=Q.liveCatchup.playbackRate;return{min:Z(ce.min,_e),max:K(ce.max,_e)}}return{min:-.5,max:.5}},getAbrBitrateParameter:function(_e,fe){try{var Q=q.get().streaming.abr[_e][fe];if(!isNaN(Q)&&Q!==-1)return Q;var ce=z.getServiceDescriptionSettings();return ce&&ce[_e]&&!isNaN(ce[_e][fe])?ce[_e][fe]:-1}catch{return-1}},setConfig:function(_e){_e.playbackController&&(P=_e.playbackController),_e.serviceDescriptionController&&(z=_e.serviceDescriptionController)},reset:function(){}},R=(0,C.Z)(W).getInstance().getLogger(L),L}vc.__dashjs_factory_name="MediaPlayerModel";var Bo=I.Z.getSingletonFactory(vc),Ss=f(1767);function mm(L){var R=(L=L||{}).abrController,P=L.switchHistory,z=L.droppedFramesHistory,W=L.currentRequest,q=L.useBufferOccupancyABR,Z=L.useL2AABR,K=L.useLoLPABR,le=L.streamProcessor?L.streamProcessor.getScheduleController():null,_e=L.streamProcessor?L.streamProcessor.getRepresentationInfo():null,fe=L.videoModel?L.videoModel:null;function Q(){return _e?_e.mediaInfo:null}return{getMediaType:function(){var ce=Q();return ce?ce.type:null},getMediaInfo:Q,getDroppedFramesHistory:function(){return z},getCurrentRequest:function(){return W},getSwitchHistory:function(){return P},getStreamInfo:function(){var ce=Q();return ce?ce.streamInfo:null},getScheduleController:function(){return le},getAbrController:function(){return R},getRepresentationInfo:function(){return _e},useBufferOccupancyABR:function(){return q},useL2AABR:function(){return Z},useLoLPABR:function(){return K},getVideoModel:function(){return fe}}}mm.__dashjs_factory_name="RulesContext";var Dp=I.Z.getClassFactory(mm),Fu=f(2068);function sd(){var L=[],R=[];return{push:function(P){P.newValue===Fu.Z.NO_CHANGE&&(P.newValue=P.oldValue),L[P.oldValue]||(L[P.oldValue]={noDrops:0,drops:0,dropSize:0});var z=P.newValue-P.oldValue,W=z<0?1:0,q=W?-z:0,Z=W?0:1;if(L[P.oldValue].drops+=W,L[P.oldValue].dropSize+=q,L[P.oldValue].noDrops+=Z,R.push({idx:P.oldValue,noDrop:Z,drop:W,dropSize:q}),R.length>8){var K=R.shift();L[K.idx].drops-=K.drop,L[K.idx].dropSize-=K.dropSize,L[K.idx].noDrops-=K.noDrop}},getSwitchRequests:function(){return L},reset:function(){L=[],R=[]}}}sd.__dashjs_factory_name="SwitchRequestHistory";var ad=I.Z.getClassFactory(sd);function $u(){var L={},R={},P={};return{push:function(z,W,q){if(W){L[z]||(L[z]=[],R[z]=0,P[z]=0);var Z=q&&q.droppedVideoFrames?q.droppedVideoFrames:0,K=q&&q.totalVideoFrames?q.totalVideoFrames:0,le=Z-R[z];R[z]=Z;var _e=K-P[z];P[z]=K;var fe=L[z];isNaN(W)||(fe[W]?(fe[W].droppedVideoFrames+=le,fe[W].totalVideoFrames+=_e):fe[W]={droppedVideoFrames:le,totalVideoFrames:_e})}},getFrameHistory:function(z){return L[z]},clearForStream:function(z){try{delete L[z],delete R[z],delete P[z]}catch{}},reset:function(){L={},R={},P={}}}}$u.__dashjs_factory_name="DroppedFramesHistory";var ld=I.Z.getClassFactory($u);function Ql(L){var R,P,z,W,q,Z=this.context,K=(L=L||{}).settings,le=(0,A.Z)(Z).getInstance();function _e(Oe,Be,Ke,me){var Le=Math.pow(.5,Ke/me.fast);Oe.fastEstimate=(1-Le)*Be+Le*Oe.fastEstimate;var ge=Math.pow(.5,Ke/me.slow);Oe.slowEstimate=(1-ge)*Be+ge*Oe.slowEstimate,Oe.totalWeight+=Ke}function fe(Oe,Be,Ke){return K.get().streaming.abr.movingAverageMethod!==h.Z.MOVING_AVERAGE_SLIDING_WINDOW?(function(me,Le){var ge=me?q.throughputHalfLife:q.latencyHalfLife,Fe=me?z[Le]:W[Le];if(!Fe||Fe.totalWeight<=0)return NaN;var F=Fe.fastEstimate/(1-Math.pow(.5,Fe.totalWeight/ge.fast)),se=Fe.slowEstimate/(1-Math.pow(.5,Fe.totalWeight/ge.slow));return me?Math.min(F,se):Math.max(F,se)})(Oe,Be):(function(me,Le,ge){var Fe=(function(se,te,re){var G,Ie;if(se?(G=R[te],Ie=re?3:4):(G=P[te],Ie=4),G){if(Ie>=G.length)Ie=G.length;else if(se)for(var we=1;we<Ie;++we){var ke=G[G.length-we]/G[G.length-we-1];if((ke>=1.3||ke<=.7692307692307692)&&(Ie+=1)===G.length)break}}else Ie=0;return Ie})(me,Le,ge),F=(me?R:P)[Le];return Fe!==0&&F&&F.length!==0?(F=F.slice(-Fe)).reduce((function(se,te){return se+te}))/F.length:NaN})(Oe,Be,Ke)}function Q(Oe,Be){return fe(!0,Oe,Be)}function ce(Oe){R[Oe]=R[Oe]||[],P[Oe]=P[Oe]||[],z[Oe]=z[Oe]||{fastEstimate:0,slowEstimate:0,totalWeight:0},W[Oe]=W[Oe]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function ae(){R={},P={},z={},W={}}var He={push:function(Oe,Be,Ke){if(Be.trace&&Be.trace.length){var me,Le=Be.tresponse.getTime()-Be.trequest.getTime()||1,ge=Be._tfinish.getTime()-Be.tresponse.getTime()||1,Fe=Be.trace.reduce((function(re,G){return re+G.b[0]}),0),F=0;if((me=Be._fileLoaderType&&Be._fileLoaderType===h.Z.FILE_LOADER_TYPES.FETCH?Be.trace.reduce((function(re,G){return re+G.d}),0):Ke?ge:Le+ge)!==0&&(F=Math.round(8*Fe/me)),Be.cmsd){var se=Be.cmsd.dynamic&&Be.cmsd.dynamic.etp?Be.cmsd.dynamic.etp:null;if(se){var te=K.get().streaming.cmsd.abr.etpWeightRatio;te>0&&te<=1&&(F=F*(1-te)+se*te)}}if(ce(Oe),(function(re,G,Ie){return re===h.Z.VIDEO?Ie<K.get().streaming.cacheLoadThresholds[h.Z.VIDEO]:re===h.Z.AUDIO?Ie<K.get().streaming.cacheLoadThresholds[h.Z.AUDIO]:void 0})(Oe,0,ge)){if(R[Oe].length>0&&!R[Oe].hasCachedEntries)return;R[Oe].hasCachedEntries=!0}else R[Oe]&&R[Oe].hasCachedEntries&&(function(re){delete R[re],delete P[re],delete z[re],delete W[re],ce(re)})(Oe);R[Oe].push(F),le.trigger(v.Z.THROUGHPUT_MEASUREMENT_STORED,{throughput:F,mediaType:Oe,httpRequest:Be}),R[Oe].length>20&&R[Oe].shift(),P[Oe].push(Le),P[Oe].length>20&&P[Oe].shift(),_e(z[Oe],F,.001*ge,q.throughputHalfLife),_e(W[Oe],Le,1,q.latencyHalfLife)}},getAverageThroughput:Q,getSafeAverageThroughput:function(Oe,Be){var Ke=Q(Oe,Be);return isNaN(Ke)||(Ke*=K.get().streaming.abr.bandwidthSafetyFactor),Ke},getAverageLatency:function(Oe){return fe(!1,Oe)},reset:ae};return q={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},ae(),He}Ql.__dashjs_factory_name="ThroughputHistory";var ud=I.Z.getClassFactory(Ql);function Uu(){var L,R,P,z,W,q,Z,K,le,_e,fe,Q,ce,ae,He,Oe,Be,Ke,me,Le,ge,Fe,F,se,te,re,G,Ie=this.context,we=(0,C.Z)(Ie).getInstance(),ke=(0,A.Z)(Ie).getInstance();function Ae(){W={},q={},K={},Z={},Le={},F={},se={},te={},_e===void 0&&(_e=!1),ge&&ge.reset(),me=void 0,ge=void 0,Fe=void 0,clearTimeout(le),le=null}function ue(lt){var bt=lt.request.mediaType,tn=lt.streamId;if(bt&&tn&&Z[tn]&&G.get().streaming.abr.autoSwitchBitrate[bt]){var Lt=Z[tn][bt];if(Lt){var an=Dp(Ie).create({abrController:L,streamProcessor:Lt,currentRequest:lt.request,useBufferOccupancyABR:F[bt],useL2AABR:se[bt],useLoLPABR:te[bt],videoModel:ae}),ln=P.shouldAbandonFragment(an,tn);ln.quality>Fu.Z.NO_CHANGE&&Lt.getFragmentModel().getRequests({state:X.FRAGMENT_MODEL_LOADING,index:lt.request.index})[0]&&(K[tn][bt].state=E.Z.ABANDON_LOAD,Le[tn][bt].reset(),Le[tn][bt].push({oldValue:mt(bt,tn),newValue:ln.quality,confidence:1,reason:ln.reason}),dt(bt,z.getActiveStreamInfo(),ln.quality,ln.reason),clearTimeout(le),le=setTimeout((function(){K[tn][bt].state=E.Z.ALLOW_LOAD,le=null}),G.get().streaming.abandonLoadTimeout))}}}function Se(lt){lt.mediaType===h.Z.VIDEO&&(me!==void 0&&ge.push(lt.streamId,me,ae.getPlaybackQuality()),me=lt.newQuality)}function qe(lt){var bt,tn;lt.metric!==E.Z.HTTP_REQUEST||!lt.value||lt.value.type!==Ye.w.MEDIA_SEGMENT_TYPE||lt.mediaType!==h.Z.AUDIO&&lt.mediaType!==h.Z.VIDEO||Fe.push(lt.mediaType,lt.value,G.get().streaming.abr.useDeadTimeLatency),lt.metric!==E.Z.BUFFER_LEVEL||lt.mediaType!==h.Z.AUDIO&&lt.mediaType!==h.Z.VIDEO||(bt=lt.mediaType,tn=.001*lt.value.level,G.get().streaming.abr.ABRStrategy===h.Z.ABR_STRATEGY_DYNAMIC&&(function(Lt,an){try{var ln=He.getStableBufferTime(),Xt=ln,Vn=.5*ln,Mn=F[Lt],gr=an>(Mn?Vn:Xt);F[Lt]=gr,gr!==Mn&&(gr?R.info("["+Lt+"] switching from throughput to buffer occupancy ABR rule (buffer: "+an.toFixed(3)+")."):R.info("["+Lt+"] switching from buffer occupancy to throughput ABR rule (buffer: "+an.toFixed(3)+")."))}catch(vr){R.error(vr)}})(bt,tn))}function gt(lt,bt){try{var tn;return W[bt]=W[bt]||{},W[bt].hasOwnProperty(lt)||(W[bt][lt]=0),tn=(function(Lt,an){var ln=W[an][Lt],Xt=ln;if(!Z[an]||!Z[an][Lt])return Xt;var Vn=ut(Lt,an);Vn!==void 0&&(Xt=Math.max(ln,Vn));var Mn=(function(gr,vr){try{var Ct=He.getAbrBitrateParameter("maxBitrate",gr);return Ct>-1?Ft(Z[vr][gr].getMediaInfo(),Ct,vr):void 0}catch{return}})(Lt,an);return Mn!==void 0&&(Xt=Math.min(Xt,Mn)),Xt})(lt,bt),tn=(function(Lt,an,ln){var Xt=W[ln][an],Vn=G.get().streaming.abr.maxRepresentationRatio[an];return isNaN(Vn)||Vn>=1||Vn<0?Lt:Math.min(Lt,Math.round(Xt*Vn))})(tn,lt,bt),tn=(function(Lt,an,ln){if(an!==h.Z.VIDEO||!G.get().streaming.abr.limitBitrateByPortal||!Z[ln]||!Z[ln][an])return Lt;_e||Nn();var Xt=Z[ln][an].getStreamInfo(),Vn=ce.getAdaptationForType(Xt.index,an,Xt).Representation_asArray,Mn=Lt;if(fe>0&&Q>0){for(;Mn>0&&Vn[Mn]&&fe<Vn[Mn].width&&fe-Vn[Mn-1].width<Vn[Mn].width-fe;)Mn-=1;for(;Mn<Vn.length-1&&Vn[Mn].width===Vn[Mn+1].width;)Mn+=1}return Mn})(tn,lt,bt),G.get().streaming.cmsd.enabled&&G.get().streaming.cmsd.abr.applyMb&&(tn=(function(Lt,an,ln){if(an!=="video")return Lt;var Xt=Be.getMaxBitrate(an);if(Xt<0)return Lt;var Vn=Ut(ln,"audio",mt("audio",ln));Xt-=Vn?Vn.bitrate/1e3:0;var Mn=Ft(Z[ln][an].getMediaInfo(),Xt,ln);return R.debug("Stream ID: "+ln+" ["+an+"] Apply max bit rate from CMSD: "+Xt),Math.min(Lt,Mn)})(tn,lt,bt)),tn}catch{return}}function ut(lt,bt){try{return(function(tn,Lt){try{var an=He.getAbrBitrateParameter("minBitrate",tn);if(an>-1){var ln=Z[Lt][tn].getMediaInfo(),Xt=Bt(ln),Vn=Ft(ln,an,Lt);return Xt[Vn]&&Vn<Xt.length-1&&Xt[Vn].bitrate<1e3*an&&Vn++,Vn}return}catch{return}})(lt,bt)}catch{return}}function mt(lt){var bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;try{return bt||(bt=z.getActiveStreamInfo().id),lt&&Z[bt]&&Z[bt][lt]&&bt?(q[bt]=q[bt]||{},q[bt].hasOwnProperty(lt)||(q[bt][lt]=0),q[bt][lt]):0}catch{return 0}}function dt(lt,bt,tn){var Lt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(bt&&bt.id&&lt){var an=bt.id,ln=mt(lt,an);(0,he.SE)(tn);var Xt=gt(lt,an);tn!==ln&&tn>=0&&tn<=Xt&&zt(lt,ln,tn,Xt,Lt,an)}}function zt(lt,bt,tn,Lt,an,ln){if(lt&&Z[ln]&&Z[ln][lt]){var Xt=Z[ln][lt].getStreamInfo(),Vn=Xt&&Xt.manifestInfo&&Xt.manifestInfo.isDynamic,Mn=re.getCurrentBufferLevel(lt);R.info("Stream ID: "+ln+" ["+lt+"] switch from "+bt+" to "+tn+"/"+Lt+" (buffer: "+Mn+") "+(an?JSON.stringify(an):".")),q[ln]=q[ln]||{},q[ln][lt]=tn;var gr=Ut(ln,lt,tn);ke.trigger(_.Z.QUALITY_CHANGE_REQUESTED,{oldQuality:bt,newQuality:tn,reason:an,streamInfo:Xt,bitrateInfo:gr,maxIdx:Lt,mediaType:lt},{streamId:Xt.id,mediaType:lt});var vr=Fe.getAverageThroughput(lt,Vn);isNaN(vr)||Ke.setSavedBitrateSettings(lt,vr)}}function Ut(lt,bt,tn){if(bt&&Z&&Z[lt]&&Z[lt][bt]){var Lt=Bt(Z[lt][bt].getMediaInfo());return Lt[tn]?Lt[tn]:null}return null}function Ft(lt,bt,tn){var Lt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,an=lt&&lt.type?Z[tn][lt.type].getRepresentationInfo():null;if(G.get().streaming.abr.useDeadTimeLatency&&Lt&&an&&an.fragmentDuration){Lt/=1e3;var ln=an.fragmentDuration;if(Lt>ln)return 0;var Xt=Lt/ln;bt*=1-Xt}for(var Vn=Bt(lt),Mn=Vn.length-1;Mn>=0;Mn--){var gr=Vn[Mn];if(1e3*bt>=gr.bitrate)return Mn}return 0}function Bt(lt){var bt=[];if(!lt||!lt.bitrateList)return bt;for(var tn,Lt=lt.bitrateList,an=lt.type,ln=0,Xt=Lt.length;ln<Xt;ln++)(tn=new la).mediaType=an,tn.qualityIndex=ln,tn.bitrate=Lt[ln].bandwidth,tn.width=Lt[ln].width,tn.height=Lt[ln].height,tn.scanType=Lt[ln].scanType,bt.push(tn);return bt}function Nn(){if(ae){var lt=G.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;fe=ae.getClientWidth()*lt,Q=ae.getClientHeight()*lt}}return L={initialize:function(){ge=ld(Ie).create(),Fe=ud(Ie).create({settings:G}),(P=(0,Ss.Z)(Ie).create({dashMetrics:re,customParametersModel:Oe,mediaPlayerModel:He,settings:G})).initialize(),ke.on(v.Z.QUALITY_CHANGE_RENDERED,Se,L),ke.on(v.Z.METRIC_ADDED,qe,L),ke.on(_.Z.LOADING_PROGRESS,ue,L)},isPlayingAtTopQuality:function(lt){var bt=lt?lt.id:null,tn=mt(h.Z.AUDIO,bt),Lt=mt(h.Z.VIDEO,bt);return tn===gt(h.Z.AUDIO,bt)&&Lt===gt(h.Z.VIDEO,bt)},updateTopQualityIndex:function(lt){var bt=lt.type,tn=lt.streamInfo.id,Lt=lt.representationCount-1;return W[tn]=W[tn]||{},W[tn][bt]=Lt,Lt},clearDataForStream:function(lt){ge&&ge.clearForStream(lt),Z[lt]&&delete Z[lt],Le[lt]&&delete Le[lt],K[lt]&&delete K[lt]},getThroughputHistory:function(){return Fe},getBitrateList:Bt,getQualityForBitrate:Ft,getTopBitrateInfoFor:function(lt){var bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(bt||(bt=z.getActiveStreamInfo().id),lt&&Z&&Z[bt]&&Z[bt][lt]){var tn=gt(lt,bt),Lt=Bt(Z[bt][lt].getMediaInfo());return Lt[tn]?Lt[tn]:null}return null},getMinAllowedIndexFor:ut,getMaxAllowedIndexFor:gt,getInitialBitrateFor:function(lt,bt){if((function(){if(!Ke||!Ke.hasOwnProperty("getSavedBitrateSettings"))throw new Error(h.Z.MISSING_CONFIG_ERROR)})(),lt===h.Z.TEXT)return NaN;var tn=Ke.getSavedBitrateSettings(lt),Lt=He.getAbrBitrateParameter("initialBitrate",lt),an=G.get().streaming.abr.initialRepresentationRatio[lt];if(Lt===-1)if(an>-1){var ln=Z[bt][lt].getStreamInfo(),Xt=ce.getAdaptationForType(ln.index,lt,ln).Representation_asArray;Lt=Array.isArray(Xt)?Xt[Math.max(Math.round(Xt.length*an)-1,0)].bandwidth/1e3:0}else Lt=isNaN(tn)?lt===h.Z.VIDEO?1e3:100:tn;return Lt},getQualityFor:mt,getAbandonmentStateFor:function(lt,bt){return K[lt]&&K[lt][bt]?K[lt][bt].state:null},setPlaybackQuality:dt,checkPlaybackQuality:function(lt,bt){try{if(!(lt&&Z&&Z[bt]&&Z[bt][lt]))return!1;if(ge){var tn=ae.getPlaybackQuality();tn&&ge.push(bt,me,tn)}if(!G.get().streaming.abr.autoSwitchBitrate[lt])return!1;var Lt=mt(lt,bt),an=Dp(Ie).create({abrController:L,switchHistory:Le[bt][lt],droppedFramesHistory:ge,streamProcessor:Z[bt][lt],currentValue:Lt,useBufferOccupancyABR:F[lt],useL2AABR:se[lt],useLoLPABR:te[lt],videoModel:ae}),ln=ut(lt,bt),Xt=gt(lt,bt),Vn=P.getMaxQuality(an),Mn=Vn.quality;return ln!==void 0&&(Mn>Fu.Z.NO_CHANGE?Mn:Lt)<ln&&(Mn=ln),Mn>Xt&&(Mn=Xt),Le[bt][lt].push({oldValue:Lt,newValue:Mn}),Mn>Fu.Z.NO_CHANGE&&Mn!==Lt&&(K[bt][lt].state===E.Z.ALLOW_LOAD||Mn<Lt)&&(zt(lt,Lt,Mn,Xt,Vn.reason,bt),!0)}catch{return!1}},setElementSize:Nn,setWindowResizeEventCalled:function(lt){_e=lt},registerStreamType:function(lt,bt){var tn=bt.getStreamInfo().id;Z[tn]||(Z[tn]={}),Le[tn]||(Le[tn]={}),K[tn]||(K[tn]={}),Le[tn][lt]=ad(Ie).create(),Z[tn][lt]=bt,K[tn][lt]={},K[tn][lt].state=E.Z.ALLOW_LOAD,(function(Lt){var an=G.get().streaming.abr.ABRStrategy;an===h.Z.ABR_STRATEGY_L2A?(F[Lt]=!1,te[Lt]=!1,se[Lt]=!0):an===h.Z.ABR_STRATEGY_LoLP?(F[Lt]=!1,te[Lt]=!0,se[Lt]=!1):an===h.Z.ABR_STRATEGY_BOLA?(F[Lt]=!0,te[Lt]=!1,se[Lt]=!1):an===h.Z.ABR_STRATEGY_THROUGHPUT?(F[Lt]=!1,te[Lt]=!1,se[Lt]=!1):an===h.Z.ABR_STRATEGY_DYNAMIC&&(F[Lt]=!(!F||!F[Lt])&&F[Lt],te[Lt]=!1,se[Lt]=!1)})(lt),lt===h.Z.VIDEO&&Nn()},unRegisterStreamType:function(lt,bt){try{Z[lt]&&Z[lt][bt]&&delete Z[lt][bt],Le[lt]&&Le[lt][bt]&&delete Le[lt][bt],K[lt]&&K[lt][bt]&&delete K[lt][bt]}catch{}},setConfig:function(lt){lt&&(lt.streamController&&(z=lt.streamController),lt.domStorage&&(Ke=lt.domStorage),lt.mediaPlayerModel&&(He=lt.mediaPlayerModel),lt.customParametersModel&&(Oe=lt.customParametersModel),lt.cmsdModel&&(Be=lt.cmsdModel),lt.dashMetrics&&(re=lt.dashMetrics),lt.adapter&&(ce=lt.adapter),lt.videoModel&&(ae=lt.videoModel),lt.settings&&(G=lt.settings))},reset:function(){Ae(),ke.off(_.Z.LOADING_PROGRESS,ue,L),ke.off(v.Z.QUALITY_CHANGE_RENDERED,Se,L),ke.off(v.Z.METRIC_ADDED,qe,L),P&&P.reset()}},R=we.getLogger(L),Ae(),L}Uu.__dashjs_factory_name="AbrController";var mf=I.Z.getSingletonFactory(Uu);mf.QUALITY_DEFAULT=0,I.Z.updateSingletonFactory(Uu.__dashjs_factory_name,mf);var yf=mf,Pp=new Map([[h.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[h.Z.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[h.Z.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[h.Z.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function Xl(){var L,R,P,z,W,q,Z,K,le=this.context,_e=(0,A.Z)(le).getInstance(),fe=[];function Q(){P&&(P.playbackRate=1,P.removeEventListener("canplay",Q))}function ce(){return fe.length>0}function ae(){if(P&&ce()&&P.playbackRate===0){var ge=document.createEvent("Event");ge.initEvent("waiting",!0,!1),P.dispatchEvent(ge)}}function He(ge,Fe){P&&P.addEventListener(ge,Fe)}function Oe(ge,Fe){P&&P.removeEventListener(ge,Fe)}function Be(){return P?P.readyState:NaN}function Ke(){return P?P.buffered:null}function me(ge,Fe,F,se,te){if(P){for(var re=0;re<P.textTracks.length;re++)if(P.textTracks[re].kind===ge&&(!Fe||P.textTracks[re].label==Fe)&&P.textTracks[re].language===F&&P.textTracks[re].isTTML===se&&P.textTracks[re].isEmbedded===te)return P.textTracks[re]}return null}function Le(ge,Fe){return ge===h.Z.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||Be()>=ge?(Fe(),null):(function(F,se){var te=function re(){Oe(F,re),se(F)};return He(F,te),{func:te,event:F}})(Pp.get(ge),Fe)}return L={addEventListener:He,addTextTrack:function(ge,Fe,F,se,te){if(!P)return null;var re=me(ge,Fe,F,se,te);return re||((re=P.addTextTrack(ge,Fe,F)).isEmbedded=te,re.isTTML=se),re},appendChild:function(ge){P&&(P.appendChild(ge),ge.isTTML!==void 0&&(P.textTracks[P.textTracks.length-1].isTTML=ge.isTTML,P.textTracks[P.textTracks.length-1].isEmbedded=ge.isEmbedded))},getBufferRange:Ke,getClientHeight:function(){return P?P.clientHeight:NaN},getClientWidth:function(){return P?P.clientWidth:NaN},getElement:function(){return P},getEnded:function(){return P?P.ended:null},getPlaybackQuality:function(){if(!P)return null;var ge="webkitDroppedFrameCount"in P&&"webkitDecodedFrameCount"in P,Fe=null;return"getVideoPlaybackQuality"in P?Fe=P.getVideoPlaybackQuality():ge&&(Fe={droppedVideoFrames:P.webkitDroppedFrameCount,totalVideoFrames:P.webkitDroppedFrameCount+P.webkitDecodedFrameCount,creationTime:new Date}),Fe},getPlaybackRate:function(){return P?P.playbackRate:null},getPlayedRanges:function(){return P?P.played:null},getReadyState:Be,getSource:function(){return P?P.src:null},getTTMLRenderingDiv:function(){return q},getTextTrack:me,getTextTracks:function(){return P?P.textTracks:[]},getTime:function(){return P?isNaN(z)?P.currentTime:z:null},getVideoHeight:function(){return P?P.videoHeight:NaN},getVideoRelativeOffsetLeft:function(){if(P){var ge=P.parentNode.host||P.parentNode;return ge?P.getBoundingClientRect().left-ge.getBoundingClientRect().left:NaN}return NaN},getVideoRelativeOffsetTop:function(){if(P){var ge=P.parentNode.host||P.parentNode;return ge?P.getBoundingClientRect().top-ge.getBoundingClientRect().top:NaN}return NaN},getVideoWidth:function(){return P?P.videoWidth:NaN},getVttRenderingDiv:function(){return Z},initialize:function(){_e.on(_.Z.PLAYBACK_PLAYING,ae,this)},isPaused:function(){return P?P.paused:null},isSeeking:function(){return P?P.seeking||!isNaN(z):null},isStalled:ce,pause:function(){P&&(P.pause(),P.autoplay=!1)},play:function(){if(P){P.autoplay=!0;var ge=P.play();ge&&ge.catch&&typeof Promise<"u"&&ge.catch((function(Fe){Fe.name==="NotAllowedError"&&_e.trigger(_.Z.PLAYBACK_NOT_ALLOWED),R.warn("Caught pending play exception - continuing (".concat(Fe,")"))}))}},removeChild:function(ge){P&&P.removeChild(ge)},removeEventListener:Oe,reset:function(){clearTimeout(K),_e.off(_.Z.PLAYBACK_PLAYING,ae,this)},setCurrentTime:function(ge,Fe){P&&(W&&W.func&&W.event&&Oe(W.event,W.func),z=ge,W=Le(h.Z.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,(function(){if(P)if(P.currentTime!==z)try{z=Fe?(function(F){var se=Ke(),te=F,re=9999999999;if(se)for(var G=0;G<se.length;G++){var Ie=se.start(G),we=se.end(G),ke=Math.abs(Ie-F),Ae=Math.abs(we-F);if(F>=Ie&&F<=we)return F;ke<re&&(re=ke,te=Ie),Ae<re&&(re=Ae,te=we)}return te})(z):z,isNaN(z)||(P.currentTime=z),z=NaN}catch(F){P.readyState===0&&F.code===F.INVALID_STATE_ERR&&(K=setTimeout((function(){P.currentTime=z,z=NaN}),400))}else z=NaN})))},setElement:function(ge){if(!(ge==null||ge&&/^(VIDEO|AUDIO)$/i.test(ge.nodeName)))throw"element is not video or audio DOM type!";(P=ge)&&(P.preload="auto")},setPlaybackRate:function(ge){var Fe=arguments.length>1&&arguments[1]!==void 0&&arguments[1];P&&(!Fe&&P.readyState<=2&&ge>0?P.addEventListener("canplay",Q):P.playbackRate=ge)},setSource:function(ge){P&&(ge?P.src=ge:(P.removeAttribute("src"),P.load()))},setStallState:function(ge,Fe){(function(F,se){se?(function(te){te!==null&&P&&!P.seeking&&fe.indexOf(te)===-1&&fe.push(te)})(F):(function(te){var re=fe.indexOf(te);te!==null&&re!==-1&&fe.splice(re,1)})(F)})(ge,Fe)},setTTMLRenderingDiv:function(ge){(q=ge).style.position="absolute",q.style.display="flex",q.style.overflow="hidden",q.style.pointerEvents="none",q.style.top=0,q.style.left=0},setVttRenderingDiv:function(ge){Z=ge},waitForReadyState:Le,setDisableRemotePlayback:function(ge){P&&(P.disableRemotePlayback=ge)}},R=(0,C.Z)(le).getInstance().getLogger(L),z=NaN,L}Xl.__dashjs_factory_name="VideoModel";var ym=I.Z.getSingletonFactory(Xl),vf=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],sl="dashjs_?_bitrate",Jl="dashjs_?_settings",Xo="localStorage",cd="lastBitrate",Qe="lastMediaSettings";function _c(L){L=L||{};var R,P,z,W=this.context,q=L.settings;function Z(fe){if(z!==void 0)return z;var Q;z=!1;try{typeof window<"u"&&(Q=window[fe])}catch(ce){return P.warn("DOMStorage access denied: "+ce.message),z}if(!Q||fe!==Xo)return z;try{Q.setItem("1","1"),Q.removeItem("1"),z=!0}catch(ce){P.warn("DOMStorage is supported, but cannot be used: "+ce.message)}return z}function K(){var fe=6e5;return Math.round(new Date().getTime()/fe)*fe}function le(fe,Q){return Z(fe)&&q.get().streaming[Q+"CachingInfo"].enabled}function _e(){if(!q)throw new Error(h.Z.MISSING_CONFIG_ERROR)}return R={getSavedBitrateSettings:function(fe){if(_e(),!q.get().streaming.lastBitrateCachingInfo.enabled)return NaN;var Q=NaN;if(le(Xo,cd)){var ce=sl.replace(/\?/,fe);try{var ae=JSON.parse(localStorage.getItem(ce))||{},He=new Date().getTime()-parseInt(ae.timestamp,10)>=q.get().streaming.lastBitrateCachingInfo.ttl||!1,Oe=parseFloat(ae.bitrate);isNaN(Oe)||He?He&&localStorage.removeItem(ce):(Q=Oe,P.debug("Last saved bitrate for "+fe+" was "+Oe))}catch{return null}}return Q},setSavedBitrateSettings:function(fe,Q){if(le(Xo,cd)&&Q){var ce=sl.replace(/\?/,fe);try{localStorage.setItem(ce,JSON.stringify({bitrate:Q.toFixed(3),timestamp:K()}))}catch(ae){P.error(ae.message)}}},getSavedMediaSettings:function(fe){if(_e(),!q.get().streaming.lastMediaSettingsCachingInfo.enabled)return null;var Q=null;if(le(Xo,Qe)){var ce=Jl.replace(/\?/,fe);try{var ae=JSON.parse(localStorage.getItem(ce))||{},He=new Date().getTime()-parseInt(ae.timestamp,10)>=q.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;Q=ae.settings,He&&(localStorage.removeItem(ce),Q=null)}catch{return null}}return Q},setSavedMediaSettings:function(fe,Q){if(le(Xo,Qe)){var ce=Jl.replace(/\?/,fe);try{localStorage.setItem(ce,JSON.stringify({settings:Q,timestamp:K()}))}catch(ae){P.error(ae.message)}}}},P=(0,C.Z)(W).getInstance().getLogger(R),Z(Xo)&&vf.forEach((function(fe){var Q=localStorage.getItem(fe.oldKey);if(Q){localStorage.removeItem(fe.oldKey);try{localStorage.setItem(fe.newKey,Q)}catch(ce){P.error(ce.message)}}})),R}_c.__dashjs_factory_name="DOMStorage";var Rl=I.Z.getSingletonFactory(_c),As=f(2032),ri=f(2011);function fd(){var L,R,P,z,W,q,Z,K,le,_e,fe,Q,ce,ae=this.context;function He(me,Le,ge,Fe){var F=null,se=me?ce.resolve(me.path):null,te=Fe||{init:!0,url:se?se.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:Le};R.debug("Start searching for initialization.");var re=Ke(te);K.load({request:re,success:function(G){if(te.bytesLoaded=te.range.end,!(F=z.findInitRange(G)))return te.range.end=te.bytesLoaded+te.bytesToLoad,He(me,Le,ge,te);me.range=F,ge(me)},error:function(){ge(me)}}),R.debug("Perform init search: "+te.url)}function Oe(me,Le,ge,Fe,F,se){if(ge&&(ge.start===void 0||ge.end===void 0)){var te=ge?ge.toString().split("-"):null;ge=te?{start:parseFloat(te[0]),end:parseFloat(te[1])}:null}F=F||Be;var re=null,G=null,Ie=!!ge,we=me?ce.resolve(me.path):null,ke={init:!1,url:we?we.url:void 0,range:Ie?ge:{start:0,end:1500},searching:!Ie,bytesLoaded:se?se.bytesLoaded:0,bytesToLoad:1500,mediaType:Le},Ae=Ke(ke);K.load({request:Ae,success:function(ue){var Se=ke.bytesToLoad,qe=ue.byteLength;if(ke.bytesLoaded=ke.range.end-ke.range.start,re=z.parse(ue),(G=re.getBox("sidx"))&&G.isComplete){var gt,ut,mt=G.references;if(mt!=null&&mt.length>0&&(gt=mt[0].reference_type===1),gt){var dt,zt,Ut,Ft;R.debug("Initiate multiple SIDX load."),ke.range.end=ke.range.start+G.size;var Bt=[],Nn=0,lt=(G.offset||ke.range.start)+G.size,bt=function(Lt){Lt?(Bt=Bt.concat(Lt),++Nn>=zt&&(Bt.sort((function(an,ln){return an.startTime-ln.startTime<0?-1:0})),F(Bt,me,Fe))):F(null,me,Fe)};for(dt=0,zt=mt.length;dt<zt;dt++)Ut=lt,Ft=lt+mt[dt].referenced_size-1,lt+=mt[dt].referenced_size,Oe(me,Le,{start:Ut,end:Ft},Fe,bt,ke)}else R.debug("Parsing segments from SIDX. representation "+Le+" - id: "+me.id+" for range : "+ke.range.start+" - "+ke.range.end),ut=(function(Lt,an){for(var ln,Xt,Vn,Mn,gr=Lt.references,vr=gr.length,Ct=Lt.timescale,rn=Lt.earliest_presentation_time,Ht=an.range.start+Lt.offset+Lt.first_offset+Lt.size,yn=[],In=0;In<vr;In++)Vn=gr[In].subsegment_duration,Mn=gr[In].referenced_size,(ln=new ri.Z).duration=Vn,ln.startTime=rn,ln.timescale=Ct,Xt=Ht+Mn-1,ln.mediaRange=Ht+"-"+Xt,yn.push(ln),rn+=Vn,Ht+=Mn;return yn})(G,ke),F(ut,me,Fe)}else{if(G)ke.range.start=G.offset||ke.range.start,ke.range.end=ke.range.start+(G.size||Se);else{if(qe<ke.bytesLoaded)return void F(null,me,Fe);var tn=re.getLastBox();tn&&tn.size?(ke.range.start=tn.offset+tn.size,ke.range.end=ke.range.start+Se):ke.range.end+=Se}Oe(me,Le,ke.range,Fe,null,ke)}},error:function(){F(null,me,Fe)}}),R.debug("Perform SIDX load for type ".concat(Le," : ").concat(ke.url," with range ").concat(ke.range.start," - ").concat(ke.range.end))}function Be(me,Le,ge){ge({segments:me,representation:Le,error:me?void 0:new ve.Z(le.SEGMENT_BASE_LOADER_ERROR_CODE,le.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function Ke(me){if(me.url){var Le=new O.Z;return Le.setInfo(me),Le}}return L={setConfig:function(me){me.baseURLController&&(ce=me.baseURLController),me.dashMetrics&&(q=me.dashMetrics),me.mediaPlayerModel&&(Z=me.mediaPlayerModel),me.errHandler&&(P=me.errHandler),me.boxParser&&(z=me.boxParser),me.debug&&(R=me.debug.getLogger(L)),me.requestModifier&&(W=me.requestModifier),me.errors&&(le=me.errors),me.urlUtils&&(Q=me.urlUtils),me.constants&&(_e=me.constants),me.dashConstants&&(fe=me.dashConstants)},initialize:function(){K=No(ae).create({errHandler:P,dashMetrics:q,mediaPlayerModel:Z,requestModifier:W,boxParser:z,errors:le,urlUtils:Q,constants:_e,dashConstants:fe})},loadInitialization:function(me,Le){return new Promise((function(ge){He(me,Le,ge)}))},loadSegments:function(me,Le,ge){return new Promise((function(Fe){Oe(me,Le,ge,Fe)}))},reset:function(){K&&(K.abort(),K=null)}}}fd.__dashjs_factory_name="SegmentBaseLoader";var Mp=I.Z.getSingletonFactory(fd);function bc(L){var R;L=L||{};var P=new DataView(L.data),z=0;function W(Z,K){var le=!0,_e=0;if(K===void 0&&(K=!1),Z.tag>16777215?(P.getUint32(z)!==Z.tag&&(le=!1),_e=4):Z.tag>65535?(256*P.getUint16(z)+P.getUint8(z+2)!==Z.tag&&(le=!1),_e=3):Z.tag>255?(P.getUint16(z)!==Z.tag&&(le=!1),_e=2):(P.getUint8(z)!==Z.tag&&(le=!1),_e=1),!le&&Z.required&&!K)throw new Error("required tag not found");return le&&(z+=_e),le}function q(Z){var K=1,le=128,_e=-1,fe=0,Q=P.getUint8(z),ce=0;for(ce=0;ce<8;ce+=1){if((Q&le)===le){fe=Z===void 0?Q&~le:Q,_e=ce;break}le>>=1}for(ce=0;ce<_e;ce+=1,K+=1)fe=fe<<8|255&P.getUint8(z+K);return z+=K,fe}return R={getPos:function(){return z},setPos:function(Z){z=Z},consumeTag:W,consumeTagAndSize:function(Z,K){var le=W(Z,K);return le&&q(),le},parseTag:function(Z){var K;return W(Z),K=q(),R[Z.parse](K)},skipOverElement:function(Z,K){var le,_e=W(Z,K);return _e&&(le=q(),z+=le),_e},getMatroskaCodedNum:q,getMatroskaFloat:function(Z){var K;switch(Z){case 4:K=P.getFloat32(z),z+=4;break;case 8:K=P.getFloat64(z),z+=8}return K},getMatroskaUint:function(Z){if(Z>4)return(function(_e){for(var fe=Math.floor(Number.MAX_SAFE_INTEGER/256),Q=0,ce=0;ce<_e;ce+=1){if(Q>fe)throw new Error("Value exceeds safe integer limit");Q*=256;var ae=P.getUint8(z+ce);if(Q>Number.MAX_SAFE_INTEGER-ae)throw new Error("Value exceeds safe integer limit");Q+=ae}return z+=_e,Q})(Z);for(var K=0,le=0;le<Z;le+=1)K<<=8,K|=255&P.getUint8(z+le);return z+=Z,K>>>0},moreData:function(){return z<P.byteLength}}}bc.__dashjs_factory_name="EBMLParser";var $s=I.Z.getClassFactory(bc);function ao(){var L,R,P,z,W,q,Z,K,le,_e,fe=this.context;function Q(ce){var ae=new O.Z;return ae.setInfo(ce),ae}return L={setConfig:function(ce){if(!(ce.baseURLController&&ce.dashMetrics&&ce.mediaPlayerModel&&ce.errHandler))throw new Error(h.Z.MISSING_CONFIG_ERROR);_e=ce.baseURLController,q=ce.dashMetrics,Z=ce.mediaPlayerModel,z=ce.errHandler,le=ce.errors,R=ce.debug.getLogger(L),W=ce.requestModifier},initialize:function(){K=No(fe).create({errHandler:z,dashMetrics:q,mediaPlayerModel:Z,requestModifier:W,errors:le})},loadInitialization:function(ce,ae){return new Promise((function(He){var Oe=null,Be=ce?_e.resolve(ce.path):null,Ke=ce?ce.range.split("-"):null,me={range:{start:Ke?parseFloat(Ke[0]):null,end:Ke?parseFloat(Ke[1]):null},request:Oe,url:Be?Be.url:void 0,init:!0,mediaType:ae};R.info("Start loading initialization."),Oe=Q(me),K.load({request:Oe,success:function(){He(ce)},error:function(){He(ce)}}),R.debug("Perform init load: "+me.url)}))},loadSegments:function(ce,ae,He){return new Promise((function(Oe){var Be=null,Ke=ce?_e.resolve(ce.path):null,me=Ke?Ke.url:void 0;Be=Q({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:Be,url:me,init:!1,mediaType:ae}),R.debug("Parsing ebml header"),K.load({request:Be,success:function(Le){(function(ge,Fe,F,se){if(ge&&ge.byteLength!==0){var te,re,G,Ie,we=$s(fe).create({data:ge}),ke=F?F.split("-"):null,Ae=null,ue={url:Fe,range:{start:ke?parseFloat(ke[0]):null,end:ke?parseFloat(ke[1]):null},request:Ae};for(R.debug("Parse EBML header: "+ue.url),we.skipOverElement(P.EBML),we.consumeTag(P.Segment),G=we.getMatroskaCodedNum(),G+=we.getPos(),Ie=we.getPos();we.moreData()&&!we.consumeTagAndSize(P.Segment.Info,!0);)if(!(we.skipOverElement(P.Segment.SeekHead,!0)||we.skipOverElement(P.Segment.Tracks,!0)||we.skipOverElement(P.Segment.Cues,!0)||we.skipOverElement(P.Void,!0)))throw new Error("no valid top level element found");for(;te===void 0;){var Se=we.getMatroskaCodedNum(!0),qe=we.getMatroskaCodedNum();Se===P.Segment.Info.Duration.tag?te=we[P.Segment.Info.Duration.parse](qe):we.setPos(we.getPos()+qe)}Ae=Q(ue),K.load({request:Ae,success:function(gt){re=(function(ut,mt,dt,zt){var Ut,Ft,Bt,Nn,lt,bt,tn,Lt;for(Bt=[],lt=0,bt=(Ft=(function(an){var ln,Xt,Vn=[],Mn=$s(fe).create({data:an});for(Mn.consumeTagAndSize(P.Segment.Cues);Mn.moreData()&&Mn.consumeTagAndSize(P.Segment.Cues.CuePoint,!0);){for((ln={}).CueTime=Mn.parseTag(P.Segment.Cues.CuePoint.CueTime),ln.CueTracks=[];Mn.moreData()&&Mn.consumeTag(P.Segment.Cues.CuePoint.CueTrackPositions,!0);){var gr=Mn.getMatroskaCodedNum(),vr=Mn.getPos();if((Xt={}).Track=Mn.parseTag(P.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),Xt.Track===0)throw new Error("Cue track cannot be 0");Xt.ClusterPosition=Mn.parseTag(P.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),ln.CueTracks.push(Xt),Mn.setPos(vr+gr)}if(ln.CueTracks.length===0)throw new Error("Mandatory cuetrack not found");Vn.push(ln)}if(Vn.length===0)throw new Error("mandatory cuepoint not found");return Vn})(ut)).length;lt<bt;lt+=1)Nn=new ri.Z,Ut=lt<Ft.length-1?Ft[lt+1].CueTime-Ft[lt].CueTime:zt-Ft[lt].CueTime,Nn.duration=Ut,Nn.startTime=Ft[lt].CueTime,Nn.timescale=1e3,tn=Ft[lt].CueTracks[0].ClusterPosition+mt,Lt=lt<Ft.length-1?Ft[lt+1].CueTracks[0].ClusterPosition+mt-1:dt-1,Nn.mediaRange=tn+"-"+Lt,Bt.push(Nn);return R.debug("Parsed cues: "+Bt.length+" cues."),Bt})(gt,Ie,G,te),se(re)},error:function(){R.error("Download Error: Cues "+ue.url),se(null)}}),R.debug("Perform cues load: "+ue.url+" bytes="+ue.range.start+"-"+ue.range.end)}else se(null)})(Le,me,He,(function(ge){Oe({segments:ge,representation:ce,error:ge?void 0:new ve.Z(le.SEGMENT_BASE_LOADER_ERROR_CODE,le.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}))},error:function(){Oe({representation:ce,error:new ve.Z(le.SEGMENT_BASE_LOADER_ERROR_CODE,le.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})}))},reset:function(){K&&(K.abort(),K=null)}},P={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},L}ao.__dashjs_factory_name="WebmSegmentBaseLoader";var lo=I.Z.getSingletonFactory(ao);function eu(L){L=L||{};var R,P,z,W=this.context,q=L.eventBus,Z=L.events,K=L.dashMetrics,le=L.mediaPlayerModel,_e=L.errHandler,fe=L.baseURLController,Q=L.debug,ce=L.boxParser,ae=L.requestModifier,He=L.errors;function Oe(Be){return(Be?Be.split("/")[1]:"").toLowerCase()==="webm"}return R={initialize:function(){P.initialize(),z.initialize()},getSegmentBaseInitSegment:function(Be){return Oe(Be.representation.mimeType)?z.loadInitialization(Be.representation,Be.mediaType):P.loadInitialization(Be.representation,Be.mediaType)},getSegmentList:function(Be){return Oe(Be.mimeType)?z.loadSegments(Be.representation,Be.mediaType,Be.representation?Be.representation.indexRange:null):P.loadSegments(Be.representation,Be.mediaType,Be.representation?Be.representation.indexRange:null)},reset:function(){P.reset(),z.reset()}},P=Mp(W).getInstance(),z=lo(W).getInstance(),P.setConfig({baseURLController:fe,dashMetrics:K,mediaPlayerModel:le,errHandler:_e,eventBus:q,events:Z,errors:He,debug:Q,boxParser:ce,requestModifier:ae}),z.setConfig({baseURLController:fe,dashMetrics:K,mediaPlayerModel:le,errHandler:_e,eventBus:q,events:Z,errors:He,debug:Q,requestModifier:ae}),R}eu.__dashjs_factory_name="SegmentBaseController";var Is=I.Z.getSingletonFactory(eu),Us=function L(){(function(R,P){if(!(R instanceof P))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.quality=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null},cs=function L(){(function(R,P){if(!(R instanceof P))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.labels=null,this.lang=null,this.viewpoint=null,this.viewpointsWithSchemeIdUri=null,this.accessibility=null,this.accessibilitiesWithSchemeIdUri=null,this.audioChannelConfiguration=null,this.audioChannelConfigurationsWithSchemeIdUri=null,this.roles=null,this.rolesWithSchemeIdUri=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null,this.isFragmented=null,this.isEmbedded=null,this.selectionPriority=1,this.supplementalProperties={},this.supplementalPropertiesAsArray=[],this.essentialProperties={},this.essentialPropertiesAsArray=[],this.segmentAlignment=!1,this.subSegmentAlignment=!1},Ec=function L(){(function(R,P){if(!(R instanceof P))throw new TypeError("Cannot call a class as a function")})(this,L),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0},Qs=function L(){(function(R,P){if(!(R instanceof P))throw new TypeError("Cannot call a class as a function")})(this,L),this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null,this.serviceDescriptions=[],this.protocol=null};function yh(L,R){for(var P=0;P<R.length;P++){var z=R[P];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(L,z.key,z)}}var vm=(function(){function L(z){var W=this;(function(q,Z){if(!(q instanceof Z))throw new TypeError("Cannot call a class as a function")})(this,L),this.valid=z[0]=="/",this.path=z.split("/").filter((function(q){return q.length!==0})).map((function(q){var Z={name:q},K=q.indexOf("[");if(K!=-1){Z.name=q.substring(0,K);var le=q.substring(K+1,q.length-1);W.valid=W.valid&&le.indexOf("[")==-1;var _e=le.indexOf("=");_e!=-1?(Z.attribute={name:le.substring(1,_e),value:le.substring(_e+1)},["'",'"'].indexOf(Z.attribute.value[0])!=-1&&(Z.attribute.value=Z.attribute.value.substring(1,Z.attribute.value.length-1))):Z.position=parseInt(le,10)-1}return Z}))}var R,P;return R=L,(P=[{key:"isValid",value:function(){return this.valid}},{key:"findsElement",value:function(){return!this.findsAttribute()}},{key:"findsAttribute",value:function(){return this.path[this.path.length-1].name.startsWith("@")}},{key:"findsTextReplace",value:function(){return this.path[this.path.length-1].name==="text()"}},{key:"getMpdTarget",value:function(z,W){for(var q=null,Z=z,K=1,le="MPD";K<this.path.length&&Z!==null;){q=Z;var _e=this.path[K];if(le=_e.name,K!==this.path.length-1||!le.startsWith("@")&&le!=="text()"){var fe=q[le+"_asArray"]||[];fe.length===0&&q[le]&&fe.push(q[le]),_e.position?Z=fe[_e.position]||null:_e.attribute?(function(){var Q=_e.attribute;Z=fe.filter((function(ce){return ce[Q.name]==Q.value}))[0]||null})():Z=fe[0]||null}K++}return Z===null?null:le.startsWith("@")?{name:le.substring(1),leaf:Z,target:Z}:le==="text()"?{name:"__text",leaf:Z,target:Z}:{name:le,leaf:Z,target:W?q:Z}}}])&&yh(R.prototype,P),L})();function _m(L,R){for(var P=0;P<R.length;P++){var z=R[P];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(L,z.key,z)}}var Na=(function(){function L(z,W,q){(function(Z,K){if(!(Z instanceof K))throw new TypeError("Cannot call a class as a function")})(this,L),this.action=z,this.xpath=W,this.value=q,this.position=null}var R,P;return R=L,(P=[{key:"getMpdTarget",value:function(z){var W=this.action==="remove"||this.action==="replace"||this.position==="before"||this.position==="after";return this.xpath.getMpdTarget(z,W)}}])&&_m(R.prototype,P),L})();function kp(){var L,R,P=this.context;return L={getIsPatch:function(z){return z&&z.hasOwnProperty(p.Z.ORIGINAL_MPD_ID)||!1},getPublishTime:function(z){return z&&z.hasOwnProperty(p.Z.PUBLISH_TIME)?new Date(z[p.Z.PUBLISH_TIME]):null},getOriginalPublishTime:function(z){return z&&z.hasOwnProperty(p.Z.ORIGINAL_PUBLISH_TIME)?new Date(z[p.Z.ORIGINAL_PUBLISH_TIME]):null},getMpdId:function(z){return z&&z[p.Z.ORIGINAL_MPD_ID]||null},getPatchOperations:function(z){return z?(z.__children||[]).map((function(W){var q=Object.keys(W)[0];if(q!=="add"&&q!=="remove"&&q!=="replace")return R.warn("Ignoring node of invalid action: ".concat(q)),null;var Z=W[q],K=Z.sel;if(q==="add"&&Z.type){if(!Z.type.startsWith("@"))return R.warn("Ignoring add action for prefixed namespace declaration: ".concat(Z.type,"=").concat(Z.__text)),null;K="".concat(K,"/").concat(Z.type)}var le=new vm(K);if(!le.isValid())return R.warn("Ignoring action with invalid selector: ".concat(q," - ").concat(K)),null;var _e=null;le.findsAttribute()||le.findsTextReplace()?_e=Z.__text||"":q!=="remove"&&(_e=Z.__children.reduce((function(Q,ce){var ae=Object.keys(ce)[0];return ae!=="#text"&&(Q[ae]=Q[ae]||[],Q[ae].push(ce[ae])),Q}),{}));var fe=new Na(q,le,_e);return q==="add"&&(fe.position=Z.pos),fe})).filter((function(W){return!!W})):[]}},R=(0,C.Z)(P).getInstance().getLogger(L),L}kp.__dashjs_factory_name="PatchManifestModel";var tu=I.Z.getSingletonFactory(kp);function dd(){var L,R,P,z,W,q,Z,K=this.context;function le(te,re,G){var Ie,we=R.getAdaptationsForType(z[0].mpd.manifest,te,re);if(!we||we.length===0)return null;if(we.length>1&&G){var ke=Q(G,re);if(W[G.id]&&W[G.id][re]){for(var Ae=0,ue=we.length;Ae<ue;Ae++)if(_e(W[G.id][re],ke[Ae]))return we[Ae]}for(var Se=0,qe=we.length;Se<qe;Se++)if(Ie=we[Se],R.getRolesForAdaptation(Ie).filter((function(gt){return gt.value===p.Z.MAIN}))[0])return we[Se]}return we[0]}function _e(te,re){if(!te||!re)return!1;var G=te.id===re.id,Ie=te.codec===re.codec,we=te.viewpoint===re.viewpoint,ke=JSON.stringify(te.viewpointsWithSchemeIdUri)===JSON.stringify(re.viewpointsWithSchemeIdUri),Ae=te.lang===re.lang,ue=te.roles.toString()===re.roles.toString(),Se=JSON.stringify(te.rolesWithSchemeIdUri)===JSON.stringify(re.rolesWithSchemeIdUri),qe=te.accessibility.toString()===re.accessibility.toString(),gt=JSON.stringify(te.accessibilitiesWithSchemeIdUri)===JSON.stringify(re.accessibilitiesWithSchemeIdUri),ut=te.audioChannelConfiguration.toString()===re.audioChannelConfiguration.toString(),mt=JSON.stringify(te.audioChannelConfigurationsWithSchemeIdUri)===JSON.stringify(re.audioChannelConfigurationsWithSchemeIdUri);return G&&Ie&&we&&ke&&Ae&&ue&&Se&&qe&&gt&&ut&&mt}function fe(te,re,G,Ie,we,ke){var Ae,ue,Se,qe,gt,ut,mt=[];if(!Ie||Ie.length===0)return[];var dt=R.getAdaptationsForPeriod(re);for(qe=0,ut=Ie.length;qe<ut;qe++)if(Ae=Ie[qe],ue=me(dt[Se=R.getIndexForAdaptation(Ae,te,G.index)]),ke){var zt=ue.accessibility.length;for(gt=0;gt<zt;gt++)if(ue){var Ut=ue.accessibility[gt];if(Ut.indexOf("cea-608:")===0){var Ft=Ut.substring(8).split(";");if(Ft[0].substring(0,2)==="CC")for(gt=0;gt<Ft.length;gt++)ue||(ue=me.call(this,dt[Se])),Le(ue,Ft[gt].substring(0,3),Ft[gt].substring(4)),mt.push(ue),ue=null;else for(gt=0;gt<Ft.length;gt++)ue||(ue=me.call(this,dt[Se])),Le(ue,"CC"+(gt+1),Ft[gt]),mt.push(ue),ue=null}else Ut.indexOf("cea-608")===0&&(Le(ue,q.CC1,"eng"),mt.push(ue),ue=null)}}else we===q.IMAGE?(ue.type=q.IMAGE,mt.push(ue),ue=null):ue&&mt.push(ue);return mt}function Q(te,re,G){var Ie=z,we=G,ke=[];if(we)Fe(),Ie=ce(we);else{if(!(z.length>0))return ke;we=z[0].mpd.manifest}var Ae=Ke(te,Ie),ue=R.getAdaptationsForType(we,te?te.index:null,re);return ke=fe(we,Ae,te,ue,re),re===q.TEXT&&(ue=R.getAdaptationsForType(we,te?te.index:null,q.VIDEO),ke=ke.concat(fe(we,Ae,te,ue,re,!0))),ke}function ce(te){var re=ae(te);return R.getRegularPeriods(re)}function ae(te){var re=Oe(te);return R.getMpd(re)}function He(){z=[],W={}}function Oe(te){return te||(z.length>0?z[0].mpd.manifest:null)}function Be(te){try{var re=Ke(te.streamInfo,z),G=R.getAdaptationsForPeriod(re);return te&&te.streamInfo&&te.streamInfo.id!==void 0&&G?G[te.index]:null}catch{return null}}function Ke(te,re){for(var G=re.length,Ie=0;Ie<G;Ie++){var we=re[Ie];if(te&&te.id===we.id)return we}return null}function me(te){if(!te)return null;var re,G,Ie,we,ke,Ae=new cs,ue=te.period.mpd.manifest.Period_asArray[te.period.index].AdaptationSet_asArray[te.index];if(Ae.id=te.id,Ae.index=te.index,Ae.type=te.type,Ae.streamInfo=ge(te.period),Ae.representationCount=R.getRepresentationCount(ue),Ae.labels=R.getLabelsForAdaptation(ue),Ae.lang=R.getLanguageForAdaptation(ue),Ae.segmentAlignment=R.getSegmentAlignment(ue),Ae.subSegmentAlignment=R.getSubSegmentAlignment(ue),re=R.getViewpointForAdaptation(ue),Ae.viewpoint=re.length?re[0].value:void 0,Ae.viewpointsWithSchemeIdUri=re,ke=R.getAccessibilityForAdaptation(ue),Ae.accessibility=ke.map((function(mt){var dt=mt.value,zt=dt;return mt.schemeIdUri&&mt.schemeIdUri.search("cea-608")>=0&&Z!==void 0&&(zt=dt?"cea-608:"+dt:"cea-608",Ae.embeddedCaptions=!0),zt})),Ae.accessibilitiesWithSchemeIdUri=ke,G=R.getAudioChannelConfigurationForAdaptation(ue),Ae.audioChannelConfiguration=G.map((function(mt){return mt.value})),Ae.audioChannelConfigurationsWithSchemeIdUri=G,Ae.audioChannelConfiguration.length===0&&Array.isArray(ue.Representation_asArray)&&ue.Representation_asArray.length>0&&(Ie=R.getAudioChannelConfigurationForRepresentation(ue.Representation_asArray[0]),Ae.audioChannelConfiguration=Ie.map((function(mt){return mt.value})),Ae.audioChannelConfigurationsWithSchemeIdUri=Ie),we=R.getRolesForAdaptation(ue),Ae.roles=we.map((function(mt){return mt.value})),Ae.rolesWithSchemeIdUri=we,Ae.codec=R.getCodec(ue),Ae.mimeType=R.getMimeType(ue),Ae.contentProtection=R.getContentProtectionData(ue),Ae.bitrateList=R.getBitrateListForAdaptation(ue),Ae.selectionPriority=R.getSelectionPriority(ue),Ae.contentProtection){var Se=Ae.contentProtection.map((function(mt){return R.getKID(mt)})).filter((function(mt){return mt!==null}));if(Se.length){var qe=Se[0];Ae.contentProtection.forEach((function(mt){mt.keyId=qe}))}}if(Ae.isText=R.getIsText(ue),Ae.supplementalProperties=R.getSupplementalPropertiesForAdaptation(ue),(!Ae.supplementalProperties||Object.keys(Ae.supplementalProperties).length===0)&&Array.isArray(ue.Representation_asArray)&&ue.Representation_asArray.length>0){var gt=ue.Representation_asArray.map((function(mt){return R.getSupplementalPropertiesForRepresentation(mt)}));gt.every((function(mt){return JSON.stringify(mt)===JSON.stringify(gt[0])}))&&(Ae.supplementalProperties=gt[0])}if(Ae.supplementalPropertiesAsArray=R.getSupplementalPropertiesAsArrayForAdaptation(ue),(!Ae.supplementalPropertiesAsArray||Ae.supplementalPropertiesAsArray.length===0)&&Array.isArray(ue.Representation_asArray)&&ue.Representation_asArray.length>0){var ut=ue.Representation_asArray.map((function(mt){return R.getSupplementalPropertiesAsArrayForRepresentation(mt)}));ut.every((function(mt){return JSON.stringify(mt)===JSON.stringify(ut[0])}))&&(Ae.supplementalPropertiesAsArray=ut[0])}return Ae.essentialProperties=R.getEssentialPropertiesForAdaptation(ue),Ae.essentialPropertiesAsArray=R.getEssentialPropertiesAsArrayForAdaptation(ue),Ae.isFragmented=R.getIsFragmented(ue),Ae.isEmbedded=!1,Ae}function Le(te,re,G){te.id=re,te.index=100+parseInt(re.substring(2,3)),te.type=q.TEXT,te.codec="cea-608-in-SEI",te.isEmbedded=!0,te.isFragmented=!1;var Ie=rl()(G);te.lang=Ie||G,te.roles=["caption"],te.rolesWithSchemeIdUri=[{schemeIdUri:"urn:mpeg:dash:role:2011",value:"caption"}]}function ge(te){var re,G,Ie=new Ec;return Ie.id=te.id,Ie.index=te.index,Ie.start=te.start,Ie.duration=te.duration,Ie.manifestInfo=(re=te.mpd,(G=new Qs).dvrWindowSize=re.timeShiftBufferDepth,G.loadedTime=re.manifest.loadedTime,G.availableFrom=re.availabilityStartTime,G.minBufferTime=re.manifest.minBufferTime,G.maxFragmentDuration=re.maxSegmentDuration,G.duration=R.getDuration(re.manifest),G.isDynamic=R.getIsDynamic(re.manifest),G.serviceDescriptions=R.getServiceDescriptions(re.manifest),G.protocol=re.manifest.protocol,G),Ie.isLast=te.mpd.manifest.Period_asArray.length===1||Math.abs(Ie.start+Ie.duration-Ie.manifestInfo.duration)<1,Ie}function Fe(){if(!q)throw new Error("setConfig function has to be called previously")}function F(te){return z.length>0?z[0].mpd.manifest.Period_asArray[te]:null}function se(te,re,G){var Ie,we,ke,Ae,ue;if(te){for(Ie=te.AdaptationSet_asArray,Ae=0;Ae<Ie.length;Ae+=1)for(ke=Ie[Ae].Representation_asArray,ue=0;ue<ke.length;ue+=1)if(re===(we=ke[ue]).id)return G?ue:we}return null}return L={getBandwidthForRepresentation:function(te,re){var G;return(G=se(F(re),te))?G.bandwidth:null},getIndexForRepresentation:function(te,re){return(function(G,Ie){var we=se(G,Ie,!0);return we!==null?we:-1})(F(re),te)},getMaxIndexForBufferType:function(te,re){return(function(G,Ie){var we,ke,Ae,ue;if(!G||!Ie)return-1;for(ke=G.AdaptationSet_asArray,ue=0;ue<ke.length;ue+=1)if(Ae=(we=ke[ue]).Representation_asArray,R.getIsTypeOf(we,Ie))return Ae.length;return-1})(F(re),te)},convertRepresentationToRepresentationInfo:function(te){if(te){var re=new Us,G=te.adaptation.period.mpd.manifest.Period_asArray[te.adaptation.period.index].AdaptationSet_asArray[te.adaptation.index],Ie=R.getRepresentationFor(te.index,G);return re.id=te.id,re.quality=te.index,re.bandwidth=R.getBandwidth(Ie),re.fragmentDuration=te.segmentDuration||(te.segments&&te.segments.length>0?te.segments[0].duration:NaN),re.MSETimeOffset=te.MSETimeOffset,re.mediaInfo=me(te.adaptation),re}return null},getStreamsInfo:function(te,re){var G=[],Ie=z;if(te&&(Fe(),Ie=ce(te)),Ie.length>0){(!re||re>Ie.length)&&(re=Ie.length);for(var we=0;we<re;we++)G.push(ge(Ie[we]))}return G},getMediaInfoForType:function(te,re){if(z.length===0||!te)return null;var G=Ke(te,z);if(!G)return null;var Ie=R.getAdaptationsForPeriod(G),we=le(te.index,re,te);return we?me(Ie[R.getIndexForAdaptation(we,z[0].mpd.manifest,te.index)]):null},getAllMediaInfoForType:Q,getAdaptationForType:le,getRealAdaptation:function(te,re){var G,Ie,we=Ke(te,z);return G=re?re.id:null,z.length>0&&we&&(Ie=G?R.getAdaptationForId(G,z[0].mpd.manifest,we.index):R.getAdaptationForIndex(re?re.index:null,z[0].mpd.manifest,we.index)),Ie},getProducerReferenceTimes:function(te,re){var G,Ie,we=Ke(te,z);return G=re?re.id:null,z.length>0&&we&&(Ie=G?R.getAdaptationForId(G,z[0].mpd.manifest,we.index):R.getAdaptationForIndex(re?re.index:null,z[0].mpd.manifest,we.index)),Ie?R.getProducerReferenceTimesForAdaptation(Ie):[]},getRealPeriodByIndex:function(te){return R.getRealPeriodForIndex(te,z[0].mpd.manifest)},getEssentialPropertiesForRepresentation:function(te){try{return R.getEssentialPropertiesForRepresentation(te)}catch{return[]}},getVoRepresentations:function(te){var re=Be(te);return R.getRepresentationsForAdaptation(re)},getEventsFor:function(te,re,G){var Ie=[];if(z.length>0){var we=z[0].mpd.manifest;if(te instanceof Ec){var ke=Ke(te,z);Ie=R.getEventsForPeriod(ke)}else if(te instanceof cs){var Ae=Ke(G,z);Ie=R.getEventStreamForAdaptationSet(we,Be(te),Ae)}else if(te instanceof Us){var ue=Ke(G,z);Ie=R.getEventStreamForRepresentation(we,re,ue)}}return Ie},getEvent:function(te,re,G,Ie){try{if(!te||!re||isNaN(G)||!Ie)return null;var we=te.scheme_id_uri,ke=te.value;if(!re[we+"/"+ke])return null;var Ae,ue=new ro,Se=te.timescale||1,qe=Ie.adaptation.period.start,gt=re[we+"/"+ke],ut=isNaN(Ie.presentationTimeOffset)?isNaN(gt.presentationTimeOffset)?0:gt.presentationTimeOffset:Ie.presentationTimeOffset,mt=te.presentation_time_delta/Se;Ae=te.version===0?qe+G-ut+mt:qe-ut+mt;var dt=te.event_duration/Se,zt=te.id,Ut=te.message_data;return ue.eventStream=gt,ue.eventStream.value=ke,ue.eventStream.timescale=Se,ue.duration=dt,ue.id=zt,ue.calculatedPresentationTime=Ae,ue.messageData=Ut,ue.presentationTimeDelta=mt,ue}catch{return null}},getMpd:ae,setConfig:function(te){te&&(te.constants&&(q=te.constants),te.cea608parser&&(Z=te.cea608parser),te.errHandler&&R.setConfig({errHandler:te.errHandler}),te.BASE64&&R.setConfig({BASE64:te.BASE64}))},updatePeriods:function(te){if(!te)return null;Fe(),z=ce(te)},getIsTextTrack:function(te){return R.getIsText(te)},getUTCTimingSources:function(){var te=Oe();return R.getUTCTimingSources(te)},getSuggestedPresentationDelay:function(){var te=z.length>0?z[0].mpd:null;return R.getSuggestedPresentationDelay(te)},getAvailabilityStartTime:function(te){var re=ae(te);return R.getAvailabilityStartTime(re)},getIsTypeOf:function(te,re){return R.getIsTypeOf(te,re)},getIsDynamic:function(te){var re=Oe(te);return R.getIsDynamic(re)},getDuration:function(te){var re=Oe(te);return R.getDuration(re)},getRegularPeriods:ce,getContentSteering:function(te){return R.getContentSteering(te)},getLocation:function(te){return R.getLocation(te)},getPatchLocation:function(te){var re=R.getPatchLocation(te),G=R.getPublishTime(te);return re&&re.length!==0&&G?re.filter((function(Ie){return isNaN(Ie.ttl)||G.getTime()+Ie.ttl>new Date().getTime()})):[]},getManifestUpdatePeriod:function(te){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return R.getManifestUpdatePeriod(te,re)},getPublishTime:function(te){return R.getPublishTime(te)},getIsDVB:function(te){return R.hasProfile(te,"urn:dvb:dash:profile:dvb-dash:2014")},getIsPatch:function(te){return P.getIsPatch(te)},getBaseURLsFromElement:function(te){return R.getBaseURLsFromElement(te)},getRepresentationSortFunction:function(){return R.getRepresentationSortFunction()},getCodec:function(te,re,G){return R.getCodec(te,re,G)},getPeriodById:function(te){if(!te||z.length===0)return null;var re=z.filter((function(G){return G.id===te}));return re&&re.length>0?re[0]:null},setCurrentMediaInfo:function(te,re,G){W[te]=W[te]||{},W[te][re]=W[te][re]||{},W[te][re]=G},isPatchValid:function(te,re){var G=R.getId(te),Ie=P.getMpdId(re),we=R.getPublishTime(te),ke=P.getPublishTime(re),Ae=P.getOriginalPublishTime(re);return!!(G&&Ie&&G==Ie&&we&&Ae&&we.getTime()==Ae.getTime()&&ke&&we.getTime()<ke.getTime())},applyPatchToManifest:function(te,re){P.getPatchOperations(re).forEach((function(G){var Ie=G.getMpdTarget(te);if(Ie!==null){var we=Ie.name,ke=Ie.target,Ae=Ie.leaf;if(G.xpath.findsAttribute()||we==="__text")switch(G.action){case"add":case"replace":ke[we]=G.value;break;case"remove":delete ke[we]}else{var ue=(ke[we+"_asArray"]||[]).indexOf(Ae),Se=G.position==="prepend"||G.position==="before";if((G.action==="remove"||G.action==="replace")&&(delete ke[we],ue!=-1)){var qe=ke[we+"_asArray"];qe.splice(ue,1),qe.length>1?ke[we]=qe:qe.length==1?ke[we]=qe[0]:delete ke[we+"_asArray"]}G.action!=="add"&&G.action!=="replace"||Object.keys(G.value).forEach((function(gt){var ut=G.value[gt],mt=ke[gt+"_asArray"]||[];if(mt.length===0&&ke[gt]&&mt.push(ke[gt]),mt.length===0)mt=ut;else{var dt=mt.length;dt=gt==we&&ue!=-1?ue+(Se?0:1)+(G.action=="replace"?-1:0):Se?0:mt.length,mt.splice.apply(mt,[dt,0].concat(ut))}ke[gt+"_asArray"]=mt,ke[gt]=mt.length==1?mt[0]:mt}))}}}))},areMediaInfosEqual:_e,reset:He},R=cn(K).getInstance(),P=tu(K).getInstance(),He(),L}dd.__dashjs_factory_name="DashAdapter";var Fp=I.Z.getSingletonFactory(dd);function bm(L,R){for(var P=0;P<R.length;P++){var z=R[P];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(L,z.key,z)}}var wc=(function(){function L(){(function(z,W){if(!(z instanceof W))throw new TypeError("Cannot call a class as a function")})(this,L)}var R,P;return R=L,P=[{key:"round10",value:function(z,W){return(function(q,Z,K){return K===void 0||+K==0?Math[q](Z):(K=+K,(Z=+Z)===null||isNaN(Z)||typeof K!="number"||K%1!=0?NaN:(Z=Z.toString().split("e"),+((Z=(Z=Math[q](+(Z[0]+"e"+(Z[1]?+Z[1]-K:-K)))).toString().split("e"))[0]+"e"+(Z[1]?+Z[1]+K:K))))})("round",z,W)}}],P&&bm(R,P),L})(),Bu=function L(){(function(R,P){if(!(R instanceof P))throw new TypeError("Cannot call a class as a function")})(this,L),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]},_f=function L(){(function(R,P){if(!(R instanceof P))throw new TypeError("Cannot call a class as a function")})(this,L),this.t=null,this.mt=null,this.to=null,this.lto=null},Cs=function L(){(function(R,P){if(!(R instanceof P))throw new TypeError("Cannot call a class as a function")})(this,L),this.t=null,this.level=null},vh=function L(){(function(R,P){if(!(R instanceof P))throw new TypeError("Cannot call a class as a function")})(this,L),this.target=null,this.state=E.Z.BUFFER_EMPTY},_h=function L(){(function(R,P){if(!(R instanceof P))throw new TypeError("Cannot call a class as a function")})(this,L),this.time=null,this.range=null,this.manifestInfo=null},Oa=function L(){(function(R,P){if(!(R instanceof P))throw new TypeError("Cannot call a class as a function")})(this,L),this.time=null,this.droppedFrames=null};function Xs(L,R){if(!(L instanceof R))throw new TypeError("Cannot call a class as a function")}var Tc=function L(){Xs(this,L),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},xl=function L(){Xs(this,L),this.id=null,this.index=null,this.start=null,this.duration=null},Nl=function L(){Xs(this,L),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null},Sc=function L(){(function(R,P){if(!(R instanceof P))throw new TypeError("Cannot call a class as a function")})(this,L),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null},Em=function L(){(function(R,P){if(!(R instanceof P))throw new TypeError("Cannot call a class as a function")})(this,L),this.loadingRequests=[],this.executedRequests=[]};function bf(L){var R,P,z=(L=L||{}).settings,W=this.context,q=(0,A.Z)(W).getInstance();function Z(){q.trigger(_.Z.METRICS_CHANGED)}function K(ae){q.trigger(_.Z.METRIC_CHANGED,{mediaType:ae}),Z()}function le(ae,He,Oe){q.trigger(_.Z.METRIC_UPDATED,{mediaType:ae,metric:He,value:Oe}),K(ae)}function _e(ae,He,Oe){q.trigger(_.Z.METRIC_ADDED,{mediaType:ae,metric:He,value:Oe}),K(ae)}function fe(ae,He){var Oe=null;return ae&&(P.hasOwnProperty(ae)?Oe=P[ae]:He||(Oe=new Bu,P[ae]=Oe)),Oe}function Q(ae,He,Oe){var Be=fe(ae);Be!==null&&(Be[He].push(Oe),Be[He].length>z.get().streaming.metrics.maxListDepth&&Be[He].shift())}function ce(ae,He,Oe){Q(ae,He,Oe),_e(ae,He,Oe)}return R={clearCurrentMetricsForType:function(ae){delete P[ae],K(ae)},clearAllCurrentMetrics:function(){P={},Z()},getMetricsFor:fe,addHttpRequest:function ae(He,Oe,Be,Ke,me,Le,ge,Fe,F,se,te,re,G,Ie,we,ke,Ae){var ue=new Ye.w;Le!=null&&Le!==Ke&&(ae(He,null,Be,Ke,me,null,null,Fe,F,null,null,null,G,null,null,ke,Ae),ue.actualurl=Le),ue.tcpid=Oe,ue.type=Be,ue.url=Ke,ue.range=Fe,ue.trequest=F,ue.tresponse=se,ue.responsecode=re,ue.cmsd=Ae,ue._tfinish=te,ue._stream=He,ue._mediaduration=G,ue._quality=me,ue._responseHeaders=Ie,ue._serviceLocation=ge,ue._fileLoaderType=ke,we?we.forEach((function(Se){(function(qe,gt,ut,mt){var dt=new Ye.O;dt.s=gt,dt.d=ut,dt.b=mt,qe.trace.push(dt),qe.interval||(qe.interval=0),qe.interval+=ut})(ue,Se.s,Se.d,Se.b)})):(delete ue.interval,delete ue.trace),ce(He,E.Z.HTTP_REQUEST,ue)},addRepresentationSwitch:function(ae,He,Oe,Be,Ke){var me=new _f;me.t=He,me.mt=Oe,me.to=Be,Ke?me.lto=Ke:delete me.lto,ce(ae,E.Z.TRACK_SWITCH,me)},addBufferLevel:function(ae,He,Oe){var Be=new Cs;Be.t=He,Be.level=Oe,ce(ae,E.Z.BUFFER_LEVEL,Be)},addBufferState:function(ae,He,Oe){var Be=new vh;Be.target=Oe,Be.state=He,ce(ae,E.Z.BUFFER_STATE,Be)},addDVRInfo:function(ae,He,Oe,Be){var Ke=new _h;Ke.time=He,Ke.range=Be,Ke.manifestInfo=Oe,ce(ae,E.Z.DVR_INFO,Ke)},addDroppedFrames:function(ae,He){var Oe=new Oa,Be=fe(ae).DroppedFrames;He&&(Oe.time=He.creationTime,Oe.droppedFrames=He.droppedVideoFrames,Be.length>0&&Be[Be.length-1]==Oe||ce(ae,E.Z.DROPPED_FRAMES,Oe))},addSchedulingInfo:function(ae,He,Oe,Be,Ke,me,Le,ge,Fe){var F=new Sc;F.mediaType=ae,F.t=He,F.type=Oe,F.startTime=Be,F.availabilityStartTime=Ke,F.duration=me,F.quality=Le,F.range=ge,F.state=Fe,ce(ae,E.Z.SCHEDULING_INFO,F)},addRequestsQueue:function(ae,He,Oe){var Be=new Em;Be.loadingRequests=He,Be.executedRequests=Oe,fe(ae).RequestsQueue=Be,_e(ae,E.Z.REQUESTS_QUEUE,Be)},addManifestUpdate:function(ae,He,Oe,Be,Ke,me,Le,ge,Fe,F){var se=new Tc;se.mediaType=ae,se.type=He,se.requestTime=Oe,se.fetchTime=Be,se.availabilityStartTime=Ke,se.presentationStartTime=me,se.clientTimeOffset=Le,se.currentTime=ge,se.buffered=Fe,se.latency=F,Q(h.Z.STREAM,E.Z.MANIFEST_UPDATE,se),_e(ae,E.Z.MANIFEST_UPDATE,se)},updateManifestUpdateInfo:function(ae,He){if(ae){for(var Oe in He)ae[Oe]=He[Oe];le(ae.mediaType,E.Z.MANIFEST_UPDATE,ae)}},addManifestUpdateStreamInfo:function(ae,He,Oe,Be,Ke){if(ae){var me=new xl;me.id=He,me.index=Oe,me.start=Be,me.duration=Ke,ae.streamInfo.push(me),le(ae.mediaType,E.Z.MANIFEST_UPDATE_STREAM_INFO,ae)}},addManifestUpdateRepresentationInfo:function(ae,He,Oe,Be,Ke,me,Le,ge){if(ae&&ae.representationInfo){var Fe=new Nl;Fe.id=He,Fe.index=Oe,Fe.streamIndex=Be,Fe.mediaType=Ke,Fe.startNumber=Le,Fe.fragmentInfoType=ge,Fe.presentationTimeOffset=me,ae.representationInfo.push(Fe),le(ae.mediaType,E.Z.MANIFEST_UPDATE_TRACK_INFO,ae)}},addPlayList:function(ae){ae.trace&&Array.isArray(ae.trace)?ae.trace.forEach((function(He){He.hasOwnProperty("subreplevel")&&!He.subreplevel&&delete He.subreplevel})):delete ae.trace,ce(h.Z.STREAM,E.Z.PLAY_LIST,ae)},addDVBErrors:function(ae){ce(h.Z.STREAM,E.Z.DVB_ERRORS,ae)}},P={},R}bf.__dashjs_factory_name="MetricsModel";var Ac=I.Z.getSingletonFactory(bf);function fs(L){L=L||{};var R,P,z,W,q=this.context,Z=L.metricsModel;function K(fe){var Q=Z.getMetricsFor(fe,!0);if(!Q)return null;var ce,ae=Q.HttpList,He=null;if(!ae||ae.length<=0)return null;for(ce=ae.length-1;ce>=0;){if(ae[ce].responsecode){He=ae[ce];break}ce--}return He}function le(fe){var Q=Z.getMetricsFor(fe,!0);return Q&&Q.HttpList?Q.HttpList:[]}function _e(fe,Q){if(!fe)return null;var ce=fe[Q];return ce&&ce.length!==0?ce[ce.length-1]:null}return R={getCurrentRepresentationSwitch:function(fe){return _e(Z.getMetricsFor(fe,!0),E.Z.TRACK_SWITCH)},getCurrentBufferState:function(fe){return _e(Z.getMetricsFor(fe,!0),E.Z.BUFFER_STATE)},getCurrentBufferLevel:function(fe){var Q=_e(Z.getMetricsFor(fe,!0),E.Z.BUFFER_LEVEL);return Q?wc.round10(Q.level/1e3,-3):0},getCurrentHttpRequest:K,getHttpRequests:le,getCurrentDroppedFrames:function(){return _e(Z.getMetricsFor(h.Z.VIDEO,!0),E.Z.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(fe){return _e(Z.getMetricsFor(fe,!0),E.Z.SCHEDULING_INFO)},getCurrentDVRInfo:function(fe){return _e(fe?Z.getMetricsFor(fe,!0):Z.getMetricsFor(h.Z.VIDEO,!0)||Z.getMetricsFor(h.Z.AUDIO,!0),E.Z.DVR_INFO)},getCurrentManifestUpdate:function(){return _e(Z.getMetricsFor(h.Z.STREAM),E.Z.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(fe,Q){if(!Q)return null;var ce={},ae=K(fe);ae&&(ce=ze.Z.parseHttpHeaders(ae._responseHeaders));var He=ce[Q.toLowerCase()];return He===void 0?null:He},getLatestMPDRequestHeaderValueByID:function(fe){if(!fe)return null;var Q,ce,ae,He={};for(ae=(Q=le(h.Z.STREAM)).length-1;ae>=0;ae--)if((ce=Q[ae]).type===Ye.w.MPD_TYPE){He=ze.Z.parseHttpHeaders(ce._responseHeaders);break}var Oe=He[fe.toLowerCase()];return Oe===void 0?null:Oe},addRepresentationSwitch:function(fe,Q,ce,ae,He){Z.addRepresentationSwitch(fe,Q,ce,ae,He)},addDVRInfo:function(fe,Q,ce,ae){Z.addDVRInfo(fe,Q,ce,ae)},updateManifestUpdateInfo:function(fe){var Q=this.getCurrentManifestUpdate();Z.updateManifestUpdateInfo(Q,fe)},addManifestUpdateStreamInfo:function(fe){if(fe){var Q=this.getCurrentManifestUpdate();Z.addManifestUpdateStreamInfo(Q,fe.id,fe.index,fe.start,fe.duration)}},addManifestUpdateRepresentationInfo:function(fe,Q){if(fe){var ce=this.getCurrentManifestUpdate();Z.addManifestUpdateRepresentationInfo(ce,fe.id,fe.index,fe.streamIndex,Q,fe.presentationTimeOffset,fe.startNumber,fe.fragmentInfoType)}},addManifestUpdate:function(fe){Z.addManifestUpdate(h.Z.STREAM,fe.type,fe.requestStartDate,fe.requestEndDate)},addHttpRequest:function(fe,Q,ce,ae,He,Oe){Z.addHttpRequest(fe.mediaType,null,fe.type,fe.url,fe.quality,Q,fe.serviceLocation||null,fe.range||null,fe.requestStartDate,fe.firstByteDate,fe.requestEndDate,ce,fe.duration,ae,He,fe.fileLoaderType,Oe)},addSchedulingInfo:function(fe,Q){Z.addSchedulingInfo(fe.mediaType,new Date,fe.type,fe.startTime,fe.availabilityStartTime,fe.duration,fe.quality,fe.range,Q)},addRequestsQueue:function(fe,Q,ce){Z.addRequestsQueue(fe,Q,ce)},addBufferLevel:function(fe,Q,ce){Z.addBufferLevel(fe,Q,ce)},addBufferState:function(fe,Q,ce){Z.addBufferState(fe,Q,ce)},addDroppedFrames:function(fe){Z.addDroppedFrames(h.Z.VIDEO,fe)},addPlayList:function(){W&&(Z.addPlayList(W),W=null)},addDVBErrors:function(fe){Z.addDVBErrors(fe)},createPlaylistMetrics:function(fe,Q){(W=new nt).start=new Date,W.mstart=fe,W.starttype=Q},createPlaylistTraceMetrics:function(fe,Q,ce){P===!0&&(P=!1,(z=new rt).representationid=fe,z.start=new Date,z.mstart=Q,z.playbackspeed=ce!==null?ce.toString():null)},updatePlayListTraceMetrics:function(fe){if(z)for(var Q in z)z[Q]=fe[Q]},pushPlayListTraceMetrics:function(fe,Q){if(P===!1&&W&&z&&z.start){var ce=z.start,ae=fe.getTime()-ce.getTime();z.duration=ae,z.stopreason=Q,W.trace.push(z),P=!0}},clearAllCurrentMetrics:function(){Z.clearAllCurrentMetrics()}},Z=Z||Ac(q).getInstance({settings:L.settings}),P=!0,z=null,W=null,R}fs.__dashjs_factory_name="DashMetrics";var da=I.Z.getSingletonFactory(fs);function uo(){var L,R,P,z,W=this.context,q=(0,A.Z)(W).getInstance(),Z=(0,Ce.Z)(W).getInstance();function K(Ke){z=Ke}function le(Ke,me,Le,ge){var Fe,F=me.adaptation.period.mpd,se=F.availabilityStartTime;if(ge)Fe=Le&&F.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(se.getTime()+1e3*(Ke+F.timeShiftBufferDepth)):F.availabilityEndTime;else if(Le){var te=me.availabilityTimeOffset;Fe=new Date(se.getTime()+1e3*(Ke-te))}else Fe=se;return Fe}function _e(Ke,me){return(Ke.getTime()-me.mpd.availabilityStartTime.getTime()+1e3*z)/1e3}function fe(Ke,me){return Ke+(me.adaptation.period.start-me.presentationTimeOffset)}function Q(Ke){var me={start:NaN,end:NaN},Le=Ke[0].getAdapter().getRegularPeriods()[0],ge=_e(new Date,Le);if(!Ke||Ke.length===0)return{range:me,now:ge};Ke.forEach((function(F){var se=F.getAdapter(),te=se.getMediaInfoForType(F.getStreamInfo(),h.Z.VIDEO)||se.getMediaInfoForType(F.getStreamInfo(),h.Z.AUDIO),re=se.getVoRepresentations(te)[0],G={start:NaN,end:NaN};if(re)if(re.segmentInfoType===p.Z.SEGMENT_TIMELINE)G=(function(we){var ke,Ae,ue,Se,qe=we.adaptation.period.mpd.manifest.Period_asArray[we.adaptation.period.index].AdaptationSet_asArray[we.adaptation.index],gt=R.getRepresentationFor(we.index,qe),ut=gt.SegmentTemplate||gt.SegmentList,mt=ut.SegmentTimeline,dt=ut.timescale,zt=mt.S_asArray,Ut={start:0,end:0},Ft=zt[0].t,Bt=!isNaN(Ft),Nn=Bt?Ft:0,lt=0;for(Bt&&(Ut.start=fe(Nn/dt,we)),ue=0,Se=zt.length;ue<Se;ue++)Ae=0,(ke=zt[ue]).hasOwnProperty("r")&&(Ae=ke.r),lt+=ke.d*(1+Ae);return Ut.end=fe((Nn+lt)/dt,we),Ut})(re);else{var Ie=re.adaptation.period;G.start=Ie.start,G.end=Math.max(ge,Ie.start+Ie.duration)}!isNaN(G.start)&&(isNaN(me.start)||me.start>G.start)&&(me.start=G.start),!isNaN(G.end)&&(isNaN(me.end)||me.end<G.end)&&(me.end=G.end)})),me.end=Math.min(ge,me.end);var Fe=ae(Ke,me.end,!0);return me.end=isNaN(Fe)?me.end:Fe,me.start=Le&&Le.mpd&&Le.mpd.timeShiftBufferDepth&&!isNaN(Le.mpd.timeShiftBufferDepth)&&!isNaN(me.end)?Math.max(me.end-Le.mpd.timeShiftBufferDepth,me.start):me.start,me.start=ae(Ke,me.start),{range:me,now:ge}}function ce(Ke,me){P=Ke-me.end}function ae(Ke,me){var Le=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{for(var ge=0,Fe=!1,F=NaN;!Fe&&ge<Ke.length;){var se=Ke[ge].getStreamInfo();se.start<=me&&(!isFinite(se.duration)||se.start+se.duration>=me)?(F=me,Fe=!0):!Le&&se.start>me&&(isNaN(F)||se.start<F)?F=se.start:Le&&se.start+se.duration<me&&(isNaN(F)||se.start+se.duration>F)&&(F=se.start+se.duration),ge+=1}return F}catch{return me}}function He(Ke){Ke.offset===void 0||isNaN(Ke.offset)||K(Ke.offset/1e3)}function Oe(){z=0,P=0}function Be(){q.off(_.Z.UPDATE_TIME_SYNC_OFFSET,He,this),Oe()}return L={initialize:function(){Oe(),q.on(_.Z.UPDATE_TIME_SYNC_OFFSET,He,this)},getClientTimeOffset:function(){return z},setClientTimeOffset:K,getClientReferenceTime:function(){return Date.now()-1e3*P+1e3*z},calcAvailabilityStartTimeFromPresentationTime:function(Ke,me,Le){return le(Ke,me,Le)},calcAvailabilityEndTimeFromPresentationTime:function(Ke,me,Le){return le(Ke,me,Le,!0)},calcPresentationTimeFromWallTime:_e,calcPresentationTimeFromMediaTime:fe,calcPeriodRelativeTimeFromMpdRelativeTime:function(Ke,me){return me-Ke.adaptation.period.start},calcMediaTimeFromPresentationTime:function(Ke,me){return Ke-me.adaptation.period.start+me.presentationTimeOffset},calcWallTimeForSegment:function(Ke,me){var Le,ge,Fe;return me&&(Le=Ke.representation.adaptation.period.mpd.suggestedPresentationDelay,ge=Ke.presentationStartTime+Le,Fe=new Date(Ke.availabilityStartTime.getTime()+1e3*ge)),Fe},calcTimeShiftBufferWindow:function(Ke,me){if(!me)return(function(ge){var Fe={start:NaN,end:NaN},F=0,se=NaN;return ge.forEach((function(te){var re=te.getStreamInfo();F+=re.duration,(isNaN(se)||re.start<se)&&(se=re.start)})),Fe.start=se,Fe.end=se+F,Fe})(Ke);if(Z.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){var Le=Q(Ke);return ce(Le.now,Le.range),Le.range}return(function(ge){var Fe={start:NaN,end:NaN};if(!ge||ge.length===0)return Fe;var F=ge[0].getAdapter().getRegularPeriods()[0],se=_e(new Date,F),te=F.mpd.timeShiftBufferDepth,re=isNaN(te)?0:se-te;if(Fe.start=ae(ge,re),Fe.end=!isNaN(Fe.start)&&se<Fe.start?se:ae(ge,se,!0),!isNaN(te)&&Fe.end<se-te&&(Fe.end=NaN),Z.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){var G=Q(ge);if(G.range.end<Fe.start)return q.trigger(v.Z.CONFORMANCE_VIOLATION,{level:Ao.LEVELS.WARNING,event:Ao.EVENTS.INVALID_DVR_WINDOW}),ce(G.now,G.range),G.range}return Fe})(Ke)},reset:Be},R=cn(W).getInstance(),Be(),L}uo.__dashjs_factory_name="TimelineConverter";var al=I.Z.getSingletonFactory(uo),La=f(4593),Ic=f(6934);function ll(L){return ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},ll(L)}function Rs(L,R){return Rs=Object.setPrototypeOf||function(P,z){return P.__proto__=z,P},Rs(L,R)}function wm(L,R){return!R||ll(R)!=="object"&&typeof R!="function"?(function(P){if(P===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P})(L):R}function Zu(L){return Zu=Object.setPrototypeOf?Object.getPrototypeOf:function(R){return R.__proto__||Object.getPrototypeOf(R)},Zu(L)}var $p=(function(L){(function(q,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Super expression must either be null or a function");q.prototype=Object.create(Z&&Z.prototype,{constructor:{value:q,writable:!0,configurable:!0}}),Z&&Rs(q,Z)})(W,L);var R,P,z=(R=W,P=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}})(),function(){var q,Z=Zu(R);if(P){var K=Zu(this).constructor;q=Reflect.construct(Z,arguments,K)}else q=Z.apply(this,arguments);return wm(this,q)});function W(){var q;return(function(Z,K){if(!(Z instanceof K))throw new TypeError("Cannot call a class as a function")})(this,W),(q=z.call(this)).captionData=null,q.label=null,q.defaultTrack=!1,q.kind=null,q.isFragmented=!1,q.isEmbedded=!1,q.isTTML=null,q}return W})(cs),Ol=f(2295);function ul(){var L=0;function R(K){for(var le="",_e=0;_e<K.length;++_e)le+=K[_e].uchar;return le.length-le.replace(/^\s+/,"").length}function P(K){return"left: "+3.125*K.x+"%; top: "+6.66*K.y1+"%; width: "+(100-3.125*K.x)+"%; height: "+6.66*Math.max(K.y2-1-K.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function z(K){return K==="red"?"rgb(255, 0, 0)":K==="green"?"rgb(0, 255, 0)":K==="blue"?"rgb(0, 0, 255)":K==="cyan"?"rgb(0, 255, 255)":K==="magenta"?"rgb(255, 0, 255)":K==="yellow"?"rgb(255, 255, 0)":K==="white"?"rgb(255, 255, 255)":K==="black"?"rgb(0, 0, 0)":K}function W(K,le){var _e=K.videoHeight/15;return le?"font-size: "+_e+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(le.foreground?z(le.foreground):"rgb(255, 255, 255)")+"; font-style: "+(le.italics?"italic":"normal")+"; text-decoration: "+(le.underline?"underline":"none")+"; white-space: pre; background-color: "+(le.background?z(le.background):"transparent")+";":"font-size: "+_e+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function q(K){return K.replace(/^\s+/g,"")}function Z(K){return K.replace(/\s+$/g,"")}return{createHTMLCaptionsFromScreen:function(K,le,_e,fe){var Q,ce,ae=null,He=!1,Oe=-1,Be={start:le,end:_e,spans:[]},Ke="style_cea608_white_black",me={},Le={},ge=[];for(Q=0;Q<15;++Q){var Fe=fe.rows[Q],F="",se=null;if(Fe.isEmpty()===!1){var te=R(Fe.chars);ae===null&&(ae={x:te,y1:Q,y2:Q+1,p:[]}),te!==Oe&&He&&(ae.p.push(Be),Be={start:le,end:_e,spans:[]},ae.y2=Q,ae.name="region_"+ae.x+"_"+ae.y1+"_"+ae.y2,me.hasOwnProperty(ae.name)===!1?(ge.push(ae),me[ae.name]=ae):me[ae.name].p.contat(ae.p),ae={x:te,y1:Q,y2:Q+1,p:[]});for(var re=0;re<Fe.chars.length;++re){var G=Fe.chars[re],Ie=G.penState;if(se===null||!Ie.equals(se)){F.trim().length>0&&(Be.spans.push({name:Ke,line:F,row:Q}),F="");var we="style_cea608_"+Ie.foreground+"_"+Ie.background;Ie.underline&&(we+="_underline"),Ie.italics&&(we+="_italics"),Le.hasOwnProperty(we)||(Le[we]=JSON.parse(JSON.stringify(Ie))),se=Ie,Ke=we}F+=G.uchar}F.trim().length>0&&Be.spans.push({name:Ke,line:F,row:Q}),He=!0,Oe=te}else He=!1,Oe=-1,ae&&(ae.p.push(Be),Be={start:le,end:_e,spans:[]},ae.y2=Q,ae.name="region_"+ae.x+"_"+ae.y1+"_"+ae.y2,me.hasOwnProperty(ae.name)===!1?(ge.push(ae),me[ae.name]=ae):me[ae.name].p.contat(ae.p),ae=null)}ae&&(ae.p.push(Be),ae.y2=Q+1,ae.name="region_"+ae.x+"_"+ae.y1+"_"+ae.y2,me.hasOwnProperty(ae.name)===!1?(ge.push(ae),me[ae.name]=ae):me[ae.name].p.contat(ae.p),ae=null);var ke=[];for(Q=0;Q<ge.length;++Q){var Ae=ge[Q],ue="sub_cea608_"+L++,Se=document.createElement("div");Se.id=ue;var qe=P(Ae);Se.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+qe;var gt=document.createElement("div");gt.className="paragraph bodyStyle",gt.style.cssText=W(K);var ut=document.createElement("div");ut.className="cueUniWrapper",ut.style.cssText="unicode-bidi: normal; direction: ltr;";for(var mt=0;mt<Ae.p.length;++mt){var dt=Ae.p[mt],zt=0;for(ce=0;ce<dt.spans.length;++ce){var Ut=dt.spans[ce];if(Ut.line.length>0){if(ce!==0&&zt!=Ut.row){var Ft=document.createElement("br");Ft.className="lineBreak",ut.appendChild(Ft)}var Bt=!1;zt===Ut.row&&(Bt=!0),zt=Ut.row;var Nn=Le[Ut.name],lt=document.createElement("span");lt.className="spanPadding "+Ut.name+" customSpanColor",lt.style.cssText=W(K,Nn),ce!==0&&Bt?ce===dt.spans.length-1?lt.textContent=Z(Ut.line):lt.textContent=Ut.line:dt.spans.length>1&&ce<dt.spans.length-1&&Ut.row===dt.spans[ce+1].row?lt.textContent=q(Ut.line):lt.textContent=Ut.line.trim(),ut.appendChild(lt)}}}gt.appendChild(ut),Se.appendChild(gt);var bt={bodyStyle:["%",90]};for(var tn in Le)Le.hasOwnProperty(tn)&&(bt[tn]=["%",90]);ke.push({type:"html",start:le,end:_e,cueHTMLElement:Se,cueID:ue,cellResolution:[32,15],isFromCEA608:!0,fontSize:bt,lineHeight:{},linePadding:{}})}return ke}}}ul.__dashjs_factory_name="EmbeddedTextHtmlRender";var Tm=I.Z.getSingletonFactory(ul);function Ef(L){var R,P,z,W,q,Z,K,le,_e,fe,Q,ce,ae,He,Oe,Be,Ke,me=L.errHandler,Le=L.manifestModel,ge=L.mediaController,Fe=L.videoModel,F=L.textTracks,se=L.vttParser,te=L.vttCustomRenderingParser,re=L.ttmlParser,G=L.streamInfo,Ie=L.settings,we=this.context,ke=(0,A.Z)(we).getInstance(),Ae=!1;function ue(){Z=null,le=NaN,_e=[],fe=null,K=!1,q=[],W=null}function Se(Ft){var Bt=new $p;for(var Nn in Ft)Bt[Nn]=Ft[Nn];Bt.labels=Ft.labels,Bt.defaultTrack=(function(lt){var bt=!1;return ce.length>1&&lt.isEmbedded?bt=lt.id&&lt.id===h.Z.CC1:ce.length===1?lt.id&&typeof lt.id=="string"&&lt.id.substring(0,2)==="CC"&&(bt=!0):ce.length===0&&(bt=lt.index===q[0].index),bt})(Ft),Bt.isFragmented=Ft.isFragmented,Bt.isEmbedded=!!Ft.isEmbedded,Bt.isTTML=(function(lt){return lt.codec&&lt.codec.search(h.Z.STPP)>=0||lt.mimeType&&lt.mimeType.search(h.Z.TTML)>=0})(Ft),Bt.kind=(function(lt,bt){var tn=lt.roles&&lt.roles.length>0?bt[lt.roles[0]]:bt.caption;return tn=tn===bt.caption||tn===bt.subtitle?tn:bt.caption})(Ft,{subtitle:"subtitles",caption:"captions"}),F.addTextTrack(Bt)}function qe(Ft){var Bt=Ft.chunk;Bt.mediaInfo.embeddedCaptions&&ut(Bt.bytes,Bt)}function gt(Ft){Q=Ft}function ut(Ft,Bt){var Nn=Bt.mediaInfo,lt=Nn.type,bt=Nn.mimeType,tn=Nn.codec||bt;tn?Nn.codec.indexOf("application/mp4")!==-1?(function(Lt,an,ln){var Xt;if(an.segmentType==="InitializationSegment")K=!0,le=z.getMediaTimescaleFromMoov(Lt);else{if(!K)return;(Xt=z.getSamplesInfo(Lt).sampleList).length>0&&(fe=Xt[0].cts-an.start*le),ln.search(h.Z.STPP)>=0?(function(Vn,Mn,gr){var vr,Ct;for(W=W!==null?W:zt(gr),vr=0;vr<Mn.length;vr++){var rn=Mn[vr],Ht=rn.cts,yn=dt(),In=yn+Ht/le,Wn=In+rn.duration/le;R.buffered.add(In,Wn);var Hn=new DataView(Vn,rn.offset,rn.subSizes[0]),Yn=Ic.Utils.dataViewToString(Hn,h.Z.UTF8),rr=[],Yt=rn.offset+rn.subSizes[0];for(Ct=1;Ct<rn.subSizes.length;Ct++){var Tn=new Uint8Array(Vn,Yt,rn.subSizes[Ct]),Dn=String.fromCharCode.apply(null,Tn);rr.push(Dn),Yt+=rn.subSizes[Ct]}try{var Fn=Le.getValue().ttmlTimeIsRelative?Ht/le:0,Zn=W.parse(Yn,Fn,Ht/le,(Ht+rn.duration)/le,rr);F.addCaptions(Q,yn,Zn)}catch(Rt){Z.removeExecutedRequestsBeforeTime(),this.remove(),P.error("TTML parser error: "+Rt.message)}}})(Lt,Xt,ln):(function(Vn,Mn){var gr,vr,Ct,rn=[];for(gr=0;gr<Mn.length;gr++){var Ht=Mn[gr];Ht.cts-=fe;var yn=dt()+Ht.cts/le,In=yn+Ht.duration/le;R.buffered.add(yn,In);var Wn=Vn.slice(Ht.offset,Ht.offset+Ht.size),Hn=Ic.parseBuffer(Wn);for(vr=0;vr<Hn.boxes.length;vr++){var Yn=Hn.boxes[vr];if(P.debug("VTT box1: "+Yn.type),Yn.type!=="vtte"&&Yn.type==="vttc"){P.debug("VTT vttc boxes.length = "+Yn.boxes.length);var rr={styles:{}};for(Ct=0;Ct<Yn.boxes.length;Ct++){var Yt=Yn.boxes[Ct];if(P.debug("VTT box2: "+Yt.type),Yt.type==="payl")rr.start=Ht.cts/le,rr.end=(Ht.cts+Ht.duration)/le,rr.data=Yt.cue_text;else if(Yt.type==="sttg"&&Yt.settings&&Yt.settings!=="")try{var Tn=Yt.settings.split(" ");rr.styles=se.getCaptionStyles(Tn)}catch{}}rr&&rr.data&&(rn.push(rr),P.debug("VTT  ".concat(rr.start," - ").concat(rr.end," :  ").concat(rr.data)))}}}rn.length>0&&F.addCaptions(Q,0,rn)})(Lt,Xt)}})(Ft,Bt,tn):lt===h.Z.VIDEO?(function(Lt,an){var ln,Xt;if(an.segmentType===Ye.w.INIT_SEGMENT_TYPE)ae===0&&(ae=z.getMediaTimescaleFromMoov(Lt));else if(an.segmentType===Ye.w.MEDIA_SEGMENT_TYPE){if(ae===0)return void P.warn("CEA-608: No timescale for embeddedTextTrack yet");var Vn=(Xt=z.getSamplesInfo(Lt)).lastSequenceNumber,Mn=Math.trunc(an.start),gr=Math.trunc(an.end);if(Be[0]||Be[1]||(function(){for(var yn,In=0;In<ce.length;In++){if((yn=F.getTrackIdxForId(ce[In].id))===-1)return void P.warn("CEA-608: data before track is ready.");var Wn=mt(yn);Be[In]=new(y()).Cea608Parser(In+1,{newCue:Wn},null)}})(),ae){if((function(yn,In,Wn,Hn,Yn){return yn!==null&&In!==null&&Hn!==null&&Yn!==null&&(In===yn?Hn!==Yn:In!==yn+Wn)})(He,Vn,Xt.numSequences,Oe,Mn))for(ln=0;ln<Be.length;ln++)Be[ln]&&Be[ln].reset();for(var vr=(function(yn,In){if(In.length===0)return null;for(var Wn={splits:[],fields:[[],[]]},Hn=new DataView(yn),Yn=0;Yn<In.length;Yn++)for(var rr=In[Yn],Yt=y().findCea608Nalus(Hn,rr.offset,rr.size),Tn=null,Dn=0,Fn=0;Fn<Yt.length;Fn++)for(var Zn=y().extractCea608DataFromRange(Hn,Yt[Fn]),Rt=0;Rt<2;Rt++)if(Zn[Rt].length>0){rr.cts!==Tn?Dn=0:Dn+=1;var ft=dt();Wn.fields[Rt].push([rr.cts+ft*ae,Zn[Rt],Dn]),Tn=rr.cts}return Wn.fields.forEach((function(Kt){Kt.sort((function(We,tt){return We[0]===tt[0]?We[2]-tt[2]:We[0]-tt[0]}))})),Wn})(Lt,Xt.sampleList),Ct=0;Ct<Be.length;Ct++){var rn=vr.fields[Ct],Ht=Be[Ct];if(Ht)for(ln=0;ln<rn.length;ln++)Ht.addData(rn[ln][0]/ae,rn[ln][1])}He=Vn,Oe=gr}}})(Ft,Bt):(function(Lt,an,ln){var Xt,Vn,Mn=new DataView(Lt,0,Lt.byteLength);Vn=Ic.Utils.dataViewToString(Mn,h.Z.UTF8);try{Xt=zt(ln).parse(Vn,0),F.addCaptions(F.getCurrentTrackIdx(),0,Xt),R.buffered&&R.buffered.add(an.start,an.end)}catch(gr){me.error(new ve.Z(oe.TIMED_TEXT_ERROR_ID_PARSE_CODE,oe.TIMED_TEXT_ERROR_MESSAGE_PARSE+gr.message,Vn))}})(Ft,Bt,tn):P.error("No text type defined")}function mt(Ft){return function(Bt,Nn,lt){var bt;(bt=Fe.getTTMLRenderingDiv()?Ke.createHTMLCaptionsFromScreen(Fe.getElement(),Bt,Nn,lt):[{start:Bt,end:Nn,data:lt.getDisplayText(),styles:{}}])&&F.addCaptions(Ft,0,bt)}}function dt(){return isNaN(R.timestampOffset)?0:R.timestampOffset}function zt(Ft){var Bt;return Ft.search(h.Z.VTT)>=0?Bt=Ie.get().streaming.text.webvtt.customRenderingEnabled&&te?te:se:(Ft.search(h.Z.TTML)>=0||Ft.search(h.Z.STPP)>=0)&&(Bt=re),Bt}function Ut(Ft){ce.forEach((function(Bt){var Nn=F.getTrackIdxForId(Bt.id);Nn>=0&&F.deleteCuesFromTrackIdx(Nn,Ft.from,Ft.to)}))}return R={initialize:function(){Ae||(ce=[],Q=null,ae=0,Be=[],He=null,Oe=null,Ae=!0,Ke=Tm(we).getInstance(),ke.on(_.Z.VIDEO_CHUNK_RECEIVED,qe,R),ke.on(_.Z.BUFFER_CLEARED,Ut,R))},addMediaInfos:function(Ft,Bt,Nn){if(q=q.concat(Bt),Ft===h.Z.TEXT&&Bt[0].isFragmented&&!Bt[0].isEmbedded){Z=Nn,R.buffered=(0,Ol.Z)(we).create(),_e=ge.getTracksFor(h.Z.TEXT,G.id).filter((function(Lt){return Lt.isFragmented}));for(var lt=ge.getCurrentTrackFor(h.Z.TEXT,G.id),bt=0;bt<_e.length;bt++)if(_e[bt]===lt){gt(bt);break}}for(var tn=0;tn<Bt.length;tn++)Se(Bt[tn])},resetMediaInfos:function(){q=[]},getStreamId:function(){return G.id},append:ut,abort:function(){},addEmbeddedTrack:function(Ft){if(Ae&&Ft)if(Ft.id===h.Z.CC1||Ft.id===h.Z.CC3){for(var Bt=0;Bt<ce.length;Bt++)if(ce[Bt].id===Ft.id)return;ce.push(Ft)}else P.warn("Embedded track "+Ft.id+" not supported!")},resetEmbedded:function(){ke.off(_.Z.VIDEO_CHUNK_RECEIVED,qe,R),ke.off(_.Z.BUFFER_CLEARED,Ut,R),F&&F.deleteAllTextTracks(),Ae=!1,ce=[],Be=[null,null],He=null,Oe=null},getConfig:function(){return{fragmentModel:Z,fragmentedTracks:_e,videoModel:Fe}},setCurrentFragmentedTrackIdx:gt,remove:function(Ft,Bt){Ft===void 0&&Ft===Bt&&(Ft=R.buffered.start(0),Bt=R.buffered.end(R.buffered.length-1)),R.buffered.remove(Ft,Bt),F.deleteCuesFromTrackIdx(Q,Ft,Bt)},reset:function(){ue(),q=[],z=null}},P=(0,C.Z)(we).getInstance().getLogger(R),z=(0,wl.Z)(we).getInstance(),ue(),R}Ef.__dashjs_factory_name="TextSourceBuffer";var Cc=I.Z.getClassFactory(Ef),bh=f(4403);function Eh(L,R){(R==null||R>L.length)&&(R=L.length);for(var P=0,z=new Array(R);P<R;P++)z[P]=L[P];return z}var Io=["text","align","fontSize","id","isd","line","lineAlign","lineHeight","linePadding","position","positionAlign","region","size","snapToLines","vertical"];function hd(L){var R,P,z,W,q,Z,K,le,_e,fe,Q,ce,ae,He,Oe,Be,Ke,me,Le,ge,Fe=this.context,F=(0,A.Z)(Fe).getInstance(),se=L.videoModel,te=L.streamInfo,re=L.settings;function G(Ct,rn,Ht,yn,In,Wn){var Hn=0,Yn=0;Ct/rn>Ht/yn?Hn=(Yn=rn)/yn*Ht:Yn=(Hn=Ct)/Ht*yn;var rr,Yt,Tn=0,Dn=0;return Hn/Yn>In?(Dn=Yn,Tn=Yn*In):(Tn=Hn,Dn=Hn/In),rr=(Ct-Tn)/2,Yt=(rn-Dn)/2,Wn?{x:rr+.1*Tn,y:Yt+.1*Dn,w:.8*Tn,h:.8*Dn}:{x:rr,y:Yt,w:Tn,h:Dn}}function Ie(Ct,rn){var Ht=se.getClientWidth(),yn=se.getClientHeight(),In=se.getVideoWidth(),Wn=se.getVideoHeight(),Hn=se.getVideoRelativeOffsetTop(),Yn=se.getVideoRelativeOffsetLeft();if(In!==0&&Wn!==0){var rr=In/Wn,Yt=!1;Ct.isFromCEA608&&(rr=1.1666666666666667,Yt=!0);var Tn=G.call(this,Ht,yn,In,Wn,rr,Yt),Dn=Tn.w,Fn=Tn.h,Zn=Tn.x,Rt=Tn.y;if(Dn!=_e||Fn!=fe||Zn!=K||Rt!=le||rn){if(K=Zn+Yn,le=Rt+Hn,_e=Dn,fe=Fn,Q){var ft=Q.style;ft&&(ft.left=K+"px",ft.top=le+"px",ft.width=_e+"px",ft.height=fe+"px",ft.zIndex=He&&document[He]||Oe?Ke:null,F.trigger(v.Z.CAPTION_CONTAINER_RESIZE))}var Kt=Ct.activeCues;if(Kt)for(var We=Kt.length,tt=0;tt<We;++tt){var Mt=Kt[tt];Mt.scaleCue(Mt)}}}}function we(Ct){var rn,Ht,yn,In,Wn,Hn=_e,Yn=fe;if(Ct.cellResolution){var rr=[Hn/Ct.cellResolution[0],Yn/Ct.cellResolution[1]];if(Ct.linePadding){for(rn in Ct.linePadding)if(Ct.linePadding.hasOwnProperty(rn)){Ht=(Ct.linePadding[rn]*rr[0]).toString();for(var Yt=document.getElementsByClassName("spanPadding"),Tn=0;Tn<Yt.length;Tn++)Yt[Tn].style.cssText=Yt[Tn].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Ht),Yt[Tn].style.cssText=Yt[Tn].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Ht)}}if(Ct.fontSize){for(rn in Ct.fontSize)if(Ct.fontSize.hasOwnProperty(rn)){Ct.fontSize[rn][0]==="%"?yn=Ct.fontSize[rn][1]/100:Ct.fontSize[rn][0]==="c"&&(yn=Ct.fontSize[rn][1]),Ht=(yn*rr[1]).toString(),Wn=rn!=="defaultFontSize"?document.getElementsByClassName(rn):document.getElementsByClassName("paragraph");for(var Dn=0;Dn<Wn.length;Dn++)Wn[Dn].style.cssText=Wn[Dn].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Ht)}if(Ct.lineHeight){for(rn in Ct.lineHeight)if(Ct.lineHeight.hasOwnProperty(rn)){Ct.lineHeight[rn][0]==="%"?In=Ct.lineHeight[rn][1]/100:Ct.fontSize[rn][0]==="c"&&(In=Ct.lineHeight[rn][1]),Ht=(In*rr[1]).toString(),Wn=document.getElementsByClassName(rn);for(var Fn=0;Fn<Wn.length;Fn++)Wn[Fn].style.cssText=Wn[Fn].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Ht)}}}}if(Ct.isd){var Zn=document.getElementById(Ct.cueID);Zn&&Q.removeChild(Zn),Ae(Ct)}}function ke(Ct,rn){var Ht=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,yn=/^#(.*)$/;if(Ht.test(rn)){var In=Ht.exec(rn),Wn=parseInt(In[4],10)-1;return"data:image/png;base64,"+btoa(Ct.images[Wn])}if(yn.test(rn)){var Hn=yn.exec(rn)[1];return"data:image/png;base64,"+Ct.embeddedImages[Hn]}return rn}function Ae(Ct){if(Q){vr.call(this);var rn=document.createElement("div");Q.appendChild(rn),Be=(0,bh.renderHTML)(Ct.isd,rn,(function(Ht){return ke(Ct,Ht)}),Q.clientHeight,Q.clientWidth,re.get().streaming.text.imsc.displayForcedOnlyMode,(function(Ht){P.info("renderCaption :",Ht)}),Be,re.get().streaming.text.imsc.enableRollUp),rn.id=Ct.cueID,F.trigger(v.Z.CAPTION_RENDERED,{captionDiv:rn,currentTrackIdx:Z})}}function ue(Ct,rn){return!!rn&&rn.endTime>=Ct.startTime}function Se(Ct,rn){return!!re.get().streaming.text.extendSegmentedCues&&!!(function(Ht,yn,In){for(var Wn=0;Wn<In.length;Wn++){var Hn=In[Wn];if(JSON.stringify(Ht[Hn])!==JSON.stringify(yn[Hn]))return!1}return!0})(rn,Ct,Io)&&(rn.endTime=Math.max(rn.endTime,Ct.endTime),!0)}function qe(Ct,rn){rn&&rn.forEach((function(Ht){Ht.kind&&Ht.kind==="image"&&(Ht.src=ke(Ct,Ht.src)),qe(Ct,Ht.contents)}))}function gt(Ct,rn,Ht){var yn=bt(Ct),In=re.get().streaming.text.dispatchForManualRendering;if(yn&&Array.isArray(Ht)&&Ht.length!==0)for(var Wn=0;Wn<Ht.length;Wn++){var Hn=null,Yn=Ht[Wn];yn.cellResolution=Yn.cellResolution,yn.isFromCEA608=Yn.isFromCEA608,isNaN(Yn.start)||isNaN(Yn.end)||(In?Hn=ut(Yn,rn):Ft(Yn)&&Q?Hn=zt(Yn,rn,yn):Yn.data&&(Hn=Ut(Yn,rn,yn)));try{if(Hn){if(!an(yn,Hn))if(re.get().streaming.text.webvtt.customRenderingEnabled)yn.manualCueList||(yn.manualCueList=[]),yn.manualCueList.push(Hn);else{var rr=void 0;yn.cues&&yn.cues.length!==0&&(rr=yn.cues[yn.cues.length-1]),ue(Hn,rr)?Se(Hn,rr)||(rr.isd&&(rr.onexit=function(){}),yn.mode!==h.Z.TEXT_DISABLED&&yn.addCue(Hn)):yn.mode!==h.Z.TEXT_DISABLED&&yn.addCue(Hn)}var Yt=re.get().streaming.buffer.bufferToKeep;Xt(yn,0,se.getTime()-Yt)}else P.error("Impossible to display subtitles. You might have missed setting a TTML rendering div via player.attachTTMLRenderingDiv(TTMLRenderingDiv)")}catch(Tn){throw Vn(yn),yn.addCue(Hn),Tn}}}function ut(Ct,rn){var Ht=Bt(Ct,rn);return Ht.onenter=function(){Ft(Ct)&&ge&&ge.cueID!==Ht.cueID&&dt(ge),delete Ht.type,ge=Ht,mt(Ht)},Ht.onexit=function(){dt(Ht),ge=null},Ht}function mt(Ct){F.trigger(v.Z.CUE_ENTER,Ct)}function dt(Ct){F.trigger(v.Z.CUE_EXIT,{cueID:Ct.cueID})}function zt(Ct,rn,Ht){var yn=this,In=Bt(Ct,rn);return Q.style.left=K+"px",Q.style.top=le+"px",Q.style.width=_e+"px",Q.style.height=fe+"px",In.onenter=function(){var Wn=this;Ht.mode===h.Z.TEXT_SHOWING&&(this.isd?(Le?requestAnimationFrame((function(){return Ae(Wn)})):Ae(this),P.debug("Cue enter id:"+this.cueID)):(Q.appendChild(this.cueHTMLElement),we.call(yn,this),F.trigger(v.Z.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:Z})))},In.onexit=function(){if(Q)for(var Wn=Q.childNodes,Hn=0;Hn<Wn.length;++Hn)Wn[Hn].id===this.cueID&&(P.debug("Cue exit id:"+Wn[Hn].id),Q.removeChild(Wn[Hn]),--Hn)},In}function Ut(Ct,rn,Ht){var yn=Bt(Ct,rn);if(yn.isActive=!1,Ct.styles)try{Ct.styles.align!==void 0&&"align"in yn&&(yn.align=Ct.styles.align),Ct.styles.line!==void 0&&"line"in yn&&(yn.line=Ct.styles.line),Ct.styles.snapToLines!==void 0&&"snapToLines"in yn&&(yn.snapToLines=Ct.styles.snapToLines),Ct.styles.position!==void 0&&"position"in yn&&(yn.position=Ct.styles.position),Ct.styles.size!==void 0&&"size"in yn&&(yn.size=Ct.styles.size)}catch(In){P.error(In)}return yn.onenter=function(){Ht.mode===h.Z.TEXT_SHOWING&&F.trigger(v.Z.CAPTION_RENDERED,{currentTrackIdx:Z})},yn}function Ft(Ct){return Ct.type==="html"}function Bt(Ct,rn){return Ft(Ct)?(function(Ht,yn){var In=new z(Ht.start+yn,Ht.end+yn,"");return In.cueHTMLElement=Ht.cueHTMLElement,In.isd=Ht.isd,In.images=Ht.images,In.embeddedImages=Ht.embeddedImages,In.cueID=Ht.cueID,In.scaleCue=we.bind(self),In.cellResolution=Ht.cellResolution,In.lineHeight=Ht.lineHeight,In.linePadding=Ht.linePadding,In.fontSize=Ht.fontSize,In.isd&&qe(In,In.isd.contents),In})(Ct,rn):(function(Ht,yn){var In=new z(Ht.start-yn,Ht.end-yn,Ht.data);return In.cueID="".concat(In.startTime,"_").concat(In.endTime),In})(Ct,rn)}function Nn(Ct){if(ce)for(var rn=ce.childNodes,Ht=0;Ht<rn.length;++Ht)rn[Ht].id===Ct.cueID&&(ce.removeChild(rn[Ht]),--Ht)}function lt(){var Ct,rn=[],Ht=(function(In,Wn){var Hn;if(typeof Symbol>"u"||In[Symbol.iterator]==null){if(Array.isArray(In)||(Hn=(function(Fn,Zn){if(Fn){if(typeof Fn=="string")return Eh(Fn,Zn);var Rt=Object.prototype.toString.call(Fn).slice(8,-1);return Rt==="Object"&&Fn.constructor&&(Rt=Fn.constructor.name),Rt==="Map"||Rt==="Set"?Array.from(Fn):Rt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Rt)?Eh(Fn,Zn):void 0}})(In))||Wn){Hn&&(In=Hn);var Yn=0,rr=function(){};return{s:rr,n:function(){return Yn>=In.length?{done:!0}:{done:!1,value:In[Yn++]}},e:function(Fn){throw Fn},f:rr}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Yt,Tn=!0,Dn=!1;return{s:function(){Hn=In[Symbol.iterator]()},n:function(){var Fn=Hn.next();return Tn=Fn.done,Fn},e:function(Fn){Dn=!0,Yt=Fn},f:function(){try{Tn||Hn.return==null||Hn.return()}finally{if(Dn)throw Yt}}}})(se.getTextTracks());try{for(Ht.s();!(Ct=Ht.n()).done;){var yn=Ct.value;yn.manualMode===h.Z.TEXT_SHOWING&&rn.push(yn)}}catch(In){Ht.e(In)}finally{Ht.f()}return rn}function bt(Ct){return Ct>=0&&W[Ct]?se.getTextTrack(W[Ct].kind,W[Ct].id,W[Ct].lang,W[Ct].isTTML,W[Ct].isEmbedded):null}function tn(Ct){var rn=this;if(Ct!==Z){var Ht=bt(Z=Ct);Lt.call(this,Ht),ae&&(clearInterval(ae),ae=null),Ht&&Ht.renderingType==="html"&&(Ie.call(this,Ht,!0),window.ResizeObserver?(me=new window.ResizeObserver((function(){Ie.call(rn,Ht,!0)}))).observe(se.getElement()):ae=setInterval(Ie.bind(this,Ht),500))}}function Lt(Ct){vr.call(this),Ct&&Ct.renderingType==="html"?Mn.call(this):gr.call(this)}function an(Ct,rn){if(!Ct.cues)return!1;for(var Ht=0;Ht<Ct.cues.length;Ht++)if(Ct.cues[Ht].startTime===rn.startTime&&Ct.cues[Ht].endTime===rn.endTime)return!0;return!1}function ln(Ct,rn,Ht){var yn=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return!!Ct&&(isNaN(rn)||(yn?Ct.startTime:Ct.endTime)>=rn)&&(isNaN(Ht)||(yn?Ct.endTime:Ct.startTime)<=Ht)}function Xt(Ct,rn,Ht){var yn,In;if(!(Ht<rn)&&Ct&&(Ct.cues||Ct.manualCueList)){var Wn=Ct.cues&&Ct.cues.length>0?"native":"custom",Hn=Wn==="native"?Ct.cues:Ct.manualCueList;if(!Hn||Hn.length===0)return;for(var Yn=Hn.length-1;Yn>=0;Yn--)!ln(Hn[Yn],rn,Ht,!0)||(yn=Hn[Yn],In=se.getTime(),yn.startTime>=In&&yn.endTime<=In)||(Wn==="native"?Ct.removeCue(Hn[Yn]):(Nn(Hn[Yn]),delete Ct.manualCueList[Yn]))}}function Vn(Ct,rn,Ht){var yn=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];if(Ct&&(Ct.cues||Ct.manualCueList)){var In=Ct.cues&&Ct.cues.length>0?"native":"custom",Wn=In==="native"?Ct.cues:Ct.manualCueList;if(!Wn||Wn.length===0)return;for(var Hn=Wn.length-1,Yn=Hn;Yn>=0;Yn--)ln(Wn[Yn],rn,Ht,yn)&&(In==="native"?(Wn[Yn].onexit&&Wn[Yn].onexit(),Ct.removeCue(Wn[Yn])):(Nn(Wn[Yn]),delete Ct.manualCueList[Yn]))}}function Mn(){var Ct=document.getElementById("native-cue-style");if(!Ct){(Ct=document.createElement("style")).id="native-cue-style",document.head.appendChild(Ct);var rn=Ct.sheet,Ht=se.getElement();try{Ht&&(Ht.id?rn.insertRule("#"+Ht.id+"::cue {background: transparent}",0):Ht.classList.length!==0?rn.insertRule("."+Ht.className+"::cue {background: transparent}",0):rn.insertRule("video::cue {background: transparent}",0))}catch(yn){P.info(""+yn.message)}}}function gr(){var Ct=document.getElementById("native-cue-style");Ct&&document.head.removeChild(Ct)}function vr(){if(Q)for(;Q.firstChild;)Q.removeChild(Q.firstChild)}return R={initialize:function(){typeof window<"u"&&typeof navigator<"u"&&(z=window.VTTCue||window.TextTrackCue,W=[],q=[],Z=-1,K=0,le=0,_e=0,fe=0,Q=null,ce=null,ae=null,Oe=!1,Ke=2147483647,Be=null,Le="requestAnimationFrame"in window,document.fullscreenElement!==void 0?He="fullscreenElement":document.webkitIsFullScreen!==void 0?He="webkitIsFullScreen":document.msFullscreenElement?He="msFullscreenElement":document.mozFullScreen&&(He="mozFullScreen"))},getStreamId:function(){return te.id},addTextTrack:function(Ct){W.push(Ct)},addCaptions:gt,createTracks:function(){var Ct=re.get().streaming.text.dispatchForManualRendering;W.sort((function(Zn,Rt){return Zn.index-Rt.index})),Q=se.getTTMLRenderingDiv(),ce=se.getVttRenderingDiv();for(var rn,Ht,yn,In,Wn,Hn,Yn=-1,rr=0;rr<W.length;rr++){var Yt=(Ht=(rn=W[rr]).kind,yn=rn.id!==void 0?rn.id:rn.lang,In=rn.lang,Wn=rn.isTTML,Hn=rn.isEmbedded,se.addTextTrack(Ht,yn,In,Wn,Hn));q.push(Yt),W[rr].defaultTrack&&(Yt.default=!0,Yn=rr);var Tn=bt(rr);Tn&&(Tn.mode=h.Z.TEXT_SHOWING,Q&&(W[rr].isTTML||W[rr].isEmbedded)?Tn.renderingType="html":Tn.renderingType="default"),gt(rr,0,W[rr].captionData),F.trigger(v.Z.TEXT_TRACK_ADDED)}if(tn.call(this,Yn),Yn>=0){F.on(v.Z.PLAYBACK_METADATA_LOADED,(function Zn(){var Rt=bt(Yn);Rt&&Rt.renderingType==="html"&&Ie.call(this,Rt,!0),F.off(v.Z.PLAYBACK_METADATA_LOADED,Zn,this)}),this);for(var Dn=0;Dn<W.length;Dn++){var Fn=bt(Dn);Fn&&(Fn.mode=Dn!==Yn||Ct?h.Z.TEXT_HIDDEN:h.Z.TEXT_SHOWING,Fn.manualMode=Dn===Yn?h.Z.TEXT_SHOWING:h.Z.TEXT_HIDDEN)}}F.trigger(_.Z.TEXT_TRACKS_QUEUE_INITIALIZED,{index:Z,tracks:W,streamId:te.id})},getCurrentTrackIdx:function(){return Z},setCurrentTrackIdx:tn,getTrackIdxForId:function(Ct){for(var rn=-1,Ht=0;Ht<W.length;Ht++)if(W[Ht].id===Ct){rn=Ht;break}return rn},getCurrentTrackInfo:function(){return W[Z]},setModeForTrackIdx:function(Ct,rn){var Ht=bt(Ct);Ht&&Ht.mode!==rn&&(Ht.mode=rn),Ht&&Ht.manualMode!==rn&&(Ht.manualMode=rn)},deleteCuesFromTrackIdx:function(Ct,rn,Ht){var yn=bt(Ct);yn&&Vn(yn,rn,Ht)},deleteAllTextTracks:function(){for(var Ct=q?q.length:0,rn=0;rn<Ct;rn++){var Ht=bt(rn);Ht&&Vn.call(this,Ht,te.start,te.start+te.duration,!1)}q=[],W=[],ae&&(clearInterval(ae),ae=null),me&&se&&(me.unobserve(se.getElement()),me=null),Z=-1,vr.call(this)},manualCueProcessing:function(Ct){var rn=lt();if(rn&&rn.length>0){var Ht=rn[0].manualCueList;Ht&&Ht.length>0&&Ht.forEach((function(yn){yn.startTime<=Ct&&yn.endTime>=Ct&&!yn.isActive?(yn.isActive=!0,re.get().streaming.text.dispatchForManualRendering?mt(yn):WebVTT.processCues(window,[yn],ce,yn.cueID)):yn.isActive&&(yn.startTime>Ct||yn.endTime<Ct)&&(yn.isActive=!1,re.get().streaming.text.dispatchForManualRendering?dt(yn):Nn(yn))}))}},disableManualTracks:function(){var Ct=lt();if(Ct&&Ct.length>0){var rn=Ct[0].manualCueList;rn&&rn.length>0&&rn.forEach((function(Ht){if(Ht.isActive){if(Ht.isActive=!1,re.get().streaming.text.dispatchForManualRendering)dt(Ht);else if(ce)for(var yn=ce.childNodes,In=0;In<yn.length;++In)yn[In].id===Ht.cueID&&(ce.removeChild(yn[In]),--In)}}))}}},P=(0,C.Z)(Fe).getInstance().getLogger(R),R}hd.__dashjs_factory_name="TextTracks";var pd=I.Z.getClassFactory(hd);function Js(){var L,R,P,z,W,q,Z=this.context;function K(Q){var ce=Q.split(":"),ae=ce.length-1;return Q=60*parseInt(ce[ae-1],10)+parseFloat(ce[ae]),ae===2&&(Q+=3600*parseInt(ce[0],10)),Q}function le(Q){var ce=Q.split(z),ae=ce[1].split(q);return ae.shift(),ce[1]=ae[0],ae.shift(),{cuePoints:ce,styles:_e(ae)}}function _e(Q){var ce={};return Q.forEach((function(ae){if(ae.split(/:/).length>1){var He=ae.split(/:/)[1],Oe=!1;He&&He.search(/%/)!=-1&&(Oe=!0,He=parseInt(He.replace(/%/,""),10)),(ae.match(/align/)||ae.match(/A/))&&(ce.align=He),(ae.match(/line/)||ae.match(/L/))&&(ce.line=He==="auto"?He:parseInt(He,10),Oe&&(ce.snapToLines=!1)),(ae.match(/position/)||ae.match(/P/))&&(ce.position=He),(ae.match(/size/)||ae.match(/S/))&&(ce.size=He)}})),ce}function fe(Q,ce){for(var ae,He=ce,Oe="",Be="";Q[He]!==""&&He<Q.length;)He++;if((ae=He-ce)>1)for(var Ke=0;Ke<ae;Ke++){if((Be=Q[ce+Ke]).match(z)){Oe="";break}Oe+=Be,Ke!==ae-1&&(Oe+=`
`)}else(Be=Q[ce]).match(z)||(Oe=Be);return Oe}return L={parse:function(Q){var ce,ae,He=[];if(!Q)return He;ce=(Q=Q.split(P)).length,ae=-1;for(var Oe=0;Oe<ce;Oe++){var Be=Q[Oe];if(Be.length>0&&Be!=="WEBVTT"&&Be.match(z)){var Ke=le(Be),me=Ke.cuePoints,Le=Ke.styles,ge=fe(Q,Oe+1),Fe=K(me[0].replace(W,"")),F=K(me[1].replace(W,""));!isNaN(Fe)&&!isNaN(F)&&Fe>=ae&&F>Fe?ge!==""?(ae=Fe,He.push({start:Fe,end:F,data:ge,styles:Le})):R.error("Skipping cue due to empty/malformed cue text"):R.error("Skipping cue due to incorrect cue timing")}}return He},getCaptionStyles:_e},R=(0,C.Z)(Z).getInstance().getLogger(L),P=/(?:\r\n|\r|\n)/gm,z=/-->/,W=/(^[\s]+|[\s]+$)/g,q=/\s\b/g,L}Js.__dashjs_factory_name="VTTParser";var ju=I.Z.getSingletonFactory(Js);function Rc(){var L,R;return L={parse:function(P){var z=[];return R.oncue=function(W){W.start=W.startTime,W.end=W.endTime,W.data=W.text,W.styles={align:W.align,line:W.line,position:W.position,size:W.size},z.push(W)},R.parse(P),z}},(function(){try{window&&window.WebVTT&&window.WebVTT.Parser&&(R=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()))}catch{}})(),L}Rc.__dashjs_factory_name="VttCustomRenderingParser";var nu=I.Z.getSingletonFactory(Rc);function gd(){var L,R,P=this.context,z=(0,A.Z)(P).getInstance(),W=0;return L={parse:function(q,Z,K,le,_e){var fe,Q,ce,ae="",He=[],Oe={},Be={},Ke="",me="",Le={onOpenTag:function(te,re,G){if(G[" imagetype"]&&!G[" imageType"]&&(z.trigger(v.Z.CONFORMANCE_VIOLATION,{level:Ao.LEVELS.ERROR,event:Ao.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),G[" imageType"]=G[" imagetype"]),re==="image"&&(te==="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"||te==="http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt")){if(!G[" imageType"]||G[" imageType"].value!=="PNG")return void R.warn("smpte-tt imageType != PNG. Discarded");Ke=G["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){Ke&&(Be[Ke]=me.trim()),me="",Ke=""},onText:function(te){Ke&&(me+=te)}};if(!q)throw ae="no ttml data to parse",new Error(ae);Oe.data=q,z.trigger(_.Z.TTML_TO_PARSE,Oe);var ge=(0,bh.fromXML)(Oe.data,(function(te){ae=te}),Le);z.trigger(_.Z.TTML_PARSED,{ttmlString:Oe.data,ttmlDoc:ge});var Fe,F=ge.getMediaTimeEvents();for(ce=0;ce<F.length;ce++){var se=(0,bh.generateISD)(ge,F[ce],(function(te){ae=te}));se.contents.some((function(te){return te.contents.length}))&&(fe=F[ce]+Z)<(Q=F[ce+1]+Z)&&He.push({start:fe,end:Q,type:"html",cueID:(Fe="cue_TTML_"+W,W++,Fe),isd:se,images:_e,embeddedImages:Be})}if(ae!=="")throw R.error(ae),new Error(ae);return He}},R=(0,C.Z)(P).getInstance().getLogger(L),L}gd.__dashjs_factory_name="TTMLParser";var ds=I.Z.getSingletonFactory(gd);function ru(L,R){var P=Object.keys(L);if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(L);R&&(z=z.filter((function(W){return Object.getOwnPropertyDescriptor(L,W).enumerable}))),P.push.apply(P,z)}return P}function ha(L){for(var R=1;R<arguments.length;R++){var P=arguments[R]!=null?arguments[R]:{};R%2?ru(Object(P),!0).forEach((function(z){xc(L,z,P[z])})):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(P)):ru(Object(P)).forEach((function(z){Object.defineProperty(L,z,Object.getOwnPropertyDescriptor(P,z))}))}return L}function xc(L,R,P){return R in L?Object.defineProperty(L,R,{value:P,enumerable:!0,configurable:!0,writable:!0}):L[R]=P,L}function wh(L,R){(R==null||R>L.length)&&(R=L.length);for(var P=0,z=new Array(R);P<R;P++)z[P]=L[P];return z}function md(L){var R,P,z,W=this.context,q=(0,A.Z)(W).getInstance(),Z=(0,wt.Z)(W).getInstance(),K=L.adapter,le=L.baseURLController;function _e(ce,ae){var He,Oe,Be=!1;if(le.resolve()){var Ke=K.getVoRepresentations(ce);Ke&&Ke.length>0&&(He=le.resolve(Ke[0].path).url)}var me=ce.essentialPropertiesAsArray.filter((function(ge){return ge.schemeIdUri&&ge.schemeIdUri===h.Z.FONT_DOWNLOAD_DVB_SCHEME})),Le=ce.supplementalPropertiesAsArray.filter((function(ge){return ge.schemeIdUri&&ge.schemeIdUri===h.Z.FONT_DOWNLOAD_DVB_SCHEME}));me.length>0?(Be=!0,Oe=me):Oe=Le,Oe.forEach((function(ge){if((function(te){return!(!(te.value&&te.value==="1"&&te.dvbUrl&&te.dvbUrl.length>0&&te.dvbFontFamily&&te.dvbFontFamily.length>0&&te.dvbMimeType)||te.dvbMimeType!==h.Z.OFF_MIMETYPE&&te.dvbMimeType!==h.Z.WOFF_MIMETYPE)})(ge)){var Fe=(F=ge.dvbUrl,se=He,Z.isPathAbsolute(F)?F:Z.isRelative(F)?se?Z.resolve(F,se):Z.resolve(F):F);z.push({fontFamily:ge.dvbFontFamily,url:Fe,mimeType:ge.dvbMimeType,trackId:ce.id,streamId:ae,isEssential:Be,status:"unloaded",fontFace:new FontFace(ge.dvbFontFamily,"url(".concat(Fe,")"),{display:"swap"})})}var F,se}))}function fe(ce,ae){var He=z[ce];z[ce]=ha(ha({},He),{},{status:ae})}function Q(){z=[]}return R={addFontsFromTracks:function(ce,ae){if(ce&&Array.isArray(ce)&&ae)for(var He=0;He<ce.length;He++)_e(ce[He],ae)},downloadFonts:function(){for(var ce=function(He){var Oe=z[He];document.fonts.add(Oe.fontFace),q.trigger(v.Z.DVB_FONT_DOWNLOAD_ADDED,Oe),Oe.fontFace.load().then((function(){fe(He,"loaded"),q.trigger(v.Z.DVB_FONT_DOWNLOAD_COMPLETE,Oe)}),(function(Be){fe(He,"error"),P.debug("Font download error: ",Be),q.trigger(v.Z.DVB_FONT_DOWNLOAD_FAILED,Oe)}))},ae=0;ae<z.length;ae++)ce(ae)},getFonts:function(){return z},getFontsForTrackId:function(ce){return z.filter((function(ae){return ae.trackId&&ae.trackId===ce}))},reset:function(){(function(){var ce,ae=(function(Be,Ke){var me;if(typeof Symbol>"u"||Be[Symbol.iterator]==null){if(Array.isArray(Be)||(me=(function(te,re){if(te){if(typeof te=="string")return wh(te,re);var G=Object.prototype.toString.call(te).slice(8,-1);return G==="Object"&&te.constructor&&(G=te.constructor.name),G==="Map"||G==="Set"?Array.from(te):G==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(G)?wh(te,re):void 0}})(Be))||Ke){me&&(Be=me);var Le=0,ge=function(){};return{s:ge,n:function(){return Le>=Be.length?{done:!0}:{done:!1,value:Be[Le++]}},e:function(te){throw te},f:ge}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Fe,F=!0,se=!1;return{s:function(){me=Be[Symbol.iterator]()},n:function(){var te=me.next();return F=te.done,te},e:function(te){se=!0,Fe=te},f:function(){try{F||me.return==null||me.return()}finally{if(se)throw Fe}}}})(z);try{for(ae.s();!(ce=ae.n()).done;){var He=ce.value,Oe=document.fonts.delete(He.fontFace);P.debug("Removal of fontFamily: ".concat(He.fontFamily," was ").concat(Oe?"successful":"unsuccessful"))}}catch(Be){ae.e(Be)}finally{ae.f()}})(),Q()}},P=(0,C.Z)(W).getInstance().getLogger(R),Q(),R}md.__dashjs_factory_name="DVBFonts";var iu=I.Z.getClassFactory(md);function pa(L){var R,P,z,W,q,Z,K,le,_e,fe,Q,ce,ae,He,Oe=this.context,Be=L.adapter,Ke=L.errHandler,me=L.manifestModel,Le=L.mediaController,ge=L.baseURLController,Fe=L.videoModel,F=L.settings;function se(Se){if(He.error("Could not download ".concat(Se.isEssential?"an essential":"a"," font - fontFamily: ").concat(Se.fontFamily,", url: ").concat(Se.url)),Se.isEssential){var qe=W[Se.streamId].getTrackIdxForId(Se.trackId);W[Se.streamId].setModeForTrackIdx(qe,h.Z.TEXT_DISABLED)}}function te(Se){if(He.debug("Successfully downloaded ".concat(Se.isEssential?"an essential":"a"," font - fontFamily: ").concat(Se.fontFamily,", url: ").concat(Se.url)),Se.isEssential){var qe=W[Se.streamId].getTrackIdxForId(Se.trackId);qe===W[Se.streamId].getCurrentTrackIdx()?W[Se.streamId].setModeForTrackIdx(qe,h.Z.TEXT_SHOWING):W[Se.streamId].setModeForTrackIdx(qe,h.Z.TEXT_HIDDEN)}}function re(Se){var qe=Se.tracks,gt=Se.index,ut=Se.streamId;if(F.get().streaming.text.defaultEnabled===!1&&!we()||ce)ke(ut,-1);else{var mt=Le.getCurrentTrackFor(h.Z.TEXT,ut);if(mt){var dt={lang:mt.lang,role:mt.roles[0],index:mt.index,codec:mt.codec,accessibility:mt.accessibility[0]};qe.some((function(zt,Ut){if(Le.matchSettings(dt,zt))return ke(ut,Ut),gt=Ut,!0}))}_e=!1}P[ut].lastEnabledIndex=gt,le.trigger(v.Z.TEXT_TRACKS_ADDED,{enabled:we(),index:gt,tracks:qe,streamId:ut}),Q=!0,ae.addFontsFromTracks(qe,ut),ae.getFonts().forEach((function(zt){if(zt.isEssential){var Ut=W[zt.streamId].getTrackIdxForId(zt.trackId);W[zt.streamId].setModeForTrackIdx(Ut,h.Z.TEXT_DISABLED)}})),ae.downloadFonts()}function G(Se){try{var qe=Se.streamId;if(!W[qe]||isNaN(Se.time))return;W[qe].manualCueProcessing(Se.time)}catch{}}function Ie(Se){try{var qe=Se.streamId;if(!W[qe])return;W[qe].disableManualTracks()}catch{}}function we(){var Se=!0;return _e&&!fe&&(Se=!1),Se}function ke(Se,qe){(_e=qe===-1)&&Le&&Le.saveTextSettingsDisabled();var gt=Ae(Se);if(gt!==qe&&W[Se]){W[Se].disableManualTracks();var ut=W[Se].getCurrentTrackInfo(),mt=ut?Fe.getTextTrack(ut.kind,ut.id,ut.lang,ut.isTTML,ut.isEmbedded):null;mt&&mt.mode!==h.Z.TEXT_DISABLED&&W[Se].setModeForTrackIdx(gt,h.Z.TEXT_HIDDEN),W[Se].setCurrentTrackIdx(qe),ut=W[Se].getCurrentTrackInfo();var dt=F.get().streaming.text.dispatchForManualRendering;ut&&!dt&&ut.mode!==h.Z.TEXT_DISABLED&&W[Se].setModeForTrackIdx(qe,h.Z.TEXT_SHOWING),ut&&ut.isFragmented&&!ut.isEmbedded?(function(zt,Ut,Ft){if(z[zt])for(var Bt=z[zt].getConfig().fragmentedTracks,Nn=0;Nn<Bt.length;Nn++){var lt=Bt[Nn];if(Ut.lang===lt.lang&&(lt.id?Ut.id===lt.id:Ut.index===lt.index)){var bt=Le.getCurrentTrackFor(h.Z.TEXT,zt);(lt.id?bt.id!==lt.id:bt.index!==lt.index)?(W[zt].deleteCuesFromTrackIdx(Ft),z[zt].setCurrentFragmentedTrackIdx(Nn)):Ft===-1&&le.trigger(_.Z.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:zt,mediaType:h.Z.TEXT})}}})(Se,ut,gt):ut&&!ut.isFragmented&&(function(zt,Ut){le.trigger(_.Z.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:Ut},{streamId:zt,mediaType:h.Z.TEXT})})(Se,ut),Le.setTrack(ut)}}function Ae(Se){return W[Se].getCurrentTrackIdx()}function ue(){z={},W={},P={},_e=!0,Q=!1,ce=!1}return R={deactivateStream:function(Se){if(Se){var qe=Se.id;z[qe]&&z[qe].resetMediaInfos(),W[qe]&&W[qe].deleteAllTextTracks()}},initialize:function(){ae=iu(Oe).create({adapter:Be,baseURLController:ge}),le.on(_.Z.TEXT_TRACKS_QUEUE_INITIALIZED,re,R),le.on(_.Z.DVB_FONT_DOWNLOAD_FAILED,se,R),le.on(_.Z.DVB_FONT_DOWNLOAD_COMPLETE,te,R),F.get().streaming.text.webvtt.customRenderingEnabled&&(le.on(_.Z.PLAYBACK_TIME_UPDATED,G,R),le.on(_.Z.PLAYBACK_SEEKING,Ie,R))},initializeForStream:function(Se){var qe=Se.id,gt=pd(Oe).create({videoModel:Fe,settings:F,streamInfo:Se});gt.initialize(),W[qe]=gt;var ut=Cc(Oe).create({errHandler:Ke,adapter:Be,dvbFonts:ae,manifestModel:me,mediaController:Le,videoModel:Fe,textTracks:gt,vttParser:q,vttCustomRenderingParser:Z,ttmlParser:K,streamInfo:Se,settings:F});ut.initialize(),z[qe]=ut,P[qe]={},P[qe].lastEnabledIndex=-1},createTracks:function(Se){var qe=Se.id;W[qe]&&W[qe].createTracks()},getTextSourceBuffer:function(Se){var qe=Se.id;if(z&&z[qe])return z[qe]},getAllTracksAreDisabled:function(){return _e},addEmbeddedTrack:function(Se,qe){var gt=Se.id;z[gt]&&z[gt].addEmbeddedTrack(qe)},enableText:function(Se,qe){return(0,he.PS)(qe,"boolean"),we()!==qe&&(qe&&ke(Se,P[Se].lastEnabledIndex),qe||(P[Se].lastEnabledIndex=Ae(Se),Q?ke(Se,-1):ce=!0)),!0},isTextEnabled:we,setTextTrack:ke,getCurrentTrackIdx:Ae,enableForcedTextStreaming:function(Se){return(0,he.PS)(Se,"boolean"),fe=Se,!0},addMediaInfosToBuffer:function(Se,qe,gt){var ut=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,mt=Se.id;z[mt]&&z[mt].addMediaInfos(qe,gt,ut)},reset:function(){ae.reset(),ue(),le.off(_.Z.TEXT_TRACKS_QUEUE_INITIALIZED,re,R),le.off(_.Z.DVB_FONT_DOWNLOAD_FAILED,se,R),le.off(_.Z.DVB_FONT_DOWNLOAD_COMPLETE,te,R),F.get().streaming.text.webvtt.customRenderingEnabled&&(le.off(_.Z.PLAYBACK_TIME_UPDATED,G,R),le.off(_.Z.PLAYBACK_SEEKING,Ie,R)),Object.keys(z).forEach((function(Se){z[Se].resetEmbedded(),z[Se].reset()}))}},fe=!1,Q=!1,ce=!1,q=ju(Oe).getInstance(),Z=nu(Oe).getInstance(),K=ds(Oe).getInstance(),le=(0,A.Z)(Oe).getInstance(),He=(0,C.Z)(Oe).getInstance().getLogger(R),ue(),R}pa.__dashjs_factory_name="TextController";var Th=I.Z.getClassFactory(pa);function Sh(){var L,R,P,z,W,q,Z,K,le,_e,fe,Q,ce,ae,He,Oe,Be,Ke,me,Le,ge,Fe,F,se,te,re,G,Ie,we,ke,Ae,ue,Se,qe,gt,ut,mt,dt,zt,Ut="You must first call initialize() and set a source before calling this method",Ft="You must first call initialize() and set a valid source and view before calling this method",Bt="You must first call attachView() to set the video element before calling this method",Nn="You must first call attachSource() with a valid source before calling this method",lt="MediaPlayer not initialized!",bt=this.context,tn=(0,A.Z)(bt).getInstance(),Lt=(0,Ce.Z)(bt).getInstance(),an=(0,C.Z)(bt).getInstance({settings:Lt});function ln(){rr(null),Hn(null),z=null,ae&&(ae.reset(),ae=null),He&&(He.reset(),He=null),Le&&Le.reset(),Lt.reset(),Be&&(Be.reset(),Be=null)}function Xt(){return!!P&&!!ut.getElement()}function Vn(){return(0,As.e)()}function Mn(){if(!Z)throw Ft;return Ie.isPaused()}function gr(){if(!Z)throw Ft;return Ie.getIsDynamic()}function vr(We){var tt=te&&te.hasVideoTrack()?h.Z.VIDEO:h.Z.AUDIO,Mt=ue.getCurrentDVRInfo(tt);if(!Mt)return 0;var mn=Ie.getOriginalLiveDelay(),Cn=Mt.range.start+We;return Cn>Mt.range.end-mn&&(Cn=Mt.range.end-mn),Cn}function Ct(We){if(!Z)throw Ft;var tt=Wn().currentTime;if(We!==void 0)tt=te.getTimeRelativeToStreamId(tt,We);else if(Ie.getIsDynamic()){var Mt=te&&te.hasVideoTrack()?h.Z.VIDEO:h.Z.AUDIO,mn=ue.getCurrentDVRInfo(Mt);tt=mn===null||tt===0?0:Math.max(0,tt-mn.range.start)}return tt}function rn(){if(!Z)throw Ft;var We=Wn().duration;if(Ie.getIsDynamic()){var tt=te&&te.hasVideoTrack()?h.Z.VIDEO:h.Z.AUDIO,Mt=ue.getCurrentDVRInfo(tt);We=Mt?Mt.range.end-Mt.range.start:0}return We}function Ht(We){(0,he.PS)(We,"boolean"),K=We}function yn(){Le.restoreDefaultUTCTimingSources()}function In(){return ue}function Wn(){if(!ut.getElement())throw Bt;return ut.getElement()}function Hn(We){if(!W)throw lt;ut.setElement(We),We&&(Zn(),(function(){if(!He){var tt=dashjs.MetricsReporting;if(typeof tt=="function"){var Mt=tt(bt).create();He=Mt.createMetricsReporting({debug:an,eventBus:tn,mediaElement:Wn(),adapter:Ke,dashMetrics:ue,mediaPlayerModel:me,events:_.Z,constants:h.Z,metricsConstants:E.Z})}}})(),(function(){if(!Oe){var tt=dashjs.MssHandler;typeof tt=="function"&&(oe.extend(tt.errors),Oe=tt(bt).create({eventBus:tn,mediaPlayerModel:me,dashMetrics:ue,manifestModel:Se,playbackController:Ie,streamController:te,protectionController:ae,baseURLController:Fe,errHandler:ge,events:_.Z,constants:h.Z,debug:an,initSegmentType:Ye.w.INIT_SEGMENT_TYPE,BASE64:La,ISOBoxer:Ic,settings:Lt}))}})(),te&&te.switchToVideoElement(le)),Z&&Tn(),Kt(le)}function Yn(We){if(!q)throw Ut;var tt=te.getActiveStreamInfo();return tt?ce.getTracksFor(We,tt.id):[]}function rr(We){var tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;if(!W)throw lt;typeof We=="string"&&mt.initialize(We),tt==null&&(tt=NaN),isNaN(tt)||(tt=Math.max(0,tt)),le=tt,P=We,(q||Z)&&Tn(),Xt()&&Kt(le)}function Yt(){if(!q)throw Ut;var We=te.getActiveStreamInfo();return We?te.getStreamById(We.id):null}function Tn(){Z=!1,q=!1,Ke.reset(),te.reset(),G.reset(),Ae.reset(),Ie.reset(),we.reset(),ke.reset(),_e.reset(),ce.reset(),zt.reset(),ae&&(Lt.get().streaming.protection.keepProtectionMediaKeys?ae.stop():(ae.reset(),ae=null,Zn())),re.reset(),qe.reset(),gt.reset()}function Dn(){var We=Fn();te||(te=cc(bt).getInstance()),re||(re=Th(bt).create({errHandler:ge,manifestModel:Se,adapter:Ke,mediaController:ce,baseURLController:Fe,videoModel:ut,settings:Lt})),se.setConfig({capabilities:F,customParametersModel:Le,adapter:Ke,settings:Lt,manifestModel:Se,errHandler:ge}),te.setConfig({capabilities:F,capabilitiesFilter:se,manifestLoader:We,manifestModel:Se,mediaPlayerModel:me,customParametersModel:Le,protectionController:ae,textController:re,adapter:Ke,dashMetrics:ue,errHandler:ge,timelineConverter:Q,videoModel:ut,playbackController:Ie,serviceDescriptionController:we,contentSteeringController:ke,abrController:_e,mediaController:ce,settings:Lt,baseURLController:Fe,uriFragmentModel:mt,segmentBaseController:zt}),G.setConfig({settings:Lt,playbackController:Ie,streamController:te,videoModel:ut,timelineConverter:Q,adapter:Ke}),Ie.setConfig({streamController:te,serviceDescriptionController:we,dashMetrics:ue,adapter:Ke,videoModel:ut,timelineConverter:Q,settings:Lt}),Ae.setConfig({streamController:te,playbackController:Ie,mediaPlayerModel:me,videoModel:ut,settings:Lt}),_e.setConfig({streamController:te,domStorage:dt,mediaPlayerModel:me,customParametersModel:Le,cmsdModel:gt,dashMetrics:ue,adapter:Ke,videoModel:ut,settings:Lt}),qe.setConfig({abrController:_e,dashMetrics:ue,playbackController:Ie}),gt.setConfig({}),_e.initialize(),te.initialize(K,z),re.initialize(),G.initialize(),Ae.initialize(),qe.initialize(),gt.initialize(),ke.initialize(),zt.initialize()}function Fn(){return Kl(bt).create({debug:an,errHandler:ge,dashMetrics:ue,mediaPlayerModel:me,requestModifier:(0,ot.Z)(bt).getInstance(),mssHandler:Oe,settings:Lt})}function Zn(){if(ae)return ae;var We=dashjs.Protection;if(typeof We=="function"){var tt=We(bt).create();return _.Z.extend(We.events),v.Z.extend(We.events,{publicOnly:!0}),oe.extend(We.errors),F||(F=(0,Op.Z)(bt).getInstance()),ae=tt.createProtectionSystem({debug:an,errHandler:ge,videoModel:ut,customParametersModel:Le,capabilities:F,eventBus:tn,events:_.Z,BASE64:La,constants:h.Z,cmcdModel:qe,settings:Lt})}return null}function Rt(){if(!W)throw lt;if(Be)return Be;var We=dashjs.OfflineController;if(typeof We=="function"){_.Z.extend(We.events),v.Z.extend(We.events,{publicOnly:!0}),oe.extend(We.errors);var tt=Fn(),Mt=$o(bt).create();return Mt.setConfig({manifestModel:Se,adapter:Ke,manifestLoader:tt,errHandler:ge,contentSteeringController:ke}),Be=We(bt).create({debug:an,manifestUpdater:Mt,baseURLController:Fe,manifestLoader:tt,manifestModel:Se,mediaPlayerModel:me,abrController:_e,playbackController:Ie,adapter:Ke,errHandler:ge,dashMetrics:ue,timelineConverter:Q,segmentBaseController:zt,schemeLoaderFactory:fe,eventBus:tn,events:_.Z,errors:oe,constants:h.Z,settings:Lt,dashConstants:p.Z,urlUtils:(0,wt.Z)(bt).getInstance()})}return null}function ft(We){var tt=te&&te.hasVideoTrack()?h.Z.VIDEO:h.Z.AUDIO,Mt=ue.getCurrentDVRInfo(tt);return Mt?We+(Mt.manifestInfo.availableFrom.getTime()/1e3+Mt.range.start):0}function Kt(){var We=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN;Be&&Be.resetRecords(),!q&&P&&(q=!0,R.info("Streaming Initialized"),Dn(),typeof P=="string"?te.load(P,We):te.loadWithManifest(P,We)),!Z&&Xt()&&(Z=!0,R.info("Playback Initialized"))}return L={initialize:function(We,tt,Mt){var mn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:NaN;F||(F=(0,Op.Z)(bt).getInstance()).setConfig({settings:Lt}),ge||(ge=od(bt).getInstance()),F.supportsMediaSource()?(W||(W=!0,Q=al(bt).getInstance(),_e||(_e=yf(bt).getInstance()).setConfig({settings:Lt}),fe||(fe=Oi(bt).getInstance()),Ie||(Ie=S(bt).getInstance()),ce||(ce=i_(bt).getInstance()),te||(te=cc(bt).getInstance()),G||(G=ks(bt).getInstance()),Ae||(Ae=ws(bt).getInstance()),we||(we=dp(bt).getInstance()),ke||(ke=Ot(bt).getInstance()),se||(se=Lp(bt).getInstance()),Ke=Fp(bt).getInstance(),Se=pf(bt).getInstance(),qe=Rn(bt).getInstance(),gt=xn(bt).getInstance(),ue=da(bt).getInstance({settings:Lt}),dt=Rl(bt).getInstance({settings:Lt}),Ke.setConfig({constants:h.Z,cea608parser:y(),errHandler:ge,BASE64:La}),Fe||(Fe=vp(bt).create()),Fe.setConfig({adapter:Ke,contentSteeringController:ke}),we.setConfig({adapter:Ke}),zt||(zt=Is(bt).getInstance({dashMetrics:ue,mediaPlayerModel:me,errHandler:ge,baseURLController:Fe,events:_.Z,eventBus:tn,debug:an,boxParser:(0,wl.Z)(bt).getInstance(),requestModifier:(0,ot.Z)(bt).getInstance(),errors:oe})),ce.setConfig({domStorage:dt,settings:Lt,customParametersModel:Le}),me.setConfig({playbackController:Ie,serviceDescriptionController:we}),ke.setConfig({adapter:Ke,errHandler:ge,dashMetrics:ue,mediaPlayerModel:me,manifestModel:Se,serviceDescriptionController:we,eventBus:tn,requestModifier:(0,ot.Z)(bt).getInstance()}),yn(),Ht(Mt===void 0||Mt),Rt()),We&&Hn(We),tt&&rr(tt,mn),R.info("[dash.js "+Vn()+"] MediaPlayer has been initialized")):ge.error(new ve.Z(oe.CAPABILITY_MEDIASOURCE_ERROR_CODE,oe.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function(We){We&&(We.capabilities&&(F=We.capabilities),We.capabilitiesFilter&&(se=We.capabilitiesFilter),We.streamController&&(te=We.streamController),We.textController&&(re=We.textController),We.gapController&&(G=We.gapController),We.playbackController&&(Ie=We.playbackController),We.serviceDescriptionController&&(we=We.serviceDescriptionController),We.contentSteeringController&&(ke=We.contentSteeringController),We.catchupController&&(Ae=We.catchupController),We.mediaPlayerModel&&(me=We.mediaPlayerModel),We.customParametersModel&&(Le=We.customParametersModel),We.abrController&&(_e=We.abrController),We.schemeLoaderFactory&&(fe=We.schemeLoaderFactory),We.mediaController&&(ce=We.mediaController),We.settings&&(Lt=We.settings))},on:function(We,tt,Mt,mn){tn.on(We,tt,Mt,mn)},off:function(We,tt,Mt){tn.off(We,tt,Mt)},extend:function(We,tt,Mt){I.Z.extend(We,tt,Mt,bt)},attachView:Hn,attachSource:rr,refreshManifest:function(We){if(!W)throw lt;if(!Xt())return We(null,Nn);var tt=this;typeof We=="function"&&tn.on(_.Z.INTERNAL_MANIFEST_LOADED,(function Mt(mn){tn.off(_.Z.INTERNAL_MANIFEST_LOADED,Mt,tt),mn.error?We(null,mn.error):We(mn.manifest)}),tt),te.refreshManifest()},isReady:Xt,preload:function(){if(!ut.getElement()&&!q){if(!P)throw Nn;Kt(le)}},play:function(){if(!Z)throw Ft;(!K||Mn()&&Z)&&Ie.play(!0)},isPaused:Mn,pause:function(){if(!Z)throw Ft;Ie.pause()},isSeeking:function(){if(!Z)throw Ft;return Ie.isSeeking()},isDynamic:gr,getLowLatencyModeEnabled:function(){if(!Z)throw Ft;return Ie.getLowLatencyModeEnabled()},seek:function(We){if(!Z)throw Ft;if((0,he.PS)(We,"number"),isNaN(We))throw h.Z.BAD_ARGUMENT_ERROR;We<0&&(We=0);var tt=Ie.getIsDynamic()?vr(We):We,Mt=Wn();!Ie.getIsDynamic()&&Mt.duration&&(tt=Math.min(Mt.duration,tt)),Ie.seek(tt,!1,!1,!0)},seekToOriginalLive:function(){Z&&gr()&&Ie.seekToOriginalLive()},setPlaybackRate:function(We){Wn().playbackRate=We},getPlaybackRate:function(){return Wn().playbackRate},setMute:function(We){(0,he.PS)(We,"boolean"),Wn().muted=We},isMuted:function(){return Wn().muted},setVolume:function(We){if(typeof We!="number"||isNaN(We)||We<0||We>1)throw h.Z.BAD_ARGUMENT_ERROR;Wn().volume=We},getVolume:function(){return Wn().volume},time:Ct,duration:rn,timeAsUTC:function(){if(!Z)throw Ft;return Ct()<0?NaN:ft(Ct())},durationAsUTC:function(){if(!Z)throw Ft;return ft(rn())},getActiveStream:Yt,getDVRWindowSize:function(){var We=te&&te.hasVideoTrack()?h.Z.VIDEO:h.Z.AUDIO,tt=ue.getCurrentDVRInfo(We);return tt?tt.manifestInfo.dvrWindowSize:0},getDVRSeekOffset:vr,getAvailableBaseUrls:function(){var We=Se.getValue();return We?Fe.getBaseUrls(We):[]},getAvailableLocations:function(){var We=Se.getValue();if(!We)return[];var tt=Ke.getLocation(We),Mt=ke.getSynthesizedLocationElements(tt);return tt.concat(Mt)},getTargetLiveDelay:function(){if(!Z)throw Ft;return Ie.getOriginalLiveDelay()},convertToTimeCode:function(We){We=Math.max(We,0);var tt=Math.floor(We/3600),Mt=Math.floor(We%3600/60),mn=Math.floor(We%3600%60);return(tt===0?"":tt<10?"0"+tt.toString()+":":tt.toString()+":")+(Mt<10?"0"+Mt.toString():Mt.toString())+":"+(mn<10?"0"+mn.toString():mn.toString())},formatUTC:function(We,tt,Mt){var mn=arguments.length>3&&arguments[3]!==void 0&&arguments[3],Cn=new Date(1e3*We),cr=Cn.toLocaleDateString(tt),Si=Cn.toLocaleTimeString(tt,{hour12:Mt});return mn?Si+" "+cr:Si},getVersion:Vn,getDebug:function(){return an},getBufferLength:function(We){var tt=[h.Z.VIDEO,h.Z.AUDIO,h.Z.TEXT];if(We)return tt.indexOf(We)!==-1?In().getCurrentBufferLevel(We)||NaN:(R.warn("getBufferLength requested for invalid type"),NaN);var Mt=tt.map((function(mn){return Yn(mn).length>0?In().getCurrentBufferLevel(mn):Number.MAX_VALUE})).reduce((function(mn,Cn){return Math.min(mn,Cn)}));return Mt===Number.MAX_VALUE?NaN:Mt},getTTMLRenderingDiv:function(){return ut?ut.getTTMLRenderingDiv():null},getVideoElement:Wn,getSource:function(){if(!P)throw Nn;return P},updateSource:function(We){P=We,te.load(P)},getCurrentLiveLatency:function(){if(!W)throw lt;return Z?Ie.getCurrentLiveLatency():NaN},getTopBitrateInfoFor:function(We){if(!q)throw Ut;return _e.getTopBitrateInfoFor(We)},setAutoPlay:Ht,getAutoPlay:function(){return K},getDashMetrics:In,getQualityFor:function(We){if(!q)throw Ut;if(We===h.Z.IMAGE){var tt=Yt();if(!tt)return-1;var Mt=tt.getThumbnailController();return Mt?Mt.getCurrentTrackIndex():-1}return _e.getQualityFor(We)},setQualityFor:function(We,tt){var Mt=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(!q)throw Ut;if(We===h.Z.IMAGE){var mn=Yt();if(!mn)return;var Cn=mn.getThumbnailController();Cn&&Cn.setTrackByIndex(tt)}_e.setPlaybackQuality(We,te.getActiveStreamInfo(),tt,{forceReplace:Mt})},updatePortalSize:function(){_e.setElementSize(),_e.setWindowResizeEventCalled(!0)},enableText:function(We){var tt=te.getActiveStreamInfo();return!(!tt||!re)&&re.enableText(tt.id,We)},enableForcedTextStreaming:function(We){return!(!te.getActiveStreamInfo()||!re)&&re.enableForcedTextStreaming(We)},isTextEnabled:function(){var We=te.getActiveStreamInfo();return!(!We||!re)&&re.isTextEnabled(We)},setTextTrack:function(We){if(!Z)throw Ft;var tt=te.getActiveStreamInfo();tt&&re&&re.setTextTrack(tt.id,We)},getBitrateInfoListFor:function(We){if(!q)throw Ut;var tt=Yt();return tt?tt.getBitrateListFor(We):[]},getStreamsFromManifest:function(We){if(!q)throw Ut;return Ke.getStreamsInfo(We)},getTracksFor:Yn,getTracksForTypeFromManifest:function(We,tt,Mt){if(!q)throw Ut;return(Mt=Mt||Ke.getStreamsInfo(tt,1)[0])?Ke.getAllMediaInfoForType(Mt,We,tt):[]},getCurrentTrackFor:function(We){if(!q)throw Ut;var tt=te.getActiveStreamInfo();return ce.getCurrentTrackFor(We,tt.id)},setInitialMediaSettingsFor:function(We,tt){if(!W)throw lt;ce.setInitialSettings(We,tt)},getInitialMediaSettingsFor:function(We){if(!W)throw lt;return ce.getInitialSettings(We)},setCurrentTrack:function(We){var tt=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!q)throw Ut;ce.setTrack(We,tt)},addABRCustomRule:function(We,tt,Mt){Le.addAbrCustomRule(We,tt,Mt)},removeABRCustomRule:function(We){Le.removeAbrCustomRule(We)},removeAllABRCustomRule:function(){Le.removeAllAbrCustomRule()},getABRCustomRules:function(){return Le.getAbrCustomRules()},getAverageThroughput:function(We){var tt=_e.getThroughputHistory(),Mt=Ie.getIsDynamic();return tt?tt.getAverageThroughput(We,Mt):0},retrieveManifest:function(We,tt){var Mt=Fn(),mn=this;tn.on(_.Z.INTERNAL_MANIFEST_LOADED,(function Cn(cr){cr.error?tt(null,cr.error):tt(cr.manifest),tn.off(_.Z.INTERNAL_MANIFEST_LOADED,Cn,mn),Mt.reset()}),mn),mt.initialize(We),Mt.load(We)},addUTCTimingSource:function(We,tt){Le.addUTCTimingSource(We,tt)},removeUTCTimingSource:function(We,tt){Le.removeUTCTimingSource(We,tt)},clearDefaultUTCTimingSources:function(){Le.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:yn,setXHRWithCredentialsForType:function(We,tt){Le.setXHRWithCredentialsForType(We,tt)},getXHRWithCredentialsForType:function(We){return Le.getXHRWithCredentialsForType(We)},getProtectionController:function(){return Zn()},attachProtectionController:function(We){ae=We},setProtectionData:function(We){z=We,te&&te.setProtectionData(z)},registerLicenseRequestFilter:function(We){Le.registerLicenseRequestFilter(We)},registerLicenseResponseFilter:function(We){Le.registerLicenseResponseFilter(We)},unregisterLicenseRequestFilter:function(We){Le.unregisterLicenseRequestFilter(We)},unregisterLicenseResponseFilter:function(We){Le.unregisterLicenseResponseFilter(We)},registerCustomCapabilitiesFilter:function(We){Le.registerCustomCapabilitiesFilter(We)},unregisterCustomCapabilitiesFilter:function(We){Le.unregisterCustomCapabilitiesFilter(We)},setCustomInitialTrackSelectionFunction:function(We){Le.setCustomInitialTrackSelectionFunction(We)},resetCustomInitialTrackSelectionFunction:function(){Le.resetCustomInitialTrackSelectionFunction(null)},attachTTMLRenderingDiv:function(We){if(!ut.getElement())throw Bt;ut.setTTMLRenderingDiv(We)},attachVttRenderingDiv:function(We){if(!ut.getElement())throw Bt;ut.setVttRenderingDiv(We)},getCurrentTextTrackIndex:function(){var We=te.getActiveStreamInfo();if(We&&re)return re.getCurrentTrackIdx(We.id)},provideThumbnail:function(We,tt){if(typeof tt=="function")if(We<0)tt(null);else{var Mt=Ie.getIsDynamic()?vr(We):We,mn=te.getStreamForTime(Mt);if(mn!==null){var Cn=mn.getThumbnailController();if(Cn)return Cn.provide(Mt,tt);tt(null)}else tt(null)}},getDashAdapter:function(){return Ke},getOfflineController:function(){return Rt()},triggerSteeringRequest:function(){if(ke)return ke.loadSteeringData()},getCurrentSteeringResponseData:function(){if(ke)return ke.getCurrentSteeringResponseData()},getSettings:function(){return Lt.get()},updateSettings:function(We){Lt.update(We)},resetSettings:function(){Lt.reset()},reset:ln,destroy:function(){ln(),I.Z.deleteSingletonInstances(bt)}},R=an.getLogger(L),W=!1,Z=!1,q=!1,K=!0,le=NaN,ae=null,Be=null,z=null,Ke=null,zt=null,_.Z.extend(v.Z),me=Bo(bt).getInstance(),Le=(0,si.Z)(bt).getInstance(),ut=ym(bt).getInstance(),mt=gh(bt).getInstance(),L}Sh.__dashjs_factory_name="MediaPlayer";var Da=I.Z.getClassFactory(Sh);Da.events=v.Z,Da.errors=oe,I.Z.updateClassFactory(Sh.__dashjs_factory_name,Da);var Pa=Da},8825:function(l,c,f){function g(A){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},g(A)}function y(A,_){return y=Object.setPrototypeOf||function(I,C){return I.__proto__=C,I},y(A,_)}function h(A,_){return!_||g(_)!=="object"&&typeof _!="function"?(function(I){if(I===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I})(A):_}function p(A){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)},p(A)}var E=new((function(A){(function(T,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(S&&S.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),S&&y(T,S)})(v,A);var _,I,C=(_=v,I=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}})(),function(){var T,S=p(_);if(I){var O=p(this).constructor;T=Reflect.construct(S,arguments,O)}else T=S.apply(this,arguments);return h(this,T)});function v(){var T;return(function(S,O){if(!(S instanceof O))throw new TypeError("Cannot call a class as a function")})(this,v),(T=C.call(this)).AST_IN_FUTURE="astInFuture",T.BASE_URLS_UPDATED="baseUrlsUpdated",T.BUFFER_EMPTY="bufferStalled",T.BUFFER_LOADED="bufferLoaded",T.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",T.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",T.DVB_FONT_DOWNLOAD_ADDED="dvbFontDownloadAdded",T.DVB_FONT_DOWNLOAD_COMPLETE="dvbFontDownloadComplete",T.DVB_FONT_DOWNLOAD_FAILED="dvbFontDownloadFailed",T.DYNAMIC_TO_STATIC="dynamicToStatic",T.ERROR="error",T.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",T.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",T.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",T.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",T.LOG="log",T.MANIFEST_LOADING_STARTED="manifestLoadingStarted",T.MANIFEST_LOADING_FINISHED="manifestLoadingFinished",T.MANIFEST_LOADED="manifestLoaded",T.METRICS_CHANGED="metricsChanged",T.METRIC_CHANGED="metricChanged",T.METRIC_ADDED="metricAdded",T.METRIC_UPDATED="metricUpdated",T.PERIOD_SWITCH_STARTED="periodSwitchStarted",T.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",T.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",T.QUALITY_CHANGE_RENDERED="qualityChangeRendered",T.TRACK_CHANGE_RENDERED="trackChangeRendered",T.STREAM_INITIALIZING="streamInitializing",T.STREAM_UPDATED="streamUpdated",T.STREAM_ACTIVATED="streamActivated",T.STREAM_DEACTIVATED="streamDeactivated",T.STREAM_INITIALIZED="streamInitialized",T.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",T.TEXT_TRACKS_ADDED="allTextTracksAdded",T.TEXT_TRACK_ADDED="textTrackAdded",T.CUE_ENTER="cueEnter",T.CUE_EXIT="cueExit",T.THROUGHPUT_MEASUREMENT_STORED="throughputMeasurementStored",T.TTML_PARSED="ttmlParsed",T.TTML_TO_PARSE="ttmlToParse",T.CAPTION_RENDERED="captionRendered",T.CAPTION_CONTAINER_RESIZE="captionContainerResize",T.CAN_PLAY="canPlay",T.CAN_PLAY_THROUGH="canPlayThrough",T.PLAYBACK_ENDED="playbackEnded",T.PLAYBACK_ERROR="playbackError",T.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",T.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",T.PLAYBACK_LOADED_DATA="playbackLoadedData",T.PLAYBACK_PAUSED="playbackPaused",T.PLAYBACK_PLAYING="playbackPlaying",T.PLAYBACK_PROGRESS="playbackProgress",T.PLAYBACK_RATE_CHANGED="playbackRateChanged",T.PLAYBACK_SEEKED="playbackSeeked",T.PLAYBACK_SEEKING="playbackSeeking",T.PLAYBACK_STALLED="playbackStalled",T.PLAYBACK_STARTED="playbackStarted",T.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",T.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",T.PLAYBACK_WAITING="playbackWaiting",T.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",T.EVENT_MODE_ON_START="eventModeOnStart",T.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",T.CONFORMANCE_VIOLATION="conformanceViolation",T.REPRESENTATION_SWITCH="representationSwitch",T.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",T.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",T.INBAND_PRFT="inbandPrft",T.MANAGED_MEDIA_SOURCE_START_STREAMING="managedMediaSourceStartStreaming",T.MANAGED_MEDIA_SOURCE_END_STREAMING="managedMediaSourceEndStreaming",T}return v})(f(8342).Z));c.Z=E},3393:function(l,c){function f(y,h){for(var p=0;p<h.length;p++){var E=h[p];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(y,E.key,E)}}var g=new((function(){function y(){(function(E,A){if(!(E instanceof A))throw new TypeError("Cannot call a class as a function")})(this,y),this.init()}var h,p;return h=y,(p=[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.CONTENT_STEERING="contentSteering",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.ABR_FETCH_THROUGHPUT_CALCULATION_AAST="abrFetchThroughputCalculationAAST",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY="highestSelectionPriority",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.TEXT_DISABLED="disabled",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.FONT_DOWNLOAD_DVB_SCHEME="urn:dvb:dash:fontdownload:2014",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability",this.OFF_MIMETYPE="application/font-sfnt",this.WOFF_MIMETYPE="application/font-woff",this.VIDEO_ELEMENT_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},this.FILE_LOADER_TYPES={FETCH:"fetch_loader",XHR:"xhr_loader"}}}])&&f(h.prototype,p),y})());c.Z=g},3860:function(l,c){function f(y,h){for(var p=0;p<h.length;p++){var E=h[p];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(y,E.key,E)}}var g=new((function(){function y(){(function(E,A){if(!(E instanceof A))throw new TypeError("Cannot call a class as a function")})(this,y),this.init()}var h,p;return h=y,(p=[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors",this.HTTP_REQUEST_DVB_REPORTING_TYPE="DVBReporting"}}])&&f(h.prototype,p),y})());c.Z=g},8080:function(l,c,f){f.d(c,{default:function(){return U}});var g=function j(){(function(he,de){if(!(he instanceof de))throw new TypeError("Cannot call a class as a function")})(this,j),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};g.SSL_CONNECTION_FAILED_PREFIX="SSL",g.DNS_RESOLUTION_FAILED="C00",g.HOST_UNREACHABLE="C01",g.CONNECTION_REFUSED="C02",g.CONNECTION_ERROR="C03",g.CORRUPT_MEDIA_ISOBMFF="M00",g.CORRUPT_MEDIA_OTHER="M01",g.BASE_URL_CHANGED="F00",g.BECAME_REPORTER="S00";var y=g,h=f(1180);function p(j){var he,de,ot=(j=j||{}).eventBus,wt=j.dashMetrics,st=j.metricsConstants,nt=j.events;function rt(dn){var _n=new y;if(de){for(var En in dn)dn.hasOwnProperty(En)&&(_n[En]=dn[En]);_n.mpdurl||(_n.mpdurl=de.originalUrl||de.url),_n.terror||(_n.terror=new Date),wt.addDVBErrors(_n)}}function ct(dn){dn.error||(de=dn.manifest)}function St(dn){rt({errorcode:y.BASE_URL_CHANGED,servicelocation:dn.entry})}function Wt(){rt({errorcode:y.BECAME_REPORTER})}function $t(dn){var _n;dn.metric===st.HTTP_REQUEST&&((_n=dn.value).responsecode===0||_n.responsecode==null||_n.responsecode>=400||_n.responsecode<100||_n.responsecode>=600)&&rt({errorcode:_n.responsecode||y.CONNECTION_ERROR,url:_n.url,terror:_n.tresponse,servicelocation:_n._serviceLocation})}function hn(dn){var _n;switch(dn.error?dn.error.code:0){case MediaError.MEDIA_ERR_NETWORK:_n=y.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:_n=y.CORRUPT_MEDIA_OTHER;break;default:return}rt({errorcode:_n})}return he={initialize:function(){ot.on(nt.MANIFEST_UPDATED,ct,he),ot.on(nt.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,St,he),ot.on(nt.METRIC_ADDED,$t,he),ot.on(nt.METRIC_UPDATED,$t,he),ot.on(nt.PLAYBACK_ERROR,hn,he),ot.on(h.Z.BECAME_REPORTING_PLAYER,Wt,he)},reset:function(){ot.off(nt.MANIFEST_UPDATED,ct,he),ot.off(nt.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,St,he),ot.off(nt.METRIC_ADDED,$t,he),ot.off(nt.METRIC_UPDATED,$t,he),ot.off(nt.PLAYBACK_ERROR,hn,he),ot.off(h.Z.BECAME_REPORTING_PLAYER,Wt,he)}}}p.__dashjs_factory_name="DVBErrorsTranslator";var E=dashjs.FactoryMaker.getSingletonFactory(p),A=f(2295);function _(j){j=j||{};var he,de,ot=!1,wt=this.context,st=j.mediaElement;return he={initialize:function(nt){nt&&nt.length&&(nt.forEach((function(rt){var ct=rt.starttime,St=ct+rt.duration;de.add(ct,St)})),ot=!!nt[0]._useWallClockTime)},reset:function(){de.clear()},isEnabled:function(){var nt,rt=de.length;if(!rt)return!0;nt=ot?new Date().getTime()/1e3:st.currentTime;for(var ct=0;ct<rt;ct+=1){var St=de.start(ct),Wt=de.end(ct);if(St<=nt&&nt<Wt)return!0}return!1}},de=(0,A.Z)(wt).create(),he}_.__dashjs_factory_name="RangeController";var I=dashjs.FactoryMaker.getClassFactory(_);function C(){return{serialise:function j(he){var de,ot,wt=[],st=[];for(de in he)if(he.hasOwnProperty(de)&&de.indexOf("_")!==0){if((ot=he[de])==null&&(ot=""),Array.isArray(ot)){if(!ot.length)continue;st=[],ot.forEach((function(nt){var rt=Object.prototype.toString.call(nt).slice(8,-1)!=="Object";st.push(rt?nt:j(nt))})),ot=st.map(encodeURIComponent).join(",")}else typeof ot=="string"?ot=encodeURIComponent(ot):ot instanceof Date?ot=ot.toISOString():typeof ot=="number"&&(ot=Math.round(ot));wt.push(de+"="+ot)}return wt.join("&")}}}C.__dashjs_factory_name="MetricSerialiser";var v=dashjs.FactoryMaker.getSingletonFactory(C);function T(){var j,he,de,ot=window.crypto||window.msCrypto,wt=Uint32Array,st=Math.pow(2,8*wt.BYTES_PER_ELEMENT)-1;function nt(){ot&&(j||(j=new wt(10)),ot.getRandomValues(j),he=0)}return de={random:function(rt,ct){var St;return rt||(rt=0),ct||(ct=1),ot?(he===j.length&&nt(),St=j[he]/st,he+=1):St=Math.random(),St*(ct-rt)+rt}},nt(),de}T.__dashjs_factory_name="RNG";var S=dashjs.FactoryMaker.getSingletonFactory(T),O=f(5717);function $(j){var he;j=j||{};var de,ot,wt,st,nt,rt,ct,St=this.context,Wt=[],$t=j.metricsConstants;function hn(){st=!1,nt=!1,rt=null,ct=null}return he={report:function(dn,_n){Array.isArray(_n)||(_n=[_n]),nt&&ct.isEnabled()&&_n.forEach((function(En){var tr=de.serialise(En);dn!==$t.DVB_ERRORS&&(tr="metricname=".concat(dn,"&").concat(tr)),(function(Ir,Fr,Dr){var ni=new XMLHttpRequest;ni.withCredentials=ot.getXHRWithCredentialsForType($t.HTTP_REQUEST_DVB_REPORTING_TYPE);var bi=function(){var Jr=Wt.indexOf(ni);Jr!==-1&&(Wt.splice(Jr,1),!(ni.status>=200&&ni.status<300)&&Dr&&Dr())};Wt.push(ni);try{ni.open("GET",Ir),ni.onloadend=bi,ni.onerror=bi,ni.send()}catch{ni.onerror()}})(tr="".concat(rt,"?").concat(tr),0,(function(){nt=!1}))}))},initialize:function(dn,_n){var En;if(ct=_n,!(rt=dn.dvbReportingUrl))throw new Error("required parameter missing (dvb:reportingUrl)");st||((En=dn.dvbProbability)&&(En===1e3||En/1e3>=wt.random())&&(nt=!0),st=!0)},reset:function(){hn()}},de=v(St).getInstance(),wt=S(St).getInstance(),ot=(0,O.Z)(St).getInstance(),hn(),he}$.__dashjs_factory_name="DVBReporting";var V=dashjs.FactoryMaker.getClassFactory($);function B(j){j=j||{};var he,de={"urn:dvb:dash:reporting:2014":V},ot=this.context,wt=j.debug?j.debug.getLogger(he):{},st=j.metricsConstants,nt=j.mediaPlayerModel||{};return{create:function(rt,ct){var St;try{(St=de[rt.schemeIdUri](ot).create({metricsConstants:st,mediaPlayerModel:nt})).initialize(rt,ct)}catch(Wt){St=null,wt.error("ReportingFactory: could not create Reporting with schemeIdUri ".concat(rt.schemeIdUri," (").concat(Wt.message,")"))}return St},register:function(rt,ct){de[rt]=ct},unregister:function(rt){delete de[rt]}}}B.__dashjs_factory_name="ReportingFactory";var ne=dashjs.FactoryMaker.getSingletonFactory(B);function D(j){var he=[],de=ne(this.context).getInstance(j);return{initialize:function(ot,wt){ot.some((function(st){var nt=de.create(st,wt);if(nt)return he.push(nt),!0}))},reset:function(){he.forEach((function(ot){return ot.reset()})),he=[]},report:function(ot,wt){he.forEach((function(st){return st.report(ot,wt)}))}}}D.__dashjs_factory_name="ReportingController";var X=dashjs.FactoryMaker.getClassFactory(D);function ve(){return{reconstructFullMetricName:function(j,he,de){var ot=j;return he&&(ot+="("+he,de&&de.length&&(ot+=","+de),ot+=")"),ot},validateN:function(j){if(!j)throw new Error("missing n");if(isNaN(j))throw new Error("n is NaN");if(j<0)throw new Error("n must be positive");return j}}}ve.__dashjs_factory_name="HandlerHelpers";var ie=dashjs.FactoryMaker.getSingletonFactory(ve);function ye(j){var he,de,ot,wt,st;j=j||{};var nt=this.context,rt=ie(nt).getInstance(),ct=[],St=j.metricsConstants;function Wt(){var $t=(function(){try{return Object.keys(ct).map((function(hn){return ct[hn]})).reduce((function(hn,dn){return hn.level<dn.level?hn:dn}))}catch{return}})();$t&&st!==$t.t&&(st=$t.t,he.report(ot,$t))}return{initialize:function($t,hn,dn){hn&&(de=rt.validateN(dn),he=hn,ot=rt.reconstructFullMetricName($t,dn),wt=setInterval(Wt,de))},reset:function(){clearInterval(wt),wt=null,de=0,he=null,st=null},handleNewMetric:function($t,hn,dn){$t===St.BUFFER_LEVEL&&(ct[dn]=hn)}}}ye.__dashjs_factory_name="BufferLevelHandler";var Ne=dashjs.FactoryMaker.getClassFactory(ye),Me=dashjs.FactoryMaker.getClassFactory((function(j){var he,de=(j=j||{}).eventBus,ot=j.metricsConstants;function wt(){de.off(h.Z.METRICS_INITIALISATION_COMPLETE,wt,this),de.trigger(h.Z.BECAME_REPORTING_PLAYER)}return{initialize:function(st,nt){nt&&(he=nt,de.on(h.Z.METRICS_INITIALISATION_COMPLETE,wt,this))},reset:function(){he=null},handleNewMetric:function(st,nt){st===ot.DVB_ERRORS&&he&&he.report(st,nt)}}}));function oe(j){var he,de,ot,wt,st;j=j||{};var nt=[],rt=ie(this.context).getInstance(),ct=j.metricsConstants;function St(){var Wt=nt;Wt.length&&he&&he.report(wt,Wt),nt=[]}return{initialize:function(Wt,$t,hn,dn){$t&&(de=rt.validateN(hn),he=$t,dn&&dn.length&&(ot=dn),wt=rt.reconstructFullMetricName(Wt,hn,dn),st=setInterval(St,de))},reset:function(){clearInterval(st),st=null,de=null,ot=null,nt=[],he=null},handleNewMetric:function(Wt,$t){Wt===ct.HTTP_REQUEST&&(ot&&ot!==$t.type||nt.push($t))}}}oe.__dashjs_factory_name="HttpListHandler";var Ce=dashjs.FactoryMaker.getClassFactory(oe);function Ye(){var j,he;return{initialize:function(de,ot){j=de,he=ot},reset:function(){he=null,j=void 0},handleNewMetric:function(de,ot){de===j&&he&&he.report(j,ot)}}}Ye.__dashjs_factory_name="GenericMetricHandler";var et=dashjs.FactoryMaker.getClassFactory(Ye);function Y(j){var he,de=(j=j||{}).debug?j.debug.getLogger(he):{},ot=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,wt=this.context,st={BufferLevel:Ne,DVBErrors:Me,HttpList:Ce,PlayList:et,RepSwitchList:et,TcpList:et};return{create:function(nt,rt){var ct,St=nt.match(ot);if(St){try{(ct=st[St[1]](wt).create({eventBus:j.eventBus,metricsConstants:j.metricsConstants})).initialize(St[1],rt,St[3],St[5])}catch(Wt){ct=null,de.error("MetricsHandlerFactory: Could not create handler for type ".concat(St[1]," with args ").concat(St[3],", ").concat(St[5]," (").concat(Wt.message,")"))}return ct}},register:function(nt,rt){st[nt]=rt},unregister:function(nt){delete st[nt]}}}Y.__dashjs_factory_name="MetricsHandlerFactory";var Ee=dashjs.FactoryMaker.getSingletonFactory(Y);function Pe(j){j=j||{};var he,de=[],ot=this.context,wt=j.eventBus,st=j.events,nt=Ee(ot).getInstance({debug:j.debug,eventBus:j.eventBus,metricsConstants:j.metricsConstants});function rt(ct){de.forEach((function(St){St.handleNewMetric(ct.metric,ct.value,ct.mediaType)}))}return he={initialize:function(ct,St){ct.split(",").forEach((function(Wt,$t,hn){var dn;if(Wt.indexOf("(")!==-1&&Wt.indexOf(")")===-1){var _n=hn[$t+1];_n&&_n.indexOf("(")===-1&&_n.indexOf(")")!==-1&&(Wt+=","+_n,delete hn[$t+1])}(dn=nt.create(Wt,St))&&de.push(dn)})),wt.on(st.METRIC_ADDED,rt,he),wt.on(st.METRIC_UPDATED,rt,he)},reset:function(){wt.off(st.METRIC_ADDED,rt,he),wt.off(st.METRIC_UPDATED,rt,he),de.forEach((function(ct){return ct.reset()})),de=[]}}}Pe.__dashjs_factory_name="MetricsHandlersController";var Xe=dashjs.FactoryMaker.getClassFactory(Pe);function Ze(j){var he,de,ot;j=j||{};var wt=this.context;function st(){he&&he.reset(),de&&de.reset(),ot&&ot.reset()}return{initialize:function(nt){try{(ot=I(wt).create({mediaElement:j.mediaElement})).initialize(nt.Range),(de=X(wt).create({debug:j.debug,metricsConstants:j.metricsConstants,mediaPlayerModel:j.mediaPlayerModel})).initialize(nt.Reporting,ot),(he=Xe(wt).create({debug:j.debug,eventBus:j.eventBus,metricsConstants:j.metricsConstants,events:j.events})).initialize(nt.metrics,de)}catch(rt){throw st(),rt}},reset:st}}Ze.__dashjs_factory_name="MetricsController";var at=dashjs.FactoryMaker.getClassFactory(Ze),jt=function j(){(function(he,de){if(!(he instanceof de))throw new TypeError("Cannot call a class as a function")})(this,j),this.metrics="",this.Range=[],this.Reporting=[]},xt=function j(){(function(he,de){if(!(he instanceof de))throw new TypeError("Cannot call a class as a function")})(this,j),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1},ht=function j(){(function(he,de){if(!(he instanceof de))throw new TypeError("Cannot call a class as a function")})(this,j),this.schemeIdUri="",this.value="",this.dvbReportingUrl="",this.dvbProbability=1e3};function It(j){var he=(j=j||{}).adapter,de=j.constants;return{getMetrics:function(ot){var wt=[];return ot&&ot.Metrics_asArray&&ot.Metrics_asArray.forEach((function(st){var nt=new jt,rt=he.getIsDynamic(ot);st.hasOwnProperty("metrics")&&(nt.metrics=st.metrics,st.Range_asArray&&st.Range_asArray.forEach((function(ct){var St=new xt;St.starttime=(function(Wt,$t,hn){var dn,_n,En=0;return $t?En=he.getAvailabilityStartTime(Wt)/1e3:(dn=he.getRegularPeriods(Wt)).length&&(En=dn[0].start),_n=En,hn&&hn.hasOwnProperty(de.START_TIME)&&(_n+=hn.starttime),_n})(ot,rt,ct),ct.hasOwnProperty("duration")?St.duration=ct.duration:St.duration=he.getDuration(ot),St._useWallClockTime=rt,nt.Range.push(St)})),st.Reporting_asArray&&(st.Reporting_asArray.forEach((function(ct){var St=new ht;ct.hasOwnProperty(de.SCHEME_ID_URI)&&(St.schemeIdUri=ct.schemeIdUri,ct.hasOwnProperty("value")&&(St.value=ct.value),ct.hasOwnProperty(de.DVB_REPORTING_URL)&&(St.dvbReportingUrl=ct[de.DVB_REPORTING_URL]),ct.hasOwnProperty(de.DVB_PROBABILITY)&&(St.dvbProbability=ct[de.DVB_PROBABILITY]),nt.Reporting.push(St))})),wt.push(nt)))})),wt}}}It.__dashjs_factory_name="ManifestParsing";var Ue=dashjs.FactoryMaker.getSingletonFactory(It);function Ve(j){var he;j=j||{};var de={},ot=this.context,wt=j.eventBus,st=j.events;function nt(ct){if(!ct.error){var St=Object.keys(de);Ue(ot).getInstance({adapter:j.adapter,constants:j.constants}).getMetrics(ct.manifest).forEach((function(Wt){var $t=JSON.stringify(Wt);if(de.hasOwnProperty($t))St.splice($t,1);else try{var hn=at(ot).create(j);hn.initialize(Wt),de[$t]=hn}catch{}})),St.forEach((function(Wt){de[Wt].reset(),delete de[Wt]})),wt.trigger(h.Z.METRICS_INITIALISATION_COMPLETE)}}function rt(){Object.keys(de).forEach((function(ct){de[ct].reset()})),de={}}return he={reset:function(){wt.off(st.MANIFEST_UPDATED,nt,he),wt.off(st.STREAM_TEARDOWN_COMPLETE,rt,he)}},wt.on(st.MANIFEST_UPDATED,nt,he),wt.on(st.STREAM_TEARDOWN_COMPLETE,rt,he),he}Ve.__dashjs_factory_name="MetricsCollectionController";var _t=dashjs.FactoryMaker.getClassFactory(Ve);function M(){var j=this.context;return{createMetricsReporting:function(he){return E(j).getInstance({eventBus:he.eventBus,dashMetrics:he.dashMetrics,metricsConstants:he.metricsConstants,events:he.events}).initialize(),_t(j).create(he)},getReportingFactory:function(){return ne(j).getInstance()},getMetricsHandlerFactory:function(){return Ee(j).getInstance()}}}M.__dashjs_factory_name="MetricsReporting";var x=dashjs.FactoryMaker.getClassFactory(M);x.events=h.Z,dashjs.FactoryMaker.updateClassFactory(M.__dashjs_factory_name,x);var U=x},1180:function(l,c,f){function g(A){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},g(A)}function y(A,_){return y=Object.setPrototypeOf||function(I,C){return I.__proto__=C,I},y(A,_)}function h(A,_){return!_||g(_)!=="object"&&typeof _!="function"?(function(I){if(I===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I})(A):_}function p(A){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)},p(A)}var E=new((function(A){(function(T,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(S&&S.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),S&&y(T,S)})(v,A);var _,I,C=(_=v,I=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}})(),function(){var T,S=p(_);if(I){var O=p(this).constructor;T=Reflect.construct(S,arguments,O)}else T=S.apply(this,arguments);return h(this,T)});function v(){var T;return(function(S,O){if(!(S instanceof O))throw new TypeError("Cannot call a class as a function")})(this,v),(T=C.call(this)).METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",T.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",T.CMCD_DATA_GENERATED="cmcdDataGenerated",T}return v})(f(8342).Z));c.Z=E},5717:function(l,c,f){var g=f(2610),y=f(5448),h=f(1264),p=f(3106),E=f(1767),A=f(3393);function _(){var I,C,v,T,S,O,$,V,B=this.context,ne=(0,h.Z)(B).getInstance();function D(){T=[],S=[],O=[],V=[],$=null,C=[]}function X(Ne,Me){var oe=-1;Ne.some((function(Ce,Ye){if(Ce===Me)return oe=Ye,!0})),oe<0||Ne.splice(oe,1)}function ve(Ne){var Me;for(Me=0;Me<V.length;Me++)if(V[Me].rulename===Ne)return Me;return-1}function ie(Ne,Me){ye(Ne,Me);var oe=new g.Z;oe.schemeIdUri=Ne,oe.value=Me,C.push(oe)}function ye(Ne,Me){(0,p.PS)(Ne,"string"),(0,p.PS)(Me,"string"),C.forEach((function(oe,Ce){oe.schemeIdUri===Ne&&oe.value===Me&&C.splice(Ce,1)}))}return I={getCustomInitialTrackSelectionFunction:function(){return $},setCustomInitialTrackSelectionFunction:function(Ne){$=Ne},resetCustomInitialTrackSelectionFunction:function(){$=null},getLicenseResponseFilters:function(){return S},getLicenseRequestFilters:function(){return T},getCustomCapabilitiesFilters:function(){return O},registerCustomCapabilitiesFilter:function(Ne){O.push(Ne)},registerLicenseResponseFilter:function(Ne){S.push(Ne)},registerLicenseRequestFilter:function(Ne){T.push(Ne)},unregisterCustomCapabilitiesFilter:function(Ne){X(O,Ne)},unregisterLicenseResponseFilter:function(Ne){X(S,Ne)},unregisterLicenseRequestFilter:function(Ne){X(T,Ne)},addAbrCustomRule:function(Ne,Me,oe){if(typeof Ne!="string"||Ne!==E.Z.ABANDON_FRAGMENT_RULES&&Ne!==E.Z.QUALITY_SWITCH_RULES||typeof Me!="string")throw A.Z.BAD_ARGUMENT_ERROR;var Ce=ve(Me);Ce===-1?V.push({type:Ne,rulename:Me,rule:oe}):(V[Ce].type=Ne,V[Ce].rule=oe)},removeAllAbrCustomRule:function(){V=[]},removeAbrCustomRule:function(Ne){if(Ne){var Me=ve(Ne);Me!==-1&&V.splice(Me,1)}else V=[]},getAbrCustomRules:function(){return V},addUTCTimingSource:ie,removeUTCTimingSource:ye,getUTCTimingSources:function(){return C},clearDefaultUTCTimingSources:function(){C=[]},restoreDefaultUTCTimingSources:function(){var Ne=ne.get().streaming.utcSynchronization.defaultTimingSource;ie(Ne.scheme,Ne.value)},setXHRWithCredentialsForType:function Ne(Me,oe){Me?v[Me]=!!oe:Object.keys(v).forEach((function(Ce){Ne(Ce,oe)}))},getXHRWithCredentialsForType:function(Ne){var Me=v[Ne];return Me===void 0?v.default:Me},setConfig:function(){},reset:function(){D()}},v={default:!1},D(),I}_.__dashjs_factory_name="CustomParametersModel",c.Z=y.Z.getSingletonFactory(_)},9032:function(l,c,f){var g=f(5448),y=f(7473);function h(E){var A=(E=E||{}).requestModifier;function _(I){var C=new Date,v=I.request,T=new XMLHttpRequest;if(T.open(I.method,I.url,!0),v.responseType&&(T.responseType=v.responseType),v.range&&T.setRequestHeader("Range","bytes="+v.range),v.requestStartDate||(v.requestStartDate=C),A&&A.modifyRequestHeader&&(T=A.modifyRequestHeader(T,{url:I.url})),I.headers)for(var S in I.headers){var O=I.headers[S];O&&T.setRequestHeader(S,O)}T.withCredentials=I.withCredentials,T.onload=I.onload,T.onloadend=I.onend,T.onerror=I.onerror,T.onprogress=I.progress,T.onabort=I.onabort,T.ontimeout=I.ontimeout,T.timeout=I.timeout,T.send(),I.response=T}return{load:function(I){A&&A.modifyRequest?(0,y.k)(I,A).then((function(){return _(I)})):_(I)},abort:function(I){var C=I.response;C.onloadend=C.onerror=C.onprogress=void 0,C.abort()}}}h.__dashjs_factory_name="XHRLoader";var p=g.Z.getClassFactory(h);c.Z=p},1737:function(l,c,f){function g(pn,nn){for(var be=0;be<nn.length;be++){var Te=nn[be];Te.enumerable=Te.enumerable||!1,Te.configurable=!0,"value"in Te&&(Te.writable=!0),Object.defineProperty(pn,Te.key,Te)}}f.d(c,{default:function(){return xo}});var y={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]},h=(function(){function pn(){(function(Te,je){if(!(Te instanceof je))throw new TypeError("Cannot call a class as a function")})(this,pn)}var nn,be;return nn=pn,be=[{key:"findCencContentProtection",value:function(Te){for(var je=null,Je=0;Je<Te.length;++Je){var Ge=Te[Je];Ge.schemeIdUri.toLowerCase()!=="urn:mpeg:dash:mp4protection:2011"||Ge.value.toLowerCase()!=="cenc"&&Ge.value.toLowerCase()!=="cbcs"||(je=Ge)}return je}},{key:"getPSSHData",value:function(Te){var je=8,Je=new DataView(Te),Ge=Je.getUint8(je);return je+=20,Ge>0&&(je+=4+16*Je.getUint32(je)),je+=4,Te.slice(je)}},{key:"getPSSHForKeySystem",value:function(Te,je){var Je=pn.parsePSSHList(je);return Te&&Je.hasOwnProperty(Te.uuid.toLowerCase())?Je[Te.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(Te,je){return"pssh"in Te?(Te.pssh.__text=Te.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),je.decodeArray(Te.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(Te){if(Te==null)return[];for(var je=new DataView(Te.buffer||Te),Je={},Ge=0;;){var vt,Tt,Qt=void 0,sn=Ge;if(Ge>=je.buffer.byteLength)break;if(vt=Ge+je.getUint32(Ge),Ge+=4,je.getUint32(Ge)===1886614376)if(Ge+=4,(Tt=je.getUint8(Ge))===0||Tt===1){Ge++,Ge+=3,Qt="";var qt=void 0,Nt=void 0;for(qt=0;qt<4;qt++)Qt+=(Nt=je.getUint8(Ge+qt).toString(16)).length===1?"0"+Nt:Nt;for(Ge+=4,Qt+="-",qt=0;qt<2;qt++)Qt+=(Nt=je.getUint8(Ge+qt).toString(16)).length===1?"0"+Nt:Nt;for(Ge+=2,Qt+="-",qt=0;qt<2;qt++)Qt+=(Nt=je.getUint8(Ge+qt).toString(16)).length===1?"0"+Nt:Nt;for(Ge+=2,Qt+="-",qt=0;qt<2;qt++)Qt+=(Nt=je.getUint8(Ge+qt).toString(16)).length===1?"0"+Nt:Nt;for(Ge+=2,Qt+="-",qt=0;qt<6;qt++)Qt+=(Nt=je.getUint8(Ge+qt).toString(16)).length===1?"0"+Nt:Nt;Ge+=6,Ge+=4,Je[Qt=Qt.toLowerCase()]=je.buffer.slice(sn,vt),Ge=vt}else Ge=vt;else Ge=vt}return Je}},{key:"getLicenseServerUrlFromMediaInfo",value:function(Te,je){try{if(!Te||Te.length===0)return null;for(var Je=0,Ge=null;Je<Te.length&&!Ge;){var vt=Te[Je];if(vt&&vt.contentProtection&&vt.contentProtection.length>0){var Tt=vt.contentProtection.filter((function(On){return On.schemeIdUri&&On.schemeIdUri===je}));if(Tt&&Tt.length>0)for(var Qt=0;Qt<Tt.length&&!Ge;){for(var sn=Tt[Qt],qt=0;qt<y.attributes.length&&!Ge;){for(var Nt=0,en=y.attributes[qt];Nt<y.prefixes.length&&!Ge;){var vn=y.prefixes[Nt];sn[en]&&sn[en].__prefix&&sn[en].__prefix===vn&&sn[en].__text&&(Ge=sn[en].__text),Nt+=1}qt+=1}Qt+=1}}Je+=1}return Ge}catch{return null}}}],be&&g(nn,be),pn})(),p=function pn(nn,be){(function(Te,je){if(!(Te instanceof je))throw new TypeError("Cannot call a class as a function")})(this,pn),this.contentType=nn,this.robustness=be},E=function pn(nn,be,Te,je,Je){(function(Ge,vt){if(!(Ge instanceof vt))throw new TypeError("Cannot call a class as a function")})(this,pn),this.initDataTypes=["cenc"],nn&&nn.length&&(this.audioCapabilities=nn),be&&be.length&&(this.videoCapabilities=be),this.distinctiveIdentifier=Te,this.persistentState=je,this.sessionTypes=Je};function A(pn){return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(nn){return typeof nn}:function(nn){return nn&&typeof Symbol=="function"&&nn.constructor===Symbol&&nn!==Symbol.prototype?"symbol":typeof nn},A(pn)}function _(pn,nn){return _=Object.setPrototypeOf||function(be,Te){return be.__proto__=Te,be},_(pn,nn)}function I(pn,nn){return!nn||A(nn)!=="object"&&typeof nn!="function"?(function(be){if(be===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return be})(pn):nn}function C(pn){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(nn){return nn.__proto__||Object.getPrototypeOf(nn)},C(pn)}var v=new((function(pn){(function(Je,Ge){if(typeof Ge!="function"&&Ge!==null)throw new TypeError("Super expression must either be null or a function");Je.prototype=Object.create(Ge&&Ge.prototype,{constructor:{value:Je,writable:!0,configurable:!0}}),Ge&&_(Je,Ge)})(je,pn);var nn,be,Te=(nn=je,be=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}})(),function(){var Je,Ge=C(nn);if(be){var vt=C(this).constructor;Je=Reflect.construct(Ge,arguments,vt)}else Je=Ge.apply(this,arguments);return I(this,Je)});function je(){var Je;return(function(Ge,vt){if(!(Ge instanceof vt))throw new TypeError("Cannot call a class as a function")})(this,je),(Je=Te.call(this)).MEDIA_KEYERR_CODE=100,Je.MEDIA_KEYERR_UNKNOWN_CODE=101,Je.MEDIA_KEYERR_CLIENT_CODE=102,Je.MEDIA_KEYERR_SERVICE_CODE=103,Je.MEDIA_KEYERR_OUTPUT_CODE=104,Je.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,Je.MEDIA_KEYERR_DOMAIN_CODE=106,Je.MEDIA_KEY_MESSAGE_ERROR_CODE=107,Je.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,Je.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,Je.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,Je.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,Je.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,Je.KEY_SESSION_CREATED_ERROR_CODE=113,Je.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,Je.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",Je.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",Je.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",Je.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",Je.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",Je.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",Je.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",Je.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",Je.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",Je.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",Je.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",Je.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",Je.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",Je.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --",Je}return je})(f(2230).Z)),T=f(5459),S=function pn(nn,be,Te,je,Je,Ge,vt,Tt){(function(Qt,sn){if(!(Qt instanceof sn))throw new TypeError("Cannot call a class as a function")})(this,pn),this.url=nn,this.method=be,this.responseType=Te,this.headers=je,this.withCredentials=Je,this.messageType=Ge,this.sessionId=vt,this.data=Tt},O=function pn(nn,be,Te){(function(je,Je){if(!(je instanceof Je))throw new TypeError("Cannot call a class as a function")})(this,pn),this.url=nn,this.headers=be,this.data=Te},$=f(7855),V=f(703),B=f(3393),ne=f(5448);function D(pn){return D=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(nn){return typeof nn}:function(nn){return nn&&typeof Symbol=="function"&&nn.constructor===Symbol&&nn!==Symbol.prototype?"symbol":typeof nn},D(pn)}function X(pn){var nn,be,Te,je,Je,Ge,vt,Tt,Qt,sn,qt,Nt=(pn=pn||{}).protectionKeyController,en=pn.protectionModel,vn=pn.eventBus,On=pn.events,Un=pn.debug,Er=pn.BASE64,cn=pn.constants,ze=[],pt=pn.cmcdModel,Gt=pn.settings,Gn=pn.customParametersModel;function Rn(){if(!(vn&&vn.hasOwnProperty("on")&&Nt&&Nt.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function pr(xn,nr){Tt||Qt?Tt&&Sr():(function(Rr,si){if(!Qt){Qt=!0;var ti,io=[];Rr=Rr.sort((function(Oi,Ei){return(Je&&Je[Oi.ks.systemString]&&Je[Oi.ks.systemString].priority>=0?Je[Oi.ks.systemString].priority:Rr.length)-(Je&&Je[Ei.ks.systemString]&&Je[Ei.ks.systemString].priority>=0?Je[Ei.ks.systemString].priority:Rr.length)}));for(var hi=0;hi<Rr.length;hi++){var Kr=Ja(Rr[hi]);io.push({ks:Rr[hi].ks,configs:[Kr],protData:Rr[hi].protData})}en.requestKeySystemAccess(io).then((function(Oi){var Ei=(ti=Oi.data).mksa&&ti.mksa.selectedSystemString?ti.mksa.selectedSystemString:ti.keySystem.systemString;return be.info("DRM: KeySystem Access Granted for system string ("+Ei+")!  Selecting key system..."),en.selectKeySystem(ti)})).then((function(Oi){if(Tt=Oi,Qt=!1,en){vn.trigger(On.KEY_SYSTEM_SELECTED,{data:ti});var Ei=Vr(Tt);Ei&&Ei.serverCertificate&&Ei.serverCertificate.length>0&&en.setServerCertificate(Er.decodeArray(Ei.serverCertificate).buffer),Sr()}})).catch((function(Oi){Tt=null,Qt=!1,si||vn.trigger(On.KEY_SYSTEM_SELECTED,{data:null,error:new T.Z(v.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,v.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+Oi.error)})}))}})(xn,nr)}function Sr(){for(var xn,nr=0;nr<Te.length;nr++)for(xn=0;xn<Te[nr].length;xn++)if(Tt===Te[nr][xn].ks){Ri(Te[nr][xn]);break}Te=[]}function Ri(xn){if(Nt.isClearKey(Tt)&&xn.protData&&xn.protData.hasOwnProperty("clearkeys")&&Object.keys(xn.protData.clearkeys).length!==0){var nr={kids:Object.keys(xn.protData.clearkeys)};xn.initData=new TextEncoder().encode(JSON.stringify(nr))}xn.sessionId?xi(xn):xn.initData!==null&&oi(xn)}function xi(xn){Rn(),en.loadKeySession(xn)}function oi(xn){var nr=h.getPSSHForKeySystem(Tt,xn?xn.initData:null);if(nr){if((function(Rr){if(!Rr)return!1;try{for(var si=en.getSessions(),ti=0;ti<si.length;ti++)if(si[ti].getKeyId()===Rr)return!0;return!1}catch{return!1}})(xn.keyId)||yi(nr))return;try{xn.initData=nr,en.createKeySession(xn)}catch(Rr){vn.trigger(On.KEY_SESSION_CREATED,{data:null,error:new T.Z(v.KEY_SESSION_CREATED_ERROR_CODE,v.KEY_SESSION_CREATED_ERROR_MESSAGE+Rr.message)})}}else xn&&xn.initData?en.createKeySession(xn):vn.trigger(On.KEY_SESSION_CREATED,{data:null,error:new T.Z(v.KEY_SESSION_CREATED_ERROR_CODE,v.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(Tt?Tt.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function Vr(xn){if(xn){var nr=xn.systemString;if(Je)return nr in Je?Je[nr]:null}return null}function yi(xn){if(!xn)return!1;try{for(var nr=en.getAllInitData(),Rr=0;Rr<nr.length;Rr++)if(Nt.initDataEquals(xn,nr[Rr]))return be.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch{return!1}}function Ni(xn){Rn(),xn?(en.setMediaElement(xn),vn.on(On.NEED_KEY,el,nn)):xn===null&&(en.setMediaElement(xn),vn.off(On.NEED_KEY,el,nn))}function Ja(xn){var nr=xn.protData,Rr=[],si=[],ti=nr&&nr.audioRobustness&&nr.audioRobustness.length>0?nr.audioRobustness:vt,io=nr&&nr.videoRobustness&&nr.videoRobustness.length>0?nr.videoRobustness:vt,hi=xn.sessionType,Kr=nr&&nr.distinctiveIdentifier?nr.distinctiveIdentifier:"optional",Oi=nr&&nr.persistentState?nr.persistentState:hi==="temporary"?"optional":"required";return je.forEach((function(Ei){Ei.type===cn.AUDIO?Rr.push(new p(Ei.codec,ti)):Ei.type===cn.VIDEO&&si.push(new p(Ei.codec,io))})),new E(Rr,si,Kr,Oi,[hi])}function po(xn){xn.error?vn.trigger(On.KEY_STATUSES_CHANGED,{data:null,error:xn.error}):be.debug("DRM: key status = "+xn.status)}function _s(xn){be.debug("DRM: onKeyMessage");var nr=xn.data;vn.trigger(On.KEY_MESSAGE,{data:nr});var Rr=nr.messageType?nr.messageType:"license-request",si=nr.message,ti=nr.sessionToken,io=Vr(Tt),hi=Nt.getLicenseServerModelInstance(Tt,io,Rr),Kr={sessionToken:ti,messageType:Rr};if(si&&si.byteLength!==0){if(!hi)return be.debug("DRM: License server request not required for this message (type = "+xn.data.messageType+").  Session ID = "+ti.getSessionId()),void yo(Kr);if(Nt.isClearKey(Tt)){var Oi=Nt.processClearKeyLicenseRequest(Tt,io,si);if(Oi&&Oi.keyPairs&&Oi.keyPairs.length>0)return be.debug("DRM: ClearKey license request handled by application!"),yo(Kr),void en.updateKeySession(ti,Oi)}(function(Ei,No,vo){var Ms=Ei.sessionToken,bs=Ei.messageType?Ei.messageType:"license-request",Li={sessionToken:Ms,messageType:bs},Vo=Tt?Tt.systemString:null,qs=(function(wr,ai,Ks,xa,Tr){var Ot=null,qn=xa.message;if(wr&&wr.serverURL){var ir=wr.serverURL;typeof ir=="string"&&ir!==""?Ot=ir:D(ir)==="object"&&ir.hasOwnProperty(ai)&&(Ot=ir[ai])}else if(wr&&wr.laURL&&wr.laURL!=="")Ot=wr.laURL;else if(!(Ot=h.getLicenseServerUrlFromMediaInfo(je,Tt.schemeIdURI))&&!Nt.isClearKey(Tt)){var Fi=h.getPSSHData(Ks.initData);(Ot=Tt.getLicenseServerURLFromInitData(Fi))||(Ot=xa.laURL)}return Ot=Tr.getServerURLFromMessage(Ot,qn,ai)})(vo,bs,Ms,Ei,No);if(qs){var Es={},ls=!1;vo&&El(Es,vo.httpRequestHeaders);var Ca=Ei.message;El(Es,Tt.getRequestHeadersFromMessage(Ca)),Object.keys(Es).forEach((function(wr){wr.toLowerCase()==="authorization"&&(ls=!0)})),vo&&typeof vo.withCredentials=="boolean"&&(ls=vo.withCredentials);var tl=function(wr){if(en)if(wr.status>=200&&wr.status<=299){var ai=V.Z.parseHttpHeaders(wr.getAllResponseHeaders?wr.getAllResponseHeaders():null),Ks=new O(wr.responseURL,ai,wr.response);aa(Gn.getLicenseResponseFilters(),Ks).then((function(){var xa=No.getLicenseMessage(Ks.data,Vo,bs);xa!==null?(yo(Li),en.updateKeySession(Ms,xa)):Ia(wr,Li,Vo,bs,No)}))}else Ia(wr,Li,Vo,bs,No)},Ra=function(wr){yo(Li,new T.Z(v.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,v.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+Vo+' update, XHR aborted. status is "'+wr.statusText+'" ('+wr.status+"), readyState is "+wr.readyState))},Ws=function(wr){yo(Li,new T.Z(v.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,v.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+Vo+' update, XHR error. status is "'+wr.statusText+'" ('+wr.status+"), readyState is "+wr.readyState))},la=Tt.getLicenseRequestFromMessage(Ca),ua=No.getHTTPMethod(bs),af=No.getResponseType(Vo,bs),wl=vo&&!isNaN(vo.httpTimeout)?vo.httpTimeout:8e3,Tl=Ms.getSessionId()||null,us=new S(qs,ua,af,Es,ls,bs,Tl,la),lf=isNaN(Gt.get().streaming.retryAttempts[$.w.LICENSE])?3:Gt.get().streaming.retryAttempts[$.w.LICENSE];aa(Gn.getLicenseRequestFilters(),us).then((function(){Aa(us,lf,wl,tl,Ra,Ws)}))}else yo(Li,new T.Z(v.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,v.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))})(nr,hi,io)}else yo(Kr,new T.Z(v.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,v.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function yo(xn,nr){vn.trigger(On.LICENSE_REQUEST_COMPLETE,{data:xn,error:nr})}function Aa(xn,nr,Rr,si,ti,io){var hi=new XMLHttpRequest;if(Gt.get().streaming.cmcd&&Gt.get().streaming.cmcd.enabled&&Gt.get().streaming.cmcd.mode===B.Z.CMCD_MODE_QUERY){var Kr=pt.getQueryParameter({url:xn.url,type:$.w.LICENSE});Kr&&(xn.url=V.Z.addAditionalQueryParameterToUrl(xn.url,[Kr]))}for(var Oi in hi.open(xn.method,xn.url,!0),hi.responseType=xn.responseType,hi.withCredentials=xn.withCredentials,Rr>0&&(hi.timeout=Rr),xn.headers)hi.setRequestHeader(Oi,xn.headers[Oi]);if(Gt.get().streaming.cmcd&&Gt.get().streaming.cmcd.enabled&&Gt.get().streaming.cmcd.mode===B.Z.CMCD_MODE_HEADER){var Ei=pt.getHeaderParameters({url:xn.url,type:$.w.LICENSE});if(Ei)for(var No in Ei){var vo=Ei[No];vo&&hi.setRequestHeader(No,vo)}}var Ms=function(){nr--;var bs=isNaN(Gt.get().streaming.retryIntervals[$.w.LICENSE])?1e3:Gt.get().streaming.retryIntervals[$.w.LICENSE];qt=setTimeout((function(){Aa(xn,nr,Rr,si,ti,io)}),bs)};hi.onload=function(){sn=null,this.status>=200&&this.status<=299||nr<=0?si(this):(be.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+nr),Ms())},hi.ontimeout=hi.onerror=function(){sn=null,nr<=0?io(this):(be.warn("License request network request failed . Retrying it... Pending retries: "+nr),Ms())},hi.onabort=function(){ti(this)},vn.trigger(On.LICENSE_REQUEST_SENDING,{url:xn.url,headers:xn.headers,payload:xn.data,sessionId:xn.sessionId}),sn=hi,hi.send(xn.data)}function Qo(){sn&&(sn.onloadend=sn.onerror=sn.onprogress=void 0,sn.abort(),sn=null),qt&&(clearTimeout(qt),qt=null)}function El(xn,nr){if(nr)for(var Rr in nr)xn[Rr]=nr[Rr]}function Ia(xn,nr,Rr,si,ti){var io="NONE",hi=null;xn.response&&(io=ti.getErrorResponse(xn.response,Rr,si),hi={serverResponse:xn.response||null,responseCode:xn.status||null,responseText:xn.statusText||null}),yo(nr,new T.Z(v.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,v.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+Rr+' update, XHR complete. status is "'+xn.statusText+'" ('+xn.status+"), readyState is "+xn.readyState+".  Response is "+io,hi))}function aa(xn,nr){return xn?xn.reduce((function(Rr,si){return Rr.then((function(){return si(nr)}))}),Promise.resolve()):Promise.resolve()}function el(xn,nr){if(!Gt.get().streaming.protection.ignoreEmeEncryptedEvent){if(be.debug("DRM: onNeedKey"),xn.key.initDataType!=="cenc")return void be.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+xn.key.initDataType);if(je.length===0&&(be.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(nr=nr===void 0?1:nr+1)<5))return void ze.push(setTimeout((function(){el(xn,nr)}),500));var Rr=xn.key.initData;if(ArrayBuffer.isView(Rr)&&(Rr=Rr.buffer),Tt){var si=h.getPSSHForKeySystem(Tt,Rr);if(si&&yi(si))return}be.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(Rr)));var ti=Nt.getSupportedKeySystemsFromSegmentPssh(Rr,Je,Ge);if(ti.length===0)return void be.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!");(function(io){Te.push(io),pr(io,!1)})(ti)}}return nn={initializeForMedia:function(xn){if(!xn)throw new Error("mediaInfo can not be null or undefined");Rn(),je.push(xn)},clearMediaInfoArray:function(){je=[]},handleKeySystemFromManifest:function(){if(je&&je.length!==0){var xn=[];je.forEach((function(nr){var Rr=Nt.getSupportedKeySystemsFromContentProtection(nr.contentProtection,Je,Ge);Rr.length>0&&(xn.length===0&&(xn=Rr),Te.push(Rr))})),xn&&xn.length>0&&pr(xn,!0)}},createKeySession:oi,loadKeySession:xi,removeKeySession:function(xn){Rn(),en.removeKeySession(xn)},closeKeySession:function(xn){Rn(),en.closeKeySession(xn)},setServerCertificate:function(xn){Rn(),en.setServerCertificate(xn)},setMediaElement:Ni,setSessionType:function(xn){Ge=xn},setRobustnessLevel:function(xn){vt=xn},setProtectionData:function(xn){Je=xn,Nt.setProtectionData(xn)},getSupportedKeySystemsFromContentProtection:function(xn){return Rn(),Nt.getSupportedKeySystemsFromContentProtection(xn,Je,Ge)},getKeySystems:function(){return Nt?Nt.getKeySystems():[]},setKeySystems:function(xn){Nt&&Nt.setKeySystems(xn)},stop:function(){Qo(),en&&en.stop()},reset:function(){vn.off(On.INTERNAL_KEY_MESSAGE,_s,nn),vn.off(On.INTERNAL_KEY_STATUS_CHANGED,po,nn),Rn(),Qo(),Ni(null),Tt=null,Qt=!1,en&&(en.reset(),en=null),ze.forEach((function(xn){return clearTimeout(xn)})),ze=[],je=[],Te=[]}},be=Un.getLogger(nn),Te=[],je=[],Ge="temporary",vt="",sn=null,qt=null,vn.on(On.INTERNAL_KEY_MESSAGE,_s,nn),vn.on(On.INTERNAL_KEY_STATUS_CHANGED,po,nn),nn}X.__dashjs_factory_name="ProtectionController";var ve=ne.Z.getClassFactory(X),ie=function pn(nn,be){(function(Te,je){if(!(Te instanceof je))throw new TypeError("Cannot call a class as a function")})(this,pn),this.keyID=nn,this.key=be};function ye(pn,nn){for(var be=0;be<nn.length;be++){var Te=nn[be];Te.enumerable=Te.enumerable||!1,Te.configurable=!0,"value"in Te&&(Te.writable=!0),Object.defineProperty(pn,Te.key,Te)}}var Ne=(function(){function pn(Te,je){if((function(Je,Ge){if(!(Je instanceof Ge))throw new TypeError("Cannot call a class as a function")})(this,pn),je&&je!=="persistent"&&je!=="temporary")throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=Te,this.type=je}var nn,be;return nn=pn,(be=[{key:"toJWK",value:function(){var Te,je=this.keyPairs.length,Je={keys:[]};for(Te=0;Te<je;Te++){var Ge={kty:"oct",alg:"A128KW",kid:this.keyPairs[Te].keyID,k:this.keyPairs[Te].key};Je.keys.push(Ge)}this.type&&(Je.type=this.type);var vt=JSON.stringify(Je),Tt=vt.length,Qt=new ArrayBuffer(Tt),sn=new Uint8Array(Qt);for(Te=0;Te<Tt;Te++)sn[Te]=vt.charCodeAt(Te);return Qt}}])&&ye(nn.prototype,be),pn})();function Me(pn,nn){for(var be=0;be<nn.length;be++){var Te=nn[be];Te.enumerable=Te.enumerable||!1,Te.configurable=!0,"value"in Te&&(Te.writable=!0),Object.defineProperty(pn,Te.key,Te)}}var oe=new((function(){function pn(){(function(Te,je){if(!(Te instanceof je))throw new TypeError("Cannot call a class as a function")})(this,pn),this.init()}var nn,be;return nn=pn,(be=[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready",this.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING="com.microsoft.playready.recommendation",this.INITIALIZATION_DATA_TYPE_CENC="cenc",this.INITIALIZATION_DATA_TYPE_KEYIDS="keyids",this.INITIALIZATION_DATA_TYPE_WEBM="webm"}}])&&Me(nn.prototype,be),pn})()),Ce="e2719d58-a985-b3c9-781a-b030af78d30e",Ye=oe.CLEARKEY_KEYSTEM_STRING,et="urn:uuid:"+Ce;function Y(pn){var nn=(pn=pn||{}).BASE64;return{uuid:Ce,schemeIdURI:et,systemString:Ye,getInitData:function(be,Te){try{var je=h.parseInitDataFromContentProtection(be,nn);if(!je&&Te){var Je={kids:[(function(Ge){try{var vt=Ge.replace(/-/g,"");return(vt=btoa(vt.match(/\w{2}/g).map((function(Tt){return String.fromCharCode(parseInt(Tt,16))})).join(""))).replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}catch{return null}})(Te["cenc:default_KID"])]};je=new TextEncoder().encode(JSON.stringify(Je))}return je}catch{return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(be){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(be))))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(be,Te){var je=null;if(be){for(var Je=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(Te))),Ge=[],vt=0;vt<Je.kids.length;vt++){var Tt=Je.kids[vt],Qt=be.clearkeys&&be.clearkeys.hasOwnProperty(Tt)?be.clearkeys[Tt]:null;if(!Qt)throw new Error("DRM: ClearKey keyID ("+Tt+") is not known!");Ge.push(new ie(Tt,Qt))}je=new Ne(Ge)}return je}}}Y.__dashjs_factory_name="KeySystemClearKey";var Ee=dashjs.FactoryMaker.getSingletonFactory(Y),Pe="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",Xe=oe.CLEARKEY_KEYSTEM_STRING,Ze="urn:uuid:"+Pe;function at(pn){var nn,be=pn.BASE64,Te=pn.debug.getLogger(nn);return{uuid:Pe,schemeIdURI:Ze,systemString:Xe,getInitData:function(je){return h.parseInitDataFromContentProtection(je,be)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(je){return new Uint8Array(je)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(je,Je){var Ge=null;if(je){for(var vt=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(Je))),Tt=[],Qt=0;Qt<vt.kids.length;Qt++){var sn=vt.kids[Qt],qt=je.clearkeys&&je.clearkeys.hasOwnProperty(sn)?je.clearkeys[sn]:null;if(!qt)throw new Error("DRM: ClearKey keyID ("+sn+") is not known!");Tt.push(new ie(sn,qt))}Ge=new Ne(Tt),Te.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return Ge}}}at.__dashjs_factory_name="KeySystemW3CClearKey";var jt=dashjs.FactoryMaker.getSingletonFactory(at),xt="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",ht=oe.WIDEVINE_KEYSTEM_STRING,It="urn:uuid:"+xt;function Ue(pn){var nn=(pn=pn||{}).BASE64;return{uuid:xt,schemeIdURI:It,systemString:ht,getInitData:function(be){return h.parseInitDataFromContentProtection(be,nn)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(be){return new Uint8Array(be)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}}}Ue.__dashjs_factory_name="KeySystemWidevine";var Ve=dashjs.FactoryMaker.getSingletonFactory(Ue),_t="9a04f079-9840-4286-ab92-e65be0885f95",M=oe.PLAYREADY_KEYSTEM_STRING,x="urn:uuid:"+_t;function U(pn){var nn="utf-16",be=(pn=pn||{}).BASE64,Te=pn.settings;function je(){if(!be||!be.hasOwnProperty("decodeArray")||!be.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:_t,schemeIdURI:x,systemString:M,getInitData:function(Je){var Ge,vt,Tt,Qt,sn,qt=new Uint8Array([112,115,115,104,0,0,0,0]),Nt=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),en=0,vn=null;if(je(),!Je)return null;if("pssh"in Je)return h.parseInitDataFromContentProtection(Je,be);if("pro"in Je)vn=be.decodeArray(Je.pro.__text);else{if(!("prheader"in Je))return null;vn=be.decodeArray(Je.prheader.__text)}return Ge=vn.length,vt=4+qt.length+Nt.length+4+Ge,Tt=new ArrayBuffer(vt),Qt=new Uint8Array(Tt),(sn=new DataView(Tt)).setUint32(en,vt),en+=4,Qt.set(qt,en),en+=qt.length,Qt.set(Nt,en),en+=Nt.length,sn.setUint32(en,Ge),en+=4,Qt.set(vn,en),en+=Ge,Qt.buffer},getRequestHeadersFromMessage:function(Je){var Ge,vt,Tt={},Qt=new DOMParser;if(Te&&Te.get().streaming.protection.detectPlayreadyMessageFormat&&nn==="utf-16"&&Je&&Je.byteLength%2==1)return Tt["Content-Type"]="text/xml; charset=utf-8",Tt;var sn=nn==="utf-16"?new Uint16Array(Je):new Uint8Array(Je);Ge=String.fromCharCode.apply(null,sn);for(var qt=(vt=Qt.parseFromString(Ge,"application/xml")).getElementsByTagName("name"),Nt=vt.getElementsByTagName("value"),en=0;en<qt.length;en++)Tt[qt[en].childNodes[0].nodeValue]=Nt[en].childNodes[0].nodeValue;return Tt.hasOwnProperty("Content")&&(Tt["Content-Type"]=Tt.Content,delete Tt.Content),Tt.hasOwnProperty("Content-Type")||(Tt["Content-Type"]="text/xml; charset=utf-8"),Tt},getLicenseRequestFromMessage:function(Je){var Ge=null,vt=new DOMParser;if(Te&&Te.get().streaming.protection.detectPlayreadyMessageFormat&&nn==="utf-16"&&Je&&Je.byteLength%2==1)return Je;var Tt=nn==="utf-16"?new Uint16Array(Je):new Uint8Array(Je);je();var Qt=String.fromCharCode.apply(null,Tt),sn=vt.parseFromString(Qt,"application/xml");if(!sn.getElementsByTagName("PlayReadyKeyMessage")[0])return Je;var qt=sn.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;return qt&&(Ge=be.decode(qt)),Ge},getLicenseServerURLFromInitData:function(Je){if(Je)for(var Ge=new DataView(Je),vt=Ge.getUint16(4,!0),Tt=6,Qt=new DOMParser,sn=0;sn<vt;sn++){var qt=Ge.getUint16(Tt,!0);Tt+=2;var Nt=Ge.getUint16(Tt,!0);if(Tt+=2,qt===1){var en=Je.slice(Tt,Tt+Nt),vn=String.fromCharCode.apply(null,new Uint16Array(en)),On=Qt.parseFromString(vn,"application/xml");if(On.getElementsByTagName("LA_URL")[0]){var Un=On.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(Un)return Un}if(On.getElementsByTagName("LUI_URL")[0]){var Er=On.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(Er)return Er}}else Tt+=Nt}return null},getCDMData:function(Je){var Ge,vt,Tt,Qt;if(je(),!Je)return null;for(Ge=[],Qt=0;Qt<Je.length;++Qt)Ge.push(Je.charCodeAt(Qt)),Ge.push(0);for(Ge=String.fromCharCode.apply(null,Ge),Ge=be.encode(Ge),vt='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",Ge),Tt=[],Qt=0;Qt<vt.length;++Qt)Tt.push(vt.charCodeAt(Qt)),Tt.push(0);return new Uint8Array(Tt).buffer},setPlayReadyMessageFormat:function(Je){if(Je!=="utf-8"&&Je!=="utf-16")throw new Error('Specified message format is not one of "utf-8" or "utf-16"');nn=Je}}}U.__dashjs_factory_name="KeySystemPlayReady";var j=dashjs.FactoryMaker.getSingletonFactory(U);function he(pn){var nn=(pn=pn||{}).BASE64,be={};return be[oe.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(Te){return nn.decodeArray(Te.license)},getErrorResponse:function(Te){return Te}},be[oe.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(Te){return Te},getErrorResponse:function(Te){return String.fromCharCode.apply(null,new Uint8Array(Te))}},{getServerURLFromMessage:function(Te){return Te},getHTTPMethod:function(){return"POST"},getResponseType:function(Te){return be[Te].responseType},getLicenseMessage:function(Te,je){return(function(){if(!nn||!nn.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")})(),be[je].getLicenseMessage(Te)},getErrorResponse:function(Te,je){return be[je].getErrorResponse(Te)}}}he.__dashjs_factory_name="DRMToday";var de=dashjs.FactoryMaker.getSingletonFactory(he);function ot(){var pn="http://schemas.xmlsoap.org/soap/envelope/";function nn(je){var Je=String.fromCharCode.apply(null,new Uint8Array(je));return decodeURIComponent(escape(Je))}function be(je){if(window.DOMParser){var Je=nn(je),Ge=new window.DOMParser().parseFromString(Je,"text/xml"),vt=Ge?Ge.getElementsByTagNameNS(pn,"Envelope")[0]:null,Tt=vt?vt.getElementsByTagNameNS(pn,"Body")[0]:null;if(Tt&&Tt.getElementsByTagNameNS(pn,"Fault")[0])return null}return je}function Te(je){var Je="",Ge="",vt="",Tt=-1,Qt=-1;if(window.DOMParser){var sn=nn(je),qt=new window.DOMParser().parseFromString(sn,"text/xml"),Nt=qt?qt.getElementsByTagNameNS(pn,"Envelope")[0]:null,en=Nt?Nt.getElementsByTagNameNS(pn,"Body")[0]:null,vn=en?en.getElementsByTagNameNS(pn,"Fault")[0]:null,On=vn?vn.getElementsByTagName("detail")[0]:null,Un=On?On.getElementsByTagName("Exception")[0]:null,Er=null;if(vn===null)return sn;Je=(Er=vn.getElementsByTagName("faultstring")[0].firstChild)?Er.nodeValue:null,Un!==null&&(Ge=(Er=Un.getElementsByTagName("StatusCode")[0])?Er.firstChild.nodeValue:null,Tt=(vt=(Er=Un.getElementsByTagName("Message")[0])?Er.firstChild.nodeValue:null)?vt.lastIndexOf("[")+1:-1,Qt=vt?vt.indexOf("]"):-1,vt=vt?vt.substring(Tt,Qt):"")}var cn="code: ".concat(Ge,", name: ").concat(Je);return vt&&(cn+=", message: ".concat(vt)),cn}return{getServerURLFromMessage:function(je){return je},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(je){return be.call(this,je)},getErrorResponse:function(je){return Te.call(this,je)}}}ot.__dashjs_factory_name="PlayReady";var wt=ne.Z.getSingletonFactory(ot);function st(){return{getServerURLFromMessage:function(pn){return pn},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(pn){return pn},getErrorResponse:function(pn){return String.fromCharCode.apply(null,new Uint8Array(pn))}}}st.__dashjs_factory_name="Widevine";var nt=dashjs.FactoryMaker.getSingletonFactory(st);function rt(){return{getServerURLFromMessage:function(pn){return pn},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(pn){if(!pn.hasOwnProperty("keys"))return null;for(var nn=[],be=0;be<pn.keys.length;be++){var Te=pn.keys[be],je=Te.kid.replace(/=/g,""),Je=Te.k.replace(/=/g,"");nn.push(new ie(je,Je))}return new Ne(nn)},getErrorResponse:function(pn){return String.fromCharCode.apply(null,new Uint8Array(pn))}}}rt.__dashjs_factory_name="ClearKey";var ct=dashjs.FactoryMaker.getSingletonFactory(rt);function St(){var pn,nn,be,Te,je,Je,Ge,vt,Tt=this.context;function Qt(Nt,en){return en&&Nt in en?en[Nt]:null}function sn(Nt,en){return Nt&&Nt.sessionId?Nt.sessionId:en&&en.sessionId?en.sessionId:null}function qt(Nt,en){return Nt&&Nt.sessionType?Nt.sessionType:en}return pn={initialize:function(){var Nt;Te=[],Nt=j(Tt).getInstance({BASE64:je,settings:Je}),Te.push(Nt),Nt=Ve(Tt).getInstance({BASE64:je}),Te.push(Nt),Nt=Ee(Tt).getInstance({BASE64:je}),Te.push(Nt),Ge=Nt,Nt=jt(Tt).getInstance({BASE64:je,debug:nn}),Te.push(Nt),vt=Nt},setProtectionData:function(Nt){for(var en,vn,On=0;On<Te.length;On++){var Un=Te[On];Un.hasOwnProperty("init")&&Un.init((en=Un.systemString,vn=void 0,vn=null,Nt&&(vn=en in Nt?Nt[en]:null),vn))}},isClearKey:function(Nt){return Nt===Ge||Nt===vt},initDataEquals:function(Nt,en){if(Nt.byteLength===en.byteLength){for(var vn=new Uint8Array(Nt),On=new Uint8Array(en),Un=0;Un<vn.length;Un++)if(vn[Un]!==On[Un])return!1;return!0}return!1},getKeySystems:function(){return Te},setKeySystems:function(Nt){Te=Nt},getKeySystemBySystemString:function(Nt){for(var en=0;en<Te.length;en++)if(Te[en].systemString===Nt)return Te[en];return null},getSupportedKeySystemsFromContentProtection:function(Nt,en,vn){var On,Un,Er,cn,ze=[];if(Nt){var pt=h.findCencContentProtection(Nt);for(Er=0;Er<Te.length;++Er){var Gt=Qt((Un=Te[Er]).systemString,en);for(cn=0;cn<Nt.length;++cn)if((On=Nt[cn]).schemeIdUri.toLowerCase()===Un.schemeIdURI){var Gn=Un.getInitData(On,pt);ze.push({ks:Te[Er],keyId:On.keyId,initData:Gn,protData:Gt,cdmData:Un.getCDMData(Gt?Gt.cdmData:null),sessionId:sn(Gt,On),sessionType:qt(Gt,vn)})}}}return ze},getSupportedKeySystemsFromSegmentPssh:function(Nt,en,vn){for(var On,Un=[],Er=h.parsePSSHList(Nt),cn=0;cn<Te.length;++cn){var ze=Qt((On=Te[cn]).systemString,en);On.uuid in Er&&Un.push({ks:On,initData:Er[On.uuid],protData:ze,cdmData:On.getCDMData(ze?ze.cdmData:null),sessionId:sn(ze),sessionType:qt(ze,vn)})}return Un},getLicenseServerModelInstance:function(Nt,en,vn){if(vn==="license-release"||vn==="individualization-request")return null;var On=null;return en&&en.hasOwnProperty("drmtoday")?On=de(Tt).getInstance({BASE64:je}):Nt.systemString===oe.WIDEVINE_KEYSTEM_STRING?On=nt(Tt).getInstance():Nt.systemString===oe.PLAYREADY_KEYSTEM_STRING?On=wt(Tt).getInstance():Nt.systemString===oe.CLEARKEY_KEYSTEM_STRING&&(On=ct(Tt).getInstance()),On},processClearKeyLicenseRequest:function(Nt,en,vn){try{return Nt.getClearKeysFromProtectionData(en,vn)}catch{return be.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(Nt){Nt&&(Nt.debug&&(nn=Nt.debug,be=nn.getLogger(pn)),Nt.BASE64&&(je=Nt.BASE64),Nt.settings&&(Je=Nt.settings))}},pn}St.__dashjs_factory_name="ProtectionKeyController";var Wt=dashjs.FactoryMaker.getSingletonFactory(St);function $t(pn){return $t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(nn){return typeof nn}:function(nn){return nn&&typeof Symbol=="function"&&nn.constructor===Symbol&&nn!==Symbol.prototype?"symbol":typeof nn},$t(pn)}function hn(pn,nn){return hn=Object.setPrototypeOf||function(be,Te){return be.__proto__=Te,be},hn(pn,nn)}function dn(pn,nn){return!nn||$t(nn)!=="object"&&typeof nn!="function"?(function(be){if(be===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return be})(pn):nn}function _n(pn){return _n=Object.setPrototypeOf?Object.getPrototypeOf:function(nn){return nn.__proto__||Object.getPrototypeOf(nn)},_n(pn)}var En=new((function(pn){(function(Je,Ge){if(typeof Ge!="function"&&Ge!==null)throw new TypeError("Super expression must either be null or a function");Je.prototype=Object.create(Ge&&Ge.prototype,{constructor:{value:Je,writable:!0,configurable:!0}}),Ge&&hn(Je,Ge)})(je,pn);var nn,be,Te=(nn=je,be=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}})(),function(){var Je,Ge=_n(nn);if(be){var vt=_n(this).constructor;Je=Reflect.construct(Ge,arguments,vt)}else Je=Ge.apply(this,arguments);return dn(this,Je)});function je(){var Je;return(function(Ge,vt){if(!(Ge instanceof vt))throw new TypeError("Cannot call a class as a function")})(this,je),(Je=Te.call(this)).INTERNAL_KEY_MESSAGE="internalKeyMessage",Je.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",Je.KEY_ADDED="public_keyAdded",Je.KEY_ERROR="public_keyError",Je.KEY_MESSAGE="public_keyMessage",Je.KEY_SESSION_CLOSED="public_keySessionClosed",Je.KEY_SESSION_CREATED="public_keySessionCreated",Je.KEY_SESSION_REMOVED="public_keySessionRemoved",Je.KEY_STATUSES_CHANGED="public_keyStatusesChanged",Je.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",Je.KEY_SYSTEM_SELECTED="public_keySystemSelected",Je.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",Je.LICENSE_REQUEST_SENDING="public_licenseRequestSending",Je.NEED_KEY="needkey",Je.PROTECTION_CREATED="public_protectioncreated",Je.PROTECTION_DESTROYED="public_protectiondestroyed",Je.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",Je.TEARDOWN_COMPLETE="protectionTeardownComplete",Je.VIDEO_ELEMENT_SELECTED="videoElementSelected",Je.KEY_SESSION_UPDATED="public_keySessionUpdated",Je}return je})(f(8342).Z)),tr=function pn(nn,be){(function(Te,je){if(!(Te instanceof je))throw new TypeError("Cannot call a class as a function")})(this,pn),this.initData=nn,this.initDataType=be},Ir=function pn(nn,be,Te,je){(function(Je,Ge){if(!(Je instanceof Ge))throw new TypeError("Cannot call a class as a function")})(this,pn),this.sessionToken=nn,this.message=be,this.defaultURL=Te,this.messageType=je||"license-request"},Fr=function pn(nn,be){(function(Te,je){if(!(Te instanceof je))throw new TypeError("Cannot call a class as a function")})(this,pn),this.keySystem=nn,this.ksConfiguration=be},Dr={};function ni(pn){pn=pn||{};var nn,be,Te,je,Je,Ge,vt,Tt,Qt=this.context,sn=pn.eventBus,qt=pn.events,Nt=pn.debug;function en(ze,pt,Gt,Gn){if(navigator.requestMediaKeySystemAccess===void 0||typeof navigator.requestMediaKeySystemAccess!="function"){var Rn="Insecure origins are not allowed";return sn.trigger(qt.KEY_SYSTEM_ACCESS_COMPLETE,{error:Rn}),void Gn({error:Rn})}var pr=ze[pt].protData&&ze[pt].protData.systemStringPriority?ze[pt].protData.systemStringPriority:null,Sr=ze[pt].configs,Ri=ze[pt].ks,xi=Ri.systemString;(function(oi,Vr){return new Promise((function(yi,Ni){vn(oi,Vr,0,yi,Ni)}))})(pr||(Dr[xi]?Dr[xi]:[xi]),Sr).then((function(oi){var Vr=typeof oi.getConfiguration=="function"?oi.getConfiguration():null,yi=new Fr(Ri,Vr);yi.mksa=oi,sn.trigger(qt.KEY_SYSTEM_ACCESS_COMPLETE,{data:yi}),Gt({data:yi})})).catch((function(oi){if(pt+1<ze.length)en(ze,pt+1,Gt,Gn);else{var Vr="Key system access denied! ";sn.trigger(qt.KEY_SYSTEM_ACCESS_COMPLETE,{error:Vr+oi.message}),Gn({error:Vr+oi.message})}}))}function vn(ze,pt,Gt,Gn,Rn){var pr=ze[Gt];be.debug("Requesting key system access for system string ".concat(pr)),navigator.requestMediaKeySystemAccess(pr,pt).then((function(Sr){Sr.selectedSystemString=pr,Gn(Sr)})).catch((function(Sr){Gt+1<ze.length?vn(ze,pt,Gt+1,Gn,Rn):Rn(Sr)}))}function On(ze){if(!ze||!ze.session)return Promise.resolve;var pt=ze.session;return pt.removeEventListener("keystatuseschange",ze),pt.removeEventListener("message",ze),pt.close()}function Un(ze){for(var pt=0;pt<Ge.length;pt++)if(Ge[pt]===ze){Ge.splice(pt,1);break}}function Er(ze){var pt,Gt;return ze&&ze.length>0&&(ze[0]&&(typeof ze[0]=="string"?pt=ze[0]:Gt=ze[0]),ze[1]&&(typeof ze[1]=="string"?pt=ze[1]:Gt=ze[1])),{status:pt,keyId:Gt}}function cn(ze,pt){var Gt={session:ze,keyId:pt.keyId,initData:pt.initData,sessionId:pt.sessionId,sessionType:pt.sessionType,handleEvent:function(Gn){switch(Gn.type){case"keystatuseschange":sn.trigger(qt.KEY_STATUSES_CHANGED,{data:this}),Gn.target.keyStatuses.forEach((function(){var pr=Er(arguments);pr.status==="expired"?sn.trigger(qt.INTERNAL_KEY_STATUS_CHANGED,{error:new T.Z(v.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,v.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)}):sn.trigger(qt.INTERNAL_KEY_STATUS_CHANGED,pr)}));break;case"message":var Rn=ArrayBuffer.isView(Gn.message)?Gn.message.buffer:Gn.message;sn.trigger(qt.INTERNAL_KEY_MESSAGE,{data:new Ir(this,Rn,void 0,Gn.messageType)})}},getKeyId:function(){return this.keyId},getSessionId:function(){return ze.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return ze.expiration},getKeyStatuses:function(){return ze.keyStatuses},getUsable:function(){var Gn=!1;return ze.keyStatuses.forEach((function(){var Rn=Er(arguments);Rn.status==="usable"&&(Gn=!0)})),Gn}};return ze.addEventListener("keystatuseschange",Gt),ze.addEventListener("message",Gt),ze.closed.then((function(){Un(Gt),be.debug("DRM: Session closed.  SessionID = "+Gt.getSessionId()),sn.trigger(qt.KEY_SESSION_CLOSED,{data:Gt.getSessionId()})})),Ge.push(Gt),Gt}return nn={getAllInitData:function(){for(var ze=[],pt=0;pt<Ge.length;pt++)Ge[pt].initData&&ze.push(Ge[pt].initData);return ze},getSessions:function(){return Ge},requestKeySystemAccess:function(ze){return new Promise((function(pt,Gt){en(ze,0,pt,Gt)}))},selectKeySystem:function(ze){return new Promise((function(pt,Gt){ze.mksa.createMediaKeys().then((function(Gn){return Te=ze.keySystem,Je=Gn,je?je.setMediaKeys(Je):Promise.resolve()})).then((function(){pt(Te)})).catch((function(){Gt({error:"Error selecting keys system ("+ze.keySystem.systemString+")! Could not create MediaKeys -- TODO"})}))}))},setMediaElement:function(ze){je!==ze&&(je&&(je.removeEventListener("encrypted",vt),je.setMediaKeys&&je.setMediaKeys(null)),(je=ze)&&(je.addEventListener("encrypted",vt),je.setMediaKeys&&Je&&je.setMediaKeys(Je)))},setServerCertificate:function(ze){if(!Te||!Je)throw new Error("Can not set server certificate until you have selected a key system");Je.setServerCertificate(ze).then((function(){be.info("DRM: License server certificate successfully updated."),sn.trigger(qt.SERVER_CERTIFICATE_UPDATED)})).catch((function(pt){sn.trigger(qt.SERVER_CERTIFICATE_UPDATED,{error:new T.Z(v.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,v.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+pt.name)})}))},createKeySession:function(ze){if(!Te||!Je)throw new Error("Can not create sessions until you have selected a key system");var pt=Je.createSession(ze.sessionType),Gt=cn(pt,ze),Gn=Te.systemString===oe.CLEARKEY_KEYSTEM_STRING&&(ze.initData||ze.protData&&ze.protData.clearkeys)?oe.INITIALIZATION_DATA_TYPE_KEYIDS:oe.INITIALIZATION_DATA_TYPE_CENC;pt.generateRequest(Gn,ze.initData).then((function(){be.debug("DRM: Session created.  SessionID = "+Gt.getSessionId()),sn.trigger(qt.KEY_SESSION_CREATED,{data:Gt})})).catch((function(Rn){Un(Gt),sn.trigger(qt.KEY_SESSION_CREATED,{data:null,error:new T.Z(v.KEY_SESSION_CREATED_ERROR_CODE,v.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+Rn.name)})}))},updateKeySession:function(ze,pt){var Gt=ze.session;Tt.isClearKey(Te)&&(pt=pt.toJWK()),Gt.update(pt).then((function(){sn.trigger(qt.KEY_SESSION_UPDATED)})).catch((function(Gn){sn.trigger(qt.KEY_ERROR,{error:new T.Z(v.MEDIA_KEYERR_CODE,"Error sending update() message! "+Gn.name,ze)})}))},loadKeySession:function(ze){if(!Te||!Je)throw new Error("Can not load sessions until you have selected a key system");for(var pt=ze.sessionId,Gt=0;Gt<Ge.length;Gt++)if(pt===Ge[Gt].sessionId)return void be.warn("DRM: Ignoring session ID because we have already seen it!");var Gn=Je.createSession(ze.sessionType),Rn=cn(Gn,ze);Gn.load(pt).then((function(pr){pr?(be.debug("DRM: Session loaded.  SessionID = "+Rn.getSessionId()),sn.trigger(qt.KEY_SESSION_CREATED,{data:Rn})):(Un(Rn),sn.trigger(qt.KEY_SESSION_CREATED,{data:null,error:new T.Z(v.KEY_SESSION_CREATED_ERROR_CODE,v.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+pt+")")}))})).catch((function(pr){Un(Rn),sn.trigger(qt.KEY_SESSION_CREATED,{data:null,error:new T.Z(v.KEY_SESSION_CREATED_ERROR_CODE,v.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+pt+")! "+pr.name)})}))},removeKeySession:function(ze){ze.session.remove().then((function(){be.debug("DRM: Session removed.  SessionID = "+ze.getSessionId()),sn.trigger(qt.KEY_SESSION_REMOVED,{data:ze.getSessionId()})}),(function(pt){sn.trigger(qt.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+ze.getSessionId()+"). "+pt.name})}))},closeKeySession:function(ze){On(ze).catch((function(pt){Un(ze),sn.trigger(qt.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+ze.getSessionId()+") "+pt.name})}))},stop:function(){for(var ze,pt=0;pt<Ge.length;pt++)(ze=Ge[pt]).getUsable()||(On(ze),Un(ze))},reset:function(){var ze,pt=Ge.length;pt!==0?(function(){for(var Gt=function(Rn){Un(Rn),Ge.length===0&&(je?(je.removeEventListener("encrypted",vt),je.setMediaKeys(null).then((function(){sn.trigger(qt.TEARDOWN_COMPLETE)}))):sn.trigger(qt.TEARDOWN_COMPLETE))},Gn=0;Gn<pt;Gn++)(function(Rn){On(ze),Gt(Rn)})(ze=Ge[Gn])})():sn.trigger(qt.TEARDOWN_COMPLETE)}},be=Nt.getLogger(nn),Te=null,je=null,Je=null,Ge=[],Tt=Wt(Qt).getInstance(),vt={handleEvent:function(ze){if(ze.type==="encrypted"&&ze.initData){var pt=ArrayBuffer.isView(ze.initData)?ze.initData.buffer:ze.initData;sn.trigger(qt.NEED_KEY,{key:new tr(pt,ze.initDataType)})}}},nn}Dr[oe.PLAYREADY_KEYSTEM_STRING]=[oe.PLAYREADY_KEYSTEM_STRING,oe.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],Dr[oe.WIDEVINE_KEYSTEM_STRING]=[oe.WIDEVINE_KEYSTEM_STRING],Dr[oe.CLEARKEY_KEYSTEM_STRING]=[oe.CLEARKEY_KEYSTEM_STRING],ni.__dashjs_factory_name="ProtectionModel_21Jan2015";var bi=dashjs.FactoryMaker.getClassFactory(ni);function Jr(pn){pn=pn||{};var nn,be,Te,je,Je,Ge,vt,Tt,Qt,sn=this.context,qt=pn.eventBus,Nt=pn.events,en=pn.debug,vn=pn.api;function On(){try{for(var cn=0;cn<vt.length;cn++)Un(vt[cn]);Te&&Te.removeEventListener(vn.needkey,Tt),qt.trigger(Nt.TEARDOWN_COMPLETE)}catch(ze){qt.trigger(Nt.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+ze.message})}}function Un(cn){var ze=cn.session;ze.removeEventListener(vn.error,cn),ze.removeEventListener(vn.message,cn),ze.removeEventListener(vn.ready,cn),ze.removeEventListener(vn.close,cn);for(var pt=0;pt<vt.length;pt++)if(vt[pt]===cn){vt.splice(pt,1);break}ze[vn.release]()}function Er(){var cn=null,ze=function(){Te.removeEventListener("loadedmetadata",cn),Te[vn.setMediaKeys](Je),qt.trigger(Nt.VIDEO_ELEMENT_SELECTED)};Te.readyState>=1?ze():(cn=ze.bind(this),Te.addEventListener("loadedmetadata",cn))}return nn={getAllInitData:function(){for(var cn=[],ze=0;ze<vt.length;ze++)cn.push(vt[ze].initData);return cn},getSessions:function(){return vt},requestKeySystemAccess:function(cn){return new Promise((function(ze,pt){for(var Gt=!1,Gn=0;Gn<cn.length;Gn++)for(var Rn=cn[Gn].ks.systemString,pr=cn[Gn].configs,Sr=null,Ri=null,xi=0;xi<pr.length;xi++){var oi=pr[xi].audioCapabilities,Vr=pr[xi].videoCapabilities;if(oi&&oi.length!==0){Sr=[];for(var yi=0;yi<oi.length;yi++)window[vn.MediaKeys].isTypeSupported(Rn,oi[yi].contentType)&&Sr.push(oi[yi])}if(Vr&&Vr.length!==0){Ri=[];for(var Ni=0;Ni<Vr.length;Ni++)window[vn.MediaKeys].isTypeSupported(Rn,Vr[Ni].contentType)&&Ri.push(Vr[Ni])}if(!(!Sr&&!Ri||Sr&&Sr.length===0||Ri&&Ri.length===0)){Gt=!0;var Ja=new E(Sr,Ri),po=Qt.getKeySystemBySystemString(Rn),_s=new Fr(po,Ja);qt.trigger(Nt.KEY_SYSTEM_ACCESS_COMPLETE,{data:_s}),ze({data:_s});break}}if(!Gt){var yo="Key system access denied! -- No valid audio/video content configurations detected!";qt.trigger(Nt.KEY_SYSTEM_ACCESS_COMPLETE,{error:yo}),pt({error:yo})}}))},selectKeySystem:function(cn){return new Promise((function(ze,pt){try{Je=cn.mediaKeys=new window[vn.MediaKeys](cn.keySystem.systemString),je=cn.keySystem,Ge=cn,Te&&Er(),ze(je)}catch{pt({error:"Error selecting keys system ("+je.systemString+")! Could not create MediaKeys -- TODO"})}}))},setMediaElement:function(cn){Te!==cn&&(Te&&Te.removeEventListener(vn.needkey,Tt),(Te=cn)&&(Te.addEventListener(vn.needkey,Tt),Je&&Er()))},createKeySession:function(cn){if(!je||!Je||!Ge)throw new Error("Can not create sessions until you have selected a key system");var ze=null;if(Ge.ksConfiguration.videoCapabilities&&Ge.ksConfiguration.videoCapabilities.length>0&&(ze=Ge.ksConfiguration.videoCapabilities[0]),ze===null&&Ge.ksConfiguration.audioCapabilities&&Ge.ksConfiguration.audioCapabilities.length>0&&(ze=Ge.ksConfiguration.audioCapabilities[0]),ze===null)throw new Error("Can not create sessions for unknown content types.");var pt=ze.contentType,Gt=Je.createSession(pt,new Uint8Array(cn.initData),cn.cdmData?new Uint8Array(cn.cdmData):null),Gn=(function(Rn,pr){return{session:Rn,keyId:pr.keyId,initData:pr.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(Sr){switch(Sr.type){case vn.error:qt.trigger(Nt.KEY_ERROR,{error:new T.Z(v.MEDIA_KEYERR_CODE,"KeyError",this)});break;case vn.message:var Ri=ArrayBuffer.isView(Sr.message)?Sr.message.buffer:Sr.message;qt.trigger(Nt.INTERNAL_KEY_MESSAGE,{data:new Ir(this,Ri,Sr.destinationURL)});break;case vn.ready:be.debug("DRM: Key added."),qt.trigger(Nt.KEY_ADDED);break;case vn.close:be.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),qt.trigger(Nt.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}}})(Gt,cn);Gt.addEventListener(vn.error,Gn),Gt.addEventListener(vn.message,Gn),Gt.addEventListener(vn.ready,Gn),Gt.addEventListener(vn.close,Gn),vt.push(Gn),be.debug("DRM: Session created.  SessionID = "+Gn.getSessionId()),qt.trigger(Nt.KEY_SESSION_CREATED,{data:Gn})},updateKeySession:function(cn,ze){var pt=cn.session;Qt.isClearKey(je)?pt.update(new Uint8Array(ze.toJWK())):pt.update(new Uint8Array(ze)),qt.trigger(Nt.KEY_SESSION_UPDATED)},closeKeySession:Un,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:On,reset:On},be=en.getLogger(nn),Te=null,je=null,Je=null,Ge=null,vt=[],Qt=Wt(sn).getInstance(),Tt={handleEvent:function(cn){if(cn.type===vn.needkey&&cn.initData){var ze=ArrayBuffer.isView(cn.initData)?cn.initData.buffer:cn.initData;qt.trigger(Nt.NEED_KEY,{key:new tr(ze,"cenc")})}}},nn}Jr.__dashjs_factory_name="ProtectionModel_3Feb2014";var eo=dashjs.FactoryMaker.getClassFactory(Jr);function ei(pn){pn=pn||{};var nn,be,Te,je,Je,Ge,vt,Tt,Qt,sn=this.context,qt=pn.eventBus,Nt=pn.events,en=pn.debug,vn=pn.api,On=pn.errHandler;function Un(){Te&&ze();for(var pt=0;pt<vt.length;pt++)Er(vt[pt]);qt.trigger(Nt.TEARDOWN_COMPLETE)}function Er(pt){try{Te[vn.cancelKeyRequest](je.systemString,pt.sessionId)}catch(Gt){qt.trigger(Nt.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+pt.sessionId+") "+Gt.message})}}function cn(pt,Gt){if(Gt&&pt){for(var Gn=pt.length,Rn=0;Rn<Gn;Rn++)if(pt[Rn].sessionId==Gt)return pt[Rn];return null}return null}function ze(){Te.removeEventListener(vn.keyerror,Qt),Te.removeEventListener(vn.needkey,Qt),Te.removeEventListener(vn.keymessage,Qt),Te.removeEventListener(vn.keyadded,Qt)}return nn={getAllInitData:function(){for(var pt=[],Gt=0;Gt<Ge.length;Gt++)pt.push(Ge[Gt].initData);for(var Gn=0;Gn<vt.length;Gn++)pt.push(vt[Gn].initData);return pt},getSessions:function(){return vt.concat(Ge)},requestKeySystemAccess:function(pt){return new Promise((function(Gt,Gn){var Rn=Te;Rn||(Rn=document.createElement("video"));for(var pr=!1,Sr=0;Sr<pt.length;Sr++)for(var Ri=pt[Sr].ks.systemString,xi=pt[Sr].configs,oi=null,Vr=0;Vr<xi.length;Vr++){var yi=xi[Vr].videoCapabilities;if(yi&&yi.length!==0){oi=[];for(var Ni=0;Ni<yi.length;Ni++)Rn.canPlayType(yi[Ni].contentType,Ri)!==""&&oi.push(yi[Ni])}if(oi&&(!oi||oi.length!==0)){pr=!0;var Ja=new E(null,oi),po=Je.getKeySystemBySystemString(Ri),_s=new Fr(po,Ja);qt.trigger(Nt.KEY_SYSTEM_ACCESS_COMPLETE,{data:_s}),Gt({data:_s});break}}if(!pr){var yo="Key system access denied! -- No valid audio/video content configurations detected!";qt.trigger(Nt.KEY_SYSTEM_ACCESS_COMPLETE,{error:yo}),Gn({error:yo})}}))},selectKeySystem:function(pt){return je=pt.keySystem,Promise.resolve(je)},setMediaElement:function(pt){if(Te!==pt){if(Te){ze();for(var Gt=0;Gt<vt.length;Gt++)Er(vt[Gt]);vt=[]}(Te=pt)&&(Te.addEventListener(vn.keyerror,Qt),Te.addEventListener(vn.needkey,Qt),Te.addEventListener(vn.keymessage,Qt),Te.addEventListener(vn.keyadded,Qt),qt.trigger(Nt.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(pt){if(!je)throw new Error("Can not create sessions until you have selected a key system");if(Tt||vt.length===0){var Gt={sessionId:null,keyId:pt.keyId,initData:pt.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return Ge.push(Gt),Te[vn.generateKeyRequest](je.systemString,new Uint8Array(pt.initData)),Gt}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(pt,Gt){var Gn=pt.sessionId;if(Je.isClearKey(je))for(var Rn=0;Rn<Gt.keyPairs.length;Rn++)Te[vn.addKey](je.systemString,Gt.keyPairs[Rn].key,Gt.keyPairs[Rn].keyID,Gn);else Te[vn.addKey](je.systemString,new Uint8Array(Gt),new Uint8Array(pt.initData),Gn);qt.trigger(Nt.KEY_SESSION_UPDATED)},closeKeySession:Er,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:Un,reset:Un},be=en.getLogger(nn),Te=null,je=null,Ge=[],vt=[],Je=Wt(sn).getInstance(),Qt={handleEvent:function(pt){var Gt=null;switch(pt.type){case vn.needkey:var Gn=ArrayBuffer.isView(pt.initData)?pt.initData.buffer:pt.initData;qt.trigger(Nt.NEED_KEY,{key:new tr(Gn,"cenc")});break;case vn.keyerror:if((Gt=cn(vt,pt.sessionId))||(Gt=cn(Ge,pt.sessionId)),Gt){var Rn=v.MEDIA_KEYERR_CODE,pr="";switch(pt.errorCode.code){case 1:Rn=v.MEDIA_KEYERR_UNKNOWN_CODE,pr+="MEDIA_KEYERR_UNKNOWN - "+v.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:Rn=v.MEDIA_KEYERR_CLIENT_CODE,pr+="MEDIA_KEYERR_CLIENT - "+v.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:Rn=v.MEDIA_KEYERR_SERVICE_CODE,pr+="MEDIA_KEYERR_SERVICE - "+v.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:Rn=v.MEDIA_KEYERR_OUTPUT_CODE,pr+="MEDIA_KEYERR_OUTPUT - "+v.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:Rn=v.MEDIA_KEYERR_HARDWARECHANGE_CODE,pr+="MEDIA_KEYERR_HARDWARECHANGE - "+v.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:Rn=v.MEDIA_KEYERR_DOMAIN_CODE,pr+="MEDIA_KEYERR_DOMAIN - "+v.MEDIA_KEYERR_DOMAIN_MESSAGE}pr+="  System Code = "+pt.systemCode,qt.trigger(Nt.KEY_ERROR,{error:new T.Z(Rn,pr,Gt)})}else be.error("No session token found for key error");break;case vn.keyadded:(Gt=cn(vt,pt.sessionId))||(Gt=cn(Ge,pt.sessionId)),Gt?(be.debug("DRM: Key added."),qt.trigger(Nt.KEY_ADDED,{data:Gt})):be.debug("No session token found for key added");break;case vn.keymessage:if((Tt=pt.sessionId!==null&&pt.sessionId!==void 0)?!(Gt=cn(vt,pt.sessionId))&&Ge.length>0&&(Gt=Ge.shift(),vt.push(Gt),Gt.sessionId=pt.sessionId,qt.trigger(Nt.KEY_SESSION_CREATED,{data:Gt})):Ge.length>0&&(Gt=Ge.shift(),vt.push(Gt),Ge.length!==0&&On.error(new T.Z(v.MEDIA_KEY_MESSAGE_ERROR_CODE,v.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),Gt){var Sr=ArrayBuffer.isView(pt.message)?pt.message.buffer:pt.message;Gt.keyMessage=Sr,qt.trigger(Nt.INTERNAL_KEY_MESSAGE,{data:new Ir(Gt,Sr,pt.defaultURL)})}else be.warn("No session token found for key message")}}},nn}ei.__dashjs_factory_name="ProtectionModel_01b";var jr=dashjs.FactoryMaker.getClassFactory(ei),qi=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],ro=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function To(){var pn,nn=this.context;function be(Te,je){for(var Je=0;Je<je.length;Je++){var Ge=je[Je];if(typeof Te[Ge[Object.keys(Ge)[0]]]=="function")return Ge}return null}return pn={createProtectionSystem:function(Te){var je=null,Je=Wt(nn).getInstance();Je.setConfig({debug:Te.debug,BASE64:Te.BASE64,settings:Te.settings}),Je.initialize();var Ge=(function(vt){var Tt=vt.debug,Qt=Tt.getLogger(pn),sn=vt.eventBus,qt=vt.errHandler,Nt=vt.videoModel?vt.videoModel.getElement():null;return Nt&&Nt.onencrypted===void 0||Nt&&Nt.mediaKeys===void 0?be(Nt,ro)?(Qt.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),eo(nn).create({debug:Tt,eventBus:sn,events:vt.events,api:be(Nt,ro)})):be(Nt,qi)?(Qt.info("EME detected on this user agent! (ProtectionModel_01b)"),jr(nn).create({debug:Tt,eventBus:sn,errHandler:qt,events:vt.events,api:be(Nt,qi)})):(Qt.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(Qt.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),bi(nn).create({debug:Tt,eventBus:sn,events:vt.events}))})(Te);return!je&&Ge&&(je=ve(nn).create({protectionModel:Ge,protectionKeyController:Je,eventBus:Te.eventBus,debug:Te.debug,events:Te.events,BASE64:Te.BASE64,constants:Te.constants,cmcdModel:Te.cmcdModel,customParametersModel:Te.customParametersModel,settings:Te.settings}),Te.capabilities.setEncryptedMediaSupported(!0)),je}}}To.__dashjs_factory_name="Protection";var di=dashjs.FactoryMaker.getClassFactory(To);di.events=En,di.errors=v,dashjs.FactoryMaker.updateClassFactory(To.__dashjs_factory_name,di);var xo=di},2068:function(l,c,f){var g=f(5448),y={DEFAULT:.5,STRONG:1,WEAK:0};function h(E,A,_){var I,C;return I=E===void 0?-1:E,C=(function(v){var T=y.DEFAULT;return v!==y.DEFAULT&&v!==y.STRONG&&v!==y.WEAK||(T=v),T})(_),{quality:I,reason:A===void 0?null:A,priority:C}}h.__dashjs_factory_name="SwitchRequest";var p=g.Z.getClassFactory(h);p.NO_CHANGE=-1,p.PRIORITY=y,g.Z.updateClassFactory(h.__dashjs_factory_name,p),c.Z=p},1767:function(l,c,f){var g=f(5628),y=f(6535),h=f(7423),p=f(895),E=f(6070),A=f(3112),_=f(1914),I=f(5435),C=f(5448),v=f(2068),T=f(3393),S="qualitySwitchRules",O="abandonFragmentRules";function $(B){B=B||{};var ne,D,X=this.context,ve=B.mediaPlayerModel,ie=B.customParametersModel,ye=B.dashMetrics,Ne=B.settings;function Me(Ce){return Ce.filter((function(Ye){return Ye.quality>v.Z.NO_CHANGE}))}function oe(Ce){var Ye,et,Y,Ee,Pe,Xe={},Ze=null;if(Ce.length!==0){for(Xe[v.Z.PRIORITY.STRONG]={quality:v.Z.NO_CHANGE,reason:null},Xe[v.Z.PRIORITY.WEAK]={quality:v.Z.NO_CHANGE,reason:null},Xe[v.Z.PRIORITY.DEFAULT]={quality:v.Z.NO_CHANGE,reason:null},Ye=0,et=Ce.length;Ye<et;Ye+=1)(Y=Ce[Ye]).quality!==v.Z.NO_CHANGE&&(Xe[Y.priority].quality===v.Z.NO_CHANGE||Xe[Y.priority].quality>Y.quality)&&(Xe[Y.priority].quality=Y.quality,Xe[Y.priority].reason=Y.reason||null);return Xe[v.Z.PRIORITY.WEAK].quality!==v.Z.NO_CHANGE&&(Ze=Xe[v.Z.PRIORITY.WEAK]),Xe[v.Z.PRIORITY.DEFAULT].quality!==v.Z.NO_CHANGE&&(Ze=Xe[v.Z.PRIORITY.DEFAULT]),Xe[v.Z.PRIORITY.STRONG].quality!==v.Z.NO_CHANGE&&(Ze=Xe[v.Z.PRIORITY.STRONG]),Ze&&(Ee=Ze.quality,Pe=Ze.reason),(0,v.Z)(X).create(Ee,Pe)}}return{initialize:function(){ne=[],D=[],Ne.get().streaming.abr.useDefaultABRRules&&(Ne.get().streaming.abr.ABRStrategy===T.Z.ABR_STRATEGY_L2A?ne.push((0,_.Z)(X).create({dashMetrics:ye,settings:Ne})):Ne.get().streaming.abr.ABRStrategy===T.Z.ABR_STRATEGY_LoLP?ne.push((0,I.Z)(X).create({dashMetrics:ye})):(ne.push((0,A.Z)(X).create({dashMetrics:ye,mediaPlayerModel:ve,settings:Ne})),ne.push((0,g.Z)(X).create({dashMetrics:ye})),Ne.get().streaming.abr.additionalAbrRules.insufficientBufferRule&&ne.push((0,y.Z)(X).create({dashMetrics:ye,settings:Ne})),Ne.get().streaming.abr.additionalAbrRules.switchHistoryRule&&ne.push((0,E.Z)(X).create()),Ne.get().streaming.abr.additionalAbrRules.droppedFramesRule&&ne.push((0,p.Z)(X).create()),Ne.get().streaming.abr.additionalAbrRules.abandonRequestsRule&&D.push((0,h.Z)(X).create({dashMetrics:ye,mediaPlayerModel:ve,settings:Ne})))),ie.getAbrCustomRules().forEach((function(Ce){Ce.type===S&&ne.push(Ce.rule(X).create()),Ce.type===O&&D.push(Ce.rule(X).create())}))},reset:function(){[ne,D].forEach((function(Ce){Ce&&Ce.length&&Ce.forEach((function(Ye){return Ye.reset&&Ye.reset()}))})),ne=[],D=[]},getMaxQuality:function(Ce){return oe(Me(ne.map((function(Ye){return Ye.getMaxIndex(Ce)}))))||(0,v.Z)(X).create()},getMinSwitchRequest:oe,shouldAbandonFragment:function(Ce,Ye){var et=oe(Me(D.map((function(Y){return Y.shouldAbandon(Ce,Ye)}))));return et&&(et.reason.forceAbandon=!0),et||(0,v.Z)(X).create()},getQualitySwitchRules:function(){return ne}}}$.__dashjs_factory_name="ABRRulesCollection";var V=C.Z.getClassFactory($);V.QUALITY_SWITCH_RULES=S,V.ABANDON_FRAGMENT_RULES=O,C.Z.updateSingletonFactory($.__dashjs_factory_name,V),c.Z=V},7423:function(l,c,f){var g=f(2068),y=f(5448),h=f(6398);function p(E){E=E||{};var A,_,I,C,v,T=this.context,S=E.mediaPlayerModel,O=E.dashMetrics,$=E.settings;function V(){I={},C={},v=[]}return A={shouldAbandon:function(B){var ne=(0,g.Z)(T).create(g.Z.NO_CHANGE,{name:p.__dashjs_factory_name});if(!(B&&B.hasOwnProperty("getMediaInfo")&&B.hasOwnProperty("getMediaType")&&B.hasOwnProperty("getCurrentRequest")&&B.hasOwnProperty("getRepresentationInfo")&&B.hasOwnProperty("getAbrController")))return ne;var D,X,ve=B.getMediaInfo(),ie=B.getMediaType(),ye=B.getStreamInfo(),Ne=ye?ye.id:null,Me=B.getCurrentRequest();if(!isNaN(Me.index)){D=ie,X=Me.index,I[D]=I[D]||{},I[D][X]=I[D][X]||{};var oe=S.getStableBufferTime();if(O.getCurrentBufferLevel(ie)>oe)return ne;var Ce=I[ie][Me.index];if(Ce===null||Me.firstByteDate===null||C.hasOwnProperty(Ce.id))return ne;if(Ce.firstByteTime===void 0&&(v[ie]=[],Ce.firstByteTime=Me.firstByteDate.getTime(),Ce.segmentDuration=Me.duration,Ce.bytesTotal=Me.bytesTotal,Ce.id=Me.index),Ce.bytesLoaded=Me.bytesLoaded,Ce.elapsedTime=new Date().getTime()-Ce.firstByteTime,Ce.bytesLoaded>0&&Ce.elapsedTime>0&&(function(at,jt){v[at]=v[at]||[],v[at].push(jt)})(ie,Math.round(8*Ce.bytesLoaded/Ce.elapsedTime)),v[ie].length>=$.get().streaming.abr.abrRulesParameters.abandonRequestsRule.minLengthToAverage&&Ce.elapsedTime>$.get().streaming.abr.abrRulesParameters.abandonRequestsRule.graceTimeThreshold&&Ce.bytesLoaded<Ce.bytesTotal){var Ye=v[ie].reduce((function(at,jt){return at+jt}),0);if(Ce.measuredBandwidthInKbps=Math.round(Ye/v[ie].length),Ce.estimatedTimeOfDownload=+(8*Ce.bytesTotal/Ce.measuredBandwidthInKbps/1e3).toFixed(2),Ce.estimatedTimeOfDownload<Ce.segmentDuration*$.get().streaming.abr.abrRulesParameters.abandonRequestsRule.abandonMultiplier||B.getRepresentationInfo().quality===0)return ne;if(!C.hasOwnProperty(Ce.id)){var et=B.getAbrController(),Y=Ce.bytesTotal-Ce.bytesLoaded,Ee=et.getBitrateList(ve),Pe=et.getQualityForBitrate(ve,Ce.measuredBandwidthInKbps*$.get().streaming.abr.bandwidthSafetyFactor,Ne),Xe=et.getMinAllowedIndexFor(ie,Ne),Ze=Xe!==void 0?Math.max(Xe,Pe):Pe;Y>Ce.bytesTotal*Ee[Ze].bitrate/Ee[et.getQualityFor(ie,Ne)].bitrate&&(ne.quality=Ze,ne.reason.throughput=Ce.measuredBandwidthInKbps,ne.reason.fragmentID=Ce.id,ne.reason.rule=this.getClassName(),C[Ce.id]=Ce,_.debug("["+ie+"] frag id",Ce.id," is asking to abandon and switch to quality to ",Ze," measured bandwidth was",Ce.measuredBandwidthInKbps),delete I[ie][Ce.id])}}else Ce.bytesLoaded===Ce.bytesTotal&&delete I[ie][Ce.id]}return ne},reset:V},_=(0,h.Z)(T).getInstance().getLogger(A),V(),A}p.__dashjs_factory_name="AbandonRequestsRule",c.Z=y.Z.getClassFactory(p)},3112:function(l,c,f){var g=f(3860),y=f(2068),h=f(5448),p=f(7855),E=f(5595),A=f(8512),_=f(6398),I=f(8825),C=f(3393),v=10;function T(S){S=S||{};var O,$,V,B=this.context,ne=S.dashMetrics,D=S.mediaPlayerModel,X=(0,E.Z)(B).getInstance();function ve(Ze,at,jt){var xt=jt.reduce((function(Ue,Ve,_t){return Ve>jt[Ue]?_t:Ue}),0);if(xt===0)return null;var ht=Math.max(Ze,v+2*at.length),It=(jt[xt]-1)/(ht/v-1);return{gp:It,Vp:v/It}}function ie(Ze){Ze.placeholderBuffer=0,Ze.mostAdvancedSegmentStart=NaN,Ze.lastSegmentWasReplacement=!1,Ze.lastSegmentStart=NaN,Ze.lastSegmentDurationS=NaN,Ze.lastSegmentRequestTimeMs=NaN,Ze.lastSegmentFinishTimeMs=NaN}function ye(Ze,at){var jt=D.getStableBufferTime();if(Ze.stableBufferTime!==jt){var xt=ve(jt,Ze.bitrates,Ze.utilities);if(xt.Vp!==Ze.Vp||xt.gp!==Ze.gp){var ht=ne.getCurrentBufferLevel(at),It=ht+Ze.placeholderBuffer;It-=v,It*=xt.Vp/Ze.Vp,It+=v,Ze.stableBufferTime=jt,Ze.Vp=xt.Vp,Ze.gp=xt.gp,Ze.placeholderBuffer=Math.max(0,It-ht)}}}function Ne(Ze,at){return Ze.Vp*(Ze.utilities[at]+Ze.gp)}function Me(Ze,at){for(var jt=Ze.bitrates[at],xt=Ze.utilities[at],ht=0,It=at-1;It>=0;--It)if(Ze.utilities[It]<Ze.utilities[at]){var Ue=Ze.bitrates[It],Ve=Ze.utilities[It],_t=Ze.Vp*(Ze.gp+(jt*Ve-Ue*xt)/(jt-Ue));ht=Math.max(ht,_t)}return ht}function oe(Ze){var at=Ze.mediaType===C.Z.AUDIO?[C.Z.AUDIO]:V;for(var jt in at)V.hasOwnProperty(jt)&&V[jt].state===2&&(V[jt].placeholderBuffer=0)}function Ce(){for(var Ze in V)if(V.hasOwnProperty(Ze)){var at=V[Ze];at.state!==0&&(at.state=1,ie(at))}}function Ye(Ze){if(Ze&&Ze.chunk&&Ze.chunk.mediaInfo){var at=V[Ze.chunk.mediaInfo.type];if(at&&at.state!==0){var jt=Ze.chunk.start;isNaN(at.mostAdvancedSegmentStart)||jt>at.mostAdvancedSegmentStart?(at.mostAdvancedSegmentStart=jt,at.lastSegmentWasReplacement=!1):at.lastSegmentWasReplacement=!0,at.lastSegmentStart=jt,at.lastSegmentDurationS=Ze.chunk.duration,at.lastQuality=Ze.chunk.quality,Y(at,Ze.chunk.mediaInfo.type)}}}function et(Ze){if(Ze&&Ze.metric===g.Z.HTTP_REQUEST&&Ze.value&&Ze.value.type===p.w.MEDIA_SEGMENT_TYPE&&Ze.value.trace&&Ze.value.trace.length){var at=V[Ze.mediaType];at&&at.state!==0&&(at.lastSegmentRequestTimeMs=Ze.value.trequest.getTime(),at.lastSegmentFinishTimeMs=Ze.value._tfinish.getTime(),Y(at,Ze.mediaType))}}function Y(Ze,at){if(!isNaN(Ze.lastSegmentStart)&&!isNaN(Ze.lastSegmentRequestTimeMs)&&!isNaN(Ze.placeholderBuffer)){if(Ze.placeholderBuffer*=.99,!isNaN(Ze.lastSegmentFinishTimeMs)){var jt=ne.getCurrentBufferLevel(at)+.001*(Ze.lastSegmentFinishTimeMs-Ze.lastSegmentRequestTimeMs),xt=Ne(Ze,Ze.lastQuality),ht=Math.max(0,xt-jt);Ze.placeholderBuffer=Math.min(ht,Ze.placeholderBuffer)}Ze.lastSegmentWasReplacement&&!isNaN(Ze.lastSegmentDurationS)&&(Ze.placeholderBuffer+=Ze.lastSegmentDurationS),Ze.lastSegmentStart=NaN,Ze.lastSegmentRequestTimeMs=NaN}}function Ee(Ze){if(Ze){var at=V[Ze.mediaType];at&&at.state!==0&&(at.abrQuality=Ze.newQuality)}}function Pe(Ze){if(Ze){var at=V[Ze.mediaType];if(at&&at.state!==0){var jt,xt=ne.getCurrentBufferLevel(Ze.mediaType);jt=at.abrQuality>0?Me(at,at.abrQuality):v;var ht=Math.max(0,jt-xt);at.placeholderBuffer=Math.min(at.placeholderBuffer,ht)}}}function Xe(){V={}}return O={getMaxIndex:function(Ze){var at=(0,y.Z)(B).create();if(!(Ze&&Ze.hasOwnProperty("getMediaInfo")&&Ze.hasOwnProperty("getMediaType")&&Ze.hasOwnProperty("getScheduleController")&&Ze.hasOwnProperty("getStreamInfo")&&Ze.hasOwnProperty("getAbrController")&&Ze.hasOwnProperty("useBufferOccupancyABR")))return at;var jt=Ze.getMediaInfo(),xt=Ze.getMediaType(),ht=Ze.getScheduleController(),It=Ze.getStreamInfo(),Ue=Ze.getAbrController(),Ve=Ue.getThroughputHistory(),_t=It?It.id:null,M=It&&It.manifestInfo&&It.manifestInfo.isDynamic,x=Ze.useBufferOccupancyABR();if(at.reason=at.reason||{},!x)return at;ht.setTimeToLoadDelay(0);var U=(function(rt){var ct=rt.getMediaType(),St=V[ct];return St?St.state!==0&&ye(St,ct):(St=(function(Wt){var $t={},hn=Wt.getMediaInfo().bitrateList.map((function(tr){return tr.bandwidth})),dn=(function(tr){return tr.map((function(Ir){return Math.log(Ir)}))})(hn);dn=dn.map((function(tr){return tr-dn[0]+1}));var _n=D.getStableBufferTime(),En=ve(_n,hn,dn);return En?($t.state=1,$t.bitrates=hn,$t.utilities=dn,$t.stableBufferTime=_n,$t.Vp=En.Vp,$t.gp=En.gp,$t.lastQuality=0,ie($t)):$t.state=0,$t})(rt),V[ct]=St),St})(Ze);if(U.state===0)return at;var j,he=ne.getCurrentBufferLevel(xt),de=Ve.getAverageThroughput(xt,M),ot=Ve.getSafeAverageThroughput(xt,M),wt=Ve.getAverageLatency(xt);if(at.reason.state=U.state,at.reason.throughput=de,at.reason.latency=wt,isNaN(de))return at;switch(U.state){case 1:j=Ue.getQualityForBitrate(jt,ot,_t,wt),at.quality=j,at.reason.throughput=ot,U.placeholderBuffer=Math.max(0,Me(U,j)-he),U.lastQuality=j,!isNaN(U.lastSegmentDurationS)&&he>=U.lastSegmentDurationS&&(U.state=2);break;case 2:(function(rt,ct){var St=Date.now();if(isNaN(rt.lastSegmentFinishTimeMs)){if(!isNaN(rt.lastCallTimeMs)){var Wt=.001*(St-rt.lastCallTimeMs);rt.placeholderBuffer+=Math.max(0,Wt)}}else{var $t=.001*(St-rt.lastSegmentFinishTimeMs);rt.placeholderBuffer+=Math.max(0,$t)}rt.lastCallTimeMs=St,rt.lastSegmentStart=NaN,rt.lastSegmentRequestTimeMs=NaN,rt.lastSegmentFinishTimeMs=NaN,ye(rt,ct)})(U,xt),j=(function(rt,ct){for(var St=rt.bitrates.length,Wt=NaN,$t=NaN,hn=0;hn<St;++hn){var dn=(rt.Vp*(rt.utilities[hn]+rt.gp)-ct)/rt.bitrates[hn];(isNaN($t)||dn>=$t)&&($t=dn,Wt=hn)}return Wt})(U,he+U.placeholderBuffer);var st=Ue.getQualityForBitrate(jt,ot,_t,wt);j>U.lastQuality&&j>st&&(j=Math.max(st,U.lastQuality));var nt=Math.max(0,he+U.placeholderBuffer-Ne(U,j));nt<=U.placeholderBuffer?(U.placeholderBuffer-=nt,nt=0):(nt-=U.placeholderBuffer,U.placeholderBuffer=0,j<Ue.getMaxAllowedIndexFor(xt,_t)?ht.setTimeToLoadDelay(1e3*nt):nt=0),at.quality=j,at.reason.throughput=de,at.reason.latency=wt,at.reason.bufferLevel=he,at.reason.placeholderBuffer=U.placeholderBuffer,at.reason.delay=nt,U.lastQuality=j;break;default:$.debug("BOLA ABR rule invoked in bad state."),at.quality=Ue.getQualityForBitrate(jt,ot,_t,wt),at.reason.state=U.state,at.reason.throughput=ot,at.reason.latency=wt,U.state=1,ie(U)}return at},reset:function(){Xe(),X.off(I.Z.BUFFER_EMPTY,oe,O),X.off(I.Z.PLAYBACK_SEEKING,Ce,O),X.off(I.Z.METRIC_ADDED,et,O),X.off(I.Z.QUALITY_CHANGE_REQUESTED,Ee,O),X.off(I.Z.FRAGMENT_LOADING_ABANDONED,Pe,O),X.off(A.Z.MEDIA_FRAGMENT_LOADED,Ye,O)}},$=(0,_.Z)(B).getInstance().getLogger(O),Xe(),X.on(I.Z.BUFFER_EMPTY,oe,O),X.on(I.Z.PLAYBACK_SEEKING,Ce,O),X.on(I.Z.METRIC_ADDED,et,O),X.on(I.Z.QUALITY_CHANGE_REQUESTED,Ee,O),X.on(I.Z.FRAGMENT_LOADING_ABANDONED,Pe,O),X.on(A.Z.MEDIA_FRAGMENT_LOADED,Ye,O),O}T.__dashjs_factory_name="BolaRule",c.Z=h.Z.getClassFactory(T)},895:function(l,c,f){var g=f(5448),y=f(2068),h=f(6398);function p(){var E,A,_=this.context;return E={getMaxIndex:function(I){var C=(0,y.Z)(_).create();if(!I||!I.hasOwnProperty("getDroppedFramesHistory"))return C;var v=I.getDroppedFramesHistory(),T=I.getStreamInfo().id;if(v){var S=v.getFrameHistory(T);if(!S||S.length===0)return C;for(var O=0,$=0,V=y.Z.NO_CHANGE,B=1;B<S.length;B++)if(S[B]&&(O=S[B].droppedVideoFrames,($=S[B].totalVideoFrames)>375&&O/$>.15)){V=B-1,A.debug("index: "+V+" Dropped Frames: "+O+" Total Frames: "+$);break}return(0,y.Z)(_).create(V,{droppedFrames:O})}return C}},A=(0,h.Z)(_).getInstance().getLogger(E),E}p.__dashjs_factory_name="DroppedFramesRule",c.Z=g.Z.getClassFactory(p)},6535:function(l,c,f){var g=f(5595),y=f(8512),h=f(5448),p=f(6398),E=f(2068),A=f(3393),_=f(3860),I=f(8825);function C(v){v=v||{};var T,S,O,$=this.context,V=(0,g.Z)($).getInstance(),B=v.dashMetrics;function ne(){(O={})[A.Z.VIDEO]={ignoreCount:2},O[A.Z.AUDIO]={ignoreCount:2}}function D(){ne()}function X(ve){isNaN(ve.startTime)||ve.mediaType!==A.Z.AUDIO&&ve.mediaType!==A.Z.VIDEO||O[ve.mediaType].ignoreCount>0&&O[ve.mediaType].ignoreCount--}return T={getMaxIndex:function(ve){var ie=(0,E.Z)($).create();if(!ve||!ve.hasOwnProperty("getMediaType"))return ie;(function(){if(!B||!B.hasOwnProperty("getCurrentBufferLevel")||!B.hasOwnProperty("getCurrentBufferState"))throw new Error(A.Z.MISSING_CONFIG_ERROR)})();var ye=ve.getMediaType(),Ne=B.getCurrentBufferState(ye),Me=ve.getRepresentationInfo().fragmentDuration,oe=ve.getStreamInfo(),Ce=oe?oe.id:null,Ye=ve.getScheduleController(),et=oe&&oe.manifestInfo&&oe.manifestInfo.isDynamic;if((function(xt,ht){return!xt&&O[ht].ignoreCount>0})(Ye.getPlaybackController().getLowLatencyModeEnabled(),ye)||!Me)return ie;if(Ne&&Ne.state===_.Z.BUFFER_EMPTY)S.debug("["+ye+"] Switch to index 0; buffer is empty."),ie.quality=0,ie.reason="InsufficientBufferRule: Buffer is empty";else{var Y=ve.getMediaInfo(),Ee=ve.getAbrController(),Pe=Ee.getThroughputHistory(),Xe=B.getCurrentBufferLevel(ye),Ze=Pe.getAverageThroughput(ye,et),at=Pe.getAverageLatency(ye),jt=Ze*(Xe/Me)*.5;ie.quality=Ee.getQualityForBitrate(Y,jt,Ce,at),ie.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return ie},reset:function(){ne(),V.off(I.Z.PLAYBACK_SEEKING,D,T),V.off(y.Z.BYTES_APPENDED_END_FRAGMENT,X,T)}},S=(0,p.Z)($).getInstance().getLogger(T),ne(),V.on(I.Z.PLAYBACK_SEEKING,D,T),V.on(y.Z.BYTES_APPENDED_END_FRAGMENT,X,T),T}C.__dashjs_factory_name="InsufficientBufferRule",c.Z=h.Z.getClassFactory(C)},1914:function(l,c,f){var g=f(3860),y=f(2068),h=f(5448),p=f(7855),E=f(5595),A=f(8512),_=f(6398),I=f(3393);function C(v){v=v||{};var T,S,O,$,V=this.context,B=v.dashMetrics,ne=(0,E.Z)(V).getInstance();function D(Ce){Ce.placeholderBuffer=0,Ce.mostAdvancedSegmentStart=NaN,Ce.lastSegmentWasReplacement=!1,Ce.lastSegmentStart=NaN,Ce.lastSegmentDurationS=NaN,Ce.lastSegmentRequestTimeMs=NaN,Ce.lastSegmentFinishTimeMs=NaN,Ce.lastSegmentUrl=""}function X(){for(var Ce in S)if(S.hasOwnProperty(Ce)){var Ye=S[Ce];Ye.state!==0&&(Ye.state=1,D(Ye))}}function ve(Ce){if(Ce&&Ce.chunk&&Ce.chunk.mediaInfo){var Ye=S[Ce.chunk.mediaInfo.type],et=O[Ce.chunk.mediaInfo.type];if(Ye&&Ye.state!==0){var Y=Ce.chunk.start;isNaN(Ye.mostAdvancedSegmentStart)||Y>Ye.mostAdvancedSegmentStart?(Ye.mostAdvancedSegmentStart=Y,Ye.lastSegmentWasReplacement=!1):Ye.lastSegmentWasReplacement=!0,Ye.lastSegmentStart=Y,Ye.lastSegmentDurationS=Ce.chunk.duration,Ye.lastQuality=Ce.chunk.quality,ye(Ye,et)}}}function ie(Ce){if(Ce&&Ce.metric===g.Z.HTTP_REQUEST&&Ce.value&&Ce.value.type===p.w.MEDIA_SEGMENT_TYPE&&Ce.value.trace&&Ce.value.trace.length){var Ye=S[Ce.mediaType],et=O[Ce.mediaType];Ye&&Ye.state!==0&&(Ye.lastSegmentRequestTimeMs=Ce.value.trequest.getTime(),Ye.lastSegmentFinishTimeMs=Ce.value._tfinish.getTime(),ye(Ye,et))}}function ye(Ce,Ye){isNaN(Ce.lastSegmentStart)||isNaN(Ce.lastSegmentRequestTimeMs)||(Ye.segment_request_start_s=.001*Ce.lastSegmentRequestTimeMs,Ye.segment_download_finish_s=.001*Ce.lastSegmentFinishTimeMs,Ce.lastSegmentStart=NaN,Ce.lastSegmentRequestTimeMs=NaN)}function Ne(Ce){if(Ce&&Ce.mediaType){var Ye=S[Ce.mediaType];Ye&&Ye.state!==0&&(Ye.abrQuality=Ce.newQuality)}}function Me(Ce,Ye){if(Ce.length!==Ye.length)return-1;for(var et=0,Y=0;Y<Ce.length;Y++)et+=Ce[Y]*Ye[Y];return et}function oe(){S={},O={}}return T={getMaxIndex:function(Ce){var Ye,et=(0,y.Z)(V).create(),Y=Math.pow(4,.99),Ee=Math.max(Math.pow(4,1),Y*Math.sqrt(4)),Pe=Ce.getMediaInfo(),Xe=Ce.getMediaType(),Ze=Pe.bitrateList.map((function(En){return En.bandwidth})),at=Ze.length,jt=Ce.getScheduleController(),xt=Ce.getStreamInfo(),ht=Ce.getAbrController(),It=ht.getThroughputHistory(),Ue=xt&&xt.manifestInfo&&xt.manifestInfo.isDynamic,Ve=Ce.useL2AABR(),_t=B.getCurrentBufferLevel(Xe,!0),M=It.getSafeAverageThroughput(Xe,Ue),x=It.getAverageThroughput(Xe,Ue),U=It.getAverageLatency(Xe),j=Ce.getVideoModel().getPlaybackRate();if(!(Ce&&Ce.hasOwnProperty("getMediaInfo")&&Ce.hasOwnProperty("getMediaType")&&Ce.hasOwnProperty("getScheduleController")&&Ce.hasOwnProperty("getStreamInfo")&&Ce.hasOwnProperty("getAbrController")&&Ce.hasOwnProperty("useL2AABR"))||(et.reason=et.reason||{},!Ve||Xe===I.Z.AUDIO))return et;jt.setTimeToLoadDelay(0);var he=(function(En){var tr=En.getMediaType(),Ir=S[tr];return Ir||(Ir=(function(Fr){var Dr={},ni=Fr.getMediaInfo(),bi=ni.bitrateList.map((function(Jr){return Jr.bandwidth/1e3}));return Dr.state=1,Dr.bitrates=bi,Dr.lastQuality=0,(function(Jr){Jr&&Jr.type&&(O[Jr.type]={},O[Jr.type].w=[],O[Jr.type].prev_w=[],O[Jr.type].Q=0,O[Jr.type].segment_request_start_s=0,O[Jr.type].segment_download_finish_s=0,O[Jr.type].B_target=1.5)})(ni),D(Dr),Dr})(En),S[tr]=Ir),Ir})(Ce);if(he.state===0)return et;var de=O[Xe];if(!de||(et.reason.state=he.state,et.reason.throughput=x,et.reason.latency=U,isNaN(x)))return et;switch(he.state){case 1:if(Ye=ht.getQualityForBitrate(Pe,M,xt.id,U),et.quality=Ye,et.reason.throughput=M,he.lastQuality=Ye,!isNaN(he.lastSegmentDurationS)&&_t>=de.B_target){he.state=2,de.Q=Y;for(var ot=0;ot<at;++ot)ot===he.lastQuality?de.prev_w[ot]=1:de.prev_w[ot]=0}break;case 2:var wt=[],st=B.getCurrentHttpRequest(Xe).trace.reduce((function(En,tr){return En+tr.d}),0),nt=B.getCurrentHttpRequest(Xe).trace.reduce((function(En,tr){return En+tr.b[0]}),0),rt=Math.round(8*nt/st),ct=B.getCurrentHttpRequest(Xe);if(rt<1&&(rt=1),ct.url===he.lastSegmentUrl||ct.type===p.w.INIT_SEGMENT_TYPE)Ye=he.lastQuality;else{for(var St=he.lastSegmentDurationS,Wt=1,$t=0;$t<at;++$t)Ze[$t]=Ze[$t]/1e3,j*Ze[$t]>rt&&(Wt=-1),de.w[$t]=de.prev_w[$t]+Wt*(St/(2*Ee))*((de.Q+Y)*(j*Ze[$t]/rt));de.w=(function(En){for(var tr=En.length,Ir=!1,Fr=[],Dr=0;Dr<tr;++Dr)Fr[Dr]=En[Dr];for(var ni=En.sort((function(qi,ro){return ro-qi})),bi=0,Jr=0,eo=[],ei=0;ei<tr-1;++ei)if((Jr=((bi+=ni[ei])-1)/(ei+1))>=ni[ei+1]){Ir=!0;break}Ir||(Jr=(bi+ni[tr-1]-1)/tr);for(var jr=0;jr<tr;++jr)eo[jr]=Math.max(Fr[jr]-Jr,0);return eo})(de.w);for(var hn=0;hn<at;++hn)wt[hn]=de.w[hn]-de.prev_w[hn],de.prev_w[hn]=de.w[hn];de.Q=Math.max(0,de.Q-St+St*j*((Me(Ze,de.prev_w)+Me(Ze,wt))/rt));for(var dn=[],_n=0;_n<at;++_n)dn[_n]=Math.abs(Ze[_n]-Me(de.w,Ze));(Ye=dn.indexOf(Math.min.apply(Math,dn)))>he.lastQuality&&Ze[he.lastQuality+1]<=rt&&(Ye=he.lastQuality+1),Ze[Ye]>=rt&&(de.Q=2*Math.max(Y,de.Q)),he.lastSegmentUrl=ct.url}et.quality=Ye,et.reason.throughput=x,et.reason.latency=U,et.reason.bufferLevel=_t,he.lastQuality=et.quality;break;default:$.debug("L2A ABR rule invoked in bad state."),et.quality=ht.getQualityForBitrate(Pe,M,xt.id,U),et.reason.state=he.state,et.reason.throughput=M,et.reason.latency=U,he.state=1,D(he)}return et},reset:function(){oe(),ne.off(A.Z.PLAYBACK_SEEKING,X,T),ne.off(A.Z.MEDIA_FRAGMENT_LOADED,ve,T),ne.off(A.Z.METRIC_ADDED,ie,T),ne.off(A.Z.QUALITY_CHANGE_REQUESTED,Ne,T)}},$=(0,_.Z)(V).getInstance().getLogger(T),oe(),ne.on(A.Z.PLAYBACK_SEEKING,X,T),ne.on(A.Z.MEDIA_FRAGMENT_LOADED,ve,T),ne.on(A.Z.METRIC_ADDED,ie,T),ne.on(A.Z.QUALITY_CHANGE_REQUESTED,Ne,T),T}C.__dashjs_factory_name="L2ARule",c.Z=h.Z.getClassFactory(C)},6070:function(l,c,f){var g=f(5448),y=f(6398),h=f(2068);function p(){var E,A,_=this.context;return E={getMaxIndex:function(I){for(var C=I?I.getSwitchHistory():null,v=C?C.getSwitchRequests():[],T=0,S=0,O=0,$=(0,h.Z)(_).create(),V=0;V<v.length;V++)if(v[V]!==void 0&&(T+=v[V].drops,S+=v[V].noDrops,O+=v[V].dropSize,T+S>=6&&T/S>.075)){$.quality=V>0&&v[V].drops>0?V-1:V,$.reason={index:$.quality,drops:T,noDrops:S,dropSize:O},A.debug("Switch history rule index: "+$.quality+" samples: "+(T+S)+" drops: "+T);break}return $}},A=(0,y.Z)(_).getInstance().getLogger(E),E}p.__dashjs_factory_name="SwitchHistoryRule",c.Z=g.Z.getClassFactory(p)},5628:function(l,c,f){var g=f(5448),y=f(2068),h=f(3393),p=f(3860);function E(A){A=A||{};var _=this.context,I=A.dashMetrics;return{getMaxIndex:function(C){var v=(0,y.Z)(_).create();if(!(C&&C.hasOwnProperty("getMediaInfo")&&C.hasOwnProperty("getMediaType")&&C.hasOwnProperty("useBufferOccupancyABR")&&C.hasOwnProperty("getAbrController")&&C.hasOwnProperty("getScheduleController")))return v;(function(){if(!I||!I.hasOwnProperty("getCurrentBufferState"))throw new Error(h.Z.MISSING_CONFIG_ERROR)})();var T=C.getMediaInfo(),S=C.getMediaType(),O=I.getCurrentBufferState(S),$=C.getScheduleController(),V=C.getAbrController(),B=C.getStreamInfo(),ne=B?B.id:null,D=B&&B.manifestInfo?B.manifestInfo.isDynamic:null,X=V.getThroughputHistory(),ve=X.getSafeAverageThroughput(S,D),ie=X.getAverageLatency(S),ye=C.useBufferOccupancyABR();return isNaN(ve)||!O||ye||V.getAbandonmentStateFor(ne,S)!==p.Z.ABANDON_LOAD&&(O.state===p.Z.BUFFER_LOADED||D)&&(v.quality=V.getQualityForBitrate(T,ve,ne,ie),$.setTimeToLoadDelay(0),v.reason={throughput:ve,latency:ie}),v},reset:function(){}}}E.__dashjs_factory_name="ThroughputRule",c.Z=g.Z.getClassFactory(E)},4722:function(l,c,f){var g=f(5448),y=f(6398);function h(){var p,E,A,_,I,C,v,T,S,O=this.context;function $(){A=null,_=1,I=100,C=0,v=null,T=null,S="dynamic_weight_selection"}function V(){var ve=0;if(A)for(var ie=0;ie<A.length;ie++){var ye=A[ie];ye.state.throughput>ve&&(ve=ye.state.throughput)}return ve}function B(ve,ie,ye){var Ne=ve.map((function(Me,oe){return ye[oe]*Math.pow(Me-ie[oe],2)})).reduce((function(Me,oe){return Me+oe}));return(Ne<0?-1:1)*Math.sqrt(Math.abs(Ne))}function ne(ve,ie){return B([ve.state.throughput,ve.state.latency,ve.state.rebuffer,ve.state.switch],[ie.state.throughput,ie.state.latency,ie.state.rebuffer,ie.state.switch],[1,1,1,1])}function D(ve,ie,ye){for(var Ne=0;Ne<ie.length;Ne++){var Me=ie[Ne],oe=ne(Me,ve);X(Me,ye,Math.exp(-1*Math.pow(oe,2)/(2*Math.pow(.1,2))))}}function X(ve,ie,ye){var Ne=ve.state,Me=[.01,.01,.01,.01];Ne.throughput=Ne.throughput+(ie[0]-Ne.throughput)*Me[0]*ye,Ne.latency=Ne.latency+(ie[1]-Ne.latency)*Me[1]*ye,Ne.rebuffer=Ne.rebuffer+(ie[2]-Ne.rebuffer)*Me[2]*ye,Ne.switch=Ne.switch+(ie[3]-Ne.switch)*Me[3]*ye}return p={getNextQuality:function(ve,ie,ye,Ne,Me,oe,Ce){var Ye=ye,et=Ne,Y=ie,Ee=(function(de){if(!A){A=[];var ot=de.bitrateList,wt=[];C=ot[0].bandwidth,ot.forEach((function(ct){wt.push(ct.bandwidth),ct.bandwidth<C&&(C=ct.bandwidth)})),rt=wt.map((function(ct){return Math.pow(ct,2)})).reduce((function(ct,St){return ct+St})),_=Math.sqrt(rt);for(var st=0;st<ot.length;st++){var nt={qualityIndex:st,bitrate:ot[st].bandwidth,state:{throughput:ot[st].bandwidth/_,latency:0,rebuffer:0,switch:0}};A.push(nt)}T=(function(ct){var St=[],Wt=(function(xo){for(var pn=[],nn=0;nn<xo;nn++){var be=[Math.random()*V(),Math.random(),Math.random(),Math.random()];pn.push(be)}return pn})(Math.pow(ct.length,2));St.push(Wt[0]);for(var $t=[1,1,1,1],hn=1;hn<ct.length;hn++){for(var dn=null,_n=null,En=0;En<Wt.length;En++){for(var tr=Wt[En],Ir=null,Fr=0;Fr<St.length;Fr++){var Dr=B(tr,St[Fr],$t);(Ir===null||Dr<Ir)&&(Ir=Dr)}(_n===null||Ir>_n)&&(dn=tr,_n=Ir)}St.push(dn)}for(var ni=null,bi=null,Jr=0;Jr<St.length;Jr++){for(var eo=0,ei=0;ei<St.length;ei++)Jr!==ei&&(eo+=B(St[Jr],St[ei],$t));(ni===null||eo>ni)&&(ni=eo,bi=Jr)}var jr=[];for(jr.push(St[bi]),St.splice(bi,1);St.length>0;){for(var qi=null,ro=null,To=0;To<St.length;To++){var di=B(jr[0],St[To],$t);(qi===null||di<qi)&&(qi=di,ro=To)}jr.push(St[ro]),St.splice(ro,1)}return jr})(A)}var rt;return A})(ve),Pe=ie/_;Pe>1&&(Pe=V()),ye/=I,E.debug("getNextQuality called throughput:".concat(Pe," latency:").concat(ye," bufferSize:").concat(Ne," currentQualityIndex:").concat(oe," playbackRate:").concat(Me));var Xe=Ee[oe],Ze=Xe.bitrate*Ce.getSegmentDuration()/Y,at=Math.max(0,Ze-et);if(et-Ze<Ce.getMinBuffer())return E.debug("Buffer is low for bitrate= ".concat(Xe.bitrate," downloadTime=").concat(Ze," currentBuffer=").concat(et," rebuffer=").concat(at)),(function(de,ot){var wt=0,st=de;if(A)for(var nt=0;nt<A.length;nt++){var rt=A[nt];rt.bitrate<de.bitrate&&rt.bitrate>wt&&ot>rt.bitrate&&(wt=rt.bitrate,st=rt)}return st})(Xe,Y).qualityIndex;switch(S){case"manual_weight_selection":v=[.4,.4,.4,.4];break;case"random_weight_selection":(function(de){v=(function(ot,wt){for(var st=[],nt=Math.sqrt(2/ot),rt=0;rt<4;rt++)st.push(Math.random()*nt);return v=st})(de.length)})(Ee);break;default:(function(de,ot,wt,st,nt,rt,ct){v||(v=T[T.length-1]);var St=de.findWeightVector(ot,wt,st,nt,rt,ct);St!==null&&St!==-1&&(v=St)})(Ce,Ee,Ye,et,at,Y,Me)}for(var jt=null,xt=null,ht=null,It=0;It<Ee.length;It++){var Ue=Ee[It],Ve=Ue.state,_t=[Ve.throughput,Ve.latency,Ve.rebuffer,Ve.switch],M=v.slice(),x=Ce.getNextBufferWithBitrate(Ue.bitrate,et,Y),U=x<Ce.getMinBuffer();U&&E.debug("Buffer is low for bitrate=".concat(Ue.bitrate," downloadTime=").concat(Ze," currentBuffer=").concat(et," nextBuffer=").concat(x)),(Ue.bitrate>ie-1e4||U)&&Ue.bitrate!==C&&(M[0]=100);var j=B(_t,[Pe,0,0,0],M);(jt===null||j<jt)&&(jt=j,xt=Ue.qualityIndex,ht=Ue)}var he=Math.abs(Xe.bitrate-ht.bitrate)/_;return D(Xe,Ee,[Pe,ye,at,he]),D(ht,Ee,[Pe,0,0,he]),xt},reset:function(){$()}},E=(0,y.Z)(O).getInstance().getLogger(p),$(),p}h.__dashjs_factory_name="LearningAbrController",c.Z=g.Z.getClassFactory(h)},5317:function(l,c,f){var g=f(5448),y=f(2298);function h(){var p,E,A,_,I;function C(){E=null,A=null,_=null,I=null}function v(S,O,$,V){var B=new y.Z;return B.type=S,B.weights.bitrateReward=O||1,B.weights.bitrateSwitchPenalty=1,B.weights.rebufferPenalty=$||1e3,B.weights.latencyPenalty=[],B.weights.latencyPenalty.push({threshold:1.1,penalty:.05*V}),B.weights.latencyPenalty.push({threshold:1e8,penalty:.1*$}),B.weights.playbackSpeedPenalty=V||200,B}function T(S,O,$,V,B){B.bitrateWSum+=B.weights.bitrateReward*S,B.lastBitrate&&(B.bitrateSwitchWSum+=B.weights.bitrateSwitchPenalty*Math.abs(S-B.lastBitrate)),B.lastBitrate=S,B.rebufferWSum+=B.weights.rebufferPenalty*O;for(var ne=0;ne<B.weights.latencyPenalty.length;ne++){var D=B.weights.latencyPenalty[ne];if($<=D.threshold){B.latencyWSum+=D.penalty*$;break}}B.playbackSpeedWSum+=B.weights.playbackSpeedPenalty*Math.abs(1-V),B.totalQoe=B.bitrateWSum-B.bitrateSwitchWSum-B.rebufferWSum-B.latencyWSum-B.playbackSpeedWSum}return p={setupPerSegmentQoe:function(S,O,$){E=v("segment",S,O,$),A=S,_=O,I=$},logSegmentMetrics:function(S,O,$,V){E&&T(S,O,$,V,E)},getPerSegmentQoe:function(){return E},calculateSingleUseQoe:function(S,O,$,V){var B=null;return A&&_&&I&&(B=v("segment",A,_,I)),B?(T(S,O,$,V,B),B.totalQoe):0},reset:function(){C()}},C(),p}h.__dashjs_factory_name="LoLpQoeEvaluator",c.Z=g.Z.getClassFactory(h)},5435:function(l,c,f){var g=f(6398),y=f(5448),h=f(4722),p=f(5317),E=f(2068),A=f(3860),_=f(6523),I=f(3393);function C(v){var T,S,O,$,V=(v=v||{}).dashMetrics,B=this.context;return S={getMaxIndex:function(ne){try{var D=(0,E.Z)(B).create(),X=ne.getMediaInfo().type,ve=ne.getAbrController(),ie=ne.getStreamInfo(),ye=ve.getQualityFor(X,ie.id),Ne=ne.getMediaInfo(),Me=V.getCurrentBufferState(X),oe=ne.getScheduleController(),Ce=V.getCurrentBufferLevel(X,!0),Ye=ie&&ie.manifestInfo?ie.manifestInfo.isDynamic:null,et=oe.getPlaybackController(),Y=et.getCurrentLiveLatency();if(!ne.useLoLPABR()||X===I.Z.AUDIO)return D;Y||(Y=0);var Ee=et.getPlaybackRate(),Pe=ve.getThroughputHistory().getSafeAverageThroughput(X,Ye);if(T.debug("Throughput ".concat(Math.round(Pe)," kbps")),isNaN(Pe)||!Me||ve.getAbandonmentStateFor(ie.id,X)===A.Z.ABANDON_LOAD)return D;for(var Xe=Ne.bitrateList,Ze=ne.getRepresentationInfo().fragmentDuration,at=Xe[0].bandwidth/1e3,jt=Xe[Xe.length-1].bandwidth/1e3,xt=0;xt<Xe.length;xt++){var ht=Xe[xt].bandwidth/1e3;ht>jt?jt=ht:ht<at&&(at=ht)}var It=Xe[ye].bandwidth/1e3,Ue=V.getCurrentHttpRequest(X,!0),Ve=(Ue.tresponse.getTime()-Ue.trequest.getTime())/1e3,_t=Ve>Ze?Ve-Ze:0;$.setupPerSegmentQoe(Ze,jt,at),$.logSegmentMetrics(It,_t,Y,Ee);var M=(0,_.Z)(B).create({targetLatency:1.5,bufferMin:.3,segmentDuration:Ze,qoeEvaluator:$});return D.quality=O.getNextQuality(Ne,1e3*Pe,Y,Ce,Ee,ye,M),D.reason={throughput:Pe,latency:Y},D.priority=E.Z.PRIORITY.STRONG,oe.setTimeToLoadDelay(0),D.quality!==ye&&T.debug("[TgcLearningRule]["+X+"] requesting switch to index: ",D.quality,"Average throughput",Math.round(Pe),"kbps"),D}catch(x){throw x}},reset:function(){O.reset(),$.reset()}},T=(0,g.Z)(B).getInstance().getLogger(S),O=(0,h.Z)(B).create(),$=(0,p.Z)(B).create(),S}C.__dashjs_factory_name="LoLPRule",c.Z=y.Z.getClassFactory(C)},6523:function(l,c,f){var g=f(5448);function y(h){var p,E,A,_,I=h.targetLatency,C=h.bufferMin,v=h.segmentDuration,T=h.qoeEvaluator;function S(){return v}function O($,V){var B=S();return V>B?$-B:$+B-V}return p={getMinBuffer:function(){return C},getSegmentDuration:S,getNextBufferWithBitrate:function($,V,B){return O(V,$*v/B)},getNextBuffer:O,findWeightVector:function($,V,B,ne,D,X){var ve=null,ie=null,ye=null,Ne=Math.abs(V-A);return $.forEach((function(Me){E.forEach((function(oe){oe[0];var Ce=oe[1],Ye=oe[2],et=(oe[3],Me.bitrate*v/D),Y=O(B,et),Ee=(Ye===0?10:1/Ye)*Math.max(1e-5,et-Y),Pe=(Ce===0?10:1/Ce)*Me.state.latency,Xe=T.calculateSingleUseQoe(Me.bitrate,Ee,Pe,X);(ve===null||Xe>ve)&&(function(Ze,at,jt){return!(Ze>I+jt)&&at>=C})(V,Y,Ne)&&(ve=Xe,ie=oe,ye=Me.bitrate)}))})),ie===null&&ye===null&&(ie=-1),A=V,ie}},E=(function $(V,B,ne){if(ne===B)return V;for(var D=V.length,X=0;X<D;X++)for(var ve=V.shift(),ie=0;ie<_.length;ie++)V.push(ve.concat(_[ie]));return $(V,B,ne+1)})((_=[.2,.4,.6,.8,1]).map((function($){return[$]})),4,1),A=0,p}y.__dashjs_factory_name="LoLpWeightSelector",c.Z=g.Z.getClassFactory(y)},2298:function(l,c){c.Z=function f(){(function(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")})(this,f),this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}},7803:function(l,c,f){f.d(c,{Y:function(){return T}});var g=f(3393),y=f(1553),h=f(5448),p=f(2128),E=f(2594),A=f(7387),_=f(7417),I=f(9032),C=f(9326),v=f(7802),T=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function S(O){var $,V,B,ne,D,X,ve,ie,ye=this.context,Ne=O.adapter,Me=O.baseURLController,oe=O.streamInfo,Ce=O.timelineConverter,Ye=O.debug,et=O.eventBus,Y=O.events,Ee=O.dashConstants,Pe=(0,E.Z)(ye).getInstance();function Xe(at,jt){var xt=new p.Z;xt.id=at.id,xt.bitrate=at.bandwidth,xt.width=at.width,xt.height=at.height,xt.tilesHor=1,xt.tilesVert=1,at.essentialProperties&&at.essentialProperties.forEach((function(ht){if(T.indexOf(ht.schemeIdUri)>=0&&ht.value){var It=ht.value.split("x");It.length!==2||isNaN(It[0])||isNaN(It[1])||(xt.tilesHor=parseInt(It[0],10),xt.tilesVert=parseInt(It[1],10))}})),jt?X.updateSegmentData(at).then((function(ht){(function(It,Ue,Ve){var _t=[],M=(function(x,U){var j,he,de,ot,wt=[],st=0;for(j=0,he=x.segments.length;j<he;j++)de=x.segments[j],(ot=(0,A.TJ)(Ce,Ne.getIsDynamic(),U,de.startTime,de.duration,de.timescale,de.media,de.mediaRange,st))&&(wt.push(ot),ot=null,st++);return wt})(Ve,Ue);Ue.segments=M,It.segmentDuration=Ue.segments[0].duration,It.readThumbnail=function(x,U){var j=null;_t.some((function(he){if(he.start<=x&&he.end>x)return j=he.url,!0})),j?U(j):Ue.segments.some((function(he){if(he.mediaStartTime<=x&&he.mediaStartTime+he.duration>x){var de=Me.resolve(Ue.path);return ve.load({method:"get",url:de.url,request:{range:he.mediaRange,responseType:"arraybuffer"},onload:function(ot){var wt=ie.getSamplesInfo(ot.target.response),st=new Blob([ot.target.response.slice(wt.sampleList[0].offset,wt.sampleList[0].offset+wt.sampleList[0].size)],{type:"image/jpeg"}),nt=window.URL.createObjectURL(st);_t.push({start:he.mediaStartTime,end:he.mediaStartTime+he.duration,url:nt}),U&&U(nt)}}),!0}}))}})(xt,at,ht)})):(xt.startNumber=at.startNumber,xt.segmentDuration=at.segmentDuration,xt.timescale=at.timescale,xt.templateUrl=(function(ht){var It=Pe.isRelative(ht.media)?Pe.resolve(ht.media,Me.resolve(ht.path).url):ht.media;return It?(0,A.Aj)(It,ht.id):""})(at)),xt.tilesHor>0&&xt.tilesVert>0&&(xt.widthPerTile=xt.width/xt.tilesHor,xt.heightPerTile=xt.height/xt.tilesVert,V.push(xt))}function Ze(){V=[],ne=-1,D=null}return $={getTracks:function(){return V},addTracks:function(){if(oe&&Ne&&(D=Ne.getMediaInfoForType(oe,g.Z.IMAGE))){var at=Ne.getVoRepresentations(D);at&&at.length>0&&at.forEach((function(jt){(jt.segmentInfoType===y.Z.SEGMENT_TEMPLATE&&jt.segmentDuration>0&&jt.media||jt.segmentInfoType===y.Z.SEGMENT_TIMELINE)&&Xe(jt),jt.segmentInfoType===y.Z.SEGMENT_BASE&&Xe(jt,!0)})),V.length>0&&V.sort((function(jt,xt){return jt.bitrate-xt.bitrate}))}},reset:Ze,setTrackByIndex:function(at){V&&V.length!==0&&(at>=V.length&&(at=V.length-1),ne=at)},getCurrentTrack:function(){return ne<0?null:V[ne]},getCurrentTrackIndex:function(){return ne},getThumbnailRequestForTime:function(at){for(var jt,xt=Ne.getVoRepresentations(D),ht=0;ht<xt.length;ht++)if(V[ne].id===xt[ht].id){jt=xt[ht];break}return B.getSegmentRequestForTime(D,jt,at)}},Ze(),ve=(0,I.Z)(ye).create({}),ie=(0,_.Z)(ye).getInstance(),X=(0,v.Z)(ye).create({events:Y,eventBus:et,streamInfo:oe,timelineConverter:Ce,dashConstants:Ee,dashMetrics:O.dashMetrics,segmentBaseController:O.segmentBaseController,type:g.Z.IMAGE}),(B=(0,C.Z)(ye).create({streamInfo:oe,type:g.Z.IMAGE,timelineConverter:Ce,segmentsController:X,baseURLController:Me,debug:Ye,eventBus:et,events:Y,dashConstants:Ee,urlUtils:Pe})).initialize(!!Ne&&Ne.getIsDynamic()),$}S.__dashjs_factory_name="ThumbnailTracks",c.Z=h.Z.getClassFactory(S)},7417:function(l,c,f){var g=f(6398),y=f(8260),h=f(5448),p=f(6934),E=f(9597);function A(){var _,I,C=this.context;function v(O){if(!O)return null;O.fileStart===void 0&&(O.fileStart=0);var $=p.parseBuffer(O),V=(0,y.Z)(C).create();return V.setData($),V}function T(O,$){return O[$+3]>>>0|O[$+2]<<8>>>0|O[$+1]<<16>>>0|O[$]<<24>>>0}function S(O,$){return String.fromCharCode(O[$++])+String.fromCharCode(O[$++])+String.fromCharCode(O[$++])+String.fromCharCode(O[$])}return I={parse:v,findLastTopIsoBoxCompleted:function(O,$,V){if(V===void 0&&(V=0),!$||V+8>=$.byteLength)return new E.Z(0,!1);for(var B,ne=$ instanceof ArrayBuffer?new Uint8Array($):$,D=0;V<ne.byteLength;){var X=T(ne,V),ve=S(ne,V+4);if(X===0)break;V+X<=ne.byteLength&&(O.indexOf(ve)>=0?B=new E.Z(V,!0,X):D=V+X),V+=X}return B||new E.Z(D,!1)},getMediaTimescaleFromMoov:function(O){var $=v(O),V=$?$.getBox("mdhd"):void 0;return V?V.timescale:NaN},getSamplesInfo:function(O){if(!O||O.byteLength===0)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var $,V,B,ne,D,X,ve,ie,ye,Ne,Me,oe,Ce,Ye,et,Y,Ee=v(O),Pe=Ee.getBoxes("moof"),Xe=Ee.getBoxes("mfhd");et=Ee.getBoxes("moof").length,Ye=Xe[Xe.length-1].sequence_number,V=0,D=[];var Ze=-1,at=-1;for(Ne=0;Ne<Pe.length;Ne++){var jt=Pe[Ne],xt=jt.getChildBoxes("traf");for(ie=0;ie<xt.length;ie++){var ht=xt[ie],It=ht.getChildBox("tfhd"),Ue=ht.getChildBox("tfdt");ne=Ue.baseMediaDecodeTime;var Ve=ht.getChildBoxes("trun"),_t=ht.getChildBoxes("subs");for(ye=0;ye<Ve.length;ye++){var M=Ve[ye];for(V=M.sample_count,Ce=(It.base_data_offset||0)+(M.data_offset||0),ve=0;ve<V;ve++){$=(X=M.samples[ve]).sample_duration!==void 0?X.sample_duration:It.default_sample_duration,B=X.sample_size!==void 0?X.sample_size:It.default_sample_size;var x={dts:ne,cts:ne+(X.sample_composition_time_offset!==void 0?X.sample_composition_time_offset:0),duration:$,offset:jt.offset+Ce,size:B,subSizes:[B]};if(_t)for(Me=0;Me<_t.length;Me++){var U=_t[Me];if(Ze<U.entry_count-1&&ve>at&&(Ze++,at+=U.entries[Ze].sample_delta),ve==at){x.subSizes=[];var j=U.entries[Ze];for(oe=0;oe<j.subsample_count;oe++)x.subSizes.push(j.subsamples[oe].subsample_size)}}D.push(x),Ce+=B,ne+=$}}Y=ne-Ue.baseMediaDecodeTime}}return{sampleList:D,lastSequenceNumber:Ye,totalDuration:Y,numSequences:et}},findInitRange:function(O){var $=null,V=v(O);if(!V)return $;var B=V.getBox("ftyp"),ne=V.getBox("moov");return _.debug("Searching for initialization."),ne&&ne.isComplete&&($=(B?B.offset:ne.offset)+"-"+(ne.offset+ne.size-1),_.debug("Found the initialization.  Range: "+$)),$},parsePayload:function(O,$,V){if(V===void 0&&(V=0),!$||V+8>=$.byteLength)return new E.Z(0,!1);for(var B,ne=$ instanceof ArrayBuffer?new Uint8Array($):$,D=0;V<ne.byteLength;){var X=T(ne,V),ve=S(ne,V+4);if(X===0)break;V+X<=ne.byteLength&&(O.indexOf(ve)>=0?B=new E.Z(V,!0,X,ve):D=V+X),V+=X}return B||new E.Z(D,!1)}},_=(0,g.Z)(C).getInstance().getLogger(I),I}A.__dashjs_factory_name="BoxParser",c.Z=h.Z.getSingletonFactory(A)},1715:function(l,c,f){f.d(c,{B:function(){return E}});var g=f(5448),y=f(7803),h=f(3393),p=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function E(){var _="ManagedMediaSource"in window,I="WebKitMediaSource"in window,C="MediaSource"in window;return _||I||C}function A(){var _,I,C;return _={setConfig:function(v){v&&v.settings&&(I=v.settings)},supportsMediaSource:E,supportsEncryptedMedia:function(){return C},supportsCodec:function(v,T){return T!==h.Z.AUDIO&&T!==h.Z.VIDEO?Promise.resolve(!0):(function(S,O){return I.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(S.codec&&O===h.Z.AUDIO||O===h.Z.VIDEO&&S.codec&&S.width&&S.height&&S.bitrate&&S.framerate)})(v,T)?(function(S,O){return new Promise((function($){if(S&&S.codec){var V={type:"media-source"};V[O]={},V[O].contentType=S.codec,V[O].width=S.width,V[O].height=S.height,V[O].bitrate=parseInt(S.bitrate),V[O].framerate=parseFloat(S.framerate),navigator.mediaCapabilities.decodingInfo(V).then((function(B){$(B.supported)})).catch((function(){$(!1)}))}else $(!1)}))})(v,T):(function(S){return new Promise((function(O){if(S&&S.codec){var $=S.codec;S.width&&S.height&&($+=';width="'+S.width+'";height="'+S.height+'"'),"ManagedMediaSource"in window&&ManagedMediaSource.isTypeSupported($)||"MediaSource"in window&&MediaSource.isTypeSupported($)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported($)?O(!0):O(!1)}else O(!1)}))})(v)},setEncryptedMediaSupported:function(v){C=v},supportsEssentialProperty:function(v){try{return y.Y.indexOf(v.schemeIdUri)!==-1||h.Z.FONT_DOWNLOAD_DVB_SCHEME===v.schemeIdUri}catch{return!0}},codecRootCompatibleWithCodec:function(v,T){for(var S,O=v.split(".")[0],$=T.indexOf(O)===0,V=0;V<p.length;V++)if(p[V].codec===O){S=p[V];break}return S?$||S.compatibleCodecs.some((function(B){return T.indexOf(B)===0})):$}},C=!1,_}A.__dashjs_factory_name="Capabilities",c.Z=g.Z.getSingletonFactory(A)},2295:function(l,c,f){var g=f(5448),y=f(3106);function h(){return{customTimeRangeArray:[],length:0,add:function(p,E){var A;for(A=0;A<this.customTimeRangeArray.length&&p>this.customTimeRangeArray[A].start;A++);for(this.customTimeRangeArray.splice(A,0,{start:p,end:E}),A=0;A<this.customTimeRangeArray.length-1;A++)this.mergeRanges(A,A+1)&&A--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(p,E){for(var A=0;A<this.customTimeRangeArray.length;A++)if(p<=this.customTimeRangeArray[A].start&&E>=this.customTimeRangeArray[A].end)this.customTimeRangeArray.splice(A,1),A--;else{if(p>this.customTimeRangeArray[A].start&&E<this.customTimeRangeArray[A].end){this.customTimeRangeArray.splice(A+1,0,{start:E,end:this.customTimeRangeArray[A].end}),this.customTimeRangeArray[A].end=p;break}p>this.customTimeRangeArray[A].start&&p<this.customTimeRangeArray[A].end?this.customTimeRangeArray[A].end=p:E>this.customTimeRangeArray[A].start&&E<this.customTimeRangeArray[A].end&&(this.customTimeRangeArray[A].start=E)}this.length=this.customTimeRangeArray.length},mergeRanges:function(p,E){var A=this.customTimeRangeArray[p],_=this.customTimeRangeArray[E];return A.start<=_.start&&_.start<=A.end&&A.end<=_.end?(A.end=_.end,this.customTimeRangeArray.splice(E,1),!0):_.start<=A.start&&A.start<=_.end&&_.end<=A.end?(A.start=_.start,this.customTimeRangeArray.splice(E,1),!0):_.start<=A.start&&A.start<=_.end&&A.end<=_.end?(this.customTimeRangeArray.splice(p,1),!0):A.start<=_.start&&_.start<=A.end&&_.end<=A.end&&(this.customTimeRangeArray.splice(E,1),!0)},start:function(p){return(0,y.SE)(p),p>=this.customTimeRangeArray.length||p<0?NaN:this.customTimeRangeArray[p].start},end:function(p){return(0,y.SE)(p),p>=this.customTimeRangeArray.length||p<0?NaN:this.customTimeRangeArray[p].end}}}h.__dashjs_factory_name="CustomTimeRanges",c.Z=g.Z.getClassFactory(h)},5:function(l,c,f){var g=f(5448);function y(){var h,p=/^[a-z][a-z0-9+\-_.]*:/i,E=/^https?:\/\//i,A=/^https:\/\//i,_=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,I=function(B,ne){try{return new window.URL(B,ne).toString()}catch{return B}},C=function(B,ne){var D=v;if(!ne||!O(B))return B;$(B)&&(D=T),V(B)&&(D=S);var X=D(ne),ve=X.charAt(X.length-1)!=="/"&&B.charAt(0)!=="/"?"/":"";return[X,B].join(ve)};function v(B){var ne=B.indexOf("/"),D=B.lastIndexOf("/");return ne!==-1?D===ne+1?B:(B.indexOf("?")!==-1&&(B=B.substring(0,B.indexOf("?"))),B.substring(0,D+1)):""}function T(B){var ne=B.match(_);return ne?ne[1]:""}function S(B){var ne=B.match(p);return ne?ne[0]:""}function O(B){return!p.test(B)}function $(B){return O(B)&&B.charAt(0)==="/"}function V(B){return B.indexOf("//")===0}return(function(){try{new window.URL("x","http://y"),h=I}catch{}finally{h=h||C}})(),{parseBaseUrl:v,parseOrigin:T,parseScheme:S,isRelative:O,isPathAbsolute:$,isSchemeRelative:V,isHTTPURL:function(B){return E.test(B)},isHTTPS:function(B){return A.test(B)},removeHostname:function(B){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(B)[2].substring(1)},resolve:function(B,ne){return h(B,ne)}}}y.__dashjs_factory_name="DefaultURLUtils",c.Z=g.Z.getSingletonFactory(y)},8260:function(l,c,f){var g=f(2839),y=f(5448);function h(){var p;function E(_){var I=[];if(!_||!p||typeof p.fetchAll!="function")return I;for(var C,v=p.fetchAll(_),T=0,S=v.length;T<S;T++)(C=A(v[T]))&&I.push(C);return I}function A(_){if(!_)return null;var I=new g.Z(_);return _.hasOwnProperty("_incomplete")&&(I.isComplete=!_._incomplete),I}return{getBox:function(_){return _&&p&&p.boxes&&p.boxes.length!==0&&typeof p.fetch=="function"?A(p.fetch(_)):null},getBoxes:E,setData:function(_){p=_},getLastBox:function(){if(!p||!p.boxes||!p.boxes.length)return null;var _=E(p.boxes[p.boxes.length-1].type);return _.length>0?_[_.length-1]:null}}}h.__dashjs_factory_name="IsoFile",c.Z=y.Z.getClassFactory(h)},7473:function(l,c,f){f.d(c,{k:function(){return y}});var g=f(5448);function y(p,E){var A={url:p.url,method:p.method,headers:Object.assign({},p.headers),credentials:p.withCredentials?"include":void 0,range:p.request.range};return Promise.resolve(E.modifyRequest(A)).then((function(){return Object.assign(p,A,{withCredentials:A.credentials==="include"})}))}function h(){return{modifyRequest:null,modifyRequestURL:function(p){return p},modifyRequestHeader:function(p,E){return E.url,p}}}h.__dashjs_factory_name="RequestModifier",c.Z=g.Z.getSingletonFactory(h)},3106:function(l,c,f){f.d(c,{PS:function(){return h},SE:function(){return p}});var g=f(3393);function y(E){return y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},y(E)}function h(E,A){if(y(E)!==A)throw g.Z.BAD_ARGUMENT_ERROR}function p(E){if(E===null||isNaN(E)||E%1!=0)throw g.Z.BAD_ARGUMENT_ERROR+" : argument is not an integer"}},2594:function(l,c,f){var g=f(5448),y=f(5);function h(){var E,A=[],_=this.context;function I(C,v,T){var S=(function(O){var $;for($=0;$<A.length;$++)if(A[$].regex.test(O))return A[$].utils;return E})(T||v);return S&&typeof S[C]=="function"?S[C](v,T):E[C](v,T)}return E=(0,y.Z)(_).getInstance(),{registerUrlRegex:function(C,v){A.push({regex:C,utils:v})},parseBaseUrl:function(C){return I("parseBaseUrl",C)},parseOrigin:function(C){return I("parseOrigin",C)},parseScheme:function(C){return I("parseScheme",C)},isRelative:function(C){return I("isRelative",C)},isPathAbsolute:function(C){return I("isPathAbsolute",C)},isSchemeRelative:function(C){return I("isSchemeRelative",C)},isHTTPURL:function(C){return I("isHTTPURL",C)},isHTTPS:function(C){return I("isHTTPS",C)},removeHostname:function(C){return I("removeHostname",C)},resolve:function(C,v){return I("resolve",C,v)}}}h.__dashjs_factory_name="URLUtils";var p=g.Z.getSingletonFactory(h);c.Z=p},5459:function(l,c){c.Z=function f(g,y,h){(function(p,E){if(!(p instanceof E))throw new TypeError("Cannot call a class as a function")})(this,f),this.code=g||null,this.message=y||null,this.data=h||null}},3186:function(l,c,f){var g=f(7855);function y(p,E){for(var A=0;A<E.length;A++){var _=E[A];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(p,_.key,_)}}var h=(function(){function p(_){(function(I,C){if(!(I instanceof C))throw new TypeError("Cannot call a class as a function")})(this,p),this.action=p.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=_||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}var E,A;return E=p,(A=[{key:"isInitializationRequest",value:function(){return this.type&&this.type===g.w.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(_){this.type=_&&_.init?g.w.INIT_SEGMENT_TYPE:g.w.MEDIA_SEGMENT_TYPE,this.url=_&&_.url?_.url:null,this.range=_&&_.range?_.range.start+"-"+_.range.end:null,this.mediaType=_&&_.mediaType?_.mediaType:null}}])&&y(E.prototype,A),p})();h.ACTION_DOWNLOAD="download",h.ACTION_COMPLETE="complete",c.Z=h},2839:function(l,c){function f(y,h){for(var p=0;p<h.length;p++){var E=h[p];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(y,E.key,E)}}var g=(function(){function y(E){if((function(S,O){if(!(S instanceof O))throw new TypeError("Cannot call a class as a function")})(this,y),this.offset=E._offset,this.type=E.type,this.size=E.size,this.boxes=[],E.boxes)for(var A=0;A<E.boxes.length;A++)this.boxes.push(new y(E.boxes[A]));switch(this.isComplete=!0,E.type){case"sidx":if(this.timescale=E.timescale,this.earliest_presentation_time=E.earliest_presentation_time,this.first_offset=E.first_offset,this.references=E.references,E.references){this.references=[];for(var _=0;_<E.references.length;_++){var I={reference_type:E.references[_].reference_type,referenced_size:E.references[_].referenced_size,subsegment_duration:E.references[_].subsegment_duration};this.references.push(I)}}break;case"emsg":this.id=E.id,this.version=E.version===1?1:0,this.value=E.value,this.timescale=E.timescale,this.scheme_id_uri=E.scheme_id_uri,this.presentation_time_delta=E.version===1?E.presentation_time:E.presentation_time_delta,this.event_duration=E.event_duration,this.message_data=E.message_data;break;case"mdhd":this.timescale=E.timescale;break;case"mfhd":this.sequence_number=E.sequence_number;break;case"subs":this.entry_count=E.entry_count,this.entries=E.entries;break;case"tfhd":this.base_data_offset=E.base_data_offset,this.sample_description_index=E.sample_description_index,this.default_sample_duration=E.default_sample_duration,this.default_sample_size=E.default_sample_size,this.default_sample_flags=E.default_sample_flags,this.flags=E.flags;break;case"tfdt":this.version=E.version,this.baseMediaDecodeTime=E.baseMediaDecodeTime,this.flags=E.flags;break;case"trun":if(this.sample_count=E.sample_count,this.first_sample_flags=E.first_sample_flags,this.data_offset=E.data_offset,this.flags=E.flags,this.samples=E.samples,E.samples){this.samples=[];for(var C=0,v=E.samples.length;C<v;C++){var T={sample_size:E.samples[C].sample_size,sample_duration:E.samples[C].sample_duration,sample_composition_time_offset:E.samples[C].sample_composition_time_offset};this.samples.push(T)}}break;case"prft":this.version=E.version,this.reference_track_ID=E.reference_track_ID,this.ntp_timestamp_sec=E.ntp_timestamp_sec,this.ntp_timestamp_frac=E.ntp_timestamp_frac,this.media_time=E.media_time,this.flags=E.flags}}var h,p;return h=y,(p=[{key:"getChildBox",value:function(E){for(var A=0;A<this.boxes.length;A++)if(this.boxes[A].type===E)return this.boxes[A]}},{key:"getChildBoxes",value:function(E){for(var A=[],_=0;_<this.boxes.length;_++)this.boxes[_].type===E&&A.push(this.boxes[_]);return A}}])&&f(h.prototype,p),y})();c.Z=g},9597:function(l,c){c.Z=function f(g,y,h){(function(p,E){if(!(p instanceof E))throw new TypeError("Cannot call a class as a function")})(this,f),this.lastCompletedOffset=g,this.found=y,this.size=h}},2128:function(l,c){c.Z=function f(){(function(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")})(this,f),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}},7855:function(l,c,f){function g(p,E){if(!(p instanceof E))throw new TypeError("Cannot call a class as a function")}f.d(c,{O:function(){return h},w:function(){return y}});var y=function p(){g(this,p),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this.cmsd=null,this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null},h=function p(){g(this,p),this.s=null,this.d=null,this.b=[]};y.GET="GET",y.HEAD="HEAD",y.MPD_TYPE="MPD",y.XLINK_EXPANSION_TYPE="XLinkExpansion",y.INIT_SEGMENT_TYPE="InitializationSegment",y.INDEX_SEGMENT_TYPE="IndexSegment",y.MEDIA_SEGMENT_TYPE="MediaSegment",y.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",y.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",y.DVB_REPORTING_TYPE="DVBReporting",y.LICENSE="license",y.CONTENT_STEERING_TYPE="ContentSteering",y.OTHER_TYPE="other"},3039:function(l,c){function f(y,h){return function(p,E){for(var A,_,I,C=g(p,"tag"),v=g(E??"*","range"),T=[],S=-1;++S<v.length;)if(A=v[S].toLowerCase(),h||A!=="*"){for(_=-1,I=[];++_<C.length;)if(y(C[_].toLowerCase(),A)){if(!h)return C[_];T.push(C[_])}else I.push(C[_]);C=I}return h?T:void 0}}function g(y,h){var p=y&&typeof y=="string"?[y]:y;if(!p||typeof p!="object"||!("length"in p))throw new Error("Invalid "+h+" `"+p+"`, expected non-empty string");return p}c.basicFilter=f((function(y,h){return h==="*"||y===h||y.indexOf(h+"-")>-1}),!0),c.extendedFilter=f((function(y,h){var p=y.split("-"),E=h.split("-"),A=0,_=0;if(E[_]!=="*"&&p[A]!==E[_])return!1;for(A++,_++;_<E.length;)if(E[_]!=="*"){if(!p[A])return!1;if(p[A]!==E[_]){if(p[A].length===1)return!1;A++}else A++,_++}else _++;return!0}),!0),c.lookup=f((function(y,h){for(var p,E=h;;){if(E==="*"||y===E)return!0;if((p=E.lastIndexOf("-"))<0)return!1;E.charAt(p-2)==="-"&&(p-=2),E=E.slice(0,p)}}))},3973:function(l,c,f){l.exports=f(3854)},3854:function(l,c,f){var g=f(2415),y=f(3039),h=f(7778),p=f(5813),E=f(3165),A=f(9460);l.exports=function($,V){var B,ne=V||{},D=g.parse(String($||"").toLowerCase(),ne),X=g.stringify(D),ve=-1;if(!X)return X;for(;++ve<h.length;)y.extendedFilter(X,h[ve].from).length&&(v(D,h[ve].from,h[ve].to),X=g.stringify(D));for(ve=-1;++ve<p.length;)T(D,p[ve].from.field,p[ve].from.value)&&S(D,p[ve].to.field,p[ve].to.value);for(X=g.stringify(Object.assign({},D,C)),ve=-1;++ve<E.length;)X===E[ve]&&(v(D,E[ve],E[ve].split("-").slice(0,-1).join("-")),X=g.stringify(Object.assign({},D,C)));if(D.extensions.sort(O),ne.warning)for(B in A)_.call(A[B],D[B])&&ne.warning("Deprecated "+B+" `"+D[B]+"`, expected one of `"+A[B][D[B]].join("`, `")+"`",null,7);return D.script&&(D.script=D.script.charAt(0).toUpperCase()+D.script.slice(1)),D.region&&(D.region=D.region.toUpperCase()),g.stringify(D)};var _={}.hasOwnProperty,I=new Intl.Collator,C={variants:[],extensions:[],privateuse:[],irregular:null,regular:null};function v($,V,B){var ne,D=g.parse(V),X=g.parse(B),ve=[];for(ne in D)D[ne]&&D[ne].length&&T($,ne,D[ne])&&ve.push(ne);for(ne in X)X[ne]&&X[ne].length&&(ve.indexOf(ne)>-1||!$[ne]||!$[ne].length)&&S($,ne,X[ne])}function T($,V,B){var ne,D,X,ve,ie=!1;if(B){if(D=ne=$[V],ne&&typeof ne=="object")for(D=[],X=-1;++X<ne.length;)ve=ne[X],B.indexOf(ve)<0?D.push(ve):ie=!0;else ne===B&&(D=null,ie=!0);$[V]=D}return ie}function S($,V,B){var ne,D,X,ve=$[V];if(ve&&typeof ve=="object")for(ne=[].concat(B),D=-1;++D<ne.length;)X=ne[D],ve.indexOf(X)<0&&ve.push(X);else $[V]=B}function O($,V){return I.compare($.singleton,V.singleton)}},2415:function(l,c,f){c.parse=f(6903),c.stringify=f(6713)},6903:function(l,c,f){var g=f(2219),y=f(3516),h=f(395),p=f(858),E=f(8589);l.exports=function _(I,C){var v,T,S,O=C||{},$={language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null},V=String(I),B=V.toLowerCase(),ne=0;if(I==null)throw new Error("Expected string, got `"+I+"`");if(A.call(E,B))return(O.normalize==null||O.normalize)&&E[B]?_(E[B]):($[p.indexOf(B)===-1?"irregular":"regular"]=V,$);for(;y(B.charCodeAt(ne))&&ne<9;)ne++;if(ne>1&&ne<9){if($.language=V.slice(0,ne),ne<4)for(T=0;B.charCodeAt(ne)===45&&y(B.charCodeAt(ne+1))&&y(B.charCodeAt(ne+2))&&y(B.charCodeAt(ne+3))&&!y(B.charCodeAt(ne+4));){if(T>2)return D(ne,3,"Too many extended language subtags, expected at most 3 subtags");$.extendedLanguageSubtags.push(V.slice(ne+1,ne+4)),ne+=4,T++}for(B.charCodeAt(ne)===45&&y(B.charCodeAt(ne+1))&&y(B.charCodeAt(ne+2))&&y(B.charCodeAt(ne+3))&&y(B.charCodeAt(ne+4))&&!y(B.charCodeAt(ne+5))&&($.script=V.slice(ne+1,ne+5),ne+=5),B.charCodeAt(ne)===45&&(y(B.charCodeAt(ne+1))&&y(B.charCodeAt(ne+2))&&!y(B.charCodeAt(ne+3))?($.region=V.slice(ne+1,ne+3),ne+=3):h(B.charCodeAt(ne+1))&&h(B.charCodeAt(ne+2))&&h(B.charCodeAt(ne+3))&&!h(B.charCodeAt(ne+4))&&($.region=V.slice(ne+1,ne+4),ne+=4));B.charCodeAt(ne)===45;){for(S=v=ne+1;g(B.charCodeAt(S));){if(S-v>7)return D(S,1,"Too long variant, expected at most 8 characters");S++}if(!(S-v>4||S-v>3&&h(B.charCodeAt(v))))break;$.variants.push(V.slice(v,S)),ne=S}for(;B.charCodeAt(ne)===45&&B.charCodeAt(ne+1)!==120&&g(B.charCodeAt(ne+1))&&B.charCodeAt(ne+2)===45&&g(B.charCodeAt(ne+3));){for(S=ne+2,T=0;B.charCodeAt(S)===45&&g(B.charCodeAt(S+1))&&g(B.charCodeAt(S+2));)for(S=(v=S+1)+2,T++;g(B.charCodeAt(S));){if(S-v>7)return D(S,2,"Too long extension, expected at most 8 characters");S++}if(!T)return D(S,4,"Empty extension, extensions must have at least 2 characters of content");$.extensions.push({singleton:V.charAt(ne+1),extensions:V.slice(ne+3,S).split("-")}),ne=S}}else ne=0;if(ne===0&&B.charCodeAt(ne)===120||B.charCodeAt(ne)===45&&B.charCodeAt(ne+1)===120)for(S=ne=ne?ne+2:1;B.charCodeAt(S)===45&&g(B.charCodeAt(S+1));){for(S=v=ne+1;g(B.charCodeAt(S));){if(S-v>7)return D(S,5,"Too long private-use area, expected at most 8 characters");S++}$.privateuse.push(V.slice(ne+1,S)),ne=S}return ne!==V.length?D(ne,6,"Found superfluous content after tag"):$;function D(X,ve,ie){return O.warning&&O.warning(ie,ve,X),O.forgiving?$:{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}};var A={}.hasOwnProperty},6713:function(l){l.exports=function(c){var f,g,y,h=c||{},p=[];if(h.irregular||h.regular)return h.irregular||h.regular;if(h.language)for(p=p.concat(h.language,h.extendedLanguageSubtags||[],h.script||[],h.region||[],h.variants||[]),f=h.extensions||[],g=-1;++g<f.length;)(y=f[g]).singleton&&y.extensions&&y.extensions.length&&(p=p.concat(y.singleton,y.extensions));return h.privateuse&&h.privateuse.length&&(p=p.concat("x",h.privateuse)),p.join("-")}},1549:function(l,c,f){var g=f(6693),y=f(2165),h=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;c.Buffer=A,c.SlowBuffer=function(M){return+M!=M&&(M=0),A.alloc(+M)},c.INSPECT_MAX_BYTES=50;var p=2147483647;function E(M){if(M>p)throw new RangeError('The value "'+M+'" is invalid for option "size"');var x=new Uint8Array(M);return Object.setPrototypeOf(x,A.prototype),x}function A(M,x,U){if(typeof M=="number"){if(typeof x=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return C(M)}return _(M,x,U)}function _(M,x,U){if(typeof M=="string")return(function(de,ot){if(typeof ot=="string"&&ot!==""||(ot="utf8"),!A.isEncoding(ot))throw new TypeError("Unknown encoding: "+ot);var wt=0|O(de,ot),st=E(wt),nt=st.write(de,ot);return nt!==wt&&(st=st.slice(0,nt)),st})(M,x);if(ArrayBuffer.isView(M))return(function(de){if(Ue(de,Uint8Array)){var ot=new Uint8Array(de);return T(ot.buffer,ot.byteOffset,ot.byteLength)}return v(de)})(M);if(M==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M);if(Ue(M,ArrayBuffer)||M&&Ue(M.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ue(M,SharedArrayBuffer)||M&&Ue(M.buffer,SharedArrayBuffer)))return T(M,x,U);if(typeof M=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var j=M.valueOf&&M.valueOf();if(j!=null&&j!==M)return A.from(j,x,U);var he=(function(de){if(A.isBuffer(de)){var ot=0|S(de.length),wt=E(ot);return wt.length===0||de.copy(wt,0,0,ot),wt}return de.length!==void 0?typeof de.length!="number"||Ve(de.length)?E(0):v(de):de.type==="Buffer"&&Array.isArray(de.data)?v(de.data):void 0})(M);if(he)return he;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof M[Symbol.toPrimitive]=="function")return A.from(M[Symbol.toPrimitive]("string"),x,U);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M)}function I(M){if(typeof M!="number")throw new TypeError('"size" argument must be of type number');if(M<0)throw new RangeError('The value "'+M+'" is invalid for option "size"')}function C(M){return I(M),E(M<0?0:0|S(M))}function v(M){for(var x=M.length<0?0:0|S(M.length),U=E(x),j=0;j<x;j+=1)U[j]=255&M[j];return U}function T(M,x,U){if(x<0||M.byteLength<x)throw new RangeError('"offset" is outside of buffer bounds');if(M.byteLength<x+(U||0))throw new RangeError('"length" is outside of buffer bounds');var j;return j=x===void 0&&U===void 0?new Uint8Array(M):U===void 0?new Uint8Array(M,x):new Uint8Array(M,x,U),Object.setPrototypeOf(j,A.prototype),j}function S(M){if(M>=p)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+p.toString(16)+" bytes");return 0|M}function O(M,x){if(A.isBuffer(M))return M.length;if(ArrayBuffer.isView(M)||Ue(M,ArrayBuffer))return M.byteLength;if(typeof M!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof M);var U=M.length,j=arguments.length>2&&arguments[2]===!0;if(!j&&U===0)return 0;for(var he=!1;;)switch(x){case"ascii":case"latin1":case"binary":return U;case"utf8":case"utf-8":return xt(M).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*U;case"hex":return U>>>1;case"base64":return ht(M).length;default:if(he)return j?-1:xt(M).length;x=(""+x).toLowerCase(),he=!0}}function $(M,x,U){var j=!1;if((x===void 0||x<0)&&(x=0),x>this.length||((U===void 0||U>this.length)&&(U=this.length),U<=0)||(U>>>=0)<=(x>>>=0))return"";for(M||(M="utf8");;)switch(M){case"hex":return et(this,x,U);case"utf8":case"utf-8":return Me(this,x,U);case"ascii":return Ce(this,x,U);case"latin1":case"binary":return Ye(this,x,U);case"base64":return Ne(this,x,U);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Y(this,x,U);default:if(j)throw new TypeError("Unknown encoding: "+M);M=(M+"").toLowerCase(),j=!0}}function V(M,x,U){var j=M[x];M[x]=M[U],M[U]=j}function B(M,x,U,j,he){if(M.length===0)return-1;if(typeof U=="string"?(j=U,U=0):U>2147483647?U=2147483647:U<-2147483648&&(U=-2147483648),Ve(U=+U)&&(U=he?0:M.length-1),U<0&&(U=M.length+U),U>=M.length){if(he)return-1;U=M.length-1}else if(U<0){if(!he)return-1;U=0}if(typeof x=="string"&&(x=A.from(x,j)),A.isBuffer(x))return x.length===0?-1:ne(M,x,U,j,he);if(typeof x=="number")return x&=255,typeof Uint8Array.prototype.indexOf=="function"?he?Uint8Array.prototype.indexOf.call(M,x,U):Uint8Array.prototype.lastIndexOf.call(M,x,U):ne(M,[x],U,j,he);throw new TypeError("val must be string, number or Buffer")}function ne(M,x,U,j,he){var de,ot=1,wt=M.length,st=x.length;if(j!==void 0&&((j=String(j).toLowerCase())==="ucs2"||j==="ucs-2"||j==="utf16le"||j==="utf-16le")){if(M.length<2||x.length<2)return-1;ot=2,wt/=2,st/=2,U/=2}function nt(Wt,$t){return ot===1?Wt[$t]:Wt.readUInt16BE($t*ot)}if(he){var rt=-1;for(de=U;de<wt;de++)if(nt(M,de)===nt(x,rt===-1?0:de-rt)){if(rt===-1&&(rt=de),de-rt+1===st)return rt*ot}else rt!==-1&&(de-=de-rt),rt=-1}else for(U+st>wt&&(U=wt-st),de=U;de>=0;de--){for(var ct=!0,St=0;St<st;St++)if(nt(M,de+St)!==nt(x,St)){ct=!1;break}if(ct)return de}return-1}function D(M,x,U,j){U=Number(U)||0;var he=M.length-U;j?(j=Number(j))>he&&(j=he):j=he;var de=x.length;j>de/2&&(j=de/2);for(var ot=0;ot<j;++ot){var wt=parseInt(x.substr(2*ot,2),16);if(Ve(wt))return ot;M[U+ot]=wt}return ot}function X(M,x,U,j){return It(xt(x,M.length-U),M,U,j)}function ve(M,x,U,j){return It((function(he){for(var de=[],ot=0;ot<he.length;++ot)de.push(255&he.charCodeAt(ot));return de})(x),M,U,j)}function ie(M,x,U,j){return It(ht(x),M,U,j)}function ye(M,x,U,j){return It((function(he,de){for(var ot,wt,st,nt=[],rt=0;rt<he.length&&!((de-=2)<0);++rt)wt=(ot=he.charCodeAt(rt))>>8,st=ot%256,nt.push(st),nt.push(wt);return nt})(x,M.length-U),M,U,j)}function Ne(M,x,U){return x===0&&U===M.length?g.fromByteArray(M):g.fromByteArray(M.slice(x,U))}function Me(M,x,U){U=Math.min(M.length,U);for(var j=[],he=x;he<U;){var de,ot,wt,st,nt=M[he],rt=null,ct=nt>239?4:nt>223?3:nt>191?2:1;if(he+ct<=U)switch(ct){case 1:nt<128&&(rt=nt);break;case 2:(192&(de=M[he+1]))==128&&(st=(31&nt)<<6|63&de)>127&&(rt=st);break;case 3:de=M[he+1],ot=M[he+2],(192&de)==128&&(192&ot)==128&&(st=(15&nt)<<12|(63&de)<<6|63&ot)>2047&&(st<55296||st>57343)&&(rt=st);break;case 4:de=M[he+1],ot=M[he+2],wt=M[he+3],(192&de)==128&&(192&ot)==128&&(192&wt)==128&&(st=(15&nt)<<18|(63&de)<<12|(63&ot)<<6|63&wt)>65535&&st<1114112&&(rt=st)}rt===null?(rt=65533,ct=1):rt>65535&&(rt-=65536,j.push(rt>>>10&1023|55296),rt=56320|1023&rt),j.push(rt),he+=ct}return(function(St){var Wt=St.length;if(Wt<=oe)return String.fromCharCode.apply(String,St);for(var $t="",hn=0;hn<Wt;)$t+=String.fromCharCode.apply(String,St.slice(hn,hn+=oe));return $t})(j)}c.kMaxLength=p,A.TYPED_ARRAY_SUPPORT=(function(){try{var M=new Uint8Array(1),x={foo:function(){return 42}};return Object.setPrototypeOf(x,Uint8Array.prototype),Object.setPrototypeOf(M,x),M.foo()===42}catch{return!1}})(),A.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(A.prototype,"parent",{enumerable:!0,get:function(){if(A.isBuffer(this))return this.buffer}}),Object.defineProperty(A.prototype,"offset",{enumerable:!0,get:function(){if(A.isBuffer(this))return this.byteOffset}}),A.poolSize=8192,A.from=function(M,x,U){return _(M,x,U)},Object.setPrototypeOf(A.prototype,Uint8Array.prototype),Object.setPrototypeOf(A,Uint8Array),A.alloc=function(M,x,U){return(function(j,he,de){return I(j),j<=0?E(j):he!==void 0?typeof de=="string"?E(j).fill(he,de):E(j).fill(he):E(j)})(M,x,U)},A.allocUnsafe=function(M){return C(M)},A.allocUnsafeSlow=function(M){return C(M)},A.isBuffer=function(M){return M!=null&&M._isBuffer===!0&&M!==A.prototype},A.compare=function(M,x){if(Ue(M,Uint8Array)&&(M=A.from(M,M.offset,M.byteLength)),Ue(x,Uint8Array)&&(x=A.from(x,x.offset,x.byteLength)),!A.isBuffer(M)||!A.isBuffer(x))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(M===x)return 0;for(var U=M.length,j=x.length,he=0,de=Math.min(U,j);he<de;++he)if(M[he]!==x[he]){U=M[he],j=x[he];break}return U<j?-1:j<U?1:0},A.isEncoding=function(M){switch(String(M).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},A.concat=function(M,x){if(!Array.isArray(M))throw new TypeError('"list" argument must be an Array of Buffers');if(M.length===0)return A.alloc(0);var U;if(x===void 0)for(x=0,U=0;U<M.length;++U)x+=M[U].length;var j=A.allocUnsafe(x),he=0;for(U=0;U<M.length;++U){var de=M[U];if(Ue(de,Uint8Array))he+de.length>j.length?A.from(de).copy(j,he):Uint8Array.prototype.set.call(j,de,he);else{if(!A.isBuffer(de))throw new TypeError('"list" argument must be an Array of Buffers');de.copy(j,he)}he+=de.length}return j},A.byteLength=O,A.prototype._isBuffer=!0,A.prototype.swap16=function(){var M=this.length;if(M%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var x=0;x<M;x+=2)V(this,x,x+1);return this},A.prototype.swap32=function(){var M=this.length;if(M%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var x=0;x<M;x+=4)V(this,x,x+3),V(this,x+1,x+2);return this},A.prototype.swap64=function(){var M=this.length;if(M%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var x=0;x<M;x+=8)V(this,x,x+7),V(this,x+1,x+6),V(this,x+2,x+5),V(this,x+3,x+4);return this},A.prototype.toString=function(){var M=this.length;return M===0?"":arguments.length===0?Me(this,0,M):$.apply(this,arguments)},A.prototype.toLocaleString=A.prototype.toString,A.prototype.equals=function(M){if(!A.isBuffer(M))throw new TypeError("Argument must be a Buffer");return this===M||A.compare(this,M)===0},A.prototype.inspect=function(){var M="",x=c.INSPECT_MAX_BYTES;return M=this.toString("hex",0,x).replace(/(.{2})/g,"$1 ").trim(),this.length>x&&(M+=" ... "),"<Buffer "+M+">"},h&&(A.prototype[h]=A.prototype.inspect),A.prototype.compare=function(M,x,U,j,he){if(Ue(M,Uint8Array)&&(M=A.from(M,M.offset,M.byteLength)),!A.isBuffer(M))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof M);if(x===void 0&&(x=0),U===void 0&&(U=M?M.length:0),j===void 0&&(j=0),he===void 0&&(he=this.length),x<0||U>M.length||j<0||he>this.length)throw new RangeError("out of range index");if(j>=he&&x>=U)return 0;if(j>=he)return-1;if(x>=U)return 1;if(this===M)return 0;for(var de=(he>>>=0)-(j>>>=0),ot=(U>>>=0)-(x>>>=0),wt=Math.min(de,ot),st=this.slice(j,he),nt=M.slice(x,U),rt=0;rt<wt;++rt)if(st[rt]!==nt[rt]){de=st[rt],ot=nt[rt];break}return de<ot?-1:ot<de?1:0},A.prototype.includes=function(M,x,U){return this.indexOf(M,x,U)!==-1},A.prototype.indexOf=function(M,x,U){return B(this,M,x,U,!0)},A.prototype.lastIndexOf=function(M,x,U){return B(this,M,x,U,!1)},A.prototype.write=function(M,x,U,j){if(x===void 0)j="utf8",U=this.length,x=0;else if(U===void 0&&typeof x=="string")j=x,U=this.length,x=0;else{if(!isFinite(x))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");x>>>=0,isFinite(U)?(U>>>=0,j===void 0&&(j="utf8")):(j=U,U=void 0)}var he=this.length-x;if((U===void 0||U>he)&&(U=he),M.length>0&&(U<0||x<0)||x>this.length)throw new RangeError("Attempt to write outside buffer bounds");j||(j="utf8");for(var de=!1;;)switch(j){case"hex":return D(this,M,x,U);case"utf8":case"utf-8":return X(this,M,x,U);case"ascii":case"latin1":case"binary":return ve(this,M,x,U);case"base64":return ie(this,M,x,U);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye(this,M,x,U);default:if(de)throw new TypeError("Unknown encoding: "+j);j=(""+j).toLowerCase(),de=!0}},A.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var oe=4096;function Ce(M,x,U){var j="";U=Math.min(M.length,U);for(var he=x;he<U;++he)j+=String.fromCharCode(127&M[he]);return j}function Ye(M,x,U){var j="";U=Math.min(M.length,U);for(var he=x;he<U;++he)j+=String.fromCharCode(M[he]);return j}function et(M,x,U){var j=M.length;(!x||x<0)&&(x=0),(!U||U<0||U>j)&&(U=j);for(var he="",de=x;de<U;++de)he+=_t[M[de]];return he}function Y(M,x,U){for(var j=M.slice(x,U),he="",de=0;de<j.length-1;de+=2)he+=String.fromCharCode(j[de]+256*j[de+1]);return he}function Ee(M,x,U){if(M%1!=0||M<0)throw new RangeError("offset is not uint");if(M+x>U)throw new RangeError("Trying to access beyond buffer length")}function Pe(M,x,U,j,he,de){if(!A.isBuffer(M))throw new TypeError('"buffer" argument must be a Buffer instance');if(x>he||x<de)throw new RangeError('"value" argument is out of bounds');if(U+j>M.length)throw new RangeError("Index out of range")}function Xe(M,x,U,j,he,de){if(U+j>M.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("Index out of range")}function Ze(M,x,U,j,he){return x=+x,U>>>=0,he||Xe(M,0,U,4),y.write(M,x,U,j,23,4),U+4}function at(M,x,U,j,he){return x=+x,U>>>=0,he||Xe(M,0,U,8),y.write(M,x,U,j,52,8),U+8}A.prototype.slice=function(M,x){var U=this.length;(M=~~M)<0?(M+=U)<0&&(M=0):M>U&&(M=U),(x=x===void 0?U:~~x)<0?(x+=U)<0&&(x=0):x>U&&(x=U),x<M&&(x=M);var j=this.subarray(M,x);return Object.setPrototypeOf(j,A.prototype),j},A.prototype.readUintLE=A.prototype.readUIntLE=function(M,x,U){M>>>=0,x>>>=0,U||Ee(M,x,this.length);for(var j=this[M],he=1,de=0;++de<x&&(he*=256);)j+=this[M+de]*he;return j},A.prototype.readUintBE=A.prototype.readUIntBE=function(M,x,U){M>>>=0,x>>>=0,U||Ee(M,x,this.length);for(var j=this[M+--x],he=1;x>0&&(he*=256);)j+=this[M+--x]*he;return j},A.prototype.readUint8=A.prototype.readUInt8=function(M,x){return M>>>=0,x||Ee(M,1,this.length),this[M]},A.prototype.readUint16LE=A.prototype.readUInt16LE=function(M,x){return M>>>=0,x||Ee(M,2,this.length),this[M]|this[M+1]<<8},A.prototype.readUint16BE=A.prototype.readUInt16BE=function(M,x){return M>>>=0,x||Ee(M,2,this.length),this[M]<<8|this[M+1]},A.prototype.readUint32LE=A.prototype.readUInt32LE=function(M,x){return M>>>=0,x||Ee(M,4,this.length),(this[M]|this[M+1]<<8|this[M+2]<<16)+16777216*this[M+3]},A.prototype.readUint32BE=A.prototype.readUInt32BE=function(M,x){return M>>>=0,x||Ee(M,4,this.length),16777216*this[M]+(this[M+1]<<16|this[M+2]<<8|this[M+3])},A.prototype.readIntLE=function(M,x,U){M>>>=0,x>>>=0,U||Ee(M,x,this.length);for(var j=this[M],he=1,de=0;++de<x&&(he*=256);)j+=this[M+de]*he;return j>=(he*=128)&&(j-=Math.pow(2,8*x)),j},A.prototype.readIntBE=function(M,x,U){M>>>=0,x>>>=0,U||Ee(M,x,this.length);for(var j=x,he=1,de=this[M+--j];j>0&&(he*=256);)de+=this[M+--j]*he;return de>=(he*=128)&&(de-=Math.pow(2,8*x)),de},A.prototype.readInt8=function(M,x){return M>>>=0,x||Ee(M,1,this.length),128&this[M]?-1*(255-this[M]+1):this[M]},A.prototype.readInt16LE=function(M,x){M>>>=0,x||Ee(M,2,this.length);var U=this[M]|this[M+1]<<8;return 32768&U?4294901760|U:U},A.prototype.readInt16BE=function(M,x){M>>>=0,x||Ee(M,2,this.length);var U=this[M+1]|this[M]<<8;return 32768&U?4294901760|U:U},A.prototype.readInt32LE=function(M,x){return M>>>=0,x||Ee(M,4,this.length),this[M]|this[M+1]<<8|this[M+2]<<16|this[M+3]<<24},A.prototype.readInt32BE=function(M,x){return M>>>=0,x||Ee(M,4,this.length),this[M]<<24|this[M+1]<<16|this[M+2]<<8|this[M+3]},A.prototype.readFloatLE=function(M,x){return M>>>=0,x||Ee(M,4,this.length),y.read(this,M,!0,23,4)},A.prototype.readFloatBE=function(M,x){return M>>>=0,x||Ee(M,4,this.length),y.read(this,M,!1,23,4)},A.prototype.readDoubleLE=function(M,x){return M>>>=0,x||Ee(M,8,this.length),y.read(this,M,!0,52,8)},A.prototype.readDoubleBE=function(M,x){return M>>>=0,x||Ee(M,8,this.length),y.read(this,M,!1,52,8)},A.prototype.writeUintLE=A.prototype.writeUIntLE=function(M,x,U,j){M=+M,x>>>=0,U>>>=0,j||Pe(this,M,x,U,Math.pow(2,8*U)-1,0);var he=1,de=0;for(this[x]=255&M;++de<U&&(he*=256);)this[x+de]=M/he&255;return x+U},A.prototype.writeUintBE=A.prototype.writeUIntBE=function(M,x,U,j){M=+M,x>>>=0,U>>>=0,j||Pe(this,M,x,U,Math.pow(2,8*U)-1,0);var he=U-1,de=1;for(this[x+he]=255&M;--he>=0&&(de*=256);)this[x+he]=M/de&255;return x+U},A.prototype.writeUint8=A.prototype.writeUInt8=function(M,x,U){return M=+M,x>>>=0,U||Pe(this,M,x,1,255,0),this[x]=255&M,x+1},A.prototype.writeUint16LE=A.prototype.writeUInt16LE=function(M,x,U){return M=+M,x>>>=0,U||Pe(this,M,x,2,65535,0),this[x]=255&M,this[x+1]=M>>>8,x+2},A.prototype.writeUint16BE=A.prototype.writeUInt16BE=function(M,x,U){return M=+M,x>>>=0,U||Pe(this,M,x,2,65535,0),this[x]=M>>>8,this[x+1]=255&M,x+2},A.prototype.writeUint32LE=A.prototype.writeUInt32LE=function(M,x,U){return M=+M,x>>>=0,U||Pe(this,M,x,4,4294967295,0),this[x+3]=M>>>24,this[x+2]=M>>>16,this[x+1]=M>>>8,this[x]=255&M,x+4},A.prototype.writeUint32BE=A.prototype.writeUInt32BE=function(M,x,U){return M=+M,x>>>=0,U||Pe(this,M,x,4,4294967295,0),this[x]=M>>>24,this[x+1]=M>>>16,this[x+2]=M>>>8,this[x+3]=255&M,x+4},A.prototype.writeIntLE=function(M,x,U,j){if(M=+M,x>>>=0,!j){var he=Math.pow(2,8*U-1);Pe(this,M,x,U,he-1,-he)}var de=0,ot=1,wt=0;for(this[x]=255&M;++de<U&&(ot*=256);)M<0&&wt===0&&this[x+de-1]!==0&&(wt=1),this[x+de]=(M/ot>>0)-wt&255;return x+U},A.prototype.writeIntBE=function(M,x,U,j){if(M=+M,x>>>=0,!j){var he=Math.pow(2,8*U-1);Pe(this,M,x,U,he-1,-he)}var de=U-1,ot=1,wt=0;for(this[x+de]=255&M;--de>=0&&(ot*=256);)M<0&&wt===0&&this[x+de+1]!==0&&(wt=1),this[x+de]=(M/ot>>0)-wt&255;return x+U},A.prototype.writeInt8=function(M,x,U){return M=+M,x>>>=0,U||Pe(this,M,x,1,127,-128),M<0&&(M=255+M+1),this[x]=255&M,x+1},A.prototype.writeInt16LE=function(M,x,U){return M=+M,x>>>=0,U||Pe(this,M,x,2,32767,-32768),this[x]=255&M,this[x+1]=M>>>8,x+2},A.prototype.writeInt16BE=function(M,x,U){return M=+M,x>>>=0,U||Pe(this,M,x,2,32767,-32768),this[x]=M>>>8,this[x+1]=255&M,x+2},A.prototype.writeInt32LE=function(M,x,U){return M=+M,x>>>=0,U||Pe(this,M,x,4,2147483647,-2147483648),this[x]=255&M,this[x+1]=M>>>8,this[x+2]=M>>>16,this[x+3]=M>>>24,x+4},A.prototype.writeInt32BE=function(M,x,U){return M=+M,x>>>=0,U||Pe(this,M,x,4,2147483647,-2147483648),M<0&&(M=4294967295+M+1),this[x]=M>>>24,this[x+1]=M>>>16,this[x+2]=M>>>8,this[x+3]=255&M,x+4},A.prototype.writeFloatLE=function(M,x,U){return Ze(this,M,x,!0,U)},A.prototype.writeFloatBE=function(M,x,U){return Ze(this,M,x,!1,U)},A.prototype.writeDoubleLE=function(M,x,U){return at(this,M,x,!0,U)},A.prototype.writeDoubleBE=function(M,x,U){return at(this,M,x,!1,U)},A.prototype.copy=function(M,x,U,j){if(!A.isBuffer(M))throw new TypeError("argument should be a Buffer");if(U||(U=0),j||j===0||(j=this.length),x>=M.length&&(x=M.length),x||(x=0),j>0&&j<U&&(j=U),j===U||M.length===0||this.length===0)return 0;if(x<0)throw new RangeError("targetStart out of bounds");if(U<0||U>=this.length)throw new RangeError("Index out of range");if(j<0)throw new RangeError("sourceEnd out of bounds");j>this.length&&(j=this.length),M.length-x<j-U&&(j=M.length-x+U);var he=j-U;return this===M&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(x,U,j):Uint8Array.prototype.set.call(M,this.subarray(U,j),x),he},A.prototype.fill=function(M,x,U,j){if(typeof M=="string"){if(typeof x=="string"?(j=x,x=0,U=this.length):typeof U=="string"&&(j=U,U=this.length),j!==void 0&&typeof j!="string")throw new TypeError("encoding must be a string");if(typeof j=="string"&&!A.isEncoding(j))throw new TypeError("Unknown encoding: "+j);if(M.length===1){var he=M.charCodeAt(0);(j==="utf8"&&he<128||j==="latin1")&&(M=he)}}else typeof M=="number"?M&=255:typeof M=="boolean"&&(M=Number(M));if(x<0||this.length<x||this.length<U)throw new RangeError("Out of range index");if(U<=x)return this;var de;if(x>>>=0,U=U===void 0?this.length:U>>>0,M||(M=0),typeof M=="number")for(de=x;de<U;++de)this[de]=M;else{var ot=A.isBuffer(M)?M:A.from(M,j),wt=ot.length;if(wt===0)throw new TypeError('The value "'+M+'" is invalid for argument "value"');for(de=0;de<U-x;++de)this[de+x]=ot[de%wt]}return this};var jt=/[^+/0-9A-Za-z-_]/g;function xt(M,x){var U;x=x||1/0;for(var j=M.length,he=null,de=[],ot=0;ot<j;++ot){if((U=M.charCodeAt(ot))>55295&&U<57344){if(!he){if(U>56319){(x-=3)>-1&&de.push(239,191,189);continue}if(ot+1===j){(x-=3)>-1&&de.push(239,191,189);continue}he=U;continue}if(U<56320){(x-=3)>-1&&de.push(239,191,189),he=U;continue}U=65536+(he-55296<<10|U-56320)}else he&&(x-=3)>-1&&de.push(239,191,189);if(he=null,U<128){if((x-=1)<0)break;de.push(U)}else if(U<2048){if((x-=2)<0)break;de.push(U>>6|192,63&U|128)}else if(U<65536){if((x-=3)<0)break;de.push(U>>12|224,U>>6&63|128,63&U|128)}else{if(!(U<1114112))throw new Error("Invalid code point");if((x-=4)<0)break;de.push(U>>18|240,U>>12&63|128,U>>6&63|128,63&U|128)}}return de}function ht(M){return g.toByteArray((function(x){if((x=(x=x.split("=")[0]).trim().replace(jt,"")).length<2)return"";for(;x.length%4!=0;)x+="=";return x})(M))}function It(M,x,U,j){for(var he=0;he<j&&!(he+U>=x.length||he>=M.length);++he)x[he+U]=M[he];return he}function Ue(M,x){return M instanceof x||M!=null&&M.constructor!=null&&M.constructor.name!=null&&M.constructor.name===x.name}function Ve(M){return M!=M}var _t=(function(){for(var M="0123456789abcdef",x=new Array(256),U=0;U<16;++U)for(var j=16*U,he=0;he<16;++he)x[j+he]=M[U]+M[he];return x})()},6693:function(l,c){c.byteLength=function(I){var C=A(I),v=C[0],T=C[1];return 3*(v+T)/4-T},c.toByteArray=function(I){var C,v,T=A(I),S=T[0],O=T[1],$=new y((function(ne,D,X){return 3*(D+X)/4-X})(0,S,O)),V=0,B=O>0?S-4:S;for(v=0;v<B;v+=4)C=g[I.charCodeAt(v)]<<18|g[I.charCodeAt(v+1)]<<12|g[I.charCodeAt(v+2)]<<6|g[I.charCodeAt(v+3)],$[V++]=C>>16&255,$[V++]=C>>8&255,$[V++]=255&C;return O===2&&(C=g[I.charCodeAt(v)]<<2|g[I.charCodeAt(v+1)]>>4,$[V++]=255&C),O===1&&(C=g[I.charCodeAt(v)]<<10|g[I.charCodeAt(v+1)]<<4|g[I.charCodeAt(v+2)]>>2,$[V++]=C>>8&255,$[V++]=255&C),$},c.fromByteArray=function(I){for(var C,v=I.length,T=v%3,S=[],O=16383,$=0,V=v-T;$<V;$+=O)S.push(_(I,$,$+O>V?V:$+O));return T===1?(C=I[v-1],S.push(f[C>>2]+f[C<<4&63]+"==")):T===2&&(C=(I[v-2]<<8)+I[v-1],S.push(f[C>>10]+f[C>>4&63]+f[C<<2&63]+"=")),S.join("")};for(var f=[],g=[],y=typeof Uint8Array<"u"?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,E=h.length;p<E;++p)f[p]=h[p],g[h.charCodeAt(p)]=p;function A(I){var C=I.length;if(C%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=I.indexOf("=");return v===-1&&(v=C),[v,v===C?0:4-v%4]}function _(I,C,v){for(var T,S,O=[],$=C;$<v;$+=3)T=(I[$]<<16&16711680)+(I[$+1]<<8&65280)+(255&I[$+2]),O.push(f[(S=T)>>18&63]+f[S>>12&63]+f[S>>6&63]+f[63&S]);return O.join("")}g[45]=62,g[95]=63},2165:function(l,c){c.read=function(f,g,y,h,p){var E,A,_=8*p-h-1,I=(1<<_)-1,C=I>>1,v=-7,T=y?p-1:0,S=y?-1:1,O=f[g+T];for(T+=S,E=O&(1<<-v)-1,O>>=-v,v+=_;v>0;E=256*E+f[g+T],T+=S,v-=8);for(A=E&(1<<-v)-1,E>>=-v,v+=h;v>0;A=256*A+f[g+T],T+=S,v-=8);if(E===0)E=1-C;else{if(E===I)return A?NaN:1/0*(O?-1:1);A+=Math.pow(2,h),E-=C}return(O?-1:1)*A*Math.pow(2,E-h)},c.write=function(f,g,y,h,p,E){var A,_,I,C=8*E-p-1,v=(1<<C)-1,T=v>>1,S=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,O=h?0:E-1,$=h?1:-1,V=g<0||g===0&&1/g<0?1:0;for(g=Math.abs(g),isNaN(g)||g===1/0?(_=isNaN(g)?1:0,A=v):(A=Math.floor(Math.log(g)/Math.LN2),g*(I=Math.pow(2,-A))<1&&(A--,I*=2),(g+=A+T>=1?S/I:S*Math.pow(2,1-T))*I>=2&&(A++,I/=2),A+T>=v?(_=0,A=v):A+T>=1?(_=(g*I-1)*Math.pow(2,p),A+=T):(_=g*Math.pow(2,T-1)*Math.pow(2,p),A=0));p>=8;f[y+O]=255&_,O+=$,_/=256,p-=8);for(A=A<<p|_,C+=p;C>0;f[y+O]=255&A,O+=$,A/=256,C-=8);f[y+O-$]|=128*V}},6934:function(l,c){var f={parseBuffer:function(h){return new g(h).parse()},addBoxProcessor:function(h,p){typeof h=="string"&&typeof p=="function"&&(y.prototype._boxProcessors[h]=p)},createFile:function(){return new g},createBox:function(h,p,E){var A=y.create(h);return p&&p.append(A,E),A},createFullBox:function(h,p,E){var A=f.createBox(h,p,E);return A.version=0,A.flags=0,A},Utils:{}};f.Utils.dataViewToString=function(h,p){var E=p||"utf-8";if(typeof TextDecoder<"u")return new TextDecoder(E).decode(h);var A=[],_=0;if(E==="utf-8")for(;_<h.byteLength;){var I=h.getUint8(_++);I<128||(I<224?(I=(31&I)<<6,I|=63&h.getUint8(_++)):I<240?(I=(15&I)<<12,I|=(63&h.getUint8(_++))<<6,I|=63&h.getUint8(_++)):(I=(7&I)<<18,I|=(63&h.getUint8(_++))<<12,I|=(63&h.getUint8(_++))<<6,I|=63&h.getUint8(_++))),A.push(String.fromCharCode(I))}else for(;_<h.byteLength;)A.push(String.fromCharCode(h.getUint8(_++)));return A.join("")},f.Utils.utf8ToByteArray=function(h){var p,E;if(typeof TextEncoder<"u")p=new TextEncoder().encode(h);else for(p=[],E=0;E<h.length;++E){var A=h.charCodeAt(E);A<128?p.push(A):A<2048?(p.push(192|A>>6),p.push(128|63&A)):A<65536?(p.push(224|A>>12),p.push(128|63&A>>6),p.push(128|63&A)):(p.push(240|A>>18),p.push(128|63&A>>12),p.push(128|63&A>>6),p.push(128|63&A))}return p},f.Utils.appendBox=function(h,p,E){if(p._offset=h._cursor.offset,p._root=h._root?h._root:h,p._raw=h._raw,p._parent=h,E!==-1)if(E!=null){var A,_=-1;if(typeof E=="number")_=E;else{if(typeof E=="string")A=E;else{if(typeof E!="object"||!E.type)return void h.boxes.push(p);A=E.type}for(var I=0;I<h.boxes.length;I++)if(A===h.boxes[I].type){_=I+1;break}}h.boxes.splice(_,0,p)}else h.boxes.push(p)},c.parseBuffer=f.parseBuffer,c.addBoxProcessor=f.addBoxProcessor,c.createFile=f.createFile,c.createBox=f.createBox,c.createFullBox=f.createFullBox,c.Utils=f.Utils,f.Cursor=function(h){this.offset=h===void 0?0:h};var g=function(h){this._cursor=new f.Cursor,this.boxes=[],h&&(this._raw=new DataView(h))};g.prototype.fetch=function(h){var p=this.fetchAll(h,!0);return p.length?p[0]:null},g.prototype.fetchAll=function(h,p){var E=[];return g._sweep.call(this,h,E,p),E},g.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var h=y.parse(this);if(h.type===void 0)break;this.boxes.push(h)}return this},g._sweep=function(h,p,E){for(var A in this.type&&this.type==h&&p.push(this),this.boxes){if(p.length&&E)return;g._sweep.call(this.boxes[A],h,p,E)}},g.prototype.write=function(){var h,p=0;for(h=0;h<this.boxes.length;h++)p+=this.boxes[h].getLength(!1);var E=new Uint8Array(p);for(this._rawo=new DataView(E.buffer),this.bytes=E,this._cursor.offset=0,h=0;h<this.boxes.length;h++)this.boxes[h].write();return E.buffer},g.prototype.append=function(h,p){f.Utils.appendBox(this,h,p)};var y=function(){this._cursor=new f.Cursor};y.parse=function(h){var p=new y;return p._offset=h._cursor.offset,p._root=h._root?h._root:h,p._raw=h._raw,p._parent=h,p._parseBox(),h._cursor.offset=p._raw.byteOffset+p._raw.byteLength,p},y.create=function(h){var p=new y;return p.type=h,p.boxes=[],p},y.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],y.prototype._boxProcessors={},y.prototype._procField=function(h,p,E){this._parsing?this[h]=this._readField(p,E):this._writeField(p,E,this[h])},y.prototype._procFieldArray=function(h,p,E,A){var _;if(this._parsing)for(this[h]=[],_=0;_<p;_++)this[h][_]=this._readField(E,A);else for(_=0;_<this[h].length;_++)this._writeField(E,A,this[h][_])},y.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},y.prototype._procEntries=function(h,p,E){var A;if(this._parsing)for(this[h]=[],A=0;A<p;A++)this[h].push({}),E.call(this,this[h][A]);else for(A=0;A<p;A++)E.call(this,this[h][A])},y.prototype._procSubEntries=function(h,p,E,A){var _;if(this._parsing)for(h[p]=[],_=0;_<E;_++)h[p].push({}),A.call(this,h[p][_]);else for(_=0;_<E;_++)A.call(this,h[p][_])},y.prototype._procEntryField=function(h,p,E,A){this._parsing?h[p]=this._readField(E,A):this._writeField(E,A,h[p])},y.prototype._procSubBoxes=function(h,p){var E;if(this._parsing)for(this[h]=[],E=0;E<p;E++)this[h].push(y.parse(this));else for(E=0;E<p;E++)this._rawo?this[h][E].write():this.size+=this[h][E].getLength()},y.prototype._readField=function(h,p){switch(h){case"uint":return this._readUint(p);case"int":return this._readInt(p);case"template":return this._readTemplate(p);case"string":return p===-1?this._readTerminatedString():this._readString(p);case"data":return this._readData(p);case"utf8":return this._readUTF8String();default:return-1}},y.prototype._readInt=function(h){var p=null,E=this._cursor.offset-this._raw.byteOffset;switch(h){case 8:p=this._raw.getInt8(E);break;case 16:p=this._raw.getInt16(E);break;case 32:p=this._raw.getInt32(E);break;case 64:var A=this._raw.getInt32(E),_=this._raw.getInt32(E+4);p=A*Math.pow(2,32)+_}return this._cursor.offset+=h>>3,p},y.prototype._readUint=function(h){var p,E,A=null,_=this._cursor.offset-this._raw.byteOffset;switch(h){case 8:A=this._raw.getUint8(_);break;case 16:A=this._raw.getUint16(_);break;case 24:A=((p=this._raw.getUint16(_))<<8)+(E=this._raw.getUint8(_+2));break;case 32:A=this._raw.getUint32(_);break;case 64:p=this._raw.getUint32(_),E=this._raw.getUint32(_+4),A=p*Math.pow(2,32)+E}return this._cursor.offset+=h>>3,A},y.prototype._readString=function(h){for(var p="",E=0;E<h;E++){var A=this._readUint(8);p+=String.fromCharCode(A)}return p},y.prototype._readTemplate=function(h){return this._readUint(h/2)+this._readUint(h/2)/Math.pow(2,h/2)},y.prototype._readTerminatedString=function(){for(var h="";this._cursor.offset-this._offset<this._raw.byteLength;){var p=this._readUint(8);if(p===0)break;h+=String.fromCharCode(p)}return h},y.prototype._readData=function(h){var p=h>0?h:this._raw.byteLength-(this._cursor.offset-this._offset);if(p>0){var E=new Uint8Array(this._raw.buffer,this._cursor.offset,p);return this._cursor.offset+=p,E}return null},y.prototype._readUTF8String=function(){var h=this._raw.byteLength-(this._cursor.offset-this._offset),p=null;return h>0&&(p=new DataView(this._raw.buffer,this._cursor.offset,h),this._cursor.offset+=h),p&&f.Utils.dataViewToString(p)},y.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1?this._parseContainerBox():this._data=this._readData())}},y.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},y.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(y.parse(this))},y.prototype.append=function(h,p){f.Utils.appendBox(this,h,p)},y.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var h=0;h<this.boxes.length;h++)this.size+=this.boxes[h].getLength();return this._data&&this._writeData(this._data),this.size},y.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var h=0;h<this.boxes.length;h++)this.boxes[h].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},y.prototype._writeInt=function(h,p){if(this._rawo){var E=this._cursor.offset-this._rawo.byteOffset;switch(h){case 8:this._rawo.setInt8(E,p);break;case 16:this._rawo.setInt16(E,p);break;case 32:this._rawo.setInt32(E,p);break;case 64:var A=Math.floor(p/Math.pow(2,32)),_=p-A*Math.pow(2,32);this._rawo.setUint32(E,A),this._rawo.setUint32(E+4,_)}this._cursor.offset+=h>>3}else this.size+=h>>3},y.prototype._writeUint=function(h,p){if(this._rawo){var E,A,_=this._cursor.offset-this._rawo.byteOffset;switch(h){case 8:this._rawo.setUint8(_,p);break;case 16:this._rawo.setUint16(_,p);break;case 24:E=(16776960&p)>>8,A=255&p,this._rawo.setUint16(_,E),this._rawo.setUint8(_+2,A);break;case 32:this._rawo.setUint32(_,p);break;case 64:A=p-(E=Math.floor(p/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(_,E),this._rawo.setUint32(_+4,A)}this._cursor.offset+=h>>3}else this.size+=h>>3},y.prototype._writeString=function(h,p){for(var E=0;E<h;E++)this._writeUint(8,p.charCodeAt(E))},y.prototype._writeTerminatedString=function(h){if(h.length!==0){for(var p=0;p<h.length;p++)this._writeUint(8,h.charCodeAt(p));this._writeUint(8,0)}},y.prototype._writeTemplate=function(h,p){var E=Math.floor(p),A=(p-E)*Math.pow(2,h/2);this._writeUint(h/2,E),this._writeUint(h/2,A)},y.prototype._writeData=function(h){if(h)if(this._rawo){if(h instanceof Array){for(var p=this._cursor.offset-this._rawo.byteOffset,E=0;E<h.length;E++)this._rawo.setInt8(p+E,h[E]);this._cursor.offset+=h.length}h instanceof Uint8Array&&(this._root.bytes.set(h,this._cursor.offset),this._cursor.offset+=h.length)}else this.size+=h.length},y.prototype._writeUTF8String=function(h){var p=f.Utils.utf8ToByteArray(h);if(this._rawo)for(var E=new DataView(this._rawo.buffer,this._cursor.offset,p.length),A=0;A<p.length;A++)E.setUint8(A,p[A]);else this.size+=p.length},y.prototype._writeField=function(h,p,E){switch(h){case"uint":this._writeUint(p,E);break;case"int":this._writeInt(p,E);break;case"template":this._writeTemplate(p,E);break;case"string":p==-1?this._writeTerminatedString(E):this._writeString(p,E);break;case"data":this._writeData(E);break;case"utf8":this._writeUTF8String(E)}},y.prototype._boxProcessors.avc1=y.prototype._boxProcessors.avc2=y.prototype._boxProcessors.avc3=y.prototype._boxProcessors.avc4=y.prototype._boxProcessors.hvc1=y.prototype._boxProcessors.hev1=y.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},y.prototype._boxProcessors.ctts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(h){this._procEntryField(h,"sample_count","uint",32),this._procEntryField(h,"sample_offset",this.version===1?"int":"uint",32)}))},y.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},y.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(h){this._procEntryField(h,"segment_duration","uint",this.version===1?64:32),this._procEntryField(h,"media_time","int",this.version===1?64:32),this._procEntryField(h,"media_rate_integer","int",16),this._procEntryField(h,"media_rate_fraction","int",16)}))},y.prototype._boxProcessors.emsg=function(){this._procFullBox(),this.version==1?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},y.prototype._boxProcessors.free=y.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},y.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},y.prototype._boxProcessors.ftyp=y.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var h=-1;this._parsing&&(h=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",h,"string",4)},y.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},y.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},y.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._parsing||typeof this.language!="string"||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},y.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",this.version==1?64:32)},y.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},y.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},y.prototype._boxProcessors.mp4a=y.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},y.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},y.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},y.prototype._boxProcessors.prft=function(){this._procFullBox(),this._procField("reference_track_ID","uint",32),this._procField("ntp_timestamp_sec","uint",32),this._procField("ntp_timestamp_frac","uint",32),this._procField("media_time","uint",this.version==1?64:32)},y.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},y.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},y.prototype._boxProcessors.sdtp=function(){this._procFullBox();var h=-1;this._parsing&&(h=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",h,"uint",8)},y.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",this.version==1?64:32),this._procField("first_offset","uint",this.version==1?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,(function(h){this._parsing||(h.reference=(1&h.reference_type)<<31,h.reference|=2147483647&h.referenced_size,h.sap=(1&h.starts_with_SAP)<<31,h.sap|=(3&h.SAP_type)<<28,h.sap|=268435455&h.SAP_delta_time),this._procEntryField(h,"reference","uint",32),this._procEntryField(h,"subsegment_duration","uint",32),this._procEntryField(h,"sap","uint",32),this._parsing&&(h.reference_type=h.reference>>31&1,h.referenced_size=2147483647&h.reference,h.starts_with_SAP=h.sap>>31&1,h.SAP_type=h.sap>>28&7,h.SAP_delta_time=268435455&h.sap)}))},y.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},y.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,(function(h){this._procEntryField(h,"ranges_count","uint",32),this._procSubEntries(h,"ranges",h.ranges_count,(function(p){this._procEntryField(p,"level","uint",8),this._procEntryField(p,"range_size","uint",24)}))}))},y.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},y.prototype._boxProcessors.sttg=function(){this._procField("settings","utf8")},y.prototype._boxProcessors.stts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(h){this._procEntryField(h,"sample_count","uint",32),this._procEntryField(h,"sample_delta","uint",32)}))},y.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(h){this._procEntryField(h,"sample_delta","uint",32),this._procEntryField(h,"subsample_count","uint",16),this._procSubEntries(h,"subsamples",h.subsample_count,(function(p){this._procEntryField(p,"subsample_size","uint",this.version===1?32:16),this._procEntryField(p,"subsample_priority","uint",8),this._procEntryField(p,"discardable","uint",8),this._procEntryField(p,"codec_specific_parameters","uint",32)}))}))},y.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},y.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",this.version==1?64:32)},y.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},y.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,(function(h){this._procEntryField(h,"time","uint",this.version===1?64:32),this._procEntryField(h,"moof_offset","uint",this.version===1?64:32),this._procEntryField(h,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(h,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(h,"sample_number","uint",8*(this.length_size_of_sample_num+1))}))},y.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},y.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},y.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,(function(h){256&this.flags&&this._procEntryField(h,"sample_duration","uint",32),512&this.flags&&this._procEntryField(h,"sample_size","uint",32),1024&this.flags&&this._procEntryField(h,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(h,"sample_composition_time_offset",this.version===1?"int":"uint",32)}))},y.prototype._boxProcessors["url "]=y.prototype._boxProcessors["urn "]=function(){this._procFullBox(),this.type==="urn "&&this._procField("name","string",-1),this._procField("location","string",-1)},y.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},y.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},y.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},y.prototype._boxProcessors.vtte=function(){}},5530:function(l,c,f){l.exports=f(6146).polyfill()},6146:function(l,c,f){l.exports=(function(){function g(ht){return typeof ht=="function"}var y=Array.isArray?Array.isArray:function(ht){return Object.prototype.toString.call(ht)==="[object Array]"},h=0,p=void 0,E=void 0,A=function(ht,It){O[h]=ht,O[h+1]=It,(h+=2)===2&&(E?E($):X())},_=typeof window<"u"?window:void 0,I=_||{},C=I.MutationObserver||I.WebKitMutationObserver,v=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",T=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function S(){var ht=setTimeout;return function(){return ht($,1)}}var O=new Array(1e3);function $(){for(var ht=0;ht<h;ht+=2)(0,O[ht])(O[ht+1]),O[ht]=void 0,O[ht+1]=void 0;h=0}var V,B,ne,D,X=void 0;function ve(ht,It){var Ue=this,Ve=new this.constructor(Ne);Ve[ye]===void 0&&at(Ve);var _t=Ue._state;if(_t){var M=arguments[_t-1];A((function(){return Xe(_t,Ve,M,Ue._result)}))}else Ee(Ue,Ve,ht,It);return Ve}function ie(ht){if(ht&&typeof ht=="object"&&ht.constructor===this)return ht;var It=new this(Ne);return Ce(It,ht),It}X=v?function(){return process.nextTick($)}:C?(B=0,ne=new C($),D=document.createTextNode(""),ne.observe(D,{characterData:!0}),function(){D.data=B=++B%2}):T?((V=new MessageChannel).port1.onmessage=$,function(){return V.port2.postMessage(0)}):_===void 0?(function(){try{var ht=Function("return this")().require("vertx");return(p=ht.runOnLoop||ht.runOnContext)!==void 0?function(){p($)}:S()}catch{return S()}})():S();var ye=Math.random().toString(36).substring(2);function Ne(){}var Me=void 0;function oe(ht,It,Ue){It.constructor===ht.constructor&&Ue===ve&&It.constructor.resolve===ie?(function(Ve,_t){_t._state===1?et(Ve,_t._result):_t._state===2?Y(Ve,_t._result):Ee(_t,void 0,(function(M){return Ce(Ve,M)}),(function(M){return Y(Ve,M)}))})(ht,It):Ue===void 0?et(ht,It):g(Ue)?(function(Ve,_t,M){A((function(x){var U=!1,j=(function(he,de,ot,wt){try{he.call(de,ot,wt)}catch(st){return st}})(M,_t,(function(he){U||(U=!0,_t!==he?Ce(x,he):et(x,he))}),(function(he){U||(U=!0,Y(x,he))}),x._label);!U&&j&&(U=!0,Y(x,j))}),Ve)})(ht,It,Ue):et(ht,It)}function Ce(ht,It){if(ht===It)Y(ht,new TypeError("You cannot resolve a promise with itself"));else if(_t=typeof(Ve=It),Ve===null||_t!=="object"&&_t!=="function")et(ht,It);else{var Ue=void 0;try{Ue=It.then}catch(M){return void Y(ht,M)}oe(ht,It,Ue)}var Ve,_t}function Ye(ht){ht._onerror&&ht._onerror(ht._result),Pe(ht)}function et(ht,It){ht._state===Me&&(ht._result=It,ht._state=1,ht._subscribers.length!==0&&A(Pe,ht))}function Y(ht,It){ht._state===Me&&(ht._state=2,ht._result=It,A(Ye,ht))}function Ee(ht,It,Ue,Ve){var _t=ht._subscribers,M=_t.length;ht._onerror=null,_t[M]=It,_t[M+1]=Ue,_t[M+2]=Ve,M===0&&ht._state&&A(Pe,ht)}function Pe(ht){var It=ht._subscribers,Ue=ht._state;if(It.length!==0){for(var Ve=void 0,_t=void 0,M=ht._result,x=0;x<It.length;x+=3)Ve=It[x],_t=It[x+Ue],Ve?Xe(Ue,Ve,_t,M):_t(M);ht._subscribers.length=0}}function Xe(ht,It,Ue,Ve){var _t=g(Ue),M=void 0,x=void 0,U=!0;if(_t){try{M=Ue(Ve)}catch(j){U=!1,x=j}if(It===M)return void Y(It,new TypeError("A promises callback cannot return that same promise."))}else M=Ve;It._state!==Me||(_t&&U?Ce(It,M):U===!1?Y(It,x):ht===1?et(It,M):ht===2&&Y(It,M))}var Ze=0;function at(ht){ht[ye]=Ze++,ht._state=void 0,ht._result=void 0,ht._subscribers=[]}var jt=(function(){function ht(It,Ue){this._instanceConstructor=It,this.promise=new It(Ne),this.promise[ye]||at(this.promise),y(Ue)?(this.length=Ue.length,this._remaining=Ue.length,this._result=new Array(this.length),this.length===0?et(this.promise,this._result):(this.length=this.length||0,this._enumerate(Ue),this._remaining===0&&et(this.promise,this._result))):Y(this.promise,new Error("Array Methods must be provided an Array"))}return ht.prototype._enumerate=function(It){for(var Ue=0;this._state===Me&&Ue<It.length;Ue++)this._eachEntry(It[Ue],Ue)},ht.prototype._eachEntry=function(It,Ue){var Ve=this._instanceConstructor,_t=Ve.resolve;if(_t===ie){var M=void 0,x=void 0,U=!1;try{M=It.then}catch(he){U=!0,x=he}if(M===ve&&It._state!==Me)this._settledAt(It._state,Ue,It._result);else if(typeof M!="function")this._remaining--,this._result[Ue]=It;else if(Ve===xt){var j=new Ve(Ne);U?Y(j,x):oe(j,It,M),this._willSettleAt(j,Ue)}else this._willSettleAt(new Ve((function(he){return he(It)})),Ue)}else this._willSettleAt(_t(It),Ue)},ht.prototype._settledAt=function(It,Ue,Ve){var _t=this.promise;_t._state===Me&&(this._remaining--,It===2?Y(_t,Ve):this._result[Ue]=Ve),this._remaining===0&&et(_t,this._result)},ht.prototype._willSettleAt=function(It,Ue){var Ve=this;Ee(It,void 0,(function(_t){return Ve._settledAt(1,Ue,_t)}),(function(_t){return Ve._settledAt(2,Ue,_t)}))},ht})(),xt=(function(){function ht(It){this[ye]=Ze++,this._result=this._state=void 0,this._subscribers=[],Ne!==It&&(typeof It!="function"&&(function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")})(),this instanceof ht?(function(Ue,Ve){try{Ve((function(_t){Ce(Ue,_t)}),(function(_t){Y(Ue,_t)}))}catch(_t){Y(Ue,_t)}})(this,It):(function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")})())}return ht.prototype.catch=function(It){return this.then(null,It)},ht.prototype.finally=function(It){var Ue=this,Ve=Ue.constructor;return g(It)?Ue.then((function(_t){return Ve.resolve(It()).then((function(){return _t}))}),(function(_t){return Ve.resolve(It()).then((function(){throw _t}))})):Ue.then(It,It)},ht})();return xt.prototype.then=ve,xt.all=function(ht){return new jt(this,ht).promise},xt.race=function(ht){var It=this;return y(ht)?new It((function(Ue,Ve){for(var _t=ht.length,M=0;M<_t;M++)It.resolve(ht[M]).then(Ue,Ve)})):new It((function(Ue,Ve){return Ve(new TypeError("You must pass an array to race."))}))},xt.resolve=ie,xt.reject=function(ht){var It=new this(Ne);return Y(It,ht),It},xt._setScheduler=function(ht){E=ht},xt._setAsap=function(ht){A=ht},xt._asap=A,xt.polyfill=function(){var ht=void 0;if(f.g!==void 0)ht=f.g;else if(typeof self<"u")ht=self;else try{ht=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var It=ht.Promise;if(It){var Ue=null;try{Ue=Object.prototype.toString.call(It.resolve())}catch{}if(Ue==="[object Promise]"&&!It.cast)return}ht.Promise=xt},xt.Promise=xt,xt})()},1159:function(l){var c,f=typeof Reflect=="object"?Reflect:null,g=f&&typeof f.apply=="function"?f.apply:function($,V,B){return Function.prototype.apply.call($,V,B)};c=f&&typeof f.ownKeys=="function"?f.ownKeys:Object.getOwnPropertySymbols?function($){return Object.getOwnPropertyNames($).concat(Object.getOwnPropertySymbols($))}:function($){return Object.getOwnPropertyNames($)};var y=Number.isNaN||function($){return $!=$};function h(){h.init.call(this)}l.exports=h,l.exports.once=function($,V){return new Promise((function(B,ne){function D(ve){$.removeListener(V,X),ne(ve)}function X(){typeof $.removeListener=="function"&&$.removeListener("error",D),B([].slice.call(arguments))}O($,V,X,{once:!0}),V!=="error"&&(function(ve,ie,ye){typeof ve.on=="function"&&O(ve,"error",ie,{once:!0})})($,D)}))},h.EventEmitter=h,h.prototype._events=void 0,h.prototype._eventsCount=0,h.prototype._maxListeners=void 0;var p=10;function E($){if(typeof $!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof $)}function A($){return $._maxListeners===void 0?h.defaultMaxListeners:$._maxListeners}function _($,V,B,ne){var D,X,ve,ie;if(E(B),(X=$._events)===void 0?(X=$._events=Object.create(null),$._eventsCount=0):(X.newListener!==void 0&&($.emit("newListener",V,B.listener?B.listener:B),X=$._events),ve=X[V]),ve===void 0)ve=X[V]=B,++$._eventsCount;else if(typeof ve=="function"?ve=X[V]=ne?[B,ve]:[ve,B]:ne?ve.unshift(B):ve.push(B),(D=A($))>0&&ve.length>D&&!ve.warned){ve.warned=!0;var ye=new Error("Possible EventEmitter memory leak detected. "+ve.length+" "+String(V)+" listeners added. Use emitter.setMaxListeners() to increase limit");ye.name="MaxListenersExceededWarning",ye.emitter=$,ye.type=V,ye.count=ve.length,ie=ye,console&&console.warn&&console.warn(ie)}return $}function I(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function C($,V,B){var ne={fired:!1,wrapFn:void 0,target:$,type:V,listener:B},D=I.bind(ne);return D.listener=B,ne.wrapFn=D,D}function v($,V,B){var ne=$._events;if(ne===void 0)return[];var D=ne[V];return D===void 0?[]:typeof D=="function"?B?[D.listener||D]:[D]:B?(function(X){for(var ve=new Array(X.length),ie=0;ie<ve.length;++ie)ve[ie]=X[ie].listener||X[ie];return ve})(D):S(D,D.length)}function T($){var V=this._events;if(V!==void 0){var B=V[$];if(typeof B=="function")return 1;if(B!==void 0)return B.length}return 0}function S($,V){for(var B=new Array(V),ne=0;ne<V;++ne)B[ne]=$[ne];return B}function O($,V,B,ne){if(typeof $.on=="function")ne.once?$.once(V,B):$.on(V,B);else{if(typeof $.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof $);$.addEventListener(V,(function D(X){ne.once&&$.removeEventListener(V,D),B(X)}))}}Object.defineProperty(h,"defaultMaxListeners",{enumerable:!0,get:function(){return p},set:function($){if(typeof $!="number"||$<0||y($))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+$+".");p=$}}),h.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},h.prototype.setMaxListeners=function($){if(typeof $!="number"||$<0||y($))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+$+".");return this._maxListeners=$,this},h.prototype.getMaxListeners=function(){return A(this)},h.prototype.emit=function($){for(var V=[],B=1;B<arguments.length;B++)V.push(arguments[B]);var ne=$==="error",D=this._events;if(D!==void 0)ne=ne&&D.error===void 0;else if(!ne)return!1;if(ne){var X;if(V.length>0&&(X=V[0]),X instanceof Error)throw X;var ve=new Error("Unhandled error."+(X?" ("+X.message+")":""));throw ve.context=X,ve}var ie=D[$];if(ie===void 0)return!1;if(typeof ie=="function")g(ie,this,V);else{var ye=ie.length,Ne=S(ie,ye);for(B=0;B<ye;++B)g(Ne[B],this,V)}return!0},h.prototype.addListener=function($,V){return _(this,$,V,!1)},h.prototype.on=h.prototype.addListener,h.prototype.prependListener=function($,V){return _(this,$,V,!0)},h.prototype.once=function($,V){return E(V),this.on($,C(this,$,V)),this},h.prototype.prependOnceListener=function($,V){return E(V),this.prependListener($,C(this,$,V)),this},h.prototype.removeListener=function($,V){var B,ne,D,X,ve;if(E(V),(ne=this._events)===void 0)return this;if((B=ne[$])===void 0)return this;if(B===V||B.listener===V)--this._eventsCount==0?this._events=Object.create(null):(delete ne[$],ne.removeListener&&this.emit("removeListener",$,B.listener||V));else if(typeof B!="function"){for(D=-1,X=B.length-1;X>=0;X--)if(B[X]===V||B[X].listener===V){ve=B[X].listener,D=X;break}if(D<0)return this;D===0?B.shift():(function(ie,ye){for(;ye+1<ie.length;ye++)ie[ye]=ie[ye+1];ie.pop()})(B,D),B.length===1&&(ne[$]=B[0]),ne.removeListener!==void 0&&this.emit("removeListener",$,ve||V)}return this},h.prototype.off=h.prototype.removeListener,h.prototype.removeAllListeners=function($){var V,B,ne;if((B=this._events)===void 0)return this;if(B.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):B[$]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete B[$]),this;if(arguments.length===0){var D,X=Object.keys(B);for(ne=0;ne<X.length;++ne)(D=X[ne])!=="removeListener"&&this.removeAllListeners(D);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(V=B[$])=="function")this.removeListener($,V);else if(V!==void 0)for(ne=V.length-1;ne>=0;ne--)this.removeListener($,V[ne]);return this},h.prototype.listeners=function($){return v(this,$,!0)},h.prototype.rawListeners=function($){return v(this,$,!1)},h.listenerCount=function($,V){return typeof $.listenerCount=="function"?$.listenerCount(V):T.call($,V)},h.prototype.listenerCount=T,h.prototype.eventNames=function(){return this._eventsCount>0?c(this._events):[]}},3101:function(l){var c=Array.isArray,f=Object.keys,g=Object.prototype.hasOwnProperty;l.exports=function y(h,p){if(h===p)return!0;if(h&&p&&typeof h=="object"&&typeof p=="object"){var E,A,_,I=c(h),C=c(p);if(I&&C){if((A=h.length)!=p.length)return!1;for(E=A;E--!=0;)if(!y(h[E],p[E]))return!1;return!0}if(I!=C)return!1;var v=h instanceof Date,T=p instanceof Date;if(v!=T)return!1;if(v&&T)return h.getTime()==p.getTime();var S=h instanceof RegExp,O=p instanceof RegExp;if(S!=O)return!1;if(S&&O)return h.toString()==p.toString();var $=f(h);if((A=$.length)!==f(p).length)return!1;for(E=A;E--!=0;)if(!g.call(p,$[E]))return!1;for(E=A;E--!=0;)if(!y(h[_=$[E]],p[_]))return!1;return!0}return h!=h&&p!=p}},3362:function(l,c,f){(function(g,y,h,p,E){function A(x){if("contents"in x)for(var U=("styleAttrs"in x)?x.styleAttrs[p.byName.ruby.qname]:null,j=x.kind==="span"&&(U==="container"||U==="textContainer"||U==="baseContainer"),he=x.contents.length-1;he>=0;he--)!j||"styleAttrs"in x.contents[he]&&p.byName.ruby.qname in x.contents[he].styleAttrs?A(x.contents[he]):delete x.contents[he]}function _(x,U,j,he){var de=he&&he.timeContainer==="seq",ot=0;he&&(ot=de&&j?j.end:he.begin),U.begin=U.explicit_begin?U.explicit_begin+ot:ot;var wt=U.begin,st=null;if("sets"in U)for(var nt=0;nt<U.sets.length;nt++)_(x,U.sets[nt],st,U),wt=U.timeContainer==="seq"?U.sets[nt].end:Math.max(wt,U.sets[nt].end),st=U.sets[nt];if("contents"in U){if("contents"in U)for(var rt=0;rt<U.contents.length;rt++)_(x,U.contents[rt],st,U),wt=U.timeContainer==="seq"?U.contents[rt].end:Math.max(wt,U.contents[rt].end),st=U.contents[rt]}else wt=de?U.begin:Number.POSITIVE_INFINITY;U.explicit_end!==null&&U.explicit_dur!==null?U.end=Math.min(U.begin+U.explicit_dur,ot+U.explicit_end):U.explicit_end===null&&U.explicit_dur!==null?U.end=U.begin+U.explicit_dur:U.explicit_end!==null&&U.explicit_dur===null?U.end=ot+U.explicit_end:U.end=wt,delete U.explicit_begin,delete U.explicit_dur,delete U.explicit_end,x._registerEvent(U)}function I(x){this.node=x}function C(){this.events=[],this.head=new v,this.body=null}function v(){this.styling=new T,this.layout=new $}function T(){this.styles={},this.initials={}}function S(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function O(){this.styleAttrs=null}function $(){this.regions={}}function V(x,U){B.call(this,"image"),this.src=x,this.type=U}function B(x){this.kind=x}function ne(x){this.id=x}function D(x){this.regionID=x}function X(x){this.styleAttrs=x}function ve(x){this.sets=x}function ie(x){this.contents=x}function ye(x,U,j){this.explicit_begin=x,this.explicit_end=U,this.explicit_dur=j}function Ne(){B.call(this,"body")}function Me(){B.call(this,"div")}function oe(){B.call(this,"p")}function Ce(){B.call(this,"span")}function Ye(){B.call(this,"span")}function et(){B.call(this,"br")}function Y(){}function Ee(){}function Pe(x){return x&&"xml:id"in x.attributes&&x.attributes["xml:id"].value||null}function Xe(x){return x&&"style"in x.attributes?x.attributes.style.value.split(" "):[]}function Ze(x,U){var j={};if(x!==null)for(var he in x.attributes){var de=x.attributes[he].uri+" "+x.attributes[he].local,ot=p.byQName[de];if(ot!==void 0){var wt=ot.parse(x.attributes[he].value);wt!==null?(j[de]=wt,ot===p.byName.zIndex&&Ue(U,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):Ve(U,"Cannot parse styling attribute "+de+" --> "+x.attributes[he].value)}}return j}function at(x,U,j){for(var he in x.attributes)if(x.attributes[he].uri===U&&x.attributes[he].local===j)return x.attributes[he].value;return null}function jt(x,U,j){var he,de=null;return(he=/^(\d+(?:\.\d+)?)f$/.exec(j))!==null?U!==null&&(de=parseFloat(he[1])/U):(he=/^(\d+(?:\.\d+)?)t$/.exec(j))!==null?x!==null&&(de=parseFloat(he[1])/x):(he=/^(\d+(?:\.\d+)?)ms$/.exec(j))!==null?de=parseFloat(he[1])/1e3:(he=/^(\d+(?:\.\d+)?)s$/.exec(j))!==null?de=parseFloat(he[1]):(he=/^(\d+(?:\.\d+)?)h$/.exec(j))!==null?de=3600*parseFloat(he[1]):(he=/^(\d+(?:\.\d+)?)m$/.exec(j))!==null?de=60*parseFloat(he[1]):(he=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(j))!==null?de=3600*parseInt(he[1])+60*parseInt(he[2])+parseFloat(he[3]):(he=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(j))!==null&&U!==null&&(de=3600*parseInt(he[1])+60*parseInt(he[2])+parseInt(he[3])+(he[4]===null?0:parseInt(he[4])/U)),de}function xt(x,U,j){for(;U.styleRefs.length>0;){var he=U.styleRefs.pop();he in x.styles?(xt(x,x.styles[he],j),It(x.styles[he].styleAttrs,U.styleAttrs)):Ve(j,"Non-existant style id referenced")}}function ht(x,U,j,he){for(var de=U.length-1;de>=0;de--){var ot=U[de];ot in x.styles?It(x.styles[ot].styleAttrs,j):Ve(he,"Non-existant style id referenced")}}function It(x,U){for(var j in x)x.hasOwnProperty(j)&&(j in U||(U[j]=x[j]))}function Ue(x,U){if(x&&x.warn&&x.warn(U))throw U}function Ve(x,U){if(x&&x.error&&x.error(U))throw U}function _t(x,U){throw x&&x.fatal&&x.fatal(U),U}function M(x,U){for(var j,he=0,de=x.length-1;he<=de;){var ot=x[j=Math.floor((he+de)/2)];if(ot<U)he=j+1;else{if(!(ot>U))return{found:!0,index:j};de=j-1}}return{found:!1,index:he}}g.fromXML=function(x,U,j){var he=y.parser(!0,{xmlns:!0}),de=[],ot=[],wt=[],st=0,nt=null;he.onclosetag=function($t){if(de[0]instanceof Y)nt.head!==null&&nt.head.styling!==null&&ht(nt.head.styling,de[0].styleRefs,de[0].styleAttrs,U),delete de[0].styleRefs;else if(de[0]instanceof T)for(var hn in de[0].styles)de[0].styles.hasOwnProperty(hn)&&xt(de[0],de[0].styles[hn],U);else if(de[0]instanceof oe||de[0]instanceof Ce){if(de[0].contents.length>1){var dn,_n=[de[0].contents[0]];for(dn=1;dn<de[0].contents.length;dn++)de[0].contents[dn]instanceof Ye&&_n[_n.length-1]instanceof Ye?_n[_n.length-1].text+=de[0].contents[dn].text:_n.push(de[0].contents[dn]);de[0].contents=_n}de[0]instanceof Ce&&de[0].contents.length===1&&de[0].contents[0]instanceof Ye&&(de[0].text=de[0].contents[0].text,delete de[0].contents)}else de[0]instanceof I&&(de[0].node.uri===h.ns_tt&&de[0].node.local==="metadata"?st--:st>0&&j&&"onCloseTag"in j&&j.onCloseTag());wt.shift(),ot.shift(),de.shift()},he.ontext=function($t){if(de[0]!==void 0)if(de[0]instanceof Ce||de[0]instanceof oe){if(de[0]instanceof Ce){var hn=de[0].styleAttrs[p.byName.ruby.qname];if(hn==="container"||hn==="textContainer"||hn==="baseContainer")return}var dn=new Ye;dn.initFromText(nt,de[0],$t,ot[0],wt[0],U),de[0].contents.push(dn)}else de[0]instanceof I&&st>0&&j&&"onText"in j&&j.onText($t)},he.onopentag=function($t){var hn=$t.attributes["xml:space"];hn?wt.unshift(hn.value):wt.length===0?wt.unshift("default"):wt.unshift(wt[0]);var dn=$t.attributes["xml:lang"];if(dn?ot.unshift(dn.value):ot.length===0?ot.unshift(""):ot.unshift(ot[0]),$t.uri===h.ns_tt)if($t.local==="tt")nt!==null&&_t(U,"Two <tt> elements at ("+this.line+","+this.column+")"),(nt=new C).initFromNode($t,ot[0],U),de.unshift(nt);else if($t.local==="head")de[0]instanceof C||_t(U,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),de.unshift(nt.head);else if($t.local==="styling")de[0]instanceof v||_t(U,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),de.unshift(nt.head.styling);else if($t.local==="style"){var _n;de[0]instanceof T?((_n=new S).initFromNode($t,U),_n.id?nt.head.styling.styles[_n.id]=_n:Ve(U,"<style> element missing @id attribute"),de.unshift(_n)):de[0]instanceof Y?((_n=new S).initFromNode($t,U),It(_n.styleAttrs,de[0].styleAttrs),de.unshift(_n)):_t(U,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if($t.local==="initial"){var En;if(de[0]instanceof T){for(var tr in(En=new O).initFromNode($t,U),En.styleAttrs)En.styleAttrs.hasOwnProperty(tr)&&(nt.head.styling.initials[tr]=En.styleAttrs[tr]);de.unshift(En)}else _t(U,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")")}else if($t.local==="layout")de[0]instanceof v||_t(U,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),de.unshift(nt.head.layout);else if($t.local==="region"){de[0]instanceof $||_t(U,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var Ir=new Y;Ir.initFromNode(nt,$t,ot[0],U),!Ir.id||Ir.id in nt.head.layout.regions?Ve(U,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):nt.head.layout.regions[Ir.id]=Ir,de.unshift(Ir)}else if($t.local==="body"){de[0]instanceof C||_t(U,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),nt.body!==null&&_t(U,"Second <body> element at "+this.line+","+this.column+")");var Fr=new Ne;Fr.initFromNode(nt,$t,ot[0],U),nt.body=Fr,de.unshift(Fr)}else if($t.local==="div"){de[0]instanceof Me||de[0]instanceof Ne||_t(U,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var Dr=new Me;Dr.initFromNode(nt,de[0],$t,ot[0],U);var ni=Dr.styleAttrs[p.byName.backgroundImage.qname];ni&&(Dr.contents.push(new V(ni)),delete Dr.styleAttrs[p.byName.backgroundImage.qname]),de[0].contents.push(Dr),de.unshift(Dr)}else if($t.local==="image"){de[0]instanceof Me||_t(U,"Parent of <image> element is not <div> at "+this.line+","+this.column+")");var bi=new V;bi.initFromNode(nt,de[0],$t,ot[0],U),de[0].contents.push(bi),de.unshift(bi)}else if($t.local==="p"){de[0]instanceof Me||_t(U,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var Jr=new oe;Jr.initFromNode(nt,de[0],$t,ot[0],U),de[0].contents.push(Jr),de.unshift(Jr)}else if($t.local==="span"){de[0]instanceof Ce||de[0]instanceof oe||_t(U,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var eo=new Ce;eo.initFromNode(nt,de[0],$t,ot[0],wt[0],U),de[0].contents.push(eo),de.unshift(eo)}else if($t.local==="br"){de[0]instanceof Ce||de[0]instanceof oe||_t(U,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var ei=new et;ei.initFromNode(nt,de[0],$t,ot[0],U),de[0].contents.push(ei),de.unshift(ei)}else if($t.local==="set"){de[0]instanceof Ce||de[0]instanceof oe||de[0]instanceof Me||de[0]instanceof Ne||de[0]instanceof Y||de[0]instanceof et||_t(U,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var jr=new Ee;jr.initFromNode(nt,de[0],$t,U),de[0].sets.push(jr),de.unshift(jr)}else de.unshift(new I($t));else de.unshift(new I($t));if(de[0]instanceof I){if($t.uri===h.ns_tt&&$t.local==="metadata")st++;else if(st>0&&j&&"onOpenTag"in j){var qi=[];for(var ro in $t.attributes)qi[$t.attributes[ro].uri+" "+$t.attributes[ro].local]={uri:$t.attributes[ro].uri,local:$t.attributes[ro].local,value:$t.attributes[ro].value};j.onOpenTag($t.uri,$t.local,qi)}}},he.write(x).close(),delete nt.head.styling.styles;var rt=!1;for(var ct in nt.head.layout.regions)if(nt.head.layout.regions.hasOwnProperty(ct)){rt=!0;break}if(!rt){var St=Y.prototype.createDefaultRegion(nt.lang);nt.head.layout.regions[St.id]=St}for(var Wt in nt.head.layout.regions)nt.head.layout.regions.hasOwnProperty(Wt)&&_(nt,nt.head.layout.regions[Wt],null,null);return nt.body&&_(nt,nt.body,null,null),nt.body&&A(nt.body),nt},C.prototype.initFromNode=function(x,U,j){var he=(function(st,nt){var rt=at(st,h.ns_ttp,"cellResolution"),ct=15,St=32;if(rt!==null){var Wt=/(\d+) (\d+)/.exec(rt);Wt!==null?(St=parseInt(Wt[1]),ct=parseInt(Wt[2])):Ue(nt,"Malformed cellResolution value (using initial value instead)")}return{w:St,h:ct}})(x,j);this.cellLength={h:new E.ComputedLength(0,1/he.h),w:new E.ComputedLength(1/he.w,0)};var de=(function(st,nt){var rt,ct=at(st,h.ns_ttp,"frameRate"),St=30;ct!==null&&((rt=/(\d+)/.exec(ct))!==null?St=parseInt(rt[1]):Ue(nt,"Malformed frame rate attribute (using initial value instead)"));var Wt=at(st,h.ns_ttp,"frameRateMultiplier"),$t=1;Wt!==null&&((rt=/(\d+) (\d+)/.exec(Wt))!==null?$t=parseInt(rt[1])/parseInt(rt[2]):Ue(nt,"Malformed frame rate multiplier attribute (using initial value instead)"));var hn=$t*St,dn=1,_n=at(st,h.ns_ttp,"tickRate");return _n===null?ct!==null&&(dn=hn):(rt=/(\d+)/.exec(_n))!==null?dn=parseInt(rt[1]):Ue(nt,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:hn,tickRate:dn}})(x,j);this.effectiveFrameRate=de.effectiveFrameRate,this.tickRate=de.tickRate,this.aspectRatio=(function(st,nt){var rt=at(st,h.ns_ittp,"aspectRatio");rt===null&&(rt=at(st,h.ns_ttp,"displayAspectRatio"));var ct=null;if(rt!==null){var St=/(\d+)\s+(\d+)/.exec(rt);if(St!==null){var Wt=parseInt(St[1]),$t=parseInt(St[2]);Wt!==0&&$t!==0?ct=Wt/$t:Ve(nt,"Illegal aspectRatio values (ignoring)")}else Ve(nt,"Malformed aspectRatio attribute (ignoring)")}return ct})(x,j);var ot=at(x,h.ns_ttp,"timeBase");ot!==null&&ot!=="media"&&_t(j,"Unsupported time base");var wt=(function(st,nt){var rt=at(st,h.ns_tts,"extent");if(rt===null)return null;var ct=rt.split(" ");if(ct.length!==2)return Ue(nt,"Malformed extent (ignoring)"),null;var St=E.parseLength(ct[0]),Wt=E.parseLength(ct[1]);return Wt&&St?{h:Wt,w:St}:(Ue(nt,"Malformed extent values (ignoring)"),null)})(x,j);wt===null?this.pxLength={h:null,w:null}:(wt.h.unit==="px"&&wt.w.unit==="px"||_t(j,"Extent on TT must be in px or absent"),this.pxLength={h:new E.ComputedLength(0,1/wt.h.value),w:new E.ComputedLength(1/wt.w.value,0)}),this.dimensions={h:new E.ComputedLength(0,1),w:new E.ComputedLength(1,0)},this.lang=U},C.prototype._registerEvent=function(x){if(!(x.end<=x.begin)){var U=M(this.events,x.begin);if(U.found||this.events.splice(U.index,0,x.begin),x.end!==Number.POSITIVE_INFINITY){var j=M(this.events,x.end);j.found||this.events.splice(j.index,0,x.end)}}},C.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},C.prototype.getMediaTimeEvents=function(){return this.events},S.prototype.initFromNode=function(x,U){this.id=Pe(x),this.styleAttrs=Ze(x,U),this.styleRefs=Xe(x)},O.prototype.initFromNode=function(x,U){for(var j in this.styleAttrs={},x.attributes)if(x.attributes[j].uri===h.ns_itts||x.attributes[j].uri===h.ns_ebutts||x.attributes[j].uri===h.ns_tts){var he=x.attributes[j].uri+" "+x.attributes[j].local;this.styleAttrs[he]=x.attributes[j].value}},V.prototype.initFromNode=function(x,U,j,he,de){this.src="src"in j.attributes?j.attributes.src.value:null,this.src||Ve(de,"Invalid image@src attribute"),this.type="type"in j.attributes?j.attributes.type.value:null,this.type||Ve(de,"Invalid image@type attribute"),X.prototype.initFromNode.call(this,x,U,j,de),ye.prototype.initFromNode.call(this,x,U,j,de),ve.prototype.initFromNode.call(this,x,U,j,de),D.prototype.initFromNode.call(this,x,U,j,de),this.lang=he},ne.prototype.initFromNode=function(x,U,j,he){this.id=Pe(j)},D.prototype.initFromNode=function(x,U,j,he){this.regionID=(function(de){return de&&"region"in de.attributes?de.attributes.region.value:""})(j)},X.prototype.initFromNode=function(x,U,j,he){this.styleAttrs=Ze(j,he),x.head!==null&&x.head.styling!==null&&ht(x.head.styling,Xe(j),this.styleAttrs,he)},ve.prototype.initFromNode=function(x,U,j,he){this.sets=[]},ie.prototype.initFromNode=function(x,U,j,he){this.contents=[]},ye.prototype.initFromNode=function(x,U,j,he){var de=(function(ot,wt,st,nt){var rt=null;st&&"begin"in st.attributes&&(rt=jt(ot.tickRate,ot.effectiveFrameRate,st.attributes.begin.value))===null&&Ue(nt,"Malformed begin value "+st.attributes.begin.value+" (using 0)");var ct=null;st&&"dur"in st.attributes&&(ct=jt(ot.tickRate,ot.effectiveFrameRate,st.attributes.dur.value))===null&&Ue(nt,"Malformed dur value "+st.attributes.dur.value+" (ignoring)");var St=null;return st&&"end"in st.attributes&&(St=jt(ot.tickRate,ot.effectiveFrameRate,st.attributes.end.value))===null&&Ue(nt,"Malformed end value (ignoring)"),{explicit_begin:rt,explicit_end:St,explicit_dur:ct}})(x,0,j,he);this.explicit_begin=de.explicit_begin,this.explicit_end=de.explicit_end,this.explicit_dur=de.explicit_dur,this.timeContainer=(function(ot,wt){var st=ot&&"timeContainer"in ot.attributes?ot.attributes.timeContainer.value:null;return st&&st!=="par"?st==="seq"?"seq":(Ve(wt,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"})(j,he)},Ne.prototype.initFromNode=function(x,U,j,he){X.prototype.initFromNode.call(this,x,null,U,he),ye.prototype.initFromNode.call(this,x,null,U,he),ve.prototype.initFromNode.call(this,x,null,U,he),D.prototype.initFromNode.call(this,x,null,U,he),ie.prototype.initFromNode.call(this,x,null,U,he),this.lang=j},Me.prototype.initFromNode=function(x,U,j,he,de){X.prototype.initFromNode.call(this,x,U,j,de),ye.prototype.initFromNode.call(this,x,U,j,de),ve.prototype.initFromNode.call(this,x,U,j,de),D.prototype.initFromNode.call(this,x,U,j,de),ie.prototype.initFromNode.call(this,x,U,j,de),this.lang=he},oe.prototype.initFromNode=function(x,U,j,he,de){X.prototype.initFromNode.call(this,x,U,j,de),ye.prototype.initFromNode.call(this,x,U,j,de),ve.prototype.initFromNode.call(this,x,U,j,de),D.prototype.initFromNode.call(this,x,U,j,de),ie.prototype.initFromNode.call(this,x,U,j,de),this.lang=he},Ce.prototype.initFromNode=function(x,U,j,he,de,ot){X.prototype.initFromNode.call(this,x,U,j,ot),ye.prototype.initFromNode.call(this,x,U,j,ot),ve.prototype.initFromNode.call(this,x,U,j,ot),D.prototype.initFromNode.call(this,x,U,j,ot),ie.prototype.initFromNode.call(this,x,U,j,ot),this.space=de,this.lang=he},Ye.prototype.initFromText=function(x,U,j,he,de,ot){ye.prototype.initFromNode.call(this,x,U,null,ot),this.text=j,this.space=de,this.lang=he},et.prototype.initFromNode=function(x,U,j,he,de){D.prototype.initFromNode.call(this,x,U,j,de),ye.prototype.initFromNode.call(this,x,U,j,de),this.lang=he},Y.prototype.createDefaultRegion=function(x){var U=new Y;return ne.call(U,""),X.call(U,{}),ve.call(U,[]),ye.call(U,0,Number.POSITIVE_INFINITY,null),this.lang=x,U},Y.prototype.initFromNode=function(x,U,j,he){ne.prototype.initFromNode.call(this,x,null,U,he),ye.prototype.initFromNode.call(this,x,null,U,he),ve.prototype.initFromNode.call(this,x,null,U,he),this.styleAttrs=Ze(U,he),this.styleRefs=Xe(U),this.lang=j},Ee.prototype.initFromNode=function(x,U,j,he){ye.prototype.initFromNode.call(this,x,U,j,he);var de=Ze(j,he);for(var ot in this.qname=null,this.value=null,de)if(de.hasOwnProperty(ot)){if(this.qname){Ve(he,"More than one style specified on set");break}this.qname=ot,this.value=de[ot]}}})(c,typeof sax>"u"?f(5378):sax,typeof imscNames>"u"?f(210):imscNames,typeof imscStyles>"u"?f(6811):imscStyles,typeof imscUtils>"u"?f(5926):imscUtils)},506:function(l,c,f){var g=/firefox/i.test(navigator.userAgent);(function(y,h,p){function E(ie,ye,Ne,Me){var oe;if(Ne.kind==="region")(oe=document.createElement("div")).style.position="absolute";else if(Ne.kind==="body")oe=document.createElement("div");else if(Ne.kind==="div")oe=document.createElement("div");else if(Ne.kind==="image"){if(oe=document.createElement("img"),ie.imgResolver!==null&&Ne.src!==null){var Ce=ie.imgResolver(Ne.src,oe);Ce&&(oe.src=Ce),oe.height=ie.regionH,oe.width=ie.regionW}}else if(Ne.kind==="p")oe=document.createElement("p");else if(Ne.kind==="span")if(Ne.styleAttrs[p.byName.ruby.qname]==="container")oe=document.createElement("ruby"),ie.ruby=!0;else if(Ne.styleAttrs[p.byName.ruby.qname]==="base")oe=document.createElement("span");else if(Ne.styleAttrs[p.byName.ruby.qname]==="text")oe=document.createElement("rt");else if(Ne.styleAttrs[p.byName.ruby.qname]==="baseContainer")oe=document.createElement("rbc");else if(Ne.styleAttrs[p.byName.ruby.qname]==="textContainer")oe=document.createElement("rtc");else{if(Ne.styleAttrs[p.byName.ruby.qname]==="delimiter")return;oe=document.createElement("span")}else Ne.kind==="br"&&(oe=document.createElement("br"));if(oe){if(Ne.lang&&(Ne.kind!=="region"&&Ne.lang===Me.lang||(oe.lang=Ne.lang)),ye.appendChild(oe),oe.style.margin="0",Ne.kind==="region"){var Ye=Ne.styleAttrs[p.byName.writingMode.qname];Ye==="lrtb"||Ye==="lr"?(ie.ipd="lr",ie.bpd="tb"):Ye==="rltb"||Ye==="rl"?(ie.ipd="rl",ie.bpd="tb"):Ye==="tblr"?(ie.ipd="tb",ie.bpd="lr"):Ye!=="tbrl"&&Ye!=="tb"||(ie.ipd="tb",ie.bpd="rl")}else if(Ne.kind==="p"&&ie.bpd==="tb"){var et=Ne.styleAttrs[p.byName.direction.qname];ie.ipd=et==="ltr"?"lr":"rl"}for(var Y=0;Y<O.length;Y++){var Ee=O[Y],Pe=Ne.styleAttrs[Ee.qname];Pe!==void 0&&Ee.map!==null&&Ee.map(ie,oe,Ne,Pe)}var Xe=oe,Ze=Ne.styleAttrs[p.byName.linePadding.qname];if(Ze&&!Ze.isZero()){var at=Ze.toUsedLength(ie.w,ie.h);if(at>0){var jt=Math.ceil(at)+"px";ie.bpd==="tb"?(Xe.style.paddingLeft=jt,Xe.style.paddingRight=jt):(Xe.style.paddingTop=jt,Xe.style.paddingBottom=jt),ie.lp=Ze}}var xt=Ne.styleAttrs[p.byName.multiRowAlign.qname];if(xt&&xt!=="auto"){var ht=document.createElement("span");ht.style.display="inline-block",ht.style.textAlign=xt,oe.appendChild(ht),Xe=ht,ie.mra=xt}var It=Ne.styleAttrs[p.byName.rubyReserve.qname];if(It&&It[0]!=="none"&&(ie.rubyReserve=It),Ne.styleAttrs[p.byName.fillLineGap.qname]&&(ie.flg=!0),Ne.kind==="span"&&Ne.text){var Ue=Ne.styleAttrs[p.byName.textEmphasis.qname];if(Ue&&Ue.style!=="none"&&(ie.textEmphasis=!0),p.byName.textCombine.qname in Ne.styleAttrs&&Ne.styleAttrs[p.byName.textCombine.qname]==="all")oe.textContent=Ne.text,oe._isd_element=Ne,Ue&&T(ie,oe,0,Ue);else for(var Ve="",_t=0;_t<Ne.text.length;_t++){Ve+=Ne.text.charAt(_t);var M=Ne.text.charCodeAt(_t);if(M<55296||M>56319||_t===Ne.text.length-1){var x=document.createElement("span");x.textContent=Ve,Ue&&T(ie,x,0,Ue),oe.appendChild(x),Ve="",x._isd_element=Ne}}}if("contents"in Ne)for(var U=0;U<Ne.contents.length;U++)E(ie,Xe,Ne.contents[U],Ne);var j=[];if(Ne.kind==="p"&&(v(ie,Xe,j,null),ie.rubyReserve&&((function(st,nt){for(var rt=0;rt<st.length;rt++){var ct,St,Wt=document.createElement("ruby"),$t=document.createElement("span");$t.textContent="",Wt.appendChild($t);var hn,dn=nt.rubyReserve[1].toUsedLength(nt.w,nt.h)+"px";nt.rubyReserve[0]==="both"||nt.rubyReserve[0]==="outside"&&st.length==1?((ct=document.createElement("rtc")).style[ne]=B?"after":"under",ct.textContent="",ct.style.fontSize=dn,(St=document.createElement("rtc")).style[ne]=B?"before":"over",St.textContent="",St.style.fontSize=dn,Wt.appendChild(ct),Wt.appendChild(St)):((ct=document.createElement("rtc")).textContent="",ct.style.fontSize=dn,hn=nt.rubyReserve[0]==="after"||nt.rubyReserve[0]==="outside"&&rt>0?B?"after":nt.bpd==="tb"||nt.bpd==="rl"?"under":"over":B?"before":nt.bpd==="tb"||nt.bpd==="rl"?"over":"under",ct.style[ne]=hn,Wt.appendChild(ct));for(var _n=null,En=0;En<st[rt].rbc.length;En++)if(st[rt].rbc[En].localName==="ruby"){_n=st[rt].rbc[En];for(var tr=0;tr<_n.style.length;tr++)Wt.style.setProperty(_n.style.item(tr),_n.style.getPropertyValue(_n.style.item(tr)));break}(_n=_n||st[rt].elements[0].node).parentElement.insertBefore(Wt,_n)}})(j,ie),ie.rubyReserve=null),(ie.ruby||ie.rubyReserve)&&((function(st,nt){for(var rt=0;rt<st.length;rt++)for(var ct=0;ct<st[rt].rbc.length;ct++){var St;st[rt].rbc[ct].style[ne]||(St=B?rt===0?"before":"after":nt.bpd==="tb"||nt.bpd==="rl"?rt===0?"over":"under":rt===0?"under":"over",st[rt].rbc[ct].style[ne]=St)}})(j,ie),ie.ruby=null),ie.textEmphasis&&((function(st,nt){for(var rt=0;rt<st.length;rt++)for(var ct=0;ct<st[rt].te.length;ct++){var St;st[rt].te[ct].style[X]&&st[rt].te[ct].style[X]!=="none"||(St=nt.bpd==="tb"?rt===0?"left over":"left under":nt.bpd==="rl"?rt===0?"right under":"left under":rt===0?"left under":"right under",st[rt].te[ct].style[X]=St)}})(j,ie),ie.textEmphasis=null),ie.mra&&((function(st){for(var nt=0;nt<st.length-1;nt++){var rt=st[nt].elements.length;if(rt!==0&&st[nt].br===!1){var ct=document.createElement("br"),St=st[nt].elements[rt-1].node;St.parentElement.insertBefore(ct,St.nextSibling)}}})(j),ie.mra=null),ie.lp&&((function(st,nt,rt){if(st!==null)for(var ct=0;ct<st.length;ct++){var St=st[ct].elements.length,Wt=Math.ceil(nt)+"px",$t="-"+Math.ceil(nt)+"px";if(St!==0){var hn=st[ct].elements[st[ct].start_elem],dn=st[ct].elements[st[ct].end_elem];if(hn===dn){var _n=hn.node.getBoundingClientRect();if(_n.width==0||_n.height==0)continue}rt.ipd==="lr"?(hn.node.style.marginLeft=$t,hn.node.style.paddingLeft=Wt):rt.ipd==="rl"?(hn.node.style.paddingRight=Wt,hn.node.style.marginRight=$t):rt.ipd==="tb"&&(hn.node.style.paddingTop=Wt,hn.node.style.marginTop=$t),rt.ipd==="lr"?(g||(dn.node.style.marginRight=$t),dn.node.style.paddingRight=Wt):rt.ipd==="rl"?(dn.node.style.paddingLeft=Wt,g||(dn.node.style.marginLeft=$t)):rt.ipd==="tb"&&(dn.node.style.paddingBottom=Wt,dn.node.style.marginBottom=$t)}}})(j,ie.lp.toUsedLength(ie.w,ie.h),ie),ie.lp=null),(function(st,nt){for(var rt=0;rt<st.length;rt++)for(var ct=st[rt],St=1;St<ct.elements.length;){var Wt=ct.elements[St-1],$t=ct.elements[St];_(Wt.node,$t.node,nt)?ct.elements.splice(St,1):St++}for(var hn,dn,_n=[],En=0;En<st.length;En++)for(var tr=0;tr<st[En].elements.length;tr++)(dn=A(hn=st[En].elements[tr].node,_n,!1))&&(hn.style.backgroundColor=dn);for(var Ir=0;Ir<_n.length;Ir++)_n[Ir].style.backgroundColor=""})(j,ie),ie.flg)){var he=C(Xe.getBoundingClientRect(),ie);(function(st,nt,rt,ct,St){for(var Wt=Math.sign(rt-nt),$t=0;$t<=st.length;$t++){var hn,dn,_n,En;if(hn=$t===0?Math.round(nt):$t===st.length?Math.round(rt):Math.round((st[$t-1].after+st[$t].before)/2),$t>0&&st[$t-1])for(_n=0;_n<st[$t-1].elements.length;_n++)dn=Wt*(hn-(En=st[$t-1].elements[_n]).after)+"px",ct.bpd==="lr"?En.node.style.paddingRight=dn:ct.bpd==="rl"?En.node.style.paddingLeft=dn:ct.bpd==="tb"&&(En.node.style.paddingBottom=dn);if($t<st.length)for(_n=0;_n<st[$t].elements.length;_n++)dn=Wt*((En=st[$t].elements[_n]).before-hn)+"px",ct.bpd==="lr"?En.node.style.paddingLeft=dn:ct.bpd==="rl"?En.node.style.paddingRight=dn:ct.bpd==="tb"&&(En.node.style.paddingTop=dn)}})(j,he.before,he.after,ie),ie.flg=null}if(Ne.kind==="region"&&ie.bpd==="tb"&&ie.enableRollUp&&Ne.contents.length>0&&Ne.styleAttrs[p.byName.displayAlign.qname]==="after"){v(ie,Xe,j,null);var de=new I(Ne.id===""?"_":Ne.id,j);if(ie.currentISDState[de.id]=de,ie.previousISDState&&de.id in ie.previousISDState&&ie.previousISDState[de.id].plist.length>0&&de.plist.length>1&&de.plist[de.plist.length-2].text===ie.previousISDState[de.id].plist[ie.previousISDState[de.id].plist.length-1].text){var ot=oe.firstElementChild,wt=de.plist[de.plist.length-1].after-de.plist[de.plist.length-1].before;ot.style.bottom="-"+wt+"px",ot.style.transition="transform 0.4s",ot.style.position="relative",ot.style.transform="translateY(-"+wt+"px)"}}}else ve(ie.errorHandler,"Error processing ISD element kind: "+Ne.kind)}function A(ie,ye,Ne){return ie.style.backgroundColor?(Ne&&!ye.includes(ie)&&ye.push(ie),ie.style.backgroundColor):ie.parentElement.nodeName==="SPAN"||ie.parentElement.nodeName==="RUBY"||ie.parentElement.nodeName==="RBC"||ie.parentElement.nodeName==="RTC"||ie.parentElement.nodeName==="RT"?A(ie.parentElement,ye,!0):void 0}function _(ie,ye,Ne){if(ie.tagName==="SPAN"&&ye.tagName==="SPAN"&&ie._isd_element===ye._isd_element){if(!ie._isd_element)return ve(Ne.errorHandler,"Internal error: HTML span is not linked to a source element; cannot merge spans."),!1;ie.textContent+=ye.textContent;for(var Me=0;Me<ye.style.length;Me++){var oe=ye.style[Me];(oe.indexOf("border")>=0||oe.indexOf("padding")>=0||oe.indexOf("margin")>=0)&&(ie.style[oe]=ye.style[oe])}return ye.parentElement.removeChild(ye),!0}return!1}function I(ie,ye){this.id=ie,this.plist=ye}function C(ie,ye){var Ne={before:null,after:null,start:null,end:null};return ye.bpd==="tb"?(Ne.before=ie.top,Ne.after=ie.bottom,ye.ipd==="lr"?(Ne.start=ie.left,Ne.end=ie.right):(Ne.start=ie.right,Ne.end=ie.left)):ye.bpd==="lr"?(Ne.before=ie.left,Ne.after=ie.right,Ne.start=ie.top,Ne.end=ie.bottom):ye.bpd==="rl"&&(Ne.before=ie.right,Ne.after=ie.left,Ne.start=ie.top,Ne.end=ie.bottom),Ne}function v(ie,ye,Ne,Me){if(ye.localName!=="rt"&&ye.localName!=="rtc"){var oe,Ce,Ye,et,Y=ye.style.backgroundColor||Me;if(ye.childElementCount===0)if(ye.localName==="span"||ye.localName==="rb"){var Ee=C(ye.getBoundingClientRect(),ie);if(Ne.length!==0&&(oe=Ee.before,Ce=Ee.after,Ye=Ne[Ne.length-1].before,Ce<(et=Ne[Ne.length-1].after)&&oe>Ye||et<=Ce&&Ye>=oe)){var Pe=Math.sign(Ee.after-Ee.before),Xe=Math.sign(Ee.end-Ee.start);Pe*(Ee.before-Ne[Ne.length-1].before)<0&&(Ne[Ne.length-1].before=Ee.before),Pe*(Ee.after-Ne[Ne.length-1].after)>0&&(Ne[Ne.length-1].after=Ee.after),Xe*(Ee.start-Ne[Ne.length-1].start)<0&&(Ne[Ne.length-1].start=Ee.start,Ne[Ne.length-1].start_elem=Ne[Ne.length-1].elements.length),Xe*(Ee.end-Ne[Ne.length-1].end)>0&&(Ne[Ne.length-1].end=Ee.end,Ne[Ne.length-1].end_elem=Ne[Ne.length-1].elements.length)}else Ne.push({before:Ee.before,after:Ee.after,start:Ee.start,end:Ee.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1});Ne[Ne.length-1].text+=ye.textContent,Ne[Ne.length-1].elements.push({node:ye,bgcolor:Y,before:Ee.before,after:Ee.after})}else ye.localName==="br"&&Ne.length!==0&&(Ne[Ne.length-1].br=!0);else for(var Ze=ye.firstChild;Ze;)Ze.nodeType===Node.ELEMENT_NODE&&(v(ie,Ze,Ne,Y),Ze.localName==="ruby"||Ze.localName==="rtc"?Ne.length>0&&Ne[Ne.length-1].rbc.push(Ze):Ze.localName==="span"&&Ze.style[D]&&Ze.style[D]!=="none"&&Ne.length>0&&Ne[Ne.length-1].te.push(Ze)),Ze=Ze.nextSibling}}function T(ie,ye,Ne,Me){var oe;Me.style!=="none"&&(Me.style==="auto"?ye.style[D]="filled":ye.style[D]=Me.style+" "+Me.symbol,(Me.position==="before"||Me.position==="after")&&(oe=ie.bpd==="tb"?Me.position==="before"?"left over":"left under":ie.bpd==="rl"?Me.position==="before"?"right under":"left under":Me.position==="before"?"left under":"right under",ye.style[X]=oe))}function S(ie,ye){this.qname=ie,this.map=ye}y.render=function(ie,ye,Ne,Me,oe,Ce,Ye,et,Y){var Ee=Me||ye.clientHeight,Pe=oe||ye.clientWidth;if(ie.aspectRatio!==null){var Xe=Ee*ie.aspectRatio;Xe>Pe?Ee=Math.round(Pe/ie.aspectRatio):Pe=Xe}var Ze=document.createElement("div");Ze.style.position="relative",Ze.style.width=Pe+"px",Ze.style.height=Ee+"px",Ze.style.margin="auto",Ze.style.top=0,Ze.style.bottom=0,Ze.style.left=0,Ze.style.right=0,Ze.style.zIndex=0;var at={h:Ee,w:Pe,regionH:null,regionW:null,imgResolver:Ne,displayForcedOnlyMode:Ce||!1,isd:ie,errorHandler:Ye,previousISDState:et,enableRollUp:Y||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};if(ye.appendChild(Ze),"contents"in ie)for(var jt=0;jt<ie.contents.length;jt++)E(at,Ze,ie.contents[jt],ie);return at.currentISDState};for(var O=[new S("http://www.w3.org/ns/ttml#styling backgroundColor",(function(ie,ye,Ne,Me){Me[3]!==0&&(ye.style.backgroundColor="rgba("+Me[0].toString()+","+Me[1].toString()+","+Me[2].toString()+","+(Me[3]/255).toString()+")")})),new S("http://www.w3.org/ns/ttml#styling color",(function(ie,ye,Ne,Me){ye.style.color="rgba("+Me[0].toString()+","+Me[1].toString()+","+Me[2].toString()+","+(Me[3]/255).toString()+")"})),new S("http://www.w3.org/ns/ttml#styling direction",(function(ie,ye,Ne,Me){ye.style.direction=Me})),new S("http://www.w3.org/ns/ttml#styling display",(function(ie,ye,Ne,Me){})),new S("http://www.w3.org/ns/ttml#styling displayAlign",(function(ie,ye,Ne,Me){ye.style.display="flex",ye.style.flexDirection="column",Me==="before"?ye.style.justifyContent="flex-start":Me==="center"?ye.style.justifyContent="center":Me==="after"&&(ye.style.justifyContent="flex-end")})),new S("http://www.w3.org/ns/ttml#styling extent",(function(ie,ye,Ne,Me){ie.regionH=Me.h.toUsedLength(ie.w,ie.h),ie.regionW=Me.w.toUsedLength(ie.w,ie.h);var oe=0,Ce=0,Ye=Ne.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];Ye&&(oe=Ye[0].toUsedLength(ie.w,ie.h)+Ye[2].toUsedLength(ie.w,ie.h),Ce=Ye[1].toUsedLength(ie.w,ie.h)+Ye[3].toUsedLength(ie.w,ie.h)),ye.style.height=ie.regionH-oe+"px",ye.style.width=ie.regionW-Ce+"px"})),new S("http://www.w3.org/ns/ttml#styling fontFamily",(function(ie,ye,Ne,Me){for(var oe=[],Ce=0;Ce<Me.length;Ce++)Me[Ce]=Me[Ce].trim(),Me[Ce]==="monospaceSerif"?(oe.push("Courier New"),oe.push('"Liberation Mono"'),oe.push("Courier"),oe.push("monospace")):Me[Ce]==="proportionalSansSerif"?(oe.push("Arial"),oe.push("Helvetica"),oe.push('"Liberation Sans"'),oe.push("sans-serif")):Me[Ce]==="monospace"?oe.push("monospace"):Me[Ce]==="sansSerif"?oe.push("sans-serif"):Me[Ce]==="serif"?oe.push("serif"):Me[Ce]==="monospaceSansSerif"?(oe.push("Consolas"),oe.push("monospace")):Me[Ce]==="proportionalSerif"?oe.push("serif"):oe.push(Me[Ce]);if(oe.length>0){for(var Ye=[oe[0]],et=1;et<oe.length;et++)Ye.indexOf(oe[et])==-1&&Ye.push(oe[et]);oe=Ye}ye.style.fontFamily=oe.join(",")})),new S("http://www.w3.org/ns/ttml#styling shear",(function(ie,ye,Ne,Me){if(Me!==0){var oe=-.9*Me;ie.bpd==="tb"?ye.style.transform="skewX("+oe+"deg)":ye.style.transform="skewY("+oe+"deg)"}})),new S("http://www.w3.org/ns/ttml#styling fontSize",(function(ie,ye,Ne,Me){ye.style.fontSize=Me.toUsedLength(ie.w,ie.h)+"px"})),new S("http://www.w3.org/ns/ttml#styling fontStyle",(function(ie,ye,Ne,Me){ye.style.fontStyle=Me})),new S("http://www.w3.org/ns/ttml#styling fontWeight",(function(ie,ye,Ne,Me){ye.style.fontWeight=Me})),new S("http://www.w3.org/ns/ttml#styling lineHeight",(function(ie,ye,Ne,Me){ye.style.lineHeight=Me==="normal"?"normal":Me.toUsedLength(ie.w,ie.h)+"px"})),new S("http://www.w3.org/ns/ttml#styling opacity",(function(ie,ye,Ne,Me){ye.style.opacity=Me})),new S("http://www.w3.org/ns/ttml#styling origin",(function(ie,ye,Ne,Me){ye.style.top=Me.h.toUsedLength(ie.w,ie.h)+"px",ye.style.left=Me.w.toUsedLength(ie.w,ie.h)+"px"})),new S("http://www.w3.org/ns/ttml#styling overflow",(function(ie,ye,Ne,Me){ye.style.overflow=Me})),new S("http://www.w3.org/ns/ttml#styling padding",(function(ie,ye,Ne,Me){var oe=[];oe[0]=Me[0].toUsedLength(ie.w,ie.h)+"px",oe[1]=Me[3].toUsedLength(ie.w,ie.h)+"px",oe[2]=Me[2].toUsedLength(ie.w,ie.h)+"px",oe[3]=Me[1].toUsedLength(ie.w,ie.h)+"px",ye.style.padding=oe.join(" ")})),new S("http://www.w3.org/ns/ttml#styling position",(function(ie,ye,Ne,Me){ye.style.top=Me.h.toUsedLength(ie.w,ie.h)+"px",ye.style.left=Me.w.toUsedLength(ie.w,ie.h)+"px"})),new S("http://www.w3.org/ns/ttml#styling rubyAlign",(function(ie,ye,Ne,Me){ye.style.rubyAlign=Me==="spaceAround"?"space-around":"center"})),new S("http://www.w3.org/ns/ttml#styling rubyPosition",(function(ie,ye,Ne,Me){var oe;Me!=="before"&&Me!=="after"||(oe=B?Me:ie.bpd==="tb"||ie.bpd==="rl"?Me==="before"?"over":"under":Me==="before"?"under":"over",ye.parentElement.style[ne]=oe)})),new S("http://www.w3.org/ns/ttml#styling showBackground",null),new S("http://www.w3.org/ns/ttml#styling textAlign",(function(ie,ye,Ne,Me){var oe;oe=Me==="start"?ie.ipd==="rl"?"right":"left":Me==="end"?ie.ipd==="rl"?"left":"right":Me,ye.style.textAlign=oe})),new S("http://www.w3.org/ns/ttml#styling textDecoration",(function(ie,ye,Ne,Me){ye.style.textDecoration=Me.join(" ").replace("lineThrough","line-through")})),new S("http://www.w3.org/ns/ttml#styling textOutline",(function(ie,ye,Ne,Me){})),new S("http://www.w3.org/ns/ttml#styling textShadow",(function(ie,ye,Ne,Me){var oe=Ne.styleAttrs[p.byName.textOutline.qname];if(Me==="none"&&oe==="none")ye.style.textShadow="";else{var Ce=[];if(oe!=="none"){var Ye="rgba("+oe.color[0].toString()+","+oe.color[1].toString()+","+oe.color[2].toString()+","+(oe.color[3]/255).toString()+")";Ce.push("1px 1px 1px "+Ye),Ce.push("-1px 1px 1px "+Ye),Ce.push("1px -1px 1px "+Ye),Ce.push("-1px -1px 1px "+Ye)}if(Me!=="none")for(var et=0;et<Me.length;et++)Ce.push(Me[et].x_off.toUsedLength(ie.w,ie.h)+"px "+Me[et].y_off.toUsedLength(ie.w,ie.h)+"px "+Me[et].b_radius.toUsedLength(ie.w,ie.h)+"px rgba("+Me[et].color[0].toString()+","+Me[et].color[1].toString()+","+Me[et].color[2].toString()+","+(Me[et].color[3]/255).toString()+")");ye.style.textShadow=Ce.join(",")}})),new S("http://www.w3.org/ns/ttml#styling textCombine",(function(ie,ye,Ne,Me){ye.style.textCombineUpright=Me})),new S("http://www.w3.org/ns/ttml#styling textEmphasis",(function(ie,ye,Ne,Me){})),new S("http://www.w3.org/ns/ttml#styling unicodeBidi",(function(ie,ye,Ne,Me){var oe;oe=Me==="bidiOverride"?"bidi-override":Me,ye.style.unicodeBidi=oe})),new S("http://www.w3.org/ns/ttml#styling visibility",(function(ie,ye,Ne,Me){ye.style.visibility=Me})),new S("http://www.w3.org/ns/ttml#styling wrapOption",(function(ie,ye,Ne,Me){Me==="wrap"?Ne.space==="preserve"?ye.style.whiteSpace="pre-wrap":ye.style.whiteSpace="normal":Ne.space==="preserve"?ye.style.whiteSpace="pre":ye.style.whiteSpace="noWrap"})),new S("http://www.w3.org/ns/ttml#styling writingMode",(function(ie,ye,Ne,Me){Me==="lrtb"||Me==="lr"||Me==="rltb"||Me==="rl"?ye.style.writingMode="horizontal-tb":Me==="tblr"?ye.style.writingMode="vertical-lr":Me!=="tbrl"&&Me!=="tb"||(ye.style.writingMode="vertical-rl")})),new S("http://www.w3.org/ns/ttml#styling zIndex",(function(ie,ye,Ne,Me){ye.style.zIndex=Me})),new S("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",(function(ie,ye,Ne,Me){ie.displayForcedOnlyMode&&Me===!1&&(ye.style.visibility="hidden")}))],$={},V=0;V<O.length;V++)$[O[V].qname]=O[V];var B="webkitRubyPosition"in window.getComputedStyle(document.documentElement),ne=B?"webkitRubyPosition":"rubyPosition",D="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",X="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition";function ve(ie,ye){if(ie&&ie.error&&ie.error(ye))throw ye}})(c,typeof imscNames>"u"?f(210):imscNames,typeof imscStyles>"u"?f(6811):imscStyles,typeof imscUtils>"u"?f(5926):imscUtils)},4080:function(l,c,f){(function(g,y,h,p){g.generateISD=function(S,O,$){var V,B=new C(S),ne={},D={},X=S.head.styling.initials[h.byName.showBackground.qname],ve=S.head.styling.initials[h.byName.backgroundColor.qname];for(var ie in S.head.layout.regions)if(S.head.layout.regions.hasOwnProperty(ie)){var ye=S.head.layout.regions[ie],Ne=ye.styleAttrs[h.byName.showBackground.qname]||X,Me=ye.styleAttrs[h.byName.backgroundColor.qname]||ve;D[ye.id]=(Ne==="always"||Ne===void 0)&&Me!==void 0&&!(O<ye.begin||O>=ye.end)}for(var oe in S.body&&S.body.regionID&&(D[S.body.regionID]=!0),V=S.body!==null?(function Ye(et,Y){if(Y.contents){var Ee={};for(var Pe in Y)Y.hasOwnProperty(Pe)&&(Ee[Pe]=Y[Pe]);return Ee.contents=[],Y.contents.filter((function(Xe){return!(et<Xe.begin||et>=Xe.end)})).forEach((function(Xe){var Ze=Ye(et,Xe);Ze.regionID&&(D[Ze.regionID]=!0),Ze!==null&&Ee.contents.push(Ze)})),Ee}return Y})(O,S.body):null,D[""]!==void 0&&(D[""]=!0),D)if(D[oe]){var Ce=A(S,O,S.head.layout.regions[oe],V,null,"",S.head.layout.regions[oe],$,ne);Ce!==null&&B.contents.push(Ce.element)}return B};var E=[h.byName.color.qname,h.byName.textCombine.qname,h.byName.textDecoration.qname,h.byName.textEmphasis.qname,h.byName.textOutline.qname,h.byName.textShadow.qname];function A(S,O,$,V,B,ne,D,X,ve){if(O<D.begin||O>=D.end)return null;var ie="regionID"in D&&D.regionID!==""?D.regionID:ne;if(B!==null&&ie!==$.id&&(!("contents"in D)||"contents"in D&&D.contents.length===0||ie!==""))return null;var ye=new v(D);if("sets"in D)for(var Ne=0;Ne<D.sets.length;Ne++)O<D.sets[Ne].begin||O>=D.sets[Ne].end||(ye.styleAttrs[D.sets[Ne].qname]=D.sets[Ne].value);var Me={};for(var oe in ye.styleAttrs)if(ye.styleAttrs.hasOwnProperty(oe)&&(Me[oe]=!0,ye.kind==="region"&&oe===h.byName.writingMode.qname&&!(h.byName.direction.qname in ye.styleAttrs))){var Ce=ye.styleAttrs[oe];Ce==="lrtb"||Ce==="lr"?ye.styleAttrs[h.byName.direction.qname]="ltr":Ce!=="rltb"&&Ce!=="rl"||(ye.styleAttrs[h.byName.direction.qname]="rtl")}if(B!==null)for(var Ye=0;Ye<h.all.length;Ye++){var et=h.all[Ye];if(et.qname===h.byName.textDecoration.qname){var Y=B.styleAttrs[et.qname],Ee=ye.styleAttrs[et.qname],Pe=[];Ee===void 0?Pe=Y:Ee.indexOf("none")===-1?((Ee.indexOf("noUnderline")===-1&&Y.indexOf("underline")!==-1||Ee.indexOf("underline")!==-1)&&Pe.push("underline"),(Ee.indexOf("noLineThrough")===-1&&Y.indexOf("lineThrough")!==-1||Ee.indexOf("lineThrough")!==-1)&&Pe.push("lineThrough"),(Ee.indexOf("noOverline")===-1&&Y.indexOf("overline")!==-1||Ee.indexOf("overline")!==-1)&&Pe.push("overline")):Pe.push("none"),ye.styleAttrs[et.qname]=Pe}else if(et.qname!==h.byName.fontSize.qname||et.qname in ye.styleAttrs||ye.kind!=="span"||ye.styleAttrs[h.byName.ruby.qname]!=="textContainer")if(et.qname!==h.byName.fontSize.qname||et.qname in ye.styleAttrs||ye.kind!=="span"||ye.styleAttrs[h.byName.ruby.qname]!=="text")et.inherit&&et.qname in B.styleAttrs&&!(et.qname in ye.styleAttrs)&&(ye.styleAttrs[et.qname]=B.styleAttrs[et.qname]);else{var Xe=B.styleAttrs[h.byName.fontSize.qname];B.styleAttrs[h.byName.ruby.qname]==="textContainer"?ye.styleAttrs[et.qname]=Xe:ye.styleAttrs[et.qname]=new p.ComputedLength(.5*Xe.rw,.5*Xe.rh)}else{var Ze=B.styleAttrs[h.byName.fontSize.qname];ye.styleAttrs[et.qname]=new p.ComputedLength(.5*Ze.rw,.5*Ze.rh)}}for(var at=0;at<h.all.length;at++){var jt=h.all[at];if(!(jt.qname in ye.styleAttrs)&&!(jt.qname===h.byName.position.qname&&h.byName.origin.qname in ye.styleAttrs||jt.qname===h.byName.origin.qname&&h.byName.position.qname in ye.styleAttrs)){var xt=S.head.styling.initials[jt.qname]||jt.initial;if(xt!==null&&(ye.kind==="region"||jt.inherit===!1&&xt!==null)){var ht=jt.parse(xt);ht!==null?(ye.styleAttrs[jt.qname]=ht,Me[jt.qname]=!0):T(X,"Invalid initial value for '"+jt.qname+"' on element '"+ye.kind)}}}for(var It=0;It<h.all.length;It++){var Ue=h.all[It];if(Ue.qname in Me&&Ue.compute!==null){var Ve=Ue.compute(S,B,ye,ye.styleAttrs[Ue.qname],ve);Ve!==null?ye.styleAttrs[Ue.qname]=Ve:(ye.styleAttrs[Ue.qname]=Ue.compute(S,B,ye,Ue.parse(Ue.initial),ve),T(X,"Style '"+Ue.qname+"' on element '"+ye.kind+"' cannot be computed"))}}if(ye.styleAttrs[h.byName.display.qname]==="none")return null;var _t=null;B===null?_t=V===null?[]:[V]:"contents"in D&&(_t=D.contents);for(var M=0;_t!==null&&M<_t.length;M++){var x=A(S,O,$,V,ye,ie,_t[M],X,ve);x!==null&&ye.contents.push(x.element)}for(var U in ye.styleAttrs)if(ye.styleAttrs.hasOwnProperty(U)){var j=!1;if(ye.kind==="span"){var he=ye.styleAttrs[h.byName.ruby.qname];(j=(he==="container"||he==="textContainer"||he==="baseContainer")&&E.indexOf(U)!==-1)||(j=he!=="container"&&U===h.byName.rubyAlign.qname),j||(j=!(he==="textContainer"||he==="text")&&U===h.byName.rubyPosition.qname)}if(!j){var de=h.byQName[U];"applies"in de&&(j=de.applies.indexOf(ye.kind)===-1)}j&&delete ye.styleAttrs[U]}var ot=ye.styleAttrs[h.byName.ruby.qname];if(ye.kind==="p"||ye.kind==="span"&&(ot==="textContainer"||ot==="text")){var wt=[];_(ye,wt),(function(st){for(var nt,rt=0;rt<st.length;)if((nt=st[rt]).kind!=="br"&&nt.space!=="preserve"){var ct=nt.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(ct)&&(rt===0||(St=st[rt-1]).kind==="br"||/[\r\n\t ]$/.test(St.text))&&(ct=ct.substring(1)),nt.text=ct,ct.length===0?st.splice(rt,1):rt++}else rt++;var St,Wt;for(rt=0;rt<st.length;rt++)(nt=st[rt]).kind!=="br"&&nt.space!=="preserve"?/[ ]$/.test(nt.text)&&(rt===st.length-1||(Wt=st[rt+1]).kind==="br"||Wt.space==="preserve"&&/^[\r\n]/.test(Wt.text))&&(nt.text=nt.text.slice(0,-1)):rt++})(wt),I(ye)}return ye.kind==="div"&&h.byName.backgroundImage.qname in ye.styleAttrs||ye.kind==="br"||ye.kind==="image"||"contents"in ye&&ye.contents.length>0||ye.kind==="span"&&ye.text!==null||ye.kind==="region"&&ye.styleAttrs[h.byName.showBackground.qname]==="always"?{region_id:ie,element:ye}:null}function _(S,O){if("contents"in S)for(var $=0;$<S.contents.length;$++){var V=S.contents[$],B=V.styleAttrs[h.byName.ruby.qname];(V.kind!=="span"||B!=="textContainer"&&B!=="text")&&("contents"in V?_(V,O):(V.kind==="span"&&V.text.length!==0||V.kind==="br")&&O.push(V))}}function I(S){if(S.kind==="br")return!1;if("text"in S)return S.text.length===0;if("contents"in S){for(var O=S.contents.length;O--;)I(S.contents[O])&&S.contents.splice(O,1);return S.contents.length===0}}function C(S){this.contents=[],this.aspectRatio=S.aspectRatio,this.lang=S.lang}function v(S){for(var O in this.kind=S.kind||"region",this.lang=S.lang,S.id&&(this.id=S.id),this.styleAttrs={},S.styleAttrs)S.styleAttrs.hasOwnProperty(O)&&(this.styleAttrs[O]=S.styleAttrs[O]);"src"in S&&(this.src=S.src),"type"in S&&(this.type=S.type),"text"in S?this.text=S.text:(this.kind==="region"||"contents"in S)&&(this.contents=[]),"space"in S&&(this.space=S.space)}function T(S,O){if(S&&S.error&&S.error(O))throw O}})(c,typeof imscNames>"u"?f(210):imscNames,typeof imscStyles>"u"?f(6811):imscStyles,typeof imscUtils>"u"?f(5926):imscUtils)},4403:function(l,c,f){c.generateISD=f(4080).generateISD,c.fromXML=f(3362).fromXML,c.renderHTML=f(506).render},210:function(l,c){(function(f){f.ns_tt="http://www.w3.org/ns/ttml",f.ns_tts="http://www.w3.org/ns/ttml#styling",f.ns_ttp="http://www.w3.org/ns/ttml#parameter",f.ns_xml="http://www.w3.org/XML/1998/namespace",f.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",f.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",f.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",f.ns_ebutts="urn:ebu:tt:style"})(c)},6811:function(l,c,f){(function(g,y,h){function p(_,I,C,v,T,S,O,$){this.name=I,this.ns=_,this.qname=_+" "+I,this.inherit=T,this.animatable=S,this.initial=C,this.applies=v,this.parse=O,this.compute=$}for(var E in g.all=[new p(y.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,h.parseColor,null),new p(y.ns_tts,"color","white",["span"],!0,!0,h.parseColor,null),new p(y.ns_tts,"direction","ltr",["p","span"],!0,!0,(function(_){return _}),null),new p(y.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,(function(_){return _}),null),new p(y.ns_tts,"displayAlign","before",["region"],!1,!0,(function(_){return _}),null),new p(y.ns_tts,"extent","auto",["tt","region"],!1,!0,(function(_){if(_==="auto")return _;var I=_.split(" ");if(I.length!==2)return null;var C=h.parseLength(I[0]),v=h.parseLength(I[1]);return v&&C?{h:v,w:C}:null}),(function(_,I,C,v,T){var S,O;if(v==="auto")S=new h.ComputedLength(0,1);else if((S=h.toComputedLength(v.h.value,v.h.unit,null,_.dimensions.h,null,_.pxLength.h))===null)return null;if(v==="auto")O=new h.ComputedLength(1,0);else if((O=h.toComputedLength(v.w.value,v.w.unit,null,_.dimensions.w,null,_.pxLength.w))===null)return null;return{h:S,w:O}})),new p(y.ns_tts,"fontFamily","default",["span","p"],!0,!0,(function(_){for(var I=_.split(","),C=[],v=0;v<I.length;v++)I[v]=I[v].trim(),I[v].charAt(0)!=="'"&&I[v].charAt(0)!=='"'&&I[v]==="default"?C.push("monospaceSerif"):C.push(I[v]);return C}),null),new p(y.ns_tts,"shear","0%",["p"],!0,!0,h.parseLength,(function(_,I,C,v){return v.unit!=="%"?null:Math.abs(v.value)>100?100*Math.sign(v.value):v.value})),new p(y.ns_tts,"fontSize","1c",["span","p"],!0,!0,h.parseLength,(function(_,I,C,v,T){return h.toComputedLength(v.value,v.unit,I!==null?I.styleAttrs[g.byName.fontSize.qname]:_.cellLength.h,I!==null?I.styleAttrs[g.byName.fontSize.qname]:_.cellLength.h,_.cellLength.h,_.pxLength.h)})),new p(y.ns_tts,"fontStyle","normal",["span","p"],!0,!0,(function(_){return _}),null),new p(y.ns_tts,"fontWeight","normal",["span","p"],!0,!0,(function(_){return _}),null),new p(y.ns_tts,"lineHeight","normal",["p"],!0,!0,(function(_){return _==="normal"?_:h.parseLength(_)}),(function(_,I,C,v,T){var S;if(v==="normal")S=v;else if((S=h.toComputedLength(v.value,v.unit,C.styleAttrs[g.byName.fontSize.qname],C.styleAttrs[g.byName.fontSize.qname],_.cellLength.h,_.pxLength.h))===null)return null;return S})),new p(y.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new p(y.ns_tts,"origin","auto",["region"],!1,!0,(function(_){if(_==="auto")return _;var I=_.split(" ");if(I.length!==2)return null;var C=h.parseLength(I[0]),v=h.parseLength(I[1]);return v&&C?{h:v,w:C}:null}),(function(_,I,C,v,T){var S,O;if(v==="auto")S=new h.ComputedLength(0,0);else if((S=h.toComputedLength(v.h.value,v.h.unit,null,_.dimensions.h,null,_.pxLength.h))===null)return null;if(v==="auto")O=new h.ComputedLength(0,0);else if((O=h.toComputedLength(v.w.value,v.w.unit,null,_.dimensions.w,null,_.pxLength.w))===null)return null;return{h:S,w:O}})),new p(y.ns_tts,"overflow","hidden",["region"],!1,!0,(function(_){return _}),null),new p(y.ns_tts,"padding","0px",["region"],!1,!0,(function(_){var I=_.split(" ");if(I.length>4)return null;for(var C=[],v=0;v<I.length;v++){var T=h.parseLength(I[v]);if(!T)return null;C.push(T)}return C}),(function(_,I,C,v,T){var S;if(v.length===1)S=[v[0],v[0],v[0],v[0]];else if(v.length===2)S=[v[0],v[1],v[0],v[1]];else if(v.length===3)S=[v[0],v[1],v[2],v[1]];else{if(v.length!==4)return null;S=[v[0],v[1],v[2],v[3]]}var O=C.styleAttrs[g.byName.writingMode.qname];if(O==="lrtb"||O==="lr")S=[S[0],S[3],S[2],S[1]];else if(O==="rltb"||O==="rl")S=[S[0],S[1],S[2],S[3]];else if(O==="tblr")S=[S[3],S[0],S[1],S[2]];else{if(O!=="tbrl"&&O!=="tb")return null;S=[S[3],S[2],S[1],S[0]]}for(var $=[],V=0;V<S.length;V++)if(S[V].value===0)$[V]=new h.ComputedLength(0,0);else if($[V]=h.toComputedLength(S[V].value,S[V].unit,C.styleAttrs[g.byName.fontSize.qname],V===0||V===2?C.styleAttrs[g.byName.extent.qname].h:C.styleAttrs[g.byName.extent.qname].w,V===0||V===2?_.cellLength.h:_.cellLength.w,V===0||V===2?_.pxLength.h:_.pxLength.w),$[V]===null)return null;return $})),new p(y.ns_tts,"position","top left",["region"],!1,!0,(function(_){return h.parsePosition(_)}),(function(_,I,C,v){var T,S;return(T=h.toComputedLength(v.v.offset.value,v.v.offset.unit,null,new h.ComputedLength(-C.styleAttrs[g.byName.extent.qname].h.rw,_.dimensions.h.rh-C.styleAttrs[g.byName.extent.qname].h.rh),null,_.pxLength.h))===null?null:(v.v.edge==="bottom"&&(T=new h.ComputedLength(-T.rw-C.styleAttrs[g.byName.extent.qname].h.rw,_.dimensions.h.rh-T.rh-C.styleAttrs[g.byName.extent.qname].h.rh)),S=h.toComputedLength(v.h.offset.value,v.h.offset.unit,null,new h.ComputedLength(_.dimensions.w.rw-C.styleAttrs[g.byName.extent.qname].w.rw,-C.styleAttrs[g.byName.extent.qname].w.rh),null,_.pxLength.w),T===null?null:(v.h.edge==="right"&&(S=new h.ComputedLength(_.dimensions.w.rw-S.rw-C.styleAttrs[g.byName.extent.qname].w.rw,-S.rh-C.styleAttrs[g.byName.extent.qname].w.rh)),{h:T,w:S}))})),new p(y.ns_tts,"ruby","none",["span"],!1,!0,(function(_){return _}),null),new p(y.ns_tts,"rubyAlign","center",["span"],!0,!0,(function(_){return _!=="center"&&_!=="spaceAround"?null:_}),null),new p(y.ns_tts,"rubyPosition","outside",["span"],!0,!0,(function(_){return _}),null),new p(y.ns_tts,"rubyReserve","none",["p"],!0,!0,(function(_){var I=_.split(" "),C=[null,null];if(I.length===0||I.length>2||I[0]!=="none"&&I[0]!=="both"&&I[0]!=="after"&&I[0]!=="before"&&I[0]!=="outside")return null;if(C[0]=I[0],I.length===2&&I[0]!=="none"){var v=h.parseLength(I[1]);if(!v)return null;C[1]=v}return C}),(function(_,I,C,v,T){if(v[0]==="none")return v;var S;return(S=v[1]===null?new h.ComputedLength(.5*C.styleAttrs[g.byName.fontSize.qname].rw,.5*C.styleAttrs[g.byName.fontSize.qname].rh):h.toComputedLength(v[1].value,v[1].unit,C.styleAttrs[g.byName.fontSize.qname],C.styleAttrs[g.byName.fontSize.qname],_.cellLength.h,_.pxLength.h))===null?null:[v[0],S]})),new p(y.ns_tts,"showBackground","always",["region"],!1,!0,(function(_){return _}),null),new p(y.ns_tts,"textAlign","start",["p"],!0,!0,(function(_){return _}),(function(_,I,C,v,T){return v==="left"?"start":v==="right"?"end":v})),new p(y.ns_tts,"textCombine","none",["span"],!0,!0,(function(_){return _==="none"||_==="all"?_:null}),null),new p(y.ns_tts,"textDecoration","none",["span"],!0,!0,(function(_){return _.split(" ")}),null),new p(y.ns_tts,"textEmphasis","none",["span"],!0,!0,(function(_){for(var I=_.split(" "),C={style:null,symbol:null,color:null,position:null},v=0;v<I.length;v++)if(I[v]==="none"||I[v]==="auto")C.style=I[v];else if(I[v]==="filled"||I[v]==="open")C.style=I[v];else if(I[v]==="circle"||I[v]==="dot"||I[v]==="sesame")C.symbol=I[v];else if(I[v]==="current")C.color=I[v];else if(I[v]==="outside"||I[v]==="before"||I[v]==="after")C.position=I[v];else if(C.color=h.parseColor(I[v]),C.color===null)return null;return C.style==null&&C.symbol==null?C.style="auto":(C.symbol=C.symbol||"circle",C.style=C.style||"filled"),C.position=C.position||"outside",C.color=C.color||"current",C}),null),new p(y.ns_tts,"textOutline","none",["span"],!0,!0,(function(_){if(_==="none")return _;var I={},C=_.split(" ");if(C.length===0||C.length>2)return null;var v=h.parseColor(C[0]);if(I.color=v,v!==null&&C.shift(),C.length!==1)return null;var T=h.parseLength(C[0]);return T?(I.thickness=T,I):null}),(function(_,I,C,v,T){if(v==="none")return v;var S={};return v.color===null?S.color=C.styleAttrs[g.byName.color.qname]:S.color=v.color,S.thickness=h.toComputedLength(v.thickness.value,v.thickness.unit,C.styleAttrs[g.byName.fontSize.qname],C.styleAttrs[g.byName.fontSize.qname],_.cellLength.h,_.pxLength.h),S.thickness===null?null:S})),new p(y.ns_tts,"textShadow","none",["span"],!0,!0,h.parseTextShadow,(function(_,I,C,v){if(v==="none")return v;for(var T=[],S=0;S<v.length;S++){var O={};if(O.x_off=h.toComputedLength(v[S][0].value,v[S][0].unit,null,C.styleAttrs[g.byName.fontSize.qname],null,_.pxLength.w),O.x_off===null||(O.y_off=h.toComputedLength(v[S][1].value,v[S][1].unit,null,C.styleAttrs[g.byName.fontSize.qname],null,_.pxLength.h),O.y_off===null))return null;if(v[S][2]===null)O.b_radius=0;else if(O.b_radius=h.toComputedLength(v[S][2].value,v[S][2].unit,null,C.styleAttrs[g.byName.fontSize.qname],null,_.pxLength.h),O.b_radius===null)return null;v[S][3]===null?O.color=C.styleAttrs[g.byName.color.qname]:O.color=v[S][3],T.push(O)}return T})),new p(y.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,(function(_){return _}),null),new p(y.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,(function(_){return _}),null),new p(y.ns_tts,"wrapOption","wrap",["span"],!0,!0,(function(_){return _}),null),new p(y.ns_tts,"writingMode","lrtb",["region"],!1,!0,(function(_){return _}),null),new p(y.ns_tts,"zIndex","auto",["region"],!1,!0,(function(_){var I;return _==="auto"?I=_:(I=parseInt(_),isNaN(I)&&(I=null)),I}),null),new p(y.ns_ebutts,"linePadding","0c",["p"],!0,!1,h.parseLength,(function(_,I,C,v,T){return h.toComputedLength(v.value,v.unit,null,null,_.cellLength.w,null)})),new p(y.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,(function(_){return _}),null),new p(y.ns_smpte,"backgroundImage",null,["div"],!1,!1,(function(_){return _}),null),new p(y.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,(function(_){return _==="true"}),null),new p(y.ns_itts,"fillLineGap","false",["p"],!0,!0,(function(_){return _==="true"}),null)],g.byQName={},g.all)g.byQName[g.all[E].qname]=g.all[E];for(var A in g.byName={},g.all)g.byName[g.all[A].name]=g.all[A]})(c,typeof imscNames>"u"?f(210):imscNames,typeof imscUtils>"u"?f(5926):imscUtils)},5926:function(l,c){(function(f){var g=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,y=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,h=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,p={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};f.parseColor=function(A){var _,I=null,C=p[A.toLowerCase()];return C!==void 0?I=C:(_=g.exec(A))!==null?I=[parseInt(_[1],16),parseInt(_[2],16),parseInt(_[3],16),_[4]!==void 0?parseInt(_[4],16):255]:(_=y.exec(A))!==null?I=[parseInt(_[1]),parseInt(_[2]),parseInt(_[3]),255]:(_=h.exec(A))!==null&&(I=[parseInt(_[1]),parseInt(_[2]),parseInt(_[3]),parseInt(_[4])]),I};var E=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;f.parseLength=function(A){var _,I=null;return(_=E.exec(A))!==null&&(I={value:parseFloat(_[1]),unit:_[2]}),I},f.parseTextShadow=function(A){for(var _=A.match(/([^\(,\)]|\([^\)]+\))+/g),I=[],C=0;C<_.length;C++){var v=_[C].split(" ");if(v.length===1&&v[0]==="none")return"none";if(v.length>1&&v.length<5){var T=[null,null,null,null],S=f.parseLength(v.shift());if(S===null||(T[0]=S,(S=f.parseLength(v.shift()))===null))return null;if(T[1]=S,v.length===0){I.push(T);continue}if((S=f.parseLength(v[0]))!==null&&(T[2]=S,v.shift()),v.length===0){I.push(T);continue}var O=f.parseColor(v[0]);if(O===null)return null;T[3]=O,I.push(T)}}return I},f.parsePosition=function(A){var _=A.split(" "),I=function(V){return V==="center"||V==="left"||V==="top"||V==="bottom"||V==="right"};if(_.length>4)return null;for(var C=0;C<_.length;C++)if(!I(_[C])){var v=f.parseLength(_[C]);if(v===null)return null;_[C]=v}for(var T={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},S=0;S<_.length;){var O=_[S++];if(I(O)){var $={value:0,unit:"%"};_.length!==2&&S<_.length&&!I(_[S])&&($=_[S++]),O==="right"?(T.h.edge=O,T.h.offset=$):O==="bottom"?(T.v.edge=O,T.v.offset=$):O==="left"?T.h.offset=$:O==="top"&&(T.v.offset=$)}else{if(_.length!==1&&_.length!==2)return null;S===1?T.h.offset=O:T.v.offset=O}}return T},f.ComputedLength=function(A,_){this.rw=A,this.rh=_},f.ComputedLength.prototype.toUsedLength=function(A,_){return A*this.rw+_*this.rh},f.ComputedLength.prototype.isZero=function(){return this.rw===0&&this.rh===0},f.toComputedLength=function(A,_,I,C,v,T){return _==="%"&&C?new f.ComputedLength(C.rw*A/100,C.rh*A/100):_==="em"&&I?new f.ComputedLength(I.rw*A,I.rh*A):_==="c"&&v?new f.ComputedLength(A*v.rw,A*v.rh):_==="px"&&T?new f.ComputedLength(A*T.rw,A*T.rh):_==="rh"?new f.ComputedLength(0,A/100):_==="rw"?new f.ComputedLength(A/100,0):null}})(c)},3516:function(l){l.exports=function(c){var f=typeof c=="string"?c.charCodeAt(0):c;return f>=97&&f<=122||f>=65&&f<=90}},2219:function(l,c,f){var g=f(3516),y=f(395);l.exports=function(h){return g(h)||y(h)}},395:function(l){l.exports=function(c){var f=typeof c=="string"?c.charCodeAt(0):c;return f>=48&&f<=57}},3875:function(l){function c(y){if(typeof y!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(y))}function f(y,h){for(var p,E="",A=0,_=-1,I=0,C=0;C<=y.length;++C){if(C<y.length)p=y.charCodeAt(C);else{if(p===47)break;p=47}if(p===47){if(!(_===C-1||I===1))if(_!==C-1&&I===2){if(E.length<2||A!==2||E.charCodeAt(E.length-1)!==46||E.charCodeAt(E.length-2)!==46){if(E.length>2){var v=E.lastIndexOf("/");if(v!==E.length-1){v===-1?(E="",A=0):A=(E=E.slice(0,v)).length-1-E.lastIndexOf("/"),_=C,I=0;continue}}else if(E.length===2||E.length===1){E="",A=0,_=C,I=0;continue}}h&&(E.length>0?E+="/..":E="..",A=2)}else E.length>0?E+="/"+y.slice(_+1,C):E=y.slice(_+1,C),A=C-_-1;_=C,I=0}else p===46&&I!==-1?++I:I=-1}return E}var g={resolve:function(){for(var y,h="",p=!1,E=arguments.length-1;E>=-1&&!p;E--){var A;E>=0?A=arguments[E]:(y===void 0&&(y=process.cwd()),A=y),c(A),A.length!==0&&(h=A+"/"+h,p=A.charCodeAt(0)===47)}return h=f(h,!p),p?h.length>0?"/"+h:"/":h.length>0?h:"."},normalize:function(y){if(c(y),y.length===0)return".";var h=y.charCodeAt(0)===47,p=y.charCodeAt(y.length-1)===47;return(y=f(y,!h)).length!==0||h||(y="."),y.length>0&&p&&(y+="/"),h?"/"+y:y},isAbsolute:function(y){return c(y),y.length>0&&y.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var y,h=0;h<arguments.length;++h){var p=arguments[h];c(p),p.length>0&&(y===void 0?y=p:y+="/"+p)}return y===void 0?".":g.normalize(y)},relative:function(y,h){if(c(y),c(h),y===h||(y=g.resolve(y))===(h=g.resolve(h)))return"";for(var p=1;p<y.length&&y.charCodeAt(p)===47;++p);for(var E=y.length,A=E-p,_=1;_<h.length&&h.charCodeAt(_)===47;++_);for(var I=h.length-_,C=A<I?A:I,v=-1,T=0;T<=C;++T){if(T===C){if(I>C){if(h.charCodeAt(_+T)===47)return h.slice(_+T+1);if(T===0)return h.slice(_+T)}else A>C&&(y.charCodeAt(p+T)===47?v=T:T===0&&(v=0));break}var S=y.charCodeAt(p+T);if(S!==h.charCodeAt(_+T))break;S===47&&(v=T)}var O="";for(T=p+v+1;T<=E;++T)T!==E&&y.charCodeAt(T)!==47||(O.length===0?O+="..":O+="/..");return O.length>0?O+h.slice(_+v):(_+=v,h.charCodeAt(_)===47&&++_,h.slice(_))},_makeLong:function(y){return y},dirname:function(y){if(c(y),y.length===0)return".";for(var h=y.charCodeAt(0),p=h===47,E=-1,A=!0,_=y.length-1;_>=1;--_)if((h=y.charCodeAt(_))===47){if(!A){E=_;break}}else A=!1;return E===-1?p?"/":".":p&&E===1?"//":y.slice(0,E)},basename:function(y,h){if(h!==void 0&&typeof h!="string")throw new TypeError('"ext" argument must be a string');c(y);var p,E=0,A=-1,_=!0;if(h!==void 0&&h.length>0&&h.length<=y.length){if(h.length===y.length&&h===y)return"";var I=h.length-1,C=-1;for(p=y.length-1;p>=0;--p){var v=y.charCodeAt(p);if(v===47){if(!_){E=p+1;break}}else C===-1&&(_=!1,C=p+1),I>=0&&(v===h.charCodeAt(I)?--I==-1&&(A=p):(I=-1,A=C))}return E===A?A=C:A===-1&&(A=y.length),y.slice(E,A)}for(p=y.length-1;p>=0;--p)if(y.charCodeAt(p)===47){if(!_){E=p+1;break}}else A===-1&&(_=!1,A=p+1);return A===-1?"":y.slice(E,A)},extname:function(y){c(y);for(var h=-1,p=0,E=-1,A=!0,_=0,I=y.length-1;I>=0;--I){var C=y.charCodeAt(I);if(C!==47)E===-1&&(A=!1,E=I+1),C===46?h===-1?h=I:_!==1&&(_=1):h!==-1&&(_=-1);else if(!A){p=I+1;break}}return h===-1||E===-1||_===0||_===1&&h===E-1&&h===p+1?"":y.slice(h,E)},format:function(y){if(y===null||typeof y!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof y);return(function(h,p){var E=p.dir||p.root,A=p.base||(p.name||"")+(p.ext||"");return E?E===p.root?E+A:E+"/"+A:A})(0,y)},parse:function(y){c(y);var h={root:"",dir:"",base:"",ext:"",name:""};if(y.length===0)return h;var p,E=y.charCodeAt(0),A=E===47;A?(h.root="/",p=1):p=0;for(var _=-1,I=0,C=-1,v=!0,T=y.length-1,S=0;T>=p;--T)if((E=y.charCodeAt(T))!==47)C===-1&&(v=!1,C=T+1),E===46?_===-1?_=T:S!==1&&(S=1):_!==-1&&(S=-1);else if(!v){I=T+1;break}return _===-1||C===-1||S===0||S===1&&_===C-1&&_===I+1?C!==-1&&(h.base=h.name=I===0&&A?y.slice(1,C):y.slice(I,C)):(I===0&&A?(h.name=y.slice(1,_),h.base=y.slice(1,C)):(h.name=y.slice(I,_),h.base=y.slice(I,C)),h.ext=y.slice(_,C)),I>0?h.dir=y.slice(0,I-1):A&&(h.dir="/"),h},sep:"/",delimiter:":",win32:null,posix:null};g.posix=g,l.exports=g},8387:function(l,c,f){var g=f(1549),y=g.Buffer;function h(E,A){for(var _ in E)A[_]=E[_]}function p(E,A,_){return y(E,A,_)}y.from&&y.alloc&&y.allocUnsafe&&y.allocUnsafeSlow?l.exports=g:(h(g,c),c.Buffer=p),h(y,p),p.from=function(E,A,_){if(typeof E=="number")throw new TypeError("Argument must not be a number");return y(E,A,_)},p.alloc=function(E,A,_){if(typeof E!="number")throw new TypeError("Argument must be a number");var I=y(E);return A!==void 0?typeof _=="string"?I.fill(A,_):I.fill(A):I.fill(0),I},p.allocUnsafe=function(E){if(typeof E!="number")throw new TypeError("Argument must be a number");return y(E)},p.allocUnsafeSlow=function(E){if(typeof E!="number")throw new TypeError("Argument must be a number");return g.SlowBuffer(E)}},5378:function(l,c,f){(function(g){g.parser=function(M,x){return new p(M,x)},g.SAXParser=p,g.SAXStream=A,g.createStream=function(M,x){return new A(M,x)},g.MAX_BUFFER_LENGTH=65536;var y,h=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function p(M,x){if(!(this instanceof p))return new p(M,x);var U=this;(function(j){for(var he=0,de=h.length;he<de;he++)j[h[he]]=""})(U),U.q=U.c="",U.bufferCheckPosition=g.MAX_BUFFER_LENGTH,U.opt=x||{},U.opt.lowercase=U.opt.lowercase||U.opt.lowercasetags,U.looseCase=U.opt.lowercase?"toLowerCase":"toUpperCase",U.tags=[],U.closed=U.closedRoot=U.sawRoot=!1,U.tag=U.error=null,U.strict=!!M,U.noscript=!(!M&&!U.opt.noscript),U.state=oe.BEGIN,U.strictEntities=U.opt.strictEntities,U.ENTITIES=U.strictEntities?Object.create(g.XML_ENTITIES):Object.create(g.ENTITIES),U.attribList=[],U.opt.xmlns&&(U.ns=Object.create($)),U.trackPosition=U.opt.position!==!1,U.trackPosition&&(U.position=U.line=U.column=0),Ye(U,"onready")}g.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(M){function x(){}return x.prototype=M,new x}),Object.keys||(Object.keys=function(M){var x=[];for(var U in M)M.hasOwnProperty(U)&&x.push(U);return x}),p.prototype={end:function(){Xe(this)},write:function(M){var x=this;if(this.error)throw this.error;if(x.closed)return Pe(x,"Cannot write after close. Assign an onready handler.");if(M===null)return Xe(x);typeof M=="object"&&(M=M.toString());for(var U=0,j="";j=_t(M,U++),x.c=j,j;)switch(x.trackPosition&&(x.position++,j===`
`?(x.line++,x.column=0):x.column++),x.state){case oe.BEGIN:if(x.state=oe.BEGIN_WHITESPACE,j==="\uFEFF")continue;Ve(x,j);continue;case oe.BEGIN_WHITESPACE:Ve(x,j);continue;case oe.TEXT:if(x.sawRoot&&!x.closedRoot){for(var he=U-1;j&&j!=="<"&&j!=="&";)(j=_t(M,U++))&&x.trackPosition&&(x.position++,j===`
`?(x.line++,x.column=0):x.column++);x.textNode+=M.substring(he,U-1)}j!=="<"||x.sawRoot&&x.closedRoot&&!x.strict?(!ie(_,j)||x.sawRoot&&!x.closedRoot||Ze(x,"Text data outside of root node."),j==="&"?x.state=oe.TEXT_ENTITY:x.textNode+=j):(x.state=oe.OPEN_WAKA,x.startTagPosition=x.position);continue;case oe.SCRIPT:j==="<"?x.state=oe.SCRIPT_ENDING:x.script+=j;continue;case oe.SCRIPT_ENDING:j==="/"?x.state=oe.CLOSE_TAG:(x.script+="<"+j,x.state=oe.SCRIPT);continue;case oe.OPEN_WAKA:if(j==="!")x.state=oe.SGML_DECL,x.sgmlDecl="";else if(!ve(_,j))if(ve(V,j))x.state=oe.OPEN_TAG,x.tagName=j;else if(j==="/")x.state=oe.CLOSE_TAG,x.tagName="";else if(j==="?")x.state=oe.PROC_INST,x.procInstName=x.procInstBody="";else{if(Ze(x,"Unencoded <"),x.startTagPosition+1<x.position){var de=x.position-x.startTagPosition;j=new Array(de).join(" ")+j}x.textNode+="<"+j,x.state=oe.TEXT}continue;case oe.SGML_DECL:(x.sgmlDecl+j).toUpperCase()==="[CDATA["?(et(x,"onopencdata"),x.state=oe.CDATA,x.sgmlDecl="",x.cdata=""):x.sgmlDecl+j==="--"?(x.state=oe.COMMENT,x.comment="",x.sgmlDecl=""):(x.sgmlDecl+j).toUpperCase()==="DOCTYPE"?(x.state=oe.DOCTYPE,(x.doctype||x.sawRoot)&&Ze(x,"Inappropriately located doctype declaration"),x.doctype="",x.sgmlDecl=""):j===">"?(et(x,"onsgmldeclaration",x.sgmlDecl),x.sgmlDecl="",x.state=oe.TEXT):(ve(v,j)&&(x.state=oe.SGML_DECL_QUOTED),x.sgmlDecl+=j);continue;case oe.SGML_DECL_QUOTED:j===x.q&&(x.state=oe.SGML_DECL,x.q=""),x.sgmlDecl+=j;continue;case oe.DOCTYPE:j===">"?(x.state=oe.TEXT,et(x,"ondoctype",x.doctype),x.doctype=!0):(x.doctype+=j,j==="["?x.state=oe.DOCTYPE_DTD:ve(v,j)&&(x.state=oe.DOCTYPE_QUOTED,x.q=j));continue;case oe.DOCTYPE_QUOTED:x.doctype+=j,j===x.q&&(x.q="",x.state=oe.DOCTYPE);continue;case oe.DOCTYPE_DTD:x.doctype+=j,j==="]"?x.state=oe.DOCTYPE:ve(v,j)&&(x.state=oe.DOCTYPE_DTD_QUOTED,x.q=j);continue;case oe.DOCTYPE_DTD_QUOTED:x.doctype+=j,j===x.q&&(x.state=oe.DOCTYPE_DTD,x.q="");continue;case oe.COMMENT:j==="-"?x.state=oe.COMMENT_ENDING:x.comment+=j;continue;case oe.COMMENT_ENDING:j==="-"?(x.state=oe.COMMENT_ENDED,x.comment=Ee(x.opt,x.comment),x.comment&&et(x,"oncomment",x.comment),x.comment=""):(x.comment+="-"+j,x.state=oe.COMMENT);continue;case oe.COMMENT_ENDED:j!==">"?(Ze(x,"Malformed comment"),x.comment+="--"+j,x.state=oe.COMMENT):x.state=oe.TEXT;continue;case oe.CDATA:j==="]"?x.state=oe.CDATA_ENDING:x.cdata+=j;continue;case oe.CDATA_ENDING:j==="]"?x.state=oe.CDATA_ENDING_2:(x.cdata+="]"+j,x.state=oe.CDATA);continue;case oe.CDATA_ENDING_2:j===">"?(x.cdata&&et(x,"oncdata",x.cdata),et(x,"onclosecdata"),x.cdata="",x.state=oe.TEXT):j==="]"?x.cdata+="]":(x.cdata+="]]"+j,x.state=oe.CDATA);continue;case oe.PROC_INST:j==="?"?x.state=oe.PROC_INST_ENDING:ve(_,j)?x.state=oe.PROC_INST_BODY:x.procInstName+=j;continue;case oe.PROC_INST_BODY:if(!x.procInstBody&&ve(_,j))continue;j==="?"?x.state=oe.PROC_INST_ENDING:x.procInstBody+=j;continue;case oe.PROC_INST_ENDING:j===">"?(et(x,"onprocessinginstruction",{name:x.procInstName,body:x.procInstBody}),x.procInstName=x.procInstBody="",x.state=oe.TEXT):(x.procInstBody+="?"+j,x.state=oe.PROC_INST_BODY);continue;case oe.OPEN_TAG:ve(B,j)?x.tagName+=j:(at(x),j===">"?ht(x):j==="/"?x.state=oe.OPEN_TAG_SLASH:(ie(_,j)&&Ze(x,"Invalid character in tag name"),x.state=oe.ATTRIB));continue;case oe.OPEN_TAG_SLASH:j===">"?(ht(x,!0),It(x)):(Ze(x,"Forward-slash in opening tag not followed by >"),x.state=oe.ATTRIB);continue;case oe.ATTRIB:if(ve(_,j))continue;j===">"?ht(x):j==="/"?x.state=oe.OPEN_TAG_SLASH:ve(V,j)?(x.attribName=j,x.attribValue="",x.state=oe.ATTRIB_NAME):Ze(x,"Invalid attribute name");continue;case oe.ATTRIB_NAME:j==="="?x.state=oe.ATTRIB_VALUE:j===">"?(Ze(x,"Attribute without value"),x.attribValue=x.attribName,xt(x),ht(x)):ve(_,j)?x.state=oe.ATTRIB_NAME_SAW_WHITE:ve(B,j)?x.attribName+=j:Ze(x,"Invalid attribute name");continue;case oe.ATTRIB_NAME_SAW_WHITE:if(j==="=")x.state=oe.ATTRIB_VALUE;else{if(ve(_,j))continue;Ze(x,"Attribute without value"),x.tag.attributes[x.attribName]="",x.attribValue="",et(x,"onattribute",{name:x.attribName,value:""}),x.attribName="",j===">"?ht(x):ve(V,j)?(x.attribName=j,x.state=oe.ATTRIB_NAME):(Ze(x,"Invalid attribute name"),x.state=oe.ATTRIB)}continue;case oe.ATTRIB_VALUE:if(ve(_,j))continue;ve(v,j)?(x.q=j,x.state=oe.ATTRIB_VALUE_QUOTED):(Ze(x,"Unquoted attribute value"),x.state=oe.ATTRIB_VALUE_UNQUOTED,x.attribValue=j);continue;case oe.ATTRIB_VALUE_QUOTED:if(j!==x.q){j==="&"?x.state=oe.ATTRIB_VALUE_ENTITY_Q:x.attribValue+=j;continue}xt(x),x.q="",x.state=oe.ATTRIB_VALUE_CLOSED;continue;case oe.ATTRIB_VALUE_CLOSED:ve(_,j)?x.state=oe.ATTRIB:j===">"?ht(x):j==="/"?x.state=oe.OPEN_TAG_SLASH:ve(V,j)?(Ze(x,"No whitespace between attributes"),x.attribName=j,x.attribValue="",x.state=oe.ATTRIB_NAME):Ze(x,"Invalid attribute name");continue;case oe.ATTRIB_VALUE_UNQUOTED:if(ie(T,j)){j==="&"?x.state=oe.ATTRIB_VALUE_ENTITY_U:x.attribValue+=j;continue}xt(x),j===">"?ht(x):x.state=oe.ATTRIB;continue;case oe.CLOSE_TAG:if(x.tagName)j===">"?It(x):ve(B,j)?x.tagName+=j:x.script?(x.script+="</"+x.tagName,x.tagName="",x.state=oe.SCRIPT):(ie(_,j)&&Ze(x,"Invalid tagname in closing tag"),x.state=oe.CLOSE_TAG_SAW_WHITE);else{if(ve(_,j))continue;ie(V,j)?x.script?(x.script+="</"+j,x.state=oe.SCRIPT):Ze(x,"Invalid tagname in closing tag."):x.tagName=j}continue;case oe.CLOSE_TAG_SAW_WHITE:if(ve(_,j))continue;j===">"?It(x):Ze(x,"Invalid characters in closing tag");continue;case oe.TEXT_ENTITY:case oe.ATTRIB_VALUE_ENTITY_Q:case oe.ATTRIB_VALUE_ENTITY_U:var ot,wt;switch(x.state){case oe.TEXT_ENTITY:ot=oe.TEXT,wt="textNode";break;case oe.ATTRIB_VALUE_ENTITY_Q:ot=oe.ATTRIB_VALUE_QUOTED,wt="attribValue";break;case oe.ATTRIB_VALUE_ENTITY_U:ot=oe.ATTRIB_VALUE_UNQUOTED,wt="attribValue"}j===";"?(x[wt]+=Ue(x),x.entity="",x.state=ot):ve(x.entity.length?D:ne,j)?x.entity+=j:(Ze(x,"Invalid character in entity name"),x[wt]+="&"+x.entity+j,x.entity="",x.state=ot);continue;default:throw new Error(x,"Unknown state: "+x.state)}return x.position>=x.bufferCheckPosition&&(function(st){for(var nt=Math.max(g.MAX_BUFFER_LENGTH,10),rt=0,ct=0,St=h.length;ct<St;ct++){var Wt=st[h[ct]].length;if(Wt>nt)switch(h[ct]){case"textNode":Y(st);break;case"cdata":et(st,"oncdata",st.cdata),st.cdata="";break;case"script":et(st,"onscript",st.script),st.script="";break;default:Pe(st,"Max buffer length exceeded: "+h[ct])}rt=Math.max(rt,Wt)}var $t=g.MAX_BUFFER_LENGTH-rt;st.bufferCheckPosition=$t+st.position})(x),x},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var M;Y(M=this),M.cdata!==""&&(et(M,"oncdata",M.cdata),M.cdata=""),M.script!==""&&(et(M,"onscript",M.script),M.script="")}};try{y=f(182).Stream}catch{y=function(){}}var E=g.EVENTS.filter((function(M){return M!=="error"&&M!=="end"}));function A(M,x){if(!(this instanceof A))return new A(M,x);y.apply(this),this._parser=new p(M,x),this.writable=!0,this.readable=!0;var U=this;this._parser.onend=function(){U.emit("end")},this._parser.onerror=function(j){U.emit("error",j),U._parser.error=null},this._decoder=null,E.forEach((function(j){Object.defineProperty(U,"on"+j,{get:function(){return U._parser["on"+j]},set:function(he){if(!he)return U.removeAllListeners(j),U._parser["on"+j]=he,he;U.on(j,he)},enumerable:!0,configurable:!1})}))}A.prototype=Object.create(y.prototype,{constructor:{value:A}}),A.prototype.write=function(M){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(M)){if(!this._decoder){var x=f(7503).s;this._decoder=new x("utf8")}M=this._decoder.write(M)}return this._parser.write(M.toString()),this.emit("data",M),!0},A.prototype.end=function(M){return M&&M.length&&this.write(M),this._parser.end(),!0},A.prototype.on=function(M,x){var U=this;return U._parser["on"+M]||E.indexOf(M)===-1||(U._parser["on"+M]=function(){var j=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);j.splice(0,0,M),U.emit.apply(U,j)}),y.prototype.on.call(U,M,x)};var _=`\r
	 `,I="0124356789",C="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",v=`'"`,T=_+">",S="http://www.w3.org/XML/1998/namespace",O="http://www.w3.org/2000/xmlns/",$={xml:S,xmlns:O};_=X(_),I=X(I),C=X(C);var V=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,B=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,ne=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,D=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function X(M){return M.split("").reduce((function(x,U){return x[U]=!0,x}),{})}function ve(M,x){return(function(U){return Object.prototype.toString.call(U)==="[object RegExp]"})(M)?!!x.match(M):M[x]}function ie(M,x){return!ve(M,x)}v=X(v),T=X(T);var ye,Ne,Me,oe=0;for(var Ce in g.STATE={BEGIN:oe++,BEGIN_WHITESPACE:oe++,TEXT:oe++,TEXT_ENTITY:oe++,OPEN_WAKA:oe++,SGML_DECL:oe++,SGML_DECL_QUOTED:oe++,DOCTYPE:oe++,DOCTYPE_QUOTED:oe++,DOCTYPE_DTD:oe++,DOCTYPE_DTD_QUOTED:oe++,COMMENT_STARTING:oe++,COMMENT:oe++,COMMENT_ENDING:oe++,COMMENT_ENDED:oe++,CDATA:oe++,CDATA_ENDING:oe++,CDATA_ENDING_2:oe++,PROC_INST:oe++,PROC_INST_BODY:oe++,PROC_INST_ENDING:oe++,OPEN_TAG:oe++,OPEN_TAG_SLASH:oe++,ATTRIB:oe++,ATTRIB_NAME:oe++,ATTRIB_NAME_SAW_WHITE:oe++,ATTRIB_VALUE:oe++,ATTRIB_VALUE_QUOTED:oe++,ATTRIB_VALUE_CLOSED:oe++,ATTRIB_VALUE_UNQUOTED:oe++,ATTRIB_VALUE_ENTITY_Q:oe++,ATTRIB_VALUE_ENTITY_U:oe++,CLOSE_TAG:oe++,CLOSE_TAG_SAW_WHITE:oe++,SCRIPT:oe++,SCRIPT_ENDING:oe++},g.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},g.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(g.ENTITIES).forEach((function(M){var x=g.ENTITIES[M],U=typeof x=="number"?String.fromCharCode(x):x;g.ENTITIES[M]=U})),g.STATE)g.STATE[g.STATE[Ce]]=Ce;function Ye(M,x,U){M[x]&&M[x](U)}function et(M,x,U){M.textNode&&Y(M),Ye(M,x,U)}function Y(M){M.textNode=Ee(M.opt,M.textNode),M.textNode&&Ye(M,"ontext",M.textNode),M.textNode=""}function Ee(M,x){return M.trim&&(x=x.trim()),M.normalize&&(x=x.replace(/\s+/g," ")),x}function Pe(M,x){return Y(M),M.trackPosition&&(x+=`
Line: `+M.line+`
Column: `+M.column+`
Char: `+M.c),x=new Error(x),M.error=x,Ye(M,"onerror",x),M}function Xe(M){return M.sawRoot&&!M.closedRoot&&Ze(M,"Unclosed root tag"),M.state!==oe.BEGIN&&M.state!==oe.BEGIN_WHITESPACE&&M.state!==oe.TEXT&&Pe(M,"Unexpected end"),Y(M),M.c="",M.closed=!0,Ye(M,"onend"),p.call(M,M.strict,M.opt),M}function Ze(M,x){if(typeof M!="object"||!(M instanceof p))throw new Error("bad call to strictFail");M.strict&&Pe(M,x)}function at(M){M.strict||(M.tagName=M.tagName[M.looseCase]());var x=M.tags[M.tags.length-1]||M,U=M.tag={name:M.tagName,attributes:{}};M.opt.xmlns&&(U.ns=x.ns),M.attribList.length=0,et(M,"onopentagstart",U)}function jt(M,x){var U=M.indexOf(":")<0?["",M]:M.split(":"),j=U[0],he=U[1];return x&&M==="xmlns"&&(j="xmlns",he=""),{prefix:j,local:he}}function xt(M){if(M.strict||(M.attribName=M.attribName[M.looseCase]()),M.attribList.indexOf(M.attribName)!==-1||M.tag.attributes.hasOwnProperty(M.attribName))M.attribName=M.attribValue="";else{if(M.opt.xmlns){var x=jt(M.attribName,!0),U=x.prefix,j=x.local;if(U==="xmlns")if(j==="xml"&&M.attribValue!==S)Ze(M,"xml: prefix must be bound to "+S+`
Actual: `+M.attribValue);else if(j==="xmlns"&&M.attribValue!==O)Ze(M,"xmlns: prefix must be bound to "+O+`
Actual: `+M.attribValue);else{var he=M.tag,de=M.tags[M.tags.length-1]||M;he.ns===de.ns&&(he.ns=Object.create(de.ns)),he.ns[j]=M.attribValue}M.attribList.push([M.attribName,M.attribValue])}else M.tag.attributes[M.attribName]=M.attribValue,et(M,"onattribute",{name:M.attribName,value:M.attribValue});M.attribName=M.attribValue=""}}function ht(M,x){if(M.opt.xmlns){var U=M.tag,j=jt(M.tagName);U.prefix=j.prefix,U.local=j.local,U.uri=U.ns[j.prefix]||"",U.prefix&&!U.uri&&(Ze(M,"Unbound namespace prefix: "+JSON.stringify(M.tagName)),U.uri=j.prefix);var he=M.tags[M.tags.length-1]||M;U.ns&&he.ns!==U.ns&&Object.keys(U.ns).forEach((function(hn){et(M,"onopennamespace",{prefix:hn,uri:U.ns[hn]})}));for(var de=0,ot=M.attribList.length;de<ot;de++){var wt=M.attribList[de],st=wt[0],nt=wt[1],rt=jt(st,!0),ct=rt.prefix,St=rt.local,Wt=ct===""?"":U.ns[ct]||"",$t={name:st,value:nt,prefix:ct,local:St,uri:Wt};ct&&ct!=="xmlns"&&!Wt&&(Ze(M,"Unbound namespace prefix: "+JSON.stringify(ct)),$t.uri=ct),M.tag.attributes[st]=$t,et(M,"onattribute",$t)}M.attribList.length=0}M.tag.isSelfClosing=!!x,M.sawRoot=!0,M.tags.push(M.tag),et(M,"onopentag",M.tag),x||(M.noscript||M.tagName.toLowerCase()!=="script"?M.state=oe.TEXT:M.state=oe.SCRIPT,M.tag=null,M.tagName=""),M.attribName=M.attribValue="",M.attribList.length=0}function It(M){if(!M.tagName)return Ze(M,"Weird empty close tag."),M.textNode+="</>",void(M.state=oe.TEXT);if(M.script){if(M.tagName!=="script")return M.script+="</"+M.tagName+">",M.tagName="",void(M.state=oe.SCRIPT);et(M,"onscript",M.script),M.script=""}var x=M.tags.length,U=M.tagName;M.strict||(U=U[M.looseCase]());for(var j=U;x--&&M.tags[x].name!==j;)Ze(M,"Unexpected close tag");if(x<0)return Ze(M,"Unmatched closing tag: "+M.tagName),M.textNode+="</"+M.tagName+">",void(M.state=oe.TEXT);M.tagName=U;for(var he=M.tags.length;he-- >x;){var de=M.tag=M.tags.pop();M.tagName=M.tag.name,et(M,"onclosetag",M.tagName);var ot={};for(var wt in de.ns)ot[wt]=de.ns[wt];var st=M.tags[M.tags.length-1]||M;M.opt.xmlns&&de.ns!==st.ns&&Object.keys(de.ns).forEach((function(nt){var rt=de.ns[nt];et(M,"onclosenamespace",{prefix:nt,uri:rt})}))}x===0&&(M.closedRoot=!0),M.tagName=M.attribValue=M.attribName="",M.attribList.length=0,M.state=oe.TEXT}function Ue(M){var x,U=M.entity,j=U.toLowerCase(),he="";return M.ENTITIES[U]?M.ENTITIES[U]:M.ENTITIES[j]?M.ENTITIES[j]:((U=j).charAt(0)==="#"&&(U.charAt(1)==="x"?(U=U.slice(2),he=(x=parseInt(U,16)).toString(16)):(U=U.slice(1),he=(x=parseInt(U,10)).toString(10))),U=U.replace(/^0+/,""),he.toLowerCase()!==U?(Ze(M,"Invalid character entity"),"&"+M.entity+";"):String.fromCodePoint(x))}function Ve(M,x){x==="<"?(M.state=oe.OPEN_WAKA,M.startTagPosition=M.position):ie(_,x)&&(Ze(M,"Non-whitespace before first tag."),M.textNode=x,M.state=oe.TEXT)}function _t(M,x){var U="";return x<M.length&&(U=M.charAt(x)),U}oe=g.STATE,String.fromCodePoint||(ye=String.fromCharCode,Ne=Math.floor,Me=function(){var M,x,U=16384,j=[],he=-1,de=arguments.length;if(!de)return"";for(var ot="";++he<de;){var wt=Number(arguments[he]);if(!isFinite(wt)||wt<0||wt>1114111||Ne(wt)!==wt)throw RangeError("Invalid code point: "+wt);wt<=65535?j.push(wt):(M=55296+((wt-=65536)>>10),x=wt%1024+56320,j.push(M,x)),(he+1===de||j.length>U)&&(ot+=ye.apply(null,j),j.length=0)}return ot},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:Me,configurable:!0,writable:!0}):String.fromCodePoint=Me)})(c)},182:function(l,c,f){l.exports=y;var g=f(1159).EventEmitter;function y(){g.call(this)}f(1765)(y,g),y.Readable=f(2846),y.Writable=f(8318),y.Duplex=f(6138),y.Transform=f(9798),y.PassThrough=f(5472),y.finished=f(8800),y.pipeline=f(7295),y.Stream=y,y.prototype.pipe=function(h,p){var E=this;function A(O){h.writable&&h.write(O)===!1&&E.pause&&E.pause()}function _(){E.readable&&E.resume&&E.resume()}E.on("data",A),h.on("drain",_),h._isStdio||p&&p.end===!1||(E.on("end",C),E.on("close",v));var I=!1;function C(){I||(I=!0,h.end())}function v(){I||(I=!0,typeof h.destroy=="function"&&h.destroy())}function T(O){if(S(),g.listenerCount(this,"error")===0)throw O}function S(){E.removeListener("data",A),h.removeListener("drain",_),E.removeListener("end",C),E.removeListener("close",v),E.removeListener("error",T),h.removeListener("error",T),E.removeListener("end",S),E.removeListener("close",S),h.removeListener("close",S)}return E.on("error",T),h.on("error",T),E.on("end",S),E.on("close",S),h.on("close",S),h.emit("pipe",E),h}},1765:function(l){typeof Object.create=="function"?l.exports=function(c,f){f&&(c.super_=f,c.prototype=Object.create(f.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}))}:l.exports=function(c,f){if(f){c.super_=f;var g=function(){};g.prototype=f.prototype,c.prototype=new g,c.prototype.constructor=c}}},3690:function(l){var c={};function f(y,h,p){p||(p=Error);var E=(function(A){var _,I;function C(v,T,S){return A.call(this,(function(O,$,V){return typeof h=="string"?h:h(O,$,V)})(v,T,S))||this}return I=A,(_=C).prototype=Object.create(I.prototype),_.prototype.constructor=_,_.__proto__=I,C})(p);E.prototype.name=p.name,E.prototype.code=y,c[y]=E}function g(y,h){if(Array.isArray(y)){var p=y.length;return y=y.map((function(E){return String(E)})),p>2?"one of ".concat(h," ").concat(y.slice(0,p-1).join(", "),", or ")+y[p-1]:p===2?"one of ".concat(h," ").concat(y[0]," or ").concat(y[1]):"of ".concat(h," ").concat(y[0])}return"of ".concat(h," ").concat(String(y))}f("ERR_INVALID_OPT_VALUE",(function(y,h){return'The value "'+h+'" is invalid for option "'+y+'"'}),TypeError),f("ERR_INVALID_ARG_TYPE",(function(y,h,p){var E,A,_,I,C;if(typeof h=="string"&&(A="not ",h.substr(0,A.length)===A)?(E="must not be",h=h.replace(/^not /,"")):E="must be",(function(T,S,O){return(O===void 0||O>T.length)&&(O=T.length),T.substring(O-S.length,O)===S})(y," argument"))_="The ".concat(y," ").concat(E," ").concat(g(h,"type"));else{var v=(typeof C!="number"&&(C=0),C+1>(I=y).length||I.indexOf(".",C)===-1?"argument":"property");_='The "'.concat(y,'" ').concat(v," ").concat(E," ").concat(g(h,"type"))}return _+". Received type ".concat(typeof p)}),TypeError),f("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),f("ERR_METHOD_NOT_IMPLEMENTED",(function(y){return"The "+y+" method is not implemented"})),f("ERR_STREAM_PREMATURE_CLOSE","Premature close"),f("ERR_STREAM_DESTROYED",(function(y){return"Cannot call "+y+" after a stream was destroyed"})),f("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),f("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),f("ERR_STREAM_WRITE_AFTER_END","write after end"),f("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),f("ERR_UNKNOWN_ENCODING",(function(y){return"Unknown encoding: "+y}),TypeError),f("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),l.exports.q=c},6138:function(l,c,f){var g=Object.keys||function(v){var T=[];for(var S in v)T.push(S);return T};l.exports=_;var y=f(2846),h=f(8318);f(1765)(_,y);for(var p=g(h.prototype),E=0;E<p.length;E++){var A=p[E];_.prototype[A]||(_.prototype[A]=h.prototype[A])}function _(v){if(!(this instanceof _))return new _(v);y.call(this,v),h.call(this,v),this.allowHalfOpen=!0,v&&(v.readable===!1&&(this.readable=!1),v.writable===!1&&(this.writable=!1),v.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",I)))}function I(){this._writableState.ended||process.nextTick(C,this)}function C(v){v.end()}Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(_.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(_.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(v){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=v,this._writableState.destroyed=v)}})},5472:function(l,c,f){l.exports=y;var g=f(9798);function y(h){if(!(this instanceof y))return new y(h);g.call(this,h)}f(1765)(y,g),y.prototype._transform=function(h,p,E){E(null,h)}},2846:function(l,c,f){var g;l.exports=ye,ye.ReadableState=ie,f(1159).EventEmitter;var y,h=function(Ue,Ve){return Ue.listeners(Ve).length},p=f(9299),E=f(1549).Buffer,A=f.g.Uint8Array||function(){},_=f(964);y=_&&_.debuglog?_.debuglog("stream"):function(){};var I,C,v,T=f(8393),S=f(6163),O=f(7269).getHighWaterMark,$=f(3690).q,V=$.ERR_INVALID_ARG_TYPE,B=$.ERR_STREAM_PUSH_AFTER_EOF,ne=$.ERR_METHOD_NOT_IMPLEMENTED,D=$.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;f(1765)(ye,p);var X=S.errorOrDestroy,ve=["error","close","destroy","pause","resume"];function ie(Ue,Ve,_t){g=g||f(6138),Ue=Ue||{},typeof _t!="boolean"&&(_t=Ve instanceof g),this.objectMode=!!Ue.objectMode,_t&&(this.objectMode=this.objectMode||!!Ue.readableObjectMode),this.highWaterMark=O(this,Ue,"readableHighWaterMark",_t),this.buffer=new T,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Ue.emitClose!==!1,this.autoDestroy=!!Ue.autoDestroy,this.destroyed=!1,this.defaultEncoding=Ue.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Ue.encoding&&(I||(I=f(7503).s),this.decoder=new I(Ue.encoding),this.encoding=Ue.encoding)}function ye(Ue){if(g=g||f(6138),!(this instanceof ye))return new ye(Ue);var Ve=this instanceof g;this._readableState=new ie(Ue,this,Ve),this.readable=!0,Ue&&(typeof Ue.read=="function"&&(this._read=Ue.read),typeof Ue.destroy=="function"&&(this._destroy=Ue.destroy)),p.call(this)}function Ne(Ue,Ve,_t,M,x){y("readableAddChunk",Ve);var U,j=Ue._readableState;if(Ve===null)j.reading=!1,(function(he,de){if(y("onEofChunk"),!de.ended){if(de.decoder){var ot=de.decoder.end();ot&&ot.length&&(de.buffer.push(ot),de.length+=de.objectMode?1:ot.length)}de.ended=!0,de.sync?Ye(he):(de.needReadable=!1,de.emittedReadable||(de.emittedReadable=!0,et(he)))}})(Ue,j);else if(x||(U=(function(he,de){var ot,wt;return wt=de,E.isBuffer(wt)||wt instanceof A||typeof de=="string"||de===void 0||he.objectMode||(ot=new V("chunk",["string","Buffer","Uint8Array"],de)),ot})(j,Ve)),U)X(Ue,U);else if(j.objectMode||Ve&&Ve.length>0)if(typeof Ve=="string"||j.objectMode||Object.getPrototypeOf(Ve)===E.prototype||(Ve=(function(he){return E.from(he)})(Ve)),M)j.endEmitted?X(Ue,new D):Me(Ue,j,Ve,!0);else if(j.ended)X(Ue,new B);else{if(j.destroyed)return!1;j.reading=!1,j.decoder&&!_t?(Ve=j.decoder.write(Ve),j.objectMode||Ve.length!==0?Me(Ue,j,Ve,!1):Y(Ue,j)):Me(Ue,j,Ve,!1)}else M||(j.reading=!1,Y(Ue,j));return!j.ended&&(j.length<j.highWaterMark||j.length===0)}function Me(Ue,Ve,_t,M){Ve.flowing&&Ve.length===0&&!Ve.sync?(Ve.awaitDrain=0,Ue.emit("data",_t)):(Ve.length+=Ve.objectMode?1:_t.length,M?Ve.buffer.unshift(_t):Ve.buffer.push(_t),Ve.needReadable&&Ye(Ue)),Y(Ue,Ve)}Object.defineProperty(ye.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(Ue){this._readableState&&(this._readableState.destroyed=Ue)}}),ye.prototype.destroy=S.destroy,ye.prototype._undestroy=S.undestroy,ye.prototype._destroy=function(Ue,Ve){Ve(Ue)},ye.prototype.push=function(Ue,Ve){var _t,M=this._readableState;return M.objectMode?_t=!0:typeof Ue=="string"&&((Ve=Ve||M.defaultEncoding)!==M.encoding&&(Ue=E.from(Ue,Ve),Ve=""),_t=!0),Ne(this,Ue,Ve,!1,_t)},ye.prototype.unshift=function(Ue){return Ne(this,Ue,null,!0,!1)},ye.prototype.isPaused=function(){return this._readableState.flowing===!1},ye.prototype.setEncoding=function(Ue){I||(I=f(7503).s);var Ve=new I(Ue);this._readableState.decoder=Ve,this._readableState.encoding=this._readableState.decoder.encoding;for(var _t=this._readableState.buffer.head,M="";_t!==null;)M+=Ve.write(_t.data),_t=_t.next;return this._readableState.buffer.clear(),M!==""&&this._readableState.buffer.push(M),this._readableState.length=M.length,this};var oe=1073741824;function Ce(Ue,Ve){return Ue<=0||Ve.length===0&&Ve.ended?0:Ve.objectMode?1:Ue!=Ue?Ve.flowing&&Ve.length?Ve.buffer.head.data.length:Ve.length:(Ue>Ve.highWaterMark&&(Ve.highWaterMark=(function(_t){return _t>=oe?_t=oe:(_t--,_t|=_t>>>1,_t|=_t>>>2,_t|=_t>>>4,_t|=_t>>>8,_t|=_t>>>16,_t++),_t})(Ue)),Ue<=Ve.length?Ue:Ve.ended?Ve.length:(Ve.needReadable=!0,0))}function Ye(Ue){var Ve=Ue._readableState;y("emitReadable",Ve.needReadable,Ve.emittedReadable),Ve.needReadable=!1,Ve.emittedReadable||(y("emitReadable",Ve.flowing),Ve.emittedReadable=!0,process.nextTick(et,Ue))}function et(Ue){var Ve=Ue._readableState;y("emitReadable_",Ve.destroyed,Ve.length,Ve.ended),Ve.destroyed||!Ve.length&&!Ve.ended||(Ue.emit("readable"),Ve.emittedReadable=!1),Ve.needReadable=!Ve.flowing&&!Ve.ended&&Ve.length<=Ve.highWaterMark,at(Ue)}function Y(Ue,Ve){Ve.readingMore||(Ve.readingMore=!0,process.nextTick(Ee,Ue,Ve))}function Ee(Ue,Ve){for(;!Ve.reading&&!Ve.ended&&(Ve.length<Ve.highWaterMark||Ve.flowing&&Ve.length===0);){var _t=Ve.length;if(y("maybeReadMore read 0"),Ue.read(0),_t===Ve.length)break}Ve.readingMore=!1}function Pe(Ue){var Ve=Ue._readableState;Ve.readableListening=Ue.listenerCount("readable")>0,Ve.resumeScheduled&&!Ve.paused?Ve.flowing=!0:Ue.listenerCount("data")>0&&Ue.resume()}function Xe(Ue){y("readable nexttick read 0"),Ue.read(0)}function Ze(Ue,Ve){y("resume",Ve.reading),Ve.reading||Ue.read(0),Ve.resumeScheduled=!1,Ue.emit("resume"),at(Ue),Ve.flowing&&!Ve.reading&&Ue.read(0)}function at(Ue){var Ve=Ue._readableState;for(y("flow",Ve.flowing);Ve.flowing&&Ue.read()!==null;);}function jt(Ue,Ve){return Ve.length===0?null:(Ve.objectMode?_t=Ve.buffer.shift():!Ue||Ue>=Ve.length?(_t=Ve.decoder?Ve.buffer.join(""):Ve.buffer.length===1?Ve.buffer.first():Ve.buffer.concat(Ve.length),Ve.buffer.clear()):_t=Ve.buffer.consume(Ue,Ve.decoder),_t);var _t}function xt(Ue){var Ve=Ue._readableState;y("endReadable",Ve.endEmitted),Ve.endEmitted||(Ve.ended=!0,process.nextTick(ht,Ve,Ue))}function ht(Ue,Ve){if(y("endReadableNT",Ue.endEmitted,Ue.length),!Ue.endEmitted&&Ue.length===0&&(Ue.endEmitted=!0,Ve.readable=!1,Ve.emit("end"),Ue.autoDestroy)){var _t=Ve._writableState;(!_t||_t.autoDestroy&&_t.finished)&&Ve.destroy()}}function It(Ue,Ve){for(var _t=0,M=Ue.length;_t<M;_t++)if(Ue[_t]===Ve)return _t;return-1}ye.prototype.read=function(Ue){y("read",Ue),Ue=parseInt(Ue,10);var Ve=this._readableState,_t=Ue;if(Ue!==0&&(Ve.emittedReadable=!1),Ue===0&&Ve.needReadable&&((Ve.highWaterMark!==0?Ve.length>=Ve.highWaterMark:Ve.length>0)||Ve.ended))return y("read: emitReadable",Ve.length,Ve.ended),Ve.length===0&&Ve.ended?xt(this):Ye(this),null;if((Ue=Ce(Ue,Ve))===0&&Ve.ended)return Ve.length===0&&xt(this),null;var M,x=Ve.needReadable;return y("need readable",x),(Ve.length===0||Ve.length-Ue<Ve.highWaterMark)&&y("length less than watermark",x=!0),Ve.ended||Ve.reading?y("reading or ended",x=!1):x&&(y("do read"),Ve.reading=!0,Ve.sync=!0,Ve.length===0&&(Ve.needReadable=!0),this._read(Ve.highWaterMark),Ve.sync=!1,Ve.reading||(Ue=Ce(_t,Ve))),(M=Ue>0?jt(Ue,Ve):null)===null?(Ve.needReadable=Ve.length<=Ve.highWaterMark,Ue=0):(Ve.length-=Ue,Ve.awaitDrain=0),Ve.length===0&&(Ve.ended||(Ve.needReadable=!0),_t!==Ue&&Ve.ended&&xt(this)),M!==null&&this.emit("data",M),M},ye.prototype._read=function(Ue){X(this,new ne("_read()"))},ye.prototype.pipe=function(Ue,Ve){var _t=this,M=this._readableState;switch(M.pipesCount){case 0:M.pipes=Ue;break;case 1:M.pipes=[M.pipes,Ue];break;default:M.pipes.push(Ue)}M.pipesCount+=1,y("pipe count=%d opts=%j",M.pipesCount,Ve);var x=Ve&&Ve.end===!1||Ue===process.stdout||Ue===process.stderr?nt:U;function U(){y("onend"),Ue.end()}M.endEmitted?process.nextTick(x):_t.once("end",x),Ue.on("unpipe",(function rt(ct,St){y("onunpipe"),ct===_t&&St&&St.hasUnpiped===!1&&(St.hasUnpiped=!0,y("cleanup"),Ue.removeListener("close",wt),Ue.removeListener("finish",st),Ue.removeListener("drain",j),Ue.removeListener("error",ot),Ue.removeListener("unpipe",rt),_t.removeListener("end",U),_t.removeListener("end",nt),_t.removeListener("data",de),he=!0,!M.awaitDrain||Ue._writableState&&!Ue._writableState.needDrain||j())}));var j=(function(rt){return function(){var ct=rt._readableState;y("pipeOnDrain",ct.awaitDrain),ct.awaitDrain&&ct.awaitDrain--,ct.awaitDrain===0&&h(rt,"data")&&(ct.flowing=!0,at(rt))}})(_t);Ue.on("drain",j);var he=!1;function de(rt){y("ondata");var ct=Ue.write(rt);y("dest.write",ct),ct===!1&&((M.pipesCount===1&&M.pipes===Ue||M.pipesCount>1&&It(M.pipes,Ue)!==-1)&&!he&&(y("false write response, pause",M.awaitDrain),M.awaitDrain++),_t.pause())}function ot(rt){y("onerror",rt),nt(),Ue.removeListener("error",ot),h(Ue,"error")===0&&X(Ue,rt)}function wt(){Ue.removeListener("finish",st),nt()}function st(){y("onfinish"),Ue.removeListener("close",wt),nt()}function nt(){y("unpipe"),_t.unpipe(Ue)}return _t.on("data",de),(function(rt,ct,St){if(typeof rt.prependListener=="function")return rt.prependListener(ct,St);rt._events&&rt._events[ct]?Array.isArray(rt._events[ct])?rt._events[ct].unshift(St):rt._events[ct]=[St,rt._events[ct]]:rt.on(ct,St)})(Ue,"error",ot),Ue.once("close",wt),Ue.once("finish",st),Ue.emit("pipe",_t),M.flowing||(y("pipe resume"),_t.resume()),Ue},ye.prototype.unpipe=function(Ue){var Ve=this._readableState,_t={hasUnpiped:!1};if(Ve.pipesCount===0)return this;if(Ve.pipesCount===1)return Ue&&Ue!==Ve.pipes||(Ue||(Ue=Ve.pipes),Ve.pipes=null,Ve.pipesCount=0,Ve.flowing=!1,Ue&&Ue.emit("unpipe",this,_t)),this;if(!Ue){var M=Ve.pipes,x=Ve.pipesCount;Ve.pipes=null,Ve.pipesCount=0,Ve.flowing=!1;for(var U=0;U<x;U++)M[U].emit("unpipe",this,{hasUnpiped:!1});return this}var j=It(Ve.pipes,Ue);return j===-1||(Ve.pipes.splice(j,1),Ve.pipesCount-=1,Ve.pipesCount===1&&(Ve.pipes=Ve.pipes[0]),Ue.emit("unpipe",this,_t)),this},ye.prototype.on=function(Ue,Ve){var _t=p.prototype.on.call(this,Ue,Ve),M=this._readableState;return Ue==="data"?(M.readableListening=this.listenerCount("readable")>0,M.flowing!==!1&&this.resume()):Ue==="readable"&&(M.endEmitted||M.readableListening||(M.readableListening=M.needReadable=!0,M.flowing=!1,M.emittedReadable=!1,y("on readable",M.length,M.reading),M.length?Ye(this):M.reading||process.nextTick(Xe,this))),_t},ye.prototype.addListener=ye.prototype.on,ye.prototype.removeListener=function(Ue,Ve){var _t=p.prototype.removeListener.call(this,Ue,Ve);return Ue==="readable"&&process.nextTick(Pe,this),_t},ye.prototype.removeAllListeners=function(Ue){var Ve=p.prototype.removeAllListeners.apply(this,arguments);return Ue!=="readable"&&Ue!==void 0||process.nextTick(Pe,this),Ve},ye.prototype.resume=function(){var Ue=this._readableState;return Ue.flowing||(y("resume"),Ue.flowing=!Ue.readableListening,(function(Ve,_t){_t.resumeScheduled||(_t.resumeScheduled=!0,process.nextTick(Ze,Ve,_t))})(this,Ue)),Ue.paused=!1,this},ye.prototype.pause=function(){return y("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(y("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},ye.prototype.wrap=function(Ue){var Ve=this,_t=this._readableState,M=!1;for(var x in Ue.on("end",(function(){if(y("wrapped end"),_t.decoder&&!_t.ended){var j=_t.decoder.end();j&&j.length&&Ve.push(j)}Ve.push(null)})),Ue.on("data",(function(j){y("wrapped data"),_t.decoder&&(j=_t.decoder.write(j)),_t.objectMode&&j==null||(_t.objectMode||j&&j.length)&&(Ve.push(j)||(M=!0,Ue.pause()))})),Ue)this[x]===void 0&&typeof Ue[x]=="function"&&(this[x]=(function(j){return function(){return Ue[j].apply(Ue,arguments)}})(x));for(var U=0;U<ve.length;U++)Ue.on(ve[U],this.emit.bind(this,ve[U]));return this._read=function(j){y("wrapped _read",j),M&&(M=!1,Ue.resume())},this},typeof Symbol=="function"&&(ye.prototype[Symbol.asyncIterator]=function(){return C===void 0&&(C=f(7299)),C(this)}),Object.defineProperty(ye.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(ye.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(ye.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Ue){this._readableState&&(this._readableState.flowing=Ue)}}),ye._fromList=jt,Object.defineProperty(ye.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(ye.from=function(Ue,Ve){return v===void 0&&(v=f(6233)),v(ye,Ue,Ve)})},9798:function(l,c,f){l.exports=I;var g=f(3690).q,y=g.ERR_METHOD_NOT_IMPLEMENTED,h=g.ERR_MULTIPLE_CALLBACK,p=g.ERR_TRANSFORM_ALREADY_TRANSFORMING,E=g.ERR_TRANSFORM_WITH_LENGTH_0,A=f(6138);function _(T,S){var O=this._transformState;O.transforming=!1;var $=O.writecb;if($===null)return this.emit("error",new h);O.writechunk=null,O.writecb=null,S!=null&&this.push(S),$(T);var V=this._readableState;V.reading=!1,(V.needReadable||V.length<V.highWaterMark)&&this._read(V.highWaterMark)}function I(T){if(!(this instanceof I))return new I(T);A.call(this,T),this._transformState={afterTransform:_.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,T&&(typeof T.transform=="function"&&(this._transform=T.transform),typeof T.flush=="function"&&(this._flush=T.flush)),this.on("prefinish",C)}function C(){var T=this;typeof this._flush!="function"||this._readableState.destroyed?v(this,null,null):this._flush((function(S,O){v(T,S,O)}))}function v(T,S,O){if(S)return T.emit("error",S);if(O!=null&&T.push(O),T._writableState.length)throw new E;if(T._transformState.transforming)throw new p;return T.push(null)}f(1765)(I,A),I.prototype.push=function(T,S){return this._transformState.needTransform=!1,A.prototype.push.call(this,T,S)},I.prototype._transform=function(T,S,O){O(new y("_transform()"))},I.prototype._write=function(T,S,O){var $=this._transformState;if($.writecb=O,$.writechunk=T,$.writeencoding=S,!$.transforming){var V=this._readableState;($.needTransform||V.needReadable||V.length<V.highWaterMark)&&this._read(V.highWaterMark)}},I.prototype._read=function(T){var S=this._transformState;S.writechunk===null||S.transforming?S.needTransform=!0:(S.transforming=!0,this._transform(S.writechunk,S.writeencoding,S.afterTransform))},I.prototype._destroy=function(T,S){A.prototype._destroy.call(this,T,(function(O){S(O)}))}},8318:function(l,c,f){function g(Y){var Ee=this;this.next=null,this.entry=null,this.finish=function(){(function(Pe,Xe,Ze){var at=Pe.entry;for(Pe.entry=null;at;){var jt=at.callback;Xe.pendingcb--,jt(void 0),at=at.next}Xe.corkedRequestsFree.next=Pe})(Ee,Y)}}var y;l.exports=ye,ye.WritableState=ie;var h,p={deprecate:f(7839)},E=f(9299),A=f(1549).Buffer,_=f.g.Uint8Array||function(){},I=f(6163),C=f(7269).getHighWaterMark,v=f(3690).q,T=v.ERR_INVALID_ARG_TYPE,S=v.ERR_METHOD_NOT_IMPLEMENTED,O=v.ERR_MULTIPLE_CALLBACK,$=v.ERR_STREAM_CANNOT_PIPE,V=v.ERR_STREAM_DESTROYED,B=v.ERR_STREAM_NULL_VALUES,ne=v.ERR_STREAM_WRITE_AFTER_END,D=v.ERR_UNKNOWN_ENCODING,X=I.errorOrDestroy;function ve(){}function ie(Y,Ee,Pe){y=y||f(6138),Y=Y||{},typeof Pe!="boolean"&&(Pe=Ee instanceof y),this.objectMode=!!Y.objectMode,Pe&&(this.objectMode=this.objectMode||!!Y.writableObjectMode),this.highWaterMark=C(this,Y,"writableHighWaterMark",Pe),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Xe=Y.decodeStrings===!1;this.decodeStrings=!Xe,this.defaultEncoding=Y.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Ze){(function(at,jt){var xt=at._writableState,ht=xt.sync,It=xt.writecb;if(typeof It!="function")throw new O;if((function(Ve){Ve.writing=!1,Ve.writecb=null,Ve.length-=Ve.writelen,Ve.writelen=0})(xt),jt)(function(Ve,_t,M,x,U){--_t.pendingcb,M?(process.nextTick(U,x),process.nextTick(et,Ve,_t),Ve._writableState.errorEmitted=!0,X(Ve,x)):(U(x),Ve._writableState.errorEmitted=!0,X(Ve,x),et(Ve,_t))})(at,xt,ht,jt,It);else{var Ue=Ce(xt)||at.destroyed;Ue||xt.corked||xt.bufferProcessing||!xt.bufferedRequest||oe(at,xt),ht?process.nextTick(Me,at,xt,Ue,It):Me(at,xt,Ue,It)}})(Ee,Ze)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Y.emitClose!==!1,this.autoDestroy=!!Y.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new g(this)}function ye(Y){var Ee=this instanceof(y=y||f(6138));if(!Ee&&!h.call(ye,this))return new ye(Y);this._writableState=new ie(Y,this,Ee),this.writable=!0,Y&&(typeof Y.write=="function"&&(this._write=Y.write),typeof Y.writev=="function"&&(this._writev=Y.writev),typeof Y.destroy=="function"&&(this._destroy=Y.destroy),typeof Y.final=="function"&&(this._final=Y.final)),E.call(this)}function Ne(Y,Ee,Pe,Xe,Ze,at,jt){Ee.writelen=Xe,Ee.writecb=jt,Ee.writing=!0,Ee.sync=!0,Ee.destroyed?Ee.onwrite(new V("write")):Pe?Y._writev(Ze,Ee.onwrite):Y._write(Ze,at,Ee.onwrite),Ee.sync=!1}function Me(Y,Ee,Pe,Xe){Pe||(function(Ze,at){at.length===0&&at.needDrain&&(at.needDrain=!1,Ze.emit("drain"))})(Y,Ee),Ee.pendingcb--,Xe(),et(Y,Ee)}function oe(Y,Ee){Ee.bufferProcessing=!0;var Pe=Ee.bufferedRequest;if(Y._writev&&Pe&&Pe.next){var Xe=Ee.bufferedRequestCount,Ze=new Array(Xe),at=Ee.corkedRequestsFree;at.entry=Pe;for(var jt=0,xt=!0;Pe;)Ze[jt]=Pe,Pe.isBuf||(xt=!1),Pe=Pe.next,jt+=1;Ze.allBuffers=xt,Ne(Y,Ee,!0,Ee.length,Ze,"",at.finish),Ee.pendingcb++,Ee.lastBufferedRequest=null,at.next?(Ee.corkedRequestsFree=at.next,at.next=null):Ee.corkedRequestsFree=new g(Ee),Ee.bufferedRequestCount=0}else{for(;Pe;){var ht=Pe.chunk,It=Pe.encoding,Ue=Pe.callback;if(Ne(Y,Ee,!1,Ee.objectMode?1:ht.length,ht,It,Ue),Pe=Pe.next,Ee.bufferedRequestCount--,Ee.writing)break}Pe===null&&(Ee.lastBufferedRequest=null)}Ee.bufferedRequest=Pe,Ee.bufferProcessing=!1}function Ce(Y){return Y.ending&&Y.length===0&&Y.bufferedRequest===null&&!Y.finished&&!Y.writing}function Ye(Y,Ee){Y._final((function(Pe){Ee.pendingcb--,Pe&&X(Y,Pe),Ee.prefinished=!0,Y.emit("prefinish"),et(Y,Ee)}))}function et(Y,Ee){var Pe=Ce(Ee);if(Pe&&((function(Ze,at){at.prefinished||at.finalCalled||(typeof Ze._final!="function"||at.destroyed?(at.prefinished=!0,Ze.emit("prefinish")):(at.pendingcb++,at.finalCalled=!0,process.nextTick(Ye,Ze,at)))})(Y,Ee),Ee.pendingcb===0&&(Ee.finished=!0,Y.emit("finish"),Ee.autoDestroy))){var Xe=Y._readableState;(!Xe||Xe.autoDestroy&&Xe.endEmitted)&&Y.destroy()}return Pe}f(1765)(ye,E),ie.prototype.getBuffer=function(){for(var Y=this.bufferedRequest,Ee=[];Y;)Ee.push(Y),Y=Y.next;return Ee},(function(){try{Object.defineProperty(ie.prototype,"buffer",{get:p.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(h=Function.prototype[Symbol.hasInstance],Object.defineProperty(ye,Symbol.hasInstance,{value:function(Y){return!!h.call(this,Y)||this===ye&&Y&&Y._writableState instanceof ie}})):h=function(Y){return Y instanceof this},ye.prototype.pipe=function(){X(this,new $)},ye.prototype.write=function(Y,Ee,Pe){var Xe,Ze=this._writableState,at=!1,jt=!Ze.objectMode&&(Xe=Y,A.isBuffer(Xe)||Xe instanceof _);return jt&&!A.isBuffer(Y)&&(Y=(function(xt){return A.from(xt)})(Y)),typeof Ee=="function"&&(Pe=Ee,Ee=null),jt?Ee="buffer":Ee||(Ee=Ze.defaultEncoding),typeof Pe!="function"&&(Pe=ve),Ze.ending?(function(xt,ht){var It=new ne;X(xt,It),process.nextTick(ht,It)})(this,Pe):(jt||(function(xt,ht,It,Ue){var Ve;return It===null?Ve=new B:typeof It=="string"||ht.objectMode||(Ve=new T("chunk",["string","Buffer"],It)),!Ve||(X(xt,Ve),process.nextTick(Ue,Ve),!1)})(this,Ze,Y,Pe))&&(Ze.pendingcb++,at=(function(xt,ht,It,Ue,Ve,_t){if(!It){var M=(function(he,de,ot){return he.objectMode||he.decodeStrings===!1||typeof de!="string"||(de=A.from(de,ot)),de})(ht,Ue,Ve);Ue!==M&&(It=!0,Ve="buffer",Ue=M)}var x=ht.objectMode?1:Ue.length;ht.length+=x;var U=ht.length<ht.highWaterMark;if(U||(ht.needDrain=!0),ht.writing||ht.corked){var j=ht.lastBufferedRequest;ht.lastBufferedRequest={chunk:Ue,encoding:Ve,isBuf:It,callback:_t,next:null},j?j.next=ht.lastBufferedRequest:ht.bufferedRequest=ht.lastBufferedRequest,ht.bufferedRequestCount+=1}else Ne(xt,ht,!1,x,Ue,Ve,_t);return U})(this,Ze,jt,Y,Ee,Pe)),at},ye.prototype.cork=function(){this._writableState.corked++},ye.prototype.uncork=function(){var Y=this._writableState;Y.corked&&(Y.corked--,Y.writing||Y.corked||Y.bufferProcessing||!Y.bufferedRequest||oe(this,Y))},ye.prototype.setDefaultEncoding=function(Y){if(typeof Y=="string"&&(Y=Y.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Y+"").toLowerCase())>-1))throw new D(Y);return this._writableState.defaultEncoding=Y,this},Object.defineProperty(ye.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(ye.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),ye.prototype._write=function(Y,Ee,Pe){Pe(new S("_write()"))},ye.prototype._writev=null,ye.prototype.end=function(Y,Ee,Pe){var Xe=this._writableState;return typeof Y=="function"?(Pe=Y,Y=null,Ee=null):typeof Ee=="function"&&(Pe=Ee,Ee=null),Y!=null&&this.write(Y,Ee),Xe.corked&&(Xe.corked=1,this.uncork()),Xe.ending||(function(Ze,at,jt){at.ending=!0,et(Ze,at),jt&&(at.finished?process.nextTick(jt):Ze.once("finish",jt)),at.ended=!0,Ze.writable=!1})(this,Xe,Pe),this},Object.defineProperty(ye.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(ye.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(Y){this._writableState&&(this._writableState.destroyed=Y)}}),ye.prototype.destroy=I.destroy,ye.prototype._undestroy=I.undestroy,ye.prototype._destroy=function(Y,Ee){Ee(Y)}},7299:function(l,c,f){var g;function y(B,ne,D){return ne in B?Object.defineProperty(B,ne,{value:D,enumerable:!0,configurable:!0,writable:!0}):B[ne]=D,B}var h=f(8800),p=Symbol("lastResolve"),E=Symbol("lastReject"),A=Symbol("error"),_=Symbol("ended"),I=Symbol("lastPromise"),C=Symbol("handlePromise"),v=Symbol("stream");function T(B,ne){return{value:B,done:ne}}function S(B){var ne=B[p];if(ne!==null){var D=B[v].read();D!==null&&(B[I]=null,B[p]=null,B[E]=null,ne(T(D,!1)))}}function O(B){process.nextTick(S,B)}var $=Object.getPrototypeOf((function(){})),V=Object.setPrototypeOf((y(g={get stream(){return this[v]},next:function(){var B=this,ne=this[A];if(ne!==null)return Promise.reject(ne);if(this[_])return Promise.resolve(T(void 0,!0));if(this[v].destroyed)return new Promise((function(ie,ye){process.nextTick((function(){B[A]?ye(B[A]):ie(T(void 0,!0))}))}));var D,X=this[I];if(X)D=new Promise((function(ie,ye){return function(Ne,Me){ie.then((function(){ye[_]?Ne(T(void 0,!0)):ye[C](Ne,Me)}),Me)}})(X,this));else{var ve=this[v].read();if(ve!==null)return Promise.resolve(T(ve,!1));D=new Promise(this[C])}return this[I]=D,D}},Symbol.asyncIterator,(function(){return this})),y(g,"return",(function(){var B=this;return new Promise((function(ne,D){B[v].destroy(null,(function(X){X?D(X):ne(T(void 0,!0))}))}))})),g),$);l.exports=function(B){var ne,D=Object.create(V,(y(ne={},v,{value:B,writable:!0}),y(ne,p,{value:null,writable:!0}),y(ne,E,{value:null,writable:!0}),y(ne,A,{value:null,writable:!0}),y(ne,_,{value:B._readableState.endEmitted,writable:!0}),y(ne,C,{value:function(X,ve){var ie=D[v].read();ie?(D[I]=null,D[p]=null,D[E]=null,X(T(ie,!1))):(D[p]=X,D[E]=ve)},writable:!0}),ne));return D[I]=null,h(B,(function(X){if(X&&X.code!=="ERR_STREAM_PREMATURE_CLOSE"){var ve=D[E];return ve!==null&&(D[I]=null,D[p]=null,D[E]=null,ve(X)),void(D[A]=X)}var ie=D[p];ie!==null&&(D[I]=null,D[p]=null,D[E]=null,ie(T(void 0,!0))),D[_]=!0})),B.on("readable",O.bind(null,D)),D}},8393:function(l,c,f){function g(_,I){var C=Object.keys(_);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(_);I&&(v=v.filter((function(T){return Object.getOwnPropertyDescriptor(_,T).enumerable}))),C.push.apply(C,v)}return C}function y(_,I,C){return I in _?Object.defineProperty(_,I,{value:C,enumerable:!0,configurable:!0,writable:!0}):_[I]=C,_}function h(_,I){for(var C=0;C<I.length;C++){var v=I[C];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(_,v.key,v)}}var p=f(1549).Buffer,E=f(9862).inspect,A=E&&E.custom||"inspect";l.exports=(function(){function _(){(function(v,T){if(!(v instanceof T))throw new TypeError("Cannot call a class as a function")})(this,_),this.head=null,this.tail=null,this.length=0}var I,C;return I=_,C=[{key:"push",value:function(v){var T={data:v,next:null};this.length>0?this.tail.next=T:this.head=T,this.tail=T,++this.length}},{key:"unshift",value:function(v){var T={data:v,next:this.head};this.length===0&&(this.tail=T),this.head=T,++this.length}},{key:"shift",value:function(){if(this.length!==0){var v=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,v}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(v){if(this.length===0)return"";for(var T=this.head,S=""+T.data;T=T.next;)S+=v+T.data;return S}},{key:"concat",value:function(v){if(this.length===0)return p.alloc(0);for(var T,S,O,$=p.allocUnsafe(v>>>0),V=this.head,B=0;V;)T=V.data,S=$,O=B,p.prototype.copy.call(T,S,O),B+=V.data.length,V=V.next;return $}},{key:"consume",value:function(v,T){var S;return v<this.head.data.length?(S=this.head.data.slice(0,v),this.head.data=this.head.data.slice(v)):S=v===this.head.data.length?this.shift():T?this._getString(v):this._getBuffer(v),S}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(v){var T=this.head,S=1,O=T.data;for(v-=O.length;T=T.next;){var $=T.data,V=v>$.length?$.length:v;if(V===$.length?O+=$:O+=$.slice(0,v),(v-=V)==0){V===$.length?(++S,T.next?this.head=T.next:this.head=this.tail=null):(this.head=T,T.data=$.slice(V));break}++S}return this.length-=S,O}},{key:"_getBuffer",value:function(v){var T=p.allocUnsafe(v),S=this.head,O=1;for(S.data.copy(T),v-=S.data.length;S=S.next;){var $=S.data,V=v>$.length?$.length:v;if($.copy(T,T.length-v,0,V),(v-=V)==0){V===$.length?(++O,S.next?this.head=S.next:this.head=this.tail=null):(this.head=S,S.data=$.slice(V));break}++O}return this.length-=O,T}},{key:A,value:function(v,T){return E(this,(function(S){for(var O=1;O<arguments.length;O++){var $=arguments[O]!=null?arguments[O]:{};O%2?g(Object($),!0).forEach((function(V){y(S,V,$[V])})):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors($)):g(Object($)).forEach((function(V){Object.defineProperty(S,V,Object.getOwnPropertyDescriptor($,V))}))}return S})({},T,{depth:0,customInspect:!1}))}}],C&&h(I.prototype,C),_})()},6163:function(l){function c(y,h){g(y,h),f(y)}function f(y){y._writableState&&!y._writableState.emitClose||y._readableState&&!y._readableState.emitClose||y.emit("close")}function g(y,h){y.emit("error",h)}l.exports={destroy:function(y,h){var p=this,E=this._readableState&&this._readableState.destroyed,A=this._writableState&&this._writableState.destroyed;return E||A?(h?h(y):y&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(g,this,y)):process.nextTick(g,this,y)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(y||null,(function(_){!h&&_?p._writableState?p._writableState.errorEmitted?process.nextTick(f,p):(p._writableState.errorEmitted=!0,process.nextTick(c,p,_)):process.nextTick(c,p,_):h?(process.nextTick(f,p),h(_)):process.nextTick(f,p)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(y,h){var p=y._readableState,E=y._writableState;p&&p.autoDestroy||E&&E.autoDestroy?y.destroy(h):y.emit("error",h)}}},8800:function(l,c,f){var g=f(3690).q.ERR_STREAM_PREMATURE_CLOSE;function y(){}l.exports=function h(p,E,A){if(typeof E=="function")return h(p,null,E);E||(E={}),A=(function(ne){var D=!1;return function(){if(!D){D=!0;for(var X=arguments.length,ve=new Array(X),ie=0;ie<X;ie++)ve[ie]=arguments[ie];ne.apply(this,ve)}}})(A||y);var _=E.readable||E.readable!==!1&&p.readable,I=E.writable||E.writable!==!1&&p.writable,C=function(){p.writable||T()},v=p._writableState&&p._writableState.finished,T=function(){I=!1,v=!0,_||A.call(p)},S=p._readableState&&p._readableState.endEmitted,O=function(){_=!1,S=!0,I||A.call(p)},$=function(ne){A.call(p,ne)},V=function(){var ne;return _&&!S?(p._readableState&&p._readableState.ended||(ne=new g),A.call(p,ne)):I&&!v?(p._writableState&&p._writableState.ended||(ne=new g),A.call(p,ne)):void 0},B=function(){p.req.on("finish",T)};return(function(ne){return ne.setHeader&&typeof ne.abort=="function"})(p)?(p.on("complete",T),p.on("abort",V),p.req?B():p.on("request",B)):I&&!p._writableState&&(p.on("end",C),p.on("close",C)),p.on("end",O),p.on("finish",T),E.error!==!1&&p.on("error",$),p.on("close",V),function(){p.removeListener("complete",T),p.removeListener("abort",V),p.removeListener("request",B),p.req&&p.req.removeListener("finish",T),p.removeListener("end",C),p.removeListener("close",C),p.removeListener("finish",T),p.removeListener("end",O),p.removeListener("error",$),p.removeListener("close",V)}}},6233:function(l){l.exports=function(){throw new Error("Readable.from is not available in the browser")}},7295:function(l,c,f){var g,y=f(3690).q,h=y.ERR_MISSING_ARGS,p=y.ERR_STREAM_DESTROYED;function E(v){if(v)throw v}function A(v,T,S,O){O=(function(B){var ne=!1;return function(){ne||(ne=!0,B.apply(void 0,arguments))}})(O);var $=!1;v.on("close",(function(){$=!0})),g===void 0&&(g=f(8800)),g(v,{readable:T,writable:S},(function(B){if(B)return O(B);$=!0,O()}));var V=!1;return function(B){if(!$&&!V)return V=!0,(function(ne){return ne.setHeader&&typeof ne.abort=="function"})(v)?v.abort():typeof v.destroy=="function"?v.destroy():void O(B||new p("pipe"))}}function _(v){v()}function I(v,T){return v.pipe(T)}function C(v){return v.length?typeof v[v.length-1]!="function"?E:v.pop():E}l.exports=function(){for(var v=arguments.length,T=new Array(v),S=0;S<v;S++)T[S]=arguments[S];var O,$=C(T);if(Array.isArray(T[0])&&(T=T[0]),T.length<2)throw new h("streams");var V=T.map((function(B,ne){var D=ne<T.length-1;return A(B,D,ne>0,(function(X){O||(O=X),X&&V.forEach(_),D||(V.forEach(_),$(O))}))}));return T.reduce(I)}},7269:function(l,c,f){var g=f(3690).q.ERR_INVALID_OPT_VALUE;l.exports={getHighWaterMark:function(y,h,p,E){var A=(function(_,I,C){return _.highWaterMark!=null?_.highWaterMark:I?_[C]:null})(h,E,p);if(A!=null){if(!isFinite(A)||Math.floor(A)!==A||A<0)throw new g(E?p:"highWaterMark",A);return Math.floor(A)}return y.objectMode?16:16384}}},9299:function(l,c,f){l.exports=f(1159).EventEmitter},7503:function(l,c,f){var g=f(8387).Buffer,y=g.isEncoding||function(S){switch((S=""+S)&&S.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function h(S){var O;switch(this.encoding=(function($){var V=(function(B){if(!B)return"utf8";for(var ne;;)switch(B){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return B;default:if(ne)return;B=(""+B).toLowerCase(),ne=!0}})($);if(typeof V!="string"&&(g.isEncoding===y||!y($)))throw new Error("Unknown encoding: "+$);return V||$})(S),this.encoding){case"utf16le":this.text=A,this.end=_,O=4;break;case"utf8":this.fillLast=E,O=4;break;case"base64":this.text=I,this.end=C,O=3;break;default:return this.write=v,void(this.end=T)}this.lastNeed=0,this.lastTotal=0,this.lastChar=g.allocUnsafe(O)}function p(S){return S<=127?0:S>>5==6?2:S>>4==14?3:S>>3==30?4:S>>6==2?-1:-2}function E(S){var O=this.lastTotal-this.lastNeed,$=(function(V,B,ne){if((192&B[0])!=128)return V.lastNeed=0,"";if(V.lastNeed>1&&B.length>1){if((192&B[1])!=128)return V.lastNeed=1,"";if(V.lastNeed>2&&B.length>2&&(192&B[2])!=128)return V.lastNeed=2,""}})(this,S);return $!==void 0?$:this.lastNeed<=S.length?(S.copy(this.lastChar,O,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(S.copy(this.lastChar,O,0,S.length),void(this.lastNeed-=S.length))}function A(S,O){if((S.length-O)%2==0){var $=S.toString("utf16le",O);if($){var V=$.charCodeAt($.length-1);if(V>=55296&&V<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=S[S.length-2],this.lastChar[1]=S[S.length-1],$.slice(0,-1)}return $}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=S[S.length-1],S.toString("utf16le",O,S.length-1)}function _(S){var O=S&&S.length?this.write(S):"";if(this.lastNeed){var $=this.lastTotal-this.lastNeed;return O+this.lastChar.toString("utf16le",0,$)}return O}function I(S,O){var $=(S.length-O)%3;return $===0?S.toString("base64",O):(this.lastNeed=3-$,this.lastTotal=3,$===1?this.lastChar[0]=S[S.length-1]:(this.lastChar[0]=S[S.length-2],this.lastChar[1]=S[S.length-1]),S.toString("base64",O,S.length-$))}function C(S){var O=S&&S.length?this.write(S):"";return this.lastNeed?O+this.lastChar.toString("base64",0,3-this.lastNeed):O}function v(S){return S.toString(this.encoding)}function T(S){return S&&S.length?this.write(S):""}c.s=h,h.prototype.write=function(S){if(S.length===0)return"";var O,$;if(this.lastNeed){if((O=this.fillLast(S))===void 0)return"";$=this.lastNeed,this.lastNeed=0}else $=0;return $<S.length?O?O+this.text(S,$):this.text(S,$):O||""},h.prototype.end=function(S){var O=S&&S.length?this.write(S):"";return this.lastNeed?O+"":O},h.prototype.text=function(S,O){var $=(function(B,ne,D){var X=ne.length-1;if(X<D)return 0;var ve=p(ne[X]);return ve>=0?(ve>0&&(B.lastNeed=ve-1),ve):--X<D||ve===-2?0:(ve=p(ne[X]))>=0?(ve>0&&(B.lastNeed=ve-2),ve):--X<D||ve===-2?0:(ve=p(ne[X]))>=0?(ve>0&&(ve===2?ve=0:B.lastNeed=ve-3),ve):0})(this,S,O);if(!this.lastNeed)return S.toString("utf8",O);this.lastTotal=$;var V=S.length-($-this.lastNeed);return S.copy(this.lastChar,0,V),S.toString("utf8",O,V)},h.prototype.fillLast=function(S){if(this.lastNeed<=S.length)return S.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);S.copy(this.lastChar,this.lastTotal-this.lastNeed,0,S.length),this.lastNeed-=S.length}},1067:function(l,c,f){var g;(function(y,h){var p="function",E="undefined",A="object",_="string",I="major",C="model",v="name",T="type",S="vendor",O="version",$="architecture",V="console",B="mobile",ne="tablet",D="smarttv",X="wearable",ve="embedded",ie="Amazon",ye="Apple",Ne="ASUS",Me="BlackBerry",oe="Browser",Ce="Chrome",Ye="Firefox",et="Google",Y="Huawei",Ee="LG",Pe="Microsoft",Xe="Motorola",Ze="Opera",at="Samsung",jt="Sharp",xt="Sony",ht="Xiaomi",It="Zebra",Ue="Facebook",Ve="Chromium OS",_t="Mac OS",M=function(ct){for(var St={},Wt=0;Wt<ct.length;Wt++)St[ct[Wt].toUpperCase()]=ct[Wt];return St},x=function(ct,St){return typeof ct===_&&U(St).indexOf(U(ct))!==-1},U=function(ct){return ct.toLowerCase()},j=function(ct,St){if(typeof ct===_)return ct=ct.replace(/^\s\s*/,""),typeof St===E?ct:ct.substring(0,500)},he=function(ct,St){for(var Wt,$t,hn,dn,_n,En,tr=0;tr<St.length&&!_n;){var Ir=St[tr],Fr=St[tr+1];for(Wt=$t=0;Wt<Ir.length&&!_n&&Ir[Wt];)if(_n=Ir[Wt++].exec(ct))for(hn=0;hn<Fr.length;hn++)En=_n[++$t],typeof(dn=Fr[hn])===A&&dn.length>0?dn.length===2?typeof dn[1]==p?this[dn[0]]=dn[1].call(this,En):this[dn[0]]=dn[1]:dn.length===3?typeof dn[1]!==p||dn[1].exec&&dn[1].test?this[dn[0]]=En?En.replace(dn[1],dn[2]):h:this[dn[0]]=En?dn[1].call(this,En,dn[2]):h:dn.length===4&&(this[dn[0]]=En?dn[3].call(this,En.replace(dn[1],dn[2])):h):this[dn]=En||h;tr+=2}},de=function(ct,St){for(var Wt in St)if(typeof St[Wt]===A&&St[Wt].length>0){for(var $t=0;$t<St[Wt].length;$t++)if(x(St[Wt][$t],ct))return Wt==="?"?h:Wt}else if(x(St[Wt],ct))return Wt==="?"?h:Wt;return ct},ot={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},wt={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[O,[v,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[O,[v,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[v,O],[/opios[\/ ]+([\w\.]+)/i],[O,[v,Ze+" Mini"]],[/\bopr\/([\w\.]+)/i],[O,[v,Ze]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[O,[v,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[v,O],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[O,[v,"UC"+oe]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[O,[v,"WeChat"]],[/konqueror\/([\w\.]+)/i],[O,[v,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[O,[v,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[O,[v,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[O,[v,"Smart Lenovo "+oe]],[/(avast|avg)\/([\w\.]+)/i],[[v,/(.+)/,"$1 Secure "+oe],O],[/\bfocus\/([\w\.]+)/i],[O,[v,Ye+" Focus"]],[/\bopt\/([\w\.]+)/i],[O,[v,Ze+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[O,[v,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[O,[v,"Dolphin"]],[/coast\/([\w\.]+)/i],[O,[v,Ze+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[O,[v,"MIUI "+oe]],[/fxios\/([-\w\.]+)/i],[O,[v,Ye]],[/\bqihu|(qi?ho?o?|360)browser/i],[[v,"360 "+oe]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[v,/(.+)/,"$1 "+oe],O],[/samsungbrowser\/([\w\.]+)/i],[O,[v,at+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[v,/_/g," "],O],[/metasr[\/ ]?([\d\.]+)/i],[O,[v,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[v,"Sogou Mobile"],O],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[v,O],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[v],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[v,Ue],O],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[v,O],[/\bgsa\/([\w\.]+) .*safari\//i],[O,[v,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[O,[v,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[O,[v,Ce+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[v,Ce+" WebView"],O],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[O,[v,"Android "+oe]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[v,O],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[O,[v,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[O,v],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[v,[O,de,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[v,O],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[v,"Netscape"],O],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[O,[v,Ye+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[v,O],[/(cobalt)\/([\w\.]+)/i],[v,[O,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[$,"amd64"]],[/(ia32(?=;))/i],[[$,U]],[/((?:i[346]|x)86)[;\)]/i],[[$,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[$,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[$,"armhf"]],[/windows (ce|mobile); ppc;/i],[[$,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[$,/ower/,"",U]],[/(sun4\w)[;\)]/i],[[$,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[$,U]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[C,[S,at],[T,ne]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[C,[S,at],[T,B]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[C,[S,ye],[T,B]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[C,[S,ye],[T,ne]],[/(macintosh);/i],[C,[S,ye]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[C,[S,jt],[T,B]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[C,[S,Y],[T,ne]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[C,[S,Y],[T,B]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[C,/_/g," "],[S,ht],[T,B]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[C,/_/g," "],[S,ht],[T,ne]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[C,[S,"OPPO"],[T,B]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[C,[S,"Vivo"],[T,B]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[C,[S,"Realme"],[T,B]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[C,[S,Xe],[T,B]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[C,[S,Xe],[T,ne]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[C,[S,Ee],[T,ne]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[C,[S,Ee],[T,B]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[C,[S,"Lenovo"],[T,ne]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[C,/_/g," "],[S,"Nokia"],[T,B]],[/(pixel c)\b/i],[C,[S,et],[T,ne]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[C,[S,et],[T,B]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[C,[S,xt],[T,B]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[C,"Xperia Tablet"],[S,xt],[T,ne]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[C,[S,"OnePlus"],[T,B]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[C,[S,ie],[T,ne]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[C,/(.+)/g,"Fire Phone $1"],[S,ie],[T,B]],[/(playbook);[-\w\),; ]+(rim)/i],[C,S,[T,ne]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[C,[S,Me],[T,B]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[C,[S,Ne],[T,ne]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[C,[S,Ne],[T,B]],[/(nexus 9)/i],[C,[S,"HTC"],[T,ne]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[S,[C,/_/g," "],[T,B]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[C,[S,"Acer"],[T,ne]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[C,[S,"Meizu"],[T,B]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[C,[S,"Ulefone"],[T,B]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[S,C,[T,B]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[S,C,[T,ne]],[/(surface duo)/i],[C,[S,Pe],[T,ne]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[C,[S,"Fairphone"],[T,B]],[/(u304aa)/i],[C,[S,"AT&T"],[T,B]],[/\bsie-(\w*)/i],[C,[S,"Siemens"],[T,B]],[/\b(rct\w+) b/i],[C,[S,"RCA"],[T,ne]],[/\b(venue[\d ]{2,7}) b/i],[C,[S,"Dell"],[T,ne]],[/\b(q(?:mv|ta)\w+) b/i],[C,[S,"Verizon"],[T,ne]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[C,[S,"Barnes & Noble"],[T,ne]],[/\b(tm\d{3}\w+) b/i],[C,[S,"NuVision"],[T,ne]],[/\b(k88) b/i],[C,[S,"ZTE"],[T,ne]],[/\b(nx\d{3}j) b/i],[C,[S,"ZTE"],[T,B]],[/\b(gen\d{3}) b.+49h/i],[C,[S,"Swiss"],[T,B]],[/\b(zur\d{3}) b/i],[C,[S,"Swiss"],[T,ne]],[/\b((zeki)?tb.*\b) b/i],[C,[S,"Zeki"],[T,ne]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[S,"Dragon Touch"],C,[T,ne]],[/\b(ns-?\w{0,9}) b/i],[C,[S,"Insignia"],[T,ne]],[/\b((nxa|next)-?\w{0,9}) b/i],[C,[S,"NextBook"],[T,ne]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[S,"Voice"],C,[T,B]],[/\b(lvtel\-)?(v1[12]) b/i],[[S,"LvTel"],C,[T,B]],[/\b(ph-1) /i],[C,[S,"Essential"],[T,B]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[C,[S,"Envizen"],[T,ne]],[/\b(trio[-\w\. ]+) b/i],[C,[S,"MachSpeed"],[T,ne]],[/\btu_(1491) b/i],[C,[S,"Rotor"],[T,ne]],[/(shield[\w ]+) b/i],[C,[S,"Nvidia"],[T,ne]],[/(sprint) (\w+)/i],[S,C,[T,B]],[/(kin\.[onetw]{3})/i],[[C,/\./g," "],[S,Pe],[T,B]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[C,[S,It],[T,ne]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[C,[S,It],[T,B]],[/smart-tv.+(samsung)/i],[S,[T,D]],[/hbbtv.+maple;(\d+)/i],[[C,/^/,"SmartTV"],[S,at],[T,D]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[S,Ee],[T,D]],[/(apple) ?tv/i],[S,[C,ye+" TV"],[T,D]],[/crkey/i],[[C,Ce+"cast"],[S,et],[T,D]],[/droid.+aft(\w+)( bui|\))/i],[C,[S,ie],[T,D]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[C,[S,jt],[T,D]],[/(bravia[\w ]+)( bui|\))/i],[C,[S,xt],[T,D]],[/(mitv-\w{5}) bui/i],[C,[S,ht],[T,D]],[/Hbbtv.*(technisat) (.*);/i],[S,C,[T,D]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[S,j],[C,j],[T,D]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[T,D]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[S,C,[T,V]],[/droid.+; (shield) bui/i],[C,[S,"Nvidia"],[T,V]],[/(playstation [345portablevi]+)/i],[C,[S,xt],[T,V]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[C,[S,Pe],[T,V]],[/((pebble))app/i],[S,C,[T,X]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[C,[S,ye],[T,X]],[/droid.+; (glass) \d/i],[C,[S,et],[T,X]],[/droid.+; (wt63?0{2,3})\)/i],[C,[S,It],[T,X]],[/(quest( 2| pro)?)/i],[C,[S,Ue],[T,X]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[S,[T,ve]],[/(aeobc)\b/i],[C,[S,ie],[T,ve]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[C,[T,B]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[C,[T,ne]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[T,ne]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[T,B]],[/(android[-\w\. ]{0,9});.+buil/i],[C,[S,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[O,[v,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[O,[v,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[v,O],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[O,v]],os:[[/microsoft (windows) (vista|xp)/i],[v,O],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[v,[O,de,ot]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[O,de,ot],[v,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[O,/_/g,"."],[v,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[v,_t],[O,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[O,v],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[v,O],[/\(bb(10);/i],[O,[v,Me]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[O,[v,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[O,[v,Ye+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[O,[v,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[O,[v,"watchOS"]],[/crkey\/([\d\.]+)/i],[O,[v,Ce+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[v,Ve],O],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[v,O],[/(sunos) ?([\w\.\d]*)/i],[[v,"Solaris"],O],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[v,O]]},st=function(ct,St){if(typeof ct===A&&(St=ct,ct=h),!(this instanceof st))return new st(ct,St).getResult();var Wt=typeof y!==E&&y.navigator?y.navigator:h,$t=ct||(Wt&&Wt.userAgent?Wt.userAgent:""),hn=Wt&&Wt.userAgentData?Wt.userAgentData:h,dn=St?(function(En,tr){var Ir={};for(var Fr in En)tr[Fr]&&tr[Fr].length%2==0?Ir[Fr]=tr[Fr].concat(En[Fr]):Ir[Fr]=En[Fr];return Ir})(wt,St):wt,_n=Wt&&Wt.userAgent==$t;return this.getBrowser=function(){var En,tr={};return tr[v]=h,tr[O]=h,he.call(tr,$t,dn.browser),tr[I]=typeof(En=tr[O])===_?En.replace(/[^\d\.]/g,"").split(".")[0]:h,_n&&Wt&&Wt.brave&&typeof Wt.brave.isBrave==p&&(tr[v]="Brave"),tr},this.getCPU=function(){var En={};return En[$]=h,he.call(En,$t,dn.cpu),En},this.getDevice=function(){var En={};return En[S]=h,En[C]=h,En[T]=h,he.call(En,$t,dn.device),_n&&!En[T]&&hn&&hn.mobile&&(En[T]=B),_n&&En[C]=="Macintosh"&&Wt&&typeof Wt.standalone!==E&&Wt.maxTouchPoints&&Wt.maxTouchPoints>2&&(En[C]="iPad",En[T]=ne),En},this.getEngine=function(){var En={};return En[v]=h,En[O]=h,he.call(En,$t,dn.engine),En},this.getOS=function(){var En={};return En[v]=h,En[O]=h,he.call(En,$t,dn.os),_n&&!En[v]&&hn&&hn.platform!="Unknown"&&(En[v]=hn.platform.replace(/chrome os/i,Ve).replace(/macos/i,_t)),En},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return $t},this.setUA=function(En){return $t=typeof En===_&&En.length>500?j(En,500):En,this},this.setUA($t),this};st.VERSION="1.0.37",st.BROWSER=M([v,O,I]),st.CPU=M([$]),st.DEVICE=M([C,S,T,V,B,D,ne,X,ve]),st.ENGINE=st.OS=M([v,O]),typeof c!==E?(l.exports&&(c=l.exports=st),c.UAParser=st):f.amdO?(g=(function(){return st}).call(c,f,c,l))===h||(l.exports=g):typeof y!==E&&(y.UAParser=st);var nt=typeof y!==E&&(y.jQuery||y.Zepto);if(nt&&!nt.ua){var rt=new st;nt.ua=rt.getResult(),nt.ua.get=function(){return rt.getUA()},nt.ua.set=function(ct){rt.setUA(ct);var St=rt.getResult();for(var Wt in St)nt.ua[Wt]=St[Wt]}}})(typeof window=="object"?window:this)},7839:function(l,c,f){function g(y){try{if(!f.g.localStorage)return!1}catch{return!1}var h=f.g.localStorage[y];return h!=null&&String(h).toLowerCase()==="true"}l.exports=function(y,h){if(g("noDeprecation"))return y;var p=!1;return function(){if(!p){if(g("throwDeprecation"))throw new Error(h);g("traceDeprecation")?console.trace(h):console.warn(h),p=!0}return y.apply(this,arguments)}}},9862:function(){},964:function(){},3165:function(l){l.exports=JSON.parse('["mni-beng-in","mni-mtei-in","sat-deva-in","sat-olck-in","shi-latn-ma","shi-tfng-ma","vai-latn-lr","vai-vaii-lr","yue-hans-cn","yue-hant-hk","az-arab-ir","az-cyrl-az","az-latn-az","bm-nkoo-ml","bs-cyrl-ba","bs-latn-ba","en-dsrt-us","ff-adlm-gn","ff-latn-sn","ha-arab-ng","hi-latn-in","iu-latn-ca","ks-arab-in","ks-deva-in","mn-mong-cn","ms-arab-my","pa-arab-pk","pa-guru-in","sd-arab-pk","sd-deva-in","sr-cyrl-rs","sr-latn-rs","su-latn-id","uz-arab-af","uz-cyrl-uz","uz-latn-uz","zh-hans-cn","zh-hant-tw","mni-beng","sat-olck","shi-tfng","vai-vaii","yue-hant","az-latn","bs-latn","ff-latn","jbo-001","ks-arab","pa-guru","prg-001","sd-arab","sr-cyrl","su-latn","uz-latn","zh-hans","agq-cm","ar-001","arn-cl","asa-tz","ast-es","bas-cm","bem-zm","bez-tz","bgn-pk","blt-vn","brx-in","bss-cm","byn-er","cad-us","cch-ng","ccp-bd","ceb-ph","cgg-ug","chr-us","cic-us","ckb-iq","dav-ke","dje-ne","doi-in","dsb-de","dua-cm","dyo-sn","ebu-ke","eo-001","ewo-cm","fil-ph","fur-it","gaa-gh","gez-et","gsw-ch","guz-ke","haw-us","hsb-de","ia-001","ife-tg","io-001","jgo-cm","jmc-tz","kab-dz","kaj-ng","kam-ke","kcg-ng","kde-tz","kea-cv","ken-cm","khq-ml","kkj-cm","kln-ke","kok-in","kpe-lr","ksb-tz","ksf-cm","ksh-de","lag-tz","lkt-us","lrc-ir","luo-ke","luy-ke","mai-in","mas-ke","mer-ke","mfe-mu","mgh-mz","mgo-cm","moh-ca","mua-cm","mus-us","myv-ru","mzn-ir","naq-na","nds-de","nmg-cm","nnh-cm","nqo-gn","nso-za","nus-ss","nyn-ug","osa-us","pcm-ng","quc-gt","rof-tz","rwk-tz","sah-ru","saq-ke","sbp-tz","scn-it","sdh-ir","seh-mz","ses-ml","sid-et","sma-se","smj-se","smn-fi","sms-fi","ssy-er","syr-iq","szl-pl","teo-ug","tig-er","trv-tw","trw-pk","twq-ne","tzm-ma","vo-001","vun-tz","wae-ch","wal-et","wbp-au","xog-ug","yav-cm","yi-001","zgh-ma","aa-et","af-za","ak-gh","am-et","an-es","as-in","ba-ru","be-by","bg-bg","bm-ml","bn-bd","bo-cn","br-fr","ca-es","ce-ru","co-fr","cs-cz","cu-ru","cv-ru","cy-gb","da-dk","de-de","dv-mv","dz-bt","ee-gh","el-gr","en-us","es-es","et-ee","eu-es","fa-ir","fi-fi","fo-fo","fr-fr","fy-nl","ga-ie","gd-gb","gl-es","gn-py","gu-in","gv-im","ha-ng","he-il","hi-in","hr-hr","hu-hu","hy-am","id-id","ig-ng","ii-cn","is-is","it-it","iu-ca","ja-jp","jv-id","ka-ge","ki-ke","kk-kz","kl-gl","km-kh","kn-in","ko-kr","ku-tr","kw-gb","ky-kg","lb-lu","lg-ug","ln-cd","lo-la","lt-lt","lu-cd","lv-lv","mg-mg","mi-nz","mk-mk","ml-in","mn-mn","mr-in","ms-my","mt-mt","my-mm","nb-no","nd-zw","ne-np","nl-nl","nn-no","nr-za","nv-us","ny-mw","oc-fr","om-et","or-in","os-ge","pl-pl","ps-af","pt-br","qu-pe","rm-ch","rn-bi","ro-ro","ru-ru","rw-rw","sa-in","sc-it","se-no","sg-cf","si-lk","sk-sk","sl-si","sn-zw","so-so","sq-al","ss-za","st-za","sv-se","sw-tz","ta-in","te-in","tg-tj","th-th","ti-et","tk-tm","tn-za","to-to","tr-tr","ts-za","tt-ru","ug-cn","uk-ua","ur-pk","ve-za","vi-vn","wa-be","wo-sn","xh-za","yo-ng","zu-za"]')},5813:function(l){l.exports=JSON.parse('[{"from":{"field":"script","value":"qaai"},"to":{"field":"script","value":"zinh"}},{"from":{"field":"region","value":"bu"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"ct"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"dd"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"dy"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"fx"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"hv"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"jt"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"mi"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"nh"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"nq"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"pu"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"pz"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"qu"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"rh"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"tp"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"uk"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"vd"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"wk"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"yd"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"zr"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"230"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"280"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"736"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"886"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"958"},"to":{"field":"region","value":"aa"}},{"from":{"field":"region","value":"020"},"to":{"field":"region","value":"ad"}},{"from":{"field":"region","value":"784"},"to":{"field":"region","value":"ae"}},{"from":{"field":"region","value":"004"},"to":{"field":"region","value":"af"}},{"from":{"field":"region","value":"028"},"to":{"field":"region","value":"ag"}},{"from":{"field":"region","value":"660"},"to":{"field":"region","value":"ai"}},{"from":{"field":"region","value":"008"},"to":{"field":"region","value":"al"}},{"from":{"field":"region","value":"051"},"to":{"field":"region","value":"am"}},{"from":{"field":"region","value":"024"},"to":{"field":"region","value":"ao"}},{"from":{"field":"region","value":"010"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"032"},"to":{"field":"region","value":"ar"}},{"from":{"field":"region","value":"016"},"to":{"field":"region","value":"as"}},{"from":{"field":"region","value":"040"},"to":{"field":"region","value":"at"}},{"from":{"field":"region","value":"036"},"to":{"field":"region","value":"au"}},{"from":{"field":"region","value":"533"},"to":{"field":"region","value":"aw"}},{"from":{"field":"region","value":"248"},"to":{"field":"region","value":"ax"}},{"from":{"field":"region","value":"031"},"to":{"field":"region","value":"az"}},{"from":{"field":"region","value":"070"},"to":{"field":"region","value":"ba"}},{"from":{"field":"region","value":"052"},"to":{"field":"region","value":"bb"}},{"from":{"field":"region","value":"050"},"to":{"field":"region","value":"bd"}},{"from":{"field":"region","value":"056"},"to":{"field":"region","value":"be"}},{"from":{"field":"region","value":"854"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"100"},"to":{"field":"region","value":"bg"}},{"from":{"field":"region","value":"048"},"to":{"field":"region","value":"bh"}},{"from":{"field":"region","value":"108"},"to":{"field":"region","value":"bi"}},{"from":{"field":"region","value":"204"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"652"},"to":{"field":"region","value":"bl"}},{"from":{"field":"region","value":"060"},"to":{"field":"region","value":"bm"}},{"from":{"field":"region","value":"096"},"to":{"field":"region","value":"bn"}},{"from":{"field":"region","value":"068"},"to":{"field":"region","value":"bo"}},{"from":{"field":"region","value":"535"},"to":{"field":"region","value":"bq"}},{"from":{"field":"region","value":"076"},"to":{"field":"region","value":"br"}},{"from":{"field":"region","value":"044"},"to":{"field":"region","value":"bs"}},{"from":{"field":"region","value":"064"},"to":{"field":"region","value":"bt"}},{"from":{"field":"region","value":"104"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"074"},"to":{"field":"region","value":"bv"}},{"from":{"field":"region","value":"072"},"to":{"field":"region","value":"bw"}},{"from":{"field":"region","value":"112"},"to":{"field":"region","value":"by"}},{"from":{"field":"region","value":"084"},"to":{"field":"region","value":"bz"}},{"from":{"field":"region","value":"124"},"to":{"field":"region","value":"ca"}},{"from":{"field":"region","value":"166"},"to":{"field":"region","value":"cc"}},{"from":{"field":"region","value":"180"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"140"},"to":{"field":"region","value":"cf"}},{"from":{"field":"region","value":"178"},"to":{"field":"region","value":"cg"}},{"from":{"field":"region","value":"756"},"to":{"field":"region","value":"ch"}},{"from":{"field":"region","value":"384"},"to":{"field":"region","value":"ci"}},{"from":{"field":"region","value":"184"},"to":{"field":"region","value":"ck"}},{"from":{"field":"region","value":"152"},"to":{"field":"region","value":"cl"}},{"from":{"field":"region","value":"120"},"to":{"field":"region","value":"cm"}},{"from":{"field":"region","value":"156"},"to":{"field":"region","value":"cn"}},{"from":{"field":"region","value":"170"},"to":{"field":"region","value":"co"}},{"from":{"field":"region","value":"188"},"to":{"field":"region","value":"cr"}},{"from":{"field":"region","value":"192"},"to":{"field":"region","value":"cu"}},{"from":{"field":"region","value":"132"},"to":{"field":"region","value":"cv"}},{"from":{"field":"region","value":"531"},"to":{"field":"region","value":"cw"}},{"from":{"field":"region","value":"162"},"to":{"field":"region","value":"cx"}},{"from":{"field":"region","value":"196"},"to":{"field":"region","value":"cy"}},{"from":{"field":"region","value":"203"},"to":{"field":"region","value":"cz"}},{"from":{"field":"region","value":"278"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"276"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"262"},"to":{"field":"region","value":"dj"}},{"from":{"field":"region","value":"208"},"to":{"field":"region","value":"dk"}},{"from":{"field":"region","value":"212"},"to":{"field":"region","value":"dm"}},{"from":{"field":"region","value":"214"},"to":{"field":"region","value":"do"}},{"from":{"field":"region","value":"012"},"to":{"field":"region","value":"dz"}},{"from":{"field":"region","value":"218"},"to":{"field":"region","value":"ec"}},{"from":{"field":"region","value":"233"},"to":{"field":"region","value":"ee"}},{"from":{"field":"region","value":"818"},"to":{"field":"region","value":"eg"}},{"from":{"field":"region","value":"732"},"to":{"field":"region","value":"eh"}},{"from":{"field":"region","value":"232"},"to":{"field":"region","value":"er"}},{"from":{"field":"region","value":"724"},"to":{"field":"region","value":"es"}},{"from":{"field":"region","value":"231"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"246"},"to":{"field":"region","value":"fi"}},{"from":{"field":"region","value":"242"},"to":{"field":"region","value":"fj"}},{"from":{"field":"region","value":"238"},"to":{"field":"region","value":"fk"}},{"from":{"field":"region","value":"583"},"to":{"field":"region","value":"fm"}},{"from":{"field":"region","value":"234"},"to":{"field":"region","value":"fo"}},{"from":{"field":"region","value":"250"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"249"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"266"},"to":{"field":"region","value":"ga"}},{"from":{"field":"region","value":"826"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"308"},"to":{"field":"region","value":"gd"}},{"from":{"field":"region","value":"268"},"to":{"field":"region","value":"ge"}},{"from":{"field":"region","value":"254"},"to":{"field":"region","value":"gf"}},{"from":{"field":"region","value":"831"},"to":{"field":"region","value":"gg"}},{"from":{"field":"region","value":"288"},"to":{"field":"region","value":"gh"}},{"from":{"field":"region","value":"292"},"to":{"field":"region","value":"gi"}},{"from":{"field":"region","value":"304"},"to":{"field":"region","value":"gl"}},{"from":{"field":"region","value":"270"},"to":{"field":"region","value":"gm"}},{"from":{"field":"region","value":"324"},"to":{"field":"region","value":"gn"}},{"from":{"field":"region","value":"312"},"to":{"field":"region","value":"gp"}},{"from":{"field":"region","value":"226"},"to":{"field":"region","value":"gq"}},{"from":{"field":"region","value":"300"},"to":{"field":"region","value":"gr"}},{"from":{"field":"region","value":"239"},"to":{"field":"region","value":"gs"}},{"from":{"field":"region","value":"320"},"to":{"field":"region","value":"gt"}},{"from":{"field":"region","value":"316"},"to":{"field":"region","value":"gu"}},{"from":{"field":"region","value":"624"},"to":{"field":"region","value":"gw"}},{"from":{"field":"region","value":"328"},"to":{"field":"region","value":"gy"}},{"from":{"field":"region","value":"344"},"to":{"field":"region","value":"hk"}},{"from":{"field":"region","value":"334"},"to":{"field":"region","value":"hm"}},{"from":{"field":"region","value":"340"},"to":{"field":"region","value":"hn"}},{"from":{"field":"region","value":"191"},"to":{"field":"region","value":"hr"}},{"from":{"field":"region","value":"332"},"to":{"field":"region","value":"ht"}},{"from":{"field":"region","value":"348"},"to":{"field":"region","value":"hu"}},{"from":{"field":"region","value":"360"},"to":{"field":"region","value":"id"}},{"from":{"field":"region","value":"372"},"to":{"field":"region","value":"ie"}},{"from":{"field":"region","value":"376"},"to":{"field":"region","value":"il"}},{"from":{"field":"region","value":"833"},"to":{"field":"region","value":"im"}},{"from":{"field":"region","value":"356"},"to":{"field":"region","value":"in"}},{"from":{"field":"region","value":"086"},"to":{"field":"region","value":"io"}},{"from":{"field":"region","value":"368"},"to":{"field":"region","value":"iq"}},{"from":{"field":"region","value":"364"},"to":{"field":"region","value":"ir"}},{"from":{"field":"region","value":"352"},"to":{"field":"region","value":"is"}},{"from":{"field":"region","value":"380"},"to":{"field":"region","value":"it"}},{"from":{"field":"region","value":"832"},"to":{"field":"region","value":"je"}},{"from":{"field":"region","value":"388"},"to":{"field":"region","value":"jm"}},{"from":{"field":"region","value":"400"},"to":{"field":"region","value":"jo"}},{"from":{"field":"region","value":"392"},"to":{"field":"region","value":"jp"}},{"from":{"field":"region","value":"404"},"to":{"field":"region","value":"ke"}},{"from":{"field":"region","value":"417"},"to":{"field":"region","value":"kg"}},{"from":{"field":"region","value":"116"},"to":{"field":"region","value":"kh"}},{"from":{"field":"region","value":"296"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"174"},"to":{"field":"region","value":"km"}},{"from":{"field":"region","value":"659"},"to":{"field":"region","value":"kn"}},{"from":{"field":"region","value":"408"},"to":{"field":"region","value":"kp"}},{"from":{"field":"region","value":"410"},"to":{"field":"region","value":"kr"}},{"from":{"field":"region","value":"414"},"to":{"field":"region","value":"kw"}},{"from":{"field":"region","value":"136"},"to":{"field":"region","value":"ky"}},{"from":{"field":"region","value":"398"},"to":{"field":"region","value":"kz"}},{"from":{"field":"region","value":"418"},"to":{"field":"region","value":"la"}},{"from":{"field":"region","value":"422"},"to":{"field":"region","value":"lb"}},{"from":{"field":"region","value":"662"},"to":{"field":"region","value":"lc"}},{"from":{"field":"region","value":"438"},"to":{"field":"region","value":"li"}},{"from":{"field":"region","value":"144"},"to":{"field":"region","value":"lk"}},{"from":{"field":"region","value":"430"},"to":{"field":"region","value":"lr"}},{"from":{"field":"region","value":"426"},"to":{"field":"region","value":"ls"}},{"from":{"field":"region","value":"440"},"to":{"field":"region","value":"lt"}},{"from":{"field":"region","value":"442"},"to":{"field":"region","value":"lu"}},{"from":{"field":"region","value":"428"},"to":{"field":"region","value":"lv"}},{"from":{"field":"region","value":"434"},"to":{"field":"region","value":"ly"}},{"from":{"field":"region","value":"504"},"to":{"field":"region","value":"ma"}},{"from":{"field":"region","value":"492"},"to":{"field":"region","value":"mc"}},{"from":{"field":"region","value":"498"},"to":{"field":"region","value":"md"}},{"from":{"field":"region","value":"499"},"to":{"field":"region","value":"me"}},{"from":{"field":"region","value":"663"},"to":{"field":"region","value":"mf"}},{"from":{"field":"region","value":"450"},"to":{"field":"region","value":"mg"}},{"from":{"field":"region","value":"584"},"to":{"field":"region","value":"mh"}},{"from":{"field":"region","value":"807"},"to":{"field":"region","value":"mk"}},{"from":{"field":"region","value":"466"},"to":{"field":"region","value":"ml"}},{"from":{"field":"region","value":"496"},"to":{"field":"region","value":"mn"}},{"from":{"field":"region","value":"446"},"to":{"field":"region","value":"mo"}},{"from":{"field":"region","value":"580"},"to":{"field":"region","value":"mp"}},{"from":{"field":"region","value":"474"},"to":{"field":"region","value":"mq"}},{"from":{"field":"region","value":"478"},"to":{"field":"region","value":"mr"}},{"from":{"field":"region","value":"500"},"to":{"field":"region","value":"ms"}},{"from":{"field":"region","value":"470"},"to":{"field":"region","value":"mt"}},{"from":{"field":"region","value":"480"},"to":{"field":"region","value":"mu"}},{"from":{"field":"region","value":"462"},"to":{"field":"region","value":"mv"}},{"from":{"field":"region","value":"454"},"to":{"field":"region","value":"mw"}},{"from":{"field":"region","value":"484"},"to":{"field":"region","value":"mx"}},{"from":{"field":"region","value":"458"},"to":{"field":"region","value":"my"}},{"from":{"field":"region","value":"508"},"to":{"field":"region","value":"mz"}},{"from":{"field":"region","value":"516"},"to":{"field":"region","value":"na"}},{"from":{"field":"region","value":"540"},"to":{"field":"region","value":"nc"}},{"from":{"field":"region","value":"562"},"to":{"field":"region","value":"ne"}},{"from":{"field":"region","value":"574"},"to":{"field":"region","value":"nf"}},{"from":{"field":"region","value":"566"},"to":{"field":"region","value":"ng"}},{"from":{"field":"region","value":"558"},"to":{"field":"region","value":"ni"}},{"from":{"field":"region","value":"528"},"to":{"field":"region","value":"nl"}},{"from":{"field":"region","value":"578"},"to":{"field":"region","value":"no"}},{"from":{"field":"region","value":"524"},"to":{"field":"region","value":"np"}},{"from":{"field":"region","value":"520"},"to":{"field":"region","value":"nr"}},{"from":{"field":"region","value":"570"},"to":{"field":"region","value":"nu"}},{"from":{"field":"region","value":"554"},"to":{"field":"region","value":"nz"}},{"from":{"field":"region","value":"512"},"to":{"field":"region","value":"om"}},{"from":{"field":"region","value":"591"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"604"},"to":{"field":"region","value":"pe"}},{"from":{"field":"region","value":"258"},"to":{"field":"region","value":"pf"}},{"from":{"field":"region","value":"598"},"to":{"field":"region","value":"pg"}},{"from":{"field":"region","value":"608"},"to":{"field":"region","value":"ph"}},{"from":{"field":"region","value":"586"},"to":{"field":"region","value":"pk"}},{"from":{"field":"region","value":"616"},"to":{"field":"region","value":"pl"}},{"from":{"field":"region","value":"666"},"to":{"field":"region","value":"pm"}},{"from":{"field":"region","value":"612"},"to":{"field":"region","value":"pn"}},{"from":{"field":"region","value":"630"},"to":{"field":"region","value":"pr"}},{"from":{"field":"region","value":"275"},"to":{"field":"region","value":"ps"}},{"from":{"field":"region","value":"620"},"to":{"field":"region","value":"pt"}},{"from":{"field":"region","value":"585"},"to":{"field":"region","value":"pw"}},{"from":{"field":"region","value":"600"},"to":{"field":"region","value":"py"}},{"from":{"field":"region","value":"634"},"to":{"field":"region","value":"qa"}},{"from":{"field":"region","value":"959"},"to":{"field":"region","value":"qm"}},{"from":{"field":"region","value":"960"},"to":{"field":"region","value":"qn"}},{"from":{"field":"region","value":"962"},"to":{"field":"region","value":"qp"}},{"from":{"field":"region","value":"963"},"to":{"field":"region","value":"qq"}},{"from":{"field":"region","value":"964"},"to":{"field":"region","value":"qr"}},{"from":{"field":"region","value":"965"},"to":{"field":"region","value":"qs"}},{"from":{"field":"region","value":"966"},"to":{"field":"region","value":"qt"}},{"from":{"field":"region","value":"967"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"968"},"to":{"field":"region","value":"qv"}},{"from":{"field":"region","value":"969"},"to":{"field":"region","value":"qw"}},{"from":{"field":"region","value":"970"},"to":{"field":"region","value":"qx"}},{"from":{"field":"region","value":"971"},"to":{"field":"region","value":"qy"}},{"from":{"field":"region","value":"972"},"to":{"field":"region","value":"qz"}},{"from":{"field":"region","value":"638"},"to":{"field":"region","value":"re"}},{"from":{"field":"region","value":"642"},"to":{"field":"region","value":"ro"}},{"from":{"field":"region","value":"688"},"to":{"field":"region","value":"rs"}},{"from":{"field":"region","value":"643"},"to":{"field":"region","value":"ru"}},{"from":{"field":"region","value":"646"},"to":{"field":"region","value":"rw"}},{"from":{"field":"region","value":"682"},"to":{"field":"region","value":"sa"}},{"from":{"field":"region","value":"090"},"to":{"field":"region","value":"sb"}},{"from":{"field":"region","value":"690"},"to":{"field":"region","value":"sc"}},{"from":{"field":"region","value":"729"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"752"},"to":{"field":"region","value":"se"}},{"from":{"field":"region","value":"702"},"to":{"field":"region","value":"sg"}},{"from":{"field":"region","value":"654"},"to":{"field":"region","value":"sh"}},{"from":{"field":"region","value":"705"},"to":{"field":"region","value":"si"}},{"from":{"field":"region","value":"744"},"to":{"field":"region","value":"sj"}},{"from":{"field":"region","value":"703"},"to":{"field":"region","value":"sk"}},{"from":{"field":"region","value":"694"},"to":{"field":"region","value":"sl"}},{"from":{"field":"region","value":"674"},"to":{"field":"region","value":"sm"}},{"from":{"field":"region","value":"686"},"to":{"field":"region","value":"sn"}},{"from":{"field":"region","value":"706"},"to":{"field":"region","value":"so"}},{"from":{"field":"region","value":"740"},"to":{"field":"region","value":"sr"}},{"from":{"field":"region","value":"728"},"to":{"field":"region","value":"ss"}},{"from":{"field":"region","value":"678"},"to":{"field":"region","value":"st"}},{"from":{"field":"region","value":"222"},"to":{"field":"region","value":"sv"}},{"from":{"field":"region","value":"534"},"to":{"field":"region","value":"sx"}},{"from":{"field":"region","value":"760"},"to":{"field":"region","value":"sy"}},{"from":{"field":"region","value":"748"},"to":{"field":"region","value":"sz"}},{"from":{"field":"region","value":"796"},"to":{"field":"region","value":"tc"}},{"from":{"field":"region","value":"148"},"to":{"field":"region","value":"td"}},{"from":{"field":"region","value":"260"},"to":{"field":"region","value":"tf"}},{"from":{"field":"region","value":"768"},"to":{"field":"region","value":"tg"}},{"from":{"field":"region","value":"764"},"to":{"field":"region","value":"th"}},{"from":{"field":"region","value":"762"},"to":{"field":"region","value":"tj"}},{"from":{"field":"region","value":"772"},"to":{"field":"region","value":"tk"}},{"from":{"field":"region","value":"626"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"795"},"to":{"field":"region","value":"tm"}},{"from":{"field":"region","value":"788"},"to":{"field":"region","value":"tn"}},{"from":{"field":"region","value":"776"},"to":{"field":"region","value":"to"}},{"from":{"field":"region","value":"792"},"to":{"field":"region","value":"tr"}},{"from":{"field":"region","value":"780"},"to":{"field":"region","value":"tt"}},{"from":{"field":"region","value":"798"},"to":{"field":"region","value":"tv"}},{"from":{"field":"region","value":"158"},"to":{"field":"region","value":"tw"}},{"from":{"field":"region","value":"834"},"to":{"field":"region","value":"tz"}},{"from":{"field":"region","value":"804"},"to":{"field":"region","value":"ua"}},{"from":{"field":"region","value":"800"},"to":{"field":"region","value":"ug"}},{"from":{"field":"region","value":"581"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"840"},"to":{"field":"region","value":"us"}},{"from":{"field":"region","value":"858"},"to":{"field":"region","value":"uy"}},{"from":{"field":"region","value":"860"},"to":{"field":"region","value":"uz"}},{"from":{"field":"region","value":"336"},"to":{"field":"region","value":"va"}},{"from":{"field":"region","value":"670"},"to":{"field":"region","value":"vc"}},{"from":{"field":"region","value":"862"},"to":{"field":"region","value":"ve"}},{"from":{"field":"region","value":"092"},"to":{"field":"region","value":"vg"}},{"from":{"field":"region","value":"850"},"to":{"field":"region","value":"vi"}},{"from":{"field":"region","value":"704"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"548"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"876"},"to":{"field":"region","value":"wf"}},{"from":{"field":"region","value":"882"},"to":{"field":"region","value":"ws"}},{"from":{"field":"region","value":"973"},"to":{"field":"region","value":"xa"}},{"from":{"field":"region","value":"974"},"to":{"field":"region","value":"xb"}},{"from":{"field":"region","value":"975"},"to":{"field":"region","value":"xc"}},{"from":{"field":"region","value":"976"},"to":{"field":"region","value":"xd"}},{"from":{"field":"region","value":"977"},"to":{"field":"region","value":"xe"}},{"from":{"field":"region","value":"978"},"to":{"field":"region","value":"xf"}},{"from":{"field":"region","value":"979"},"to":{"field":"region","value":"xg"}},{"from":{"field":"region","value":"980"},"to":{"field":"region","value":"xh"}},{"from":{"field":"region","value":"981"},"to":{"field":"region","value":"xi"}},{"from":{"field":"region","value":"982"},"to":{"field":"region","value":"xj"}},{"from":{"field":"region","value":"983"},"to":{"field":"region","value":"xk"}},{"from":{"field":"region","value":"984"},"to":{"field":"region","value":"xl"}},{"from":{"field":"region","value":"985"},"to":{"field":"region","value":"xm"}},{"from":{"field":"region","value":"986"},"to":{"field":"region","value":"xn"}},{"from":{"field":"region","value":"987"},"to":{"field":"region","value":"xo"}},{"from":{"field":"region","value":"988"},"to":{"field":"region","value":"xp"}},{"from":{"field":"region","value":"989"},"to":{"field":"region","value":"xq"}},{"from":{"field":"region","value":"990"},"to":{"field":"region","value":"xr"}},{"from":{"field":"region","value":"991"},"to":{"field":"region","value":"xs"}},{"from":{"field":"region","value":"992"},"to":{"field":"region","value":"xt"}},{"from":{"field":"region","value":"993"},"to":{"field":"region","value":"xu"}},{"from":{"field":"region","value":"994"},"to":{"field":"region","value":"xv"}},{"from":{"field":"region","value":"995"},"to":{"field":"region","value":"xw"}},{"from":{"field":"region","value":"996"},"to":{"field":"region","value":"xx"}},{"from":{"field":"region","value":"997"},"to":{"field":"region","value":"xy"}},{"from":{"field":"region","value":"998"},"to":{"field":"region","value":"xz"}},{"from":{"field":"region","value":"720"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"887"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"175"},"to":{"field":"region","value":"yt"}},{"from":{"field":"region","value":"710"},"to":{"field":"region","value":"za"}},{"from":{"field":"region","value":"894"},"to":{"field":"region","value":"zm"}},{"from":{"field":"region","value":"716"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"999"},"to":{"field":"region","value":"zz"}},{"from":{"field":"variants","value":"aaland"},"to":{"field":"region","value":"ax"}},{"from":{"field":"variants","value":"polytoni"},"to":{"field":"variants","value":"polyton"}},{"from":{"field":"variants","value":"heploc"},"to":{"field":"variants","value":"alalc97"}},{"from":{"field":"variants","value":"arevela"},"to":{"field":"language","value":"hy"}},{"from":{"field":"variants","value":"arevmda"},"to":{"field":"language","value":"hyw"}}]')},9460:function(l){l.exports=JSON.parse('{"region":{"172":["ru","am","az","by","ge","kg","kz","md","tj","tm","ua","uz"],"200":["cz","sk"],"530":["cw","sx","bq"],"532":["cw","sx","bq"],"536":["sa","iq"],"582":["fm","mh","mp","pw"],"810":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"830":["je","gg"],"890":["rs","me","si","hr","mk","ba"],"891":["rs","me"],"an":["cw","sx","bq"],"cs":["rs","me"],"fq":["aq","tf"],"nt":["sa","iq"],"pc":["fm","mh","mp","pw"],"su":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yu":["rs","me"],"062":["034","143"],"ant":["cw","sx","bq"],"scg":["rs","me"],"ntz":["sa","iq"],"sun":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yug":["rs","me"]}}')},7778:function(l){l.exports=JSON.parse('[{"from":"in","to":"id"},{"from":"iw","to":"he"},{"from":"ji","to":"yi"},{"from":"jw","to":"jv"},{"from":"mo","to":"ro"},{"from":"scc","to":"sr"},{"from":"scr","to":"hr"},{"from":"aam","to":"aas"},{"from":"adp","to":"dz"},{"from":"aue","to":"ktz"},{"from":"ayx","to":"nun"},{"from":"bgm","to":"bcg"},{"from":"bjd","to":"drl"},{"from":"ccq","to":"rki"},{"from":"cjr","to":"mom"},{"from":"cka","to":"cmr"},{"from":"cmk","to":"xch"},{"from":"coy","to":"pij"},{"from":"cqu","to":"quh"},{"from":"drh","to":"mn"},{"from":"drw","to":"fa-af"},{"from":"gav","to":"dev"},{"from":"gfx","to":"vaj"},{"from":"ggn","to":"gvr"},{"from":"gti","to":"nyc"},{"from":"guv","to":"duz"},{"from":"hrr","to":"jal"},{"from":"ibi","to":"opa"},{"from":"ilw","to":"gal"},{"from":"jeg","to":"oyb"},{"from":"kgc","to":"tdf"},{"from":"kgh","to":"kml"},{"from":"koj","to":"kwv"},{"from":"krm","to":"bmf"},{"from":"ktr","to":"dtp"},{"from":"kvs","to":"gdj"},{"from":"kwq","to":"yam"},{"from":"kxe","to":"tvd"},{"from":"kzj","to":"dtp"},{"from":"kzt","to":"dtp"},{"from":"lii","to":"raq"},{"from":"lmm","to":"rmx"},{"from":"meg","to":"cir"},{"from":"mst","to":"mry"},{"from":"mwj","to":"vaj"},{"from":"myt","to":"mry"},{"from":"nad","to":"xny"},{"from":"ncp","to":"kdz"},{"from":"nnx","to":"ngv"},{"from":"nts","to":"pij"},{"from":"oun","to":"vaj"},{"from":"pcr","to":"adx"},{"from":"pmc","to":"huw"},{"from":"pmu","to":"phr"},{"from":"ppa","to":"bfy"},{"from":"ppr","to":"lcq"},{"from":"pry","to":"prt"},{"from":"puz","to":"pub"},{"from":"sca","to":"hle"},{"from":"skk","to":"oyb"},{"from":"tdu","to":"dtp"},{"from":"thc","to":"tpo"},{"from":"thx","to":"oyb"},{"from":"tie","to":"ras"},{"from":"tkk","to":"twm"},{"from":"tlw","to":"weo"},{"from":"tmp","to":"tyj"},{"from":"tne","to":"kak"},{"from":"tnf","to":"fa-af"},{"from":"tsf","to":"taj"},{"from":"uok","to":"ema"},{"from":"xba","to":"cax"},{"from":"xia","to":"acn"},{"from":"xkh","to":"waw"},{"from":"xsj","to":"suj"},{"from":"ybd","to":"rki"},{"from":"yma","to":"lrr"},{"from":"ymt","to":"mtm"},{"from":"yos","to":"zom"},{"from":"yuu","to":"yug"},{"from":"asd","to":"snz"},{"from":"dit","to":"dif"},{"from":"llo","to":"ngt"},{"from":"myd","to":"aog"},{"from":"nns","to":"nbr"},{"from":"sgn-br","to":"bzs"},{"from":"sgn-co","to":"csn"},{"from":"sgn-de","to":"gsg"},{"from":"sgn-dk","to":"dsl"},{"from":"sgn-fr","to":"fsl"},{"from":"sgn-gb","to":"bfi"},{"from":"sgn-gr","to":"gss"},{"from":"sgn-ie","to":"isg"},{"from":"sgn-it","to":"ise"},{"from":"sgn-jp","to":"jsl"},{"from":"sgn-mx","to":"mfs"},{"from":"sgn-ni","to":"ncs"},{"from":"sgn-nl","to":"dse"},{"from":"sgn-no","to":"nsi"},{"from":"sgn-pt","to":"psr"},{"from":"sgn-se","to":"swl"},{"from":"sgn-us","to":"ase"},{"from":"sgn-za","to":"sfs"},{"from":"no-bokmal","to":"nb"},{"from":"no-nynorsk","to":"nn"},{"from":"aa-saaho","to":"ssy"},{"from":"sh","to":"sr-latn"},{"from":"cnr","to":"sr-me"},{"from":"no","to":"nb"},{"from":"tl","to":"fil"},{"from":"az-az","to":"az-latn-az"},{"from":"bs-ba","to":"bs-latn-ba"},{"from":"ha-latn-gh","to":"ha-gh"},{"from":"ha-latn-ne","to":"ha-ne"},{"from":"ha-latn-ng","to":"ha-ng"},{"from":"kk-cyrl-kz","to":"kk-kz"},{"from":"ky-cyrl-kg","to":"ky-kg"},{"from":"ks-arab-in","to":"ks-in"},{"from":"mn-cyrl-mn","to":"mn-mn"},{"from":"ms-latn-bn","to":"ms-bn"},{"from":"ms-latn-my","to":"ms-my"},{"from":"ms-latn-sg","to":"ms-sg"},{"from":"pa-in","to":"pa-guru-in"},{"from":"pa-pk","to":"pa-arab-pk"},{"from":"shi-ma","to":"shi-tfng-ma"},{"from":"sr-ba","to":"sr-cyrl-ba"},{"from":"sr-me","to":"sr-latn-me"},{"from":"sr-rs","to":"sr-cyrl-rs"},{"from":"sr-xk","to":"sr-cyrl-xk"},{"from":"tzm-latn-ma","to":"tzm-ma"},{"from":"ug-arab-cn","to":"ug-cn"},{"from":"uz-af","to":"uz-arab-af"},{"from":"uz-uz","to":"uz-latn-uz"},{"from":"vai-lr","to":"vai-vaii-lr"},{"from":"yue-cn","to":"yue-hans-cn"},{"from":"yue-hk","to":"yue-hant-hk"},{"from":"zh-cn","to":"zh-hans-cn"},{"from":"zh-hk","to":"zh-hant-hk"},{"from":"zh-mo","to":"zh-hant-mo"},{"from":"zh-sg","to":"zh-hans-sg"},{"from":"zh-tw","to":"zh-hant-tw"},{"from":"aju","to":"jrb"},{"from":"als","to":"sq"},{"from":"arb","to":"ar"},{"from":"ayr","to":"ay"},{"from":"azj","to":"az"},{"from":"bcc","to":"bal"},{"from":"bcl","to":"bik"},{"from":"bxk","to":"luy"},{"from":"bxr","to":"bua"},{"from":"cld","to":"syr"},{"from":"cmn","to":"zh"},{"from":"cwd","to":"cr"},{"from":"dgo","to":"doi"},{"from":"dhd","to":"mwr"},{"from":"dik","to":"din"},{"from":"diq","to":"zza"},{"from":"lbk","to":"bnc"},{"from":"ekk","to":"et"},{"from":"emk","to":"man"},{"from":"esk","to":"ik"},{"from":"fat","to":"ak"},{"from":"fuc","to":"ff"},{"from":"gaz","to":"om"},{"from":"gbo","to":"grb"},{"from":"gno","to":"gon"},{"from":"gug","to":"gn"},{"from":"gya","to":"gba"},{"from":"hdn","to":"hai"},{"from":"hea","to":"hmn"},{"from":"ike","to":"iu"},{"from":"kmr","to":"ku"},{"from":"knc","to":"kr"},{"from":"kng","to":"kg"},{"from":"knn","to":"kok"},{"from":"kpv","to":"kv"},{"from":"lvs","to":"lv"},{"from":"mhr","to":"chm"},{"from":"mup","to":"raj"},{"from":"khk","to":"mn"},{"from":"npi","to":"ne"},{"from":"ojg","to":"oj"},{"from":"ory","to":"or"},{"from":"pbu","to":"ps"},{"from":"pes","to":"fa"},{"from":"plt","to":"mg"},{"from":"pnb","to":"lah"},{"from":"quz","to":"qu"},{"from":"rmy","to":"rom"},{"from":"spy","to":"kln"},{"from":"src","to":"sc"},{"from":"swh","to":"sw"},{"from":"ttq","to":"tmh"},{"from":"tw","to":"ak"},{"from":"umu","to":"del"},{"from":"uzn","to":"uz"},{"from":"xpe","to":"kpe"},{"from":"xsl","to":"den"},{"from":"ydd","to":"yi"},{"from":"zai","to":"zap"},{"from":"zsm","to":"ms"},{"from":"zyb","to":"za"},{"from":"him","to":"srx"},{"from":"mnk","to":"man"},{"from":"bh","to":"bho"},{"from":"prs","to":"fa-af"},{"from":"swc","to":"sw-cd"},{"from":"aar","to":"aa"},{"from":"abk","to":"ab"},{"from":"ave","to":"ae"},{"from":"afr","to":"af"},{"from":"aka","to":"ak"},{"from":"amh","to":"am"},{"from":"arg","to":"an"},{"from":"ara","to":"ar"},{"from":"asm","to":"as"},{"from":"ava","to":"av"},{"from":"aym","to":"ay"},{"from":"aze","to":"az"},{"from":"bak","to":"ba"},{"from":"bel","to":"be"},{"from":"bul","to":"bg"},{"from":"bih","to":"bho"},{"from":"bis","to":"bi"},{"from":"bam","to":"bm"},{"from":"ben","to":"bn"},{"from":"bod","to":"bo"},{"from":"bre","to":"br"},{"from":"bos","to":"bs"},{"from":"cat","to":"ca"},{"from":"che","to":"ce"},{"from":"cha","to":"ch"},{"from":"cos","to":"co"},{"from":"cre","to":"cr"},{"from":"ces","to":"cs"},{"from":"chu","to":"cu"},{"from":"chv","to":"cv"},{"from":"cym","to":"cy"},{"from":"dan","to":"da"},{"from":"deu","to":"de"},{"from":"div","to":"dv"},{"from":"dzo","to":"dz"},{"from":"ewe","to":"ee"},{"from":"ell","to":"el"},{"from":"eng","to":"en"},{"from":"epo","to":"eo"},{"from":"spa","to":"es"},{"from":"est","to":"et"},{"from":"eus","to":"eu"},{"from":"fas","to":"fa"},{"from":"ful","to":"ff"},{"from":"fin","to":"fi"},{"from":"fij","to":"fj"},{"from":"fao","to":"fo"},{"from":"fra","to":"fr"},{"from":"fry","to":"fy"},{"from":"gle","to":"ga"},{"from":"gla","to":"gd"},{"from":"glg","to":"gl"},{"from":"grn","to":"gn"},{"from":"guj","to":"gu"},{"from":"glv","to":"gv"},{"from":"hau","to":"ha"},{"from":"heb","to":"he"},{"from":"hin","to":"hi"},{"from":"hmo","to":"ho"},{"from":"hrv","to":"hr"},{"from":"hat","to":"ht"},{"from":"hun","to":"hu"},{"from":"hye","to":"hy"},{"from":"her","to":"hz"},{"from":"ina","to":"ia"},{"from":"ind","to":"id"},{"from":"ile","to":"ie"},{"from":"ibo","to":"ig"},{"from":"iii","to":"ii"},{"from":"ipk","to":"ik"},{"from":"ido","to":"io"},{"from":"isl","to":"is"},{"from":"ita","to":"it"},{"from":"iku","to":"iu"},{"from":"jpn","to":"ja"},{"from":"jav","to":"jv"},{"from":"kat","to":"ka"},{"from":"kon","to":"kg"},{"from":"kik","to":"ki"},{"from":"kua","to":"kj"},{"from":"kaz","to":"kk"},{"from":"kal","to":"kl"},{"from":"khm","to":"km"},{"from":"kan","to":"kn"},{"from":"kor","to":"ko"},{"from":"kau","to":"kr"},{"from":"kas","to":"ks"},{"from":"kur","to":"ku"},{"from":"kom","to":"kv"},{"from":"cor","to":"kw"},{"from":"kir","to":"ky"},{"from":"lat","to":"la"},{"from":"ltz","to":"lb"},{"from":"lug","to":"lg"},{"from":"lim","to":"li"},{"from":"lin","to":"ln"},{"from":"lao","to":"lo"},{"from":"lit","to":"lt"},{"from":"lub","to":"lu"},{"from":"lav","to":"lv"},{"from":"mlg","to":"mg"},{"from":"mah","to":"mh"},{"from":"mri","to":"mi"},{"from":"mkd","to":"mk"},{"from":"mal","to":"ml"},{"from":"mon","to":"mn"},{"from":"mol","to":"ro"},{"from":"mar","to":"mr"},{"from":"msa","to":"ms"},{"from":"mlt","to":"mt"},{"from":"mya","to":"my"},{"from":"nau","to":"na"},{"from":"nob","to":"nb"},{"from":"nde","to":"nd"},{"from":"nep","to":"ne"},{"from":"ndo","to":"ng"},{"from":"nld","to":"nl"},{"from":"nno","to":"nn"},{"from":"nor","to":"nb"},{"from":"nbl","to":"nr"},{"from":"nav","to":"nv"},{"from":"nya","to":"ny"},{"from":"oci","to":"oc"},{"from":"oji","to":"oj"},{"from":"orm","to":"om"},{"from":"ori","to":"or"},{"from":"oss","to":"os"},{"from":"pan","to":"pa"},{"from":"pli","to":"pi"},{"from":"pol","to":"pl"},{"from":"pus","to":"ps"},{"from":"por","to":"pt"},{"from":"que","to":"qu"},{"from":"roh","to":"rm"},{"from":"run","to":"rn"},{"from":"ron","to":"ro"},{"from":"rus","to":"ru"},{"from":"kin","to":"rw"},{"from":"san","to":"sa"},{"from":"srd","to":"sc"},{"from":"snd","to":"sd"},{"from":"sme","to":"se"},{"from":"sag","to":"sg"},{"from":"hbs","to":"sr-latn"},{"from":"sin","to":"si"},{"from":"slk","to":"sk"},{"from":"slv","to":"sl"},{"from":"smo","to":"sm"},{"from":"sna","to":"sn"},{"from":"som","to":"so"},{"from":"sqi","to":"sq"},{"from":"srp","to":"sr"},{"from":"ssw","to":"ss"},{"from":"sot","to":"st"},{"from":"sun","to":"su"},{"from":"swe","to":"sv"},{"from":"swa","to":"sw"},{"from":"tam","to":"ta"},{"from":"tel","to":"te"},{"from":"tgk","to":"tg"},{"from":"tha","to":"th"},{"from":"tir","to":"ti"},{"from":"tuk","to":"tk"},{"from":"tgl","to":"fil"},{"from":"tsn","to":"tn"},{"from":"ton","to":"to"},{"from":"tur","to":"tr"},{"from":"tso","to":"ts"},{"from":"tat","to":"tt"},{"from":"twi","to":"ak"},{"from":"tah","to":"ty"},{"from":"uig","to":"ug"},{"from":"ukr","to":"uk"},{"from":"urd","to":"ur"},{"from":"uzb","to":"uz"},{"from":"ven","to":"ve"},{"from":"vie","to":"vi"},{"from":"vol","to":"vo"},{"from":"wln","to":"wa"},{"from":"wol","to":"wo"},{"from":"xho","to":"xh"},{"from":"yid","to":"yi"},{"from":"yor","to":"yo"},{"from":"zha","to":"za"},{"from":"zho","to":"zh"},{"from":"zul","to":"zu"},{"from":"alb","to":"sq"},{"from":"arm","to":"hy"},{"from":"baq","to":"eu"},{"from":"bur","to":"my"},{"from":"chi","to":"zh"},{"from":"cze","to":"cs"},{"from":"dut","to":"nl"},{"from":"fre","to":"fr"},{"from":"geo","to":"ka"},{"from":"ger","to":"de"},{"from":"gre","to":"el"},{"from":"ice","to":"is"},{"from":"mac","to":"mk"},{"from":"mao","to":"mi"},{"from":"may","to":"ms"},{"from":"per","to":"fa"},{"from":"rum","to":"ro"},{"from":"slo","to":"sk"},{"from":"tib","to":"bo"},{"from":"wel","to":"cy"}]')},8589:function(l){l.exports=JSON.parse('{"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"}')},858:function(l){l.exports=JSON.parse('["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"]')}},r={};function i(l){var c=r[l];if(c!==void 0)return c.exports;var f=r[l]={exports:{}};return n[l].call(f.exports,f,f.exports,i),f.exports}i.amdO={},i.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return i.d(c,{a:c}),c},i.d=function(l,c){for(var f in c)i.o(c,f)&&!i.o(l,f)&&Object.defineProperty(l,f,{enumerable:!0,get:c[f]})},i.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})(),i.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)};var o={};return(function(){i.d(o,{default:function(){return A}}),i(8416);var l,c=i(1715),f=i(8080),g=i(1737),y=i(1139),h=(function(){var _,I="application/dash+xml";function C(T,S,O){if(!T||!/^VIDEO$/i.test(T.nodeName))return null;if(T._dashjs_player)return T._dashjs_player;var $,V=T.id||T.name||"video element";if(!(S=S||[].slice.call(T.querySelectorAll("source")).filter((function(B){return B.type==I}))[0])&&T.src)(S=document.createElement("source")).src=T.src;else if(!S&&!T.src)return null;return O=O||{},($=(0,y.Z)(O).create()).initialize(T,S.src,T.autoplay),_||(_=$.getDebug().getLogger()),_.debug("Converted "+V+" to dash.js player and added content: "+S.src),T._dashjs_player=$,$}function v(T){return/^VIDEO$/i.test(T.nodeName)?T:v(T.parentNode)}return{create:C,createAll:function(T,S){var O=[];T=T||"[data-dashjs-player]";for(var $=(S=S||document).querySelectorAll(T),V=0;V<$.length;V++){var B=C($[V],null);O.push(B)}for(var ne=S.querySelectorAll('source[type="'+I+'"]'),D=0;D<ne.length;D++){var X=C(v(ne[D]),null);O.push(X)}return O}}})();!(typeof window<"u"&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&typeof window<"u"&&window&&window.addEventListener&&(window.document.readyState==="complete"?window.dashjs?h.createAll():l=window.setInterval((function(){window.dashjs&&(window.clearInterval(l),h.createAll())}),500):window.addEventListener("load",(function _(){window.removeEventListener("load",_),h.createAll()})));var p=h,E=i(6398);dashjs.Protection=g.default,dashjs.MetricsReporting=f.default,dashjs.MediaPlayerFactory=p,dashjs.Debug=E.Z,dashjs.supportsMediaSource=c.B;var A=dashjs})(),o.default})()}))})(X1)),X1.exports}var _j=vj();const bj=Lf(_j),Ej=({onClose:t,streamLink:e})=>{const n=xe.useRef(null);return xe.useEffect(()=>{if(!n.current||!e)return;const r=bj.MediaPlayer().create();r.initialize(),r.attachView(n.current),r.attachSource(e)},[e]),pe.jsxs("div",{className:`${br["modal-overlay"]} ${br["video-bubble"]}`,children:[pe.jsx("div",{className:br.cross,onClick:t,children:pe.jsx(Kh,{})}),pe.jsx("video",{ref:n,width:"100%"})]})};class wj{constructor(e,n){this.streamLink="",this.root=null,this.bubble=null,this.show=()=>{this.bubble||(this.bubble=document.createElement("div")),this.root||(this.container.appendChild(this.bubble),this.root=H_.createRoot(this.bubble)),this.root.render(pe.jsx(Ej,{onClose:this.hide,streamLink:this.streamLink}))},this.hide=()=>{this.root&&(this.root.unmount(),this.root=null)},this.container=e,this.streamLink=n}}const HO=t=>typeof t=="object"&&t!=null&&t.nodeType===1,GO=(t,e)=>(!e||t!=="hidden")&&t!=="visible"&&t!=="clip",J1=(t,e)=>{if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){const n=getComputedStyle(t,null);return GO(n.overflowY,e)||GO(n.overflowX,e)||(r=>{const i=(o=>{if(!o.ownerDocument||!o.ownerDocument.defaultView)return null;try{return o.ownerDocument.defaultView.frameElement}catch{return null}})(r);return!!i&&(i.clientHeight<r.scrollHeight||i.clientWidth<r.scrollWidth)})(t)}return!1},rb=(t,e,n,r,i,o,l,c)=>o<t&&l>e||o>t&&l<e?0:o<=t&&c<=n||l>=e&&c>=n?o-t-r:l>e&&c<n||o<t&&c>n?l-e+i:0,Tj=t=>{const e=t.parentElement;return e??(t.getRootNode().host||null)},qO=(t,e)=>{var n,r,i,o;if(typeof document>"u")return[];const{scrollMode:l,block:c,inline:f,boundary:g,skipOverflowHiddenElements:y}=e,h=typeof g=="function"?g:Me=>Me!==g;if(!HO(t))throw new TypeError("Invalid target");const p=document.scrollingElement||document.documentElement,E=[];let A=t;for(;HO(A)&&h(A);){if(A=Tj(A),A===p){E.push(A);break}A!=null&&A===document.body&&J1(A)&&!J1(document.documentElement)||A!=null&&J1(A,y)&&E.push(A)}const _=(r=(n=window.visualViewport)==null?void 0:n.width)!=null?r:innerWidth,I=(o=(i=window.visualViewport)==null?void 0:i.height)!=null?o:innerHeight,{scrollX:C,scrollY:v}=window,{height:T,width:S,top:O,right:$,bottom:V,left:B}=t.getBoundingClientRect(),{top:ne,right:D,bottom:X,left:ve}=(Me=>{const oe=window.getComputedStyle(Me);return{top:parseFloat(oe.scrollMarginTop)||0,right:parseFloat(oe.scrollMarginRight)||0,bottom:parseFloat(oe.scrollMarginBottom)||0,left:parseFloat(oe.scrollMarginLeft)||0}})(t);let ie=c==="start"||c==="nearest"?O-ne:c==="end"?V+X:O+T/2-ne+X,ye=f==="center"?B+S/2-ve+D:f==="end"?$+D:B-ve;const Ne=[];for(let Me=0;Me<E.length;Me++){const oe=E[Me],{height:Ce,width:Ye,top:et,right:Y,bottom:Ee,left:Pe}=oe.getBoundingClientRect();if(l==="if-needed"&&O>=0&&B>=0&&V<=I&&$<=_&&O>=et&&V<=Ee&&B>=Pe&&$<=Y)return Ne;const Xe=getComputedStyle(oe),Ze=parseInt(Xe.borderLeftWidth,10),at=parseInt(Xe.borderTopWidth,10),jt=parseInt(Xe.borderRightWidth,10),xt=parseInt(Xe.borderBottomWidth,10);let ht=0,It=0;const Ue="offsetWidth"in oe?oe.offsetWidth-oe.clientWidth-Ze-jt:0,Ve="offsetHeight"in oe?oe.offsetHeight-oe.clientHeight-at-xt:0,_t="offsetWidth"in oe?oe.offsetWidth===0?0:Ye/oe.offsetWidth:0,M="offsetHeight"in oe?oe.offsetHeight===0?0:Ce/oe.offsetHeight:0;if(p===oe)ht=c==="start"?ie:c==="end"?ie-I:c==="nearest"?rb(v,v+I,I,at,xt,v+ie,v+ie+T,T):ie-I/2,It=f==="start"?ye:f==="center"?ye-_/2:f==="end"?ye-_:rb(C,C+_,_,Ze,jt,C+ye,C+ye+S,S),ht=Math.max(0,ht+v),It=Math.max(0,It+C);else{ht=c==="start"?ie-et-at:c==="end"?ie-Ee+xt+Ve:c==="nearest"?rb(et,Ee,Ce,at,xt+Ve,ie,ie+T,T):ie-(et+Ce/2)+Ve/2,It=f==="start"?ye-Pe-Ze:f==="center"?ye-(Pe+Ye/2)+Ue/2:f==="end"?ye-Y+jt+Ue:rb(Pe,Y,Ye,Ze,jt+Ue,ye,ye+S,S);const{scrollLeft:x,scrollTop:U}=oe;ht=M===0?0:Math.max(0,Math.min(U+ht/M,oe.scrollHeight-Ce/M+Ve)),It=_t===0?0:Math.max(0,Math.min(x+It/_t,oe.scrollWidth-Ye/_t+Ue)),ie+=U-ht,ye+=x-It}Ne.push({el:oe,top:ht,left:It})}return Ne},Sj=t=>t===!1?{block:"end",inline:"nearest"}:(e=>e===Object(e)&&Object.keys(e).length!==0)(t)?t:{block:"start",inline:"nearest"};function eT(t,e){if(!t.isConnected||!(i=>{let o=i;for(;o&&o.parentNode;){if(o.parentNode===document)return!0;o=o.parentNode instanceof ShadowRoot?o.parentNode.host:o.parentNode}return!1})(t))return;const n=(i=>{const o=window.getComputedStyle(i);return{top:parseFloat(o.scrollMarginTop)||0,right:parseFloat(o.scrollMarginRight)||0,bottom:parseFloat(o.scrollMarginBottom)||0,left:parseFloat(o.scrollMarginLeft)||0}})(t);if((i=>typeof i=="object"&&typeof i.behavior=="function")(e))return e.behavior(qO(t,e));const r=typeof e=="boolean"||e==null?void 0:e.behavior;for(const{el:i,top:o,left:l}of qO(t,Sj(e))){const c=o-n.top+n.bottom,f=l-n.left+n.right;i.scroll({top:c,left:f,behavior:r})}}let tT;const WO=()=>(tT||(tT="performance"in window?performance.now.bind(performance):Date.now),tT());function KO(t){const e=WO(),n=Math.min((e-t.startTime)/t.duration,1),r=t.ease(n),i=t.startX+(t.x-t.startX)*r,o=t.startY+(t.y-t.startY)*r;t.method(i,o,n,r),i!==t.x||o!==t.y?requestAnimationFrame((()=>KO(t))):t.cb()}function Aj(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:y=>1+--y*y*y*y*y,o=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0;const c=t,f=t.scrollLeft,g=t.scrollTop;KO({scrollable:c,method:(y,h,p,E)=>{const A=Math.ceil(y),_=Math.ceil(h);t.scrollLeft=A,t.scrollTop=_,l?.({target:t,elapsed:p,value:E,left:A,top:_})},startTime:WO(),startX:f,startY:g,x:e,y:n,duration:r,ease:i,cb:o})}const Ij=t=>t&&!t.behavior||t.behavior==="smooth",Cj=function(t,e){const n=e||{};return Ij(n)?eT(t,{block:n.block,inline:n.inline,scrollMode:n.scrollMode,boundary:n.boundary,skipOverflowHiddenElements:n.skipOverflowHiddenElements,behavior:r=>Promise.all(r.reduce(((i,o)=>{let{el:l,left:c,top:f}=o;const g=l.scrollLeft,y=l.scrollTop;return g===c&&y===f?i:[...i,new Promise((h=>Aj(l,c,f,n.duration,n.ease,(()=>h({el:l,left:[g,c],top:[y,f]})),n.onScrollChange)))]}),[]))}):Promise.resolve(eT(t,e))},Rj=window.navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.match(/Trident.*rv:11\./)!=null,YO="scrollBehavior"in document.documentElement.style?eT:Cj,xj=t=>{const e=xe.useRef([]),n=(l,c=[],f=()=>{})=>{let g=$0(l);c.filter(zc).forEach(y=>{g=g.concat($0(y));try{const{contentWindow:h}=y;h&&r(h,f)}catch(h){Re.debug(h,"Error when setting up scroll on TargetAttachedBubble")}}),r(window,f),g.forEach(y=>{r(y,f)})},r=(l,c)=>{l.addEventListener("transitionend",c),l.addEventListener("scroll",c),l.addEventListener("resize",c),e.current.push({element:l,callback:c})};return{initScroll:xe.useCallback(()=>{const l=t instanceof Hs?t.dom:t;if(Rj?YO(l,{behavior:"smooth",scrollMode:"if-needed"}):((f,g)=>{YO(f,{behavior:"smooth",scrollMode:"if-needed"})})(l),t instanceof Hs){const c=(f,g=[],y={top:0,left:0})=>{const h=g.length?g[g.length-1]:document.body,p=h===document.body?{width:window.innerWidth,height:window.innerHeight,top:0,left:0}:h.getBoundingClientRect();let{width:E,height:A,top:_,left:I}=f.dom.getBoundingClientRect();return _+=y.top,I+=y.left,_<0||_+A>p.height||I<0||I+E>p.width?!0:g.length?c(f,g.slice(0,g.length-1),{top:y.top+p.top,left:y.left+p.left}):!1};c(t,t.iframes)&&t.dom.scrollIntoView({behavior:"smooth",block:"center"})}},[t]),setupScroll:n,scrollListeners:e,getTargetWithIframes:l=>({target:l instanceof Hs?l.dom:l,iframes:l instanceof Hs?l.iframes:[]})}},Nj=t=>{const e=Math.max(document.documentElement.clientWidth,window.innerWidth||0);return t*e/100},Oj=t=>{const e=Math.max(document.documentElement.clientHeight,window.innerHeight||0);return t*e/100},Lj=({boxing:t})=>t?pe.jsxs("svg",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100vh",pointerEvents:"none",zIndex:2147483640},version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[pe.jsx("rect",{x:0,y:0,width:"100%",height:t.top,fill:"rgba(0,0,0,0.5)",pointerEvents:"all"}),pe.jsx("rect",{y:t.top,x:0,width:t.left,height:t.height,fill:"rgba(0,0,0,0.5)",pointerEvents:"all"}),pe.jsx("rect",{y:t.top,x:t.left+t.width,width:`${Nj(100)-t.left-t.width}`,height:t.height,fill:"rgba(0,0,0,0.5)",pointerEvents:"all"}),pe.jsx("rect",{y:t.top+t.height,x:0,width:"100%",height:`${Oj(100)-t.top-t.height}px`,fill:"rgba(0,0,0,0.5)",pointerEvents:"all"})]}):pe.jsx(pe.Fragment,{}),Dj=xe.memo(Lj),QO=t=>{const[e,n]=xe.useState(null),[r,i]=xe.useState(!0);return xe.useEffect(()=>{if(!t)return;let o=!1;const l=[];if(t instanceof Element){let h=t;for(;h=h.ownerDocument.defaultView?.frameElement??null;)h instanceof HTMLIFrameElement&&l.push(h)}const c=t instanceof Element?new Hs(t,l):t,f=c.onMove(({rect:h})=>{o||n(h)}),g=c.onDisappear(()=>{o||i(!1)},!1),y=c.onAppear(()=>{c.getRect().then(h=>{o||(n(h),i(!0))})},!1);return()=>{o=!0,f(),g?.(),y?.()}},[t]),xe.useEffect(()=>{t instanceof D0&&ec.broadcast({action:"SCROLL_INTO_VIEW",value:t.resultId})},[t]),{boxing:e,isVisible:r}},Pj={center:"middle",left:"right",right:"left",top:"bottom",bottom:"top"},Mj={above:"top",below:"bottom"},kj=()=>{const t=xe.useRef([]),[e,n]=xe.useState(""),[r,i]=xe.useState("");(()=>{t.current.length>0||(["right","left"].map(f=>["top","bottom","center"].map(g=>["top","bottom","center"].map(y=>t.current.push({position:f,alignment:g,direction:y,try:!1})))),["above","below"].map(f=>["left","right","center"].map(g=>["left","right","center"].map(y=>t.current.push({position:f,alignment:g,direction:y,try:!1})))))})();const l=xe.useMemo(()=>(f,g)=>{const h=`bubble-arrow-${Mj[f]||f}-${Pj[g]}`;return br[h]??""},[]),c=xe.useCallback((f,g,y="above",h="center",p="center")=>{const E=g.top>=f.height+20,A=window.innerWidth-g.right>=f.width+20,_=window.innerHeight-g.bottom>=f.height+20,I=g.left>=f.width+20;n(l(y,p)),i(br[`position-${y}`]??"");const C=()=>{t.current=t.current.map(D=>(D.position===y&&D.alignment===h&&D.direction===p&&(D.try=!0),D));const ne=t.current.find(D=>!D.try&&y===D.position)??t.current.find(D=>!D.try&&D.alignment==="center"&&D.direction==="center")??t.current.find(D=>!D.try&&D.alignment==="center")??t.current.find(D=>!D.try);return ne?c(f,g,ne.position,ne.alignment,ne.direction):{top:0,left:0}},v=(B,ne)=>B==="top"?g.top>=f.height?{top:g.top-f.height,left:ne}:C():B==="bottom"?window.innerHeight-g.top>=f.height?{top:g.top,left:ne}:C():g.top>=f.height/2&&window.innerHeight-g.top>=f.height/2?{top:g.top-f.height/2,left:ne}:C(),T=(B,ne)=>B==="top"?g.top+g.height/2>=f.height?{top:g.top+g.height/2-f.height,left:ne}:C():B==="bottom"?window.innerHeight-g.top-g.height/2>=f.height?{top:g.top+g.height/2,left:ne}:C():g.top+g.height/2>=f.height/2&&window.innerHeight-g.top-g.height/2>=f.height/2?{top:g.top+(g.height-f.height)/2,left:ne}:C(),S=(B,ne)=>B==="top"?g.bottom>=f.height?{top:g.bottom-f.height,left:ne}:C():B==="bottom"?window.innerHeight-g.bottom>=f.height?{top:g.bottom,left:ne}:C():g.bottom>=f.height/2&&window.innerHeight-g.bottom>=f.height/2?{top:g.bottom-f.height/2,left:ne}:C(),O=(B,ne)=>B==="left"?g.left+g.width/2>f.width?{top:ne,left:g.left+g.width/2-f.width}:C():B==="right"?window.innerWidth-g.left-g.width/2>=f.width?{top:ne,left:g.left+g.width/2}:C():window.innerWidth-g.left-g.width/2>=f.width/2&&g.left+g.width/2>=f.width/2?{top:ne,left:g.left+(g.width-f.width)/2}:C(),$=(B,ne)=>B==="left"?g.right>=f.width?{top:ne,left:g.right-f.width}:C():B==="right"?window.innerWidth-g.right>=f.width?{top:ne,left:g.right}:C():window.innerWidth-g.right>=f.width/2&&g.right>=f.width/2?{top:ne,left:g.right-f.width/2}:C(),V=(B,ne)=>B==="left"?g.left>=f.width?{top:ne,left:g.left-f.width}:C():B==="right"?window.innerWidth-g.left>=f.width?{top:ne,left:g.left}:C():g.left>=f.width/2&&window.innerWidth-g.left>=f.width/2?{top:ne,left:g.left-f.width/2}:C();switch(y){case"above":if(E){const B=g.top-(f.height+20);return h==="left"?V(p,B):h==="right"?$(p,B):O(p,B)}else return C();case"right":if(A){const B=g.right+20;return h==="top"?v(p,B):h==="bottom"?S(p,B):T(p,B)}else return C();case"below":if(_){const B=g.bottom+20;return h==="left"?V(p,B):h==="right"?$(p,B):O(p,B)}else return C();case"left":if(I){const B=g.left-(f.width+20);return h==="top"?v(p,B):h==="bottom"?S(p,B):T(p,B)}else return C()}return{top:0,left:0}},[l]);return{determinePosition:c,arrowClassName:e,positionClassName:r}},Fj=(t,e,n,r,i)=>{const[o,l]=xe.useState(-1e3),[c,f]=xe.useState(-1e3),{boxing:g,isVisible:y}=QO(e),{determinePosition:h,arrowClassName:p,positionClassName:E}=kj(),A=xe.useCallback(_=>{if(!_||!t.current)return;const I=t.current.getBoundingClientRect(),{top:C,left:v}=h(I,_,n,r,i);l(C),f(v)},[h,t,n,r,i]);return xe.useEffect(()=>{if(!g||!y){l(-1e3),f(-1e3);return}A(g)},[g,y,A]),{top:o,left:c,arrowClassName:p,positionClassName:E}},$j=(t,e,n)=>{const r=xe.useRef(null),{boxing:i,isVisible:o}=QO(t);xe.useEffect(()=>{if(!(r.current!=null||!n))return r.current=new L0,["border","inset","outset","glow","none"].includes(e)&&r.current.update(f=>({...f,type:e,color:n})),()=>{r.current&&r.current.hide()}},[e,n]);const l=xe.useCallback(f=>{!r||!f||(r.current?.hide(),r.current?.show(f))},[r]);return xe.useEffect(()=>{if(r){if(!i||!o){r.current?.hide();return}l(i)}},[i,o,r,l]),{boxingOverlay:xe.useMemo(()=>{if(!i||!o)return null;const f=Math.max(0,i.top),g=Math.max(0,i.left),y=i.top>=0?Math.max(0,i.height):Math.max(0,i.height+i.top),h=i.left>=0?Math.max(0,i.width):Math.max(0,i.width+i.left);return{top:f,left:g,width:h,height:y}},[i,o])}},Uj=({content:t,width:e,onClose:n,footerProps:r,draggable:i,completionRate:o,bubbleAnchor:l,highlightTarget:c,highlightColor:f,highlightType:g,arrowEnabled:y,position:h,alignment:p,direction:E,offset:A,overlayEnabled:_,isValidator:I,isInformator:C})=>{const{initScroll:v}=xj(l),T=xe.useRef(null),{top:S,left:O,arrowClassName:$,positionClassName:V}=Fj(T,l,h,p,E),{boxingOverlay:B}=$j(c??l,g,f);return xe.useEffect(()=>{C||v()},[v,C]),xe.useEffect(()=>{setTimeout(()=>{T.current?.classList.contains(br.animated)&&T.current.classList.add(br.visible)},200)},[V,$]),pe.jsxs(pe.Fragment,{children:[_&&B&&pe.jsx(Dj,{boxing:B}),pe.jsxs("div",{ref:T,className:`${br.bubble} ${br.animated} ${y?$:""} ${V} ${I?`${br.validator} ${br.error}`:""}`,style:{...Y1(e),top:`${S+A.y}px`,left:`${O+A.x}px`},children:[pe.jsxs("div",{className:br["icons-box"],children:[i&&pe.jsx(uv,{ref:T}),!I&&pe.jsx("div",{className:br.cross,onClick:n,children:pe.jsx(Kh,{})})]}),pe.jsx(cv,{content:t}),o!=null&&pe.jsx(nb,{completionRate:o}),r&&pe.jsx(tb,{...r})]})]})};class nT extends Iu{constructor(){super(...arguments),this._target=null,this._position="above",this._alignment="center",this._direction="center",this._arrowEnabled=!1,this._isValidator=!1,this._isInformator=!1,this._scrollMode="both",this._highlightColor="",this._highlightType="none",this._highlightTarget=null,this.show=()=>{super.show(),this.target&&this.root?.render(pe.jsx(Uj,{...super.getDefaultProps(),completionRate:this.getCompletionRate(),footerProps:super.getFooterProps(),bubbleAnchor:this.target,highlightTarget:this.highlightTarget,highlightColor:this.highlightColor,highlightType:this.highlightType,position:this.position,alignment:this.alignment,direction:this.direction,arrowEnabled:this.arrowEnabled,overlayEnabled:this.overlayEnabled,isValidator:this.isValidator,isInformator:this.isInformator,offset:{x:this.offsetX,y:this.offsetY}}))}}set target(e){this._target=e}get target(){return this._target}set scrollMode(e){this._scrollMode=e}get scrollMode(){return this._scrollMode}set isValidator(e){this._isValidator=e}get isValidator(){return this._isValidator}set isInformator(e){this._isInformator=e}get isInformator(){return this._isInformator}get position(){return this._position}set position(e){this._position=e}get alignment(){return this._alignment}set alignment(e){this._alignment=e}get direction(){return this._direction}set direction(e){this._direction=e}set arrowEnabled(e){this._arrowEnabled=e}get arrowEnabled(){return this._arrowEnabled}set content(e){super.content=e,this.show()}get content(){return this._content}set highlightColor(e){this._highlightColor=e}get highlightColor(){return this._highlightColor}set highlightTarget(e){this._highlightTarget=e}get highlightTarget(){return this._highlightTarget}set highlightType(e){this._highlightType=e}get highlightType(){return this._highlightType}}const XO=({onClose:t,title:e,content:n,width:r,classnames:i,actions:o=[],draggable:l=!1})=>{const c=xe.useRef(null);return xe.useEffect(()=>{setTimeout(()=>{c.current?.classList.contains(br.animated)&&c.current.classList.add(br.visible)},200)},[]),pe.jsxs("div",{ref:c,className:`${br.bubble} ${i}`,style:{width:`${r}px`,borderColor:Iu.borderColor??""},children:[pe.jsxs("div",{className:br["icons-box"],children:[l&&pe.jsx(uv,{ref:c}),pe.jsx("div",{className:br.cross,onClick:t,children:pe.jsx(Kh,{})})]}),pe.jsx("div",{className:br["push-title"],children:pe.jsx("h1",{children:e})}),pe.jsx(cv,{content:n}),pe.jsx("div",{className:br.actions,children:o.map((f,g)=>pe.jsx("div",{title:f.options.title??"",className:`${br["action-item"]} ${f.options.disabled?br["action-item-disabled"]:""}`,onClick:f.action,children:f.label},g))})]})};class Bj extends Iu{constructor(){super(...arguments),this._title="",this._displayMode="centered_page",this.actions=[],this.addAction=(e,n,r={title:void 0,disabled:!1})=>{this.actions.push({label:e,action:n,options:r})},this.show=()=>{super.show();const e=this.displayMode==="notification"?`${br.animated} ${br.corner} ${br["corner-top-right"]}`:`${br["center-push"]}`,n={...super.getDefaultProps(),title:this.title,actions:this.actions,classnames:e};this.displayMode==="notification"?this.root?.render(pe.jsx(XO,{...n})):this.displayMode==="centered_page"&&this.root?.render(pe.jsx("div",{className:br["center-bubble"],children:pe.jsx(XO,{...n})}))}}set title(e){this._title=e}get title(){return this._title}set displayMode(e){this._displayMode=e}get displayMode(){return this._displayMode}}const JO=75,e2=75,Zj=125,jj=60,t2=Vs.createContext(void 0),Ea={colors:{primary:yl.primary,secondary:yl.secondary,highlight:yl.highlight},projectId:null,defaultPosition:"bottom_right",isFixed:!1,shape:"classic",launcherColor:yl.primary,customIcon:null,watermarkIcon:null,supportType:"default_categories",supportCategories:[],translations:{},launcherWidth:JO,launcherHeight:e2,loginScreen:{gradientColor:yl.primary,loginButtonColor:yl.secondary,customLogoUrl:null,customWelcomeText:null}},Vj=({children:t})=>{const e=qh(),n=za(),r=xe.useMemo(()=>n!=null?Gj(n):null,[n]),{offlineInitData:i}=B1(),o=i?.theme??null,l=xe.useMemo(()=>r??{...Ea,customIcon:o?.launcher.customIconUrl??Ea.customIcon,shape:o?.launcher.shape??Ea.shape,launcherColor:o?.launcher.color??Ea.launcherColor,defaultPosition:o?.launcher.defaultPosition??Ea.defaultPosition,isFixed:o?.launcher.isFixed??Ea.isFixed,colors:{...Ea.colors,primary:o?.launcher.color??Ea.colors.primary},loginScreen:{gradientColor:o?.loginScreen.gradientColor??Ea.loginScreen.gradientColor,customLogoUrl:o?.loginScreen.customLogoUrl??Ea.loginScreen.customLogoUrl,customWelcomeText:o?.loginScreen.customWelcomeText??Ea.loginScreen.customWelcomeText,loginButtonColor:o?.loginScreen.loginButtonColor??Ea.loginScreen.loginButtonColor}},[r,o]);return xe.useEffect(()=>{zj(l),Hj(e,l)},[l,e]),pe.jsx(t2.Provider,{value:{theme:l},children:t})},Kc=()=>{const t=Vs.useContext(t2);if(t==null)throw new Error("useThemeContext must be used within a ThemeProvider");return t};function zj(t){Iu.borderColor=t.colors.primary,t.watermarkIcon!=null&&(Iu.watermarkIcon=t.watermarkIcon)}function Hj(t,e){t===null||!("style"in t)||!(t.style instanceof CSSStyleDeclaration)||(t.style.setProperty("--ll-primary-color",e.colors.primary),t.style.setProperty("--ll-secondary-color",e.colors.secondary),t.style.setProperty("--ll-launcher-color",e.launcherColor),e.colors.primary==="#ffffff"&&t.style.setProperty("--ll-launcher-border","1px solid rgba(0,0,0,0.2)"),t.style.setProperty("--ll-primary-text-color",U1(e.colors.primary)),t.style.setProperty("--ll-secondary-text-color",U1(e.colors.secondary)),t.style.setProperty("--ll-login-screen-gradient-color",e.loginScreen.gradientColor),t.style.setProperty("--ll-login-screen-login-button-color",e.loginScreen.loginButtonColor),t.style.setProperty("--ll-login-screen-login-button-text-color",U1(e.loginScreen.loginButtonColor)))}function Gj(t){return t.config.display==null?Ea:{projectId:t.legacy_id,defaultPosition:t.config.display.launcher.default_position??Ea.defaultPosition,isFixed:!!t.config.display.launcher.is_fixed,shape:t.config.display.launcher.shape??Ea.shape,launcherColor:t.config.display.primary_color??yl.primary,customIcon:t.config.display.launcher.logo_url,watermarkIcon:t.config.display.watermark_url,launcherWidth:t.config.display.launcher.shape==="rectangle"?Zj:JO,launcherHeight:t.config.display.launcher.shape==="rectangle"?jj:e2,supportType:t.config.support.type,colors:{primary:t.config.display.primary_color??yl.primary,secondary:t.config.display.secondary_color??yl.secondary,highlight:t.config.display.highlight_color??yl.highlight},supportCategories:t.config.support.categories,translations:t.config.display.launcher.custom_text??Ea.translations,loginScreen:{loginButtonColor:yl.secondary,gradientColor:yl.primary,customLogoUrl:null,customWelcomeText:null}}}var fv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var qj=fv.exports,n2;function Wj(){return n2||(n2=1,(function(t,e){(function(){var n,r="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",c="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",g=500,y="__lodash_placeholder__",h=1,p=2,E=4,A=1,_=2,I=1,C=2,v=4,T=8,S=16,O=32,$=64,V=128,B=256,ne=512,D=30,X="...",ve=800,ie=16,ye=1,Ne=2,Me=3,oe=1/0,Ce=9007199254740991,Ye=17976931348623157e292,et=NaN,Y=4294967295,Ee=Y-1,Pe=Y>>>1,Xe=[["ary",V],["bind",I],["bindKey",C],["curry",T],["curryRight",S],["flip",ne],["partial",O],["partialRight",$],["rearg",B]],Ze="[object Arguments]",at="[object Array]",jt="[object AsyncFunction]",xt="[object Boolean]",ht="[object Date]",It="[object DOMException]",Ue="[object Error]",Ve="[object Function]",_t="[object GeneratorFunction]",M="[object Map]",x="[object Number]",U="[object Null]",j="[object Object]",he="[object Promise]",de="[object Proxy]",ot="[object RegExp]",wt="[object Set]",st="[object String]",nt="[object Symbol]",rt="[object Undefined]",ct="[object WeakMap]",St="[object WeakSet]",Wt="[object ArrayBuffer]",$t="[object DataView]",hn="[object Float32Array]",dn="[object Float64Array]",_n="[object Int8Array]",En="[object Int16Array]",tr="[object Int32Array]",Ir="[object Uint8Array]",Fr="[object Uint8ClampedArray]",Dr="[object Uint16Array]",ni="[object Uint32Array]",bi=/\b__p \+= '';/g,Jr=/\b(__p \+=) '' \+/g,eo=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ei=/&(?:amp|lt|gt|quot|#39);/g,jr=/[&<>"']/g,qi=RegExp(ei.source),ro=RegExp(jr.source),To=/<%-([\s\S]+?)%>/g,di=/<%([\s\S]+?)%>/g,xo=/<%=([\s\S]+?)%>/g,pn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nn=/^\w*$/,be=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Te=/[\\^$.*+?()[\]{}|]/g,je=RegExp(Te.source),Je=/^\s+/,Ge=/\s/,vt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Tt=/\{\n\/\* \[wrapped with (.+)\] \*/,Qt=/,? & /,sn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,qt=/[()=,{}\[\]\/\s]/,Nt=/\\(\\)?/g,en=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,vn=/\w*$/,On=/^[-+]0x[0-9a-f]+$/i,Un=/^0b[01]+$/i,Er=/^\[object .+?Constructor\]$/,cn=/^0o[0-7]+$/i,ze=/^(?:0|[1-9]\d*)$/,pt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Gt=/($^)/,Gn=/['\n\r\u2028\u2029\\]/g,Rn="\\ud800-\\udfff",pr="\\u0300-\\u036f",Sr="\\ufe20-\\ufe2f",Ri="\\u20d0-\\u20ff",xi=pr+Sr+Ri,oi="\\u2700-\\u27bf",Vr="a-z\\xdf-\\xf6\\xf8-\\xff",yi="\\xac\\xb1\\xd7\\xf7",Ni="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ja="\\u2000-\\u206f",po=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",_s="A-Z\\xc0-\\xd6\\xd8-\\xde",yo="\\ufe0e\\ufe0f",Aa=yi+Ni+Ja+po,Qo="[']",El="["+Rn+"]",Ia="["+Aa+"]",aa="["+xi+"]",el="\\d+",xn="["+oi+"]",nr="["+Vr+"]",Rr="[^"+Rn+Aa+el+oi+Vr+_s+"]",si="\\ud83c[\\udffb-\\udfff]",ti="(?:"+aa+"|"+si+")",io="[^"+Rn+"]",hi="(?:\\ud83c[\\udde6-\\uddff]){2}",Kr="[\\ud800-\\udbff][\\udc00-\\udfff]",Oi="["+_s+"]",Ei="\\u200d",No="(?:"+nr+"|"+Rr+")",vo="(?:"+Oi+"|"+Rr+")",Ms="(?:"+Qo+"(?:d|ll|m|re|s|t|ve))?",bs="(?:"+Qo+"(?:D|LL|M|RE|S|T|VE))?",Li=ti+"?",Vo="["+yo+"]?",qs="(?:"+Ei+"(?:"+[io,hi,Kr].join("|")+")"+Vo+Li+")*",Es="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ls="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ca=Vo+Li+qs,tl="(?:"+[xn,hi,Kr].join("|")+")"+Ca,Ra="(?:"+[io+aa+"?",aa,hi,Kr,El].join("|")+")",Ws=RegExp(Qo,"g"),la=RegExp(aa,"g"),ua=RegExp(si+"(?="+si+")|"+Ra+Ca,"g"),af=RegExp([Oi+"?"+nr+"+"+Ms+"(?="+[Ia,Oi,"$"].join("|")+")",vo+"+"+bs+"(?="+[Ia,Oi+No,"$"].join("|")+")",Oi+"?"+No+"+"+Ms,Oi+"+"+bs,ls,Es,el,tl].join("|"),"g"),wl=RegExp("["+Ei+Rn+xi+yo+"]"),Tl=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,us=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],lf=-1,wr={};wr[hn]=wr[dn]=wr[_n]=wr[En]=wr[tr]=wr[Ir]=wr[Fr]=wr[Dr]=wr[ni]=!0,wr[Ze]=wr[at]=wr[Wt]=wr[xt]=wr[$t]=wr[ht]=wr[Ue]=wr[Ve]=wr[M]=wr[x]=wr[j]=wr[ot]=wr[wt]=wr[st]=wr[ct]=!1;var ai={};ai[Ze]=ai[at]=ai[Wt]=ai[$t]=ai[xt]=ai[ht]=ai[hn]=ai[dn]=ai[_n]=ai[En]=ai[tr]=ai[M]=ai[x]=ai[j]=ai[ot]=ai[wt]=ai[st]=ai[nt]=ai[Ir]=ai[Fr]=ai[Dr]=ai[ni]=!0,ai[Ue]=ai[Ve]=ai[ct]=!1;var Ks={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},xa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Tr={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ot={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},qn=parseFloat,ir=parseInt,Fi=typeof $a=="object"&&$a&&$a.Object===Object&&$a,$o=typeof self=="object"&&self&&self.Object===Object&&self,Ur=Fi||$o||Function("return this")(),So=e&&!e.nodeType&&e,Uo=So&&!0&&t&&!t.nodeType&&t,nl=Uo&&Uo.exports===So,Sl=nl&&Fi.process,Ti=(function(){try{var Vt=Uo&&Uo.require&&Uo.require("util").types;return Vt||Sl&&Sl.binding&&Sl.binding("util")}catch{}})(),uf=Ti&&Ti.isArrayBuffer,Ao=Ti&&Ti.isDate,Hl=Ti&&Ti.isMap,Kf=Ti&&Ti.isRegExp,cc=Ti&&Ti.isSet,fp=Ti&&Ti.isTypedArray;function ks(Vt,Sn,fn){switch(fn.length){case 0:return Vt.call(Sn);case 1:return Vt.call(Sn,fn[0]);case 2:return Vt.call(Sn,fn[0],fn[1]);case 3:return Vt.call(Sn,fn[0],fn[1],fn[2])}return Vt.apply(Sn,fn)}function nh(Vt,Sn,fn,or){for(var Br=-1,$i=Vt==null?0:Vt.length;++Br<$i;){var _o=Vt[Br];Sn(or,_o,fn(_o),Vt)}return or}function ws(Vt,Sn){for(var fn=-1,or=Vt==null?0:Vt.length;++fn<or&&Sn(Vt[fn],fn,Vt)!==!1;);return Vt}function rh(Vt,Sn){for(var fn=Vt==null?0:Vt.length;fn--&&Sn(Vt[fn],fn,Vt)!==!1;);return Vt}function ih(Vt,Sn){for(var fn=-1,or=Vt==null?0:Vt.length;++fn<or;)if(!Sn(Vt[fn],fn,Vt))return!1;return!0}function Gl(Vt,Sn){for(var fn=-1,or=Vt==null?0:Vt.length,Br=0,$i=[];++fn<or;){var _o=Vt[fn];Sn(_o,fn,Vt)&&($i[Br++]=_o)}return $i}function Yf(Vt,Sn){var fn=Vt==null?0:Vt.length;return!!fn&&fc(Vt,Sn,0)>-1}function dp(Vt,Sn,fn){for(var or=-1,Br=Vt==null?0:Vt.length;++or<Br;)if(fn(Sn,Vt[or]))return!0;return!1}function oo(Vt,Sn){for(var fn=-1,or=Vt==null?0:Vt.length,Br=Array(or);++fn<or;)Br[fn]=Sn(Vt[fn],fn,Vt);return Br}function rl(Vt,Sn){for(var fn=-1,or=Sn.length,Br=Vt.length;++fn<or;)Vt[Br+fn]=Sn[fn];return Vt}function oh(Vt,Sn,fn,or){var Br=-1,$i=Vt==null?0:Vt.length;for(or&&$i&&(fn=Vt[++Br]);++Br<$i;)fn=Sn(fn,Vt[Br],Br,Vt);return fn}function hp(Vt,Sn,fn,or){var Br=Vt==null?0:Vt.length;for(or&&Br&&(fn=Vt[--Br]);Br--;)fn=Sn(fn,Vt[Br],Br,Vt);return fn}function sh(Vt,Sn){for(var fn=-1,or=Vt==null?0:Vt.length;++fn<or;)if(Sn(Vt[fn],fn,Vt))return!0;return!1}var i_=lh("length");function Qf(Vt){return Vt.split("")}function fm(Vt){return Vt.match(sn)||[]}function pp(Vt,Sn,fn){var or;return fn(Vt,function(Br,$i,_o){if(Sn(Br,$i,_o))return or=$i,!1}),or}function ah(Vt,Sn,fn,or){for(var Br=Vt.length,$i=fn+(or?1:-1);or?$i--:++$i<Br;)if(Sn(Vt[$i],$i,Vt))return $i;return-1}function fc(Vt,Sn,fn){return Sn===Sn?pc(Vt,Sn,fn):ah(Vt,mp,fn)}function gp(Vt,Sn,fn,or){for(var Br=fn-1,$i=Vt.length;++Br<$i;)if(or(Vt[Br],Sn))return Br;return-1}function mp(Vt){return Vt!==Vt}function dm(Vt,Sn){var fn=Vt==null?0:Vt.length;return fn?ch(Vt,Sn)/fn:et}function lh(Vt){return function(Sn){return Sn==null?n:Sn[Vt]}}function uh(Vt){return function(Sn){return Vt==null?n:Vt[Sn]}}function yp(Vt,Sn,fn,or,Br){return Br(Vt,function($i,_o,Yi){fn=or?(or=!1,$i):Sn(fn,$i,_o,Yi)}),fn}function o_(Vt,Sn){var fn=Vt.length;for(Vt.sort(Sn);fn--;)Vt[fn]=Vt[fn].value;return Vt}function ch(Vt,Sn){for(var fn,or=-1,Br=Vt.length;++or<Br;){var $i=Sn(Vt[or]);$i!==n&&(fn=fn===n?$i:fn+$i)}return fn}function vp(Vt,Sn){for(var fn=-1,or=Array(Vt);++fn<Vt;)or[fn]=Sn(fn);return or}function _p(Vt,Sn){return oo(Sn,function(fn){return[fn,Vt[fn]]})}function fh(Vt){return Vt&&Vt.slice(0,dh(Vt)+1).replace(Je,"")}function ca(Vt){return function(Sn){return Vt(Sn)}}function Pu(Vt,Sn){return oo(Sn,function(fn){return Vt[fn]})}function Al(Vt,Sn){return Vt.has(Sn)}function bp(Vt,Sn){for(var fn=-1,or=Vt.length;++fn<or&&fc(Sn,Vt[fn],0)>-1;);return fn}function Ep(Vt,Sn){for(var fn=Vt.length;fn--&&fc(Sn,Vt[fn],0)>-1;);return fn}function wp(Vt,Sn){for(var fn=Vt.length,or=0;fn--;)Vt[fn]===Sn&&++or;return or}var dc=uh(Ks),Tp=uh(xa);function hm(Vt){return"\\"+Ot[Vt]}function Il(Vt,Sn){return Vt==null?n:Vt[Sn]}function hc(Vt){return wl.test(Vt)}function s_(Vt){return Tl.test(Vt)}function a_(Vt){for(var Sn,fn=[];!(Sn=Vt.next()).done;)fn.push(Sn.value);return fn}function Mu(Vt){var Sn=-1,fn=Array(Vt.size);return Vt.forEach(function(or,Br){fn[++Sn]=[Br,or]}),fn}function Xf(Vt,Sn){return function(fn){return Vt(Sn(fn))}}function li(Vt,Sn){for(var fn=-1,or=Vt.length,Br=0,$i=[];++fn<or;){var _o=Vt[fn];(_o===Sn||_o===y)&&(Vt[fn]=y,$i[Br++]=fn)}return $i}function Cl(Vt){var Sn=-1,fn=Array(Vt.size);return Vt.forEach(function(or){fn[++Sn]=or}),fn}function l_(Vt){var Sn=-1,fn=Array(Vt.size);return Vt.forEach(function(or){fn[++Sn]=[or,or]}),fn}function pc(Vt,Sn,fn){for(var or=fn-1,Br=Vt.length;++or<Br;)if(Vt[or]===Sn)return or;return-1}function u_(Vt,Sn,fn){for(var or=fn+1;or--;)if(Vt[or]===Sn)return or;return or}function ql(Vt){return hc(Vt)?Sp(Vt):i_(Vt)}function Fs(Vt){return hc(Vt)?pm(Vt):Qf(Vt)}function dh(Vt){for(var Sn=Vt.length;Sn--&&Ge.test(Vt.charAt(Sn)););return Sn}var Jf=uh(Tr);function Sp(Vt){for(var Sn=ua.lastIndex=0;ua.test(Vt);)++Sn;return Sn}function pm(Vt){return Vt.match(ua)||[]}function Ap(Vt){return Vt.match(af)||[]}var Ip=(function Vt(Sn){Sn=Sn==null?Ur:cf.defaults(Ur.Object(),Sn,cf.pick(Ur,us));var fn=Sn.Array,or=Sn.Date,Br=Sn.Error,$i=Sn.Function,_o=Sn.Math,Yi=Sn.Object,ed=Sn.RegExp,Cp=Sn.String,Ts=Sn.TypeError,il=fn.prototype,Rp=$i.prototype,fa=Yi.prototype,ff=Sn["__core-js_shared__"],td=Rp.toString,Ui=fa.hasOwnProperty,df=0,Wl=(function(){var m=/[^.]+$/.exec(ff&&ff.keys&&ff.keys.IE_PROTO||"");return m?"Symbol(src)_1."+m:""})(),gc=fa.toString,hf=td.call(Yi),gm=Ur._,nd=ed("^"+td.call(Ui).replace(Te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),rd=nl?Sn.Buffer:n,ol=Sn.Symbol,mc=Sn.Uint8Array,xp=rd?rd.allocUnsafe:n,Ys=Xf(Yi.getPrototypeOf,Yi),hh=Yi.create,id=fa.propertyIsEnumerable,ph=il.splice,Np=ol?ol.isConcatSpreadable:n,Kl=ol?ol.iterator:n,ku=ol?ol.toStringTag:n,od=(function(){try{var m=xs(Yi,"defineProperty");return m({},"",{}),m}catch{}})(),Op=Sn.clearTimeout!==Ur.clearTimeout&&Sn.clearTimeout,so=or&&or.now!==Ur.Date.now&&or.now,Lp=Sn.setTimeout!==Ur.setTimeout&&Sn.setTimeout,yc=_o.ceil,Yl=_o.floor,gh=Yi.getOwnPropertySymbols,mh=rd?rd.isBuffer:n,pf=Sn.isFinite,gf=il.join,vc=Xf(Yi.keys,Yi),Bo=_o.max,Ss=_o.min,mm=or.now,Dp=Sn.parseInt,Fu=_o.random,sd=il.reverse,ad=xs(Sn,"DataView"),$u=xs(Sn,"Map"),ld=xs(Sn,"Promise"),Ql=xs(Sn,"Set"),ud=xs(Sn,"WeakMap"),Uu=xs(Yi,"create"),mf=ud&&new ud,yf={},Pp=Af(ad),Xl=Af($u),ym=Af(ld),vf=Af(Ql),sl=Af(ud),Jl=ol?ol.prototype:n,Xo=Jl?Jl.valueOf:n,cd=Jl?Jl.toString:n;function Qe(m){if(es(m)&&!ui(m)&&!(m instanceof ri)){if(m instanceof As)return m;if(Ui.call(m,"__wrapped__"))return NE(m)}return new As(m)}var _c=(function(){function m(){}return function(b){if(!Go(b))return{};if(hh)return hh(b);m.prototype=b;var k=new m;return m.prototype=n,k}})();function Rl(){}function As(m,b){this.__wrapped__=m,this.__actions__=[],this.__chain__=!!b,this.__index__=0,this.__values__=n}Qe.templateSettings={escape:To,evaluate:di,interpolate:xo,variable:"",imports:{_:Qe}},Qe.prototype=Rl.prototype,Qe.prototype.constructor=Qe,As.prototype=_c(Rl.prototype),As.prototype.constructor=As;function ri(m){this.__wrapped__=m,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Y,this.__views__=[]}function fd(){var m=new ri(this.__wrapped__);return m.__actions__=Yt(this.__actions__),m.__dir__=this.__dir__,m.__filtered__=this.__filtered__,m.__iteratees__=Yt(this.__iteratees__),m.__takeCount__=this.__takeCount__,m.__views__=Yt(this.__views__),m}function Mp(){if(this.__filtered__){var m=new ri(this);m.__dir__=-1,m.__filtered__=!0}else m=this.clone(),m.__dir__*=-1;return m}function bc(){var m=this.__wrapped__.value(),b=this.__dir__,k=ui(m),ee=b<0,De=k?m.length:0,it=c_(0,De,this.__views__),Et=it.start,kt=it.end,Jt=kt-Et,Pn=ee?kt:Et-1,kn=this.__iteratees__,zn=kn.length,sr=0,Cr=Ss(Jt,this.__takeCount__);if(!k||!ee&&De==Jt&&Cr==Jt)return bt(m,this.__actions__);var Hr=[];e:for(;Jt--&&sr<Cr;){Pn+=b;for(var vi=-1,Gr=m[Pn];++vi<zn;){var Pi=kn[vi],Vi=Pi.iteratee,mu=Pi.type,dl=Vi(Gr);if(mu==Ne)Gr=dl;else if(!dl){if(mu==ye)continue e;break e}}Hr[sr++]=Gr}return Hr}ri.prototype=_c(Rl.prototype),ri.prototype.constructor=ri;function $s(m){var b=-1,k=m==null?0:m.length;for(this.clear();++b<k;){var ee=m[b];this.set(ee[0],ee[1])}}function ao(){this.__data__=Uu?Uu(null):{},this.size=0}function lo(m){var b=this.has(m)&&delete this.__data__[m];return this.size-=b?1:0,b}function eu(m){var b=this.__data__;if(Uu){var k=b[m];return k===f?n:k}return Ui.call(b,m)?b[m]:n}function Is(m){var b=this.__data__;return Uu?b[m]!==n:Ui.call(b,m)}function Us(m,b){var k=this.__data__;return this.size+=this.has(m)?0:1,k[m]=Uu&&b===n?f:b,this}$s.prototype.clear=ao,$s.prototype.delete=lo,$s.prototype.get=eu,$s.prototype.has=Is,$s.prototype.set=Us;function cs(m){var b=-1,k=m==null?0:m.length;for(this.clear();++b<k;){var ee=m[b];this.set(ee[0],ee[1])}}function Ec(){this.__data__=[],this.size=0}function Qs(m){var b=this.__data__,k=fs(b,m);if(k<0)return!1;var ee=b.length-1;return k==ee?b.pop():ph.call(b,k,1),--this.size,!0}function yh(m){var b=this.__data__,k=fs(b,m);return k<0?n:b[k][1]}function vm(m){return fs(this.__data__,m)>-1}function _m(m,b){var k=this.__data__,ee=fs(k,m);return ee<0?(++this.size,k.push([m,b])):k[ee][1]=b,this}cs.prototype.clear=Ec,cs.prototype.delete=Qs,cs.prototype.get=yh,cs.prototype.has=vm,cs.prototype.set=_m;function Na(m){var b=-1,k=m==null?0:m.length;for(this.clear();++b<k;){var ee=m[b];this.set(ee[0],ee[1])}}function kp(){this.size=0,this.__data__={hash:new $s,map:new($u||cs),string:new $s}}function tu(m){var b=Bi(this,m).delete(m);return this.size-=b?1:0,b}function dd(m){return Bi(this,m).get(m)}function Fp(m){return Bi(this,m).has(m)}function bm(m,b){var k=Bi(this,m),ee=k.size;return k.set(m,b),this.size+=k.size==ee?0:1,this}Na.prototype.clear=kp,Na.prototype.delete=tu,Na.prototype.get=dd,Na.prototype.has=Fp,Na.prototype.set=bm;function wc(m){var b=-1,k=m==null?0:m.length;for(this.__data__=new Na;++b<k;)this.add(m[b])}function Bu(m){return this.__data__.set(m,f),this}function _f(m){return this.__data__.has(m)}wc.prototype.add=wc.prototype.push=Bu,wc.prototype.has=_f;function Cs(m){var b=this.__data__=new cs(m);this.size=b.size}function vh(){this.__data__=new cs,this.size=0}function _h(m){var b=this.__data__,k=b.delete(m);return this.size=b.size,k}function Oa(m){return this.__data__.get(m)}function Xs(m){return this.__data__.has(m)}function Tc(m,b){var k=this.__data__;if(k instanceof cs){var ee=k.__data__;if(!$u||ee.length<i-1)return ee.push([m,b]),this.size=++k.size,this;k=this.__data__=new Na(ee)}return k.set(m,b),this.size=k.size,this}Cs.prototype.clear=vh,Cs.prototype.delete=_h,Cs.prototype.get=Oa,Cs.prototype.has=Xs,Cs.prototype.set=Tc;function xl(m,b){var k=ui(m),ee=!k&&Kp(m),De=!k&&!ee&&xh(m),it=!k&&!ee&&!De&&zm(m),Et=k||ee||De||it,kt=Et?vp(m.length,Cp):[],Jt=kt.length;for(var Pn in m)(b||Ui.call(m,Pn))&&!(Et&&(Pn=="length"||De&&(Pn=="offset"||Pn=="parent")||it&&(Pn=="buffer"||Pn=="byteLength"||Pn=="byteOffset")||Co(Pn,Jt)))&&kt.push(Pn);return kt}function Nl(m){var b=m.length;return b?m[se(0,b-1)]:n}function Sc(m,b){return Cm(Yt(m),ll(b,0,m.length))}function Em(m){return Cm(Yt(m))}function bf(m,b,k){(k!==n&&!Dc(m[b],k)||k===n&&!(b in m))&&La(m,b,k)}function Ac(m,b,k){var ee=m[b];(!(Ui.call(m,b)&&Dc(ee,k))||k===n&&!(b in m))&&La(m,b,k)}function fs(m,b){for(var k=m.length;k--;)if(Dc(m[k][0],b))return k;return-1}function da(m,b,k,ee){return ul(m,function(De,it,Et){b(ee,De,k(De),Et)}),ee}function uo(m,b){return m&&Tn(b,ta(b),m)}function al(m,b){return m&&Tn(b,kl(b),m)}function La(m,b,k){b=="__proto__"&&od?od(m,b,{configurable:!0,enumerable:!0,value:k,writable:!0}):m[b]=k}function Ic(m,b){for(var k=-1,ee=b.length,De=fn(ee),it=m==null;++k<ee;)De[k]=it?n:mI(m,b[k]);return De}function ll(m,b,k){return m===m&&(k!==n&&(m=m<=k?m:k),b!==n&&(m=m>=b?m:b)),m}function Rs(m,b,k,ee,De,it){var Et,kt=b&h,Jt=b&p,Pn=b&E;if(k&&(Et=De?k(m,ee,De,it):k(m)),Et!==n)return Et;if(!Go(m))return m;var kn=ui(m);if(kn){if(Et=Up(m),!kt)return Yt(m,Et)}else{var zn=Bs(m),sr=zn==Ve||zn==_t;if(xh(m))return vr(m,kt);if(zn==j||zn==Ze||sr&&!De){if(Et=Jt||sr?{}:Zs(m),!kt)return Jt?Fn(m,al(Et,m)):Dn(m,uo(Et,m))}else{if(!ai[zn])return De?m:{};Et=KA(m,zn,kt)}}it||(it=new Cs);var Cr=it.get(m);if(Cr)return Cr;it.set(m,Et),d3(m)?m.forEach(function(Gr){Et.add(Rs(Gr,b,k,Gr,m,it))}):c3(m)&&m.forEach(function(Gr,Pi){Et.set(Pi,Rs(Gr,b,k,Pi,m,it))});var Hr=Pn?Jt?er:wn:Jt?kl:ta,vi=kn?n:Hr(m);return ws(vi||m,function(Gr,Pi){vi&&(Pi=Gr,Gr=m[Pi]),Ac(Et,Pi,Rs(Gr,b,k,Pi,m,it))}),Et}function wm(m){var b=ta(m);return function(k){return Zu(k,m,b)}}function Zu(m,b,k){var ee=k.length;if(m==null)return!ee;for(m=Yi(m);ee--;){var De=k[ee],it=b[De],Et=m[De];if(Et===n&&!(De in m)||!it(Et))return!1}return!0}function $p(m,b,k){if(typeof m!="function")throw new Ts(l);return Ih(function(){m.apply(n,k)},b)}function Ol(m,b,k,ee){var De=-1,it=Yf,Et=!0,kt=m.length,Jt=[],Pn=b.length;if(!kt)return Jt;k&&(b=oo(b,ca(k))),ee?(it=dp,Et=!1):b.length>=i&&(it=Al,Et=!1,b=new wc(b));e:for(;++De<kt;){var kn=m[De],zn=k==null?kn:k(kn);if(kn=ee||kn!==0?kn:0,Et&&zn===zn){for(var sr=Pn;sr--;)if(b[sr]===zn)continue e;Jt.push(kn)}else it(b,zn,ee)||Jt.push(kn)}return Jt}var ul=ft(Js),Tm=ft(ju,!0);function Ef(m,b){var k=!0;return ul(m,function(ee,De,it){return k=!!b(ee,De,it),k}),k}function Cc(m,b,k){for(var ee=-1,De=m.length;++ee<De;){var it=m[ee],Et=b(it);if(Et!=null&&(kt===n?Et===Et&&!gu(Et):k(Et,kt)))var kt=Et,Jt=it}return Jt}function bh(m,b,k,ee){var De=m.length;for(k=pi(k),k<0&&(k=-k>De?0:De+k),ee=ee===n||ee>De?De:pi(ee),ee<0&&(ee+=De),ee=k>ee?0:p3(ee);k<ee;)m[k++]=b;return m}function Eh(m,b){var k=[];return ul(m,function(ee,De,it){b(ee,De,it)&&k.push(ee)}),k}function Io(m,b,k,ee,De){var it=-1,Et=m.length;for(k||(k=Sm),De||(De=[]);++it<Et;){var kt=m[it];b>0&&k(kt)?b>1?Io(kt,b-1,k,ee,De):rl(De,kt):ee||(De[De.length]=kt)}return De}var hd=Kt(),pd=Kt(!0);function Js(m,b){return m&&hd(m,b,ta)}function ju(m,b){return m&&pd(m,b,ta)}function Rc(m,b){return Gl(b,function(k){return Td(m[k])})}function nu(m,b){b=Xt(b,m);for(var k=0,ee=b.length;m!=null&&k<ee;)m=m[du(b[k++])];return k&&k==ee?m:n}function gd(m,b,k){var ee=b(m);return ui(m)?ee:rl(ee,k(m))}function ds(m){return m==null?m===n?rt:U:ku&&ku in Yi(m)?lu(m):d_(m)}function ru(m,b){return m>b}function ha(m,b){return m!=null&&Ui.call(m,b)}function xc(m,b){return m!=null&&b in Yi(m)}function wh(m,b,k){return m>=Ss(b,k)&&m<Bo(b,k)}function md(m,b,k){for(var ee=k?dp:Yf,De=m[0].length,it=m.length,Et=it,kt=fn(it),Jt=1/0,Pn=[];Et--;){var kn=m[Et];Et&&b&&(kn=oo(kn,ca(b))),Jt=Ss(kn.length,Jt),kt[Et]=!k&&(b||De>=120&&kn.length>=120)?new wc(Et&&kn):n}kn=m[0];var zn=-1,sr=kt[0];e:for(;++zn<De&&Pn.length<Jt;){var Cr=kn[zn],Hr=b?b(Cr):Cr;if(Cr=k||Cr!==0?Cr:0,!(sr?Al(sr,Hr):ee(Pn,Hr,k))){for(Et=it;--Et;){var vi=kt[Et];if(!(vi?Al(vi,Hr):ee(m[Et],Hr,k)))continue e}sr&&sr.push(Hr),Pn.push(Cr)}}return Pn}function iu(m,b,k,ee){return Js(m,function(De,it,Et){b(ee,k(De),it,Et)}),ee}function pa(m,b,k){b=Xt(b,m),m=Ns(m,b);var ee=m==null?m:m[du(ma(b))];return ee==null?n:ks(ee,m,k)}function Th(m){return es(m)&&ds(m)==Ze}function Sh(m){return es(m)&&ds(m)==Wt}function Da(m){return es(m)&&ds(m)==ht}function Pa(m,b,k,ee,De){return m===b?!0:m==null||b==null||!es(m)&&!es(b)?m!==m&&b!==b:L(m,b,k,ee,Pa,De)}function L(m,b,k,ee,De,it){var Et=ui(m),kt=ui(b),Jt=Et?at:Bs(m),Pn=kt?at:Bs(b);Jt=Jt==Ze?j:Jt,Pn=Pn==Ze?j:Pn;var kn=Jt==j,zn=Pn==j,sr=Jt==Pn;if(sr&&xh(m)){if(!xh(b))return!1;Et=!0,kn=!1}if(sr&&!kn)return it||(it=new Cs),Et||zm(m)?Ll(m,b,k,ee,De,it):Sf(m,b,Jt,k,ee,De,it);if(!(k&A)){var Cr=kn&&Ui.call(m,"__wrapped__"),Hr=zn&&Ui.call(b,"__wrapped__");if(Cr||Hr){var vi=Cr?m.value():m,Gr=Hr?b.value():b;return it||(it=new Cs),De(vi,Gr,k,ee,it)}}return sr?(it||(it=new Cs),zu(m,b,k,ee,De,it)):!1}function R(m){return es(m)&&Bs(m)==M}function P(m,b,k,ee){var De=k.length,it=De,Et=!ee;if(m==null)return!it;for(m=Yi(m);De--;){var kt=k[De];if(Et&&kt[2]?kt[1]!==m[kt[0]]:!(kt[0]in m))return!1}for(;++De<it;){kt=k[De];var Jt=kt[0],Pn=m[Jt],kn=kt[1];if(Et&&kt[2]){if(Pn===n&&!(Jt in m))return!1}else{var zn=new Cs;if(ee)var sr=ee(Pn,kn,Jt,m,b,zn);if(!(sr===n?Pa(kn,Pn,A|_,ee,zn):sr))return!1}}return!0}function z(m){if(!Go(m)||AE(m))return!1;var b=Td(m)?nd:Er;return b.test(Af(m))}function W(m){return es(m)&&ds(m)==ot}function q(m){return es(m)&&Bs(m)==wt}function Z(m){return es(m)&&zE(m.length)&&!!wr[ds(m)]}function K(m){return typeof m=="function"?m:m==null?Fl:typeof m=="object"?ui(m)?ae(m[0],m[1]):ce(m):A3(m)}function le(m){if(!Oc(m))return vc(m);var b=[];for(var k in Yi(m))Ui.call(m,k)&&k!="constructor"&&b.push(k);return b}function _e(m){if(!Go(m))return RE(m);var b=Oc(m),k=[];for(var ee in m)ee=="constructor"&&(b||!Ui.call(m,ee))||k.push(ee);return k}function fe(m,b){return m<b}function Q(m,b){var k=-1,ee=Ml(m)?fn(m.length):[];return ul(m,function(De,it,Et){ee[++k]=b(De,it,Et)}),ee}function ce(m){var b=Ai(m);return b.length==1&&b[0][2]?Am(b[0][0],b[0][1]):function(k){return k===m||P(k,m,b)}}function ae(m,b){return fr(m)&&Zp(b)?Am(du(m),b):function(k){var ee=mI(k,m);return ee===n&&ee===b?yI(k,m):Pa(b,ee,A|_)}}function He(m,b,k,ee,De){m!==b&&hd(b,function(it,Et){if(De||(De=new Cs),Go(it))Oe(m,b,Et,k,He,ee,De);else{var kt=ee?ee(Hu(m,Et),it,Et+"",m,b,De):n;kt===n&&(kt=it),bf(m,Et,kt)}},kl)}function Oe(m,b,k,ee,De,it,Et){var kt=Hu(m,k),Jt=Hu(b,k),Pn=Et.get(Jt);if(Pn){bf(m,k,Pn);return}var kn=it?it(kt,Jt,k+"",m,b,Et):n,zn=kn===n;if(zn){var sr=ui(Jt),Cr=!sr&&xh(Jt),Hr=!sr&&!Cr&&zm(Jt);kn=Jt,sr||Cr||Hr?ui(kt)?kn=kt:ps(kt)?kn=Yt(kt):Cr?(zn=!1,kn=vr(Jt,!0)):Hr?(zn=!1,kn=In(Jt,!0)):kn=[]:N_(Jt)||Kp(Jt)?(kn=kt,Kp(kt)?kn=g3(kt):(!Go(kt)||Td(kt))&&(kn=Zs(Jt))):zn=!1}zn&&(Et.set(Jt,kn),De(kn,Jt,ee,it,Et),Et.delete(Jt)),bf(m,k,kn)}function Be(m,b){var k=m.length;if(k)return b+=b<0?k:0,Co(b,k)?m[b]:n}function Ke(m,b,k){b.length?b=oo(b,function(it){return ui(it)?function(Et){return nu(Et,it.length===1?it[0]:it)}:it}):b=[Fl];var ee=-1;b=oo(b,ca($n()));var De=Q(m,function(it,Et,kt){var Jt=oo(b,function(Pn){return Pn(it)});return{criteria:Jt,index:++ee,value:it}});return o_(De,function(it,Et){return Hn(it,Et,k)})}function me(m,b){return Le(m,b,function(k,ee){return yI(m,ee)})}function Le(m,b,k){for(var ee=-1,De=b.length,it={};++ee<De;){var Et=b[ee],kt=nu(m,Et);k(kt,Et)&&ke(it,Xt(Et,m),kt)}return it}function ge(m){return function(b){return nu(b,m)}}function Fe(m,b,k,ee){var De=ee?gp:fc,it=-1,Et=b.length,kt=m;for(m===b&&(b=Yt(b)),k&&(kt=oo(m,ca(k)));++it<Et;)for(var Jt=0,Pn=b[it],kn=k?k(Pn):Pn;(Jt=De(kt,kn,Jt,ee))>-1;)kt!==m&&ph.call(kt,Jt,1),ph.call(m,Jt,1);return m}function F(m,b){for(var k=m?b.length:0,ee=k-1;k--;){var De=b[k];if(k==ee||De!==it){var it=De;Co(De)?ph.call(m,De,1):Bt(m,De)}}return m}function se(m,b){return m+Yl(Fu()*(b-m+1))}function te(m,b,k,ee){for(var De=-1,it=Bo(yc((b-m)/(k||1)),0),Et=fn(it);it--;)Et[ee?it:++De]=m,m+=k;return Et}function re(m,b){var k="";if(!m||b<1||b>Ce)return k;do b%2&&(k+=m),b=Yl(b/2),b&&(m+=m);while(b);return k}function G(m,b){return cl(Im(m,b,Fl),m+"")}function Ie(m){return Nl(Hm(m))}function we(m,b){var k=Hm(m);return Cm(k,ll(b,0,k.length))}function ke(m,b,k,ee){if(!Go(m))return m;b=Xt(b,m);for(var De=-1,it=b.length,Et=it-1,kt=m;kt!=null&&++De<it;){var Jt=du(b[De]),Pn=k;if(Jt==="__proto__"||Jt==="constructor"||Jt==="prototype")return m;if(De!=Et){var kn=kt[Jt];Pn=ee?ee(kn,Jt,kt):n,Pn===n&&(Pn=Go(kn)?kn:Co(b[De+1])?[]:{})}Ac(kt,Jt,Pn),kt=kt[Jt]}return m}var Ae=mf?function(m,b){return mf.set(m,b),m}:Fl,ue=od?function(m,b){return od(m,"toString",{configurable:!0,enumerable:!1,value:_I(b),writable:!0})}:Fl;function Se(m){return Cm(Hm(m))}function qe(m,b,k){var ee=-1,De=m.length;b<0&&(b=-b>De?0:De+b),k=k>De?De:k,k<0&&(k+=De),De=b>k?0:k-b>>>0,b>>>=0;for(var it=fn(De);++ee<De;)it[ee]=m[ee+b];return it}function gt(m,b){var k;return ul(m,function(ee,De,it){return k=b(ee,De,it),!k}),!!k}function ut(m,b,k){var ee=0,De=m==null?ee:m.length;if(typeof b=="number"&&b===b&&De<=Pe){for(;ee<De;){var it=ee+De>>>1,Et=m[it];Et!==null&&!gu(Et)&&(k?Et<=b:Et<b)?ee=it+1:De=it}return De}return mt(m,b,Fl,k)}function mt(m,b,k,ee){var De=0,it=m==null?0:m.length;if(it===0)return 0;b=k(b);for(var Et=b!==b,kt=b===null,Jt=gu(b),Pn=b===n;De<it;){var kn=Yl((De+it)/2),zn=k(m[kn]),sr=zn!==n,Cr=zn===null,Hr=zn===zn,vi=gu(zn);if(Et)var Gr=ee||Hr;else Pn?Gr=Hr&&(ee||sr):kt?Gr=Hr&&sr&&(ee||!Cr):Jt?Gr=Hr&&sr&&!Cr&&(ee||!vi):Cr||vi?Gr=!1:Gr=ee?zn<=b:zn<b;Gr?De=kn+1:it=kn}return Ss(it,Ee)}function dt(m,b){for(var k=-1,ee=m.length,De=0,it=[];++k<ee;){var Et=m[k],kt=b?b(Et):Et;if(!k||!Dc(kt,Jt)){var Jt=kt;it[De++]=Et===0?0:Et}}return it}function zt(m){return typeof m=="number"?m:gu(m)?et:+m}function Ut(m){if(typeof m=="string")return m;if(ui(m))return oo(m,Ut)+"";if(gu(m))return cd?cd.call(m):"";var b=m+"";return b=="0"&&1/m==-oe?"-0":b}function Ft(m,b,k){var ee=-1,De=Yf,it=m.length,Et=!0,kt=[],Jt=kt;if(k)Et=!1,De=dp;else if(it>=i){var Pn=b?null:su(m);if(Pn)return Cl(Pn);Et=!1,De=Al,Jt=new wc}else Jt=b?[]:kt;e:for(;++ee<it;){var kn=m[ee],zn=b?b(kn):kn;if(kn=k||kn!==0?kn:0,Et&&zn===zn){for(var sr=Jt.length;sr--;)if(Jt[sr]===zn)continue e;b&&Jt.push(zn),kt.push(kn)}else De(Jt,zn,k)||(Jt!==kt&&Jt.push(zn),kt.push(kn))}return kt}function Bt(m,b){return b=Xt(b,m),m=Ns(m,b),m==null||delete m[du(ma(b))]}function Nn(m,b,k,ee){return ke(m,b,k(nu(m,b)),ee)}function lt(m,b,k,ee){for(var De=m.length,it=ee?De:-1;(ee?it--:++it<De)&&b(m[it],it,m););return k?qe(m,ee?0:it,ee?it+1:De):qe(m,ee?it+1:0,ee?De:it)}function bt(m,b){var k=m;return k instanceof ri&&(k=k.value()),oh(b,function(ee,De){return De.func.apply(De.thisArg,rl([ee],De.args))},k)}function tn(m,b,k){var ee=m.length;if(ee<2)return ee?Ft(m[0]):[];for(var De=-1,it=fn(ee);++De<ee;)for(var Et=m[De],kt=-1;++kt<ee;)kt!=De&&(it[De]=Ol(it[De]||Et,m[kt],b,k));return Ft(Io(it,1),b,k)}function Lt(m,b,k){for(var ee=-1,De=m.length,it=b.length,Et={};++ee<De;){var kt=ee<it?b[ee]:n;k(Et,m[ee],kt)}return Et}function an(m){return ps(m)?m:[]}function ln(m){return typeof m=="function"?m:Fl}function Xt(m,b){return ui(m)?m:fr(m,b)?[m]:g_(co(m))}var Vn=G;function Mn(m,b,k){var ee=m.length;return k=k===n?ee:k,!b&&k>=ee?m:qe(m,b,k)}var gr=Op||function(m){return Ur.clearTimeout(m)};function vr(m,b){if(b)return m.slice();var k=m.length,ee=xp?xp(k):new m.constructor(k);return m.copy(ee),ee}function Ct(m){var b=new m.constructor(m.byteLength);return new mc(b).set(new mc(m)),b}function rn(m,b){var k=b?Ct(m.buffer):m.buffer;return new m.constructor(k,m.byteOffset,m.byteLength)}function Ht(m){var b=new m.constructor(m.source,vn.exec(m));return b.lastIndex=m.lastIndex,b}function yn(m){return Xo?Yi(Xo.call(m)):{}}function In(m,b){var k=b?Ct(m.buffer):m.buffer;return new m.constructor(k,m.byteOffset,m.length)}function Wn(m,b){if(m!==b){var k=m!==n,ee=m===null,De=m===m,it=gu(m),Et=b!==n,kt=b===null,Jt=b===b,Pn=gu(b);if(!kt&&!Pn&&!it&&m>b||it&&Et&&Jt&&!kt&&!Pn||ee&&Et&&Jt||!k&&Jt||!De)return 1;if(!ee&&!it&&!Pn&&m<b||Pn&&k&&De&&!ee&&!it||kt&&k&&De||!Et&&De||!Jt)return-1}return 0}function Hn(m,b,k){for(var ee=-1,De=m.criteria,it=b.criteria,Et=De.length,kt=k.length;++ee<Et;){var Jt=Wn(De[ee],it[ee]);if(Jt){if(ee>=kt)return Jt;var Pn=k[ee];return Jt*(Pn=="desc"?-1:1)}}return m.index-b.index}function Yn(m,b,k,ee){for(var De=-1,it=m.length,Et=k.length,kt=-1,Jt=b.length,Pn=Bo(it-Et,0),kn=fn(Jt+Pn),zn=!ee;++kt<Jt;)kn[kt]=b[kt];for(;++De<Et;)(zn||De<it)&&(kn[k[De]]=m[De]);for(;Pn--;)kn[kt++]=m[De++];return kn}function rr(m,b,k,ee){for(var De=-1,it=m.length,Et=-1,kt=k.length,Jt=-1,Pn=b.length,kn=Bo(it-kt,0),zn=fn(kn+Pn),sr=!ee;++De<kn;)zn[De]=m[De];for(var Cr=De;++Jt<Pn;)zn[Cr+Jt]=b[Jt];for(;++Et<kt;)(sr||De<it)&&(zn[Cr+k[Et]]=m[De++]);return zn}function Yt(m,b){var k=-1,ee=m.length;for(b||(b=fn(ee));++k<ee;)b[k]=m[k];return b}function Tn(m,b,k,ee){var De=!k;k||(k={});for(var it=-1,Et=b.length;++it<Et;){var kt=b[it],Jt=ee?ee(k[kt],m[kt],kt,k,m):n;Jt===n&&(Jt=m[kt]),De?La(k,kt,Jt):Ac(k,kt,Jt)}return k}function Dn(m,b){return Tn(m,uu(m),b)}function Fn(m,b){return Tn(m,TE(m),b)}function Zn(m,b){return function(k,ee){var De=ui(k)?nh:da,it=b?b():{};return De(k,m,$n(ee,2),it)}}function Rt(m){return G(function(b,k){var ee=-1,De=k.length,it=De>1?k[De-1]:n,Et=De>2?k[2]:n;for(it=m.length>3&&typeof it=="function"?(De--,it):n,Et&&ga(k[0],k[1],Et)&&(it=De<3?n:it,De=1),b=Yi(b);++ee<De;){var kt=k[ee];kt&&m(b,kt,ee,it)}return b})}function ft(m,b){return function(k,ee){if(k==null)return k;if(!Ml(k))return m(k,ee);for(var De=k.length,it=b?De:-1,Et=Yi(k);(b?it--:++it<De)&&ee(Et[it],it,Et)!==!1;);return k}}function Kt(m){return function(b,k,ee){for(var De=-1,it=Yi(b),Et=ee(b),kt=Et.length;kt--;){var Jt=Et[m?kt:++De];if(k(it[Jt],Jt,it)===!1)break}return b}}function We(m,b,k){var ee=b&I,De=mn(m);function it(){var Et=this&&this!==Ur&&this instanceof it?De:m;return Et.apply(ee?k:this,arguments)}return it}function tt(m){return function(b){b=co(b);var k=hc(b)?Fs(b):n,ee=k?k[0]:b.charAt(0),De=k?Mn(k,1).join(""):b.slice(1);return ee[m]()+De}}function Mt(m){return function(b){return oh(T3(w3(b).replace(Ws,"")),m,"")}}function mn(m){return function(){var b=arguments;switch(b.length){case 0:return new m;case 1:return new m(b[0]);case 2:return new m(b[0],b[1]);case 3:return new m(b[0],b[1],b[2]);case 4:return new m(b[0],b[1],b[2],b[3]);case 5:return new m(b[0],b[1],b[2],b[3],b[4]);case 6:return new m(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new m(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var k=_c(m.prototype),ee=m.apply(k,b);return Go(ee)?ee:k}}function Cn(m,b,k){var ee=mn(m);function De(){for(var it=arguments.length,Et=fn(it),kt=it,Jt=$r(De);kt--;)Et[kt]=arguments[kt];var Pn=it<3&&Et[0]!==Jt&&Et[it-1]!==Jt?[]:li(Et,Jt);if(it-=Pn.length,it<k)return Eo(m,b,to,De.placeholder,n,Et,Pn,n,n,k-it);var kn=this&&this!==Ur&&this instanceof De?ee:m;return ks(kn,this,Et)}return De}function cr(m){return function(b,k,ee){var De=Yi(b);if(!Ml(b)){var it=$n(k,3);b=ta(b),k=function(kt){return it(De[kt],kt,De)}}var Et=m(b,k,ee);return Et>-1?De[it?b[Et]:Et]:n}}function Si(m){return Dt(function(b){var k=b.length,ee=k,De=As.prototype.thru;for(m&&b.reverse();ee--;){var it=b[ee];if(typeof it!="function")throw new Ts(l);if(De&&!Et&&Zr(it)=="wrapper")var Et=new As([],!0)}for(ee=Et?ee:k;++ee<k;){it=b[ee];var kt=Zr(it),Jt=kt=="wrapper"?mr(it):n;Jt&&Bp(Jt[0])&&Jt[1]==(V|T|O|B)&&!Jt[4].length&&Jt[9]==1?Et=Et[Zr(Jt[0])].apply(Et,Jt[3]):Et=it.length==1&&Bp(it)?Et[kt]():Et.thru(it)}return function(){var Pn=arguments,kn=Pn[0];if(Et&&Pn.length==1&&ui(kn))return Et.plant(kn).value();for(var zn=0,sr=k?b[zn].apply(this,Pn):kn;++zn<k;)sr=b[zn].call(this,sr);return sr}})}function to(m,b,k,ee,De,it,Et,kt,Jt,Pn){var kn=b&V,zn=b&I,sr=b&C,Cr=b&(T|S),Hr=b&ne,vi=sr?n:mn(m);function Gr(){for(var Pi=arguments.length,Vi=fn(Pi),mu=Pi;mu--;)Vi[mu]=arguments[mu];if(Cr)var dl=$r(Gr),yu=wp(Vi,dl);if(ee&&(Vi=Yn(Vi,ee,De,Cr)),it&&(Vi=rr(Vi,it,Et,Cr)),Pi-=yu,Cr&&Pi<Pn){var gs=li(Vi,dl);return Eo(m,b,to,Gr.placeholder,k,Vi,gs,kt,Jt,Pn-Pi)}var Pc=zn?k:this,Ad=sr?Pc[m]:m;return Pi=Vi.length,kt?Vi=cu(Vi,kt):Hr&&Pi>1&&Vi.reverse(),kn&&Jt<Pi&&(Vi.length=Jt),this&&this!==Ur&&this instanceof Gr&&(Ad=vi||mn(Ad)),Ad.apply(Pc,Vi)}return Gr}function Di(m,b){return function(k,ee){return iu(k,m,b(ee),{})}}function zo(m,b){return function(k,ee){var De;if(k===n&&ee===n)return b;if(k!==n&&(De=k),ee!==n){if(De===n)return ee;typeof k=="string"||typeof ee=="string"?(k=Ut(k),ee=Ut(ee)):(k=zt(k),ee=zt(ee)),De=m(k,ee)}return De}}function bo(m){return Dt(function(b){return b=oo(b,ca($n())),G(function(k){var ee=this;return m(b,function(De){return ks(De,ee,k)})})})}function Ma(m,b){b=b===n?" ":Ut(b);var k=b.length;if(k<2)return k?re(b,m):b;var ee=re(b,yc(m/ql(b)));return hc(b)?Mn(Fs(ee),0,m).join(""):ee.slice(0,m)}function Vu(m,b,k,ee){var De=b&I,it=mn(m);function Et(){for(var kt=-1,Jt=arguments.length,Pn=-1,kn=ee.length,zn=fn(kn+Jt),sr=this&&this!==Ur&&this instanceof Et?it:m;++Pn<kn;)zn[Pn]=ee[Pn];for(;Jt--;)zn[Pn++]=arguments[++kt];return ks(sr,De?k:this,zn)}return Et}function ou(m){return function(b,k,ee){return ee&&typeof ee!="number"&&ga(b,k,ee)&&(k=ee=n),b=Sd(b),k===n?(k=b,b=0):k=Sd(k),ee=ee===n?b<k?1:-1:Sd(ee),te(b,k,ee,m)}}function ea(m){return function(b,k){return typeof b=="string"&&typeof k=="string"||(b=Gu(b),k=Gu(k)),m(b,k)}}function Eo(m,b,k,ee,De,it,Et,kt,Jt,Pn){var kn=b&T,zn=kn?Et:n,sr=kn?n:Et,Cr=kn?it:n,Hr=kn?n:it;b|=kn?O:$,b&=~(kn?$:O),b&v||(b&=-4);var vi=[m,b,De,Cr,zn,Hr,sr,kt,Jt,Pn],Gr=k.apply(n,vi);return Bp(m)&&h_(Gr,vi),Gr.placeholder=ee,p_(Gr,m,b)}function Zi(m){var b=_o[m];return function(k,ee){if(k=Gu(k),ee=ee==null?0:Ss(pi(ee),292),ee&&pf(k)){var De=(co(k)+"e").split("e"),it=b(De[0]+"e"+(+De[1]+ee));return De=(co(it)+"e").split("e"),+(De[0]+"e"+(+De[1]-ee))}return b(k)}}var su=Ql&&1/Cl(new Ql([,-0]))[1]==oe?function(m){return new Ql(m)}:wI;function au(m){return function(b){var k=Bs(b);return k==M?Mu(b):k==wt?l_(b):_p(b,m(b))}}function Oo(m,b,k,ee,De,it,Et,kt){var Jt=b&C;if(!Jt&&typeof m!="function")throw new Ts(l);var Pn=ee?ee.length:0;if(Pn||(b&=-97,ee=De=n),Et=Et===n?Et:Bo(pi(Et),0),kt=kt===n?kt:pi(kt),Pn-=De?De.length:0,b&$){var kn=ee,zn=De;ee=De=n}var sr=Jt?n:mr(m),Cr=[m,b,k,ee,De,kn,zn,it,Et,kt];if(sr&&CE(Cr,sr),m=Cr[0],b=Cr[1],k=Cr[2],ee=Cr[3],De=Cr[4],kt=Cr[9]=Cr[9]===n?Jt?0:m.length:Bo(Cr[9]-Pn,0),!kt&&b&(T|S)&&(b&=-25),!b||b==I)var Hr=We(m,b,k);else b==T||b==S?Hr=Cn(m,b,kt):(b==O||b==(I|O))&&!De.length?Hr=Vu(m,b,k,ee):Hr=to.apply(n,Cr);var vi=sr?Ae:h_;return p_(vi(Hr,Cr),m,b)}function Nc(m,b,k,ee){return m===n||Dc(m,fa[k])&&!Ui.call(ee,k)?b:m}function wf(m,b,k,ee,De,it){return Go(m)&&Go(b)&&(it.set(b,m),He(m,b,n,wf,it),it.delete(b)),m}function Tf(m){return N_(m)?n:m}function Ll(m,b,k,ee,De,it){var Et=k&A,kt=m.length,Jt=b.length;if(kt!=Jt&&!(Et&&Jt>kt))return!1;var Pn=it.get(m),kn=it.get(b);if(Pn&&kn)return Pn==b&&kn==m;var zn=-1,sr=!0,Cr=k&_?new wc:n;for(it.set(m,b),it.set(b,m);++zn<kt;){var Hr=m[zn],vi=b[zn];if(ee)var Gr=Et?ee(vi,Hr,zn,b,m,it):ee(Hr,vi,zn,m,b,it);if(Gr!==n){if(Gr)continue;sr=!1;break}if(Cr){if(!sh(b,function(Pi,Vi){if(!Al(Cr,Vi)&&(Hr===Pi||De(Hr,Pi,k,ee,it)))return Cr.push(Vi)})){sr=!1;break}}else if(!(Hr===vi||De(Hr,vi,k,ee,it))){sr=!1;break}}return it.delete(m),it.delete(b),sr}function Sf(m,b,k,ee,De,it,Et){switch(k){case $t:if(m.byteLength!=b.byteLength||m.byteOffset!=b.byteOffset)return!1;m=m.buffer,b=b.buffer;case Wt:return!(m.byteLength!=b.byteLength||!it(new mc(m),new mc(b)));case xt:case ht:case x:return Dc(+m,+b);case Ue:return m.name==b.name&&m.message==b.message;case ot:case st:return m==b+"";case M:var kt=Mu;case wt:var Jt=ee&A;if(kt||(kt=Cl),m.size!=b.size&&!Jt)return!1;var Pn=Et.get(m);if(Pn)return Pn==b;ee|=_,Et.set(m,b);var kn=Ll(kt(m),kt(b),ee,De,it,Et);return Et.delete(m),kn;case nt:if(Xo)return Xo.call(m)==Xo.call(b)}return!1}function zu(m,b,k,ee,De,it){var Et=k&A,kt=wn(m),Jt=kt.length,Pn=wn(b),kn=Pn.length;if(Jt!=kn&&!Et)return!1;for(var zn=Jt;zn--;){var sr=kt[zn];if(!(Et?sr in b:Ui.call(b,sr)))return!1}var Cr=it.get(m),Hr=it.get(b);if(Cr&&Hr)return Cr==b&&Hr==m;var vi=!0;it.set(m,b),it.set(b,m);for(var Gr=Et;++zn<Jt;){sr=kt[zn];var Pi=m[sr],Vi=b[sr];if(ee)var mu=Et?ee(Vi,Pi,sr,b,m,it):ee(Pi,Vi,sr,m,b,it);if(!(mu===n?Pi===Vi||De(Pi,Vi,k,ee,it):mu)){vi=!1;break}Gr||(Gr=sr=="constructor")}if(vi&&!Gr){var dl=m.constructor,yu=b.constructor;dl!=yu&&"constructor"in m&&"constructor"in b&&!(typeof dl=="function"&&dl instanceof dl&&typeof yu=="function"&&yu instanceof yu)&&(vi=!1)}return it.delete(m),it.delete(b),vi}function Dt(m){return cl(Im(m,n,xm),m+"")}function wn(m){return gd(m,ta,uu)}function er(m){return gd(m,kl,TE)}var mr=mf?function(m){return mf.get(m)}:wI;function Zr(m){for(var b=m.name+"",k=yf[b],ee=Ui.call(yf,b)?k.length:0;ee--;){var De=k[ee],it=De.func;if(it==null||it==m)return De.name}return b}function $r(m){var b=Ui.call(Qe,"placeholder")?Qe:m;return b.placeholder}function $n(){var m=Qe.iteratee||bI;return m=m===bI?K:m,arguments.length?m(arguments[0],arguments[1]):m}function Bi(m,b){var k=m.__data__;return Ah(b)?k[typeof b=="string"?"string":"hash"]:k.map}function Ai(m){for(var b=ta(m),k=b.length;k--;){var ee=b[k],De=m[ee];b[k]=[ee,De,Zp(De)]}return b}function xs(m,b){var k=Il(m,b);return z(k)?k:n}function lu(m){var b=Ui.call(m,ku),k=m[ku];try{m[ku]=n;var ee=!0}catch{}var De=gc.call(m);return ee&&(b?m[ku]=k:delete m[ku]),De}var uu=gh?function(m){return m==null?[]:(m=Yi(m),Gl(gh(m),function(b){return id.call(m,b)}))}:TI,TE=gh?function(m){for(var b=[];m;)rl(b,uu(m)),m=Ys(m);return b}:TI,Bs=ds;(ad&&Bs(new ad(new ArrayBuffer(1)))!=$t||$u&&Bs(new $u)!=M||ld&&Bs(ld.resolve())!=he||Ql&&Bs(new Ql)!=wt||ud&&Bs(new ud)!=ct)&&(Bs=function(m){var b=ds(m),k=b==j?m.constructor:n,ee=k?Af(k):"";if(ee)switch(ee){case Pp:return $t;case Xl:return M;case ym:return he;case vf:return wt;case sl:return ct}return b});function c_(m,b,k){for(var ee=-1,De=k.length;++ee<De;){var it=k[ee],Et=it.size;switch(it.type){case"drop":m+=Et;break;case"dropRight":b-=Et;break;case"take":b=Ss(b,m+Et);break;case"takeRight":m=Bo(m,b-Et);break}}return{start:m,end:b}}function SE(m){var b=m.match(Tt);return b?b[1].split(Qt):[]}function f_(m,b,k){b=Xt(b,m);for(var ee=-1,De=b.length,it=!1;++ee<De;){var Et=du(b[ee]);if(!(it=m!=null&&k(m,Et)))break;m=m[Et]}return it||++ee!=De?it:(De=m==null?0:m.length,!!De&&zE(De)&&Co(Et,De)&&(ui(m)||Kp(m)))}function Up(m){var b=m.length,k=new m.constructor(b);return b&&typeof m[0]=="string"&&Ui.call(m,"index")&&(k.index=m.index,k.input=m.input),k}function Zs(m){return typeof m.constructor=="function"&&!Oc(m)?_c(Ys(m)):{}}function KA(m,b,k){var ee=m.constructor;switch(b){case Wt:return Ct(m);case xt:case ht:return new ee(+m);case $t:return rn(m,k);case hn:case dn:case _n:case En:case tr:case Ir:case Fr:case Dr:case ni:return In(m,k);case M:return new ee;case x:case st:return new ee(m);case ot:return Ht(m);case wt:return new ee;case nt:return yn(m)}}function YA(m,b){var k=b.length;if(!k)return m;var ee=k-1;return b[ee]=(k>1?"& ":"")+b[ee],b=b.join(k>2?", ":" "),m.replace(vt,`{
/* [wrapped with `+b+`] */
`)}function Sm(m){return ui(m)||Kp(m)||!!(Np&&m&&m[Np])}function Co(m,b){var k=typeof m;return b=b??Ce,!!b&&(k=="number"||k!="symbol"&&ze.test(m))&&m>-1&&m%1==0&&m<b}function ga(m,b,k){if(!Go(k))return!1;var ee=typeof b;return(ee=="number"?Ml(k)&&Co(b,k.length):ee=="string"&&b in k)?Dc(k[b],m):!1}function fr(m,b){if(ui(m))return!1;var k=typeof m;return k=="number"||k=="symbol"||k=="boolean"||m==null||gu(m)?!0:nn.test(m)||!pn.test(m)||b!=null&&m in Yi(b)}function Ah(m){var b=typeof m;return b=="string"||b=="number"||b=="symbol"||b=="boolean"?m!=="__proto__":m===null}function Bp(m){var b=Zr(m),k=Qe[b];if(typeof k!="function"||!(b in ri.prototype))return!1;if(m===k)return!0;var ee=mr(k);return!!ee&&m===ee[0]}function AE(m){return!!Wl&&Wl in m}var QA=ff?Td:SI;function Oc(m){var b=m&&m.constructor,k=typeof b=="function"&&b.prototype||fa;return m===k}function Zp(m){return m===m&&!Go(m)}function Am(m,b){return function(k){return k==null?!1:k[m]===b&&(b!==n||m in Yi(k))}}function IE(m){var b=un(m,function(ee){return k.size===g&&k.clear(),ee}),k=b.cache;return b}function CE(m,b){var k=m[1],ee=b[1],De=k|ee,it=De<(I|C|V),Et=ee==V&&k==T||ee==V&&k==B&&m[7].length<=b[8]||ee==(V|B)&&b[7].length<=b[8]&&k==T;if(!(it||Et))return m;ee&I&&(m[2]=b[2],De|=k&I?0:v);var kt=b[3];if(kt){var Jt=m[3];m[3]=Jt?Yn(Jt,kt,b[4]):kt,m[4]=Jt?li(m[3],y):b[4]}return kt=b[5],kt&&(Jt=m[5],m[5]=Jt?rr(Jt,kt,b[6]):kt,m[6]=Jt?li(m[5],y):b[6]),kt=b[7],kt&&(m[7]=kt),ee&V&&(m[8]=m[8]==null?b[8]:Ss(m[8],b[8])),m[9]==null&&(m[9]=b[9]),m[0]=b[0],m[1]=De,m}function RE(m){var b=[];if(m!=null)for(var k in Yi(m))b.push(k);return b}function d_(m){return gc.call(m)}function Im(m,b,k){return b=Bo(b===n?m.length-1:b,0),function(){for(var ee=arguments,De=-1,it=Bo(ee.length-b,0),Et=fn(it);++De<it;)Et[De]=ee[b+De];De=-1;for(var kt=fn(b+1);++De<b;)kt[De]=ee[De];return kt[b]=k(Et),ks(m,this,kt)}}function Ns(m,b){return b.length<2?m:nu(m,qe(b,0,-1))}function cu(m,b){for(var k=m.length,ee=Ss(b.length,k),De=Yt(m);ee--;){var it=b[ee];m[ee]=Co(it,k)?De[it]:n}return m}function Hu(m,b){if(!(b==="constructor"&&typeof m[b]=="function")&&b!="__proto__")return m[b]}var h_=fu(Ae),Ih=Lp||function(m,b){return Ur.setTimeout(m,b)},cl=fu(ue);function p_(m,b,k){var ee=b+"";return cl(m,YA(ee,xE(SE(ee),k)))}function fu(m){var b=0,k=0;return function(){var ee=mm(),De=ie-(ee-k);if(k=ee,De>0){if(++b>=ve)return arguments[0]}else b=0;return m.apply(n,arguments)}}function Cm(m,b){var k=-1,ee=m.length,De=ee-1;for(b=b===n?ee:b;++k<b;){var it=se(k,De),Et=m[it];m[it]=m[k],m[k]=Et}return m.length=b,m}var g_=IE(function(m){var b=[];return m.charCodeAt(0)===46&&b.push(""),m.replace(be,function(k,ee,De,it){b.push(De?it.replace(Nt,"$1"):ee||k)}),b});function du(m){if(typeof m=="string"||gu(m))return m;var b=m+"";return b=="0"&&1/m==-oe?"-0":b}function Af(m){if(m!=null){try{return td.call(m)}catch{}try{return m+""}catch{}}return""}function xE(m,b){return ws(Xe,function(k){var ee="_."+k[0];b&k[1]&&!Yf(m,ee)&&m.push(ee)}),m.sort()}function NE(m){if(m instanceof ri)return m.clone();var b=new As(m.__wrapped__,m.__chain__);return b.__actions__=Yt(m.__actions__),b.__index__=m.__index__,b.__values__=m.__values__,b}function Rm(m,b,k){(k?ga(m,b,k):b===n)?b=1:b=Bo(pi(b),0);var ee=m==null?0:m.length;if(!ee||b<1)return[];for(var De=0,it=0,Et=fn(yc(ee/b));De<ee;)Et[it++]=qe(m,De,De+=b);return Et}function m_(m){for(var b=-1,k=m==null?0:m.length,ee=0,De=[];++b<k;){var it=m[b];it&&(De[ee++]=it)}return De}function Dl(){var m=arguments.length;if(!m)return[];for(var b=fn(m-1),k=arguments[0],ee=m;ee--;)b[ee-1]=arguments[ee];return rl(ui(k)?Yt(k):[k],Io(b,1))}var ji=G(function(m,b){return ps(m)?Ol(m,Io(b,1,ps,!0)):[]}),Os=G(function(m,b){var k=ma(b);return ps(k)&&(k=n),ps(m)?Ol(m,Io(b,1,ps,!0),$n(k,2)):[]}),Jo=G(function(m,b){var k=ma(b);return ps(k)&&(k=n),ps(m)?Ol(m,Io(b,1,ps,!0),n,k):[]});function js(m,b,k){var ee=m==null?0:m.length;return ee?(b=k||b===n?1:pi(b),qe(m,b<0?0:b,ee)):[]}function fl(m,b,k){var ee=m==null?0:m.length;return ee?(b=k||b===n?1:pi(b),b=ee-b,qe(m,0,b<0?0:b)):[]}function Ch(m,b){return m&&m.length?lt(m,$n(b,3),!0,!0):[]}function hs(m,b){return m&&m.length?lt(m,$n(b,3),!0):[]}function jp(m,b,k,ee){var De=m==null?0:m.length;return De?(k&&typeof k!="number"&&ga(m,b,k)&&(k=0,ee=De),bh(m,b,k,ee)):[]}function If(m,b,k){var ee=m==null?0:m.length;if(!ee)return-1;var De=k==null?0:pi(k);return De<0&&(De=Bo(ee+De,0)),ah(m,$n(b,3),De)}function Vp(m,b,k){var ee=m==null?0:m.length;if(!ee)return-1;var De=ee-1;return k!==n&&(De=pi(k),De=k<0?Bo(ee+De,0):Ss(De,ee-1)),ah(m,$n(b,3),De,!0)}function xm(m){var b=m==null?0:m.length;return b?Io(m,1):[]}function zp(m){var b=m==null?0:m.length;return b?Io(m,oe):[]}function ka(m,b){var k=m==null?0:m.length;return k?(b=b===n?1:pi(b),Io(m,b)):[]}function y_(m){for(var b=-1,k=m==null?0:m.length,ee={};++b<k;){var De=m[b];ee[De[0]]=De[1]}return ee}function yd(m){return m&&m.length?m[0]:n}function Lc(m,b,k){var ee=m==null?0:m.length;if(!ee)return-1;var De=k==null?0:pi(k);return De<0&&(De=Bo(ee+De,0)),fc(m,b,De)}function Nm(m){var b=m==null?0:m.length;return b?qe(m,0,-1):[]}var v_=G(function(m){var b=oo(m,an);return b.length&&b[0]===m[0]?md(b):[]}),Cf=G(function(m){var b=ma(m),k=oo(m,an);return b===ma(k)?b=n:k.pop(),k.length&&k[0]===m[0]?md(k,$n(b,2)):[]}),Om=G(function(m){var b=ma(m),k=oo(m,an);return b=typeof b=="function"?b:n,b&&k.pop(),k.length&&k[0]===m[0]?md(k,n,b):[]});function Rf(m,b){return m==null?"":gf.call(m,b)}function ma(m){var b=m==null?0:m.length;return b?m[b-1]:n}function Hp(m,b,k){var ee=m==null?0:m.length;if(!ee)return-1;var De=ee;return k!==n&&(De=pi(k),De=De<0?Bo(ee+De,0):Ss(De,ee-1)),b===b?u_(m,b,De):ah(m,mp,De,!0)}function __(m,b){return m&&m.length?Be(m,pi(b)):n}var Lm=G(Gp);function Gp(m,b){return m&&m.length&&b&&b.length?Fe(m,b):m}function ya(m,b,k){return m&&m.length&&b&&b.length?Fe(m,b,$n(k,2)):m}function xf(m,b,k){return m&&m.length&&b&&b.length?Fe(m,b,n,k):m}var hu=Dt(function(m,b){var k=m==null?0:m.length,ee=Ic(m,b);return F(m,oo(b,function(De){return Co(De,k)?+De:De}).sort(Wn)),ee});function Fa(m,b){var k=[];if(!(m&&m.length))return k;var ee=-1,De=[],it=m.length;for(b=$n(b,3);++ee<it;){var Et=m[ee];b(Et,ee,m)&&(k.push(Et),De.push(ee))}return F(m,De),k}function Dm(m){return m==null?m:sd.call(m)}function b_(m,b,k){var ee=m==null?0:m.length;return ee?(k&&typeof k!="number"&&ga(m,b,k)?(b=0,k=ee):(b=b==null?0:pi(b),k=k===n?ee:pi(k)),qe(m,b,k)):[]}function E_(m,b){return ut(m,b)}function XA(m,b,k){return mt(m,b,$n(k,2))}function Nf(m,b){var k=m==null?0:m.length;if(k){var ee=ut(m,b);if(ee<k&&Dc(m[ee],b))return ee}return-1}function OE(m,b){return ut(m,b,!0)}function w_(m,b,k){return mt(m,b,$n(k,2),!0)}function vd(m,b){var k=m==null?0:m.length;if(k){var ee=ut(m,b,!0)-1;if(Dc(m[ee],b))return ee}return-1}function T_(m){return m&&m.length?dt(m):[]}function _d(m,b){return m&&m.length?dt(m,$n(b,2)):[]}function LE(m){var b=m==null?0:m.length;return b?qe(m,1,b):[]}function DE(m,b,k){return m&&m.length?(b=k||b===n?1:pi(b),qe(m,0,b<0?0:b)):[]}function S_(m,b,k){var ee=m==null?0:m.length;return ee?(b=k||b===n?1:pi(b),b=ee-b,qe(m,b<0?0:b,ee)):[]}function Pm(m,b){return m&&m.length?lt(m,$n(b,3),!1,!0):[]}function JA(m,b){return m&&m.length?lt(m,$n(b,3)):[]}var eI=G(function(m){return Ft(Io(m,1,ps,!0))}),PE=G(function(m){var b=ma(m);return ps(b)&&(b=n),Ft(Io(m,1,ps,!0),$n(b,2))}),ME=G(function(m){var b=ma(m);return b=typeof b=="function"?b:n,Ft(Io(m,1,ps,!0),n,b)});function bd(m){return m&&m.length?Ft(m):[]}function tI(m,b){return m&&m.length?Ft(m,$n(b,2)):[]}function Rh(m,b){return b=typeof b=="function"?b:n,m&&m.length?Ft(m,n,b):[]}function Mm(m){if(!(m&&m.length))return[];var b=0;return m=Gl(m,function(k){if(ps(k))return b=Bo(k.length,b),!0}),vp(b,function(k){return oo(m,lh(k))})}function Lo(m,b){if(!(m&&m.length))return[];var k=Mm(m);return b==null?k:oo(k,function(ee){return ks(b,n,ee)})}var nI=G(function(m,b){return ps(m)?Ol(m,b):[]}),kE=G(function(m){return tn(Gl(m,ps))}),rI=G(function(m){var b=ma(m);return ps(b)&&(b=n),tn(Gl(m,ps),$n(b,2))}),iI=G(function(m){var b=ma(m);return b=typeof b=="function"?b:n,tn(Gl(m,ps),n,b)}),FE=G(Mm);function $E(m,b){return Lt(m||[],b||[],Ac)}function oI(m,b){return Lt(m||[],b||[],ke)}var Pl=G(function(m){var b=m.length,k=b>1?m[b-1]:n;return k=typeof k=="function"?(m.pop(),k):n,Lo(m,k)});function km(m){var b=Qe(m);return b.__chain__=!0,b}function sI(m,b){return b(m),m}function pu(m,b){return b(m)}var Fm=Dt(function(m){var b=m.length,k=b?m[0]:0,ee=this.__wrapped__,De=function(it){return Ic(it,m)};return b>1||this.__actions__.length||!(ee instanceof ri)||!Co(k)?this.thru(De):(ee=ee.slice(k,+k+(b?1:0)),ee.__actions__.push({func:pu,args:[De],thisArg:n}),new As(ee,this.__chain__).thru(function(it){return b&&!it.length&&it.push(n),it}))});function Ed(){return km(this)}function $m(){return new As(this.value(),this.__chain__)}function A_(){this.__values__===n&&(this.__values__=h3(this.value()));var m=this.__index__>=this.__values__.length,b=m?n:this.__values__[this.__index__++];return{done:m,value:b}}function I_(){return this}function aI(m){for(var b,k=this;k instanceof Rl;){var ee=NE(k);ee.__index__=0,ee.__values__=n,b?De.__wrapped__=ee:b=ee;var De=ee;k=k.__wrapped__}return De.__wrapped__=m,b}function C_(){var m=this.__wrapped__;if(m instanceof ri){var b=m;return this.__actions__.length&&(b=new ri(this)),b=b.reverse(),b.__actions__.push({func:pu,args:[Dm],thisArg:n}),new As(b,this.__chain__)}return this.thru(Dm)}function lI(){return bt(this.__wrapped__,this.__actions__)}var UE=Zn(function(m,b,k){Ui.call(m,k)?++m[k]:La(m,k,1)});function BE(m,b,k){var ee=ui(m)?ih:Ef;return k&&ga(m,b,k)&&(b=n),ee(m,$n(b,3))}function Um(m,b){var k=ui(m)?Gl:Eh;return k(m,$n(b,3))}var Bm=cr(If),ZE=cr(Vp);function R_(m,b){return Io(wd(m,b),1)}function uI(m,b){return Io(wd(m,b),oe)}function jE(m,b,k){return k=k===n?1:pi(k),Io(wd(m,b),k)}function Zm(m,b){var k=ui(m)?ws:ul;return k(m,$n(b,3))}function qp(m,b){var k=ui(m)?rh:Tm;return k(m,$n(b,3))}var x_=Zn(function(m,b,k){Ui.call(m,k)?m[k].push(b):La(m,k,[b])});function jm(m,b,k,ee){m=Ml(m)?m:Hm(m),k=k&&!ee?pi(k):0;var De=m.length;return k<0&&(k=Bo(De+k,0)),HE(m)?k<=De&&m.indexOf(b,k)>-1:!!De&&fc(m,b,k)>-1}var VE=G(function(m,b,k){var ee=-1,De=typeof b=="function",it=Ml(m)?fn(m.length):[];return ul(m,function(Et){it[++ee]=De?ks(b,Et,k):pa(Et,b,k)}),it}),cI=Zn(function(m,b,k){La(m,k,b)});function wd(m,b){var k=ui(m)?oo:Q;return k(m,$n(b,3))}function fI(m,b,k,ee){return m==null?[]:(ui(b)||(b=b==null?[]:[b]),k=ee?n:k,ui(k)||(k=k==null?[]:[k]),Ke(m,b,k))}var Wp=Zn(function(m,b,k){m[k?0:1].push(b)},function(){return[[],[]]});function dI(m,b,k){var ee=ui(m)?oh:yp,De=arguments.length<3;return ee(m,$n(b,4),k,De,ul)}function Vm(m,b,k){var ee=ui(m)?hp:yp,De=arguments.length<3;return ee(m,$n(b,4),k,De,Tm)}function u(m,b){var k=ui(m)?Gl:Eh;return k(m,Qn($n(b,3)))}function d(m){var b=ui(m)?Nl:Ie;return b(m)}function w(m,b,k){(k?ga(m,b,k):b===n)?b=1:b=pi(b);var ee=ui(m)?Sc:we;return ee(m,b)}function N(m){var b=ui(m)?Em:Se;return b(m)}function H(m){if(m==null)return 0;if(Ml(m))return HE(m)?ql(m):m.length;var b=Bs(m);return b==M||b==wt?m.size:le(m).length}function J(m,b,k){var ee=ui(m)?sh:gt;return k&&ga(m,b,k)&&(b=n),ee(m,$n(b,3))}var $e=G(function(m,b){if(m==null)return[];var k=b.length;return k>1&&ga(m,b[0],b[1])?b=[]:k>2&&ga(b[0],b[1],b[2])&&(b=[b[0]]),Ke(m,Io(b,1),[])}),yt=so||function(){return Ur.Date.now()};function Pt(m,b){if(typeof b!="function")throw new Ts(l);return m=pi(m),function(){if(--m<1)return b.apply(this,arguments)}}function gn(m,b,k){return b=k?n:b,b=m&&b==null?m.length:b,Oo(m,V,n,n,n,n,b)}function jn(m,b){var k;if(typeof b!="function")throw new Ts(l);return m=pi(m),function(){return--m>0&&(k=b.apply(this,arguments)),m<=1&&(b=n),k}}var Kn=G(function(m,b,k){var ee=I;if(k.length){var De=li(k,$r(Kn));ee|=O}return Oo(m,ee,b,k,De)}),Bn=G(function(m,b,k){var ee=I|C;if(k.length){var De=li(k,$r(Bn));ee|=O}return Oo(b,ee,m,k,De)});function ar(m,b,k){b=k?n:b;var ee=Oo(m,T,n,n,n,n,n,b);return ee.placeholder=ar.placeholder,ee}function yr(m,b,k){b=k?n:b;var ee=Oo(m,S,n,n,n,n,n,b);return ee.placeholder=yr.placeholder,ee}function _r(m,b,k){var ee,De,it,Et,kt,Jt,Pn=0,kn=!1,zn=!1,sr=!0;if(typeof m!="function")throw new Ts(l);b=Gu(b)||0,Go(k)&&(kn=!!k.leading,zn="maxWait"in k,it=zn?Bo(Gu(k.maxWait)||0,b):it,sr="trailing"in k?!!k.trailing:sr);function Cr(gs){var Pc=ee,Ad=De;return ee=De=n,Pn=gs,Et=m.apply(Ad,Pc),Et}function Hr(gs){return Pn=gs,kt=Ih(Pi,b),kn?Cr(gs):Et}function vi(gs){var Pc=gs-Jt,Ad=gs-Pn,I3=b-Pc;return zn?Ss(I3,it-Ad):I3}function Gr(gs){var Pc=gs-Jt,Ad=gs-Pn;return Jt===n||Pc>=b||Pc<0||zn&&Ad>=it}function Pi(){var gs=yt();if(Gr(gs))return Vi(gs);kt=Ih(Pi,vi(gs))}function Vi(gs){return kt=n,sr&&ee?Cr(gs):(ee=De=n,Et)}function mu(){kt!==n&&gr(kt),Pn=0,ee=Jt=De=kt=n}function dl(){return kt===n?Et:Vi(yt())}function yu(){var gs=yt(),Pc=Gr(gs);if(ee=arguments,De=this,Jt=gs,Pc){if(kt===n)return Hr(Jt);if(zn)return gr(kt),kt=Ih(Pi,b),Cr(Jt)}return kt===n&&(kt=Ih(Pi,b)),Et}return yu.cancel=mu,yu.flush=dl,yu}var Ho=G(function(m,b){return $p(m,1,b)}),on=G(function(m,b,k){return $p(m,Gu(b)||0,k)});function Zt(m){return Oo(m,ne)}function un(m,b){if(typeof m!="function"||b!=null&&typeof b!="function")throw new Ts(l);var k=function(){var ee=arguments,De=b?b.apply(this,ee):ee[0],it=k.cache;if(it.has(De))return it.get(De);var Et=m.apply(this,ee);return k.cache=it.set(De,Et)||it,Et};return k.cache=new(un.Cache||Na),k}un.Cache=Na;function Qn(m){if(typeof m!="function")throw new Ts(l);return function(){var b=arguments;switch(b.length){case 0:return!m.call(this);case 1:return!m.call(this,b[0]);case 2:return!m.call(this,b[0],b[1]);case 3:return!m.call(this,b[0],b[1],b[2])}return!m.apply(this,b)}}function Ar(m){return jn(2,m)}var Mr=Vn(function(m,b){b=b.length==1&&ui(b[0])?oo(b[0],ca($n())):oo(Io(b,1),ca($n()));var k=b.length;return G(function(ee){for(var De=-1,it=Ss(ee.length,k);++De<it;)ee[De]=b[De].call(this,ee[De]);return ks(m,this,ee)})}),Or=G(function(m,b){var k=li(b,$r(Or));return Oo(m,O,n,b,k)}),zr=G(function(m,b){var k=li(b,$r(zr));return Oo(m,$,n,b,k)}),Ls=Dt(function(m,b){return Oo(m,B,n,n,n,b)});function Wi(m,b){if(typeof m!="function")throw new Ts(l);return b=b===n?b:pi(b),G(m,b)}function Of(m,b){if(typeof m!="function")throw new Ts(l);return b=b==null?0:Bo(pi(b),0),G(function(k){var ee=k[b],De=Mn(k,0,b);return ee&&rl(De,ee),ks(m,this,De)})}function hI(m,b,k){var ee=!0,De=!0;if(typeof m!="function")throw new Ts(l);return Go(k)&&(ee="leading"in k?!!k.leading:ee,De="trailing"in k?!!k.trailing:De),_r(m,b,{leading:ee,maxWait:b,trailing:De})}function Yae(m){return gn(m,1)}function Qae(m,b){return Or(ln(b),m)}function Xae(){if(!arguments.length)return[];var m=arguments[0];return ui(m)?m:[m]}function Jae(m){return Rs(m,E)}function ele(m,b){return b=typeof b=="function"?b:n,Rs(m,E,b)}function tle(m){return Rs(m,h|E)}function nle(m,b){return b=typeof b=="function"?b:n,Rs(m,h|E,b)}function rle(m,b){return b==null||Zu(m,b,ta(b))}function Dc(m,b){return m===b||m!==m&&b!==b}var ile=ea(ru),ole=ea(function(m,b){return m>=b}),Kp=Th((function(){return arguments})())?Th:function(m){return es(m)&&Ui.call(m,"callee")&&!id.call(m,"callee")},ui=fn.isArray,sle=uf?ca(uf):Sh;function Ml(m){return m!=null&&zE(m.length)&&!Td(m)}function ps(m){return es(m)&&Ml(m)}function ale(m){return m===!0||m===!1||es(m)&&ds(m)==xt}var xh=mh||SI,lle=Ao?ca(Ao):Da;function ule(m){return es(m)&&m.nodeType===1&&!N_(m)}function cle(m){if(m==null)return!0;if(Ml(m)&&(ui(m)||typeof m=="string"||typeof m.splice=="function"||xh(m)||zm(m)||Kp(m)))return!m.length;var b=Bs(m);if(b==M||b==wt)return!m.size;if(Oc(m))return!le(m).length;for(var k in m)if(Ui.call(m,k))return!1;return!0}function fle(m,b){return Pa(m,b)}function dle(m,b,k){k=typeof k=="function"?k:n;var ee=k?k(m,b):n;return ee===n?Pa(m,b,n,k):!!ee}function pI(m){if(!es(m))return!1;var b=ds(m);return b==Ue||b==It||typeof m.message=="string"&&typeof m.name=="string"&&!N_(m)}function hle(m){return typeof m=="number"&&pf(m)}function Td(m){if(!Go(m))return!1;var b=ds(m);return b==Ve||b==_t||b==jt||b==de}function u3(m){return typeof m=="number"&&m==pi(m)}function zE(m){return typeof m=="number"&&m>-1&&m%1==0&&m<=Ce}function Go(m){var b=typeof m;return m!=null&&(b=="object"||b=="function")}function es(m){return m!=null&&typeof m=="object"}var c3=Hl?ca(Hl):R;function ple(m,b){return m===b||P(m,b,Ai(b))}function gle(m,b,k){return k=typeof k=="function"?k:n,P(m,b,Ai(b),k)}function mle(m){return f3(m)&&m!=+m}function yle(m){if(QA(m))throw new Br(o);return z(m)}function vle(m){return m===null}function _le(m){return m==null}function f3(m){return typeof m=="number"||es(m)&&ds(m)==x}function N_(m){if(!es(m)||ds(m)!=j)return!1;var b=Ys(m);if(b===null)return!0;var k=Ui.call(b,"constructor")&&b.constructor;return typeof k=="function"&&k instanceof k&&td.call(k)==hf}var gI=Kf?ca(Kf):W;function ble(m){return u3(m)&&m>=-Ce&&m<=Ce}var d3=cc?ca(cc):q;function HE(m){return typeof m=="string"||!ui(m)&&es(m)&&ds(m)==st}function gu(m){return typeof m=="symbol"||es(m)&&ds(m)==nt}var zm=fp?ca(fp):Z;function Ele(m){return m===n}function wle(m){return es(m)&&Bs(m)==ct}function Tle(m){return es(m)&&ds(m)==St}var Sle=ea(fe),Ale=ea(function(m,b){return m<=b});function h3(m){if(!m)return[];if(Ml(m))return HE(m)?Fs(m):Yt(m);if(Kl&&m[Kl])return a_(m[Kl]());var b=Bs(m),k=b==M?Mu:b==wt?Cl:Hm;return k(m)}function Sd(m){if(!m)return m===0?m:0;if(m=Gu(m),m===oe||m===-oe){var b=m<0?-1:1;return b*Ye}return m===m?m:0}function pi(m){var b=Sd(m),k=b%1;return b===b?k?b-k:b:0}function p3(m){return m?ll(pi(m),0,Y):0}function Gu(m){if(typeof m=="number")return m;if(gu(m))return et;if(Go(m)){var b=typeof m.valueOf=="function"?m.valueOf():m;m=Go(b)?b+"":b}if(typeof m!="string")return m===0?m:+m;m=fh(m);var k=Un.test(m);return k||cn.test(m)?ir(m.slice(2),k?2:8):On.test(m)?et:+m}function g3(m){return Tn(m,kl(m))}function Ile(m){return m?ll(pi(m),-Ce,Ce):m===0?m:0}function co(m){return m==null?"":Ut(m)}var Cle=Rt(function(m,b){if(Oc(b)||Ml(b)){Tn(b,ta(b),m);return}for(var k in b)Ui.call(b,k)&&Ac(m,k,b[k])}),m3=Rt(function(m,b){Tn(b,kl(b),m)}),GE=Rt(function(m,b,k,ee){Tn(b,kl(b),m,ee)}),Rle=Rt(function(m,b,k,ee){Tn(b,ta(b),m,ee)}),xle=Dt(Ic);function Nle(m,b){var k=_c(m);return b==null?k:uo(k,b)}var Ole=G(function(m,b){m=Yi(m);var k=-1,ee=b.length,De=ee>2?b[2]:n;for(De&&ga(b[0],b[1],De)&&(ee=1);++k<ee;)for(var it=b[k],Et=kl(it),kt=-1,Jt=Et.length;++kt<Jt;){var Pn=Et[kt],kn=m[Pn];(kn===n||Dc(kn,fa[Pn])&&!Ui.call(m,Pn))&&(m[Pn]=it[Pn])}return m}),Lle=G(function(m){return m.push(n,wf),ks(y3,n,m)});function Dle(m,b){return pp(m,$n(b,3),Js)}function Ple(m,b){return pp(m,$n(b,3),ju)}function Mle(m,b){return m==null?m:hd(m,$n(b,3),kl)}function kle(m,b){return m==null?m:pd(m,$n(b,3),kl)}function Fle(m,b){return m&&Js(m,$n(b,3))}function $le(m,b){return m&&ju(m,$n(b,3))}function Ule(m){return m==null?[]:Rc(m,ta(m))}function Ble(m){return m==null?[]:Rc(m,kl(m))}function mI(m,b,k){var ee=m==null?n:nu(m,b);return ee===n?k:ee}function Zle(m,b){return m!=null&&f_(m,b,ha)}function yI(m,b){return m!=null&&f_(m,b,xc)}var jle=Di(function(m,b,k){b!=null&&typeof b.toString!="function"&&(b=gc.call(b)),m[b]=k},_I(Fl)),Vle=Di(function(m,b,k){b!=null&&typeof b.toString!="function"&&(b=gc.call(b)),Ui.call(m,b)?m[b].push(k):m[b]=[k]},$n),zle=G(pa);function ta(m){return Ml(m)?xl(m):le(m)}function kl(m){return Ml(m)?xl(m,!0):_e(m)}function Hle(m,b){var k={};return b=$n(b,3),Js(m,function(ee,De,it){La(k,b(ee,De,it),ee)}),k}function Gle(m,b){var k={};return b=$n(b,3),Js(m,function(ee,De,it){La(k,De,b(ee,De,it))}),k}var qle=Rt(function(m,b,k){He(m,b,k)}),y3=Rt(function(m,b,k,ee){He(m,b,k,ee)}),Wle=Dt(function(m,b){var k={};if(m==null)return k;var ee=!1;b=oo(b,function(it){return it=Xt(it,m),ee||(ee=it.length>1),it}),Tn(m,er(m),k),ee&&(k=Rs(k,h|p|E,Tf));for(var De=b.length;De--;)Bt(k,b[De]);return k});function Kle(m,b){return v3(m,Qn($n(b)))}var Yle=Dt(function(m,b){return m==null?{}:me(m,b)});function v3(m,b){if(m==null)return{};var k=oo(er(m),function(ee){return[ee]});return b=$n(b),Le(m,k,function(ee,De){return b(ee,De[0])})}function Qle(m,b,k){b=Xt(b,m);var ee=-1,De=b.length;for(De||(De=1,m=n);++ee<De;){var it=m==null?n:m[du(b[ee])];it===n&&(ee=De,it=k),m=Td(it)?it.call(m):it}return m}function Xle(m,b,k){return m==null?m:ke(m,b,k)}function Jle(m,b,k,ee){return ee=typeof ee=="function"?ee:n,m==null?m:ke(m,b,k,ee)}var _3=au(ta),b3=au(kl);function eue(m,b,k){var ee=ui(m),De=ee||xh(m)||zm(m);if(b=$n(b,4),k==null){var it=m&&m.constructor;De?k=ee?new it:[]:Go(m)?k=Td(it)?_c(Ys(m)):{}:k={}}return(De?ws:Js)(m,function(Et,kt,Jt){return b(k,Et,kt,Jt)}),k}function tue(m,b){return m==null?!0:Bt(m,b)}function nue(m,b,k){return m==null?m:Nn(m,b,ln(k))}function rue(m,b,k,ee){return ee=typeof ee=="function"?ee:n,m==null?m:Nn(m,b,ln(k),ee)}function Hm(m){return m==null?[]:Pu(m,ta(m))}function iue(m){return m==null?[]:Pu(m,kl(m))}function oue(m,b,k){return k===n&&(k=b,b=n),k!==n&&(k=Gu(k),k=k===k?k:0),b!==n&&(b=Gu(b),b=b===b?b:0),ll(Gu(m),b,k)}function sue(m,b,k){return b=Sd(b),k===n?(k=b,b=0):k=Sd(k),m=Gu(m),wh(m,b,k)}function aue(m,b,k){if(k&&typeof k!="boolean"&&ga(m,b,k)&&(b=k=n),k===n&&(typeof b=="boolean"?(k=b,b=n):typeof m=="boolean"&&(k=m,m=n)),m===n&&b===n?(m=0,b=1):(m=Sd(m),b===n?(b=m,m=0):b=Sd(b)),m>b){var ee=m;m=b,b=ee}if(k||m%1||b%1){var De=Fu();return Ss(m+De*(b-m+qn("1e-"+((De+"").length-1))),b)}return se(m,b)}var lue=Mt(function(m,b,k){return b=b.toLowerCase(),m+(k?E3(b):b)});function E3(m){return vI(co(m).toLowerCase())}function w3(m){return m=co(m),m&&m.replace(pt,dc).replace(la,"")}function uue(m,b,k){m=co(m),b=Ut(b);var ee=m.length;k=k===n?ee:ll(pi(k),0,ee);var De=k;return k-=b.length,k>=0&&m.slice(k,De)==b}function cue(m){return m=co(m),m&&ro.test(m)?m.replace(jr,Tp):m}function fue(m){return m=co(m),m&&je.test(m)?m.replace(Te,"\\$&"):m}var due=Mt(function(m,b,k){return m+(k?"-":"")+b.toLowerCase()}),hue=Mt(function(m,b,k){return m+(k?" ":"")+b.toLowerCase()}),pue=tt("toLowerCase");function gue(m,b,k){m=co(m),b=pi(b);var ee=b?ql(m):0;if(!b||ee>=b)return m;var De=(b-ee)/2;return Ma(Yl(De),k)+m+Ma(yc(De),k)}function mue(m,b,k){m=co(m),b=pi(b);var ee=b?ql(m):0;return b&&ee<b?m+Ma(b-ee,k):m}function yue(m,b,k){m=co(m),b=pi(b);var ee=b?ql(m):0;return b&&ee<b?Ma(b-ee,k)+m:m}function vue(m,b,k){return k||b==null?b=0:b&&(b=+b),Dp(co(m).replace(Je,""),b||0)}function _ue(m,b,k){return(k?ga(m,b,k):b===n)?b=1:b=pi(b),re(co(m),b)}function bue(){var m=arguments,b=co(m[0]);return m.length<3?b:b.replace(m[1],m[2])}var Eue=Mt(function(m,b,k){return m+(k?"_":"")+b.toLowerCase()});function wue(m,b,k){return k&&typeof k!="number"&&ga(m,b,k)&&(b=k=n),k=k===n?Y:k>>>0,k?(m=co(m),m&&(typeof b=="string"||b!=null&&!gI(b))&&(b=Ut(b),!b&&hc(m))?Mn(Fs(m),0,k):m.split(b,k)):[]}var Tue=Mt(function(m,b,k){return m+(k?" ":"")+vI(b)});function Sue(m,b,k){return m=co(m),k=k==null?0:ll(pi(k),0,m.length),b=Ut(b),m.slice(k,k+b.length)==b}function Aue(m,b,k){var ee=Qe.templateSettings;k&&ga(m,b,k)&&(b=n),m=co(m),b=GE({},b,ee,Nc);var De=GE({},b.imports,ee.imports,Nc),it=ta(De),Et=Pu(De,it),kt,Jt,Pn=0,kn=b.interpolate||Gt,zn="__p += '",sr=ed((b.escape||Gt).source+"|"+kn.source+"|"+(kn===xo?en:Gt).source+"|"+(b.evaluate||Gt).source+"|$","g"),Cr="//# sourceURL="+(Ui.call(b,"sourceURL")?(b.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++lf+"]")+`
`;m.replace(sr,function(Gr,Pi,Vi,mu,dl,yu){return Vi||(Vi=mu),zn+=m.slice(Pn,yu).replace(Gn,hm),Pi&&(kt=!0,zn+=`' +
__e(`+Pi+`) +
'`),dl&&(Jt=!0,zn+=`';
`+dl+`;
__p += '`),Vi&&(zn+=`' +
((__t = (`+Vi+`)) == null ? '' : __t) +
'`),Pn=yu+Gr.length,Gr}),zn+=`';
`;var Hr=Ui.call(b,"variable")&&b.variable;if(!Hr)zn=`with (obj) {
`+zn+`
}
`;else if(qt.test(Hr))throw new Br(c);zn=(Jt?zn.replace(bi,""):zn).replace(Jr,"$1").replace(eo,"$1;"),zn="function("+(Hr||"obj")+`) {
`+(Hr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(kt?", __e = _.escape":"")+(Jt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+zn+`return __p
}`;var vi=S3(function(){return $i(it,Cr+"return "+zn).apply(n,Et)});if(vi.source=zn,pI(vi))throw vi;return vi}function Iue(m){return co(m).toLowerCase()}function Cue(m){return co(m).toUpperCase()}function Rue(m,b,k){if(m=co(m),m&&(k||b===n))return fh(m);if(!m||!(b=Ut(b)))return m;var ee=Fs(m),De=Fs(b),it=bp(ee,De),Et=Ep(ee,De)+1;return Mn(ee,it,Et).join("")}function xue(m,b,k){if(m=co(m),m&&(k||b===n))return m.slice(0,dh(m)+1);if(!m||!(b=Ut(b)))return m;var ee=Fs(m),De=Ep(ee,Fs(b))+1;return Mn(ee,0,De).join("")}function Nue(m,b,k){if(m=co(m),m&&(k||b===n))return m.replace(Je,"");if(!m||!(b=Ut(b)))return m;var ee=Fs(m),De=bp(ee,Fs(b));return Mn(ee,De).join("")}function Oue(m,b){var k=D,ee=X;if(Go(b)){var De="separator"in b?b.separator:De;k="length"in b?pi(b.length):k,ee="omission"in b?Ut(b.omission):ee}m=co(m);var it=m.length;if(hc(m)){var Et=Fs(m);it=Et.length}if(k>=it)return m;var kt=k-ql(ee);if(kt<1)return ee;var Jt=Et?Mn(Et,0,kt).join(""):m.slice(0,kt);if(De===n)return Jt+ee;if(Et&&(kt+=Jt.length-kt),gI(De)){if(m.slice(kt).search(De)){var Pn,kn=Jt;for(De.global||(De=ed(De.source,co(vn.exec(De))+"g")),De.lastIndex=0;Pn=De.exec(kn);)var zn=Pn.index;Jt=Jt.slice(0,zn===n?kt:zn)}}else if(m.indexOf(Ut(De),kt)!=kt){var sr=Jt.lastIndexOf(De);sr>-1&&(Jt=Jt.slice(0,sr))}return Jt+ee}function Lue(m){return m=co(m),m&&qi.test(m)?m.replace(ei,Jf):m}var Due=Mt(function(m,b,k){return m+(k?" ":"")+b.toUpperCase()}),vI=tt("toUpperCase");function T3(m,b,k){return m=co(m),b=k?n:b,b===n?s_(m)?Ap(m):fm(m):m.match(b)||[]}var S3=G(function(m,b){try{return ks(m,n,b)}catch(k){return pI(k)?k:new Br(k)}}),Pue=Dt(function(m,b){return ws(b,function(k){k=du(k),La(m,k,Kn(m[k],m))}),m});function Mue(m){var b=m==null?0:m.length,k=$n();return m=b?oo(m,function(ee){if(typeof ee[1]!="function")throw new Ts(l);return[k(ee[0]),ee[1]]}):[],G(function(ee){for(var De=-1;++De<b;){var it=m[De];if(ks(it[0],this,ee))return ks(it[1],this,ee)}})}function kue(m){return wm(Rs(m,h))}function _I(m){return function(){return m}}function Fue(m,b){return m==null||m!==m?b:m}var $ue=Si(),Uue=Si(!0);function Fl(m){return m}function bI(m){return K(typeof m=="function"?m:Rs(m,h))}function Bue(m){return ce(Rs(m,h))}function Zue(m,b){return ae(m,Rs(b,h))}var jue=G(function(m,b){return function(k){return pa(k,m,b)}}),Vue=G(function(m,b){return function(k){return pa(m,k,b)}});function EI(m,b,k){var ee=ta(b),De=Rc(b,ee);k==null&&!(Go(b)&&(De.length||!ee.length))&&(k=b,b=m,m=this,De=Rc(b,ta(b)));var it=!(Go(k)&&"chain"in k)||!!k.chain,Et=Td(m);return ws(De,function(kt){var Jt=b[kt];m[kt]=Jt,Et&&(m.prototype[kt]=function(){var Pn=this.__chain__;if(it||Pn){var kn=m(this.__wrapped__),zn=kn.__actions__=Yt(this.__actions__);return zn.push({func:Jt,args:arguments,thisArg:m}),kn.__chain__=Pn,kn}return Jt.apply(m,rl([this.value()],arguments))})}),m}function zue(){return Ur._===this&&(Ur._=gm),this}function wI(){}function Hue(m){return m=pi(m),G(function(b){return Be(b,m)})}var Gue=bo(oo),que=bo(ih),Wue=bo(sh);function A3(m){return fr(m)?lh(du(m)):ge(m)}function Kue(m){return function(b){return m==null?n:nu(m,b)}}var Yue=ou(),Que=ou(!0);function TI(){return[]}function SI(){return!1}function Xue(){return{}}function Jue(){return""}function ece(){return!0}function tce(m,b){if(m=pi(m),m<1||m>Ce)return[];var k=Y,ee=Ss(m,Y);b=$n(b),m-=Y;for(var De=vp(ee,b);++k<m;)b(k);return De}function nce(m){return ui(m)?oo(m,du):gu(m)?[m]:Yt(g_(co(m)))}function rce(m){var b=++df;return co(m)+b}var ice=zo(function(m,b){return m+b},0),oce=Zi("ceil"),sce=zo(function(m,b){return m/b},1),ace=Zi("floor");function lce(m){return m&&m.length?Cc(m,Fl,ru):n}function uce(m,b){return m&&m.length?Cc(m,$n(b,2),ru):n}function cce(m){return dm(m,Fl)}function fce(m,b){return dm(m,$n(b,2))}function dce(m){return m&&m.length?Cc(m,Fl,fe):n}function hce(m,b){return m&&m.length?Cc(m,$n(b,2),fe):n}var pce=zo(function(m,b){return m*b},1),gce=Zi("round"),mce=zo(function(m,b){return m-b},0);function yce(m){return m&&m.length?ch(m,Fl):0}function vce(m,b){return m&&m.length?ch(m,$n(b,2)):0}return Qe.after=Pt,Qe.ary=gn,Qe.assign=Cle,Qe.assignIn=m3,Qe.assignInWith=GE,Qe.assignWith=Rle,Qe.at=xle,Qe.before=jn,Qe.bind=Kn,Qe.bindAll=Pue,Qe.bindKey=Bn,Qe.castArray=Xae,Qe.chain=km,Qe.chunk=Rm,Qe.compact=m_,Qe.concat=Dl,Qe.cond=Mue,Qe.conforms=kue,Qe.constant=_I,Qe.countBy=UE,Qe.create=Nle,Qe.curry=ar,Qe.curryRight=yr,Qe.debounce=_r,Qe.defaults=Ole,Qe.defaultsDeep=Lle,Qe.defer=Ho,Qe.delay=on,Qe.difference=ji,Qe.differenceBy=Os,Qe.differenceWith=Jo,Qe.drop=js,Qe.dropRight=fl,Qe.dropRightWhile=Ch,Qe.dropWhile=hs,Qe.fill=jp,Qe.filter=Um,Qe.flatMap=R_,Qe.flatMapDeep=uI,Qe.flatMapDepth=jE,Qe.flatten=xm,Qe.flattenDeep=zp,Qe.flattenDepth=ka,Qe.flip=Zt,Qe.flow=$ue,Qe.flowRight=Uue,Qe.fromPairs=y_,Qe.functions=Ule,Qe.functionsIn=Ble,Qe.groupBy=x_,Qe.initial=Nm,Qe.intersection=v_,Qe.intersectionBy=Cf,Qe.intersectionWith=Om,Qe.invert=jle,Qe.invertBy=Vle,Qe.invokeMap=VE,Qe.iteratee=bI,Qe.keyBy=cI,Qe.keys=ta,Qe.keysIn=kl,Qe.map=wd,Qe.mapKeys=Hle,Qe.mapValues=Gle,Qe.matches=Bue,Qe.matchesProperty=Zue,Qe.memoize=un,Qe.merge=qle,Qe.mergeWith=y3,Qe.method=jue,Qe.methodOf=Vue,Qe.mixin=EI,Qe.negate=Qn,Qe.nthArg=Hue,Qe.omit=Wle,Qe.omitBy=Kle,Qe.once=Ar,Qe.orderBy=fI,Qe.over=Gue,Qe.overArgs=Mr,Qe.overEvery=que,Qe.overSome=Wue,Qe.partial=Or,Qe.partialRight=zr,Qe.partition=Wp,Qe.pick=Yle,Qe.pickBy=v3,Qe.property=A3,Qe.propertyOf=Kue,Qe.pull=Lm,Qe.pullAll=Gp,Qe.pullAllBy=ya,Qe.pullAllWith=xf,Qe.pullAt=hu,Qe.range=Yue,Qe.rangeRight=Que,Qe.rearg=Ls,Qe.reject=u,Qe.remove=Fa,Qe.rest=Wi,Qe.reverse=Dm,Qe.sampleSize=w,Qe.set=Xle,Qe.setWith=Jle,Qe.shuffle=N,Qe.slice=b_,Qe.sortBy=$e,Qe.sortedUniq=T_,Qe.sortedUniqBy=_d,Qe.split=wue,Qe.spread=Of,Qe.tail=LE,Qe.take=DE,Qe.takeRight=S_,Qe.takeRightWhile=Pm,Qe.takeWhile=JA,Qe.tap=sI,Qe.throttle=hI,Qe.thru=pu,Qe.toArray=h3,Qe.toPairs=_3,Qe.toPairsIn=b3,Qe.toPath=nce,Qe.toPlainObject=g3,Qe.transform=eue,Qe.unary=Yae,Qe.union=eI,Qe.unionBy=PE,Qe.unionWith=ME,Qe.uniq=bd,Qe.uniqBy=tI,Qe.uniqWith=Rh,Qe.unset=tue,Qe.unzip=Mm,Qe.unzipWith=Lo,Qe.update=nue,Qe.updateWith=rue,Qe.values=Hm,Qe.valuesIn=iue,Qe.without=nI,Qe.words=T3,Qe.wrap=Qae,Qe.xor=kE,Qe.xorBy=rI,Qe.xorWith=iI,Qe.zip=FE,Qe.zipObject=$E,Qe.zipObjectDeep=oI,Qe.zipWith=Pl,Qe.entries=_3,Qe.entriesIn=b3,Qe.extend=m3,Qe.extendWith=GE,EI(Qe,Qe),Qe.add=ice,Qe.attempt=S3,Qe.camelCase=lue,Qe.capitalize=E3,Qe.ceil=oce,Qe.clamp=oue,Qe.clone=Jae,Qe.cloneDeep=tle,Qe.cloneDeepWith=nle,Qe.cloneWith=ele,Qe.conformsTo=rle,Qe.deburr=w3,Qe.defaultTo=Fue,Qe.divide=sce,Qe.endsWith=uue,Qe.eq=Dc,Qe.escape=cue,Qe.escapeRegExp=fue,Qe.every=BE,Qe.find=Bm,Qe.findIndex=If,Qe.findKey=Dle,Qe.findLast=ZE,Qe.findLastIndex=Vp,Qe.findLastKey=Ple,Qe.floor=ace,Qe.forEach=Zm,Qe.forEachRight=qp,Qe.forIn=Mle,Qe.forInRight=kle,Qe.forOwn=Fle,Qe.forOwnRight=$le,Qe.get=mI,Qe.gt=ile,Qe.gte=ole,Qe.has=Zle,Qe.hasIn=yI,Qe.head=yd,Qe.identity=Fl,Qe.includes=jm,Qe.indexOf=Lc,Qe.inRange=sue,Qe.invoke=zle,Qe.isArguments=Kp,Qe.isArray=ui,Qe.isArrayBuffer=sle,Qe.isArrayLike=Ml,Qe.isArrayLikeObject=ps,Qe.isBoolean=ale,Qe.isBuffer=xh,Qe.isDate=lle,Qe.isElement=ule,Qe.isEmpty=cle,Qe.isEqual=fle,Qe.isEqualWith=dle,Qe.isError=pI,Qe.isFinite=hle,Qe.isFunction=Td,Qe.isInteger=u3,Qe.isLength=zE,Qe.isMap=c3,Qe.isMatch=ple,Qe.isMatchWith=gle,Qe.isNaN=mle,Qe.isNative=yle,Qe.isNil=_le,Qe.isNull=vle,Qe.isNumber=f3,Qe.isObject=Go,Qe.isObjectLike=es,Qe.isPlainObject=N_,Qe.isRegExp=gI,Qe.isSafeInteger=ble,Qe.isSet=d3,Qe.isString=HE,Qe.isSymbol=gu,Qe.isTypedArray=zm,Qe.isUndefined=Ele,Qe.isWeakMap=wle,Qe.isWeakSet=Tle,Qe.join=Rf,Qe.kebabCase=due,Qe.last=ma,Qe.lastIndexOf=Hp,Qe.lowerCase=hue,Qe.lowerFirst=pue,Qe.lt=Sle,Qe.lte=Ale,Qe.max=lce,Qe.maxBy=uce,Qe.mean=cce,Qe.meanBy=fce,Qe.min=dce,Qe.minBy=hce,Qe.stubArray=TI,Qe.stubFalse=SI,Qe.stubObject=Xue,Qe.stubString=Jue,Qe.stubTrue=ece,Qe.multiply=pce,Qe.nth=__,Qe.noConflict=zue,Qe.noop=wI,Qe.now=yt,Qe.pad=gue,Qe.padEnd=mue,Qe.padStart=yue,Qe.parseInt=vue,Qe.random=aue,Qe.reduce=dI,Qe.reduceRight=Vm,Qe.repeat=_ue,Qe.replace=bue,Qe.result=Qle,Qe.round=gce,Qe.runInContext=Vt,Qe.sample=d,Qe.size=H,Qe.snakeCase=Eue,Qe.some=J,Qe.sortedIndex=E_,Qe.sortedIndexBy=XA,Qe.sortedIndexOf=Nf,Qe.sortedLastIndex=OE,Qe.sortedLastIndexBy=w_,Qe.sortedLastIndexOf=vd,Qe.startCase=Tue,Qe.startsWith=Sue,Qe.subtract=mce,Qe.sum=yce,Qe.sumBy=vce,Qe.template=Aue,Qe.times=tce,Qe.toFinite=Sd,Qe.toInteger=pi,Qe.toLength=p3,Qe.toLower=Iue,Qe.toNumber=Gu,Qe.toSafeInteger=Ile,Qe.toString=co,Qe.toUpper=Cue,Qe.trim=Rue,Qe.trimEnd=xue,Qe.trimStart=Nue,Qe.truncate=Oue,Qe.unescape=Lue,Qe.uniqueId=rce,Qe.upperCase=Due,Qe.upperFirst=vI,Qe.each=Zm,Qe.eachRight=qp,Qe.first=yd,EI(Qe,(function(){var m={};return Js(Qe,function(b,k){Ui.call(Qe.prototype,k)||(m[k]=b)}),m})(),{chain:!1}),Qe.VERSION=r,ws(["bind","bindKey","curry","curryRight","partial","partialRight"],function(m){Qe[m].placeholder=Qe}),ws(["drop","take"],function(m,b){ri.prototype[m]=function(k){k=k===n?1:Bo(pi(k),0);var ee=this.__filtered__&&!b?new ri(this):this.clone();return ee.__filtered__?ee.__takeCount__=Ss(k,ee.__takeCount__):ee.__views__.push({size:Ss(k,Y),type:m+(ee.__dir__<0?"Right":"")}),ee},ri.prototype[m+"Right"]=function(k){return this.reverse()[m](k).reverse()}}),ws(["filter","map","takeWhile"],function(m,b){var k=b+1,ee=k==ye||k==Me;ri.prototype[m]=function(De){var it=this.clone();return it.__iteratees__.push({iteratee:$n(De,3),type:k}),it.__filtered__=it.__filtered__||ee,it}}),ws(["head","last"],function(m,b){var k="take"+(b?"Right":"");ri.prototype[m]=function(){return this[k](1).value()[0]}}),ws(["initial","tail"],function(m,b){var k="drop"+(b?"":"Right");ri.prototype[m]=function(){return this.__filtered__?new ri(this):this[k](1)}}),ri.prototype.compact=function(){return this.filter(Fl)},ri.prototype.find=function(m){return this.filter(m).head()},ri.prototype.findLast=function(m){return this.reverse().find(m)},ri.prototype.invokeMap=G(function(m,b){return typeof m=="function"?new ri(this):this.map(function(k){return pa(k,m,b)})}),ri.prototype.reject=function(m){return this.filter(Qn($n(m)))},ri.prototype.slice=function(m,b){m=pi(m);var k=this;return k.__filtered__&&(m>0||b<0)?new ri(k):(m<0?k=k.takeRight(-m):m&&(k=k.drop(m)),b!==n&&(b=pi(b),k=b<0?k.dropRight(-b):k.take(b-m)),k)},ri.prototype.takeRightWhile=function(m){return this.reverse().takeWhile(m).reverse()},ri.prototype.toArray=function(){return this.take(Y)},Js(ri.prototype,function(m,b){var k=/^(?:filter|find|map|reject)|While$/.test(b),ee=/^(?:head|last)$/.test(b),De=Qe[ee?"take"+(b=="last"?"Right":""):b],it=ee||/^find/.test(b);De&&(Qe.prototype[b]=function(){var Et=this.__wrapped__,kt=ee?[1]:arguments,Jt=Et instanceof ri,Pn=kt[0],kn=Jt||ui(Et),zn=function(Pi){var Vi=De.apply(Qe,rl([Pi],kt));return ee&&sr?Vi[0]:Vi};kn&&k&&typeof Pn=="function"&&Pn.length!=1&&(Jt=kn=!1);var sr=this.__chain__,Cr=!!this.__actions__.length,Hr=it&&!sr,vi=Jt&&!Cr;if(!it&&kn){Et=vi?Et:new ri(this);var Gr=m.apply(Et,kt);return Gr.__actions__.push({func:pu,args:[zn],thisArg:n}),new As(Gr,sr)}return Hr&&vi?m.apply(this,kt):(Gr=this.thru(zn),Hr?ee?Gr.value()[0]:Gr.value():Gr)})}),ws(["pop","push","shift","sort","splice","unshift"],function(m){var b=il[m],k=/^(?:push|sort|unshift)$/.test(m)?"tap":"thru",ee=/^(?:pop|shift)$/.test(m);Qe.prototype[m]=function(){var De=arguments;if(ee&&!this.__chain__){var it=this.value();return b.apply(ui(it)?it:[],De)}return this[k](function(Et){return b.apply(ui(Et)?Et:[],De)})}}),Js(ri.prototype,function(m,b){var k=Qe[b];if(k){var ee=k.name+"";Ui.call(yf,ee)||(yf[ee]=[]),yf[ee].push({name:b,func:k})}}),yf[to(n,C).name]=[{name:"wrapper",func:n}],ri.prototype.clone=fd,ri.prototype.reverse=Mp,ri.prototype.value=bc,Qe.prototype.at=Fm,Qe.prototype.chain=Ed,Qe.prototype.commit=$m,Qe.prototype.next=A_,Qe.prototype.plant=aI,Qe.prototype.reverse=C_,Qe.prototype.toJSON=Qe.prototype.valueOf=Qe.prototype.value=lI,Qe.prototype.first=Qe.prototype.head,Kl&&(Qe.prototype[Kl]=I_),Qe}),cf=Ip();Uo?((Uo.exports=cf)._=cf,So._=cf):Ur._=cf}).call(qj)})(fv,fv.exports)),fv.exports}var Kj=Wj();function kr(){throw new Error("You need to be in an EventTrackerProvider before using `useEventTracker`")}const r2=xe.createContext({displayLogin:kr,loginSuccess:kr,loginError:kr,logout:kr,initPlayer:kr,initChatbot:kr,chatbotNewUserMessage:kr,chatbotResponse:kr,startGuide:kr,restartGuide:kr,resumeGuide:kr,autoResumeGuide:kr,endGuide:kr,abortGuide:kr,displayStep:kr,autoDisplayNews:kr,manuallyDisplayNews:kr,autoDisplayOfflineNews:kr,triggerSmartLauncher:kr,triggerQuickLauncher:kr,triggerValidator:kr,clickTooltip:kr,hoverTooltip:kr,changeTooltipTarget:kr,hoverTooltipTarget:kr,focusTooltipTarget:kr,displayLibraryFile:kr,createGuide:kr,deleteGuide:kr,updateGuide:kr,publishGuide:kr,previewGuide:kr,createStep:kr,updateStep:kr,deleteStep:kr,previewStep:kr,createSmartLauncher:kr,updateSmartLauncher:kr,deleteSmartLauncher:kr,previewSmartLauncher:kr,createQuickLauncher:kr,updateQuickLauncher:kr,deleteQuickLauncher:kr,previewQuickLauncher:kr,createValidator:kr,deleteValidator:kr,updateValidator:kr,previewValidator:kr,createInformator:kr,deleteInformator:kr,updateInformator:kr,previewInformator:kr,lookupElement:kr}),Yj=({onEvent:t,children:e})=>{const n=xe.useCallback(i=>{t({id:Kj.uniqueId(),emittedAt:new Date().toISOString(),...i})},[t]),r=xe.useMemo(()=>({displayLogin:()=>{n({name:"login:display"})},loginSuccess:i=>{n({name:"login:success",method:i.method})},loginError:()=>{n({name:"login:error"})},logout:()=>{n({name:"logout"})},initPlayer:i=>{n({name:"player-init",toolId:i.toolId})},initChatbot:i=>{n({name:"chatbot:init",chatUuid:i.chatUuid,companyUuid:i.companyUuid,profileUuids:i.profileUuids,tagUuids:i.tagUuids,toolUuids:i.toolUuids})},chatbotNewUserMessage:i=>{n({name:"chatbot:new-user-message",chatUuid:i.chatUuid,companyUuid:i.companyUuid,profileUuids:i.profileUuids,tagUuids:i.tagUuids,toolUuids:i.toolUuids})},chatbotResponse:i=>{n({name:"chatbot:response",chatUuid:i.chatUuid,companyUuid:i.companyUuid,profileUuids:i.profileUuids,tagUuids:i.tagUuids,toolUuids:i.toolUuids,suggestedContent:i.suggestedContent})},startGuide:i=>{n({name:"guide:start",guideId:i.guideId,guideName:i.guideName,toolId:i.toolId})},restartGuide:i=>{n({name:"guide:restart",guideId:i.guideId,guideName:i.guideName,toolId:i.toolId})},resumeGuide:i=>{n({name:"guide:resume",guideId:i.guideId,guideName:i.guideName,toolId:i.toolId})},autoResumeGuide:i=>{n({name:"guide:autoresume",guideId:i.guideId,guideName:i.guideName,toolId:i.toolId})},endGuide:i=>{n({name:"guide:end",guideId:i.guideId,guideName:i.guideName,toolId:i.toolId})},abortGuide:i=>{n({name:"guide:abort",guideId:i.guideId,guideName:i.guideName,toolId:i.toolId})},displayStep:i=>{n({name:"step:display",guideId:i.guideId,guideName:i.guideName,toolId:i.toolId,stepId:i.stepId})},autoDisplayNews:i=>{n({name:"news:autodisplay",newsId:i.newsId,toolId:i.toolId})},manuallyDisplayNews:i=>{n({name:"news:manualdisplay",newsId:i.newsId,toolId:i.toolId})},autoDisplayOfflineNews:i=>{n({name:"offline-news:display",newsId:i.newsId,toolId:i.toolId})},triggerSmartLauncher:i=>{n({name:"smartlauncher:trigger",smartLauncherId:i.launcherId,toolId:i.toolId})},triggerQuickLauncher:i=>{n({name:"quicklauncher:trigger",quickLauncherId:i.launcherId,toolId:i.toolId})},triggerValidator:i=>{n({name:"validator:trigger",validatorId:i.validatorId,toolId:i.toolId})},clickTooltip:i=>{n({name:"informator:click",tooltipId:i.tooltipId,toolId:i.toolId})},hoverTooltip:i=>{n({name:"informator:hover",tooltipId:i.tooltipId,toolId:i.toolId})},changeTooltipTarget:i=>{n({name:"informator:change-target",tooltipId:i.tooltipId,toolId:i.toolId})},hoverTooltipTarget:i=>{n({name:"informator:hover-target",tooltipId:i.tooltipId,toolId:i.toolId})},focusTooltipTarget:i=>{n({name:"informator:focus-target",tooltipId:i.tooltipId,toolId:i.toolId})},displayLibraryFile:i=>{n({name:"library:display-file",libraryFileId:i.fileId,toolId:i.toolId})},createGuide:i=>{n({name:"guide:create",guideId:i.guideId,toolId:i.toolId})},deleteGuide:i=>{n({name:"guide:delete",guideId:i.guideId,toolId:i.toolId})},updateGuide:i=>{n({name:"guide:update",guideId:i.guideId,toolId:i.toolId})},publishGuide:i=>{n({name:"guide:publish",guideId:i.guideId,toolId:i.toolId})},previewGuide:i=>{n({name:"guide:preview",guideId:i.guideId,toolId:i.toolId})},createStep:i=>{n({name:"step:create",guideId:i.guideId,toolId:i.toolId,stepId:i.stepId})},updateStep:i=>{n({name:"step:update",guideId:i.guideId,toolId:i.toolId,stepId:i.stepId})},deleteStep:i=>{n({name:"step:delete",guideId:i.guideId,toolId:i.toolId,stepId:i.stepId})},previewStep:i=>{n({name:"step:preview",guideId:i.guideId,toolId:i.toolId,stepId:i.stepId})},lookupElement:i=>{n({name:"step:lookup-element",guideId:i.guideId,toolId:i.toolId,stepKey:i.stepKey,stepElementHash:i.stepElementHash,companyUuid:i.companyUuid,lookupOutcome:i.lookupOutcome,profileUuids:i.profileUuids,tagUuids:i.tagUuids,stepId:i.stepId})},createSmartLauncher:i=>{n({name:"smartlauncher:create",smartLauncherId:i.launcherId,toolId:i.toolId})},updateSmartLauncher:i=>{n({name:"smartlauncher:update",smartLauncherId:i.launcherId,toolId:i.toolId})},deleteSmartLauncher:i=>{n({name:"smartlauncher:delete",smartLauncherId:i.launcherId,toolId:i.toolId})},previewSmartLauncher:i=>{n({name:"smartlauncher:preview",smartLauncherId:i.launcherId,toolId:i.toolId})},createQuickLauncher:i=>{n({name:"quicklauncher:create",quickLauncherId:i.launcherId,toolId:i.toolId})},updateQuickLauncher:i=>{n({name:"quicklauncher:update",quickLauncherId:i.launcherId,toolId:i.toolId})},deleteQuickLauncher:i=>{n({name:"quicklauncher:delete",quickLauncherId:i.launcherId,toolId:i.toolId})},previewQuickLauncher:i=>{n({name:"quicklauncher:preview",quickLauncherId:i.launcherId,toolId:i.toolId})},createInformator:i=>{n({name:"informator:create",tooltipId:i.tooltipId,toolId:i.toolId})},deleteInformator:i=>{n({name:"informator:delete",tooltipId:i.tooltipId,toolId:i.toolId})},updateInformator:i=>{n({name:"informator:update",tooltipId:i.tooltipId,toolId:i.toolId})},previewInformator:i=>{n({name:"informator:preview",tooltipId:i.tooltipId,toolId:i.toolId})},createValidator:i=>{n({name:"validator:create",validatorId:i.validatorId,toolId:i.toolId})},deleteValidator:i=>{n({name:"validator:delete",validatorId:i.validatorId,toolId:i.toolId})},updateValidator:i=>{n({name:"validator:update",validatorId:i.validatorId,toolId:i.toolId})},previewValidator:i=>{n({name:"validator:preview",validatorId:i.validatorId,toolId:i.toolId})}}),[n]);return pe.jsx(r2.Provider,{value:r,children:e})},Wa=()=>xe.useContext(r2);function Ln(t,e,n){function r(c,f){var g;Object.defineProperty(c,"_zod",{value:c._zod??{},enumerable:!1}),(g=c._zod).traits??(g.traits=new Set),c._zod.traits.add(t),e(c,f);for(const y in l.prototype)y in c||Object.defineProperty(c,y,{value:l.prototype[y].bind(c)});c._zod.constr=l,c._zod.def=f}const i=n?.Parent??Object;class o extends i{}Object.defineProperty(o,"name",{value:t});function l(c){var f;const g=n?.Parent?new o:this;r(g,c),(f=g._zod).deferred??(f.deferred=[]);for(const y of g._zod.deferred)y();return g}return Object.defineProperty(l,"init",{value:r}),Object.defineProperty(l,Symbol.hasInstance,{value:c=>n?.Parent&&c instanceof n.Parent?!0:c?._zod?.traits?.has(t)}),Object.defineProperty(l,"name",{value:t}),l}class Og extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class i2 extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const o2={};function Yh(t){return o2}function Qj(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,i])=>e.indexOf(+r)===-1).map(([r,i])=>i)}function rT(t,e){return typeof e=="bigint"?e.toString():e}function iT(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function oT(t){return t==null}function sT(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}function Xj(t,e){const n=(t.toString().split(".")[1]||"").length,r=e.toString();let i=(r.split(".")[1]||"").length;if(i===0&&/\d?e-\d?/.test(r)){const f=r.match(/\d?e-(\d?)/);f?.[1]&&(i=Number.parseInt(f[1]))}const o=n>i?n:i,l=Number.parseInt(t.toFixed(o).replace(".","")),c=Number.parseInt(e.toFixed(o).replace(".",""));return l%c/10**o}const s2=Symbol("evaluating");function wo(t,e,n){let r;Object.defineProperty(t,e,{get(){if(r!==s2)return r===void 0&&(r=s2,r=n()),r},set(i){Object.defineProperty(t,e,{value:i})},configurable:!0})}function Qh(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function Xh(...t){const e={};for(const n of t){const r=Object.getOwnPropertyDescriptors(n);Object.assign(e,r)}return Object.defineProperties({},e)}function a2(t){return JSON.stringify(t)}const l2="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function ib(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const Jj=iT(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function dv(t){if(ib(t)===!1)return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(ib(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function u2(t){return dv(t)?{...t}:Array.isArray(t)?[...t]:t}const eV=new Set(["string","number","symbol"]);function Lg(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function zd(t,e,n){const r=new t._zod.constr(e??t._zod.def);return(!e||n?.parent)&&(r._zod.parent=t),r}function Pr(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function tV(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}const nV={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function rV(t,e){const n=t._zod.def,r=Xh(t._zod.def,{get shape(){const i={};for(const o in e){if(!(o in n.shape))throw new Error(`Unrecognized key: "${o}"`);e[o]&&(i[o]=n.shape[o])}return Qh(this,"shape",i),i},checks:[]});return zd(t,r)}function iV(t,e){const n=t._zod.def,r=Xh(t._zod.def,{get shape(){const i={...t._zod.def.shape};for(const o in e){if(!(o in n.shape))throw new Error(`Unrecognized key: "${o}"`);e[o]&&delete i[o]}return Qh(this,"shape",i),i},checks:[]});return zd(t,r)}function oV(t,e){if(!dv(e))throw new Error("Invalid input to extend: expected a plain object");const n=t._zod.def.checks;if(n&&n.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const i=Xh(t._zod.def,{get shape(){const o={...t._zod.def.shape,...e};return Qh(this,"shape",o),o},checks:[]});return zd(t,i)}function sV(t,e){if(!dv(e))throw new Error("Invalid input to safeExtend: expected a plain object");const n={...t._zod.def,get shape(){const r={...t._zod.def.shape,...e};return Qh(this,"shape",r),r},checks:t._zod.def.checks};return zd(t,n)}function aV(t,e){const n=Xh(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e._zod.def.shape};return Qh(this,"shape",r),r},get catchall(){return e._zod.def.catchall},checks:[]});return zd(t,n)}function lV(t,e,n){const r=Xh(e._zod.def,{get shape(){const i=e._zod.def.shape,o={...i};if(n)for(const l in n){if(!(l in i))throw new Error(`Unrecognized key: "${l}"`);n[l]&&(o[l]=t?new t({type:"optional",innerType:i[l]}):i[l])}else for(const l in i)o[l]=t?new t({type:"optional",innerType:i[l]}):i[l];return Qh(this,"shape",o),o},checks:[]});return zd(e,r)}function uV(t,e,n){const r=Xh(e._zod.def,{get shape(){const i=e._zod.def.shape,o={...i};if(n)for(const l in n){if(!(l in o))throw new Error(`Unrecognized key: "${l}"`);n[l]&&(o[l]=new t({type:"nonoptional",innerType:i[l]}))}else for(const l in i)o[l]=new t({type:"nonoptional",innerType:i[l]});return Qh(this,"shape",o),o},checks:[]});return zd(e,r)}function Dg(t,e=0){if(t.aborted===!0)return!0;for(let n=e;n<t.issues.length;n++)if(t.issues[n]?.continue!==!0)return!0;return!1}function c2(t,e){return e.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(t),n})}function ob(t){return typeof t=="string"?t:t?.message}function Jh(t,e,n){const r={...t,path:t.path??[]};if(!t.message){const i=ob(t.inst?._zod.def?.error?.(t))??ob(e?.error?.(t))??ob(n.customError?.(t))??ob(n.localeError?.(t))??"Invalid input";r.message=i}return delete r.inst,delete r.continue,e?.reportInput||delete r.input,r}function aT(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function hv(...t){const[e,n,r]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:r}:{...e}}const f2=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,rT,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},d2=Ln("$ZodError",f2),h2=Ln("$ZodError",f2,{Parent:Error});function cV(t,e=n=>n.message){const n={},r=[];for(const i of t.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}function fV(t,e=n=>n.message){const n={_errors:[]},r=i=>{for(const o of i.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(l=>r({issues:l}));else if(o.code==="invalid_key")r({issues:o.issues});else if(o.code==="invalid_element")r({issues:o.issues});else if(o.path.length===0)n._errors.push(e(o));else{let l=n,c=0;for(;c<o.path.length;){const f=o.path[c];c===o.path.length-1?(l[f]=l[f]||{_errors:[]},l[f]._errors.push(e(o))):l[f]=l[f]||{_errors:[]},l=l[f],c++}}};return r(t),n}const lT=t=>(e,n,r,i)=>{const o=r?Object.assign(r,{async:!1}):{async:!1},l=e._zod.run({value:n,issues:[]},o);if(l instanceof Promise)throw new Og;if(l.issues.length){const c=new(i?.Err??t)(l.issues.map(f=>Jh(f,o,Yh())));throw l2(c,i?.callee),c}return l.value},uT=t=>async(e,n,r,i)=>{const o=r?Object.assign(r,{async:!0}):{async:!0};let l=e._zod.run({value:n,issues:[]},o);if(l instanceof Promise&&(l=await l),l.issues.length){const c=new(i?.Err??t)(l.issues.map(f=>Jh(f,o,Yh())));throw l2(c,i?.callee),c}return l.value},sb=t=>(e,n,r)=>{const i=r?{...r,async:!1}:{async:!1},o=e._zod.run({value:n,issues:[]},i);if(o instanceof Promise)throw new Og;return o.issues.length?{success:!1,error:new(t??d2)(o.issues.map(l=>Jh(l,i,Yh())))}:{success:!0,data:o.value}},dV=sb(h2),ab=t=>async(e,n,r)=>{const i=r?Object.assign(r,{async:!0}):{async:!0};let o=e._zod.run({value:n,issues:[]},i);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new t(o.issues.map(l=>Jh(l,i,Yh())))}:{success:!0,data:o.value}},hV=ab(h2),pV=t=>(e,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return lT(t)(e,n,i)},gV=t=>(e,n,r)=>lT(t)(e,n,r),mV=t=>async(e,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return uT(t)(e,n,i)},yV=t=>async(e,n,r)=>uT(t)(e,n,r),vV=t=>(e,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return sb(t)(e,n,i)},_V=t=>(e,n,r)=>sb(t)(e,n,r),bV=t=>async(e,n,r)=>{const i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return ab(t)(e,n,i)},EV=t=>async(e,n,r)=>ab(t)(e,n,r),wV=/^[cC][^\s-]{8,}$/,TV=/^[0-9a-z]+$/,SV=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,AV=/^[0-9a-vA-V]{20}$/,IV=/^[A-Za-z0-9]{27}$/,CV=/^[a-zA-Z0-9_-]{21}$/,RV=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,xV=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,p2=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,NV=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,OV="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function LV(){return new RegExp(OV,"u")}const DV=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,PV=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,MV=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,kV=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,FV=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,g2=/^[A-Za-z0-9_-]*$/,$V=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,UV=/^\+(?:[0-9]){6,14}[0-9]$/,m2="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",BV=new RegExp(`^${m2}$`);function y2(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function ZV(t){return new RegExp(`^${y2(t)}$`)}function jV(t){const e=y2({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${e}(?:${n.join("|")})`;return new RegExp(`^${m2}T(?:${r})$`)}const VV=t=>{const e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},zV=/^-?\d+$/,HV=/^-?\d+(?:\.\d+)?/,GV=/^[^A-Z]*$/,qV=/^[^a-z]*$/,vl=Ln("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),v2={number:"number",bigint:"bigint",object:"date"},_2=Ln("$ZodCheckLessThan",(t,e)=>{vl.init(t,e);const n=v2[typeof e.value];t._zod.onattach.push(r=>{const i=r._zod.bag,o=(e.inclusive?i.maximum:i.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<o&&(e.inclusive?i.maximum=e.value:i.exclusiveMaximum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value<=e.value:r.value<e.value)||r.issues.push({origin:n,code:"too_big",maximum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),b2=Ln("$ZodCheckGreaterThan",(t,e)=>{vl.init(t,e);const n=v2[typeof e.value];t._zod.onattach.push(r=>{const i=r._zod.bag,o=(e.inclusive?i.minimum:i.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>o&&(e.inclusive?i.minimum=e.value:i.exclusiveMinimum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value>=e.value:r.value>e.value)||r.issues.push({origin:n,code:"too_small",minimum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),WV=Ln("$ZodCheckMultipleOf",(t,e)=>{vl.init(t,e),t._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=e.value)}),t._zod.check=n=>{if(typeof n.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%e.value===BigInt(0):Xj(n.value,e.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:e.value,input:n.value,inst:t,continue:!e.abort})}}),KV=Ln("$ZodCheckNumberFormat",(t,e)=>{vl.init(t,e),e.format=e.format||"float64";const n=e.format?.includes("int"),r=n?"int":"number",[i,o]=nV[e.format];t._zod.onattach.push(l=>{const c=l._zod.bag;c.format=e.format,c.minimum=i,c.maximum=o,n&&(c.pattern=zV)}),t._zod.check=l=>{const c=l.value;if(n){if(!Number.isInteger(c)){l.issues.push({expected:r,format:e.format,code:"invalid_type",continue:!1,input:c,inst:t});return}if(!Number.isSafeInteger(c)){c>0?l.issues.push({input:c,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort}):l.issues.push({input:c,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort});return}}c<i&&l.issues.push({origin:"number",input:c,code:"too_small",minimum:i,inclusive:!0,inst:t,continue:!e.abort}),c>o&&l.issues.push({origin:"number",input:c,code:"too_big",maximum:o,inst:t})}}),YV=Ln("$ZodCheckMaxLength",(t,e)=>{var n;vl.init(t,e),(n=t._zod.def).when??(n.when=r=>{const i=r.value;return!oT(i)&&i.length!==void 0}),t._zod.onattach.push(r=>{const i=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<i&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{const i=r.value;if(i.length<=e.maximum)return;const l=aT(i);r.issues.push({origin:l,code:"too_big",maximum:e.maximum,inclusive:!0,input:i,inst:t,continue:!e.abort})}}),QV=Ln("$ZodCheckMinLength",(t,e)=>{var n;vl.init(t,e),(n=t._zod.def).when??(n.when=r=>{const i=r.value;return!oT(i)&&i.length!==void 0}),t._zod.onattach.push(r=>{const i=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>i&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{const i=r.value;if(i.length>=e.minimum)return;const l=aT(i);r.issues.push({origin:l,code:"too_small",minimum:e.minimum,inclusive:!0,input:i,inst:t,continue:!e.abort})}}),XV=Ln("$ZodCheckLengthEquals",(t,e)=>{var n;vl.init(t,e),(n=t._zod.def).when??(n.when=r=>{const i=r.value;return!oT(i)&&i.length!==void 0}),t._zod.onattach.push(r=>{const i=r._zod.bag;i.minimum=e.length,i.maximum=e.length,i.length=e.length}),t._zod.check=r=>{const i=r.value,o=i.length;if(o===e.length)return;const l=aT(i),c=o>e.length;r.issues.push({origin:l,...c?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort})}}),lb=Ln("$ZodCheckStringFormat",(t,e)=>{var n,r;vl.init(t,e),t._zod.onattach.push(i=>{const o=i._zod.bag;o.format=e.format,e.pattern&&(o.patterns??(o.patterns=new Set),o.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=i=>{e.pattern.lastIndex=0,!e.pattern.test(i.value)&&i.issues.push({origin:"string",code:"invalid_format",format:e.format,input:i.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(r=t._zod).check??(r.check=()=>{})}),JV=Ln("$ZodCheckRegex",(t,e)=>{lb.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),ez=Ln("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=GV),lb.init(t,e)}),tz=Ln("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=qV),lb.init(t,e)}),nz=Ln("$ZodCheckIncludes",(t,e)=>{vl.init(t,e);const n=Lg(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=r,t._zod.onattach.push(i=>{const o=i._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(r)}),t._zod.check=i=>{i.value.includes(e.includes,e.position)||i.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:i.value,inst:t,continue:!e.abort})}}),rz=Ln("$ZodCheckStartsWith",(t,e)=>{vl.init(t,e);const n=new RegExp(`^${Lg(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const i=r._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),t._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:t,continue:!e.abort})}}),iz=Ln("$ZodCheckEndsWith",(t,e)=>{vl.init(t,e);const n=new RegExp(`.*${Lg(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const i=r._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),t._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:t,continue:!e.abort})}}),oz=Ln("$ZodCheckOverwrite",(t,e)=>{vl.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class sz{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(l=>l),i=Math.min(...r.map(l=>l.length-l.trimStart().length)),o=r.map(l=>l.slice(i)).map(l=>" ".repeat(this.indent*2)+l);for(const l of o)this.content.push(l)}compile(){const e=Function,n=this?.args,i=[...(this?.content??[""]).map(o=>`  ${o}`)];return new e(...n,i.join(`
`))}}const az={major:4,minor:1,patch:12},qo=Ln("$ZodType",(t,e)=>{var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=az;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const i of r)for(const o of i._zod.onattach)o(t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{const i=(l,c,f)=>{let g=Dg(l),y;for(const h of c){if(h._zod.def.when){if(!h._zod.def.when(l))continue}else if(g)continue;const p=l.issues.length,E=h._zod.check(l);if(E instanceof Promise&&f?.async===!1)throw new Og;if(y||E instanceof Promise)y=(y??Promise.resolve()).then(async()=>{await E,l.issues.length!==p&&(g||(g=Dg(l,p)))});else{if(l.issues.length===p)continue;g||(g=Dg(l,p))}}return y?y.then(()=>l):l},o=(l,c,f)=>{if(Dg(l))return l.aborted=!0,l;const g=i(c,r,f);if(g instanceof Promise){if(f.async===!1)throw new Og;return g.then(y=>t._zod.parse(y,f))}return t._zod.parse(g,f)};t._zod.run=(l,c)=>{if(c.skipChecks)return t._zod.parse(l,c);if(c.direction==="backward"){const g=t._zod.parse({value:l.value,issues:[]},{...c,skipChecks:!0});return g instanceof Promise?g.then(y=>o(y,l,c)):o(g,l,c)}const f=t._zod.parse(l,c);if(f instanceof Promise){if(c.async===!1)throw new Og;return f.then(g=>i(g,r,c))}return i(f,r,c)}}t["~standard"]={validate:i=>{try{const o=dV(t,i);return o.success?{value:o.data}:{issues:o.error?.issues}}catch{return hV(t,i).then(l=>l.success?{value:l.data}:{issues:l.error?.issues})}},vendor:"zod",version:1}}),cT=Ln("$ZodString",(t,e)=>{qo.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??VV(t._zod.bag),t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:t}),n}}),Do=Ln("$ZodStringFormat",(t,e)=>{lb.init(t,e),cT.init(t,e)}),lz=Ln("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=xV),Do.init(t,e)}),uz=Ln("$ZodUUID",(t,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=p2(r))}else e.pattern??(e.pattern=p2());Do.init(t,e)}),cz=Ln("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=NV),Do.init(t,e)}),fz=Ln("$ZodURL",(t,e)=>{Do.init(t,e),t._zod.check=n=>{try{const r=n.value.trim(),i=new URL(r);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(i.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:$V.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),e.normalize?n.value=i.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),dz=Ln("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=LV()),Do.init(t,e)}),hz=Ln("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=CV),Do.init(t,e)}),pz=Ln("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=wV),Do.init(t,e)}),gz=Ln("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=TV),Do.init(t,e)}),mz=Ln("$ZodULID",(t,e)=>{e.pattern??(e.pattern=SV),Do.init(t,e)}),yz=Ln("$ZodXID",(t,e)=>{e.pattern??(e.pattern=AV),Do.init(t,e)}),vz=Ln("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=IV),Do.init(t,e)}),_z=Ln("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=jV(e)),Do.init(t,e)}),bz=Ln("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=BV),Do.init(t,e)}),Ez=Ln("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=ZV(e)),Do.init(t,e)}),wz=Ln("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=RV),Do.init(t,e)}),Tz=Ln("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=DV),Do.init(t,e),t._zod.onattach.push(n=>{const r=n._zod.bag;r.format="ipv4"})}),Sz=Ln("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=PV),Do.init(t,e),t._zod.onattach.push(n=>{const r=n._zod.bag;r.format="ipv6"}),t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),Az=Ln("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=MV),Do.init(t,e)}),Iz=Ln("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=kV),Do.init(t,e),t._zod.check=n=>{const r=n.value.split("/");try{if(r.length!==2)throw new Error;const[i,o]=r;if(!o)throw new Error;const l=Number(o);if(`${l}`!==o)throw new Error;if(l<0||l>128)throw new Error;new URL(`http://[${i}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function E2(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const Cz=Ln("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=FV),Do.init(t,e),t._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64"}),t._zod.check=n=>{E2(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function Rz(t){if(!g2.test(t))return!1;const e=t.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return E2(n)}const xz=Ln("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=g2),Do.init(t,e),t._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64url"}),t._zod.check=n=>{Rz(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),Nz=Ln("$ZodE164",(t,e)=>{e.pattern??(e.pattern=UV),Do.init(t,e)});function Oz(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const i=JSON.parse(atob(r));return!("typ"in i&&i?.typ!=="JWT"||!i.alg||e&&(!("alg"in i)||i.alg!==e))}catch{return!1}}const Lz=Ln("$ZodJWT",(t,e)=>{Do.init(t,e),t._zod.check=n=>{Oz(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),w2=Ln("$ZodNumber",(t,e)=>{qo.init(t,e),t._zod.pattern=t._zod.bag.pattern??HV,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=Number(n.value)}catch{}const i=n.value;if(typeof i=="number"&&!Number.isNaN(i)&&Number.isFinite(i))return n;const o=typeof i=="number"?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:i,inst:t,...o?{received:o}:{}}),n}}),Dz=Ln("$ZodNumber",(t,e)=>{KV.init(t,e),w2.init(t,e)}),Pz=Ln("$ZodAny",(t,e)=>{qo.init(t,e),t._zod.parse=n=>n}),Mz=Ln("$ZodUnknown",(t,e)=>{qo.init(t,e),t._zod.parse=n=>n}),kz=Ln("$ZodNever",(t,e)=>{qo.init(t,e),t._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)});function T2(t,e,n){t.issues.length&&e.issues.push(...c2(n,t.issues)),e.value[n]=t.value}const Fz=Ln("$ZodArray",(t,e)=>{qo.init(t,e),t._zod.parse=(n,r)=>{const i=n.value;if(!Array.isArray(i))return n.issues.push({expected:"array",code:"invalid_type",input:i,inst:t}),n;n.value=Array(i.length);const o=[];for(let l=0;l<i.length;l++){const c=i[l],f=e.element._zod.run({value:c,issues:[]},r);f instanceof Promise?o.push(f.then(g=>T2(g,n,l))):T2(f,n,l)}return o.length?Promise.all(o).then(()=>n):n}});function ub(t,e,n,r){t.issues.length&&e.issues.push(...c2(n,t.issues)),t.value===void 0?n in r&&(e.value[n]=void 0):e.value[n]=t.value}function S2(t){const e=Object.keys(t.shape);for(const r of e)if(!t.shape?.[r]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${r}": expected a Zod schema`);const n=tV(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}}function A2(t,e,n,r,i,o){const l=[],c=i.keySet,f=i.catchall._zod,g=f.def.type;for(const y of Object.keys(e)){if(c.has(y))continue;if(g==="never"){l.push(y);continue}const h=f.run({value:e[y],issues:[]},r);h instanceof Promise?t.push(h.then(p=>ub(p,n,y,e))):ub(h,n,y,e)}return l.length&&n.issues.push({code:"unrecognized_keys",keys:l,input:e,inst:o}),t.length?Promise.all(t).then(()=>n):n}const $z=Ln("$ZodObject",(t,e)=>{if(qo.init(t,e),!Object.getOwnPropertyDescriptor(e,"shape")?.get){const c=e.shape;Object.defineProperty(e,"shape",{get:()=>{const f={...c};return Object.defineProperty(e,"shape",{value:f}),f}})}const r=iT(()=>S2(e));wo(t._zod,"propValues",()=>{const c=e.shape,f={};for(const g in c){const y=c[g]._zod;if(y.values){f[g]??(f[g]=new Set);for(const h of y.values)f[g].add(h)}}return f});const i=ib,o=e.catchall;let l;t._zod.parse=(c,f)=>{l??(l=r.value);const g=c.value;if(!i(g))return c.issues.push({expected:"object",code:"invalid_type",input:g,inst:t}),c;c.value={};const y=[],h=l.shape;for(const p of l.keys){const A=h[p]._zod.run({value:g[p],issues:[]},f);A instanceof Promise?y.push(A.then(_=>ub(_,c,p,g))):ub(A,c,p,g)}return o?A2(y,g,c,f,r.value,t):y.length?Promise.all(y).then(()=>c):c}}),Uz=Ln("$ZodObjectJIT",(t,e)=>{$z.init(t,e);const n=t._zod.parse,r=iT(()=>S2(e)),i=p=>{const E=new sz(["shape","payload","ctx"]),A=r.value,_=T=>{const S=a2(T);return`shape[${S}]._zod.run({ value: input[${S}], issues: [] }, ctx)`};E.write("const input = payload.value;");const I=Object.create(null);let C=0;for(const T of A.keys)I[T]=`key_${C++}`;E.write("const newResult = {};");for(const T of A.keys){const S=I[T],O=a2(T);E.write(`const ${S} = ${_(T)};`),E.write(`
        if (${S}.issues.length) {
          payload.issues = payload.issues.concat(${S}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${O}, ...iss.path] : [${O}]
          })));
        }
        
        
        if (${S}.value === undefined) {
          if (${O} in input) {
            newResult[${O}] = undefined;
          }
        } else {
          newResult[${O}] = ${S}.value;
        }
        
      `)}E.write("payload.value = newResult;"),E.write("return payload;");const v=E.compile();return(T,S)=>v(p,T,S)};let o;const l=ib,c=!o2.jitless,g=c&&Jj.value,y=e.catchall;let h;t._zod.parse=(p,E)=>{h??(h=r.value);const A=p.value;return l(A)?c&&g&&E?.async===!1&&E.jitless!==!0?(o||(o=i(e.shape)),p=o(p,E),y?A2([],A,p,E,h,t):p):n(p,E):(p.issues.push({expected:"object",code:"invalid_type",input:A,inst:t}),p)}});function I2(t,e,n,r){for(const o of t)if(o.issues.length===0)return e.value=o.value,e;const i=t.filter(o=>!Dg(o));return i.length===1?(e.value=i[0].value,i[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(o=>o.issues.map(l=>Jh(l,r,Yh())))}),e)}const Bz=Ln("$ZodUnion",(t,e)=>{qo.init(t,e),wo(t._zod,"optin",()=>e.options.some(i=>i._zod.optin==="optional")?"optional":void 0),wo(t._zod,"optout",()=>e.options.some(i=>i._zod.optout==="optional")?"optional":void 0),wo(t._zod,"values",()=>{if(e.options.every(i=>i._zod.values))return new Set(e.options.flatMap(i=>Array.from(i._zod.values)))}),wo(t._zod,"pattern",()=>{if(e.options.every(i=>i._zod.pattern)){const i=e.options.map(o=>o._zod.pattern);return new RegExp(`^(${i.map(o=>sT(o.source)).join("|")})$`)}});const n=e.options.length===1,r=e.options[0]._zod.run;t._zod.parse=(i,o)=>{if(n)return r(i,o);let l=!1;const c=[];for(const f of e.options){const g=f._zod.run({value:i.value,issues:[]},o);if(g instanceof Promise)c.push(g),l=!0;else{if(g.issues.length===0)return g;c.push(g)}}return l?Promise.all(c).then(f=>I2(f,i,t,o)):I2(c,i,t,o)}}),Zz=Ln("$ZodIntersection",(t,e)=>{qo.init(t,e),t._zod.parse=(n,r)=>{const i=n.value,o=e.left._zod.run({value:i,issues:[]},r),l=e.right._zod.run({value:i,issues:[]},r);return o instanceof Promise||l instanceof Promise?Promise.all([o,l]).then(([f,g])=>C2(n,f,g)):C2(n,o,l)}});function fT(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(dv(t)&&dv(e)){const n=Object.keys(e),r=Object.keys(t).filter(o=>n.indexOf(o)!==-1),i={...t,...e};for(const o of r){const l=fT(t[o],e[o]);if(!l.valid)return{valid:!1,mergeErrorPath:[o,...l.mergeErrorPath]};i[o]=l.data}return{valid:!0,data:i}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<t.length;r++){const i=t[r],o=e[r],l=fT(i,o);if(!l.valid)return{valid:!1,mergeErrorPath:[r,...l.mergeErrorPath]};n.push(l.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function C2(t,e,n){if(e.issues.length&&t.issues.push(...e.issues),n.issues.length&&t.issues.push(...n.issues),Dg(t))return t;const r=fT(e.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return t.value=r.data,t}const jz=Ln("$ZodEnum",(t,e)=>{qo.init(t,e);const n=Qj(e.entries),r=new Set(n);t._zod.values=r,t._zod.pattern=new RegExp(`^(${n.filter(i=>eV.has(typeof i)).map(i=>typeof i=="string"?Lg(i):i.toString()).join("|")})$`),t._zod.parse=(i,o)=>{const l=i.value;return r.has(l)||i.issues.push({code:"invalid_value",values:n,input:l,inst:t}),i}}),Vz=Ln("$ZodLiteral",(t,e)=>{if(qo.init(t,e),e.values.length===0)throw new Error("Cannot create literal schema with no valid values");t._zod.values=new Set(e.values),t._zod.pattern=new RegExp(`^(${e.values.map(n=>typeof n=="string"?Lg(n):n?Lg(n.toString()):String(n)).join("|")})$`),t._zod.parse=(n,r)=>{const i=n.value;return t._zod.values.has(i)||n.issues.push({code:"invalid_value",values:e.values,input:i,inst:t}),n}}),zz=Ln("$ZodTransform",(t,e)=>{qo.init(t,e),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new i2(t.constructor.name);const i=e.transform(n.value,n);if(r.async)return(i instanceof Promise?i:Promise.resolve(i)).then(l=>(n.value=l,n));if(i instanceof Promise)throw new Og;return n.value=i,n}});function R2(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const Hz=Ln("$ZodOptional",(t,e)=>{qo.init(t,e),t._zod.optin="optional",t._zod.optout="optional",wo(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),wo(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${sT(n.source)})?$`):void 0}),t._zod.parse=(n,r)=>{if(e.innerType._zod.optin==="optional"){const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(o=>R2(o,n.value)):R2(i,n.value)}return n.value===void 0?n:e.innerType._zod.run(n,r)}}),Gz=Ln("$ZodNullable",(t,e)=>{qo.init(t,e),wo(t._zod,"optin",()=>e.innerType._zod.optin),wo(t._zod,"optout",()=>e.innerType._zod.optout),wo(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${sT(n.source)}|null)$`):void 0}),wo(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,r)=>n.value===null?n:e.innerType._zod.run(n,r)}),qz=Ln("$ZodDefault",(t,e)=>{qo.init(t,e),t._zod.optin="optional",wo(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);if(n.value===void 0)return n.value=e.defaultValue,n;const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(o=>x2(o,e)):x2(i,e)}});function x2(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const Wz=Ln("$ZodPrefault",(t,e)=>{qo.init(t,e),t._zod.optin="optional",wo(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,r))}),Kz=Ln("$ZodNonOptional",(t,e)=>{qo.init(t,e),wo(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),t._zod.parse=(n,r)=>{const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(o=>N2(o,t)):N2(i,t)}});function N2(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const Yz=Ln("$ZodCatch",(t,e)=>{qo.init(t,e),wo(t._zod,"optin",()=>e.innerType._zod.optin),wo(t._zod,"optout",()=>e.innerType._zod.optout),wo(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(o=>(n.value=o.value,o.issues.length&&(n.value=e.catchValue({...n,error:{issues:o.issues.map(l=>Jh(l,r,Yh()))},input:n.value}),n.issues=[]),n)):(n.value=i.value,i.issues.length&&(n.value=e.catchValue({...n,error:{issues:i.issues.map(o=>Jh(o,r,Yh()))},input:n.value}),n.issues=[]),n)}}),Qz=Ln("$ZodPipe",(t,e)=>{qo.init(t,e),wo(t._zod,"values",()=>e.in._zod.values),wo(t._zod,"optin",()=>e.in._zod.optin),wo(t._zod,"optout",()=>e.out._zod.optout),wo(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(n,r)=>{if(r.direction==="backward"){const o=e.out._zod.run(n,r);return o instanceof Promise?o.then(l=>cb(l,e.in,r)):cb(o,e.in,r)}const i=e.in._zod.run(n,r);return i instanceof Promise?i.then(o=>cb(o,e.out,r)):cb(i,e.out,r)}});function cb(t,e,n){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},n)}const Xz=Ln("$ZodReadonly",(t,e)=>{qo.init(t,e),wo(t._zod,"propValues",()=>e.innerType._zod.propValues),wo(t._zod,"values",()=>e.innerType._zod.values),wo(t._zod,"optin",()=>e.innerType._zod.optin),wo(t._zod,"optout",()=>e.innerType._zod.optout),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(O2):O2(i)}});function O2(t){return t.value=Object.freeze(t.value),t}const Jz=Ln("$ZodCustom",(t,e)=>{vl.init(t,e),qo.init(t,e),t._zod.parse=(n,r)=>n,t._zod.check=n=>{const r=n.value,i=e.fn(r);if(i instanceof Promise)return i.then(o=>L2(o,n,r,t));L2(i,n,r,t)}});function L2(t,e,n,r){if(!t){const i={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(i.params=r._zod.def.params),e.issues.push(hv(i))}}class eH{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const r=n[0];if(this._map.set(e,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const i={...r,...this._map.get(e)};return Object.keys(i).length?i:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function tH(){return new eH}const fb=tH();function nH(t,e){return new t({type:"string",...Pr(e)})}function rH(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...Pr(e)})}function D2(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...Pr(e)})}function iH(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...Pr(e)})}function oH(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Pr(e)})}function sH(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Pr(e)})}function aH(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Pr(e)})}function lH(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...Pr(e)})}function uH(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...Pr(e)})}function cH(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...Pr(e)})}function fH(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...Pr(e)})}function dH(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...Pr(e)})}function hH(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...Pr(e)})}function pH(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...Pr(e)})}function gH(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...Pr(e)})}function mH(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...Pr(e)})}function yH(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...Pr(e)})}function vH(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Pr(e)})}function _H(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Pr(e)})}function bH(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...Pr(e)})}function EH(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...Pr(e)})}function wH(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...Pr(e)})}function TH(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...Pr(e)})}function SH(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Pr(e)})}function AH(t,e){return new t({type:"string",format:"date",check:"string_format",...Pr(e)})}function IH(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...Pr(e)})}function CH(t,e){return new t({type:"string",format:"duration",check:"string_format",...Pr(e)})}function RH(t,e){return new t({type:"number",checks:[],...Pr(e)})}function xH(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...Pr(e)})}function NH(t){return new t({type:"any"})}function OH(t){return new t({type:"unknown"})}function LH(t,e){return new t({type:"never",...Pr(e)})}function P2(t,e){return new _2({check:"less_than",...Pr(e),value:t,inclusive:!1})}function dT(t,e){return new _2({check:"less_than",...Pr(e),value:t,inclusive:!0})}function M2(t,e){return new b2({check:"greater_than",...Pr(e),value:t,inclusive:!1})}function hT(t,e){return new b2({check:"greater_than",...Pr(e),value:t,inclusive:!0})}function k2(t,e){return new WV({check:"multiple_of",...Pr(e),value:t})}function F2(t,e){return new YV({check:"max_length",...Pr(e),maximum:t})}function db(t,e){return new QV({check:"min_length",...Pr(e),minimum:t})}function $2(t,e){return new XV({check:"length_equals",...Pr(e),length:t})}function DH(t,e){return new JV({check:"string_format",format:"regex",...Pr(e),pattern:t})}function PH(t){return new ez({check:"string_format",format:"lowercase",...Pr(t)})}function MH(t){return new tz({check:"string_format",format:"uppercase",...Pr(t)})}function kH(t,e){return new nz({check:"string_format",format:"includes",...Pr(e),includes:t})}function FH(t,e){return new rz({check:"string_format",format:"starts_with",...Pr(e),prefix:t})}function $H(t,e){return new iz({check:"string_format",format:"ends_with",...Pr(e),suffix:t})}function pv(t){return new oz({check:"overwrite",tx:t})}function UH(t){return pv(e=>e.normalize(t))}function BH(){return pv(t=>t.trim())}function ZH(){return pv(t=>t.toLowerCase())}function jH(){return pv(t=>t.toUpperCase())}function VH(t,e,n){return new t({type:"array",element:e,...Pr(n)})}function zH(t,e,n){return new t({type:"custom",check:"custom",fn:e,...Pr(n)})}function HH(t){const e=GH(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(hv(r,n.value,e._zod.def));else{const i=r;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=n.value),i.inst??(i.inst=e),i.continue??(i.continue=!e._zod.def.abort),n.issues.push(hv(i))}},t(n.value,n)));return e}function GH(t,e){const n=new vl({check:"custom",...Pr(e)});return n._zod.check=t,n}const qH=Ln("ZodISODateTime",(t,e)=>{_z.init(t,e),Zo.init(t,e)});function WH(t){return SH(qH,t)}const KH=Ln("ZodISODate",(t,e)=>{bz.init(t,e),Zo.init(t,e)});function YH(t){return AH(KH,t)}const QH=Ln("ZodISOTime",(t,e)=>{Ez.init(t,e),Zo.init(t,e)});function XH(t){return IH(QH,t)}const JH=Ln("ZodISODuration",(t,e)=>{wz.init(t,e),Zo.init(t,e)});function eG(t){return CH(JH,t)}const U2=(t,e)=>{d2.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>fV(t,n)},flatten:{value:n=>cV(t,n)},addIssue:{value:n=>{t.issues.push(n),t.message=JSON.stringify(t.issues,rT,2)}},addIssues:{value:n=>{t.issues.push(...n),t.message=JSON.stringify(t.issues,rT,2)}},isEmpty:{get(){return t.issues.length===0}}})},tG=Ln("ZodError",U2),Cu=Ln("ZodError",U2,{Parent:Error}),nG=lT(Cu),rG=uT(Cu),iG=sb(Cu),oG=ab(Cu),sG=pV(Cu),aG=gV(Cu),lG=mV(Cu),uG=yV(Cu),cG=vV(Cu),fG=_V(Cu),dG=bV(Cu),hG=EV(Cu),is=Ln("ZodType",(t,e)=>(qo.init(t,e),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone(Xh(e,{checks:[...e.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]})),t.clone=(n,r)=>zd(t,n,r),t.brand=()=>t,t.register=((n,r)=>(n.add(t,r),t)),t.parse=(n,r)=>nG(t,n,r,{callee:t.parse}),t.safeParse=(n,r)=>iG(t,n,r),t.parseAsync=async(n,r)=>rG(t,n,r,{callee:t.parseAsync}),t.safeParseAsync=async(n,r)=>oG(t,n,r),t.spa=t.safeParseAsync,t.encode=(n,r)=>sG(t,n,r),t.decode=(n,r)=>aG(t,n,r),t.encodeAsync=async(n,r)=>lG(t,n,r),t.decodeAsync=async(n,r)=>uG(t,n,r),t.safeEncode=(n,r)=>cG(t,n,r),t.safeDecode=(n,r)=>fG(t,n,r),t.safeEncodeAsync=async(n,r)=>dG(t,n,r),t.safeDecodeAsync=async(n,r)=>hG(t,n,r),t.refine=(n,r)=>t.check(iq(n,r)),t.superRefine=n=>t.check(oq(n)),t.overwrite=n=>t.check(pv(n)),t.optional=()=>G2(t),t.nullable=()=>q2(t),t.nullish=()=>G2(q2(t)),t.nonoptional=n=>QG(t,n),t.array=()=>Ps(t),t.or=n=>Vf([t,n]),t.and=n=>jG(t,n),t.transform=n=>K2(t,HG(n)),t.default=n=>WG(t,n),t.prefault=n=>YG(t,n),t.catch=n=>JG(t,n),t.pipe=n=>K2(t,n),t.readonly=()=>nq(t),t.describe=n=>{const r=t.clone();return fb.add(r,{description:n}),r},Object.defineProperty(t,"description",{get(){return fb.get(t)?.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return fb.get(t);const r=t.clone();return fb.add(r,n[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),B2=Ln("_ZodString",(t,e)=>{cT.init(t,e),is.init(t,e);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...r)=>t.check(DH(...r)),t.includes=(...r)=>t.check(kH(...r)),t.startsWith=(...r)=>t.check(FH(...r)),t.endsWith=(...r)=>t.check($H(...r)),t.min=(...r)=>t.check(db(...r)),t.max=(...r)=>t.check(F2(...r)),t.length=(...r)=>t.check($2(...r)),t.nonempty=(...r)=>t.check(db(1,...r)),t.lowercase=r=>t.check(PH(r)),t.uppercase=r=>t.check(MH(r)),t.trim=()=>t.check(BH()),t.normalize=(...r)=>t.check(UH(...r)),t.toLowerCase=()=>t.check(ZH()),t.toUpperCase=()=>t.check(jH())}),pG=Ln("ZodString",(t,e)=>{cT.init(t,e),B2.init(t,e),t.email=n=>t.check(rH(gG,n)),t.url=n=>t.check(lH(mG,n)),t.jwt=n=>t.check(TH(OG,n)),t.emoji=n=>t.check(uH(yG,n)),t.guid=n=>t.check(D2(Z2,n)),t.uuid=n=>t.check(iH(hb,n)),t.uuidv4=n=>t.check(oH(hb,n)),t.uuidv6=n=>t.check(sH(hb,n)),t.uuidv7=n=>t.check(aH(hb,n)),t.nanoid=n=>t.check(cH(vG,n)),t.guid=n=>t.check(D2(Z2,n)),t.cuid=n=>t.check(fH(_G,n)),t.cuid2=n=>t.check(dH(bG,n)),t.ulid=n=>t.check(hH(EG,n)),t.base64=n=>t.check(bH(RG,n)),t.base64url=n=>t.check(EH(xG,n)),t.xid=n=>t.check(pH(wG,n)),t.ksuid=n=>t.check(gH(TG,n)),t.ipv4=n=>t.check(mH(SG,n)),t.ipv6=n=>t.check(yH(AG,n)),t.cidrv4=n=>t.check(vH(IG,n)),t.cidrv6=n=>t.check(_H(CG,n)),t.e164=n=>t.check(wH(NG,n)),t.datetime=n=>t.check(WH(n)),t.date=n=>t.check(YH(n)),t.time=n=>t.check(XH(n)),t.duration=n=>t.check(eG(n))});function ki(t){return nH(pG,t)}const Zo=Ln("ZodStringFormat",(t,e)=>{Do.init(t,e),B2.init(t,e)}),gG=Ln("ZodEmail",(t,e)=>{cz.init(t,e),Zo.init(t,e)}),Z2=Ln("ZodGUID",(t,e)=>{lz.init(t,e),Zo.init(t,e)}),hb=Ln("ZodUUID",(t,e)=>{uz.init(t,e),Zo.init(t,e)}),mG=Ln("ZodURL",(t,e)=>{fz.init(t,e),Zo.init(t,e)}),yG=Ln("ZodEmoji",(t,e)=>{dz.init(t,e),Zo.init(t,e)}),vG=Ln("ZodNanoID",(t,e)=>{hz.init(t,e),Zo.init(t,e)}),_G=Ln("ZodCUID",(t,e)=>{pz.init(t,e),Zo.init(t,e)}),bG=Ln("ZodCUID2",(t,e)=>{gz.init(t,e),Zo.init(t,e)}),EG=Ln("ZodULID",(t,e)=>{mz.init(t,e),Zo.init(t,e)}),wG=Ln("ZodXID",(t,e)=>{yz.init(t,e),Zo.init(t,e)}),TG=Ln("ZodKSUID",(t,e)=>{vz.init(t,e),Zo.init(t,e)}),SG=Ln("ZodIPv4",(t,e)=>{Tz.init(t,e),Zo.init(t,e)}),AG=Ln("ZodIPv6",(t,e)=>{Sz.init(t,e),Zo.init(t,e)}),IG=Ln("ZodCIDRv4",(t,e)=>{Az.init(t,e),Zo.init(t,e)}),CG=Ln("ZodCIDRv6",(t,e)=>{Iz.init(t,e),Zo.init(t,e)}),RG=Ln("ZodBase64",(t,e)=>{Cz.init(t,e),Zo.init(t,e)}),xG=Ln("ZodBase64URL",(t,e)=>{xz.init(t,e),Zo.init(t,e)}),NG=Ln("ZodE164",(t,e)=>{Nz.init(t,e),Zo.init(t,e)}),OG=Ln("ZodJWT",(t,e)=>{Lz.init(t,e),Zo.init(t,e)}),j2=Ln("ZodNumber",(t,e)=>{w2.init(t,e),is.init(t,e),t.gt=(r,i)=>t.check(M2(r,i)),t.gte=(r,i)=>t.check(hT(r,i)),t.min=(r,i)=>t.check(hT(r,i)),t.lt=(r,i)=>t.check(P2(r,i)),t.lte=(r,i)=>t.check(dT(r,i)),t.max=(r,i)=>t.check(dT(r,i)),t.int=r=>t.check(V2(r)),t.safe=r=>t.check(V2(r)),t.positive=r=>t.check(M2(0,r)),t.nonnegative=r=>t.check(hT(0,r)),t.negative=r=>t.check(P2(0,r)),t.nonpositive=r=>t.check(dT(0,r)),t.multipleOf=(r,i)=>t.check(k2(r,i)),t.step=(r,i)=>t.check(k2(r,i)),t.finite=()=>t;const n=t._zod.bag;t.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),t.isFinite=!0,t.format=n.format??null});function Gs(t){return RH(j2,t)}const LG=Ln("ZodNumberFormat",(t,e)=>{Dz.init(t,e),j2.init(t,e)});function V2(t){return xH(LG,t)}const DG=Ln("ZodAny",(t,e)=>{Pz.init(t,e),is.init(t,e)});function PG(){return NH(DG)}const MG=Ln("ZodUnknown",(t,e)=>{Mz.init(t,e),is.init(t,e)});function z2(){return OH(MG)}const kG=Ln("ZodNever",(t,e)=>{kz.init(t,e),is.init(t,e)});function FG(t){return LH(kG,t)}const $G=Ln("ZodArray",(t,e)=>{Fz.init(t,e),is.init(t,e),t.element=e.element,t.min=(n,r)=>t.check(db(n,r)),t.nonempty=n=>t.check(db(1,n)),t.max=(n,r)=>t.check(F2(n,r)),t.length=(n,r)=>t.check($2(n,r)),t.unwrap=()=>t.element});function Ps(t,e){return VH($G,t,e)}const UG=Ln("ZodObject",(t,e)=>{Uz.init(t,e),is.init(t,e),wo(t,"shape",()=>e.shape),t.keyof=()=>pb(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:z2()}),t.loose=()=>t.clone({...t._zod.def,catchall:z2()}),t.strict=()=>t.clone({...t._zod.def,catchall:FG()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>oV(t,n),t.safeExtend=n=>sV(t,n),t.merge=n=>aV(t,n),t.pick=n=>rV(t,n),t.omit=n=>iV(t,n),t.partial=(...n)=>lV(H2,t,n[0]),t.required=(...n)=>uV(W2,t,n[0])});function jf(t,e){const n={type:"object",shape:t??{},...Pr(e)};return new UG(n)}const BG=Ln("ZodUnion",(t,e)=>{Bz.init(t,e),is.init(t,e),t.options=e.options});function Vf(t,e){return new BG({type:"union",options:t,...Pr(e)})}const ZG=Ln("ZodIntersection",(t,e)=>{Zz.init(t,e),is.init(t,e)});function jG(t,e){return new ZG({type:"intersection",left:t,right:e})}const pT=Ln("ZodEnum",(t,e)=>{jz.init(t,e),is.init(t,e),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(r,i)=>{const o={};for(const l of r)if(n.has(l))o[l]=e.entries[l];else throw new Error(`Key ${l} not found in enum`);return new pT({...e,checks:[],...Pr(i),entries:o})},t.exclude=(r,i)=>{const o={...e.entries};for(const l of r)if(n.has(l))delete o[l];else throw new Error(`Key ${l} not found in enum`);return new pT({...e,checks:[],...Pr(i),entries:o})}});function pb(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new pT({type:"enum",entries:n,...Pr(e)})}const VG=Ln("ZodLiteral",(t,e)=>{Vz.init(t,e),is.init(t,e),t.values=new Set(e.values),Object.defineProperty(t,"value",{get(){if(e.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return e.values[0]}})});function _i(t,e){return new VG({type:"literal",values:Array.isArray(t)?t:[t],...Pr(e)})}const zG=Ln("ZodTransform",(t,e)=>{zz.init(t,e),is.init(t,e),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new i2(t.constructor.name);n.addIssue=o=>{if(typeof o=="string")n.issues.push(hv(o,n.value,e));else{const l=o;l.fatal&&(l.continue=!1),l.code??(l.code="custom"),l.input??(l.input=n.value),l.inst??(l.inst=t),n.issues.push(hv(l))}};const i=e.transform(n.value,n);return i instanceof Promise?i.then(o=>(n.value=o,n)):(n.value=i,n)}});function HG(t){return new zG({type:"transform",transform:t})}const H2=Ln("ZodOptional",(t,e)=>{Hz.init(t,e),is.init(t,e),t.unwrap=()=>t._zod.def.innerType});function G2(t){return new H2({type:"optional",innerType:t})}const GG=Ln("ZodNullable",(t,e)=>{Gz.init(t,e),is.init(t,e),t.unwrap=()=>t._zod.def.innerType});function q2(t){return new GG({type:"nullable",innerType:t})}const qG=Ln("ZodDefault",(t,e)=>{qz.init(t,e),is.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function WG(t,e){return new qG({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():u2(e)}})}const KG=Ln("ZodPrefault",(t,e)=>{Wz.init(t,e),is.init(t,e),t.unwrap=()=>t._zod.def.innerType});function YG(t,e){return new KG({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():u2(e)}})}const W2=Ln("ZodNonOptional",(t,e)=>{Kz.init(t,e),is.init(t,e),t.unwrap=()=>t._zod.def.innerType});function QG(t,e){return new W2({type:"nonoptional",innerType:t,...Pr(e)})}const XG=Ln("ZodCatch",(t,e)=>{Yz.init(t,e),is.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function JG(t,e){return new XG({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const eq=Ln("ZodPipe",(t,e)=>{Qz.init(t,e),is.init(t,e),t.in=e.in,t.out=e.out});function K2(t,e){return new eq({type:"pipe",in:t,out:e})}const tq=Ln("ZodReadonly",(t,e)=>{Xz.init(t,e),is.init(t,e),t.unwrap=()=>t._zod.def.innerType});function nq(t){return new tq({type:"readonly",innerType:t})}const rq=Ln("ZodCustom",(t,e)=>{Jz.init(t,e),is.init(t,e)});function iq(t,e={}){return zH(rq,t,e)}function oq(t){return HH(t)}const gb=jf({Agent:Vf([_i("player"),_i("editor")]),AgentVersion:ki(),CompanyID:Gs(),ProfileIDs:Ps(Gs()),TagIDs:Ps(Gs()).optional(),ToolIDs:Ps(Gs()).optional(),UserUUID:ki()}),sq=gb.extend({Action:_i("success"),Method:pb(["password","sso"])}),aq=gb.extend({Action:_i("error")}),lq=gb.extend({Action:_i("display")}),uq=gb.extend({Action:_i("logout")}),cq=jf({Agent:Vf([_i("player"),_i("editor")]),AgentVersion:ki(),CompanyID:Gs(),ProfileIDs:Ps(Gs()),TagIDs:Ps(Gs()).optional(),ToolID:Gs(),UserUUID:ki()}),gT=jf({Agent:_i("player"),AgentVersion:ki(),ChatUUID:ki(),CompanyUUID:ki(),ProfileUUIDs:Ps(ki()),TagUUIDs:Ps(ki()),ToolUUIDs:Ps(ki()),UserUUID:ki()}),fq=gT.extend({Action:_i("new-chat")}),dq=gT.extend({Action:_i("new-user-message")}),hq=gT.extend({Action:_i("new-chatbot-message"),SuggestedContent:jf({GuideUUIDs:Ps(ki()),DocumentUUIDs:Ps(ki())}).optional()}),Hd=jf({Action:ki(),Agent:Vf([_i("player"),_i("editor")]),AgentVersion:ki(),CompanyID:Gs(),Model:Vf([_i("guide"),_i("push"),_i("step"),_i("tooltip"),_i("quicklauncher"),_i("smartlauncher"),_i("validator"),_i("libraryfile")]),ProfileIDs:Ps(Gs()),TagIDs:Ps(Gs()).optional(),ToolID:Gs(),UserUUID:ki()}),pq=Hd.extend({Model:_i("guide"),GuideID:Gs()}),gq=Hd.extend({Model:_i("step"),GuideID:Gs(),StepID:Gs()}),mq=jf({Model:_i("step"),Action:_i("lookup-element"),Agent:Vf([_i("player"),_i("editor")]),AgentVersion:ki(),GuideUUID:ki(),StepUUID:ki(),StepKey:ki(),LookupOutcome:pb(["found","not_found"]),StepElementHash:ki(),CompanyUUID:ki(),ToolUUID:ki(),UserUUID:ki(),ProfileUUIDs:Ps(ki()).optional(),TagUUIDs:Ps(ki()).optional()}),yq=Hd.extend({Model:_i("push"),V3NewsID:ki()}),vq=Hd.extend({Model:_i("quicklauncher"),V3QuickLauncherID:ki()}),_q=Hd.extend({Model:_i("smartlauncher"),V3SmartLauncherID:ki()}),bq=Hd.extend({Model:_i("tooltip"),V3TooltipID:ki()}),Eq=Hd.extend({Model:_i("validator"),V3ValidatorID:ki()}),wq=Hd.extend({Model:_i("libraryfile"),LibraryFileID:Gs()}),gv=jf({CompanyID:Gs(),EmittedAt:ki()}),Tq=gv.extend({Name:_i("login:action"),Payload:Vf([sq,aq,lq,uq])}).or(gv.extend({Name:_i("client:init"),Payload:cq})).or(gv.extend({Name:_i("chatbot:action"),Payload:Vf([fq,dq,hq])})).or(gv.extend({Name:_i("model:action"),Payload:Vf([pq,gq,yq,vq,_q,bq,Eq,wq])})).or(gv.extend({Name:_i("model:action"),Payload:mq})),Sq="2.64.2",Aq=()=>`v${Sq}`;function Iq(t,e){const n=Cq(t);return Tq.parse({CompanyID:e.CompanyID,EmittedAt:t.emittedAt,Name:n.Name,Payload:{Agent:e.Agent,AgentVersion:Aq(),CompanyID:e.CompanyID,ProfileIDs:e.ProfileIDs,TagIDs:e.TagIDs,ToolIDs:e.ToolIDs,UserUUID:e.UserUUID,...n}})}function Cq(t){switch(t.name){case"player-init":return{Name:"client:init",ToolID:t.toolId};case"login:display":return{Name:"login:action",Action:"display"};case"login:success":return{Name:"login:action",Action:"success",Method:t.method};case"login:error":return{Name:"login:action",Action:"error"};case"logout":return{Name:"login:action",Action:"logout"};case"chatbot:init":return{Name:"chatbot:action",Action:"new-chat",ChatUUID:t.chatUuid,CompanyUUID:t.companyUuid,ProfileUUIDs:t.profileUuids,TagUUIDs:t.tagUuids,ToolUUIDs:t.toolUuids};case"chatbot:new-user-message":return{Name:"chatbot:action",Action:"new-user-message",ChatUUID:t.chatUuid,CompanyUUID:t.companyUuid,ProfileUUIDs:t.profileUuids,TagUUIDs:t.tagUuids,ToolUUIDs:t.toolUuids};case"chatbot:response":return{Name:"chatbot:action",Action:"new-chatbot-message",ChatUUID:t.chatUuid,CompanyUUID:t.companyUuid,ProfileUUIDs:t.profileUuids,TagUUIDs:t.tagUuids,ToolUUIDs:t.toolUuids,SuggestedContent:t.suggestedContent?{GuideUUIDs:t.suggestedContent.guideUuids,DocumentUUIDs:t.suggestedContent.documentUuids}:void 0};case"guide:start":return{Name:"model:action",Model:"guide",Action:"start",GuideID:t.guideId,ToolID:t.toolId};case"guide:restart":return{Name:"model:action",Model:"guide",Action:"restart",GuideID:t.guideId,ToolID:t.toolId};case"guide:resume":return{Name:"model:action",Model:"guide",Action:"resume",GuideID:t.guideId,ToolID:t.toolId};case"guide:autoresume":return{Name:"model:action",Model:"guide",Action:"auto-resume",GuideID:t.guideId,ToolID:t.toolId};case"guide:end":return{Name:"model:action",Model:"guide",Action:"end",GuideID:t.guideId,ToolID:t.toolId};case"guide:abort":return{Name:"model:action",Model:"guide",Action:"abort",GuideID:t.guideId,ToolID:t.toolId};case"step:display":return{Name:"model:action",Model:"step",Action:"display",GuideID:t.guideId,ToolID:t.toolId,StepID:t.stepId};case"step:lookup-element":return{Name:"model:action",Model:"step",Action:"lookup-element",GuideUUID:t.guideId,ToolUUID:t.toolId,StepKey:t.stepKey,CompanyUUID:t.companyUuid,StepElementHash:t.stepElementHash,LookupOutcome:t.lookupOutcome,ProfileUUIDs:t.profileUuids,TagUUIDs:t.tagUuids,StepUUID:t.stepId};case"guide:create":return{Name:"model:action",Model:"guide",Action:"create",GuideID:t.guideId,ToolID:t.toolId};case"guide:delete":return{Name:"model:action",Model:"guide",Action:"delete",GuideID:t.guideId,ToolID:t.toolId};case"guide:update":return{Name:"model:action",Model:"guide",Action:"update",GuideID:t.guideId,ToolID:t.toolId};case"guide:publish":return{Name:"model:action",Model:"guide",Action:"publish",GuideID:t.guideId,ToolID:t.toolId};case"guide:preview":return{Name:"model:action",Model:"guide",Action:"preview",GuideID:t.guideId,ToolID:t.toolId};case"step:create":return{Name:"model:action",Model:"step",Action:"create",GuideID:t.guideId,ToolID:t.toolId,StepID:t.stepId};case"step:update":return{Name:"model:action",Model:"step",Action:"update",GuideID:t.guideId,ToolID:t.toolId,StepID:t.stepId};case"step:delete":return{Name:"model:action",Model:"step",Action:"delete",GuideID:t.guideId,ToolID:t.toolId,StepID:t.stepId};case"step:preview":return{Name:"model:action",Model:"step",Action:"preview",GuideID:t.guideId,ToolID:t.toolId,StepID:t.stepId};case"news:autodisplay":return{Name:"model:action",Model:"push",Action:"display",V3NewsID:t.newsId,ToolID:t.toolId};case"news:manualdisplay":return{Name:"model:action",Model:"push",Action:"manual-display",V3NewsID:t.newsId,ToolID:t.toolId};case"offline-news:display":return{Name:"model:action",Model:"push",Action:"offline-display",V3NewsID:t.newsId,ToolID:t.toolId};case"library:display-file":return{Name:"model:action",Model:"libraryfile",Action:"display",LibraryFileID:t.libraryFileId,ToolID:t.toolId};case"smartlauncher:trigger":return{Name:"model:action",Model:"smartlauncher",Action:"trigger",V3SmartLauncherID:t.smartLauncherId,ToolID:t.toolId};case"smartlauncher:create":return{Name:"model:action",Model:"smartlauncher",Action:"create",V3SmartLauncherID:t.smartLauncherId,ToolID:t.toolId};case"smartlauncher:delete":return{Name:"model:action",Model:"smartlauncher",Action:"delete",V3SmartLauncherID:t.smartLauncherId,ToolID:t.toolId};case"smartlauncher:update":return{Name:"model:action",Model:"smartlauncher",Action:"update",V3SmartLauncherID:t.smartLauncherId,ToolID:t.toolId};case"smartlauncher:preview":return{Name:"model:action",Model:"smartlauncher",Action:"preview",V3SmartLauncherID:t.smartLauncherId,ToolID:t.toolId};case"quicklauncher:trigger":return{Name:"model:action",Model:"quicklauncher",Action:"trigger",V3QuickLauncherID:t.quickLauncherId,ToolID:t.toolId};case"quicklauncher:create":return{Name:"model:action",Model:"quicklauncher",Action:"create",V3QuickLauncherID:t.quickLauncherId,ToolID:t.toolId};case"quicklauncher:delete":return{Name:"model:action",Model:"quicklauncher",Action:"delete",V3QuickLauncherID:t.quickLauncherId,ToolID:t.toolId};case"quicklauncher:update":return{Name:"model:action",Model:"quicklauncher",Action:"update",V3QuickLauncherID:t.quickLauncherId,ToolID:t.toolId};case"quicklauncher:preview":return{Name:"model:action",Model:"quicklauncher",Action:"preview",V3QuickLauncherID:t.quickLauncherId,ToolID:t.toolId};case"informator:click":return{Name:"model:action",Model:"tooltip",Action:"click",V3TooltipID:t.tooltipId,ToolID:t.toolId};case"informator:create":return{Name:"model:action",Model:"tooltip",Action:"create",V3TooltipID:t.tooltipId,ToolID:t.toolId};case"informator:delete":return{Name:"model:action",Model:"tooltip",Action:"delete",V3TooltipID:t.tooltipId,ToolID:t.toolId};case"informator:preview":return{Name:"model:action",Model:"tooltip",Action:"preview",V3TooltipID:t.tooltipId,ToolID:t.toolId};case"informator:update":return{Name:"model:action",Model:"tooltip",Action:"update",V3TooltipID:t.tooltipId,ToolID:t.toolId};case"informator:hover":return{Name:"model:action",Model:"tooltip",Action:"hover",V3TooltipID:t.tooltipId,ToolID:t.toolId};case"informator:change-target":return{Name:"model:action",Model:"tooltip",Action:"change-target",V3TooltipID:t.tooltipId,ToolID:t.toolId};case"informator:hover-target":return{Name:"model:action",Model:"tooltip",Action:"hover-target",V3TooltipID:t.tooltipId,ToolID:t.toolId};case"informator:focus-target":return{Name:"model:action",Model:"tooltip",Action:"focus-target",V3TooltipID:t.tooltipId,ToolID:t.toolId};case"validator:trigger":return{Name:"model:action",Model:"validator",Action:"trigger",V3ValidatorID:t.validatorId,ToolID:t.toolId};case"validator:create":return{Name:"model:action",Model:"validator",Action:"create",V3ValidatorID:t.validatorId,ToolID:t.toolId};case"validator:delete":return{Name:"model:action",Model:"validator",Action:"delete",V3ValidatorID:t.validatorId,ToolID:t.toolId};case"validator:update":return{Name:"model:action",Model:"validator",Action:"update",V3ValidatorID:t.validatorId,ToolID:t.toolId};case"validator:preview":return{Name:"model:action",Model:"validator",Action:"preview",V3ValidatorID:t.validatorId,ToolID:t.toolId};default:throw new Error("Unknown event")}}function Rq({flushIntervalMs:t,maxRetries:e,maxFlushIntervalMs:n}){const r=xe.useRef(0),i=xe.useRef(!1),o=xe.useRef(t),l=xe.useCallback(()=>{r.current+=1,r.current>=e&&(i.current=!0),o.current=Math.min(o.current*2,n)},[n,e]);return{reset:xe.useCallback(()=>{o.current=t,r.current=0},[t]),increase:l,delayBeforeNextAttemptRef:o,attemptNumberRef:r,maxRetriesReachedRef:i}}async function mb(t){return new Promise(e=>setTimeout(e,t))}function mT({enabled:t,postFn:e,onPost:n,onError:r,flushIntervalMs:i=1e3,maxFlushIntervalMs:o=6e4,maxRetries:l=10,maxBufferSize:c=200}){const f=xe.useRef([]),g=xe.useCallback(v=>{f.current.length>=c&&f.current.shift(),f.current.push(v)},[c]),{reset:y,increase:h,maxRetriesReachedRef:p,delayBeforeNextAttemptRef:E,attemptNumberRef:A}=Rq({maxRetries:l,maxFlushIntervalMs:o,flushIntervalMs:i}),_=xe.useRef(t);xe.useEffect(()=>{_.current=t},[t]);const I=xe.useRef(!1),C=xe.useCallback(async()=>{for(;_.current&&!p.current;){if(f.current.length===0){y(),await mb(E.current);continue}const v=f.current.splice(0);try{await e(v),n?.(v),y(),await mb(E.current)}catch(T){if(f.current=[...v,...f.current],h(),Re.trace(T,`Error while posting batch events (attempt ${A.current})`),p.current){r?.(T);break}await mb(E.current)}}I.current=!1},[e,n,r,y,h,p,A,E]);return xe.useEffect(()=>{t&&!I.current&&(I.current=!0,C())},[t,C]),{push:g}}function xq(){const{isAuthenticated:t,impersonatorUuid:e,userUuid:n}=ms(),{data:r}=Jy(),{offlineInitData:i}=B1(),o=r?.stats.ingressToken??i?.stats.ingressToken??null,l=xe.useMemo(()=>{const p=e??n;if(!(o===null||r===void 0||!t||p==null))return{Agent:"player",token:r.stats.ingressToken,UserUUID:p,ProfileIDs:r.player.profile_ids,ToolIDs:r.player.tools.map(E=>E.id),CompanyID:r.player.company.legacy_id,TagIDs:r.player.tag_attribute_ids}},[o,r,t,e,n]),c=xe.useCallback(async p=>{if(l==null)return;const E=p.reduce((_,I)=>{try{const C=Iq(I,l);return _.push(C),_}catch(C){return Re.error(C,"Failed to create LemonStatsEvent from event",I),_}},[]),A=await Dd(`${Ii("LEMONSTATS_URL")}/api/v1/events`,{method:"POST",headers:{"Content-Type":"application/x-ndjson",Authorization:`Bearer ${l.token}`},body:E.map(_=>JSON.stringify(_)).join(`
`)});if(A.status!==204)throw new Error(`Unexpected status code ${A.status} while sending events`)},[l]),f=xe.useCallback(p=>{Re.trace(`Successfully sent ${p.length} events to LemonStats`)},[]),g=xe.useCallback(p=>{Re.error(p,"Error sending events to LemonStats")},[]),{push:y}=mT({enabled:l!=null,postFn:c,onPost:f,onError:g}),h=xe.useCallback(async p=>{y(p)},[y]);return xe.useMemo(()=>({sendEvent:h}),[h])}const Nq={contextActivities:{category:[{id:"http://www.cornerstoneondemand.com/xapi/lms/transcript_display"}]}},yT={id:"http://id.tincanapi.com/verb/viewed",display:{"en-US":"viewed"}},vT={id:"http://adlnet.gov/expapi/verbs/initialized",display:{"en-US":"initialized"}},Oq={id:"http://adlnet.gov/expapi/verbs/failed",display:{"en-US":"failed"}},Y2={id:"http://adlnet.gov/expapi/verbs/exited",display:{"en-US":"exited"}},Q2={id:"http://adlnet.gov/expapi/verbs/completed",display:{"en-US":"completed"}},ra={id:"http://adlnet.gov/expapi/verbs/experienced",display:{"en-US":"experienced"}},ia=[];for(let t=0;t<256;++t)ia.push((t+256).toString(16).slice(1));function Lq(t,e=0){return(ia[t[e+0]]+ia[t[e+1]]+ia[t[e+2]]+ia[t[e+3]]+"-"+ia[t[e+4]]+ia[t[e+5]]+"-"+ia[t[e+6]]+ia[t[e+7]]+"-"+ia[t[e+8]]+ia[t[e+9]]+"-"+ia[t[e+10]]+ia[t[e+11]]+ia[t[e+12]]+ia[t[e+13]]+ia[t[e+14]]+ia[t[e+15]]).toLowerCase()}let _T;const Dq=new Uint8Array(16);function Pq(){if(!_T){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");_T=crypto.getRandomValues.bind(crypto)}return _T(Dq)}const X2={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function mv(t,e,n){if(X2.randomUUID&&!t)return X2.randomUUID();t=t||{};const r=t.random||(t.rng||Pq)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Lq(r)}function Mq(){const{data:t}=Jy(),e=t?.player.global_variables.user_email,n=xe.useCallback(r=>{if(e===void 0)throw new Error("The user email hasn't been initialized (in userScope). You should call this function after the user has been authenticated.");return{id:mv(),actor:{objectType:"Agent",mbox:`mailto:${e}`},verb:J2(r),object:{objectType:"Activity",id:kq(r),definition:{name:$q(r),type:Fq(r)}},context:Uq(r)}},[e]);return xe.useMemo(()=>({createXApiEvent:n}),[n])}function J2(t){switch(t.name){case"login:display":return vT;case"login:success":return ra;case"login:error":return Oq;case"logout":return Y2;case"player-init":return vT;case"chatbot:init":return vT;case"chatbot:new-user-message":return ra;case"chatbot:response":return ra;case"guide:start":return ra;case"guide:restart":return ra;case"guide:resume":return ra;case"guide:autoresume":return ra;case"guide:end":return Q2;case"guide:abort":return Y2;case"step:display":return yT;case"news:autodisplay":return ra;case"news:manualdisplay":return ra;case"offline-news:display":return ra;case"smartlauncher:trigger":return ra;case"quicklauncher:trigger":return ra;case"validator:trigger":return yT;case"informator:click":return ra;case"informator:hover":return ra;case"informator:change-target":return ra;case"informator:hover-target":return ra;case"informator:focus-target":return ra;case"library:display-file":return yT;default:throw new Error("Not a supported event for Cornerstone")}}function kq(t){switch(t.name){case"login:display":case"login:success":case"login:error":case"logout":case"player-init":return"http://xapi.lemonlearning.com/player";case"chatbot:init":case"chatbot:new-user-message":case"chatbot:response":return`http://xapi.lemonlearning.com/chatbot/${t.chatUuid}`;case"guide:start":case"guide:restart":case"guide:resume":case"guide:autoresume":case"guide:end":case"guide:abort":return`http://xapi.lemonlearning.com/guide/${t.guideId}`;case"step:display":return`http://xapi.lemonlearning.com/step/${t.stepId}`;case"news:autodisplay":case"news:manualdisplay":return`http://xapi.lemonlearning.com/news/${t.newsId}`;case"offline-news:display":return`http://xapi.lemonlearning.com/offline-news/${t.newsId}`;case"smartlauncher:trigger":return`http://xapi.lemonlearning.com/smart-launcher/${t.smartLauncherId}`;case"quicklauncher:trigger":return`http://xapi.lemonlearning.com/quick-launcher/${t.quickLauncherId}`;case"validator:trigger":return`http://xapi.lemonlearning.com/validator/${t.validatorId}`;case"informator:click":case"informator:hover":case"informator:change-target":case"informator:hover-target":case"informator:focus-target":return`http://xapi.lemonlearning.com/informator/${t.tooltipId}`;case"library:display-file":return`http://xapi.lemonlearning.com/library-file/${t.libraryFileId}`;default:throw new Error("Not a supported event for Cornerstone")}}function Fq(t){switch(t.name){case"login:display":case"login:success":case"login:error":case"logout":case"player-init":return"http://activitystrea.ms/schema/1.0/application";case"chatbot:init":case"chatbot:new-user-message":case"chatbot:response":return"http://id.tincanapi.com/activitytype/chat-message";case"guide:start":case"guide:restart":case"guide:resume":case"guide:autoresume":case"guide:end":case"guide:abort":return"http://id.tincanapi.com/activitytype/resource";case"step:display":return"http://id.tincanapi.com/activitytype/step";case"news:autodisplay":case"news:manualdisplay":case"offline-news:display":return"http://activitystrea.ms/schema/1.0/article";case"smartlauncher:trigger":case"quicklauncher:trigger":return"http://adlnet.gov/expapi/activities/link";case"validator:trigger":return"http://activitystrea.ms/schema/1.0/comment";case"informator:click":case"informator:hover":case"informator:change-target":case"informator:hover-target":case"informator:focus-target":return"http://activitystrea.ms/schema/1.0/note";case"library:display-file":return"http://activitystrea.ms/schema/1.0/file";default:throw new Error("Not a supported event for Cornerstone")}}function $q(t){switch(t.name){case"login:display":case"login:success":case"login:error":case"logout":case"player-init":return{"en-US":"login"};case"chatbot:init":case"chatbot:new-user-message":case"chatbot:response":return{"en-US":"chatbot"};case"guide:start":case"guide:restart":case"guide:resume":case"guide:autoresume":case"guide:end":case"guide:abort":case"step:display":return t.guideName;case"news:autodisplay":case"news:manualdisplay":case"offline-news:display":return{"en-US":"news"};case"smartlauncher:trigger":return{"en-US":"smartlauncher"};case"quicklauncher:trigger":return{"en-US":"quicklauncher"};case"validator:trigger":return{"en-US":"validator"};case"informator:click":case"informator:hover":case"informator:change-target":case"informator:hover-target":case"informator:focus-target":return{"en-US":"informator"};case"library:display-file":return{"en-US":"library"};default:throw new Error("Not a supported event for Cornerstone")}}function Uq(t){if(J2(t)===Q2)return Nq}function Bq(){const t=Za(),e=za(),n=xe.useRef(null),r=xe.useRef(new Date),i=xe.useRef(null),o=xe.useCallback(async()=>{if(n.current!==null&&!l(r.current))return n.current;if(i.current!==null)return i.current;if(e?.id==null)throw new Error("No active project found, cannot get access token for xAPI provider");return i.current=(async()=>{const c=await t(`${Ii("API_URL")}/v3/project/${e.id}/xapi/login`,{method:"POST"});return n.current=c.body.access_token,r.current=new Date(Date.now()+c.body.expires_in*1e3),i.current=null,n.current})(),i.current},[t,e?.id]);function l(c){return c.getTime()-Date.now()<=2e3}return o}var Pg;(function(t){t[t.CONTINUE=100]="CONTINUE",t[t.SWITCHING_PROTOCOLS=101]="SWITCHING_PROTOCOLS",t[t.PROCESSING=102]="PROCESSING",t[t.EARLY_HINTS=103]="EARLY_HINTS",t[t.OK=200]="OK",t[t.CREATED=201]="CREATED",t[t.ACCEPTED=202]="ACCEPTED",t[t.NON_AUTHORITATIVE_INFORMATION=203]="NON_AUTHORITATIVE_INFORMATION",t[t.NO_CONTENT=204]="NO_CONTENT",t[t.RESET_CONTENT=205]="RESET_CONTENT",t[t.PARTIAL_CONTENT=206]="PARTIAL_CONTENT",t[t.MULTI_STATUS=207]="MULTI_STATUS",t[t.MULTIPLE_CHOICES=300]="MULTIPLE_CHOICES",t[t.MOVED_PERMANENTLY=301]="MOVED_PERMANENTLY",t[t.MOVED_TEMPORARILY=302]="MOVED_TEMPORARILY",t[t.SEE_OTHER=303]="SEE_OTHER",t[t.NOT_MODIFIED=304]="NOT_MODIFIED",t[t.USE_PROXY=305]="USE_PROXY",t[t.TEMPORARY_REDIRECT=307]="TEMPORARY_REDIRECT",t[t.PERMANENT_REDIRECT=308]="PERMANENT_REDIRECT",t[t.BAD_REQUEST=400]="BAD_REQUEST",t[t.UNAUTHORIZED=401]="UNAUTHORIZED",t[t.PAYMENT_REQUIRED=402]="PAYMENT_REQUIRED",t[t.FORBIDDEN=403]="FORBIDDEN",t[t.NOT_FOUND=404]="NOT_FOUND",t[t.METHOD_NOT_ALLOWED=405]="METHOD_NOT_ALLOWED",t[t.NOT_ACCEPTABLE=406]="NOT_ACCEPTABLE",t[t.PROXY_AUTHENTICATION_REQUIRED=407]="PROXY_AUTHENTICATION_REQUIRED",t[t.REQUEST_TIMEOUT=408]="REQUEST_TIMEOUT",t[t.CONFLICT=409]="CONFLICT",t[t.GONE=410]="GONE",t[t.LENGTH_REQUIRED=411]="LENGTH_REQUIRED",t[t.PRECONDITION_FAILED=412]="PRECONDITION_FAILED",t[t.REQUEST_TOO_LONG=413]="REQUEST_TOO_LONG",t[t.REQUEST_URI_TOO_LONG=414]="REQUEST_URI_TOO_LONG",t[t.UNSUPPORTED_MEDIA_TYPE=415]="UNSUPPORTED_MEDIA_TYPE",t[t.REQUESTED_RANGE_NOT_SATISFIABLE=416]="REQUESTED_RANGE_NOT_SATISFIABLE",t[t.EXPECTATION_FAILED=417]="EXPECTATION_FAILED",t[t.IM_A_TEAPOT=418]="IM_A_TEAPOT",t[t.INSUFFICIENT_SPACE_ON_RESOURCE=419]="INSUFFICIENT_SPACE_ON_RESOURCE",t[t.METHOD_FAILURE=420]="METHOD_FAILURE",t[t.MISDIRECTED_REQUEST=421]="MISDIRECTED_REQUEST",t[t.UNPROCESSABLE_ENTITY=422]="UNPROCESSABLE_ENTITY",t[t.LOCKED=423]="LOCKED",t[t.FAILED_DEPENDENCY=424]="FAILED_DEPENDENCY",t[t.UPGRADE_REQUIRED=426]="UPGRADE_REQUIRED",t[t.PRECONDITION_REQUIRED=428]="PRECONDITION_REQUIRED",t[t.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",t[t.REQUEST_HEADER_FIELDS_TOO_LARGE=431]="REQUEST_HEADER_FIELDS_TOO_LARGE",t[t.UNAVAILABLE_FOR_LEGAL_REASONS=451]="UNAVAILABLE_FOR_LEGAL_REASONS",t[t.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",t[t.NOT_IMPLEMENTED=501]="NOT_IMPLEMENTED",t[t.BAD_GATEWAY=502]="BAD_GATEWAY",t[t.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",t[t.GATEWAY_TIMEOUT=504]="GATEWAY_TIMEOUT",t[t.HTTP_VERSION_NOT_SUPPORTED=505]="HTTP_VERSION_NOT_SUPPORTED",t[t.INSUFFICIENT_STORAGE=507]="INSUFFICIENT_STORAGE",t[t.NETWORK_AUTHENTICATION_REQUIRED=511]="NETWORK_AUTHENTICATION_REQUIRED"})(Pg||(Pg={}));function Zq(t){const e=new TextEncoder().encode(t),n=Array.from(e,r=>String.fromCodePoint(r)).join("");return btoa(n)}function jq(){const t=Bq(),e=za(),n=xe.useCallback(async()=>{const i=e?.config.xapi;if(!i?.enabled)throw new Error("Cannot get Authorization header for xAPI request: xAPI is not enabled");return i.provider!=="none"?`Bearer ${await t()}`:i.auth.mode==="bearer_token"?`Bearer ${i.auth.token}`:`Basic ${Zq(`${i.auth.username}:${i.auth.password}`)}`},[e,t]);return{postXApiEvents:xe.useCallback(async i=>{const o=e?.config.xapi;if(!o?.enabled)throw new Error("Cannot post xAPI events: xAPI is not enabled");const l=`${o.url.replace(/\/+$/,"")}/${(o.statement_uri??"").replace(/^\/+/,"")}`,c=await Dd(l,{method:"POST",headers:{Authorization:await n()},body:JSON.stringify(i)});if(c.status!==Pg.OK)throw new Error(`Failed to send events to the XAPI server. Detail: ${JSON.stringify(c.body)}`)},[e?.config.xapi,n])}}function Vq(){const{createXApiEvent:t}=Mq(),{postXApiEvents:e}=jq(),n=za(),{data:r}=Jy(),i=r?.player.global_variables.user_email,o=xe.useCallback(async y=>{if(n?.config.xapi===void 0||!n.config.xapi.enabled||i===void 0||y.length===0)return;const h=y.reduce((p,E)=>{try{const A=t(E);p.push(A)}catch(A){Re.error(A,"Error creating xAPI event")}return p},[]);await e(h)},[n,t,e,i]),l=xe.useCallback(y=>{Re.trace(`Successfully sent ${y.length} events to XApi Server`)},[]),c=xe.useCallback(y=>{Re.error(y,"Error sending events to XApi Server")},[]),{push:f}=mT({enabled:n?.config.xapi!==void 0&&n.config.xapi.enabled&&i!==void 0,postFn:o,onPost:l,onError:c}),g=xe.useCallback(async y=>{f(y)},[f]);return xe.useMemo(()=>({sendEvent:g}),[g])}const zq=({children:t})=>{const e=xq(),n=Vq();return pe.jsx(Yj,{onEvent:r=>{e.sendEvent(r),n.sendEvent(r)},children:t})},Hq=()=>{const{config:t}=zs(),{isAuthenticated:e}=ms(),[n,r]=xe.useState(!1),i=xe.useRef(e);return xe.useEffect(()=>{const o=i.current;if(i.current=e,!o&&e){Re.debug("The user has just authenticated, leaving the player open state as it is");return}r(l=>{if(l)return Re.debug("Player is currently open, leaving the open state as it is"),!0;if(t.open!=null){const c=typeof t.open=="function"?t.open(t):!!t.open;return Re.debug(`Player open state is controlled by the configuration : ${c?"open":"closed"}`),c}return Re.debug(`Player open state is controlled by the authentication state : ${e?"user is logged in, closing the player":"user is not logged it, opening the player"}`),!e})},[t,e]),[n,r]},eL=Vs.createContext(void 0),Gq=({children:t})=>{const[e,n]=Hq(),r=xe.useCallback(()=>{n(!1)},[n]),i=xe.useCallback(()=>{n(!0)},[n]);xe.useEffect(()=>(no.on("close-player",r),no.on("open-player",i),()=>{no.removeListener("close-player",r),no.removeListener("open-player",i)}),[r,i]);const o=xe.useMemo(()=>({playerPopInIsOpen:e,closePlayerPopIn:r,openPlayerPopIn:i,setPlayerPopInIsOpen:n}),[e,r,i,n]);return pe.jsx(eL.Provider,{value:o,children:t})},yb=()=>{const t=Vs.useContext(eL);if(t===void 0)throw new Error("usePlayerPopInOpen must be used within a PlayerPopInOpenContext");return t},tL=xe.createContext({popups:[],addPopup:()=>{},removePopup:()=>{}}),qq=({children:t})=>{const[e,n]=xe.useState([]),r=xe.useCallback(o=>{const l={isAlert:!1,confirmTitle:"Ok",cancelTitle:"Annuler",onConfirm:()=>{},onCancel:()=>{}};n(c=>[...c,{...l,...o}])},[]),i=xe.useCallback(o=>{n(l=>l.filter(c=>c.key!==o))},[]);return pe.jsx(tL.Provider,{value:{popups:e,addPopup:r,removePopup:i},children:t})},vb=()=>xe.useContext(tL),_b="ll-tour-status",Wq=async t=>{if(ts()){await Ki.setItem(`local:${_b}`,t);return}await i0(_b,JSON.stringify(t))},Kq=async()=>{const t={currentTourStatus:null,tourStatusHistory:{}};if(ts())try{const n=await Ki.getItem(`local:${_b}`);return n??t}catch(n){return Re.warn(n,"An error has occurred while trying to get the saved tour status from the local storage, returning empty data"),t}const e=await o0(_b);return JSON.parse(e)},nL=xe.createContext(void 0);function rL(){const t=Vs.useContext(nL);if(t===void 0)throw new Error("useCurrentBrowserTab must be used within a CurrentBrowserTabProvider");return t}function Yq({children:t}){const[e,n]=xe.useState(null),[r,i]=xe.useState(!0);xe.useEffect(()=>{l();async function l(){try{const c=await Qq();n(c)}catch(c){Re.warn(`Failed while getting current tab info: "${c.message}"`)}finally{i(!1)}}},[]);const o=xe.useMemo(()=>({currentTab:e}),[e]);return r?null:pe.jsx(nL.Provider,{value:o,children:t})}async function Qq(){if(!ts())throw new Error("The current browser tab can only be queried from a web extension");const t=await Ul.runtime.sendMessage({action:"QUERY_CURRENT_TAB"});if(Xq(t),"error"in t)throw new Error(t.error);return t}function Xq(t){if(typeof t!="object")throw new Error(`Invalid response while querying current tab, received type "${typeof t}" instead of "object"`);if(t==null)throw new Error('Invalid response while querying current tab, received empty response instead of "object"');return!0}const iL=xe.createContext({currentTourStatusRef:{current:null},historyRef:{current:{}},forgetCurrentTourStatus:()=>{},setCurrentTourStatus:()=>{},removeTourStatus:()=>{},addTourStatus:()=>{}}),Jq=({children:t})=>{const e=Vs.useRef(null),n=Vs.useRef({}),[r,i]=Vs.useState(!1),o=xe.useCallback(async()=>{try{const{currentTourStatus:p,tourStatusHistory:E}=await Kq();e.current=p,n.current=E,Re.debug({currentTourStatus:p,tourStatusHistory:E},"Hydrating the tour status history from the cache")}catch(p){Re.warn(p,"An error occurred while hydrating the tour status history, leaving it empty. Pending guides will not be resumed.")}finally{i(!0)}},[]);xe.useEffect(()=>{o()},[o]);const l=()=>{Wq({currentTourStatus:e.current,tourStatusHistory:n.current}).catch(p=>{Re.warn(p,"An error has occurred while saving the tour status history in storage")})},{currentTab:c}=rL(),f=xe.useCallback(p=>{e.current={...p,currentTabId:c?.id},Re.trace("Setting the current tour status",{tourStatus:p}),l()},[c?.id]),g=xe.useCallback(()=>{e.current=null,Re.trace("Removing the current tour status"),l()},[]),y=xe.useCallback(p=>{const E=n.current;Object.hasOwnProperty.call(E,p)&&(delete E[p],Re.trace("Removing a tour status",{guideId:p})),l()},[]),h=xe.useCallback(p=>{const E=n.current;if(typeof p.guideId=="number"){const _=nW({...E,[p.guideId]:p}).slice(-5);n.current=tW(_),Re.trace("Adding a new tour status to the history",{tourStatus:p}),l()}},[]);return r?pe.jsx(iL.Provider,{value:{currentTourStatusRef:e,historyRef:n,forgetCurrentTourStatus:g,removeTourStatus:y,addTourStatus:h,setCurrentTourStatus:f},children:t}):null},bT=()=>{const{currentTourStatusRef:t,historyRef:e,forgetCurrentTourStatus:n,removeTourStatus:r,setCurrentTourStatus:i,addTourStatus:o}=xe.useContext(iL);return{history:xe.useMemo(()=>({delete:r,add:o,all:()=>e.current}),[r,o,e]),currentTourStatusRef:t,forgetCurrentTourStatus:n,setCurrentTourStatus:i}};function eW(t){return Object.values(t)}function tW(t){return t.reduce((e,n)=>(n.guideId!=null&&(e[n.guideId]=n),e),{})}function nW(t){return eW(t).sort((r,i)=>{const o=r.interruptedOnTimestamp!=null?new Date(r.interruptedOnTimestamp):new Date,l=i.interruptedOnTimestamp!=null?new Date(i.interruptedOnTimestamp):new Date;return o.getTime()-l.getTime()})}function rW(t,e){const n=xe.useRef(window.location.pathname),r=xe.useRef(null),i=xe.useCallback(()=>{n.current!==window.location.pathname&&(t({oldPath:n.current,newPath:window.location.pathname}),n.current=window.location.pathname)},[t]),o=xe.useCallback(()=>{r.current=window.setInterval(()=>{i()},100)},[i]),l=xe.useCallback(()=>{r.current!==null&&window.clearInterval(r.current)},[]);xe.useEffect(()=>(e&&o(),l),[e,o,l])}function iW(){const t=M1(),{setHost:e}=zs(),n=t.includes("ff:player-spa-refresh"),r=xe.useCallback(({oldPath:i,newPath:o})=>{Re.info(`Updating host due to a url path change. Old URL: "${i}". New URL: "${o}"`),e(window.location.href)},[e]);rW(r,n)}class oW{constructor(e){const{currentHost:n,hosts:r,ignorePathOnIncluded:i}=e;this.currentHost=this.removeProtocol(n),this.hosts=r==="*"?"*":r.map(o=>({...o,name:this.removeProtocol(o.name)})),this.ignorePathOnIncluded=i??!1}isRespected(){if(this.hosts==="*")return!0;const e=this.hosts.find(i=>this.currentHost.includes(i.name)&&i.exclude);if(e!=null)return Re.warn(`The current host match the host ${e.name} which is excluded`),!1;if(this.hosts.some(i=>{const o=this.ignorePathOnIncluded?i.name.split("/")[0]:i.name;return this.currentHost.includes(o)}))return!0;const n=this.hosts.length===0;let r="";return n?r=`
                  The included hosts' list is empty. It may mean one of the following things :
                    1. Your connected user is not active (doesn't have a license)
                    2. The hosts list is still in cache and has not been updated yet (try forcing logout and login again)
                    3. You have no tools configured in your project (the one associated to your connected user)
                  `:r=`The current host "${this.currentHost}" does not match one of the included ones. Included ones are : ${this.hosts.map(i=>i.name).join(", ")}`,Re.warn(r),!1}removeProtocol(e){return e.replace(/^https?:\/\//,"")}}const oL=({children:t})=>{const{config:{hosts:e,host:n}}=zs();iW();const r=e===void 0||new oW({hosts:e,currentHost:n}).isRespected();return xe.useEffect(()=>{e===void 0?Re.info("No hosts provided in the configuration. The player will render on this host",{host:n}):r?Re.info(`The current host "${n}" matches one or more hosts in the configuration. Continuing to render the player.`,{hosts:e,currentHost:n}):Re.info("The current host doesn't match any hosts in the configuration. The player will not render.",{hosts:e,currentHost:n})},[r,e,n]),r?pe.jsx(pe.Fragment,{children:t}):null};oL.displayName="HostMatchingGateway";function sW(){xe.useEffect(()=>((async()=>{if(!("FontFace"in window)){Re.warn("FontFace API not supported, aborting the fonts download");return}const e=[new FontFace("Albert Sans","url(https://fonts.gstatic.com/s/albertsans/v3/i7dOIFdwYjGaAMFtZd_QA1ZbYFeQGQyU.woff2)",{style:"normal",weight:"100 900",display:"swap"}),new FontFace("Albert Sans","url(https://fonts.gstatic.com/s/albertsans/v3/i7dMIFdwYjGaAMFtZd_QA1ZeUFWaHi6WZ3Q.woff2)",{style:"italic",weight:"100 900",display:"swap"})];try{(await Promise.all(e.map(async r=>r.load()))).forEach(r=>{document.fonts.add(r)})}catch(n){Re.error("Error loading fonts:",n)}})(),()=>{document.fonts.forEach(e=>{e.family==="Albert Sans"&&document.fonts.delete(e)})}),[])}function aW({fallback:t,children:e}){const{isAuthenticated:n}=ms();return n?e:t}const sL={player:"_player_w2jnn_1",shrink:"_shrink_w2jnn_34"},bb=410,Eb=300;function aL({launcher:t,launcherZoneAndRatio:e,children:n}){const{theme:r}=Kc(),[i,o]=Vs.useState({x:document.body.clientWidth-(Eb+r.launcherWidth),y:window.innerHeight-(bb+r.launcherWidth)}),{playerPopInIsOpen:l}=yb(),[c,f]=Vs.useState({transitioning:!l,show:l}),g=xe.useRef(l);xe.useEffect(()=>{function p(){l&&no.trigger("close-player")}return window.addEventListener("resize",p),()=>{window.removeEventListener("resize",p)}},[l]);const y=xe.useCallback(()=>{if(t.current===null)return;const{x:p,y:E}=lW(t.current,e.zone,r);o({x:p,y:E})},[t,e.zone,r]);if(xe.useEffect(()=>{setTimeout(()=>{y()},300)},[y]),xe.useEffect(()=>{const p=[];return!g.current&&l?(p.push(setTimeout(()=>{f(E=>({...E,show:!0}))},175)),p.push(setTimeout(()=>{f(E=>({...E,transitioning:!1}))},200)),y()):g.current&&!l&&(f(E=>({...E,transitioning:!0})),p.push(setTimeout(()=>{f(E=>({...E,show:!1}))},75))),g.current=l,()=>{for(;p.length>0;)clearTimeout(p.pop())}},[l,y]),!c.show)return null;const h={top:i.y,left:i.x};return pe.jsx("div",{id:sL.player,className:c.transitioning?sL.shrink:"",style:h,children:n})}function lW(t,e,n){const r=t.getBoundingClientRect(),i={height:r.height,width:r.width,left:r.left,right:r.right,bottom:r.bottom,top:r.top,x:r.left,y:r.top};let o=window.innerHeight-i.height-bb,l=i.height,c=window.innerWidth-i.width-Eb,f=i.width;n.shape==="round"&&(l+=40,o-=40,f+=40,c-=40);let[g,y]=[i.x,i.y];e===1||e===3?(g+=i.width/2-Eb/2,i.left<window.innerWidth/4?f=.05*window.innerWidth:i.left>window.innerWidth/4&&(c=window.innerWidth-window.innerWidth*.2-Eb/2)):(e===2||e===4)&&(y+=i.height/2-bb/2,i.top>window.innerHeight/4?o=window.innerHeight-window.innerHeight*.2-bb/2:i.top<window.innerHeight/4&&(l=.05*window.innerHeight));const h=Math.min(Math.max(l,y),o);return{x:Math.min(Math.max(f,g),c),y:h}}var wb={exports:{}},uW=wb.exports,lL;function cW(){return lL||(lL=1,(function(t,e){(function(n,r){t.exports=r()})(uW,function(){var n={grid:0,filterTarget:null,limit:{x:null,y:null},threshold:0,setCursor:!1,setPosition:!0,smoothDrag:!0,useGPU:!0,onDrag:y,onDragStart:y,onDragEnd:y},r={transform:(function(){for(var h=" -o- -ms- -moz- -webkit-".split(" "),p=document.body.style,E=h.length;E--;){var A=h[E]+"transform";if(A in p)return A}})()},i={assign:function(){for(var h=arguments[0],p=arguments.length,E=1;E<p;E++){var A=arguments[E];for(var _ in A)h[_]=A[_]}return h},bind:function(h,p){return function(){h.apply(p,arguments)}},on:function(h,p,E){if(p&&E)i.addEvent(h,p,E);else if(p)for(var A in p)i.addEvent(h,A,p[A])},off:function(h,p,E){if(p&&E)i.removeEvent(h,p,E);else if(p)for(var A in p)i.removeEvent(h,A,p[A])},limit:function(h,p){return p instanceof Array?h<(p=[+p[0],+p[1]])[0]?h=p[0]:h>p[1]&&(h=p[1]):h=+p,h},addEvent:"attachEvent"in Element.prototype?function(h,p,E){h.attachEvent("on"+p,E)}:function(h,p,E){h.addEventListener(p,E,!1)},removeEvent:"attachEvent"in Element.prototype?function(h,p,E){h.detachEvent("on"+p,E)}:function(h,p,E){h.removeEventListener(p,E)}};function o(h,p){var E=this,A=i.bind(E.start,E),_=i.bind(E.drag,E),I=i.bind(E.stop,E);if(!g(h))throw new TypeError("Draggable expects argument 0 to be an Element");p=i.assign({},n,p),i.assign(E,{element:h,handle:p.handle&&g(p.handle)?p.handle:h,handlers:{start:{mousedown:A,touchstart:A},move:{mousemove:_,mouseup:I,touchmove:_,touchend:I}},options:p}),E.initialize()}function l(h){return parseInt(h,10)}function c(h){return"currentStyle"in h?h.currentStyle:getComputedStyle(h)}function f(h){return h!=null}function g(h){return h instanceof Element||typeof HTMLDocument<"u"&&h instanceof HTMLDocument}function y(){}return i.assign(o.prototype,{setOption:function(h,p){var E=this;return E.options[h]=p,E.initialize(),E},get:function(){var h=this.dragEvent;return{x:h.x,y:h.y}},set:function(h,p){var E=this.dragEvent;return E.original={x:E.x,y:E.y},this.move(h,p),this},dragEvent:{started:!1,x:0,y:0},initialize:function(){var h,p=this,E=p.element,A=(p.handle,E.style),_=c(E),I=p.options,C=r.transform,v=p._dimensions={height:E.offsetHeight,left:E.offsetLeft,top:E.offsetTop,width:E.offsetWidth};I.useGPU&&C&&((h=_[C])==="none"&&(h=""),A[C]=h+" translate3d(0,0,0)"),I.setPosition&&(A.display="block",A.left=v.left+"px",A.top=v.top+"px",A.width=v.width+"px",A.height=v.height+"px",A.bottom=A.right="auto",A.margin=0,A.position="absolute"),I.setCursor&&(A.cursor="move"),p.setLimit(I.limit),i.assign(p.dragEvent,{x:v.left,y:v.top}),i.on(p.handle,p.handlers.start)},start:function(h){var p=this,E=p.getCursor(h),A=p.element;p.useTarget(h.target||h.srcElement)&&(h.preventDefault&&!h.target.getAttribute("contenteditable")?h.preventDefault():h.target.getAttribute("contenteditable")||(h.returnValue=!1),p.dragEvent.oldZindex=A.style.zIndex,A.style.zIndex=1e4,p.setCursor(E),p.setPosition(),p.setZoom(),i.on(document,p.handlers.move))},drag:function(h){var p=this,E=p.dragEvent,A=p.element,_=p._cursor,I=p._dimensions,C=p.options,v=I.zoom,T=p.getCursor(h),S=C.threshold,O=(T.x-_.x)/v+I.left,$=(T.y-_.y)/v+I.top;!E.started&&S&&Math.abs(_.x-T.x)<S&&Math.abs(_.y-T.y)<S||(E.original||(E.original={x:O,y:$}),E.started||(C.onDragStart(A,O,$,h),E.started=!0),p.move(O,$)&&C.onDrag(A,E.x,E.y,h))},move:function(h,p){var E=this,A=E.dragEvent,_=E.options,I=_.grid,C=E.element.style,v=E.limit(h,p,A.original.x,A.original.y);return!_.smoothDrag&&I&&(v=E.round(v,I)),(v.x!==A.x||v.y!==A.y)&&(A.x=v.x,A.y=v.y,C.left=v.x+"px",C.top=v.y+"px",!0)},stop:function(h){var p,E=this,A=E.dragEvent,_=E.element,I=E.options,C=I.grid;i.off(document,E.handlers.move),_.style.zIndex=A.oldZindex,I.smoothDrag&&C&&(p=E.round({x:A.x,y:A.y},C),E.move(p.x,p.y),i.assign(E.dragEvent,p)),E.dragEvent.started&&I.onDragEnd(_,A.x,A.y,h),E.reset()},reset:function(){this.dragEvent.started=!1},round:function(h){var p=this.options.grid;return{x:p*Math.round(h.x/p),y:p*Math.round(h.y/p)}},getCursor:function(h){return{x:(h.targetTouches?h.targetTouches[0]:h).clientX,y:(h.targetTouches?h.targetTouches[0]:h).clientY}},setCursor:function(h){this._cursor=h},setLimit:function(h){var p=this,E=function(T,S){return{x:T,y:S}};if(h instanceof Function)p.limit=h;else if(g(h)){var A=p._dimensions,_=h.scrollHeight-A.height,I=h.scrollWidth-A.width;p.limit=function(T,S){return{x:i.limit(T,[0,I]),y:i.limit(S,[0,_])}}}else if(h){var C=f(h.x),v=f(h.y);p.limit=C||v?function(T,S){return{x:C?i.limit(T,h.x):T,y:v?i.limit(S,h.y):S}}:E}else p.limit=E},setPosition:function(){var h=this.element,p=h.style;i.assign(this._dimensions,{left:l(p.left)||h.offsetLeft,top:l(p.top)||h.offsetTop})},setZoom:function(){for(var h=this.element,p=1;h=h.offsetParent;){var E=c(h).zoom;if(E&&E!=="normal"){p=E;break}}this._dimensions.zoom=p},useTarget:function(h){var p=this.options.filterTarget;return!(p instanceof Function)||p(h)},destroy:function(){i.off(this.handle,this.handlers.start),i.off(document,this.handlers.move)}}),o})})(wb)),wb.exports}var fW=cW();const dW=Lf(fW);function hW(t,e,n=!1){let r;return()=>{const i=arguments,o=()=>{r=null,n||t(...i)},l=n&&r!==null;r!==null&&clearTimeout(r),r=setTimeout(o,e),l&&t(...i)}}let uL=(cm=class extends xe.Component{render(){const{onClick:e}=this.props;return pe.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",onClick:e,"aria-hidden":"true",className:"ll-player--icon ll-player--icon-arrow",children:pe.jsx("path",{className:"ll-player--icon-fill ll-player--icon-current",d:"M16,9H6.41l4.29-4.29L9.29,3.29l-6,6h0L2.59,10l.71.71h0l6,6,1.41-1.41L6.41,11H16a1,1,0,0,0,0-2Z"})})}},cm.defaultProps={onClick:()=>null},cm);function pW(t){return pe.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:23,height:28,fill:"none","aria-hidden":"true",...t,children:[pe.jsx("path",{fill:"#FDFBED",d:"M19.83 27.822c-1.731 0-9.514 1.398-14.703-3.633C-.062 19.157.514 11.33 1.381 10.492c.864-.838-1.443-1.957 0-3.354 1.442-1.398 2.594.838 3.458 0 .864-.837 8.935-1.398 14.124 3.633 5.188 5.032 3.746 12.58 3.746 14.258 0 1.079-.357 1.58-.613 1.798-.147.128-.285.26-.415.402-.225.248-.744.595-1.854.595l.002-.003Z"}),pe.jsx("path",{fill:"#2B72EE",d:"M12.017.006c-.137-.01-3.907-.143-5.951 1.625l-.174.168C4.068 3.78 4.205 7.433 4.217 7.57c.136.011 3.907.144 5.95-1.624l.174-.169c1.824-1.98 1.687-5.634 1.676-5.77Z"})]})}const Ka={launcher:"_launcher_mdhl5_25",launcherDebug:"_launcherDebug_mdhl5_25",errors:"_errors_mdhl5_25","launcher-content":"_launcher-content_mdhl5_1",shrinked:"_shrinked_mdhl5_28",icon:"_icon_mdhl5_51",arrow:"_arrow_mdhl5_70",notifications:"_notifications_mdhl5_81","pushs-bubble":"_pushs-bubble_mdhl5_1",moving:"_moving_mdhl5_100","not-moving":"_not-moving_mdhl5_116",rectangle:"_rectangle_mdhl5_287","rectangle-text":"_rectangle-text_mdhl5_293",hidden:"_hidden_mdhl5_433",top:"_top_mdhl5_438",bottom:"_bottom_mdhl5_441","top-left":"_top-left_mdhl5_444","top-right":"_top-right_mdhl5_447","bottom-left":"_bottom-left_mdhl5_450","bottom-right":"_bottom-right_mdhl5_453"};function ET({isOpen:t=!1}){const{theme:e}=Kc();return pe.jsxs("i",{className:`${Ka.icon} ${t?Ka.arrow:""}`,children:[!t&&(e.customIcon!=null?pe.jsx("img",{src:e.customIcon,alt:"",style:{height:"75%",objectFit:"contain"}}):pe.jsx(pW,{})),t&&pe.jsx(uL,{})]})}function gW({isOpen:t}){const[e,n]=xe.useState(!1),r=xe.useRef(!0);return xe.useEffect(()=>{const i=[];if(r.current){r.current=!1;return}n(!0);const o=setTimeout(()=>{n(!1)},150);return i.push(o),()=>{for(;i.length>0;)clearTimeout(i.pop())}},[t]),pe.jsx("div",{id:Ka["launcher-content"],className:e?Ka.shrinked:"",children:pe.jsx(ET,{isOpen:t})})}function mW({isOpen:t}){return pe.jsx("div",{id:Ka["launcher-content"],className:Ka.round,children:pe.jsx(ET,{isOpen:t})})}function yW({isOpen:t,launcherZoneAndRatio:{ratio:e,zone:n},setLauncherZoneAndRatio:r}){const{theme:i}=Kc(),{currentLanguage:o}=Gi();xe.useEffect(()=>{if(i.shape!=="rectangle")return;let c,f;switch(n){case 5:f=1,c=.05;break;case 6:f=1,c=.8;break;case 7:f=3,c=.05;break;case 8:f=3,c=.8;break;default:f=n,c=e>.8?.8:e<.05?.05:e}r({ratio:c,zone:f})},[n,e,r,i]);let l=!1;return Object.keys(i.translations).length>0&&(l=i.translations[o]??!1),pe.jsxs("div",{id:Ka["launcher-content"],children:[pe.jsx(ET,{isOpen:t}),l!==!1&&pe.jsx("p",{className:Ka["rectangle-text"],children:l})]})}let Tb=null;const cL=()=>{if(Tb===null){const t="test";try{localStorage.setItem(t,t),localStorage.removeItem(t),Tb=!0}catch{Tb=!1}}return Tb},fL="ll-launcher-pos";var dL=(t=>(t[t.TOP=1]="TOP",t[t.RIGHT=2]="RIGHT",t[t.BOTTOM=3]="BOTTOM",t[t.LEFT=4]="LEFT",t[t.TOP_LEFT=5]="TOP_LEFT",t[t.TOP_RIGHT=6]="TOP_RIGHT",t[t.BOTTOM_LEFT=7]="BOTTOM_LEFT",t[t.BOTTOM_RIGHT=8]="BOTTOM_RIGHT",t))(dL||{});function vW(t,e,n,r,i,o){return o>t&&o<e&&i>n&&i<r}const _W=t=>{const e=t.x,n=t.y,r=Math.atan(window.innerHeight/window.innerWidth),i=Math.max(Math.min(Math.atan(n/e),Math.PI/2),0),o=Math.max(Math.min(Math.atan(n/(window.innerWidth-e)),Math.PI/2),0);return{bisetrix:r,topLeft:i,topRight:o}},bW=(t,e)=>{const n=.1*window.innerWidth,r=[{t:-n,l:-n,r:n,b:n,zone:5},{t:-n,l:window.innerWidth-n,r:window.innerWidth+n,b:n,zone:6},{t:window.innerHeight-n,l:window.innerWidth-n,r:window.innerWidth+n,b:window.innerHeight+n,zone:8},{t:window.innerHeight-n,l:-n,r:n,b:window.innerHeight+n,zone:7}];let i=null;return r.some(o=>vW(o.t,o.b,o.l,o.r,t.x+e/2,t.y+e/2)?(i=o.zone,!0):!1),i},EW=(t,e)=>{const n=bW(t,e);if(n!==null)return n;const r=_W(t);return r.topLeft>=r.bisetrix?r.topRight>=r.bisetrix?3:4:r.topRight>=r.bisetrix?2:1},wW=(t,e)=>{const n=e.x,r=e.y,i=Math.max(Math.min(n,window.innerWidth),0),o=Math.max(Math.min(r,window.innerHeight),0);switch(t){case 1:case 3:return Math.max(Math.min(i/window.innerWidth,.9),0);case 4:case 2:return Math.max(Math.min(o/window.innerHeight,.9),0);default:return .5}};function TW(t){return t===1?"ll-player--launcher-top":t===2?"ll-player--launcher-right":t===3?"ll-player--launcher-bottom":t===4?"ll-player--launcher-left":t===5?"ll-player--launcher-top-left":t===6?"ll-player--launcher-top-right":t===8?"ll-player--launcher-bottom-right":t===7?"ll-player--launcher-bottom-left":"ll-player--launcher-center"}const SW=(t,e,n)=>{const r=window.innerHeight-n,i=window.innerWidth-n;switch(t){case 1:return{left:Math.min(Math.max(window.innerWidth*e,0),i)};case 2:return{top:Math.min(Math.max(window.innerHeight*e,0),r)};case 3:return{left:Math.min(Math.max(window.innerWidth*e,0),i)};case 4:return{top:Math.min(Math.max(window.innerHeight*e,0),r)};default:return{}}},AW={top_left:5,top_center:1,top_right:6,middle_left:4,middle_right:2,bottom_left:7,bottom_center:3,bottom_right:8},hL=()=>{if(!cL())return null;const t=window.localStorage.getItem(fL);if(t!==null){const e=JSON.parse(t);if(e.zone in dL&&typeof e.ratio=="number")return{zone:e.zone,ratio:e.ratio}}return null},IW={zone:8,ratio:.5},CW={classic:"",round:"ll-launcher-position-round",rectangle:"ll-launcher-position-rectangle",hidden:""},pL=xe.forwardRef(function({launcherZoneAndRatio:e,setLauncherZoneAndRatio:n,pushsCount:r,onClick:i=()=>{}},o){if(typeof o=="function")throw new Error("This component is not compatible with functions as refs");const{playerPopInIsOpen:l,closePlayerPopIn:c}=yb(),{theme:f}=Kc(),{zone:g,ratio:y}=e,h=xe.useRef({dragging:!1,dragged:!1}),p=xe.useRef({x:0,y:0}),E=xe.useRef(""),A=xe.useCallback((C,v)=>{if(o?.current==null||h.current.dragging)return;const{left:T,top:S}=SW(C,v,f.launcherWidth);S!==void 0?o.current.style.top=`${S}px`:o.current.style.removeProperty("top"),T!==void 0?o.current.style.left=`${T}px`:o.current.style.removeProperty("left");const O=[CW[f.shape]??"",Ka[f.shape]??""];if(h.current.dragging)O.push(Ka.moving);else{O.push(Ka["not-moving"]);const $=TW(C);O.push($),E.current=$}o.current.className=O.join(" ")},[o,f]);xe.useEffect(()=>{A(g,y);const C=hW(()=>{A(g,y)});return window.addEventListener("resize",C),()=>{window.removeEventListener("resize",C)}},[y,g,A]);const _=xe.useCallback(()=>{h.current.dragged?h.current.dragged=!1:i()},[i]);xe.useEffect(()=>{const C=o?.current;function v(){const T=Date.now();function S(){Date.now()-T<150&&_()}C?.addEventListener("touchend",S,{once:!0})}return C?.addEventListener("touchstart",v),()=>{C?.removeEventListener("touchstart",v)}},[_,o]),xe.useEffect(()=>{let C;const v={width:document.body.clientWidth,height:window.innerHeight};if(!l)return!f.isFixed&&o?.current!==null&&(C=new dW(o?.current,{onDragStart:()=>{c(),h.current.dragging=!0,o?.current?.classList.add(Ka.moving),E.current!==""&&o?.current?.classList.remove(E.current),o?.current?.classList.remove(Ka["not-moving"])},onDrag:T=>{p.current.x=Math.max(Math.min(parseInt(T.style.left),window.innerWidth-f.launcherWidth),0),p.current.y=Math.max(Math.min(parseInt(T.style.top),window.innerHeight-f.launcherWidth),0)},onDragEnd:()=>{h.current.dragging=!1,h.current.dragged=!0,setTimeout(()=>{h.current.dragged=!1},200);const T=EW(p.current,f.launcherWidth),S=wW(T,p.current);n({ratio:S,zone:T}),A(T,S)},limit:v,setPosition:!1,threshold:f.launcherWidth/4})),()=>{C?.destroy()}},[c,n,A,l,f,o]);let I=null;switch(f.shape){case"rectangle":I=yW;break;case"round":I=mW;break;default:I=gW}return pe.jsxs("div",{id:Ka.launcher,ref:o,onClick:_,children:[pe.jsx(I,{isOpen:l,launcherZoneAndRatio:e,setLauncherZoneAndRatio:n}),!l&&r>0&&pe.jsx("span",{className:Ka.notifications,children:r})]})});var Po=(t=>(t.REGULAR="regular",t.INTRO="intro",t.OUTRO="outro",t.QUESTION="question",t.CONDITION="condition",t.VARIABLE="variable",t.SUBGUIDE="subguide",t.AUTO="auto",t.ADD="add",t.DEFAULT_CONDITION="default_condition",t.CHILD_CONDITION="child_condition",t))(Po||{});function Sb(t,e){return e==null?0:e.step_type!==Po.CONDITION&&e.step_type!==Po.CHILD_CONDITION&&e.step_type!==Po.DEFAULT_CONDITION&&e.step_type!==Po.AUTO?typeof e.next_step=="number"&&e.next_step>0&&typeof e.nextDepth=="number"&&e.nextDepth>=e.depth||e.next_step==null||e.next_step<=0?1+Sb(t,t.find(n=>n.id===e.next_step)):0:e.step_type===Po.CONDITION?t.reduce((n,r)=>{if(r.previous!==e.id||r.depth<e.depth)return n;const i=Sb(t,r);return i>n?i:n},0):e.next_step!=null&&e.nextDepth!=null&&e.nextDepth>=e.depth?Sb(t,t.find(n=>n.id===e.next_step)):0}class RW{constructor(e,n={}){this.steps=e,this.trail=[],this.answersByStepKey=new Map,this.answersByStepKey=new Map(Object.entries(n))}getCompletionRate(){const e=this.getVisibleTrail(),{step:n}=e[e.length-1],r=e.filter(l=>l.step.step_type!==Po.AUTO),i=Sb(this.steps,n)+r.length-1,o=r.length;return i>0&&o>0?Math.min(Math.floor(o)/Math.floor(i),1):0}getVisibleTrail(){return this.trail.filter(({step:e})=>e.step_type!==Po.CONDITION)}getPreviousVisibleStep(){const e=this.getVisibleTrail();return e[e.length-2]?.step??null}removeLastTwoStepsFromTrail(){this.trail=this.trail.slice(0,Math.max(0,this.trail.length-2))}getCurrentStep(){return this.trail[this.trail.length-1]?.step??null}pushStep(e,n){const r=this.trail.findIndex(({step:i})=>i===e);r>=0?this.trail.splice(r+1):this.trail.push({step:e,previous_trigger:n,date:Math.round(Date.now()/1e3)})}concat(e){this.trail=this.trail.concat(e.trail)}setAnswer(e,n){this.answersByStepKey.set(e,n)}getAnswers(){return Object.fromEntries(this.answersByStepKey)}}class xW{constructor(e){this.defaultInterfaceLocale="en",this.interfaceLocale=e??this.defaultInterfaceLocale}t(e){let n;return this.interfaceLocale!==null&&(n=zw(this.interfaceLocale)),n??=zw(this.defaultInterfaceLocale),n[e]??""}getLocale(){return this.interfaceLocale}}class NW{constructor(e,n,r){this.goToStep=e,this.stop=n,this.error=r,this.currentStep=null,this.finderAbortController=new AbortController}}class OW{constructor(e){this.reportFindTargetOutcome=e}report(e,n,r){this.reportFindTargetOutcome!=null&&n!=null&&this.reportFindTargetOutcome(e,n,r)}}const LW=({content:t,onClose:e,footerProps:n,draggable:r,completionRate:i,interfaceLocale:o})=>{const l=xe.useRef(null),c=zw(o??"en"),f=g=>c[g]??"";return pe.jsx("div",{className:br["not-found-target-bubble"],children:pe.jsxs("div",{ref:l,className:br.bubble,children:[pe.jsxs("div",{className:br["icons-box"],children:[r&&pe.jsx(uv,{ref:l}),pe.jsx("div",{className:br.cross,onClick:e,children:pe.jsx(Kh,{})})]}),pe.jsxs("div",{className:br["bubble-inner"],children:[pe.jsx(cv,{content:t}),pe.jsx("span",{className:br["not-found-next-step"],dangerouslySetInnerHTML:{__html:lv(f("error_no_target_found_next_step"))}})]}),i!=null&&pe.jsx(nb,{completionRate:i}),n&&pe.jsx(tb,{...n})]})})};class DW extends Iu{constructor(){super(...arguments),this.show=()=>{super.show(),this.root?.render(pe.jsx(LW,{...super.getDefaultProps(),completionRate:this.getCompletionRate(),footerProps:super.getFooterProps(),interfaceLocale:this.interfaceLocale}))}}}const PW=({answers:t,onSelectedAnswer:e,selectedAnswer:n})=>pe.jsx("div",{className:br.answers,children:pe.jsx("div",{className:br["answers-labels"],children:t.map((r,i)=>pe.jsxs("label",{className:`${br.label} ${r.index===n?br["active-label"]:""}`,onClick:()=>{e(r.index)},children:[r.label,pe.jsx("input",{type:"radio",value:r.index})]},i))})}),MW=({content:t,width:e,onClose:n,footerProps:r,draggable:i,completionRate:o,answers:l,onSelectedAnswer:c})=>{const f=xe.useRef(null),[g,y]=xe.useState(void 0),h=E=>{c(E),y(E)},p=g!==void 0;return pe.jsx("div",{className:`${br["modal-overlay"]} ${br["center-bubble"]} ${br["question-bubble"]}`,children:pe.jsxs("div",{ref:f,className:`${br.bubble}`,style:{...Y1(e)},children:[pe.jsxs("div",{className:br["icons-box"],children:[i&&pe.jsx(uv,{ref:f}),pe.jsx("div",{className:br.cross,onClick:n,children:pe.jsx(Kh,{})})]}),pe.jsx(cv,{content:t}),o!=null&&pe.jsx(nb,{completionRate:o}),l.length>0&&pe.jsx(PW,{answers:l,selectedAnswer:g,onSelectedAnswer:h}),r&&pe.jsx(tb,{...r,nextButtonEnabled:p})]})})};class kW extends Iu{constructor(){super(...arguments),this._answers=[],this._onSelectedAnswer=e=>{},this.show=()=>{super.show(),this.root?.render(pe.jsx(MW,{...super.getDefaultProps(),answers:this._answers,onSelectedAnswer:this.onSelectedAnswer,completionRate:this.getCompletionRate(),footerProps:super.getFooterProps()}))}}addAnswer(e,n){this._answers.push({label:e,index:n})}set onSelectedAnswer(e){this._onSelectedAnswer=e}get onSelectedAnswer(){return this._onSelectedAnswer}}var ep=(t=>(t.AUTOSTEPS="ff:auto-steps",t.DRAGGABLE_BUBBLE="ff:draggable-bubble",t.BEACON_V2="ff:beacon-v2",t.ANALYZE_PROCESSES="ff:analyze-process",t))(ep||{});function yv(t){return t.bubble_width!=null&&t.bubble_width>0?t.bubble_width:null}function FW(t){return typeof t=="number"?t:typeof t=="string"?parseInt(t,10):null}class wT{constructor(e){this.context=e}createCenteredBubble(e){const{container:n}=this.context,r=new Q1(n);return r.content=e.content,r.width=yv(e),r.draggable=this.context.featureFlags.includes(ep.DRAGGABLE_BUBBLE),this.context.shouldDisplayCompletionBar&&r.setCompletionRate(this.context.trail.getCompletionRate()),r.onClose=()=>this.context.tourControl.stop(),r.overlayEnabled=!!e.enable_overlay,r.offsetX=e.x_offset??0,r.offsetY=e.y_offset??0,r}createIntroOutroBubble(e){const n=new Q1(this.context.container);return n.content=e.content,n.width=yv(e),n.draggable=this.context.featureFlags.includes(ep.DRAGGABLE_BUBBLE),this.context.shouldDisplayCompletionBar&&n.setCompletionRate(this.context.trail.getCompletionRate()),n.onClose=()=>this.context.tourControl.stop(),n.overlayEnabled=!0,n.addNextAction(e.step_type===Po.INTRO?this.context.tourI18n.t("next"):this.context.tourI18n.t("end"),()=>this.context.tourControl.goToStep(e.next_step)),n}createTargetBubble(e,n,r){const i=new nT(this.context.container);i.content=e.content,i.width=yv(e),i.draggable=this.context.featureFlags.includes(ep.DRAGGABLE_BUBBLE),this.context.shouldDisplayCompletionBar&&i.setCompletionRate(this.context.trail.getCompletionRate()),i.onClose=()=>this.context.tourControl.stop(),i.target=n,i.position=e.position??"above",i.alignment=e.position_align?.replace(/-(.*)/,"")??"center",i.direction=e.direction??"center",i.arrowEnabled=!!e.arrow_enabled,i.scrollMode=e.scroll_mode??"vertical",i.highlightType=e.highlight_type??"none";const o=e.highlight_color??this.context.themeColors.highlight;return o&&(i.highlightColor=o),i.highlightTarget=r,i.overlayEnabled=!!e.enable_overlay,i.offsetX=e.x_offset??0,i.offsetY=e.y_offset??0,i}createQuestionBubble(e){const n=new kW(this.context.container),i=(e.question?.answers!=null?[...e.question.answers]:[]).sort((o,l)=>o.id>l.id?1:o.id<l.id?-1:0).map((o,l)=>({label:o.title??"",index:l}));return n.content=e.content,n.width=yv(e),n.draggable=this.context.featureFlags.includes(ep.DRAGGABLE_BUBBLE),this.context.shouldDisplayCompletionBar&&n.setCompletionRate(this.context.trail.getCompletionRate()),n.onClose=()=>this.context.tourControl.stop(),i.forEach(o=>n.addAnswer(o.label,o.index)),n.onSelectedAnswer=o=>{e.step_key!=null&&this.context.trail.setAnswer(e.step_key,o)},n.addNextAction(this.context.tourI18n.t("next"),()=>this.context.tourControl.goToStep(e.next_step)),n}createNotFoundBubble(e){const n=new DW(this.context.container);return n.content=e.content,n.width=yv(e),n.draggable=this.context.featureFlags.includes(ep.DRAGGABLE_BUBBLE),this.context.shouldDisplayCompletionBar&&n.setCompletionRate(this.context.trail.getCompletionRate()),n.onClose=()=>this.context.tourControl.stop(),n.addNextAction(this.context.tourI18n.t("next"),()=>this.context.tourControl.goToStep(e.next_step)),n.interfaceLocale=this.context.tourI18n.getLocale(),n}}class $W{constructor(e,n){this.stepInfo=e,this.tourContext=n,this.tourBubbleFactory=new wT(this.tourContext)}run(){Re.debug(`[TOUR] Running intro/outro tour step (stepId: ${this.stepInfo.id})`),this.tourContext.bubbleController.bubble=this.tourBubbleFactory.createIntroOutroBubble(this.stepInfo),Re.debug(`[TOUR] Showing intro/outro tour bubble (stepId: ${this.stepInfo.id})`),this.tourContext.bubbleController.bubble.show()}}class UW{constructor(e,n){this.stepInfo=e,this.tourContext=n,this.tourBubbleFactory=new wT(this.tourContext)}run(){Re.debug(`[TOUR] Running question step (stepId: ${this.stepInfo.id}).`),this.tourContext.bubbleController.bubble=this.tourBubbleFactory.createQuestionBubble(this.stepInfo),Re.debug(`[TOUR] Showing question bubble (stepId: ${this.stepInfo.id}).`),this.tourContext.bubbleController.bubble.show()}}const BW=async(t,e)=>{const n=new AbortController;setTimeout(()=>{n.abort()},500);const r=JSON.parse(t),i=r.value,o=Qi.parse(r.paths);if(!o)return!1;const{element:l}=await na.find(o,{ignoreInvisibleResults:!1,signal:n.signal,optionsV1:{settings:e?.v1},optionsV3:e?.v3});if(l==null)return!1;const c=await l.getText().then(f=>f?.toLowerCase().includes(i.toLowerCase()))??!1;return l.destroy(),c},ZW=async(t,e)=>{const n=new AbortController;setTimeout(()=>{n.abort()},500);const r=Qi.parse(t);if(!r)return!1;const{element:i}=await na.find(r,{ignoreInvisibleResults:!1,signal:n.signal,optionsV1:{settings:e?.v1},optionsV3:e?.v3});if(i==null)return!1;const o=await i.isRendered();return i.destroy(),o},jW=async t=>await new Promise(e=>{switch(t){case"Google Chrome":e(!!window.chrome&&(!!window.chrome.webstore||!!window.chrome.runtime));break;case"Firefox":e(typeof window.InstallTrigger<"u");break;case"Internet Explorer":e(/MSIE|Trident/.test(navigator.userAgent));break;case"Microsoft Edge":e(!!!document.documentNode&&!!window.styleMedia);break}}),VW=async(t,e)=>new Promise(n=>{try{const[r,i]=t.split(";");r in e&&e[r]===Number(i)?n(!0):n(!1)}catch(r){Re.debug(r,"Error on QuestionCheck, returning false"),n(!1)}}),zW=async t=>await new Promise(e=>{try{const[n,r]=t.split(";"),[i,o]=(()=>{const[f,g]=r.split(":");return[parseInt(f),parseInt(g)]})(),l=new Date,c=new Date;c.setHours(i,o,0,0),e(n===">"?l.getTime()>=c.getTime():c.getTime()>l.getTime())}catch(n){Re.debug(n,"Error on TimeCheck, returning false"),e(!1)}}),HW=async(t,e)=>{const n=new AbortController;setTimeout(()=>{n.abort()},1500);const r=JSON.parse(t),i=r.value,o=r.type,l=Qi.parse(r.paths);if(!l)return!1;const{element:c}=await na.find(l,{ignoreInvisibleResults:!1,signal:n.signal,optionsV1:{settings:e?.v1},optionsV3:e?.v3});if(c==null)return!1;const f=await c.getText().then(g=>{switch(o){case"is":return g===i;case"is_not":return g!==i;case"contains":return g?.includes(i);case"starts_with":return g?.indexOf(i)===0;case"ends_with":return g?.substr(g?.length-i.length,i.length)===i}})??!1;return c.destroy(),f},GW=async(t,e)=>{const n=new AbortController;setTimeout(()=>{n.abort()},500);const r=Qi.parse(t);if(!r)return!1;const{element:i}=await na.find(r,{ignoreInvisibleResults:!1,signal:n.signal,optionsV1:{settings:e?.v1},optionsV3:e?.v3});if(i==null)return!1;const o=await i.getText().then(l=>l?.length===0)??!1;return i.destroy(),o},qW=async(t,e)=>{const n=new AbortController;setTimeout(()=>{n.abort()},500);const r=JSON.parse(t),i=r.value,o=Qi.parse(r.paths);if(!o)return!1;const{element:l}=await na.find(o,{ignoreInvisibleResults:!1,signal:n.signal,optionsV1:{settings:e?.v1},optionsV3:e?.v3});if(l==null)return!1;const c=await l.getText().then(f=>f==null?!1:new RegExp(i).test(f))??!1;return l.destroy(),c};var wa=(t=>(t.ELEMENT_EXISTS="element_exists",t.ELEMENT_CONTAINS="element_contains",t.IS_URL="is_url",t.URL_CONTAINS="url_contains",t.IS_SCROLLED="is_scrolled",t.VALUE_IS_EMPTY="value_is_empty",t.VALUE="value",t.TIME="time",t.SCREEN_SIZE="screen_size",t.NAVIGATOR="navigator",t.LOCATION="location",t.QUESTION="question",t.VARIABLE="variable",t.VALUE_REGEX="value_regex",t.SELECT_VALUE="select_value",t))(wa||{}),Yc=(t=>(t.OTHER_VARIABLE_VALUE="other-variable-value",t.FIXED="fixed",t.ELEMENT_TEXT="element-text",t))(Yc||{});const WW=1,KW=1,YW=1,QW=.65,XW=jf({variable_name:ki().min(WW),comparison_type:pb([Yc.ELEMENT_TEXT,Yc.FIXED,Yc.OTHER_VARIABLE_VALUE]),comparison_value:ki().min(KW).or(Ps(PG()).min(YW).transform(t=>JSON.stringify(t)))});class Gd extends Error{constructor(e){super("The condition is not valid: "+e)}}class JW{constructor(e,n){this.algoSettings=null,this._rigidity=QW;try{const r=JSON.parse(e),{variable_name:i,comparison_type:o,comparison_value:l}=XW.parse(r);this.variableName=i,this.comparisonType=o,this.comparisonValue=l,this.algoSettings=n}catch(r){throw Re.debug(r,"Error while parsing the condition content, cannot instantiate the VariableCheck"),r instanceof tG?new Gd("Invalid condition content format"):new Gd("Error while parsing the condition content")}}async resolve(){switch(this.comparisonType){case Yc.FIXED:return this.resolveFixed();case Yc.OTHER_VARIABLE_VALUE:return this.resolveVariable();case Yc.ELEMENT_TEXT:return this.resolveElementText()}}async resolveFixed(e=null){const n=(e??this.comparisonValue).toLowerCase(),r=tv(this.variableName);if(r==null)throw new Gd("variable is null");if(["global.profiles","global.projects"].includes(this.variableName)){const i=JSON.parse(r);if(!Array.isArray(i))throw new Gd("variable is not an array");return i.some(l=>l.name.toLowerCase()===n)}else return r.trim().toLowerCase()===n}async resolveVariable(){try{if(["global.profiles","global.projects"].includes(this.variableName)){const e=tv(this.variableName);if(e==null)throw new Gd("variable is null");const n=JSON.parse(e);if(!Array.isArray(n))throw new Gd("variable is not an array");const r=tv(this.comparisonValue);if(r==null)throw new Gd("variable for comparison value is null");const i=r.toLowerCase();return n.some(l=>l.name.toLowerCase()===i)}else{const e=[tv(this.variableName),tv(this.comparisonValue)];if(e.some(i=>i==null))throw new Gd("cannot compare null values");const r=e[0]?.toLowerCase();return e.every(i=>i?.toLowerCase()===r)}}catch(e){throw Re.error(e,"[VariableCheck error, resolveVariable]"),e}}async resolveElementText(){const e=new AbortController;setTimeout(()=>{e.abort()},500);try{const r=Qi.parse(this.comparisonValue);if(r==null)return Re.info("VariableCheck: The target is null."),!1;const{element:i}=await na.find(r,{ignoreInvisibleResults:!1,signal:e.signal,optionsV1:{settings:this.algoSettings?.v1},optionsV3:this.algoSettings?.v3});if(i==null)return!1;const o=await i.getText();return i.destroy(),await this.resolveFixed(o)}catch(r){throw Re.error(r,"[VariableCheck error, resolveElementText]"),r}}}class eK{constructor(e,n){this.stepInfo=e,this.tourContext=n}run(){Re.debug(`[TOUR] Running condition step (stepId: ${this.stepInfo.id})...`);const{conditions:e}=this.stepInfo;if(e!=null&&e.length>0&&e.every(i=>i.condition_type===wa.SCREEN_SIZE)){Re.debug(`[TOUR] Found ${e.length} screen size conditions to check (stepId: ${this.stepInfo.id}). Checking now...`);const i=this.findBestScreenSizeCondition(e,this.stepInfo.next_step);this.tourContext.tourControl.goToStep(i);return}const n=(r=0)=>{e!=null&&r>=e.length?(Re.debug(`[TOUR] No conditions left for condition step (stepId: ${this.stepInfo.id}), going to next step (stepId: ${this.stepInfo.next_step})...`),this.tourContext.tourControl.goToStep(this.stepInfo.next_step)):e!=null&&this.checkCondition(e[r]).then(i=>{i?(Re.debug(`[TOUR] Condition ${r} met for condition step (stepId: ${this.stepInfo.id}), going to next step (stepId: ${e[r].next_step})...`),this.tourContext.tourControl.goToStep(e[r].next_step)):(Re.debug(`[TOUR] Condition ${r} not met for condition step (stepId: ${this.stepInfo.id}), checking next condition...`),n(++r))}).catch(Re.error)};n()}async checkCondition(e){const n=e.condition_content,r=e.condition_type,{algoSettings:i}=this.tourContext,o=async l=>l.catch(()=>!1);try{switch(r){case wa.ELEMENT_EXISTS:return o(ZW(n,i));case wa.ELEMENT_CONTAINS:return o(BW(n,i));case wa.IS_URL:return location.href===n||location.pathname===n;case wa.URL_CONTAINS:return location.href.includes(n);case wa.IS_SCROLLED:return window.scrollY>0;case wa.VARIABLE:return o(new JW(n,i).resolve());case wa.VALUE_IS_EMPTY:return o(GW(n,i));case wa.VALUE_REGEX:return o(qW(n,i));case wa.VALUE:return o(HW(n,i));case wa.SELECT_VALUE:return!0;case wa.TIME:return o(zW(n));case wa.NAVIGATOR:return o(jW(n));case wa.LOCATION:return!0;case wa.QUESTION:return o(VW(n,this.tourContext.trail.getAnswers()));default:return!1}}catch{return!1}}findBestScreenSizeCondition(e,n){const r=window.innerWidth,i=e.map(l=>({...l,width:parseInt(l.condition_content,10)})).filter(l=>!isNaN(l.width)&&r>l.width);return i.length===0?n:i.reduce((l,c)=>r-c.width<r-l.width?c:l).next_step}}class tK{constructor(e,n){this.stepInfo=e,this.tourContext=n}run(){Re.debug(`[TOUR] Running variable tour step (stepId: ${this.stepInfo.id})`);const{tourControl:e,algoSettings:n}=this.tourContext;if(this.stepInfo.variable==null||typeof this.stepInfo.variable!="object"){Re.debug(`[TOUR] No variable found inside variable step (stepId: ${this.stepInfo.id}). Skipping step.`),e.goToStep(this.stepInfo.next_step);return}const{variable_name:r,change_type:i,change_value:o}=this.stepInfo.variable;if(r==null){Re.debug(`[TOUR] Variable name is null inside step (stepId: ${this.stepInfo.id}). Skipping step.`),e.goToStep(this.stepInfo.next_step);return}switch(i){case Yc.FIXED:Re.debug(`[TOUR] Fixed variable step (stepId: ${this.stepInfo.id}). Setting variable (${r}: ${JSON.stringify(o)}). Going to next step.`),Q0(r,o),e.goToStep(this.stepInfo.next_step);break;case Yc.OTHER_VARIABLE_VALUE:{if(o instanceof Qi)throw new Error("An error occurred while running a variable step : changeValue should never be a TargetAdapter in this case");const l=Ng(o??void 0);Re.debug(`[TOUR] "Other variable value" variable step (stepId: ${this.stepInfo.id}). Setting variable (${r}: ${JSON.stringify(l)}). Going to next step.`),Q0(r,l),e.goToStep(this.stepInfo.next_step);break}case Yc.ELEMENT_TEXT:{Re.debug(`[TOUR] "Element Text" variable step (stepId: ${this.stepInfo.id}). Resolving element text.`),(async()=>{const c=Qi.parse(o);if(c==null)throw new Error("An error occurred while running a variable step : target is null");const f=AbortSignal.any([this.tourContext.tourControl.finderAbortController.signal,AbortSignal.timeout(5e3)]),{element:g}=await na.find(c,{signal:f,ignoreInvisibleResults:!1,optionsV1:{settings:n?.v1},optionsV3:n?.v3}),y=await g?.getText();g?.destroy(),Re.debug(`[TOUR] "Element Text" variable step (stepId: ${this.stepInfo.id}) setting variable (${r}: ${JSON.stringify(y)}). Going to next step.`),Q0(r,y),e.goToStep(this.stepInfo.next_step)})().catch(c=>{this.tourContext.tourControl.error(c,this.stepInfo)});break}default:Re.debug(`[TOUR] Unknown variable change type inside step (stepId: ${this.stepInfo.id}). Skipping step.`),e.goToStep(this.stepInfo.next_step);break}}}const Mg={CLICK:"click",CHECKBOX:"checkbox",AUTOFILL:"autofill"};var Ab=(t=>(t.FIXED_VALUE="fixed",t.VARIABLE_VALUE="variable",t.ELEMENT_TEXT_VALUE="element_text_content",t))(Ab||{});const nK=(t,e)=>{t.click(),t.value="";for(const n of e){const r={key:n,bubbles:!0},i=new KeyboardEvent("keydown",r),o=new KeyboardEvent("keypress",r),l=new KeyboardEvent("keyup",r);t.dispatchEvent(i),t.dispatchEvent(o),t.dispatchEvent(new InputEvent("beforeinput",{bubbles:!0,data:n})),t.value+=n,t.dispatchEvent(new InputEvent("input",{bubbles:!0,data:n})),t.dispatchEvent(l)}t.dispatchEvent(new Event("change",{bubbles:!0})),t.blur()},rK=async(t,e,n)=>{try{if(e.meta==null)throw new Error("Auto-fill step : meta is missing. Aborting");const o=JSON.parse(e.meta),l=new AbortController;setTimeout(()=>{l.abort()},6e4);const c=Qi.parse(t);if(!c)return;const{element:f}=await na.find(c,{signal:l.signal,optionsV1:{settings:n?.v1},optionsV3:n?.v3});f?.destroy();const g=f instanceof Hs?f.dom:f;if(!i(g)){Re.warn("Auto-fill step : element match needs to be an input or a textarea. Aborting");return}const y=await r(o);nK(g,y)}catch(o){Re.error(o,"Error while running autofill auto step")}async function r(o){switch(o.autofill_step_value_type){case Ab.FIXED_VALUE:return o.autofill_step_value;case Ab.VARIABLE_VALUE:{const l=Ng(o.autofill_step_value);if(l==null)return"";if(typeof l=="string")return l;if(typeof l=="number")return l.toString();throw new Error("Unhandled variable type")}case Ab.ELEMENT_TEXT_VALUE:{const l=new AbortController;setTimeout(()=>{l.abort()},6e4);const c=Qi.parse(o.autofill_step_value);if(!c)throw new Error("Failed to get target adapter");return na.find(c,{signal:l.signal,optionsV1:{settings:n?.v1},optionsV3:n?.v3}).then(async({element:f})=>{const g=await f?.getText()??"";return f?.destroy(),g}).catch(()=>{throw new Error("Failed to find the element to get its text")})}default:throw new Error("Unhandled autofill step value type")}}function i(o){return o.tagName==="INPUT"||o.tagName==="TEXTAREA"}},iK=async(t,e,n)=>{await new Promise((r,i)=>{try{if(e.meta==null)throw new Error("Run checkbox auto step error, meta is missing. Aborting");const o=JSON.parse(e.meta),l=new AbortController;setTimeout(()=>{l.abort()},6e4);const c=Qi.parse(t);if(!c)throw new Error("Run checkbox auto step error, target is missing. Aborting");na.find(c,{signal:l.signal,optionsV1:{settings:n?.v1},optionsV3:n?.v3}).then(({element:f})=>{f?.destroy();const g=o.step_auto_checkbox_value===!0;if(f==null)throw new Error("Run checkbox auto step error, Element not found");if(!(f instanceof Hs))throw new Error("Run checkbox auto step error, Element is not a DOM element");"tagName"in f.dom&&f.dom.tagName!=="INPUT"&&Re.warn("Auto step warning : element match does not seem to be an input, maybe try with a click auto step instead"),f.dom.checked=g,r(void 0)}).catch(()=>{throw new Error("Run checkbox auto step error, Finder error")})}catch(o){i(o)}})},oK=async(t,e)=>{const n=new AbortController;setTimeout(()=>{n.abort()},6e4);const r=Qi.parse(t);if(!r)throw new Error("Run click auto step error, target is null");const{element:i}=await na.find(r,{signal:n.signal,optionsV1:{settings:e?.v1},optionsV3:e?.v3});if(i?.destroy(),i===null)throw new Error("Run click auto step error, failed to find element");if(!(i instanceof Hs))throw new Error("Run click auto step error, element is a CrossElement, it cannot be clicked");const o=i.dom;if(!("click"in o))throw new Error("ClickTrigger error, element has no native method 'click, it cannot be clicked");await sK(o),l(o);function l(c){const f=new PointerEvent("pointerdown",{view:window,bubbles:!0,cancelable:!0,buttons:1,pointerType:"mouse"}),g=new PointerEvent("pointerup",{view:window,bubbles:!0,cancelable:!0,buttons:1,pointerType:"mouse"}),y=new MouseEvent("mousedown",{view:window,bubbles:!0,cancelable:!0,buttons:1}),h=new MouseEvent("mouseup",{view:window,bubbles:!0,cancelable:!0,buttons:1});c.dispatchEvent(f),c.dispatchEvent(y),c.dispatchEvent(g),c.dispatchEvent(h),c.click()}};async function sK(t){await new Promise(e=>{setTimeout(()=>{e()},1500);const n=t.animate([{opacity:1},{opacity:0},{opacity:1}],{duration:500,iterations:1});n.onfinish=()=>{e()}})}class aK{constructor(e,n){this.stepInfo=e,this.tourContext=n}run(){Re.debug(`[TOUR] Running auto step (stepId: ${this.stepInfo.id}).`);try{const{auto_step_information:e}=this.stepInfo;if(e==null)throw new Error("auto step information does not exist");Re.debug(`[TOUR] Waiting for ${e.delay_before}s before executing auto step action (stepId: ${this.stepInfo.id})...`),setTimeout(()=>{this.dispatchAutoStepsRun(e).then(n=>{this.tourContext.tourControl.goToStep(n)}).catch(n=>{this.tourContext.tourControl.error(n,this.stepInfo)})},e.delay_before*1e3)}catch(e){Re.error(e,"auto step run error"),this.tourContext.tourControl.error(e,this.stepInfo)}}async dispatchAutoStepsRun(e){const{algoSettings:n}=this.tourContext,{paths:r,next_step:i}=this.stepInfo,o=e.delay_after*1e3;return new Promise((l,c)=>{switch(e.step_auto_type){case Mg.CLICK:oK(r??"",n).then(()=>{setTimeout(()=>{l(i)},o)}).catch(f=>{Re.error(f,"run click auto step error"),c(f)});break;case Mg.CHECKBOX:iK(r??"",e,n).then(()=>{setTimeout(()=>{l(i)},o)}).catch(f=>{Re.error(f,"run checkbox auto step error"),c(f)});break;case Mg.AUTOFILL:rK(r??"",e,n).then(()=>{setTimeout(()=>{l(i)},o)}).catch(f=>{Re.error(f,"An error occurred while running an autofill auto step"),c(f)});break;default:throw new Error(`Unrecognised auto step type, could not run auto step, tried to run ${e.step_auto_type}`)}})}}var Mo=(t=>(t.NEXT="next",t.CLICK="click",t.INPUT="input",t.CHANGE="change",t.APPEAR="appear",t.DISAPPEAR="disappear",t.WAIT="wait",t.MULTIPAGE="multipage",t.HOVER="hover",t.MOUSEDOWN="mousedown",t))(Mo||{});class tp{constructor(e=null,n,{onAppear:r,onDisappear:i,onLookupOutcomeTarget:o}){this.started=!1,this.appearTarget=null,this.onAppear=null,this.onDisappear=null,this.onLookupOutcomeTarget=null,this.clearListeners=[],this.onAppear=r??null,this.onDisappear=i??null,this.onLookupOutcomeTarget=o??null,this.algoSettings=n,this.finderAbortController=new AbortController,this.appearTarget=Qi.parse(e)}start(){if(!this.started){if(this.started=!0,this.appearTarget===null){Re.warn("Cannot start an appear trigger without a target");return}this.finderAbortController=new AbortController,this.findElement(this.appearTarget).then(e=>{if(!this.finderAbortController.signal.aborted&&e===null){this.onLookupOutcomeTarget?.("not_found");return}if(e===null)return;this.onLookupOutcomeTarget?.("found");const n=e.onAppear(()=>{this.onAppear?.(e)},!1),r=e.onDisappear(()=>{this.onDisappear?.(),this.stop(),this.start()},!1),i=e.onRemove(()=>{this.onDisappear?.(),this.stop(),this.start()});n!==null&&this.clearListeners.push(n),r!==null&&this.clearListeners.push(r),this.clearListeners.push(i)})}}stop(){this.started=!1,this.clearListeners.forEach(e=>{e()}),this.finderAbortController.abort()}async findElement(e){const n=await na.find(e,{ignoreInvisibleResults:!0,signal:this.finderAbortController.signal,optionsV1:{settings:this.algoSettings?.v1},optionsV3:this.algoSettings?.v3}).then(({element:r})=>r);return this.clearListeners.push(()=>{n?.destroy()}),n}}class lK{constructor(e,n=0){this.timeoutId=null,this.timeToWait=n,this.callback=e}start(){this.timeoutId=setTimeout(()=>{this.callback()},this.timeToWait)}stop(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}}class uK{constructor(e,n){this.stepInfo=e,this.tourContext=n,this.cleanupFunctionsBeforeNextStep=[],this.tourBubbleFactory=new wT(this.tourContext)}run(){Re.debug(`[TOUR] Running regular step (stepId: ${this.stepInfo.id}).`);const{algoSettings:e}=this.tourContext;if(this.cleanupFunctionsBeforeNextStep=[],this.stepInfo.paths==null)Re.debug(`[TOUR] No target found, showing centered bubble for step (stepId: ${this.stepInfo.id}).`),this.showCenteredBubble();else{const n=async o=>{if(this.stepInfo.highlight_type==="none")return null;const l=Qi.parse(this.stepInfo.highlight_target);if(!l)return null;const c=await na.find(l,{signal:o,optionsV1:{settings:e?.v1},optionsV3:e?.v3}).then(({element:f})=>f);return this.cleanupFunctionsBeforeNextStep.push(()=>{c?.destroy()}),c},r=async o=>{const l=Qi.parse(this.stepInfo.paths);if(!l)return null;const c=await na.find(l,{signal:o,optionsV1:{settings:e?.v1},optionsV3:e?.v3}).then(({element:f,debugInformation:g})=>(Re.debug("Running regular step - finding target",{debugInformation:g}),f===null?Re.debug("Running regular step - finding target - Couldn't find the element"):Re.debug("Running regular step - finding target - Element found"),f));return this.cleanupFunctionsBeforeNextStep.push(()=>{c?.destroy()}),c};this.tourContext.tourControl.finderAbortController=new AbortController;const i=setTimeout(()=>{Re.debug(`[TOUR] Finding target for regular step (stepId: ${this.stepInfo.id}) timed out after 10 seconds. Aborting.`),this.tourContext.tourControl.finderAbortController.abort()},1e4);Re.debug(`[TOUR] Finding target for step (stepId: ${this.stepInfo.id}).`),Promise.all([r(this.tourContext.tourControl.finderAbortController.signal),n(this.tourContext.tourControl.finderAbortController.signal)]).then(([o,l])=>{if(clearTimeout(i),this.tourContext.tourControl.currentStep?.id!==this.stepInfo.id){Re.debug(`[TOUR] Step (stepId: ${this.stepInfo.id}) has been retriggered but the tour has already moved to step (stepId: ${this.tourContext.tourControl.currentStep?.id??"null"}). Ignoring...`),this.tourContext.tourControl.goToStep(null);return}if(this.stepInfo.highlight_target!=null&&this.stepInfo.highlight_type!=="none"&&this.tourContext.guideChecker.report(this.stepInfo,this.stepInfo.highlight_target_sha256,l!=null?"found":"not_found"),o==null){Re.debug(`[TOUR] Target not found for step (stepId: ${this.stepInfo.id}). Showing Target Not Found Bubble.`),this.showNotFoundBubble();return}Re.debug(`[TOUR] Found target for step, showing target bubble (stepId: ${this.stepInfo.id}).`),this.showTargetBubble(o,l)}).catch(o=>{this.cleanupFunctionsBeforeNextStep.forEach(l=>{l()}),o==="Target not found"&&this.stepInfo.target_not_found==="skip"?(Re.debug('[TOUR] Target not found and the "skip" is active, skipping to next step.'),this.tourContext.tourControl.goToStep(this.stepInfo.next_step)):this.tourContext.tourControl.error(o,this.stepInfo)})}}cleanCallbacks(){this.cleanupFunctionsBeforeNextStep.forEach(e=>{e()}),this.cleanupFunctionsBeforeNextStep=[]}showNotFoundBubble(){this.tourContext.guideChecker.report(this.stepInfo,this.stepInfo.paths_sha256,"not_found"),this.tourContext.bubbleController.bubble=this.tourBubbleFactory.createNotFoundBubble(this.stepInfo),this.setupTriggers(this.stepInfo,null).then(()=>{this.cleanCallbacks(),this.tourContext.tourControl.goToStep(this.stepInfo.next_step)}),this.tourContext.bubbleController.bubble.show()}showTargetBubble(e,n){const{tourControl:r}=this.tourContext;if(this.tourContext.bubbleController.bubble=this.tourBubbleFactory.createTargetBubble(this.stepInfo,n??e,n),this.setupPreviousStep(),this.stepInfo.triggers?.every(i=>i.trigger_type!==Mo.DISAPPEAR)){const i=e.onRemove(()=>{r.currentStep?.id===this.stepInfo.id&&(Re.debug(`[TOUR] Target for step (stepId: ${this.stepInfo.id}) has been removed from the DOM. Re-running the step...`),this.tourContext.bubbleController.remove(),this.cleanCallbacks(),this.run())});this.tourContext.cleanupFunctions.push(i)}Re.debug(`[TOUR] Setting up triggers for step (stepId: ${this.stepInfo.id}).`),this.setupTriggers(this.stepInfo,e).then(()=>{Re.debug(`[TOUR] Triggers triggered for step (stepId: ${this.stepInfo.id}). Going to next step...`),this.cleanCallbacks(),this.tourContext.tourControl.goToStep(this.stepInfo.next_step)}),Re.debug(`[TOUR] Showing bubble for step (stepId: ${this.stepInfo.id})...`),this.tourContext.bubbleController.bubble.show(),e.focus().catch(i=>{Re.warn(i,`Error focusing target for tour step (stepId: ${this.stepInfo.id})`)}),this.tourContext.guideChecker.report(this.stepInfo,this.stepInfo.paths_sha256,"found")}showCenteredBubble(){this.tourContext.bubbleController.bubble=this.tourBubbleFactory.createCenteredBubble(this.stepInfo),this.setupPreviousStep(),Re.debug(`[TOUR] Setting up triggers for step (stepId: ${this.stepInfo.id}).`),this.setupTriggers(this.stepInfo,null).then(()=>{Re.debug(`[TOUR] Triggers triggered for step (stepId: ${this.stepInfo.id}). Going to next step...`),this.cleanCallbacks(),this.tourContext.tourControl.goToStep(this.stepInfo.next_step)}),this.tourContext.bubbleController.bubble.show()}setupPreviousStep(){const{trail:e,tourI18n:n,tourControl:r}=this.tourContext,i=e.getPreviousVisibleStep();!(this.stepInfo.previous_enabled!=null&&this.stepInfo.previous_enabled&&!(i!=null&&i.trigger_type===Mo.MULTIPAGE))||this.tourContext.bubbleController.bubble==null||this.tourContext.bubbleController.bubble.addPreviousAction(n.t("bubble_back"),()=>{this.cleanCallbacks(),i!=null?(r.goToStep(i.id),e.removeLastTwoStepsFromTrail()):r.stop()})}async setupTriggers(e,n){await new Promise(r=>{let i=!1;const o=[],l=()=>{o.splice(0).forEach(g=>{g()})};this.tourContext.cleanupFunctions.push(l),this.cleanupFunctionsBeforeNextStep.push(l);const c=g=>{i?g():o.push(g)},f=g=>{i||(i=!0,this.tourContext.setPreviousTrigger(g),l(),r())};(e.triggers??[]).filter(({trigger_type:g})=>g!==Mo.NEXT&&g!==Mo.MULTIPAGE).forEach(({trigger_type:g,trigger_option:y,trigger_option_sha256:h})=>{switch(g){case Mo.CLICK:if(n!=null&&"onClick"in n){const E=n.onClick(()=>{f(Mo.CLICK)},!0);typeof E=="function"&&c(E)}break;case Mo.MOUSEDOWN:if(n!=null&&"onMousedown"in n){const E=n.onMousedown(()=>{f(Mo.MOUSEDOWN)},!0);typeof E=="function"&&c(E)}break;case Mo.INPUT:n!=null&&"onInput"in n&&c((()=>{const E=Number(y??0);return n.onInput(_=>{(E<=0||(_??"").length>=E)&&f(Mo.INPUT)},!1)??(()=>{})})());break;case Mo.HOVER:if(n!=null&&"onHover"in n){const E=n.onHover(()=>{f(Mo.HOVER)},!0);typeof E=="function"&&c(E)}break;case Mo.APPEAR:{const E=new tp(typeof y=="string"?y:void 0,this.tourContext.algoSettings,{onAppear:()=>{f(Mo.APPEAR)},onLookupOutcomeTarget:A=>{this.tourContext.guideChecker.report(e,h,A)}});E.start(),c(()=>{E.stop()});break}case Mo.CHANGE:{if(n==null){Re.warn("Cannot setup trigger CHANGE without a target",{stepId:e.id});break}const E=n.onChange(()=>{f(Mo.CHANGE)});E!=null&&c(E)}break;case Mo.DISAPPEAR:const p=new tp(typeof y=="string"?y:void 0,this.tourContext.algoSettings,{onDisappear:()=>{f(Mo.DISAPPEAR)},onLookupOutcomeTarget:E=>{this.tourContext.guideChecker.report(e,h,E)}});p.start(),c(()=>{p.stop()});break;case Mo.WAIT:{const E=new lK(()=>{f(Mo.WAIT)},FW(y)??void 0);E.start(),c(()=>{E.stop()});break}}}),(e.triggers??[]).find(({trigger_type:g})=>g===Mo.NEXT)!=null&&this.tourContext.bubbleController.bubble?.addNextAction(this.tourContext.tourI18n.t("next"),()=>{f("next")}),(e.triggers??[]).find(({trigger_type:g})=>g===Mo.MULTIPAGE)!=null&&this.tourContext.multiPageTrigger(e)})}}class cK{constructor(e){this.tourContext=e}createIntroOutroStep(e){return new $W(e,this.tourContext)}createQuestionStep(e){return new UW(e,this.tourContext)}createConditionStep(e){return new eK(e,this.tourContext)}createVariableStep(e){return new tK(e,this.tourContext)}createAutoStep(e){return new aK(e,this.tourContext)}createRegularStep(e){return new uK(e,this.tourContext)}}class fK{constructor(){this.bubble=null}remove(){this.bubble?.remove(),this.bubble=null}}class dK{constructor(e,n,r){this.themeColors={},this.steps=[],this._onError=null,this._onEnd=null,this._onRunStep=null,this._onInterrupt=null,this._onSubguide=null,this._onSubguideStep=null,this._onSubguideInterrupt=null,this._previousTrigger=null,this.stopped=!1,this.cleanupFunctions=[],this.shouldDisplayCompletionBar=!0,this.parentTour=null,this.endStepKey=null,this.variables=null,this.featureFlags=[],this.container=e,this.steps=n,this.trail=new RW(this.steps,r.answers??{}),this.themeColors=r.themeColors??yl,this.tourI18n=new xW(r.interfaceLocale),this.shouldDisplayCompletionBar=r.completion??!1,this.featureFlags=r.featureFlags??[],this.guideChecker=new OW(r.reportFindTargetOutcome??null),this.control=new NW(this.goToStep.bind(this),this.stop.bind(this),this.error.bind(this)),this._previousTrigger=r.previousTrigger??null,this.parentTour=r.parentTour??null,this.endStepKey=r.endStepKey??null,this.currentTourStatus=r.currentTourStatus,this.algoSettings=r.algoSettings??null,this.handleMultiPageTrigger=r.handleMultiPageTrigger,this.bubbleController=new fK,this.stepFactory=new cK({tourControl:this.control,tourI18n:this.tourI18n,trail:this.trail,guideChecker:this.guideChecker,algoSettings:this.algoSettings,themeColors:this.themeColors,cleanupFunctions:this.cleanupFunctions,multiPageTrigger:this.multiPageTrigger.bind(this),setPreviousTrigger:i=>{this._previousTrigger=i},shouldDisplayCompletionBar:this.shouldDisplayCompletionBar,featureFlags:this.featureFlags,container:this.container,bubbleController:this.bubbleController}),this.variables=r.variables??[],RO("guide"),nv("guide",this.variables)}start(e=null){if(Re.debug("[TOUR] Starting tour"),this.steps.length===0){Re.debug("[TOUR] No steps in the tour, stopping.");return}if(this._previousTrigger==="page change"&&typeof this.endStepKey=="string"&&this.endStepKey.length>0&&this.steps.find(i=>i.next_step===e)?.step_key===this.endStepKey){Re.debug("[TOUR] Tour reached end step key after page change, ending tour."),this._onEnd?.();return}const n=e==null?this.steps.find(r=>r.is_first!=null&&!!r.is_first)??null:typeof e=="function"?this.steps.find(r=>e(r))??this.steps.find(r=>r.is_first!=null&&!!r.is_first)??null:this.steps.find(r=>r.id===e)??this.steps.find(r=>r.is_first!=null&&!!r.is_first)??null;n!=null&&(Re.debug("[TOUR] Starting tour at step",n.id),this.run(n))}goToStep(e){if(this.control.currentStep==null||this.control.currentStep.step_key===this.endStepKey||e===null||e===0){this.bubbleController.remove(),typeof this._onEnd=="function"&&this._onEnd(),Re.debug("[TOUR] Tour end reached. Stopping.");return}Re.debug(`[TOUR] Going to next step (stepId: ${e}).`);const n=this.steps.find(r=>r.id===e);n!=null?(Re.debug(`[TOUR] Next step found (stepId: ${n.id}), running it.`),this.run(n)):this.error("Next step not found",this.control.currentStep)}stop(){Re.debug("[TOUR] Tour received stop command. Stopping tour."),!this.stopped&&(this.bubbleController.remove(),this.stopped=!0,this.control.finderAbortController.abort(),typeof this._onInterrupt=="function"&&this._onInterrupt(),this.cleanupFunctions.forEach(e=>{e()}),this.cleanupFunctions=[])}getGuideId(){try{return this.steps[0].guide_id??null}catch(e){return Re.error(e,"Could not get guide id from tour"),null}}error(e,n){Re.error(e instanceof Error?e.message:e,"[TOUR] An error occurred on step",n.id),typeof this._onError=="function"&&this._onError(typeof e=="string"?new Error(e):e,n)}async run(e){if(Re.debug(`[TOUR] Running step (stepId: ${e.id})...`),this.bubbleController.remove(),e.delay!=null&&e.delay>0&&(Re.debug(`[TOUR] Waiting for ${e.delay}ms before running the step...`),await mb(e.delay),Re.debug(`[TOUR] Finished waiting for ${e.delay}ms, running the step...`)),this.stopped){Re.debug(`[TOUR] Tour has been stopped during the delay. Aborting step run (stepId: ${e.id}).`);return}switch(this.control.currentStep=e,typeof this._onRunStep=="function"&&this._onRunStep(e,this.trail.getCurrentStep(),this.getTourStatus()),this.trail.pushStep(e,this._previousTrigger),e.step_type){case Po.INTRO:case Po.OUTRO:this.stepFactory.createIntroOutroStep(e).run();break;case Po.VARIABLE:this.stepFactory.createVariableStep(e).run();break;case Po.CONDITION:this.stepFactory.createConditionStep(e).run();break;case Po.QUESTION:this.stepFactory.createQuestionStep(e).run();break;case Po.AUTO:this.stepFactory.createAutoStep(e).run();break;case Po.SUBGUIDE:this.runSubguide(e);break;default:this.stepFactory.createRegularStep(e).run();break}}runSubguide(e){Re.debug(`[TOUR] Running subguide step (stepId: ${e.id}).`);const{subguide:n}=e;n?.guide_id!=null?(Re.debug(`[TOUR] Subguide found (guideId: ${n.guide_id}) for subguide step (stepId: ${e.id}), getting guide.`),this._onSubguide?.(n.guide_id).then(r=>{Re.debug(`[TOUR] Subguide fetched (guideId: ${n.guide_id}) for subguide step (stepId: ${e.id}), setting up subguide tour.`);const i=this.getTourOptions(this,r?.variables);i.endStepKey=n.end_step_key??null,i.parentTour=this,i.themeColors=this.themeColors??yl;const o=()=>{this._onSubguideInterrupt!==null&&r?.guide!=null&&this._onSubguideInterrupt(r.guide),Re.debug(`[TOUR] Subguide interrupted by user (stepId: ${e.id})`),this.stop()},l={steps:r?.steps??[],options:{...i,handleMultiPageTrigger:this.handleMultiPageTrigger},onEnd:()=>{this.trail.concat(c.trail),this.goToStep(e.next_step),RO("guide"),nv("guide",this.variables??void 0)},onInterrupt:o,onRunStep:f=>{r?.guide!=null&&this._onSubguideStep?.(r.guide,f)},onSubguideStep:this._onSubguideStep??void 0},c=TT(this.container,l);c.onSubguide(this._onSubguide),Re.debug(`[TOUR] Starting subguide tour (guideId: ${n.guide_id}) for subguide step (stepId: ${e.id})...`),n.step_key!=null?c.start(f=>f.step_key===n.step_key):c.start()})):Re.debug(`[TOUR] No subguide found (id is null) for subguide step (stepId: ${e.id}).`)}multiPageTrigger(e){if(e.next_step!=null){const n=this.getTourStatus();this.handleMultiPageTrigger(n,e)}}getTourStatus(){const e=Ng("guide")??{};return{guideId:this.getGuideId(),lastStepId:this.control.currentStep?.id??null,nextStepId:this.control.currentStep?.next_step??null,tourOptions:this.getTourOptions(this,e),interruptedSubguides:this.getInterruptedSubguides(this,this.parentTour??void 0),interruptedOnURL:null,shouldResume:!1,interruptedOnTimestamp:null,endStepKey:this.endStepKey??null,domain:null}}getInterruptedSubguides(e,n){if(n==null){const o=this.getGuideId();if(o==null)throw new Error("No currentGuideId");return this.currentTourStatus?.interruptedSubguides==null?{}:this.currentTourStatus.interruptedSubguides[o]!=null?this.currentTourStatus.interruptedSubguides:{}}const r={},i=(o,l)=>{const c=o.getGuideId(),f=l.getGuideId(),g=l.control.currentStep?.id??null;if(c===null)throw new Error("Unable to get guideId");if(f===null)throw new Error("Unable to get parentGuideId");Object.assign(r,{[c]:{parentGuideId:f,interruptedOnStepId:g,tourOptions:this.getTourOptions(l,Ng("guide")??{})}}),l.parentTour!==null&&i(l,l.parentTour)};return i(e,n),r}getTourOptions(e,n={}){return{reportFindTargetOutcome:e.guideChecker.report.bind(e.guideChecker),guide_id:e.getGuideId(),step_id:e.control.currentStep?.next_step??null,interfaceLocale:e.tourI18n.getLocale(),variables:Object.entries(n).map(([r,i])=>({name:r,value:i})),currentTourStatus:e.currentTourStatus,featureFlags:e.featureFlags,completion:e.shouldDisplayCompletionBar,answers:e.trail.getAnswers(),endStepKey:e.endStepKey,algoSettings:e.algoSettings}}onEnd(e){this._onEnd=e}onError(e){this._onError=e}onRunStep(e){this._onRunStep=e}onInterrupt(e){this._onInterrupt=e}onSubguide(e){this._onSubguide=e}onSubguideStep(e){this._onSubguideStep=e}onSubguideInterrupt(e){this._onSubguideInterrupt=e}}const TT=(t,e)=>{const n=new dK(t,e.steps.map(r=>{const i={};return"paths"in r&&r.paths instanceof Qi&&(i.paths=r.paths.serialize()),"highlight_target"in r&&r.highlight_target instanceof Qi&&(i.highlight_target=r.highlight_target.serialize()),{...r,...i}}),e.options);return e.onEnd!=null&&n.onEnd(e.onEnd),e.onRunStep!=null&&n.onRunStep(e.onRunStep),e.onInterrupt!=null&&n.onInterrupt(e.onInterrupt),e.onSubguide!=null&&n.onSubguide(e.onSubguide),e.onSubguideStep!=null&&n.onSubguideStep(e.onSubguideStep),e.onError!=null&&n.onError(e.onError),n};var gL=(t=>(t.REGULAR="regular",t.INTRO="intro",t.OUTRO="outro",t.QUESTION="question",t.CONDITION="condition",t.VARIABLE="variable",t.SUBGUIDE="subguide",t.AUTO="auto",t))(gL||{});const hK=(t,e=1)=>{const n=(Array.isArray(e)?e:[e]).filter(pK),r={depth:0,nextDepth:null,previous:null,content:""};let i=[],o=[],l={},c={};const f=(T,S=null,O=null)=>{const V={id:-T.id,next_step:S,previous:T.id,step_type:Po.DEFAULT_CONDITION,depth:T.depth>0?T.depth+1:1,nextDepth:O};i.push(V),l[T.id]=[V],p(T.id),l[T.id]=[],y(T),p(T.id)},g=(T,S)=>{const O=t.find(B=>B.id===T.next_step);if(O==null)return T.step_type===Po.CONDITION&&f(T),null;const $={...O,...r},V=i.find(B=>B.id===O.id);if(V!=null)T.step_type!==Po.CONDITION&&(i=i.map(B=>{if(B.id===T.id){const ne={...B,nextDepth:V.depth};return A(ne),ne}return B})),T.step_type===Po.CONDITION&&f(T,$.id,V.depth);else if(V==null)if(T.step_type===Po.CONDITION)f(T,$.id,T.depth+2);else{const B=ST([...$.translations],S),ne=$.question!=null?{...$.question}:null,D=_($,B),X={...$,depth:T.depth+1,nextDepth:T.depth+2,previous:T.id,title:D,content:B?.content,question:ne!=null?h(ne):null};return A(X),i.push(X),X}return null},y=T=>{const S=T.conditions;S==null||S?.length<=0||S.forEach(O=>{const $={...O,depth:T.depth+1,step_type:Po.CHILD_CONDITION,previous:T.id,nextDepth:O?.next_step!=null?T.depth+2:null};i.push($);const V=g($,n);V!=null&&l[T.id].push(V)})},h=T=>{if(T.answers?.length>0){const O=[...T.answers]?.map($=>{const V=ST([...$.translations],n);return{...$,title:V?.content}});return{...T,answers:O}}return T},p=T=>{l[T]?.forEach(S=>{for(;S!=null&&S?.step_type!==Po.CONDITION;)S=g(S,n);S!=null&&S.step_type===Po.CONDITION&&(c[S.id]=S)})},E=()=>{const T=Object.values(c),S=Object.keys(c);return T.forEach((O,$)=>{const V=S[$];delete c[V],g(O,n)}),c},A=T=>{o[T.depth]=Number.isNaN(o[T.depth])?1:o[T.depth]+1,T.identifier=`${T.depth}${o[T.depth]>1?String.fromCharCode(96+o[T.depth]):""}`},_=(T,S)=>{if(T.step_type===gL.AUTO){const O=T.auto_step_information;if(O==null)return;const $=O.meta!=null&&O.meta.length>=0?JSON.parse(O.meta):null;switch(O.step_auto_type){case Mg.AUTOFILL:return"Auto Fill";case Mg.CLICK:return"Auto Click";case Mg.CHECKBOX:return $?.step_auto_checkbox_value??!1?"Auto Check":"Auto Uncheck"}}return S?.preview},I=()=>{const T=t.find(ne=>ne.is_first);if(o=[],l={},c={},i=[],T==null)return i;const S=ST([...T.translations],n),O=T.question!=null?{...T.question}:null,$=_(T,S),V={...T,title:$,content:S?.content,depth:1,previous:null,identifier:"1",nextDepth:T.next_step!=null?2:null,question:O!=null?h(O):null};i.push(V),C(V);const B=Object.values(c);return v(B),[...i].sort(function(ne,D){return ne.depth-D.depth})},C=T=>{const S=g(T,n);S!=null&&C(S)},v=T=>{if(T?.length>0){c=E();const S=Object.values(c);v(S)}};return I()};function ST(t,e){let n;if(t.length===0)return null;for(let r=0;r<e.length&&n===void 0;r++){const i=e[r];n=t.find(o=>o.lang_id===i)}return n??t[0]}function pK(t){return t!==null}const gK=()=>{const t=Za();return{fetchGuide:xe.useCallback(async n=>{const r=typeof n=="number"?`${Ii("PLAYER_URL")}/api/guides/${n}`:`${Ii("PLAYER_URL")}/api/guides/uuid/${n}`;return t(r,{method:"GET"}).then(i=>{if(i.status!==200)throw new Eu({expected:200,received:i.status});if(typeof i.body=="string")throw new Error("Response body is a string, expecting a JSON object");return i.body}).then(i=>{if(!i.success)throw new Error(i.error);return{...i.guide,created_at:new Date(i.guide.created_at),updated_at:i.guide.updated_at!==null?new Date(i.guide.updated_at):null,variables:i.guide.variables.map(o=>({...o,created_at:new Date(o.created_at),updated_at:o.updated_at!==null?new Date(o.updated_at):null}))}})},[t])}};let np=null,AT=!1;const mK={startAtStep:null,tourOptions:{},eventType:"start",extraVariables:[]},rp=()=>{const t=Za(),e=qh(),n=Wa(),r=Qu(),i=M1(),{theme:o}=Kc(),l=ml(),{fetchGuide:c}=gK(),f=k1(),g=SO(),y=TO(),{data:h}=Jy(),{currentLanguage:p,currentLanguageId:E,defaultProjectLanguage:A}=Gi(),{history:_,currentTourStatusRef:I,forgetCurrentTourStatus:C,setCurrentTourStatus:v}=bT(),T=ev(),{projectLanguages:S}=Gi(),O=xe.useCallback(async D=>await r.fetchQuery({queryKey:["guide_steps",D],staleTime:0,gcTime:0,queryFn:async()=>{try{const ve=new URLSearchParams;ve.append("with","conditions,question,subguide,variable,autoStepInformation,question.answers"),ve.append("guide_id",D.toString());const ie=await t(`${Ii("PLAYER_URL")}/api/guides/${D}/steps?${ve.toString()}`,{method:"GET"}).then(Me=>Me.body);if(!ie.success)throw new Error("Fetching guides failed");const ye=[E,OZ,A?.legacy_id??null];return hK(ie.steps,ye)}catch(ve){throw Re.error(ve,"Failed to get guide steps"),ve}}}),[r,t,E,A]),$=xe.useCallback(async D=>await r.fetchQuery({queryKey:["guide",D],staleTime:0,gcTime:0,queryFn:async()=>c(D)}),[r,c]),V=xe.useCallback(async(D,X={})=>{const{startAtStep:ve,tourOptions:ie,eventType:ye,extraVariables:Ne}={...mK,...X},Me=typeof D=="object"?D:await $(D);if(Me?.id==null){const Ye=typeof D=="object"?D.id:D;Re.error("Error / Play Guide","Unavailable guide.id",{id:Ye});return}Re.trace("Starting guide",{guideId:Me.id}),no.trigger("close-player");const oe={guideId:Me.id,toolId:Me.tool_id,guideName:Ce(Me)};switch(ye){case"start":n.startGuide(oe);break;case"resume":n.resumeGuide(oe);break;case"restart":n.restartGuide(oe);break;case"autoResume":n.autoResumeGuide(oe);break}try{const Ye=yK(ie.variables??Me.variables,Ne),et=await O(Me.id);np!==null&&(np.stop(),np=null);const Y=(M,x,U)=>{if(!(h?.player.tools.find(de=>de.id===Me.tool_id)?.config.guide_checker.enabled??!0))return;Re.trace("Lookup outcome target",{guideId:Me.id,step_id:M.id,lookup_outcome:U});const he=l.find(de=>de.id===Me.tool_id)?.uuid;he&&x&&f&&M.step_key&&f&&n.lookupElement({guideId:Me.uuid,toolId:he,stepElementHash:x,stepKey:M.step_key,lookupOutcome:U,companyUuid:f,stepId:M.uuid,profileUuids:g,tagUuids:y})},Ee={...ie,algoSettings:T,interfaceLocale:p,variables:Ye,completion:Me.completion,themeColors:o.colors,reportFindTargetOutcome:Y,handleMultiPageTrigger:(M,x)=>{v({...M,domain:location.hostname,shouldResume:!0,shouldResumeOnlyOnDifferentTab:x.triggers?mL(x.triggers):!1})},currentTourStatus:I.current,featureFlags:i},Pe=async()=>{const x=I.current?.interruptedSubguides;if(x?.[Me.id]!=null){const U=x[Me.id],he={steps:await O(U.parentGuideId),options:{reportFindTargetOutcome:Y,...U.tourOptions,handleMultiPageTrigger:(ot,wt)=>{v({...ot,domain:location.hostname,shouldResume:!0,shouldResumeOnlyOnDifferentTab:wt.triggers?mL(wt.triggers):!1})},currentTourStatus:I.current,featureFlags:i},onEnd:Pe,onRunStep:Xe,onInterrupt:Ze,onSubguide:at,onSubguideStep:jt,onError:ht};TT(e,he).start(U.tourOptions.step_id),C()}else{if(!AT&&no.trigger("open-player"),Ve)return;Ve=!0,Re.trace("Guide/End",Me.id),n.endGuide({guideId:Me.id,toolId:Me.tool_id,guideName:Ce(Me)}),_t(),_.delete(Me.id)}},Xe=(M,x,U)=>{Re.trace("Running next step",{stepId:M.id}),n.displayStep({guideId:Me.id,toolId:Me.tool_id,stepId:M.id,guideName:Ce(Me)}),M.next_step===null&&!Ve&&(Ve=!0,Re.trace("Last step reached, the guide is finished",{guideId:Me.id}),n.endGuide({guideId:Me.id,toolId:Me.tool_id,guideName:Ce(Me)})),v(U)},Ze=()=>{Ve||(Re.trace("The current guide was interrupted",{guideId:Me.id}),n.abortGuide({guideId:Me.id,toolId:Me.tool_id,guideName:Ce(Me)})),!AT&&no.trigger("open-player");const M=I.current;if(M==null)throw new Error("Logical error, tourStatus should never be null at that point");const x={...M,shouldResume:!1,interruptedOnTimestamp:Date.now(),interruptedOnURL:location.href};v(x),_.add(x)},at=async M=>Promise.all([c(M),O(M)]).then(([x,U])=>x===null?(Re.error("Error / Subguide","Failed loading subguide.",{guideId:M}),null):(n.startGuide({guideId:x.id,toolId:x.tool_id,guideName:Ce(x)}),{guide:x,steps:U,variables:x.variables})).catch(x=>(Re.error(x),null)),jt=(M,x)=>{n.displayStep({guideId:M.id,toolId:M.tool_id,guideName:Ce(M),stepId:x.id}),x.next_step===null&&n.endGuide({guideId:M.id,toolId:M.tool_id,guideName:Ce(M)})},xt=M=>{Re.trace("Subguide was interrupted",{guideId:M.id}),n.abortGuide({guideId:M.id,toolId:M.tool_id,guideName:Ce(M)})},ht=(M,x)=>{Ue.onInterrupt=()=>null,Re.trace("An error occurred while playing the guide",{guideId:Me.id,step_id:x.id,error:M}),no.trigger("open-player"),_t()},Ue=TT(e,{steps:et,options:Ee,onEnd:Pe,onRunStep:Xe,onInterrupt:Ze,onSubguide:at,onSubguideStep:jt,onError:ht});Ue.onSubguideInterrupt(xt),np=Ue;let Ve=!1;const _t=()=>{Ue?.stop(),Ve=!0,no.removeListener("player-opened",_t)};Me.isRead=!0,Ue.start(ve??void 0),no.on("player-opened",_t)}catch(Ye){Re.error(Ye)}function Ce(Ye){return Ye.translations.reduce((et,{lang_id:Y,title:Ee})=>{const Pe=S.find(Xe=>Xe.legacy_id===Y)?.locale;return Pe!==void 0&&(et[Pe]=Ee),et},{})}},[f,g,y,h?.player.tools,l,e,n,i,_,I,o,p,T,S,$,O,c,v,C]),B=xe.useCallback(D=>{AT=!!D},[]),ne=xe.useCallback(()=>{np!==null&&(np.stop(),np=null)},[]);return{playGuide:V,setPreventPlayerOpening:B,stop:ne}};function yK(t,e){const n=[...e];for(const r of t)n.some(i=>i.name===r.name)||n.push(r);return n}function mL(t){return t.some(e=>{if(e.trigger_type!==Mo.MULTIPAGE)return!1;try{if(typeof e.trigger_option!="string")return!1;const n=JSON.parse(e.trigger_option);return typeof n!="object"||n==null||!("shouldTriggerOnlyOnTabChange"in n)?!1:n.shouldTriggerOnlyOnTabChange}catch{return!1}})}const vK=450,vv=()=>{const t=qh(),e=M1(),{playGuide:n}=rp(),{isAuthenticated:r}=ms(),i=xe.useCallback(function(l,c,f){const g=new Bj(t);return g.draggable=e.includes(ep.DRAGGABLE_BUBBLE),g.displayMode=l.display.mode,g.title=l.title,g.content=VO(l.body),g.width=l.display.width!==null&&l.display.width>0?l.display.width:vK,l.display.guide_id!=null&&g.addAction(ns.t("launch_guide"),()=>{r&&(n(l.display.guide_id,{tourOptions:f}).catch(Re.error),g.remove(),typeof c=="function"&&c(l))},{disabled:!r,title:r?void 0:ns.t("guide_not_available")}),g.onClose=()=>{typeof c=="function"&&c(l)},g},[n,e,t,r]);return xe.useCallback(function(l,c={}){const{onOpen:f=()=>{},onClose:g=()=>{},languageOptions:y={interfaceLocale:ns.language}}=c;i(l,g,y).show(),f(l),Re.trace("News has been opened",l),no.trigger("close-player")},[i])},yL=(t,e)=>{Re.debug("Checking if the news should be displayed based on the conditions",{newsId:t.id});const n=Pd(t.tool.client_side_conditions,e);if(n?Re.debug("The tool conditions are met, continuing the process of displaying the news",{newsId:t.id}):Re.debug("The tool conditions are not met, the news will not be displayed",{newsId:t.id}),!n)return!1;if(t.client_side_conditions.length>0){Re.debug("The news itself has conditions, checking those",{newsId:t.id});const r=Pd(t.client_side_conditions,e);return r?Re.debug("The news conditions are met, continuing the process of displaying the news",{newsId:t.id}):Re.debug("The news conditions are not met, the news will not be displayed",{newsId:t.id}),r}return Re.debug("The news itself has no conditions, checking the tool conditions",{newsId:t.id}),n};function IT(t){Re.debug("Checking if the content should be displayed based on the date conditions",{contentId:t.id});const e=new Date;return t.display.not_before!==null&&t.display.not_before>e?(Re.debug(`The content will not be displayed because the start date is (${t.display.not_before.toLocaleDateString()}).`,{contentId:t.id,not_before:t.display.not_before.toISOString()}),!1):t.display.not_after!==null&&t.display.not_after<e?(Re.debug(`The content will not be displayed because the end date is ${t.display.not_after.toLocaleDateString()}`,{contentId:t.id,not_after:t.display.not_after.toISOString()}),!1):(Re.debug("The content date conditions are met, continuing the process of displaying the content",{contentId:t.id}),!0)}function _K(){const{isAuthenticated:t}=ms(),e=vv(),n=Wa(),{config:{host:r}}=zs(),{offlineInitData:i}=B1(),{newsHasBeenRead:o,markNewsAsRead:l}=bK(),c=xe.useMemo(()=>i?.contents.news,[i]),f=xe.useMemo(()=>c?.filter(g=>yL(g,r)).filter(g=>!o(g)),[c,r,o]);xe.useEffect(()=>{if(t||f==null||f.length===0)return;const g=f.find(y=>IT(y));g!==void 0&&(e(g,{onClose:async y=>{l(y)}}),n.autoDisplayOfflineNews({newsId:g.id,toolId:g.tool_id}))},[n,f,t,e,l])}function bK(){const[t,e]=xe.useState(EK),n=xe.useCallback(i=>!!t[i.id],[t]),r=xe.useCallback(i=>{e(o=>({...o,[i.id]:!0}))},[]);return xe.useEffect(()=>{wK(t)},[t]),{newsHasBeenRead:n,markNewsAsRead:r}}const vL="offlineNewsRead";function EK(){const t=localStorage.getItem(vL);return t!==null?JSON.parse(t):{}}function wK(t){localStorage.setItem(vL,JSON.stringify(t))}function TK(t){return pe.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:134,height:56,fill:"none",...t,children:[pe.jsxs("g",{clipPath:"url(#a)",children:[pe.jsx("mask",{id:"b",width:134,height:56,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"luminance"},children:pe.jsx("path",{fill:"#fff",d:"M133.248 0H.751v56h132.497V0Z"})}),pe.jsxs("g",{mask:"url(#b)",children:[pe.jsx("path",{fill:"#F5F3F3",d:"M106.293 32.425c-1.976 0-10.87 1.656-16.8-4.31-5.93-5.965-5.272-15.244-4.283-16.238.988-.994-1.647-2.32 0-3.977 1.646-1.656 2.964.994 3.953 0 .988-.994 10.21-1.656 16.14 4.31 5.929 5.965 4.283 14.914 4.283 16.902 0 1.278-.408 1.873-.699 2.134-.167.15-.326.308-.475.478-.259.292-.849.703-2.121.703l.002-.002Z"}),pe.jsx("path",{fill:"#242F42",d:"M97.423.007c-.156-.012-4.44-.17-6.76 1.915l-.199.2c-2.072 2.335-1.915 6.642-1.903 6.804.156.013 4.44.17 6.761-1.914l.198-.2C97.592 4.477 97.436.17 97.423.007ZM6.495 2.196v25.13h13.276v4.839H.75V2.195h5.744ZM33.43 32.463c-2.155 0-4.043-.47-5.66-1.413-1.617-.943-2.872-2.255-3.765-3.938-.893-1.683-1.34-3.625-1.34-5.823 0-2.082.447-3.938 1.34-5.564a10.09 10.09 0 0 1 3.682-3.854c1.56-.943 3.346-1.413 5.362-1.413 2.015 0 3.843.435 5.404 1.307 1.56.87 2.77 2.104 3.637 3.704.866 1.6 1.311 3.453 1.34 5.564 0 .315-.022.665-.063 1.049-.042.386-.105.792-.191 1.22H28.538c.112.913.404 1.691.873 2.334a4.922 4.922 0 0 0 1.744 1.498c.695.357 1.498.534 2.405.534 1.02 0 1.95-.214 2.786-.642.837-.428 1.439-1.014 1.808-1.755l4.851 1.413c-.851 1.826-2.121 3.246-3.809 4.26-1.688 1.014-3.61 1.519-5.766 1.519Zm4.044-13.143a4.66 4.66 0 0 0-.68-2.16 4.228 4.228 0 0 0-1.553-1.5c-.639-.356-1.37-.533-2.192-.533-.71.03-1.377.221-2.001.578a5 5 0 0 0-1.595 1.454c-.44.616-.732 1.334-.873 2.161h8.894ZM47.941 10.758h4.937l.384 2.097a8.032 8.032 0 0 1 2.446-1.735c.95-.443 1.994-.665 3.129-.665 1.333 0 2.566.293 3.7.879a7.2 7.2 0 0 1 2.768 2.505c.736-1.055 1.73-1.882 2.98-2.483 1.246-.6 2.595-.898 4.043-.898 1.673 0 3.128.357 4.361 1.07 1.233.714 2.192 1.748 2.872 3.104.68 1.356 1.02 3.032 1.02 5.03v12.5h-5.448V20.347c0-1.598-.354-2.811-1.064-3.64-.709-.827-1.717-1.24-3.02-1.24-1.304 0-2.376.42-3.13 1.262-.75.841-1.127 2.092-1.127 3.746v11.687h-5.448V20.347c0-1.598-.313-2.811-.937-3.64-.623-.827-1.602-1.24-2.935-1.24s-2.383.42-3.065 1.262c-.68.841-1.02 2.077-1.02 3.704v11.73h-5.448V10.757h.002ZM114.312 10.758h4.936l.384 2.183a7.258 7.258 0 0 1 2.491-1.819 7.593 7.593 0 0 1 3.17-.664c1.702 0 3.141.357 4.32 1.07 1.177.714 2.077 1.748 2.703 3.104.624 1.356.937 3.032.937 5.03v12.5h-5.448V20.347c0-1.598-.333-2.826-1-3.682-.668-.857-1.654-1.285-2.958-1.285-1.304 0-2.348.428-3.043 1.285-.695.856-1.042 2.111-1.042 3.768v11.73h-5.448V10.757h-.002ZM52.21 35.132h1.29v16.315h-1.29V35.132ZM62.071 51.607c-1.054 0-1.986-.254-2.793-.763-.808-.507-1.437-1.211-1.89-2.104-.451-.894-.677-1.928-.677-3.094 0-1.108.23-2.095.69-2.958a5.213 5.213 0 0 1 1.889-2.036c.8-.492 1.712-.74 2.737-.74 1.025 0 1.91.223 2.703.671a4.82 4.82 0 0 1 1.854 1.844c.445.782.66 1.673.644 2.673 0 .152-.005.315-.013.49-.007.174-.02.359-.034.558h-9.07c.014.834.195 1.57.543 2.208.347.637.81 1.134 1.391 1.491.58.357 1.24.534 1.98.534.934 0 1.736-.194 2.409-.58a3.365 3.365 0 0 0 1.458-1.65l1.108.456c-.423.972-1.062 1.715-1.923 2.23-.858.516-1.861.772-3.009.772l.003-.002Zm3.755-6.599c.015-.758-.135-1.424-.452-2.003a3.494 3.494 0 0 0-1.346-1.366c-.58-.335-1.262-.5-2.048-.5-.694 0-1.318.168-1.876.5a3.963 3.963 0 0 0-1.367 1.376 4.444 4.444 0 0 0-.622 1.99h7.713l-.002.003ZM77.746 51.447l-.09-2.412c-.316.82-.81 1.452-1.483 1.9-.67.448-1.519.672-2.544.672-.814 0-1.507-.126-2.081-.377-.573-.25-1.016-.61-1.324-1.08-.308-.47-.465-1.032-.465-1.684 0-.955.355-1.732 1.064-2.333.71-.598 1.764-.967 3.166-1.102l3.664-.41v-.954c0-.787-.26-1.408-.78-1.856-.521-.447-1.24-.671-2.16-.671-.92 0-1.602.204-2.182.615-.58.408-.969.994-1.165 1.752L70.19 43.1c.286-1.017.822-1.802 1.605-2.356.785-.553 1.763-.832 2.94-.832 1.326 0 2.36.335 3.1 1.002.738.667 1.108 1.585 1.108 2.754v7.782h-1.2l.003-.002Zm-.09-5.712-3.687.433c-.966.105-1.678.344-2.138.716-.46.371-.69.876-.69 1.513 0 .638.223 1.138.668 1.502.445.364 1.082.546 1.91.546.874 0 1.603-.177 2.183-.534a3.366 3.366 0 0 0 1.31-1.48c.294-.63.441-1.338.441-2.128v-.568h.003ZM82.722 40.07h1.198l.069 2.025a4.03 4.03 0 0 1 1.04-1.229c.437-.349.934-.598 1.492-.75.557-.153 1.169-.168 1.832-.045v1.297c-.648-.135-1.235-.132-1.764.013a3.169 3.169 0 0 0-1.367.763c-.384.364-.683.82-.893 1.366-.21.546-.316 1.169-.316 1.865v6.077h-1.29V40.074l-.001-.005ZM91.09 40.07h1.198l.069 2.069a3.702 3.702 0 0 1 1.414-1.64c.626-.393 1.392-.59 2.294-.59.844 0 1.596.187 2.251.559.656.372 1.17.925 1.539 1.661s.555 1.671.555 2.81v6.508h-1.29v-6.372c0-1.29-.285-2.277-.858-2.958-.572-.682-1.372-1.024-2.397-1.024-1.086 0-1.938.364-2.556 1.093-.62.728-.927 1.813-.927 3.253v6.008h-1.29V40.069h-.002ZM105.137 37.522c-.287 0-.522-.091-.702-.273a.927.927 0 0 1-.272-.682c0-.288.09-.524.272-.706.18-.183.415-.274.702-.274.256 0 .479.091.667.273a.94.94 0 0 1 .284.707.903.903 0 0 1-.284.682.927.927 0 0 1-.667.273Zm-.656 2.55h1.267v11.377h-1.267V40.072ZM110.021 40.07h1.199l.069 2.069a3.692 3.692 0 0 1 1.414-1.64c.626-.393 1.391-.59 2.294-.59.844 0 1.595.187 2.251.559.655.372 1.169.925 1.538 1.661.37.736.556 1.671.556 2.81v6.508h-1.289v-6.372c0-1.29-.287-2.277-.859-2.958-.573-.682-1.373-1.024-2.398-1.024-1.085 0-1.937.364-2.556 1.093-.619.728-.927 1.813-.927 3.253v6.008h-1.289V40.069h-.003ZM131.959 40.07h1.199v9.1c0 1.442-.308 2.67-.927 3.687-.619 1.016-1.512 1.794-2.681 2.333-1.17.539-2.598.807-4.286.807l-.203-1.206c2.216-.014 3.904-.5 5.066-1.456 1.162-.955 1.742-2.344 1.742-4.165v-.409l.112.047c-.315.758-.836 1.41-1.56 1.957-.724.547-1.673.827-2.85.842-1.057 0-1.972-.24-2.747-.716-.776-.478-1.38-1.157-1.81-2.038-.431-.879-.644-1.912-.644-3.094 0-1.181.215-2.21.644-3.084.43-.871 1.032-1.55 1.81-2.037.775-.485 1.693-.729 2.747-.729.753 0 1.414.12 1.979.364.565.244 1.04.567 1.426.968.384.4.682.846.893 1.33l.09-2.502Zm-8.209 5.69c0 1.424.365 2.556 1.096 3.39.731.835 1.729 1.253 2.996 1.253.769 0 1.458-.19 2.07-.568.611-.38 1.088-.918 1.436-1.615.347-.696.521-1.516.521-2.458 0-.943-.174-1.78-.521-2.47-.348-.688-.827-1.224-1.436-1.604-.612-.379-1.301-.568-2.07-.568-1.252 0-2.248.42-2.986 1.263-.739.841-1.109 1.968-1.109 3.379l.003-.003Z"})]})]}),pe.jsx("defs",{children:pe.jsx("clipPath",{id:"a",children:pe.jsx("path",{fill:"#fff",d:"M.751 0h132.497v56H.751z"})})})]})}const Ro={login:"_login_69yt0_257",error:"_error_69yt0_25",step:"_step_69yt0_29",header:"_header_69yt0_35",upper:"_upper_69yt0_74",blue:"_blue_69yt0_83","step-actions":"_step-actions_69yt0_124",btn:"_btn_69yt0_139",loading:"_loading_69yt0_152",wave:"_wave_69yt0_162","pin-step":"_pin-step_69yt0_180","pin-input":"_pin-input_69yt0_1","sso-login":"_sso-login_69yt0_1","custom-logo":"_custom-logo_69yt0_226","login-button":"_login-button_69yt0_257"};function SK(){const{t}=Gi(),{theme:e}=Kc(),n=Wa(),{config:{ssoId:r}}=zs();xe.useEffect(()=>{const o=()=>{n.loginSuccess({method:"sso"}),no.removeListener("logged-in",o)},l=()=>{n.loginError()},c=f=>{const g=dx(f);g&&(no.on("logged-in",o),window.removeEventListener("message",c)),g===null&&l()};return dy.addFilteredWindowListener(window,c,"LoginSSO.tsx"),()=>{window.removeEventListener("message",c)}},[n]);const i=o=>{o!=null&&window.open(`${Ii("PLAYER_URL")}/sso/prepare/${o}`)};return pe.jsxs("div",{id:Ro["sso-login"],children:[e.loginScreen.customLogoUrl==null?pe.jsx(TK,{}):pe.jsx("div",{className:Ro["custom-logo"],children:pe.jsx("img",{src:e.loginScreen.customLogoUrl})}),pe.jsxs("div",{className:Ro.header,children:[pe.jsx("h2",{children:t("welcome")}),pe.jsx("p",{children:e.loginScreen.customWelcomeText??t("connect_phrase")})]}),pe.jsx("button",{type:"button",className:Ro["login-button"],onClick:()=>{i(r)},children:t("connect")})]})}const qA=class qA extends xe.Component{render(){return pe.jsxs("svg",{className:"lds-spinner",viewBox:"0 0 100 100","aria-hidden":"true",preserveAspectRatio:"xMidYMid",style:{background:"none",...this.props.style},children:[pe.jsx("g",{transform:"rotate(0 50 50)",children:pe.jsx("rect",{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#151e2f",children:pe.jsx("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.9166666666666666s",repeatCount:"indefinite"})})}),pe.jsx("g",{transform:"rotate(30 50 50)",children:pe.jsx("rect",{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#151e2f",children:pe.jsx("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.8333333333333334s",repeatCount:"indefinite"})})}),pe.jsx("g",{transform:"rotate(60 50 50)",children:pe.jsx("rect",{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#151e2f",children:pe.jsx("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.75s",repeatCount:"indefinite"})})}),pe.jsx("g",{transform:"rotate(90 50 50)",children:pe.jsx("rect",{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#151e2f",children:pe.jsx("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.6666666666666666s",repeatCount:"indefinite"})})}),pe.jsx("g",{transform:"rotate(120 50 50)",children:pe.jsx("rect",{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#151e2f",children:pe.jsx("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.5833333333333334s",repeatCount:"indefinite"})})}),pe.jsx("g",{transform:"rotate(150 50 50)",children:pe.jsx("rect",{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#151e2f",children:pe.jsx("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.5s",repeatCount:"indefinite"})})}),pe.jsx("g",{transform:"rotate(180 50 50)",children:pe.jsx("rect",{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#151e2f",children:pe.jsx("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.4166666666666667s",repeatCount:"indefinite"})})}),pe.jsx("g",{transform:"rotate(210 50 50)",children:pe.jsx("rect",{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#151e2f",children:pe.jsx("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.3333333333333333s",repeatCount:"indefinite"})})}),pe.jsx("g",{transform:"rotate(240 50 50)",children:pe.jsx("rect",{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#151e2f",children:pe.jsx("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.25s",repeatCount:"indefinite"})})}),pe.jsx("g",{transform:"rotate(270 50 50)",children:pe.jsx("rect",{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#151e2f",children:pe.jsx("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.16666666666666666s",repeatCount:"indefinite"})})}),pe.jsx("g",{transform:"rotate(300 50 50)",children:pe.jsx("rect",{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#151e2f",children:pe.jsx("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.08333333333333333s",repeatCount:"indefinite"})})}),pe.jsx("g",{transform:"rotate(330 50 50)",children:pe.jsx("rect",{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#151e2f",children:pe.jsx("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"0s",repeatCount:"indefinite"})})})]})}};qA.defaultProps={onClick:()=>null};let _v=qA;function AK(t){return pe.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 362 153",width:362,height:153,fill:"none",...t,children:[pe.jsx("mask",{id:"a",width:362,height:153,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"luminance"},children:pe.jsx("path",{fill:"#fff",d:"M362 0H0v153h362V0Z"})}),pe.jsxs("g",{mask:"url(#a)",children:[pe.jsx("path",{fill:"#FAE100",d:"M288.355 88.59c-5.4 0-29.701 4.525-45.901-11.774-16.201-16.3-14.403-41.65-11.703-44.366 2.7-2.716-4.498-6.34 0-10.866 4.498-4.525 8.1 2.717 10.8 0 2.701-2.716 27.897-4.525 44.098 11.774 16.2 16.3 11.702 40.748 11.702 46.181 0 3.49-1.116 5.117-1.911 5.83-.455.41-.889.84-1.297 1.304-.708.8-2.319 1.924-5.794 1.924l.006-.007Z"}),pe.jsx("path",{fill:"#71A4FA",d:"M264.121.02c-.427-.033-12.13-.464-18.472 5.232l-.542.544c-5.661 6.381-5.233 18.149-5.199 18.592.427.034 12.13.464 18.472-5.231l.542-.545c5.661-6.38 5.233-18.148 5.199-18.592Z"}),pe.jsx("path",{fill:"#242F42",d:"M15.693 6v68.66h36.27v13.22H0V6h15.693ZM89.284 88.693c-5.888 0-11.048-1.285-15.466-3.86-4.417-2.575-7.846-6.16-10.285-10.759-2.44-4.599-3.663-9.904-3.663-15.909 0-5.688 1.223-10.758 3.663-15.203 2.44-4.445 5.794-7.955 10.058-10.53 4.264-2.575 9.143-3.86 14.65-3.86s10.5 1.19 14.764 3.57c4.264 2.381 7.572 5.75 9.938 10.12 2.366 4.371 3.582 9.435 3.663 15.204 0 .86-.061 1.815-.174 2.864a37.641 37.641 0 0 1-.522 3.336H75.917c.307 2.494 1.103 4.619 2.386 6.374 1.283 1.755 2.867 3.12 4.765 4.095 1.898.975 4.09 1.459 6.57 1.459 2.787 0 5.327-.585 7.612-1.755 2.286-1.17 3.93-2.77 4.939-4.794l13.254 3.86c-2.326 4.989-5.795 8.868-10.406 11.639-4.612 2.77-9.865 4.149-15.753 4.149Zm11.047-35.907c-.153-2.185-.775-4.156-1.858-5.904-1.082-1.755-2.5-3.12-4.243-4.095-1.745-.975-3.743-1.459-5.989-1.459-1.938.08-3.763.605-5.467 1.58-1.704.975-3.161 2.3-4.357 3.974-1.203 1.681-1.999 3.645-2.386 5.904h24.3ZM128.93 29.393h13.487l1.049 5.729c1.858-1.95 4.09-3.53 6.683-4.74 2.594-1.211 5.447-1.816 8.548-1.816 3.643 0 7.011.8 10.112 2.4 3.102 1.6 5.621 3.88 7.559 6.846 2.012-2.885 4.726-5.144 8.141-6.785 3.408-1.64 7.091-2.454 11.047-2.454 4.572 0 8.548.975 11.917 2.925 3.368 1.95 5.988 4.774 7.846 8.479 1.858 3.705 2.787 8.284 2.787 13.744v34.151h-14.884V55.59c0-4.364-.969-7.679-2.907-9.945-1.938-2.26-4.692-3.389-8.254-3.389-3.562 0-6.49 1.15-8.548 3.45-2.052 2.3-3.081 5.715-3.081 10.234v31.932h-14.884V55.59c0-4.364-.856-7.679-2.56-9.945-1.704-2.26-4.377-3.389-8.02-3.389-3.642 0-6.51 1.15-8.374 3.45-1.858 2.3-2.787 5.675-2.787 10.12v32.046h-14.884v-58.48h.007ZM310.264 29.393h13.487l1.049 5.964c1.858-2.105 4.124-3.759 6.804-4.969 2.673-1.21 5.56-1.816 8.661-1.816 4.652 0 8.582.975 11.803 2.925 3.215 1.95 5.675 4.775 7.386 8.48 1.704 3.705 2.559 8.284 2.559 13.744v34.151h-14.884V55.59c0-4.364-.909-7.72-2.733-10.06-1.825-2.34-4.518-3.51-8.08-3.51-3.563 0-6.416 1.17-8.315 3.51-1.898 2.34-2.847 5.77-2.847 10.295v32.047H310.27v-58.48h-.006ZM140.592 95.986h3.522v44.574h-3.522V95.986ZM167.533 140.997c-2.881 0-5.427-.692-7.632-2.084-2.206-1.385-3.924-3.308-5.16-5.749-1.236-2.441-1.851-5.265-1.851-8.452 0-3.026.628-5.723 1.884-8.083 1.257-2.36 2.974-4.216 5.16-5.561 2.185-1.344 4.678-2.024 7.479-2.024 2.8 0 5.219.612 7.385 1.836 2.165 1.224 3.849 2.898 5.066 5.036 1.216 2.139 1.804 4.573 1.758 7.303 0 .417-.014.861-.034 1.338-.02.477-.053.982-.093 1.526h-24.782c.04 2.28.534 4.29 1.483 6.032.949 1.741 2.212 3.1 3.803 4.075 1.584.975 3.389 1.459 5.407 1.459 2.553 0 4.745-.531 6.583-1.587 1.831-1.056 3.161-2.555 3.983-4.505l3.028 1.244c-1.156 2.656-2.901 4.686-5.253 6.092-2.346 1.412-5.086 2.111-8.221 2.111l.007-.007Zm10.259-18.027c.04-2.071-.368-3.893-1.236-5.473-.863-1.574-2.092-2.818-3.676-3.732-1.584-.915-3.449-1.365-5.594-1.365-1.898 0-3.603.457-5.126 1.365-1.524.914-2.774 2.165-3.736 3.759-.97 1.593-1.538 3.409-1.698 5.439h21.073l-.007.007ZM210.359 140.56l-.247-6.589c-.862 2.239-2.212 3.967-4.05 5.191-1.831 1.223-4.15 1.835-6.951 1.835-2.225 0-4.117-.343-5.687-1.028-1.564-.686-2.774-1.668-3.616-2.952-.842-1.285-1.27-2.818-1.27-4.6 0-2.609.969-4.733 2.907-6.374 1.939-1.634 4.819-2.643 8.649-3.012l10.011-1.117v-2.609c0-2.151-.708-3.846-2.132-5.07-1.423-1.223-3.388-1.835-5.901-1.835s-4.378.558-5.962 1.681c-1.584 1.116-2.646 2.716-3.181 4.787l-3.215-1.116c.782-2.777 2.246-4.922 4.385-6.435 2.145-1.513 4.818-2.273 8.033-2.273 3.623 0 6.45.915 8.468 2.737s3.028 4.33 3.028 7.524v21.262h-3.275l.006-.007Zm-.247-15.606-10.072 1.183c-2.64.289-4.585.941-5.841 1.957-1.257 1.015-1.885 2.394-1.885 4.135 0 1.742.608 3.107 1.825 4.102 1.216.995 2.954 1.493 5.22 1.493 2.385 0 4.377-.485 5.961-1.46 1.584-.975 2.78-2.319 3.582-4.041.802-1.721 1.203-3.658 1.203-5.816v-1.553h.007ZM223.954 109.475h3.275l.187 5.534a11.014 11.014 0 0 1 2.841-3.356 11.174 11.174 0 0 1 4.076-2.05c1.524-.417 3.195-.458 5.006-.122v3.544c-1.771-.37-3.375-.363-4.818.034-1.444.396-2.687 1.089-3.736 2.084-1.05.995-1.865 2.239-2.44 3.732-.575 1.493-.862 3.194-.862 5.097v16.602h-3.522v-31.086l-.007-.013ZM246.817 109.475h3.275l.187 5.655c.863-1.903 2.152-3.396 3.863-4.478 1.711-1.076 3.803-1.614 6.269-1.614 2.306 0 4.358.511 6.149 1.526 1.791 1.016 3.195 2.528 4.204 4.539 1.009 2.01 1.517 4.566 1.517 7.679v17.778h-3.522v-17.408c0-3.524-.782-6.22-2.346-8.083-1.564-1.862-3.749-2.797-6.55-2.797-2.967 0-5.293.995-6.984 2.986-1.691 1.99-2.533 4.955-2.533 8.889v16.413h-3.522v-31.085h-.007ZM285.194 102.515c-.782 0-1.423-.248-1.918-.746-.495-.498-.742-1.123-.742-1.863 0-.787.247-1.432.742-1.93.495-.497 1.136-.746 1.918-.746.702 0 1.31.249 1.825.746.514.498.775 1.144.775 1.93 0 .747-.261 1.372-.775 1.863a2.536 2.536 0 0 1-1.825.746Zm-1.791 6.967h3.462v31.085h-3.462v-31.085ZM298.541 109.475h3.275l.187 5.655c.862-1.903 2.152-3.396 3.863-4.478 1.711-1.076 3.803-1.614 6.269-1.614 2.306 0 4.358.511 6.149 1.526 1.791 1.016 3.194 2.528 4.204 4.539 1.009 2.01 1.517 4.566 1.517 7.679v17.778h-3.522v-17.408c0-3.524-.782-6.22-2.346-8.083-1.564-1.862-3.75-2.797-6.55-2.797-2.967 0-5.293.995-6.984 2.986-1.691 1.99-2.533 4.955-2.533 8.889v16.413h-3.522v-31.085h-.007ZM358.477 109.475h3.275v24.866c0 3.94-.842 7.295-2.533 10.072-1.691 2.777-4.13 4.902-7.325 6.375-3.195 1.472-7.098 2.205-11.709 2.205l-.555-3.295c6.055-.04 10.667-1.365 13.841-3.98 3.175-2.609 4.759-6.402 4.759-11.377v-1.117l.307.128c-.862 2.071-2.285 3.853-4.264 5.346-1.978 1.493-4.571 2.259-7.786 2.299-2.887 0-5.387-.652-7.505-1.956-2.119-1.305-3.77-3.161-4.946-5.568-1.176-2.4-1.758-5.224-1.758-8.452 0-3.228.588-6.038 1.758-8.425 1.176-2.381 2.82-4.236 4.946-5.568 2.118-1.324 4.625-1.99 7.505-1.99 2.059 0 3.863.329 5.407.995 1.544.666 2.841 1.547 3.897 2.643a12.373 12.373 0 0 1 2.439 3.637l.247-6.838Zm-22.429 15.546c0 3.893.996 6.986 2.994 9.266 1.998 2.279 4.725 3.422 8.187 3.422 2.099 0 3.983-.517 5.654-1.553 1.671-1.035 2.974-2.508 3.923-4.411.949-1.903 1.424-4.142 1.424-6.717 0-2.576-.475-4.862-1.424-6.745-.949-1.882-2.259-3.348-3.923-4.384-1.671-1.035-3.555-1.553-5.654-1.553-3.422 0-6.142 1.15-8.16 3.45-2.019 2.299-3.028 5.379-3.028 9.232l.007-.007Z"})]})]})}function _L(){const t=Wa(),e=xe.useCallback(()=>{const i=()=>{t.loginSuccess({method:"password"}),no.removeListener("logged-in",i)};no.on("logged-in",i)},[t]),n=xe.useCallback(()=>{t.loginError()},[t]),r=xe.useCallback(()=>{t.logout()},[t]);return{listenToLoggedInEventThenSendLoginSuccessEvent:e,sendLoginErrorEvent:n,sendLogoutEvent:r}}function IK(){const[t,e]=xe.useState("username"),[n,r]=xe.useState(""),[i,o]=xe.useState(""),[l,c]=xe.useState("idle"),[f,g]=xe.useState(""),{authenticateWithEmailPassword:y,isAuthenticated:h}=ms(),{listenToLoggedInEventThenSendLoginSuccessEvent:p,sendLoginErrorEvent:E}=_L(),A=xe.useRef(null),_=xe.useRef(h);xe.useEffect(()=>{_.current!==h&&!h&&c("idle"),_.current=h},[h]),xe.useEffect(()=>{A.current!=null&&A.current.focus()},[t]);const I=(S,O)=>{switch(l==="error"&&c("idle"),O){case"username":r(S.target.value);break;case"password":o(S.target.value);break}},C=S=>{S.preventDefault(),t==="username"?v(S):t==="password"&&i!==""&&(c("loading"),y(n,i).then(()=>{p()}).catch(()=>{e("username"),c("error"),g("wrong_credentials"),E()}))},v=S=>{if(S.preventDefault(),n===""){c("error"),g("cant_be_empty");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)){c("error"),g("email_invalid");return}e("password"),c("idle"),g("")},T=S=>{S.preventDefault(),e("username"),r(""),o("")};return pe.jsxs("div",{id:Ro.login,className:l==="error"?Ro.error:"",children:[pe.jsx(AK,{className:"lemonlearning-logo-full"}),l==="error"&&pe.jsxs("div",{className:Ro.header,children:[pe.jsx("h4",{className:Ro.upper,children:pe.jsx(bu,{children:S=>S("error")})}),pe.jsx("p",{children:pe.jsx(bu,{children:S=>S(f)})})]}),l!=="error"&&t==="password"&&pe.jsxs("div",{className:Ro.header,children:[pe.jsx("h4",{className:Ro.upper,children:pe.jsx(bu,{children:S=>S("logger")})}),pe.jsx("p",{className:Ro.blue,children:n})]}),l!=="error"&&t==="username"&&pe.jsxs("div",{className:Ro.header,children:[pe.jsx("h4",{children:pe.jsx(bu,{children:S=>S("welcome")})}),pe.jsx("p",{children:pe.jsx(bu,{children:S=>S("connect_phrase")})})]}),pe.jsxs("div",{className:t==="password"?Ro["pin-step"]:"",children:[pe.jsxs("div",{className:Ro.step,children:[pe.jsx("label",{htmlFor:"email",children:pe.jsx(bu,{children:S=>S("email_address")})}),pe.jsx(bu,{children:S=>pe.jsx("input",{id:"email",value:n,type:"text",placeholder:S("email_placeholder"),autoComplete:"off",className:l==="error"?Ro.error:"",onChange:O=>{I(O,"username")},onKeyUp:O=>{(O.key==="Enter"||O.keyCode===13)&&C(O)}})}),pe.jsx("div",{className:Ro["step-actions"],children:pe.jsx("a",{className:Ro.btn,onClick:v,children:pe.jsx(bu,{children:S=>S("continue")})})})]}),pe.jsxs("div",{className:Ro.step,children:[l==="loading"&&pe.jsx("div",{className:Ro.loading,children:pe.jsx(_v,{})}),pe.jsx("label",{children:pe.jsx(bu,{children:S=>S("password")})}),pe.jsx(bu,{children:S=>pe.jsx("input",{value:i,ref:A,id:Ro["pin-input"],type:"password",placeholder:S("password_placeholder"),autoComplete:"off",className:l==="error"?Ro.error:"",onChange:O=>{I(O,"password")},onKeyUp:O=>{(O.key==="Enter"||O.keyCode===13)&&C(O)}})}),pe.jsxs("div",{className:Ro["step-actions"],children:[pe.jsxs("a",{href:"#",onClick:T,children:[pe.jsx(uL,{})," ",pe.jsx(bu,{children:S=>S("back")})]}),pe.jsx("a",{className:Ro.btn,onClick:C,children:pe.jsx(bu,{children:S=>S("connect")})})]})]})]}),pe.jsx("svg",{viewBox:"0 0 300 160",className:Ro.wave,children:pe.jsx("path",{d:"M 300 0 C 286 25 265 33 240 23 C 194 3 163 0 133 38 C 122 60 105 72 76 66 C 62 52 29 37 17 54 L 0 77 L 0 160 L 300 160 Z"})}),pe.jsx("svg",{viewBox:"0 0 300 160",className:Ro.wave,children:pe.jsx("path",{d:"M 300 0 C 270 35 258 40 217 29 C 177 17 150 14 119 46 C 104 57 81 88 62 80 C 47 88 37 64 16 73 L 0 89 L 0 160 L 300 160 Z"})})]})}function CK(){const{authType:t}=ms();return t==="sso"?pe.jsx(SK,{}):pe.jsx(IK,{})}function bL(){const{theme:t}=Kc(),[e,n]=xe.useState(()=>hL()??IW),r=xe.useCallback(i=>{n(i),cL()&&localStorage.setItem(fL,JSON.stringify(i))},[n]);return xe.useEffect(()=>{hL()!=null&&!t.isFixed||n({zone:AW[t.defaultPosition],ratio:.45})},[t.isFixed,t.defaultPosition,n]),{launcherPosition:e,setLauncherPositionAndCacheIt:r}}function RK({visible:t=!0}){const e=Wa(),{setPlayerPopInIsOpen:n}=yb(),{launcherPosition:r,setLauncherPositionAndCacheIt:i}=bL(),o=xe.useRef(null);_K();const l=()=>{n(c=>(c||e.displayLogin(),!c))};return t?pe.jsxs(pe.Fragment,{children:[pe.jsx(pL,{pushsCount:0,onClick:l,ref:o,launcherZoneAndRatio:r,setLauncherZoneAndRatio:i}),pe.jsx(aL,{launcher:o,launcherZoneAndRatio:r,children:pe.jsx(CK,{})})]}):null}var bv=(t=>(t.POST_INIT="post_init",t.APP_BOOT="app_boot",t.REWRITE_REQUEST="rewrite_request",t))(bv||{});const xK=new Map([["grc.cmar-paca.fr",{[bv.POST_INIT]:()=>{setInterval(()=>{const t=document.querySelectorAll('div[id*="Bg_"]'),e=document.querySelectorAll('div[id*="ContainerModal_"]'),n=n1-10;t?.forEach(r=>{r instanceof HTMLElement&&r.style.setProperty("z-index",n.toString())}),e?.forEach(r=>{r instanceof HTMLElement&&r.style.setProperty("z-index",n.toString())})},1e3)}}],["bil1ih303d",{[bv.APP_BOOT]:()=>{setTimeout(()=>{Array.prototype.find=function(t){return typeof t=="function"?find(this,t):this.find(t)}},500)}}],[12,{[bv.POST_INIT]:async()=>await new Promise(n=>{setTimeout(()=>{const r=+(sessionStorage.getItem("lastLLPlayerOpenedTimestamp")??0),o=Date.now()-r>=432e5;o&&sessionStorage.setItem("lastLLPlayerOpenedTimestamp",Date.now().toString()),n(o)},0)})}]]),NK=(t,e)=>{const n=Array.from(xK.entries()).reduce((i,[o,l])=>typeof o=="string"&&window.location.host.startsWith(o)||typeof o=="number"&&o===e?l:i,null);if(n?.[t]==null)return;const r=n[t];if(typeof r=="function")return r()};var Ib=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},OK={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},LK=class{#e=OK;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,e){return this.#e.setTimeout(t,e)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,e){return this.#e.setInterval(t,e)}clearInterval(t){this.#e.clearInterval(t)}},CT=new LK;function DK(t){setTimeout(t,0)}var Cb=typeof window>"u"||"Deno"in globalThis;function oc(){}function PK(t,e){return typeof t=="function"?t(e):t}function MK(t){return typeof t=="number"&&t>=0&&t!==1/0}function kK(t,e){return Math.max(t+(e||0)-Date.now(),0)}function RT(t,e){return typeof t=="function"?t(e):t}function FK(t,e){return typeof t=="function"?t(e):t}function EL(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:o,queryKey:l,stale:c}=t;if(l){if(r){if(e.queryHash!==xT(l,e.options))return!1}else if(!wv(e.queryKey,l))return!1}if(n!=="all"){const f=e.isActive();if(n==="active"&&!f||n==="inactive"&&f)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||i&&i!==e.state.fetchStatus||o&&!o(e))}function wL(t,e){const{exact:n,status:r,predicate:i,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(n){if(Ev(e.options.mutationKey)!==Ev(o))return!1}else if(!wv(e.options.mutationKey,o))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function xT(t,e){return(e?.queryKeyHashFn||Ev)(t)}function Ev(t){return JSON.stringify(t,(e,n)=>NT(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function wv(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>wv(t[n],e[n])):!1}var $K=Object.prototype.hasOwnProperty;function TL(t,e){if(t===e)return t;const n=SL(t)&&SL(e);if(!n&&!(NT(t)&&NT(e)))return e;const i=(n?t:Object.keys(t)).length,o=n?e:Object.keys(e),l=o.length,c=n?new Array(l):{};let f=0;for(let g=0;g<l;g++){const y=n?g:o[g],h=t[y],p=e[y];if(h===p){c[y]=h,(n?g<i:$K.call(t,y))&&f++;continue}if(h===null||p===null||typeof h!="object"||typeof p!="object"){c[y]=p;continue}const E=TL(h,p);c[y]=E,E===h&&f++}return i===l&&f===i?t:c}function SL(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function NT(t){if(!AL(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!AL(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function AL(t){return Object.prototype.toString.call(t)==="[object Object]"}function UK(t){return new Promise(e=>{CT.setTimeout(e,t)})}function BK(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?TL(t,e):e}function ZK(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function jK(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var OT=Symbol();function IL(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===OT?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var VK=class extends Ib{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!Cb&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},CL=new VK;function zK(){let t,e;const n=new Promise((i,o)=>{t=i,e=o});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}var HK=DK;function GK(){let t=[],e=0,n=c=>{c()},r=c=>{c()},i=HK;const o=c=>{e?t.push(c):i(()=>{n(c)})},l=()=>{const c=t;t=[],c.length&&i(()=>{r(()=>{c.forEach(f=>{n(f)})})})};return{batch:c=>{let f;e++;try{f=c()}finally{e--,e||l()}return f},batchCalls:c=>(...f)=>{o(()=>{c(...f)})},schedule:o,setNotifyFunction:c=>{n=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{i=c}}}var Ya=GK(),qK=class extends Ib{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!Cb&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},Rb=new qK;function WK(t){return Math.min(1e3*2**t,3e4)}function RL(t){return(t??"online")==="online"?Rb.isOnline():!0}var LT=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function xL(t){let e=!1,n=0,r;const i=zK(),o=()=>i.status!=="pending",l=_=>{if(!o()){const I=new LT(_);p(I),t.onCancel?.(I)}},c=()=>{e=!0},f=()=>{e=!1},g=()=>CL.isFocused()&&(t.networkMode==="always"||Rb.isOnline())&&t.canRun(),y=()=>RL(t.networkMode)&&t.canRun(),h=_=>{o()||(r?.(),i.resolve(_))},p=_=>{o()||(r?.(),i.reject(_))},E=()=>new Promise(_=>{r=I=>{(o()||g())&&_(I)},t.onPause?.()}).then(()=>{r=void 0,o()||t.onContinue?.()}),A=()=>{if(o())return;let _;const I=n===0?t.initialPromise:void 0;try{_=I??t.fn()}catch(C){_=Promise.reject(C)}Promise.resolve(_).then(h).catch(C=>{if(o())return;const v=t.retry??(Cb?0:3),T=t.retryDelay??WK,S=typeof T=="function"?T(n,C):T,O=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,C);if(e||!O){p(C);return}n++,t.onFail?.(n,C),UK(S).then(()=>g()?void 0:E()).then(()=>{e?p(C):A()})})};return{promise:i,status:()=>i.status,cancel:l,continue:()=>(r?.(),i),cancelRetry:c,continueRetry:f,canStart:y,start:()=>(y()?A():E().then(A),i)}}var NL=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),MK(this.gcTime)&&(this.#e=CT.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Cb?1/0:300*1e3))}clearGcTimeout(){this.#e&&(CT.clearTimeout(this.#e),this.#e=void 0)}},KK=class extends NL{#e;#t;#n;#r;#i;#s;#o;constructor(t){super(),this.#o=!1,this.#s=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#r=t.client,this.#n=this.#r.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=OL(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#i?.promise}setOptions(t){if(this.options={...this.#s,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=OL(this.options);e.data!==void 0&&(this.setData(e.data,{updatedAt:e.dataUpdatedAt,manual:!0}),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=BK(this.state.data,t,this.options);return this.#a({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#a({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#i?.promise;return this.#i?.cancel(t),e?e.then(oc).catch(oc):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>FK(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===OT||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>RT(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!kK(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#i?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#i?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#i&&(this.#o?this.#i.cancel({revert:!0}):this.#i.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(t,e){if(this.state.fetchStatus!=="idle"&&this.#i?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#i)return this.#i.continueRetry(),this.#i.promise}if(t&&this.setOptions(t),!this.options.queryFn){const c=this.observers.find(f=>f.options.queryFn);c&&this.setOptions(c.options)}const n=new AbortController,r=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#o=!0,n.signal)})},i=()=>{const c=IL(this.options,e),g=(()=>{const y={client:this.#r,queryKey:this.queryKey,meta:this.meta};return r(y),y})();return this.#o=!1,this.options.persister?this.options.persister(c,g,this):c(g)},l=(()=>{const c={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:i};return r(c),c})();this.options.behavior?.onFetch(l,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#a({type:"fetch",meta:l.fetchOptions?.meta}),this.#i=xL({initialPromise:e?.initialPromise,fn:l.fetchFn,onCancel:c=>{c instanceof LT&&c.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(c,f)=>{this.#a({type:"failed",failureCount:c,error:f})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0});try{const c=await this.#i.start();if(c===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(c),this.#n.config.onSuccess?.(c,this),this.#n.config.onSettled?.(c,this.state.error,this),c}catch(c){if(c instanceof LT){if(c.silent)return this.#i.promise;if(c.revert){if(this.state.data===void 0)throw c;return this.state.data}}throw this.#a({type:"error",error:c}),this.#n.config.onError?.(c,this),this.#n.config.onSettled?.(this.state.data,c,this),c}finally{this.scheduleGc()}}#a(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...YK(n.data,this.options),fetchMeta:t.meta??null};case"success":const r={...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?r:void 0,r;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),Ya.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function YK(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:RL(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function OL(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}function LL(t){return{onFetch:(e,n)=>{const r=e.options,i=e.fetchOptions?.meta?.fetchMore?.direction,o=e.state.data?.pages||[],l=e.state.data?.pageParams||[];let c={pages:[],pageParams:[]},f=0;const g=async()=>{let y=!1;const h=A=>{Object.defineProperty(A,"signal",{enumerable:!0,get:()=>(e.signal.aborted?y=!0:e.signal.addEventListener("abort",()=>{y=!0}),e.signal)})},p=IL(e.options,e.fetchOptions),E=async(A,_,I)=>{if(y)return Promise.reject();if(_==null&&A.pages.length)return Promise.resolve(A);const v=(()=>{const $={client:e.client,queryKey:e.queryKey,pageParam:_,direction:I?"backward":"forward",meta:e.options.meta};return h($),$})(),T=await p(v),{maxPages:S}=e.options,O=I?jK:ZK;return{pages:O(A.pages,T,S),pageParams:O(A.pageParams,_,S)}};if(i&&o.length){const A=i==="backward",_=A?QK:DL,I={pages:o,pageParams:l},C=_(r,I);c=await E(I,C,A)}else{const A=t??o.length;do{const _=f===0?l[0]??r.initialPageParam:DL(r,c);if(f>0&&_==null)break;c=await E(c,_),f++}while(f<A)}return c};e.options.persister?e.fetchFn=()=>e.options.persister?.(g,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=g}}}function DL(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function QK(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var XK=class extends NL{#e;#t;#n;#r;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#n=t.mutationCache,this.#t=[],this.state=t.state||JK(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#i({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=xL({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(o,l)=>{this.#i({type:"failed",failureCount:o,error:l})},onPause:()=>{this.#i({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const r=this.state.status==="pending",i=!this.#r.canStart();try{if(r)e();else{this.#i({type:"pending",variables:t,isPaused:i}),await this.#n.config.onMutate?.(t,this,n);const l=await this.options.onMutate?.(t,n);l!==this.state.context&&this.#i({type:"pending",context:l,variables:t,isPaused:i})}const o=await this.#r.start();return await this.#n.config.onSuccess?.(o,t,this.state.context,this,n),await this.options.onSuccess?.(o,t,this.state.context,n),await this.#n.config.onSettled?.(o,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(o,null,t,this.state.context,n),this.#i({type:"success",data:o}),o}catch(o){try{throw await this.#n.config.onError?.(o,t,this.state.context,this,n),await this.options.onError?.(o,t,this.state.context,n),await this.#n.config.onSettled?.(void 0,o,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(void 0,o,t,this.state.context,n),o}finally{this.#i({type:"error",error:o})}}finally{this.#n.runNext(this)}}#i(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),Ya.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(t)}),this.#n.notify({mutation:this,type:"updated",action:t})})}};function JK(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var eY=class extends Ib{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,e,n){const r=new XK({client:t,mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){this.#e.add(t);const e=xb(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=xb(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=xb(t);if(typeof e=="string"){const r=this.#t.get(e)?.find(i=>i.state.status==="pending");return!r||r===t}else return!0}runNext(t){const e=xb(t);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Ya.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>wL(e,n))}findAll(t={}){return this.getAll().filter(e=>wL(t,e))}notify(t){Ya.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return Ya.batch(()=>Promise.all(t.map(e=>e.continue().catch(oc))))}};function xb(t){return t.options.scope?.id}var tY=class extends Ib{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const r=e.queryKey,i=e.queryHash??xT(r,e);let o=this.get(i);return o||(o=new KK({client:t,queryKey:r,queryHash:i,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(o)),o}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Ya.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>EL(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>EL(t,n)):e}notify(t){Ya.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){Ya.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Ya.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},nY=class{#e;#t;#n;#r;#i;#s;#o;#a;constructor(t={}){this.#e=t.queryCache||new tY,this.#t=t.mutationCache||new eY,this.#n=t.defaultOptions||{},this.#r=new Map,this.#i=new Map,this.#s=0}mount(){this.#s++,this.#s===1&&(this.#o=CL.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=Rb.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#s--,this.#s===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(RT(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),o=this.#e.get(r.queryHash)?.state.data,l=PK(e,o);if(l!==void 0)return this.#e.build(this,r).setData(l,{...n,manual:!0})}setQueriesData(t,e,n){return Ya.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;Ya.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e;return Ya.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Ya.batch(()=>this.#e.findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(oc).catch(oc)}invalidateQueries(t,e={}){return Ya.batch(()=>(this.#e.findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Ya.batch(()=>this.#e.findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let o=i.fetch(void 0,n);return n.throwOnError||(o=o.catch(oc)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(oc)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(RT(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(oc).catch(oc)}fetchInfiniteQuery(t){return t.behavior=LL(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(oc).catch(oc)}ensureInfiniteQueryData(t){return t.behavior=LL(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Rb.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#r.set(Ev(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(r=>{wv(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){this.#i.set(Ev(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#i.values()],n={};return e.forEach(r=>{wv(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=xT(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===OT&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}};class kg{constructor(e,n){this.language=e,this.confidence=n}isConfident(e=.7){return this.confidence>=e}isUnknown(){return this.language==="unknown"}equals(e){return this.language===e.language}}class PL{constructor(e,n){this.text=e,this.originalIndex=n}}class rY extends PL{constructor(e,n,r){super(e,n),this.originalText=r}}class iY{constructor(e={}){this.pageLanguageHint=null,this.sessionPageLanguage=null,this.config=e}getPageLanguageHint(){if(this.pageLanguageHint!==null)return this.pageLanguageHint;try{if(typeof document<"u"&&document.documentElement){const e=document.documentElement.lang;if(e)return this.pageLanguageHint=e.split("-")[0].toLowerCase(),Re.trace(` Page language hint from HTML: ${this.pageLanguageHint} (from lang="${e}")`),this.pageLanguageHint}}catch(e){Re.trace("Failed to get page language hint:",e)}return this.pageLanguageHint="",Re.trace(" No HTML lang attribute found on page"),null}async detectTarget(e,n,r){let i=n||this.getPageLanguageHint();if(!i&&r&&r.length>1){const l=r.join(" ");if(l.length>10){const c=await this.detectLanguage(l,!0);c.isConfident(.7)&&(i=c.language,Re.trace(` Context language hint from ${r.length} texts: ${i} (confidence: ${c.confidence.toFixed(2)})`))}}if(i&&e.length<6)return Re.trace(` Target language (from hint, short text): ${i} - "${e}"`),new kg(i,.95);const o=await this.detectLanguage(e,!i);return o.confidence<.7&&i?(Re.trace(` Low confidence (${o.confidence.toFixed(2)}) for "${e}", using hint: ${i}`),new kg(i,.9)):(Re.trace(` Target language: ${o.language} (confidence: ${o.confidence.toFixed(2)}) - "${e}"`),o)}async detectPageLanguage(e){return this.sessionPageLanguage?(Re.trace(` Using cached page language: ${this.sessionPageLanguage.language} (confidence: ${this.sessionPageLanguage.confidence.toFixed(2)})`),this.sessionPageLanguage):(this.sessionPageLanguage=await this.detectFromBatches(e),Re.trace(` Page language detected from ${e.length} candidates: ${this.sessionPageLanguage.language} (confidence: ${this.sessionPageLanguage.confidence.toFixed(2)})`),this.sessionPageLanguage)}clearSessionCache(){this.sessionPageLanguage=null}async detectFromBatches(e){const i=new Map,o=new Map;for(let h=0;h<e.length;h+=4){const E=e.slice(h,h+4).map(({text:_})=>_).join(" ");if(E.length<15)continue;const A=await this.detectLanguage(E,!1);if(!A.isUnknown()&&A.confidence>=.5){const _=i.get(A.language)??0;i.set(A.language,_+1);const I=o.get(A.language)??[];I.push(A.confidence),o.set(A.language,I),Re.trace(`   Batch ${Math.floor(h/4)+1}: ${A.language} (confidence: ${A.confidence.toFixed(2)}) from "${E.substring(0,50)}..."`)}}if(i.size===0){Re.trace(" No valid language detected from batches, trying external API as fallback");const h=e.map(({text:p})=>p).join(" ");return this.detectLanguage(h,!0)}const l=Array.from(i.entries()).sort((h,p)=>p[1]-h[1]),c=l[0][0],f=l[0][1],g=o.get(c)??[],y=g.reduce((h,p)=>h+p,0)/g.length;if(Re.trace(` Page language winner: ${c} with ${f} votes (avg confidence: ${y.toFixed(2)})`),l.length>1){const h=l.slice(1,3).map(([p,E])=>`${p}:${E}`).join(", ");Re.trace(`   Runner-ups: ${h}`)}return new kg(c,y)}async detectLanguage(e,n=!1){if(this.config.useNativeBrowserAPI)try{if(!this.languageDetector&&typeof window<"u"&&window.LanguageDetector&&(this.languageDetector=await window.LanguageDetector.create()),this.languageDetector){const i=await this.languageDetector.detect(e),o=new kg(i[0]?.detectedLanguage??"unknown",i[0]?.confidence??0);if(o.confidence>=.6||!n)return o;Re.trace(` Chrome AI language detection confidence too low (${o.confidence.toFixed(2)} < ${.6}) for "${e}", trying external API`);const l=await this.detectLanguageWithExternalAPI(e);return l?(Re.trace(` External API detected language: ${l.language} for "${e}"`),l):o}}catch(i){Re.trace("Chrome AI language detection failed:",i)}if(n){const i=await this.detectLanguageWithExternalAPI(e);if(i)return i}return new kg("unknown",0)}async detectLanguageWithExternalAPI(e){if(!this.config.makeLanguageDetectionRequest)return null;try{Re.trace(` Calling external language detection API for: "${e}"`);const n=await this.config.makeLanguageDetectionRequest({text:e});if(n.status!==200)return Re.trace(`External language detection API error: ${n.status}`),null;const r=n.body;return new kg(r.detected_language??r.language??"unknown",r.confidence??1)}catch(n){return Re.trace("External language detection failed:",n),null}}}async function oY(t){return await Promise.all(t.map(async e=>{try{return{status:"fulfilled",value:await e}}catch(n){return{status:"rejected",reason:n}}}))}class sY{constructor(e={}){this.translators=new Map,this.translationCache=new Map,this.config=e}async translateIfNeeded(e,n,r){const i=e.toLowerCase().trim().replace(/\s+/g," ");if(n===r||n==="unknown"||r==="unknown")return i;const o=`${n}:${r}:${e}`,l=this.translationCache.get(o);if(l!==void 0)return Re.trace(` Using cached translation: "${e}" -> "${l}"`),l;if(!await this.checkTranslationAvailability(n,r))return Re.trace(` Cannot translate ${n}->${r}`),i;const f=await this.loadTranslator(n,r);if(!f)return Re.trace(` No translator available for ${n}->${r}`),i;try{const y=(await f.translate(e)).toLowerCase().trim().replace(/\s+/g," ");return this.translationCache.set(o,y),Re.trace(` Translated: "${e}" (${n}) -> "${y}" (${r})`),y}catch(g){return Re.trace(` Translation failed for "${e}":`,g),i}}async checkTranslationAvailability(e,n){if(!this.config.useNativeBrowserAPI)return!1;try{if(typeof window>"u"||!window.Translator?.availability)return!1;const r=await window.Translator.availability({sourceLanguage:e,targetLanguage:n});return r==="available"||r==="downloadable"}catch(r){return Re.trace(` Error checking translation availability for ${e}->${n}:`,r),!1}}async loadTranslator(e,n){const r=`${e}-${n}`,i=this.translators.get(r);if(i!==void 0)return i;if(!this.config.useNativeBrowserAPI)return null;try{if(typeof window>"u"||!window.Translator)return null;Re.trace(` Loading translator ${r}...`);const o=window.Translator.create({sourceLanguage:e,targetLanguage:n}),l=new Promise((f,g)=>setTimeout(()=>{g(new Error(`Translator ${r} timeout`))},15e3)),c=await Promise.race([o,l]);return this.translators.set(r,c),Re.trace(` Translator ${r} loaded successfully`),c}catch(o){return Re.trace(` Failed to load translator ${r}:`,o),null}}async loadTranslators(e){const n=new Map,r=e.map(async i=>{const o=await this.loadTranslator(i.from,i.to);if(o){const l=`${i.from}-${i.to}`;n.set(l,o)}});return await oY(r),n}clearCache(){this.translationCache.clear()}getCacheSize(){return this.translationCache.size}}class ML{filterNaturalLanguage(e){Re.trace(` Total candidates to filter: ${e.length}`);const n=e.map((i,o)=>({text:i,originalIndex:o})).filter(({text:i})=>{const o=EZ(i);if(!o){const l=i===""?"(empty string)":i;Re.trace(` Rejected (non-natural): "${l}"`)}return o}),r=e.length-n.length;return r>0&&Re.trace(` Filtered out ${r} non-natural language candidates (${n.length}/${e.length} kept)`),n.map(({text:i,originalIndex:o})=>new PL(i,o))}static normalize(e){return e.toLowerCase().trim().replace(/\s+/g," ")}findBestMatch(e,n,r){let i=null,o=0;for(const l of n){const c=R7(e,l.text);c>r&&c>o&&(o=c,i={text:l.originalText,score:c,index:l.originalIndex})}return i?Re.trace(` Best match: "${i.text}" (score: ${i.score.toFixed(4)})`):Re.trace(` No match found above threshold ${r}`),i}}const aY=new nY({defaultOptions:{queries:{retry:3,retryDelay:t=>[1e3,3e3,5e3][t]||5e3,staleTime:300*1e3,gcTime:60*1e3,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1}}});class lY{constructor(e={toolIDs:[]}){this.chromeAIAvailable=null,this.queryClient=aY,this.toolIDs=e.toolIDs,this.config=e,this.languageDetectionService=new iY({useNativeBrowserAPI:e.useNativeBrowserAPI,makeLanguageDetectionRequest:async n=>this.makeLanguageDetectionRequest(n)}),this.translationService=new sY({useNativeBrowserAPI:e.useNativeBrowserAPI}),this.textMatchingService=new ML}async hashCandidates(e){const n=JSON.stringify(e),i=new TextEncoder().encode(n),o=await crypto.subtle.digest("SHA-256",i);return Array.from(new Uint8Array(o)).map(c=>c.toString(16).padStart(2,"0")).join("")}async shouldUseCache(){return!await this.isChromeAIAvailable()}async findBestTextMatch(e,n,r,i){if(!e?.trim()||!n?.length)return null;if(!this.toolIDs||this.toolIDs.length===0)return Re.trace("No toolIDs provided, skipping AI text matching"),null;if(e.length>5e3||n.length>500)return Re.trace("Text matching: Input exceeds API limits"),null;if(await this.isChromeAIAvailable())try{Re.trace(` Trying Chrome AI local matching: "${e}" against ${n.length} candidates`);const o=await this.findBestMatchWithChromeAI(e,n,r,i);if(o)return Re.trace(" Chrome AI local match found",o),o;Re.trace(" Chrome AI found no match, falling back to external API")}catch(o){Re.trace("Chrome AI failed, falling back to external API:",o)}return this.findBestMatchWithExternalAPI(e,n,r)}async findBestMatchWithExternalAPI(e,n,r){const i=await this.hashCandidates(n),o=["ai-text-matching",e,i,r.toString(),this.toolIDs?.join(",")??"",this.config.provider??""];if(this.queryClient.getQueryState(o)?.status==="error")return Re.trace(" Request failed after retries, using cached error (no API call)"),null;try{return await this.queryClient.fetchQuery({retry:0,queryKey:o,queryFn:async()=>{Re.trace(` External AI Text Matching: "${e}" against ${n.length} candidates`);const f=await this.makeTextMatchingRequest({referenceText:e,candidateTexts:n,options:{maxResults:1,minScore:r,toolIDs:this.toolIDs}});if(Re.trace(" External AI Text Matching response:",{status:f.status,hasBody:!!f.body}),f.status!==200){const g=`External text matching API error: ${f.status}`;throw Re.trace(g),new Error(g)}return f.body.matches?.[0]||null}})}catch(c){return Re.error(" External AI Text Matching failed (will be cached for 1 min):",c),null}}async isChromeAIAvailable(){return this.config.useNativeBrowserAPI?this.chromeAIAvailable!==null?this.chromeAIAvailable:(this.chromeAIAvailable=typeof window<"u"&&"LanguageDetector"in window&&"Translator"in window,Re.trace(` Chrome AI availability: ${this.chromeAIAvailable}`),this.chromeAIAvailable):(Re.trace(" Chrome AI disabled via config (useNativeBrowserAPI: false)"),!1)}async findBestMatchWithChromeAI(e,n,r,i){const o=this.textMatchingService.filterNaturalLanguage(n);if(o.length===0)return Re.trace(" No natural language candidates found, falling back to external API"),null;const l=this.languageDetectionService.getPageLanguageHint(),c=await this.languageDetectionService.detectTarget(e,l,i),f=await this.languageDetectionService.detectPageLanguage(o),g=await this.translationService.translateIfNeeded(e,c.language,f.language),y=o.map(p=>new rY(ML.normalize(p.text),p.originalIndex,p.text));return this.textMatchingService.findBestMatch(g,y,r)}}class uY extends lY{async makeTextMatchingRequest(e){const n=`${Ii("LEMON_AI_URL")}/text-matching/match/`;return this.makeRequest(n,e)}async makeLanguageDetectionRequest(e){const n=`${Ii("LEMON_AI_URL")}/text-matching/detect-language/`;return this.makeRequest(n,e)}async makeRequest(e,n){return ts()?this.makeExtensionRequest(e,n):this.makeDirectRequest(e,n)}async makeExtensionRequest(e,n){const r=await Ld();if(!r)throw Re.trace(" No access token available for AI text matching"),new Error("No access token available");const{post:i}=await Promise.resolve().then(()=>Cae);return i(e,n,{Authorization:`Bearer ${r}`})}async makeDirectRequest(e,n){const r=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),signal:AbortSignal.timeout(5e3)});return{body:await r.json(),status:r.status,statusText:r.statusText,headers:Object.fromEntries(r.headers.entries())}}}const Qa={"player-pop-in":"_player-pop-in_1hgpx_1",navbar:"_navbar_1hgpx_36","navbar-icon-button":"_navbar-icon-button_1hgpx_49",tooltip:"_tooltip_1hgpx_66","navbar-icon-button--active":"_navbar-icon-button--active_1hgpx_108","navbar-icon-button--red-dot":"_navbar-icon-button--red-dot_1hgpx_111","navbar-footer":"_navbar-footer_1hgpx_124","navbar-icon-chatbot":"_navbar-icon-chatbot_1hgpx_131","navbar-icon-disconnect":"_navbar-icon-disconnect_1hgpx_135","navbar-language-select":"_navbar-language-select_1hgpx_140",right:"_right_1hgpx_147",header:"_header_1hgpx_153","close-player-icon":"_close-player-icon_1hgpx_166","search-bar":"_search-bar_1hgpx_175",content:"_content_1hgpx_181"};function cY({size:t=20,...e}){return pe.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"19",viewBox:"0 0 18 19",fill:"none",children:[pe.jsx("rect",{x:"0.125",y:"0.125",width:"4.59993",height:"18.2776",rx:"1.875",fill:"#6D7481"}),pe.jsx("rect",{x:"0.125",y:"0.125",width:"4.59993",height:"18.2776",rx:"1.875",stroke:"white",strokeWidth:"0.25"}),pe.jsx("rect",{x:"4.97485",y:"0.125",width:"4.59993",height:"18.2776",rx:"1.875",fill:"#6D7481"}),pe.jsx("rect",{x:"4.97485",y:"0.125",width:"4.59993",height:"18.2776",rx:"1.875",stroke:"white",strokeWidth:"0.25"}),pe.jsx("rect",{x:"0.147186",y:"0.103487",width:"4.58631",height:"18.3417",rx:"1.875",transform:"matrix(0.988071 -0.154001 0.189414 0.981897 9.68211 0.769352)",fill:"#6D7481"}),pe.jsx("rect",{x:"0.147186",y:"0.103487",width:"4.58631",height:"18.3417",rx:"1.875",transform:"matrix(0.988071 -0.154001 0.189414 0.981897 9.68211 0.769352)",stroke:"white",strokeWidth:"0.25"})]})}function Fg({active:t=!1,redDot:e=!1,icon:n,onClick:r,label:i,className:o}){let l=Qa["navbar-icon-button"];return o!==void 0&&(l+=` ${o}`),e&&(l+=` ${Qa["navbar-icon-button--red-dot"]}`),t&&(l+=` ${Qa["navbar-icon-button--active"]}`),pe.jsxs("button",{className:l,onClick:r,"aria-label":i,children:[n,pe.jsx("span",{className:Qa.tooltip,children:i})]})}class DT extends xe.Component{render(){return pe.jsx("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",width:12,height:12,fill:"none",...this.props,children:pe.jsx("path",{fill:"currentColor",d:"M2.56 3.534a.834.834 0 1 0-1.18 1.18l3.704 3.703a1 1 0 0 0 1.414 0l3.703-3.704a.834.834 0 0 0-1.179-1.179L6.144 6.412a.5.5 0 0 1-.707 0L2.56 3.534Z"})})}}const kL={"select-wrapper":"_select-wrapper_17uyi_1","ll-player--icon-dropdown":"_ll-player--icon-dropdown_17uyi_8"};function FL({value:t=null,options:e=[],placeholder:n=null,onChange:r=()=>{},className:i=""}){const o=typeof e.find(c=>c.value!==null)?.value;function l(c){o!=="string"&&o!=="number"||(c.currentTarget.value===""?r(null):r(o==="string"?c.currentTarget.value:Number(c.currentTarget.value)))}return pe.jsxs("div",{className:kL["select-wrapper"],children:[pe.jsxs("select",{value:t??"",onChange:l,className:i,children:[n!==null&&t===void 0&&pe.jsx("option",{disabled:!0,children:n}),e.map((c,f)=>pe.jsx("option",{value:c.value??"",children:c.label},f))]}),pe.jsx(DT,{className:kL["ll-player--icon-dropdown"]})]})}function fY(){const{projectLanguages:t,currentLanguage:e,changeLanguage:n}=Gi();return pe.jsx(FL,{value:e,options:t.map(r=>({value:r.locale,label:r.locale.toUpperCase()})),onChange:r=>{r!==null&&n(r)},className:Qa["navbar-language-select"]})}function dY({size:t=20,...e}){return pe.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"27",height:"26",viewBox:"0 0 27 26",fill:"none",children:[pe.jsx("path",{d:"M25.0627 3.40474L25.3998 2.65995L26.1466 2.32373C26.313 2.24712 26.313 2.01305 26.1466 1.93644L25.3998 1.60022L25.0627 0.851171C24.9859 0.685189 24.7512 0.685189 24.6744 0.851171L24.3373 1.59596L23.5862 1.93218C23.4198 2.00879 23.4198 2.24287 23.5862 2.31947L24.333 2.65569L24.6701 3.40474C24.7469 3.57072 24.9859 3.57072 25.0627 3.40474ZM21.666 4.04314L20.9875 2.55355C20.8381 2.22159 20.3602 2.22159 20.2108 2.55355L19.5324 4.04314L18.0388 4.71983C17.706 4.87305 17.706 5.34546 18.0388 5.49442L19.5324 6.17111L20.2108 7.6607C20.3645 7.99266 20.8381 7.99266 20.9875 7.6607L21.666 6.17111L23.1595 5.49442C23.4924 5.3412 23.4924 4.86879 23.1595 4.71983L21.666 4.04314ZM24.6701 6.8095L24.333 7.5543L23.5862 7.89052C23.4198 7.96712 23.4198 8.2012 23.5862 8.27781L24.333 8.61403L24.6701 9.36308C24.7469 9.52906 24.9816 9.52906 25.0584 9.36308L25.3955 8.61828L26.1466 8.28206C26.313 8.20546 26.313 7.97138 26.1466 7.89477L25.3998 7.55855L25.0627 6.8095C24.9859 6.64352 24.7469 6.64352 24.6701 6.8095Z",fill:"#6D7481"}),pe.jsx("path",{d:"M18.6207 9.2857H17.6896V16.7143C17.6896 17.225 17.2707 17.6428 16.7586 17.6428H5.5862V18.5714C5.5862 19.5928 6.42413 20.4286 7.44827 20.4286H16.7586L20.4828 24.1428V11.1428C20.4828 10.1214 19.6448 9.2857 18.6207 9.2857ZM15.8276 13.9286V7.42855C15.8276 6.40713 14.9896 5.57141 13.9655 5.57141H3.72413C2.69999 5.57141 1.86206 6.40713 1.86206 7.42855V19.5L5.5862 15.7857H13.9655C14.9896 15.7857 15.8276 14.95 15.8276 13.9286Z",fill:"#6D7481"})]})}function zf(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function $L(t){if(xe.isValidElement(t)||!zf(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=$L(t[n])}),e}function jl(t,e,n={clone:!0}){const r=n.clone?{...t}:t;return zf(t)&&zf(e)&&Object.keys(e).forEach(i=>{xe.isValidElement(e[i])?r[i]=e[i]:zf(e[i])&&Object.prototype.hasOwnProperty.call(t,i)&&zf(t[i])?r[i]=jl(t[i],e[i],n):n.clone?r[i]=zf(e[i])?$L(e[i]):e[i]:r[i]=e[i]}),r}function ip(t,...e){const n=new URL(`https://mui.com/production-error/?code=${t}`);return e.forEach(r=>n.searchParams.append("args[]",r)),`Minified MUI error #${t}; visit ${n} for the full message.`}function $g(t){if(typeof t!="string")throw new Error(ip(7));return t.charAt(0).toUpperCase()+t.slice(1)}function PT(t,e){const n={...e};for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const i=r;if(i==="components"||i==="slots")n[i]={...t[i],...n[i]};else if(i==="componentsProps"||i==="slotProps"){const o=t[i],l=e[i];if(!l)n[i]=o||{};else if(!o)n[i]=l;else{n[i]={...l};for(const c in o)if(Object.prototype.hasOwnProperty.call(o,c)){const f=c;n[i][f]=PT(o[f],l[f])}}}else n[i]===void 0&&(n[i]=t[i])}return n}function hY(t,e,n=void 0){const r={};for(const i in t){const o=t[i];let l="",c=!0;for(let f=0;f<o.length;f+=1){const g=o[f];g&&(l+=(c===!0?"":" ")+e(g),c=!1,n&&n[g]&&(l+=" "+n[g]))}r[i]=l}return r}const UL=t=>t,pY=(()=>{let t=UL;return{configure(e){t=e},generate(e){return t(e)},reset(){t=UL}}})(),gY={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function BL(t,e,n="Mui"){const r=gY[e];return r?`${n}-${r}`:`${pY.generate(t)}-${e}`}function mY(t,e,n="Mui"){const r={};return e.forEach(i=>{r[i]=BL(t,i,n)}),r}function yY(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}function ZL(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=ZL(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function vY(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=ZL(t))&&(r&&(r+=" "),r+=e);return r}function Tv(t,e){return e?jl(t,e,{clone:!1}):t}function _Y(t,e){if(!t.containerQueries)return e;const n=Object.keys(e).filter(r=>r.startsWith("@container")).sort((r,i)=>{const o=/min-width:\s*([0-9.]+)/;return+(r.match(o)?.[1]||0)-+(i.match(o)?.[1]||0)});return n.length?n.reduce((r,i)=>{const o=e[i];return delete r[i],r[i]=o,r},{...e}):e}function bY(t,e){return e==="@"||e.startsWith("@")&&(t.some(n=>e.startsWith(`@${n}`))||!!e.match(/^@\d/))}function EY(t,e){const n=e.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,i]=n,o=Number.isNaN(+r)?r||0:+r;return t.containerQueries(i).up(o)}function wY(t){const e=(o,l)=>o.replace("@media",l?`@container ${l}`:"@container");function n(o,l){o.up=(...c)=>e(t.breakpoints.up(...c),l),o.down=(...c)=>e(t.breakpoints.down(...c),l),o.between=(...c)=>e(t.breakpoints.between(...c),l),o.only=(...c)=>e(t.breakpoints.only(...c),l),o.not=(...c)=>{const f=e(t.breakpoints.not(...c),l);return f.includes("not all and")?f.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):f}}const r={},i=o=>(n(r,o),r);return n(i),{...t,containerQueries:i}}const Nb={xs:0,sm:600,md:900,lg:1200,xl:1536},jL={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${Nb[t]}px)`},TY={containerQueries:t=>({up:e=>{let n=typeof e=="number"?e:Nb[e]||e;return typeof n=="number"&&(n=`${n}px`),t?`@container ${t} (min-width:${n})`:`@container (min-width:${n})`}})};function Hf(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const o=r.breakpoints||jL;return e.reduce((l,c,f)=>(l[o.up(o.keys[f])]=n(e[f]),l),{})}if(typeof e=="object"){const o=r.breakpoints||jL;return Object.keys(e).reduce((l,c)=>{if(bY(o.keys,c)){const f=EY(r.containerQueries?r:TY,c);f&&(l[f]=n(e[c],c))}else if(Object.keys(o.values||Nb).includes(c)){const f=o.up(c);l[f]=n(e[c],c)}else{const f=c;l[f]=e[f]}return l},{})}return n(e)}function SY(t={}){return t.keys?.reduce((n,r)=>{const i=t.up(r);return n[i]={},n},{})||{}}function AY(t,e){return t.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},e)}function Ob(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((i,o)=>i&&i[o]?i[o]:null,t);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function Lb(t,e,n,r=n){let i;return typeof t=="function"?i=t(n):Array.isArray(t)?i=t[n]||r:i=Ob(t,n)||r,e&&(i=e(i,r,t)),i}function os(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,o=l=>{if(l[e]==null)return null;const c=l[e],f=l.theme,g=Ob(f,r)||{};return Hf(l,c,h=>{let p=Lb(g,i,h);return h===p&&typeof h=="string"&&(p=Lb(g,i,`${e}${h==="default"?"":$g(h)}`,h)),n===!1?p:{[n]:p}})};return o.propTypes={},o.filterProps=[e],o}function IY(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const CY={m:"margin",p:"padding"},RY={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},VL={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},xY=IY(t=>{if(t.length>2)if(VL[t])t=VL[t];else return[t];const[e,n]=t.split(""),r=CY[e],i=RY[n]||"";return Array.isArray(i)?i.map(o=>r+o):[r+i]}),MT=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],kT=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...MT,...kT];function Sv(t,e,n,r){const i=Ob(t,e,!0)??n;return typeof i=="number"||typeof i=="string"?o=>typeof o=="string"?o:typeof i=="string"?`calc(${o} * ${i})`:i*o:Array.isArray(i)?o=>{if(typeof o=="string")return o;const l=Math.abs(o),c=i[l];return o>=0?c:typeof c=="number"?-c:`-${c}`}:typeof i=="function"?i:()=>{}}function FT(t){return Sv(t,"spacing",8)}function Av(t,e){return typeof e=="string"||e==null?e:t(e)}function NY(t,e){return n=>t.reduce((r,i)=>(r[i]=Av(e,n),r),{})}function OY(t,e,n,r){if(!e.includes(n))return null;const i=xY(n),o=NY(i,r),l=t[n];return Hf(t,l,o)}function zL(t,e){const n=FT(t.theme);return Object.keys(t).map(r=>OY(t,e,r,n)).reduce(Tv,{})}function Wo(t){return zL(t,MT)}Wo.propTypes={},Wo.filterProps=MT;function Ko(t){return zL(t,kT)}Ko.propTypes={},Ko.filterProps=kT;function Db(...t){const e=t.reduce((r,i)=>(i.filterProps.forEach(o=>{r[o]=i}),r),{}),n=r=>Object.keys(r).reduce((i,o)=>e[o]?Tv(i,e[o](r)):i,{});return n.propTypes={},n.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),n}function Ru(t){return typeof t!="number"?t:`${t}px solid`}function xu(t,e){return os({prop:t,themeKey:"borders",transform:e})}const LY=xu("border",Ru),DY=xu("borderTop",Ru),PY=xu("borderRight",Ru),MY=xu("borderBottom",Ru),kY=xu("borderLeft",Ru),FY=xu("borderColor"),$Y=xu("borderTopColor"),UY=xu("borderRightColor"),BY=xu("borderBottomColor"),ZY=xu("borderLeftColor"),jY=xu("outline",Ru),VY=xu("outlineColor"),Pb=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=Sv(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:Av(e,r)});return Hf(t,t.borderRadius,n)}return null};Pb.propTypes={},Pb.filterProps=["borderRadius"],Db(LY,DY,PY,MY,kY,FY,$Y,UY,BY,ZY,Pb,jY,VY);const Mb=t=>{if(t.gap!==void 0&&t.gap!==null){const e=Sv(t.theme,"spacing",8),n=r=>({gap:Av(e,r)});return Hf(t,t.gap,n)}return null};Mb.propTypes={},Mb.filterProps=["gap"];const kb=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=Sv(t.theme,"spacing",8),n=r=>({columnGap:Av(e,r)});return Hf(t,t.columnGap,n)}return null};kb.propTypes={},kb.filterProps=["columnGap"];const Fb=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=Sv(t.theme,"spacing",8),n=r=>({rowGap:Av(e,r)});return Hf(t,t.rowGap,n)}return null};Fb.propTypes={},Fb.filterProps=["rowGap"];const zY=os({prop:"gridColumn"}),HY=os({prop:"gridRow"}),GY=os({prop:"gridAutoFlow"}),qY=os({prop:"gridAutoColumns"}),WY=os({prop:"gridAutoRows"}),KY=os({prop:"gridTemplateColumns"}),YY=os({prop:"gridTemplateRows"}),QY=os({prop:"gridTemplateAreas"}),XY=os({prop:"gridArea"});Db(Mb,kb,Fb,zY,HY,GY,qY,WY,KY,YY,QY,XY);function Ug(t,e){return e==="grey"?e:t}const JY=os({prop:"color",themeKey:"palette",transform:Ug}),eQ=os({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Ug}),tQ=os({prop:"backgroundColor",themeKey:"palette",transform:Ug});Db(JY,eQ,tQ);function Vl(t){return t<=1&&t!==0?`${t*100}%`:t}const nQ=os({prop:"width",transform:Vl}),$T=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{const r=t.theme?.breakpoints?.values?.[n]||Nb[n];return r?t.theme?.breakpoints?.unit!=="px"?{maxWidth:`${r}${t.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:Vl(n)}};return Hf(t,t.maxWidth,e)}return null};$T.filterProps=["maxWidth"];const rQ=os({prop:"minWidth",transform:Vl}),iQ=os({prop:"height",transform:Vl}),oQ=os({prop:"maxHeight",transform:Vl}),sQ=os({prop:"minHeight",transform:Vl});os({prop:"size",cssProperty:"width",transform:Vl}),os({prop:"size",cssProperty:"height",transform:Vl});const aQ=os({prop:"boxSizing"});Db(nQ,$T,rQ,iQ,oQ,sQ,aQ);const $b={border:{themeKey:"borders",transform:Ru},borderTop:{themeKey:"borders",transform:Ru},borderRight:{themeKey:"borders",transform:Ru},borderBottom:{themeKey:"borders",transform:Ru},borderLeft:{themeKey:"borders",transform:Ru},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Ru},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Pb},color:{themeKey:"palette",transform:Ug},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Ug},backgroundColor:{themeKey:"palette",transform:Ug},p:{style:Ko},pt:{style:Ko},pr:{style:Ko},pb:{style:Ko},pl:{style:Ko},px:{style:Ko},py:{style:Ko},padding:{style:Ko},paddingTop:{style:Ko},paddingRight:{style:Ko},paddingBottom:{style:Ko},paddingLeft:{style:Ko},paddingX:{style:Ko},paddingY:{style:Ko},paddingInline:{style:Ko},paddingInlineStart:{style:Ko},paddingInlineEnd:{style:Ko},paddingBlock:{style:Ko},paddingBlockStart:{style:Ko},paddingBlockEnd:{style:Ko},m:{style:Wo},mt:{style:Wo},mr:{style:Wo},mb:{style:Wo},ml:{style:Wo},mx:{style:Wo},my:{style:Wo},margin:{style:Wo},marginTop:{style:Wo},marginRight:{style:Wo},marginBottom:{style:Wo},marginLeft:{style:Wo},marginX:{style:Wo},marginY:{style:Wo},marginInline:{style:Wo},marginInlineStart:{style:Wo},marginInlineEnd:{style:Wo},marginBlock:{style:Wo},marginBlockStart:{style:Wo},marginBlockEnd:{style:Wo},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Mb},rowGap:{style:Fb},columnGap:{style:kb},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Vl},maxWidth:{style:$T},minWidth:{transform:Vl},height:{transform:Vl},maxHeight:{transform:Vl},minHeight:{transform:Vl},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function lQ(...t){const e=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function uQ(t,e){return typeof t=="function"?t(e):t}function cQ(){function t(n,r,i,o){const l={[n]:r,theme:i},c=o[n];if(!c)return{[n]:r};const{cssProperty:f=n,themeKey:g,transform:y,style:h}=c;if(r==null)return null;if(g==="typography"&&r==="inherit")return{[n]:r};const p=Ob(i,g)||{};return h?h(l):Hf(l,r,A=>{let _=Lb(p,y,A);return A===_&&typeof A=="string"&&(_=Lb(p,y,`${n}${A==="default"?"":$g(A)}`,A)),f===!1?_:{[f]:_}})}function e(n){const{sx:r,theme:i={}}=n||{};if(!r)return null;const o=i.unstable_sxConfig??$b;function l(c){let f=c;if(typeof c=="function")f=c(i);else if(typeof c!="object")return c;if(!f)return null;const g=SY(i.breakpoints),y=Object.keys(g);let h=g;return Object.keys(f).forEach(p=>{const E=uQ(f[p],i);if(E!=null)if(typeof E=="object")if(o[p])h=Tv(h,t(p,E,i,o));else{const A=Hf({theme:i},E,_=>({[p]:_}));lQ(A,E)?h[p]=e({sx:E,theme:i}):h=Tv(h,A)}else h=Tv(h,t(p,E,i,o))}),_Y(i,AY(y,h))}return Array.isArray(r)?r.map(l):l(r)}return e}const Bg=cQ();Bg.filterProps=["sx"];function UT(){return UT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},UT.apply(null,arguments)}function HL(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var fQ=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,dQ=HL(function(t){return fQ.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91});function hQ(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function pQ(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var gQ=(function(){function t(n){var r=this;this._insertTag=function(i){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,o),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(pQ(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=hQ(i);try{o.insertRule(r,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},t})(),Ta="-ms-",Ub="-moz-",Xi="-webkit-",GL="comm",BT="rule",ZT="decl",mQ="@import",qL="@keyframes",yQ="@layer",vQ=Math.abs,Bb=String.fromCharCode,_Q=Object.assign;function bQ(t,e){return oa(t,0)^45?(((e<<2^oa(t,0))<<2^oa(t,1))<<2^oa(t,2))<<2^oa(t,3):0}function WL(t){return t.trim()}function EQ(t,e){return(t=e.exec(t))?t[0]:t}function Ji(t,e,n){return t.replace(e,n)}function jT(t,e){return t.indexOf(e)}function oa(t,e){return t.charCodeAt(e)|0}function Iv(t,e,n){return t.slice(e,n)}function Qc(t){return t.length}function VT(t){return t.length}function Zb(t,e){return e.push(t),t}function wQ(t,e){return t.map(e).join("")}var jb=1,Zg=1,KL=0,_l=0,ys=0,jg="";function Vb(t,e,n,r,i,o,l){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:jb,column:Zg,length:l,return:""}}function Cv(t,e){return _Q(Vb("",null,null,"",null,null,0),t,{length:-t.length},e)}function TQ(){return ys}function SQ(){return ys=_l>0?oa(jg,--_l):0,Zg--,ys===10&&(Zg=1,jb--),ys}function zl(){return ys=_l<KL?oa(jg,_l++):0,Zg++,ys===10&&(Zg=1,jb++),ys}function Xc(){return oa(jg,_l)}function zb(){return _l}function Rv(t,e){return Iv(jg,t,e)}function xv(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function YL(t){return jb=Zg=1,KL=Qc(jg=t),_l=0,[]}function QL(t){return jg="",t}function Hb(t){return WL(Rv(_l-1,zT(t===91?t+2:t===40?t+1:t)))}function AQ(t){for(;(ys=Xc())&&ys<33;)zl();return xv(t)>2||xv(ys)>3?"":" "}function IQ(t,e){for(;--e&&zl()&&!(ys<48||ys>102||ys>57&&ys<65||ys>70&&ys<97););return Rv(t,zb()+(e<6&&Xc()==32&&zl()==32))}function zT(t){for(;zl();)switch(ys){case t:return _l;case 34:case 39:t!==34&&t!==39&&zT(ys);break;case 40:t===41&&zT(t);break;case 92:zl();break}return _l}function CQ(t,e){for(;zl()&&t+ys!==57;)if(t+ys===84&&Xc()===47)break;return"/*"+Rv(e,_l-1)+"*"+Bb(t===47?t:zl())}function RQ(t){for(;!xv(Xc());)zl();return Rv(t,_l)}function xQ(t){return QL(Gb("",null,null,null,[""],t=YL(t),0,[0],t))}function Gb(t,e,n,r,i,o,l,c,f){for(var g=0,y=0,h=l,p=0,E=0,A=0,_=1,I=1,C=1,v=0,T="",S=i,O=o,$=r,V=T;I;)switch(A=v,v=zl()){case 40:if(A!=108&&oa(V,h-1)==58){jT(V+=Ji(Hb(v),"&","&\f"),"&\f")!=-1&&(C=-1);break}case 34:case 39:case 91:V+=Hb(v);break;case 9:case 10:case 13:case 32:V+=AQ(A);break;case 92:V+=IQ(zb()-1,7);continue;case 47:switch(Xc()){case 42:case 47:Zb(NQ(CQ(zl(),zb()),e,n),f);break;default:V+="/"}break;case 123*_:c[g++]=Qc(V)*C;case 125*_:case 59:case 0:switch(v){case 0:case 125:I=0;case 59+y:C==-1&&(V=Ji(V,/\f/g,"")),E>0&&Qc(V)-h&&Zb(E>32?JL(V+";",r,n,h-1):JL(Ji(V," ","")+";",r,n,h-2),f);break;case 59:V+=";";default:if(Zb($=XL(V,e,n,g,y,i,c,T,S=[],O=[],h),o),v===123)if(y===0)Gb(V,e,$,$,S,o,h,c,O);else switch(p===99&&oa(V,3)===110?100:p){case 100:case 108:case 109:case 115:Gb(t,$,$,r&&Zb(XL(t,$,$,0,0,i,c,T,i,S=[],h),O),i,O,h,c,r?S:O);break;default:Gb(V,$,$,$,[""],O,0,c,O)}}g=y=E=0,_=C=1,T=V="",h=l;break;case 58:h=1+Qc(V),E=A;default:if(_<1){if(v==123)--_;else if(v==125&&_++==0&&SQ()==125)continue}switch(V+=Bb(v),v*_){case 38:C=y>0?1:(V+="\f",-1);break;case 44:c[g++]=(Qc(V)-1)*C,C=1;break;case 64:Xc()===45&&(V+=Hb(zl())),p=Xc(),y=h=Qc(T=V+=RQ(zb())),v++;break;case 45:A===45&&Qc(V)==2&&(_=0)}}return o}function XL(t,e,n,r,i,o,l,c,f,g,y){for(var h=i-1,p=i===0?o:[""],E=VT(p),A=0,_=0,I=0;A<r;++A)for(var C=0,v=Iv(t,h+1,h=vQ(_=l[A])),T=t;C<E;++C)(T=WL(_>0?p[C]+" "+v:Ji(v,/&\f/g,p[C])))&&(f[I++]=T);return Vb(t,e,n,i===0?BT:c,f,g,y)}function NQ(t,e,n){return Vb(t,e,n,GL,Bb(TQ()),Iv(t,2,-2),0)}function JL(t,e,n,r){return Vb(t,e,n,ZT,Iv(t,0,r),Iv(t,r+1,-1),r)}function Vg(t,e){for(var n="",r=VT(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function OQ(t,e,n,r){switch(t.type){case yQ:if(t.children.length)break;case mQ:case ZT:return t.return=t.return||t.value;case GL:return"";case qL:return t.return=t.value+"{"+Vg(t.children,r)+"}";case BT:t.value=t.props.join(",")}return Qc(n=Vg(t.children,r))?t.return=t.value+"{"+n+"}":""}function LQ(t){var e=VT(t);return function(n,r,i,o){for(var l="",c=0;c<e;c++)l+=t[c](n,r,i,o)||"";return l}}function DQ(t){return function(e){e.root||(e=e.return)&&t(e)}}var PQ=function(e,n,r){for(var i=0,o=0;i=o,o=Xc(),i===38&&o===12&&(n[r]=1),!xv(o);)zl();return Rv(e,_l)},MQ=function(e,n){var r=-1,i=44;do switch(xv(i)){case 0:i===38&&Xc()===12&&(n[r]=1),e[r]+=PQ(_l-1,n,r);break;case 2:e[r]+=Hb(i);break;case 4:if(i===44){e[++r]=Xc()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=Bb(i)}while(i=zl());return e},kQ=function(e,n){return QL(MQ(YL(e),n))},eD=new WeakMap,FQ=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!eD.get(r))&&!i){eD.set(e,!0);for(var o=[],l=kQ(n,o),c=r.props,f=0,g=0;f<l.length;f++)for(var y=0;y<c.length;y++,g++)e.props[g]=o[f]?l[f].replace(/&\f/g,c[y]):c[y]+" "+l[f]}}},$Q=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function tD(t,e){switch(bQ(t,e)){case 5103:return Xi+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Xi+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Xi+t+Ub+t+Ta+t+t;case 6828:case 4268:return Xi+t+Ta+t+t;case 6165:return Xi+t+Ta+"flex-"+t+t;case 5187:return Xi+t+Ji(t,/(\w+).+(:[^]+)/,Xi+"box-$1$2"+Ta+"flex-$1$2")+t;case 5443:return Xi+t+Ta+"flex-item-"+Ji(t,/flex-|-self/,"")+t;case 4675:return Xi+t+Ta+"flex-line-pack"+Ji(t,/align-content|flex-|-self/,"")+t;case 5548:return Xi+t+Ta+Ji(t,"shrink","negative")+t;case 5292:return Xi+t+Ta+Ji(t,"basis","preferred-size")+t;case 6060:return Xi+"box-"+Ji(t,"-grow","")+Xi+t+Ta+Ji(t,"grow","positive")+t;case 4554:return Xi+Ji(t,/([^-])(transform)/g,"$1"+Xi+"$2")+t;case 6187:return Ji(Ji(Ji(t,/(zoom-|grab)/,Xi+"$1"),/(image-set)/,Xi+"$1"),t,"")+t;case 5495:case 3959:return Ji(t,/(image-set\([^]*)/,Xi+"$1$`$1");case 4968:return Ji(Ji(t,/(.+:)(flex-)?(.*)/,Xi+"box-pack:$3"+Ta+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Xi+t+t;case 4095:case 3583:case 4068:case 2532:return Ji(t,/(.+)-inline(.+)/,Xi+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Qc(t)-1-e>6)switch(oa(t,e+1)){case 109:if(oa(t,e+4)!==45)break;case 102:return Ji(t,/(.+:)(.+)-([^]+)/,"$1"+Xi+"$2-$3$1"+Ub+(oa(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~jT(t,"stretch")?tD(Ji(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(oa(t,e+1)!==115)break;case 6444:switch(oa(t,Qc(t)-3-(~jT(t,"!important")&&10))){case 107:return Ji(t,":",":"+Xi)+t;case 101:return Ji(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Xi+(oa(t,14)===45?"inline-":"")+"box$3$1"+Xi+"$2$3$1"+Ta+"$2box$3")+t}break;case 5936:switch(oa(t,e+11)){case 114:return Xi+t+Ta+Ji(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Xi+t+Ta+Ji(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Xi+t+Ta+Ji(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Xi+t+Ta+t+t}return t}var UQ=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case ZT:e.return=tD(e.value,e.length);break;case qL:return Vg([Cv(e,{value:Ji(e.value,"@","@"+Xi)})],i);case BT:if(e.length)return wQ(e.props,function(o){switch(EQ(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Vg([Cv(e,{props:[Ji(o,/:(read-\w+)/,":"+Ub+"$1")]})],i);case"::placeholder":return Vg([Cv(e,{props:[Ji(o,/:(plac\w+)/,":"+Xi+"input-$1")]}),Cv(e,{props:[Ji(o,/:(plac\w+)/,":"+Ub+"$1")]}),Cv(e,{props:[Ji(o,/:(plac\w+)/,Ta+"input-$1")]})],i)}return""})}},BQ=[UQ],ZQ=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(_){var I=_.getAttribute("data-emotion");I.indexOf(" ")!==-1&&(document.head.appendChild(_),_.setAttribute("data-s",""))})}var i=e.stylisPlugins||BQ,o={},l,c=[];l=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(_){for(var I=_.getAttribute("data-emotion").split(" "),C=1;C<I.length;C++)o[I[C]]=!0;c.push(_)});var f,g=[FQ,$Q];{var y,h=[OQ,DQ(function(_){y.insert(_)})],p=LQ(g.concat(i,h)),E=function(I){return Vg(xQ(I),p)};f=function(I,C,v,T){y=v,E(I?I+"{"+C.styles+"}":C.styles),T&&(A.inserted[C.name]=!0)}}var A={key:n,sheet:new gQ({key:n,container:l,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:f};return A.sheet.hydrate(c),A},jQ=!0;function VQ(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):i&&(r+=i+" ")}),r}var nD=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||jQ===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},zQ=function(e,n,r){nD(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var o=n;do e.insert(n===o?"."+i:"",o,e.sheet,!0),o=o.next;while(o!==void 0)}};function HQ(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var GQ={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},qQ=/[A-Z]|^ms/g,WQ=/_EMO_([^_]+?)_([^]*?)_EMO_/g,rD=function(e){return e.charCodeAt(1)===45},iD=function(e){return e!=null&&typeof e!="boolean"},HT=HL(function(t){return rD(t)?t:t.replace(qQ,"-$&").toLowerCase()}),oD=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(WQ,function(r,i,o){return Jc={name:i,styles:o,next:Jc},i})}return GQ[e]!==1&&!rD(e)&&typeof n=="number"&&n!==0?n+"px":n};function Nv(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return Jc={name:i.name,styles:i.styles,next:Jc},i.name;var o=n;if(o.styles!==void 0){var l=o.next;if(l!==void 0)for(;l!==void 0;)Jc={name:l.name,styles:l.styles,next:Jc},l=l.next;var c=o.styles+";";return c}return KQ(t,e,n)}case"function":{if(t!==void 0){var f=Jc,g=n(t);return Jc=f,Nv(t,e,g)}break}}var y=n;if(e==null)return y;var h=e[y];return h!==void 0?h:y}function KQ(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Nv(t,e,n[i])+";";else for(var o in n){var l=n[o];if(typeof l!="object"){var c=l;e!=null&&e[c]!==void 0?r+=o+"{"+e[c]+"}":iD(c)&&(r+=HT(o)+":"+oD(o,c)+";")}else if(Array.isArray(l)&&typeof l[0]=="string"&&(e==null||e[l[0]]===void 0))for(var f=0;f<l.length;f++)iD(l[f])&&(r+=HT(o)+":"+oD(o,l[f])+";");else{var g=Nv(t,e,l);switch(o){case"animation":case"animationName":{r+=HT(o)+":"+g+";";break}default:r+=o+"{"+g+"}"}}}return r}var sD=/label:\s*([^\s;{]+)\s*(;|$)/g,Jc;function aD(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,i="";Jc=void 0;var o=t[0];if(o==null||o.raw===void 0)r=!1,i+=Nv(n,e,o);else{var l=o;i+=l[0]}for(var c=1;c<t.length;c++)if(i+=Nv(n,e,t[c]),r){var f=o;i+=f[c]}sD.lastIndex=0;for(var g="",y;(y=sD.exec(i))!==null;)g+="-"+y[1];var h=HQ(i)+g;return{name:h,styles:i,next:Jc}}var YQ=function(e){return e()},QQ=$C.useInsertionEffect?$C.useInsertionEffect:!1,XQ=QQ||YQ,lD=xe.createContext(typeof HTMLElement<"u"?ZQ({key:"css"}):null);lD.Provider;var JQ=function(e){return xe.forwardRef(function(n,r){var i=xe.useContext(lD);return e(n,i,r)})},eX=xe.createContext({}),tX=dQ,nX=function(e){return e!=="theme"},uD=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?tX:nX},cD=function(e,n,r){var i;if(n){var o=n.shouldForwardProp;i=e.__emotion_forwardProp&&o?function(l){return e.__emotion_forwardProp(l)&&o(l)}:o}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},rX=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return nD(n,r,i),XQ(function(){return zQ(n,r,i)}),null},iX=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,o,l;n!==void 0&&(o=n.label,l=n.target);var c=cD(e,n,r),f=c||uD(i),g=!f("as");return function(){var y=arguments,h=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(o!==void 0&&h.push("label:"+o+";"),y[0]==null||y[0].raw===void 0)h.push.apply(h,y);else{h.push(y[0][0]);for(var p=y.length,E=1;E<p;E++)h.push(y[E],y[0][E])}var A=JQ(function(_,I,C){var v=g&&_.as||i,T="",S=[],O=_;if(_.theme==null){O={};for(var $ in _)O[$]=_[$];O.theme=xe.useContext(eX)}typeof _.className=="string"?T=VQ(I.registered,S,_.className):_.className!=null&&(T=_.className+" ");var V=aD(h.concat(S),I.registered,O);T+=I.key+"-"+V.name,l!==void 0&&(T+=" "+l);var B=g&&c===void 0?uD(v):f,ne={};for(var D in _)g&&D==="as"||B(D)&&(ne[D]=_[D]);return ne.className=T,C&&(ne.ref=C),xe.createElement(xe.Fragment,null,xe.createElement(rX,{cache:I,serialized:V,isStringTag:typeof v=="string"}),xe.createElement(v,ne))});return A.displayName=o!==void 0?o:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",A.defaultProps=e.defaultProps,A.__emotion_real=A,A.__emotion_base=i,A.__emotion_styles=h,A.__emotion_forwardProp=c,Object.defineProperty(A,"toString",{value:function(){return"."+l}}),A.withComponent=function(_,I){return t(_,UT({},n,I,{shouldForwardProp:cD(A,I,!0)})).apply(void 0,h)},A}},oX=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],GT=iX.bind();oX.forEach(function(t){GT[t]=GT(t)});/**
 * @mui/styled-engine v6.1.8
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function sX(t,e){return GT(t,e)}function aX(t,e){Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))}const fD=[];function dD(t){return fD[0]=t,aD(fD)}const lX=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>({...n,[r.key]:r.val}),{})};function uX(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...i}=t,o=lX(e),l=Object.keys(o);function c(p){return`@media (min-width:${typeof e[p]=="number"?e[p]:p}${n})`}function f(p){return`@media (max-width:${(typeof e[p]=="number"?e[p]:p)-r/100}${n})`}function g(p,E){const A=l.indexOf(E);return`@media (min-width:${typeof e[p]=="number"?e[p]:p}${n}) and (max-width:${(A!==-1&&typeof e[l[A]]=="number"?e[l[A]]:E)-r/100}${n})`}function y(p){return l.indexOf(p)+1<l.length?g(p,l[l.indexOf(p)+1]):c(p)}function h(p){const E=l.indexOf(p);return E===0?c(l[1]):E===l.length-1?f(l[E]):g(p,l[l.indexOf(p)+1]).replace("@media","@media not all and")}return{keys:l,values:o,up:c,down:f,between:g,only:y,not:h,unit:n,...i}}const cX={borderRadius:4};function hD(t=8,e=FT({spacing:t})){if(t.mui)return t;const n=(...r)=>(r.length===0?[1]:r).map(o=>{const l=e(o);return typeof l=="number"?`${l}px`:l}).join(" ");return n.mui=!0,n}function fX(t,e){const n=this;if(n.vars){if(!n.colorSchemes?.[t]||typeof n.getColorSchemeSelector!="function")return{};let r=n.getColorSchemeSelector(t);return r==="&"?e:((r.includes("data-")||r.includes("."))&&(r=`*:where(${r.replace(/\s*&$/,"")}) &`),{[r]:e})}return n.palette.mode===t?e:{}}function pD(t={},...e){const{breakpoints:n={},palette:r={},spacing:i,shape:o={},...l}=t,c=uX(n),f=hD(i);let g=jl({breakpoints:c,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:f,shape:{...cX,...o}},l);return g=wY(g),g.applyStyles=fX,g=e.reduce((y,h)=>jl(y,h),g),g.unstable_sxConfig={...$b,...l?.unstable_sxConfig},g.unstable_sx=function(h){return Bg({sx:h,theme:this})},g}function gD(t){const{variants:e,...n}=t,r={variants:e,style:dD(n),isProcessed:!0};return r.style===n||e&&e.forEach(i=>{typeof i.style!="function"&&(i.style=dD(i.style))}),r}const dX=pD();function qT(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}function hX(t){return t?(e,n)=>n[t]:null}function pX(t,e,n){t.theme=yX(t.theme)?n:t.theme[e]||t.theme}function qb(t,e){const n=typeof e=="function"?e(t):e;if(Array.isArray(n))return n.flatMap(r=>qb(t,r));if(Array.isArray(n?.variants)){let r;if(n.isProcessed)r=n.style;else{const{variants:i,...o}=n;r=o}return mD(t,n.variants,[r])}return n?.isProcessed?n.style:n}function mD(t,e,n=[]){let r;e:for(let i=0;i<e.length;i+=1){const o=e[i];if(typeof o.props=="function"){if(r??={...t,...t.ownerState,ownerState:t.ownerState},!o.props(r))continue}else for(const l in o.props)if(t[l]!==o.props[l]&&t.ownerState?.[l]!==o.props[l])continue e;typeof o.style=="function"?(r??={...t,...t.ownerState,ownerState:t.ownerState},n.push(o.style(r))):n.push(o.style)}return n}function gX(t={}){const{themeId:e,defaultTheme:n=dX,rootShouldForwardProp:r=qT,slotShouldForwardProp:i=qT}=t;function o(c){pX(c,e,n)}return(c,f={})=>{aX(c,O=>O.filter($=>$!==Bg));const{name:g,slot:y,skipVariantsResolver:h,skipSx:p,overridesResolver:E=hX(_X(y)),...A}=f,_=h!==void 0?h:y&&y!=="Root"&&y!=="root"||!1,I=p||!1;let C=qT;y==="Root"||y==="root"?C=r:y?C=i:vX(c)&&(C=void 0);const v=sX(c,{shouldForwardProp:C,label:mX(),...A}),T=O=>{if(typeof O=="function"&&O.__emotion_real!==O)return function(V){return qb(V,O)};if(zf(O)){const $=gD(O);return $.variants?function(B){return qb(B,$)}:$.style}return O},S=(...O)=>{const $=[],V=O.map(T),B=[];if($.push(o),g&&E&&B.push(function(ve){const ye=ve.theme.components?.[g]?.styleOverrides;if(!ye)return null;const Ne={};for(const Me in ye)Ne[Me]=qb(ve,ye[Me]);return E(ve,Ne)}),g&&!_&&B.push(function(ve){const ye=ve.theme?.components?.[g]?.variants;return ye?mD(ve,ye):null}),I||B.push(Bg),Array.isArray(V[0])){const X=V.shift(),ve=new Array($.length).fill(""),ie=new Array(B.length).fill("");let ye;ye=[...ve,...X,...ie],ye.raw=[...ve,...X.raw,...ie],$.unshift(ye)}const ne=[...$,...V,...B],D=v(...ne);return c.muiName&&(D.muiName=c.muiName),D};return v.withConfig&&(S.withConfig=v.withConfig),S}}function mX(t,e){return void 0}function yX(t){for(const e in t)return!1;return!0}function vX(t){return typeof t=="string"&&t.charCodeAt(0)>96}function _X(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function WT(t,e=0,n=1){return yY(t,e,n)}function bX(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function qd(t){if(t.type)return t;if(t.charAt(0)==="#")return qd(bX(t));const e=t.indexOf("("),n=t.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(ip(9,t));let r=t.substring(e+1,t.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error(ip(10,i))}else r=r.split(",");return r=r.map(o=>parseFloat(o)),{type:n,values:r,colorSpace:i}}const EX=t=>{const e=qd(t);return e.values.slice(0,3).map((n,r)=>e.type.includes("hsl")&&r!==0?`${n}%`:n).join(" ")},Ov=(t,e)=>{try{return EX(t)}catch{return t}};function Wb(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.includes("rgb")?r=r.map((i,o)=>o<3?parseInt(i,10):i):e.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.includes("color")?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function yD(t){t=qd(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,o=r*Math.min(i,1-i),l=(g,y=(g+n/30)%12)=>i-o*Math.max(Math.min(y-3,9-y,1),-1);let c="rgb";const f=[Math.round(l(0)*255),Math.round(l(8)*255),Math.round(l(4)*255)];return t.type==="hsla"&&(c+="a",f.push(e[3])),Wb({type:c,values:f})}function KT(t){t=qd(t);let e=t.type==="hsl"||t.type==="hsla"?qd(yD(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function wX(t,e){const n=KT(t),r=KT(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function TX(t,e){return t=qd(t),e=WT(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,Wb(t)}function Kb(t,e,n){try{return TX(t,e)}catch{return t}}function YT(t,e){if(t=qd(t),e=WT(e),t.type.includes("hsl"))t.values[2]*=1-e;else if(t.type.includes("rgb")||t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]*=1-e;return Wb(t)}function go(t,e,n){try{return YT(t,e)}catch{return t}}function QT(t,e){if(t=qd(t),e=WT(e),t.type.includes("hsl"))t.values[2]+=(100-t.values[2])*e;else if(t.type.includes("rgb"))for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return Wb(t)}function mo(t,e,n){try{return QT(t,e)}catch{return t}}function SX(t,e=.15){return KT(t)>.5?YT(t,e):QT(t,e)}function Yb(t,e,n){try{return SX(t,e)}catch{return t}}const AX=xe.createContext(void 0);function IX(t){const{theme:e,name:n,props:r}=t;if(!e||!e.components||!e.components[n])return r;const i=e.components[n];return i.defaultProps?PT(i.defaultProps,r):!i.styleOverrides&&!i.variants?PT(i,r):r}function CX({props:t,name:e}){const n=xe.useContext(AX);return IX({props:t,name:e,theme:{components:n}})}const vD={theme:void 0};function RX(t){let e,n;return function(i){let o=e;return(o===void 0||i.theme!==n)&&(vD.theme=i.theme,o=gD(t(vD)),e=o,n=i.theme),o}}function xX(t=""){function e(...r){if(!r.length)return"";const i=r[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${t?`${t}-`:""}${i}${e(...r.slice(1))})`:`, ${i}`}return(r,...i)=>`var(--${t?`${t}-`:""}${r}${e(...i)})`}const _D=(t,e,n,r=[])=>{let i=t;e.forEach((o,l)=>{l===e.length-1?Array.isArray(i)?i[Number(o)]=n:i&&typeof i=="object"&&(i[o]=n):i&&typeof i=="object"&&(i[o]||(i[o]=r.includes(o)?[]:{}),i=i[o])})},NX=(t,e,n)=>{function r(i,o=[],l=[]){Object.entries(i).forEach(([c,f])=>{(!n||n&&!n([...o,c]))&&f!=null&&(typeof f=="object"&&Object.keys(f).length>0?r(f,[...o,c],Array.isArray(f)?[...l,c]:l):e([...o,c],f,l))})}r(t)},OX=(t,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>t.includes(r))||t[t.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function XT(t,e){const{prefix:n,shouldSkipGeneratingVar:r}=e||{},i={},o={},l={};return NX(t,(c,f,g)=>{if((typeof f=="string"||typeof f=="number")&&(!r||!r(c,f))){const y=`--${n?`${n}-`:""}${c.join("-")}`,h=OX(c,f);Object.assign(i,{[y]:h}),_D(o,c,`var(${y})`,g),_D(l,c,`var(${y}, ${h})`,g)}},c=>c[0]==="vars"),{css:i,vars:o,varsWithDefaults:l}}function LX(t,e={}){const{getSelector:n=I,disableCssColorScheme:r,colorSchemeSelector:i}=e,{colorSchemes:o={},components:l,defaultColorScheme:c="light",...f}=t,{vars:g,css:y,varsWithDefaults:h}=XT(f,e);let p=h;const E={},{[c]:A,..._}=o;if(Object.entries(_||{}).forEach(([T,S])=>{const{vars:O,css:$,varsWithDefaults:V}=XT(S,e);p=jl(p,V),E[T]={css:$,vars:O}}),A){const{css:T,vars:S,varsWithDefaults:O}=XT(A,e);p=jl(p,O),E[c]={css:T,vars:S}}function I(T,S){let O=i;if(i==="class"&&(O=".%s"),i==="data"&&(O="[data-%s]"),i?.startsWith("data-")&&!i.includes("%s")&&(O=`[${i}="%s"]`),T){if(O==="media")return t.defaultColorScheme===T?":root":{[`@media (prefers-color-scheme: ${o[T]?.palette?.mode||T})`]:{":root":S}};if(O)return t.defaultColorScheme===T?`:root, ${O.replace("%s",String(T))}`:O.replace("%s",String(T))}return":root"}return{vars:p,generateThemeVars:()=>{let T={...g};return Object.entries(E).forEach(([,{vars:S}])=>{T=jl(T,S)}),T},generateStyleSheets:()=>{const T=[],S=t.defaultColorScheme||"light";function O(B,ne){Object.keys(ne).length&&T.push(typeof B=="string"?{[B]:{...ne}}:B)}O(n(void 0,{...y}),y);const{[S]:$,...V}=E;if($){const{css:B}=$,ne=o[S]?.palette?.mode,D=!r&&ne?{colorScheme:ne,...B}:{...B};O(n(S,{...D}),D)}return Object.entries(V).forEach(([B,{css:ne}])=>{const D=o[B]?.palette?.mode,X=!r&&D?{colorScheme:D,...ne}:{...ne};O(n(B,{...X}),X)}),T}}}function DX(t){return function(n){return t==="media"?`@media (prefers-color-scheme: ${n})`:t?t.startsWith("data-")&&!t.includes("%s")?`[${t}="${n}"] &`:t==="class"?`.${n} &`:t==="data"?`[data-${n}] &`:`${t.replace("%s",n)} &`:"&"}}const Lv={black:"#000",white:"#fff"},PX={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},zg={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Hg={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},Dv={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},Gg={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},qg={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Wg={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function bD(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Lv.white,default:Lv.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const MX=bD();function ED(){return{text:{primary:Lv.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Lv.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const wD=ED();function TD(t,e,n,r){const i=r.light||r,o=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=QT(t.main,i):e==="dark"&&(t.dark=YT(t.main,o)))}function kX(t="light"){return t==="dark"?{main:Gg[200],light:Gg[50],dark:Gg[400]}:{main:Gg[700],light:Gg[400],dark:Gg[800]}}function FX(t="light"){return t==="dark"?{main:zg[200],light:zg[50],dark:zg[400]}:{main:zg[500],light:zg[300],dark:zg[700]}}function $X(t="light"){return t==="dark"?{main:Hg[500],light:Hg[300],dark:Hg[700]}:{main:Hg[700],light:Hg[400],dark:Hg[800]}}function UX(t="light"){return t==="dark"?{main:qg[400],light:qg[300],dark:qg[700]}:{main:qg[700],light:qg[500],dark:qg[900]}}function BX(t="light"){return t==="dark"?{main:Wg[400],light:Wg[300],dark:Wg[700]}:{main:Wg[800],light:Wg[500],dark:Wg[900]}}function ZX(t="light"){return t==="dark"?{main:Dv[400],light:Dv[300],dark:Dv[700]}:{main:"#ed6c02",light:Dv[500],dark:Dv[900]}}function JT(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2,...i}=t,o=t.primary||kX(e),l=t.secondary||FX(e),c=t.error||$X(e),f=t.info||UX(e),g=t.success||BX(e),y=t.warning||ZX(e);function h(_){return wX(_,wD.text.primary)>=n?wD.text.primary:MX.text.primary}const p=({color:_,name:I,mainShade:C=500,lightShade:v=300,darkShade:T=700})=>{if(_={..._},!_.main&&_[C]&&(_.main=_[C]),!_.hasOwnProperty("main"))throw new Error(ip(11,I?` (${I})`:"",C));if(typeof _.main!="string")throw new Error(ip(12,I?` (${I})`:"",JSON.stringify(_.main)));return TD(_,"light",v,r),TD(_,"dark",T,r),_.contrastText||(_.contrastText=h(_.main)),_};let E;return e==="light"?E=bD():e==="dark"&&(E=ED()),jl({common:{...Lv},mode:e,primary:p({color:o,name:"primary"}),secondary:p({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:p({color:c,name:"error"}),warning:p({color:y,name:"warning"}),info:p({color:f,name:"info"}),success:p({color:g,name:"success"}),grey:PX,contrastThreshold:n,getContrastText:h,augmentColor:p,tonalOffset:r,...E},i)}function jX(t){const e={};return Object.entries(t).forEach(r=>{const[i,o]=r;typeof o=="object"&&(e[i]=`${o.fontStyle?`${o.fontStyle} `:""}${o.fontVariant?`${o.fontVariant} `:""}${o.fontWeight?`${o.fontWeight} `:""}${o.fontStretch?`${o.fontStretch} `:""}${o.fontSize||""}${o.lineHeight?`/${o.lineHeight} `:""}${o.fontFamily||""}`)}),e}function VX(t,e){return{toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}},...e}}function zX(t){return Math.round(t*1e5)/1e5}const SD={textTransform:"uppercase"},AD='"Roboto", "Helvetica", "Arial", sans-serif';function HX(t,e){const{fontFamily:n=AD,fontSize:r=14,fontWeightLight:i=300,fontWeightRegular:o=400,fontWeightMedium:l=500,fontWeightBold:c=700,htmlFontSize:f=16,allVariants:g,pxToRem:y,...h}=typeof e=="function"?e(t):e,p=r/14,E=y||(I=>`${I/f*p}rem`),A=(I,C,v,T,S)=>({fontFamily:n,fontWeight:I,fontSize:E(C),lineHeight:v,...n===AD?{letterSpacing:`${zX(T/C)}em`}:{},...S,...g}),_={h1:A(i,96,1.167,-1.5),h2:A(i,60,1.2,-.5),h3:A(o,48,1.167,0),h4:A(o,34,1.235,.25),h5:A(o,24,1.334,0),h6:A(l,20,1.6,.15),subtitle1:A(o,16,1.75,.15),subtitle2:A(l,14,1.57,.1),body1:A(o,16,1.5,.15),body2:A(o,14,1.43,.15),button:A(l,14,1.75,.4,SD),caption:A(o,12,1.66,.4),overline:A(o,12,2.66,1,SD),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return jl({htmlFontSize:f,pxToRem:E,fontFamily:n,fontSize:r,fontWeightLight:i,fontWeightRegular:o,fontWeightMedium:l,fontWeightBold:c,..._},h,{clone:!1})}const GX=.2,qX=.14,WX=.12;function ko(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${GX})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${qX})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${WX})`].join(",")}const KX=["none",ko(0,2,1,-1,0,1,1,0,0,1,3,0),ko(0,3,1,-2,0,2,2,0,0,1,5,0),ko(0,3,3,-2,0,3,4,0,0,1,8,0),ko(0,2,4,-1,0,4,5,0,0,1,10,0),ko(0,3,5,-1,0,5,8,0,0,1,14,0),ko(0,3,5,-1,0,6,10,0,0,1,18,0),ko(0,4,5,-2,0,7,10,1,0,2,16,1),ko(0,5,5,-3,0,8,10,1,0,3,14,2),ko(0,5,6,-3,0,9,12,1,0,3,16,2),ko(0,6,6,-3,0,10,14,1,0,4,18,3),ko(0,6,7,-4,0,11,15,1,0,4,20,3),ko(0,7,8,-4,0,12,17,2,0,5,22,4),ko(0,7,8,-4,0,13,19,2,0,5,24,4),ko(0,7,9,-4,0,14,21,2,0,5,26,4),ko(0,8,9,-5,0,15,22,2,0,6,28,5),ko(0,8,10,-5,0,16,24,2,0,6,30,5),ko(0,8,11,-5,0,17,26,2,0,6,32,5),ko(0,9,11,-5,0,18,28,2,0,7,34,6),ko(0,9,12,-6,0,19,29,2,0,7,36,6),ko(0,10,13,-6,0,20,31,3,0,8,38,7),ko(0,10,13,-6,0,21,33,3,0,8,40,7),ko(0,10,14,-6,0,22,35,3,0,8,42,7),ko(0,11,14,-7,0,23,36,3,0,9,44,8),ko(0,11,15,-7,0,24,38,3,0,9,46,8)],YX={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},QX={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function ID(t){return`${Math.round(t)}ms`}function XX(t){if(!t)return 0;const e=t/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function JX(t){const e={...YX,...t.easing},n={...QX,...t.duration};return{getAutoHeightDuration:XX,create:(i=["all"],o={})=>{const{duration:l=n.standard,easing:c=e.easeInOut,delay:f=0,...g}=o;return(Array.isArray(i)?i:[i]).map(y=>`${y} ${typeof l=="string"?l:ID(l)} ${c} ${typeof f=="string"?f:ID(f)}`).join(",")},...t,easing:e,duration:n}}const eJ={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function tJ(t){return zf(t)||typeof t>"u"||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||Array.isArray(t)}function CD(t={}){const e={...t};function n(r){const i=Object.entries(r);for(let o=0;o<i.length;o++){const[l,c]=i[o];!tJ(c)||l.startsWith("unstable_")?delete r[l]:zf(c)&&(r[l]={...c},n(r[l]))}}return n(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function eS(t={},...e){const{breakpoints:n,mixins:r={},spacing:i,palette:o={},transitions:l={},typography:c={},shape:f,...g}=t;if(t.vars)throw new Error(ip(20));const y=JT(o),h=pD(t);let p=jl(h,{mixins:VX(h.breakpoints,r),palette:y,shadows:KX.slice(),typography:HX(y,c),transitions:JX(l),zIndex:{...eJ}});return p=jl(p,g),p=e.reduce((E,A)=>jl(E,A),p),p.unstable_sxConfig={...$b,...g?.unstable_sxConfig},p.unstable_sx=function(A){return Bg({sx:A,theme:this})},p.toRuntimeSource=CD,p}function nJ(t){let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,Math.round(e*10)/1e3}const rJ=[...Array(25)].map((t,e)=>{if(e===0)return"none";const n=nJ(e);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function RD(t){return{inputPlaceholder:t==="dark"?.5:.42,inputUnderline:t==="dark"?.7:.42,switchTrackDisabled:t==="dark"?.2:.12,switchTrack:t==="dark"?.3:.38}}function xD(t){return t==="dark"?rJ:[]}function iJ(t){const{palette:e={mode:"light"},opacity:n,overlays:r,...i}=t,o=JT(e);return{palette:o,opacity:{...RD(o.mode),...n},overlays:r||xD(o.mode),...i}}function oJ(t){return!!t[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!t[0].match(/sxConfig$/)||t[0]==="palette"&&!!t[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const sJ=t=>[...[...Array(25)].map((e,n)=>`--${t?`${t}-`:""}overlays-${n}`),`--${t?`${t}-`:""}palette-AppBar-darkBg`,`--${t?`${t}-`:""}palette-AppBar-darkColor`],aJ=t=>(e,n)=>{const r=t.rootSelector||":root",i=t.colorSchemeSelector;let o=i;if(i==="class"&&(o=".%s"),i==="data"&&(o="[data-%s]"),i?.startsWith("data-")&&!i.includes("%s")&&(o=`[${i}="%s"]`),t.defaultColorScheme===e){if(e==="dark"){const l={};return sJ(t.cssVarPrefix).forEach(c=>{l[c]=n[c],delete n[c]}),o==="media"?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:l}}:o?{[o.replace("%s",e)]:l,[`${r}, ${o.replace("%s",e)}`]:n}:{[r]:{...n,...l}}}if(o&&o!=="media")return`${r}, ${o.replace("%s",String(e))}`}else if(e){if(o==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[r]:n}};if(o)return o.replace("%s",String(e))}return r};function lJ(t,e){e.forEach(n=>{t[n]||(t[n]={})})}function An(t,e,n){!t[e]&&n&&(t[e]=n)}function Pv(t){return!t||!t.startsWith("hsl")?t:yD(t)}function Gf(t,e){`${e}Channel`in t||(t[`${e}Channel`]=Ov(Pv(t[e])))}function uJ(t){return typeof t=="number"?`${t}px`:typeof t=="string"||typeof t=="function"||Array.isArray(t)?t:"8px"}const ef=t=>{try{return t()}catch{}},cJ=(t="mui")=>xX(t);function tS(t,e,n,r){if(!e)return;e=e===!0?{}:e;const i=r==="dark"?"dark":"light";if(!n){t[r]=iJ({...e,palette:{mode:i,...e?.palette}});return}const{palette:o,...l}=eS({...n,palette:{mode:i,...e?.palette}});return t[r]={...e,palette:o,opacity:{...RD(i),...e?.opacity},overlays:e?.overlays||xD(i)},l}function fJ(t={},...e){const{colorSchemes:n={light:!0},defaultColorScheme:r,disableCssColorScheme:i=!1,cssVarPrefix:o="mui",shouldSkipGeneratingVar:l=oJ,colorSchemeSelector:c=n.light&&n.dark?"media":void 0,rootSelector:f=":root",...g}=t,y=Object.keys(n)[0],h=r||(n.light&&y!=="light"?"light":y),p=cJ(o),{[h]:E,light:A,dark:_,...I}=n,C={...I};let v=E;if((h==="dark"&&!("dark"in n)||h==="light"&&!("light"in n))&&(v=!0),!v)throw new Error(ip(21,h));const T=tS(C,v,g,h);A&&!C.light&&tS(C,A,void 0,"light"),_&&!C.dark&&tS(C,_,void 0,"dark");let S={defaultColorScheme:h,...T,cssVarPrefix:o,colorSchemeSelector:c,rootSelector:f,getCssVar:p,colorSchemes:C,font:{...jX(T.typography),...T.font},spacing:uJ(g.spacing)};Object.keys(S.colorSchemes).forEach(ne=>{const D=S.colorSchemes[ne].palette,X=ve=>{const ie=ve.split("-"),ye=ie[1],Ne=ie[2];return p(ve,D[ye][Ne])};if(D.mode==="light"&&(An(D.common,"background","#fff"),An(D.common,"onBackground","#000")),D.mode==="dark"&&(An(D.common,"background","#000"),An(D.common,"onBackground","#fff")),lJ(D,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),D.mode==="light"){An(D.Alert,"errorColor",go(D.error.light,.6)),An(D.Alert,"infoColor",go(D.info.light,.6)),An(D.Alert,"successColor",go(D.success.light,.6)),An(D.Alert,"warningColor",go(D.warning.light,.6)),An(D.Alert,"errorFilledBg",X("palette-error-main")),An(D.Alert,"infoFilledBg",X("palette-info-main")),An(D.Alert,"successFilledBg",X("palette-success-main")),An(D.Alert,"warningFilledBg",X("palette-warning-main")),An(D.Alert,"errorFilledColor",ef(()=>D.getContrastText(D.error.main))),An(D.Alert,"infoFilledColor",ef(()=>D.getContrastText(D.info.main))),An(D.Alert,"successFilledColor",ef(()=>D.getContrastText(D.success.main))),An(D.Alert,"warningFilledColor",ef(()=>D.getContrastText(D.warning.main))),An(D.Alert,"errorStandardBg",mo(D.error.light,.9)),An(D.Alert,"infoStandardBg",mo(D.info.light,.9)),An(D.Alert,"successStandardBg",mo(D.success.light,.9)),An(D.Alert,"warningStandardBg",mo(D.warning.light,.9)),An(D.Alert,"errorIconColor",X("palette-error-main")),An(D.Alert,"infoIconColor",X("palette-info-main")),An(D.Alert,"successIconColor",X("palette-success-main")),An(D.Alert,"warningIconColor",X("palette-warning-main")),An(D.AppBar,"defaultBg",X("palette-grey-100")),An(D.Avatar,"defaultBg",X("palette-grey-400")),An(D.Button,"inheritContainedBg",X("palette-grey-300")),An(D.Button,"inheritContainedHoverBg",X("palette-grey-A100")),An(D.Chip,"defaultBorder",X("palette-grey-400")),An(D.Chip,"defaultAvatarColor",X("palette-grey-700")),An(D.Chip,"defaultIconColor",X("palette-grey-700")),An(D.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),An(D.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),An(D.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),An(D.LinearProgress,"primaryBg",mo(D.primary.main,.62)),An(D.LinearProgress,"secondaryBg",mo(D.secondary.main,.62)),An(D.LinearProgress,"errorBg",mo(D.error.main,.62)),An(D.LinearProgress,"infoBg",mo(D.info.main,.62)),An(D.LinearProgress,"successBg",mo(D.success.main,.62)),An(D.LinearProgress,"warningBg",mo(D.warning.main,.62)),An(D.Skeleton,"bg",`rgba(${X("palette-text-primaryChannel")} / 0.11)`),An(D.Slider,"primaryTrack",mo(D.primary.main,.62)),An(D.Slider,"secondaryTrack",mo(D.secondary.main,.62)),An(D.Slider,"errorTrack",mo(D.error.main,.62)),An(D.Slider,"infoTrack",mo(D.info.main,.62)),An(D.Slider,"successTrack",mo(D.success.main,.62)),An(D.Slider,"warningTrack",mo(D.warning.main,.62));const ve=Yb(D.background.default,.8);An(D.SnackbarContent,"bg",ve),An(D.SnackbarContent,"color",ef(()=>D.getContrastText(ve))),An(D.SpeedDialAction,"fabHoverBg",Yb(D.background.paper,.15)),An(D.StepConnector,"border",X("palette-grey-400")),An(D.StepContent,"border",X("palette-grey-400")),An(D.Switch,"defaultColor",X("palette-common-white")),An(D.Switch,"defaultDisabledColor",X("palette-grey-100")),An(D.Switch,"primaryDisabledColor",mo(D.primary.main,.62)),An(D.Switch,"secondaryDisabledColor",mo(D.secondary.main,.62)),An(D.Switch,"errorDisabledColor",mo(D.error.main,.62)),An(D.Switch,"infoDisabledColor",mo(D.info.main,.62)),An(D.Switch,"successDisabledColor",mo(D.success.main,.62)),An(D.Switch,"warningDisabledColor",mo(D.warning.main,.62)),An(D.TableCell,"border",mo(Kb(D.divider,1),.88)),An(D.Tooltip,"bg",Kb(D.grey[700],.92))}if(D.mode==="dark"){An(D.Alert,"errorColor",mo(D.error.light,.6)),An(D.Alert,"infoColor",mo(D.info.light,.6)),An(D.Alert,"successColor",mo(D.success.light,.6)),An(D.Alert,"warningColor",mo(D.warning.light,.6)),An(D.Alert,"errorFilledBg",X("palette-error-dark")),An(D.Alert,"infoFilledBg",X("palette-info-dark")),An(D.Alert,"successFilledBg",X("palette-success-dark")),An(D.Alert,"warningFilledBg",X("palette-warning-dark")),An(D.Alert,"errorFilledColor",ef(()=>D.getContrastText(D.error.dark))),An(D.Alert,"infoFilledColor",ef(()=>D.getContrastText(D.info.dark))),An(D.Alert,"successFilledColor",ef(()=>D.getContrastText(D.success.dark))),An(D.Alert,"warningFilledColor",ef(()=>D.getContrastText(D.warning.dark))),An(D.Alert,"errorStandardBg",go(D.error.light,.9)),An(D.Alert,"infoStandardBg",go(D.info.light,.9)),An(D.Alert,"successStandardBg",go(D.success.light,.9)),An(D.Alert,"warningStandardBg",go(D.warning.light,.9)),An(D.Alert,"errorIconColor",X("palette-error-main")),An(D.Alert,"infoIconColor",X("palette-info-main")),An(D.Alert,"successIconColor",X("palette-success-main")),An(D.Alert,"warningIconColor",X("palette-warning-main")),An(D.AppBar,"defaultBg",X("palette-grey-900")),An(D.AppBar,"darkBg",X("palette-background-paper")),An(D.AppBar,"darkColor",X("palette-text-primary")),An(D.Avatar,"defaultBg",X("palette-grey-600")),An(D.Button,"inheritContainedBg",X("palette-grey-800")),An(D.Button,"inheritContainedHoverBg",X("palette-grey-700")),An(D.Chip,"defaultBorder",X("palette-grey-700")),An(D.Chip,"defaultAvatarColor",X("palette-grey-300")),An(D.Chip,"defaultIconColor",X("palette-grey-300")),An(D.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),An(D.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),An(D.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),An(D.LinearProgress,"primaryBg",go(D.primary.main,.5)),An(D.LinearProgress,"secondaryBg",go(D.secondary.main,.5)),An(D.LinearProgress,"errorBg",go(D.error.main,.5)),An(D.LinearProgress,"infoBg",go(D.info.main,.5)),An(D.LinearProgress,"successBg",go(D.success.main,.5)),An(D.LinearProgress,"warningBg",go(D.warning.main,.5)),An(D.Skeleton,"bg",`rgba(${X("palette-text-primaryChannel")} / 0.13)`),An(D.Slider,"primaryTrack",go(D.primary.main,.5)),An(D.Slider,"secondaryTrack",go(D.secondary.main,.5)),An(D.Slider,"errorTrack",go(D.error.main,.5)),An(D.Slider,"infoTrack",go(D.info.main,.5)),An(D.Slider,"successTrack",go(D.success.main,.5)),An(D.Slider,"warningTrack",go(D.warning.main,.5));const ve=Yb(D.background.default,.98);An(D.SnackbarContent,"bg",ve),An(D.SnackbarContent,"color",ef(()=>D.getContrastText(ve))),An(D.SpeedDialAction,"fabHoverBg",Yb(D.background.paper,.15)),An(D.StepConnector,"border",X("palette-grey-600")),An(D.StepContent,"border",X("palette-grey-600")),An(D.Switch,"defaultColor",X("palette-grey-300")),An(D.Switch,"defaultDisabledColor",X("palette-grey-600")),An(D.Switch,"primaryDisabledColor",go(D.primary.main,.55)),An(D.Switch,"secondaryDisabledColor",go(D.secondary.main,.55)),An(D.Switch,"errorDisabledColor",go(D.error.main,.55)),An(D.Switch,"infoDisabledColor",go(D.info.main,.55)),An(D.Switch,"successDisabledColor",go(D.success.main,.55)),An(D.Switch,"warningDisabledColor",go(D.warning.main,.55)),An(D.TableCell,"border",go(Kb(D.divider,1),.68)),An(D.Tooltip,"bg",Kb(D.grey[700],.92))}Gf(D.background,"default"),Gf(D.background,"paper"),Gf(D.common,"background"),Gf(D.common,"onBackground"),Gf(D,"divider"),Object.keys(D).forEach(ve=>{const ie=D[ve];ie&&typeof ie=="object"&&(ie.main&&An(D[ve],"mainChannel",Ov(Pv(ie.main))),ie.light&&An(D[ve],"lightChannel",Ov(Pv(ie.light))),ie.dark&&An(D[ve],"darkChannel",Ov(Pv(ie.dark))),ie.contrastText&&An(D[ve],"contrastTextChannel",Ov(Pv(ie.contrastText))),ve==="text"&&(Gf(D[ve],"primary"),Gf(D[ve],"secondary")),ve==="action"&&(ie.active&&Gf(D[ve],"active"),ie.selected&&Gf(D[ve],"selected")))})}),S=e.reduce((ne,D)=>jl(ne,D),S);const O={prefix:o,disableCssColorScheme:i,shouldSkipGeneratingVar:l,getSelector:aJ(S)},{vars:$,generateThemeVars:V,generateStyleSheets:B}=LX(S,O);return S.vars=$,Object.entries(S.colorSchemes[S.defaultColorScheme]).forEach(([ne,D])=>{S[ne]=D}),S.generateThemeVars=V,S.generateStyleSheets=B,S.generateSpacing=function(){return hD(g.spacing,FT(this))},S.getColorSchemeSelector=DX(c),S.spacing=S.generateSpacing(),S.shouldSkipGeneratingVar=l,S.unstable_sxConfig={...$b,...g?.unstable_sxConfig},S.unstable_sx=function(D){return Bg({sx:D,theme:this})},S.toRuntimeSource=CD,S}function ND(t,e,n){t.colorSchemes&&n&&(t.colorSchemes[e]={...n!==!0&&n,palette:JT({...n===!0?{}:n.palette,mode:e})})}function dJ(t={},...e){const{palette:n,cssVariables:r=!1,colorSchemes:i=n?void 0:{light:!0},defaultColorScheme:o=n?.mode,...l}=t,c=o||"light",f=i?.[c],g={...i,...n?{[c]:{...typeof f!="boolean"&&f,palette:n}}:void 0};if(r===!1){if(!("colorSchemes"in t))return eS(t,...e);let y=n;"palette"in t||g[c]&&(g[c]!==!0?y=g[c].palette:c==="dark"&&(y={mode:"dark"}));const h=eS({...t,palette:y},...e);return h.defaultColorScheme=c,h.colorSchemes=g,h.palette.mode==="light"&&(h.colorSchemes.light={...g.light!==!0&&g.light,palette:h.palette},ND(h,"dark",g.dark)),h.palette.mode==="dark"&&(h.colorSchemes.dark={...g.dark!==!0&&g.dark,palette:h.palette},ND(h,"light",g.light)),h}return!n&&!("light"in g)&&c==="light"&&(g.light=!0),fJ({...l,colorSchemes:g,defaultColorScheme:c,...typeof r!="boolean"&&r},...e)}const hJ=dJ(),pJ="$$material";function gJ(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const mJ=gX({themeId:pJ,defaultTheme:hJ,rootShouldForwardProp:t=>gJ(t)&&t!=="classes"}),yJ=RX;function vJ(t){return CX(t)}function _J(t){return BL("MuiSvgIcon",t)}mY("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const bJ=t=>{const{color:e,fontSize:n,classes:r}=t,i={root:["root",e!=="inherit"&&`color${$g(e)}`,`fontSize${$g(n)}`]};return hY(i,_J,r)},EJ=mJ("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${$g(n.color)}`],e[`fontSize${$g(n.fontSize)}`]]}})(yJ(({theme:t})=>({userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:t.transitions?.create?.("fill",{duration:(t.vars??t).transitions?.duration?.shorter}),variants:[{props:e=>!e.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:t.typography?.pxToRem?.(20)||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:t.typography?.pxToRem?.(24)||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:t.typography?.pxToRem?.(35)||"2.1875rem"}},...Object.entries((t.vars??t).palette).filter(([,e])=>e&&e.main).map(([e])=>({props:{color:e},style:{color:(t.vars??t).palette?.[e]?.main}})),{props:{color:"action"},style:{color:(t.vars??t).palette?.action?.active}},{props:{color:"disabled"},style:{color:(t.vars??t).palette?.action?.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}))),Qb=xe.forwardRef(function(e,n){const r=vJ({props:e,name:"MuiSvgIcon"}),{children:i,className:o,color:l="inherit",component:c="svg",fontSize:f="medium",htmlColor:g,inheritViewBox:y=!1,titleAccess:h,viewBox:p="0 0 24 24",...E}=r,A=xe.isValidElement(i)&&i.type==="svg",_={...r,color:l,component:c,fontSize:f,instanceFontSize:e.fontSize,inheritViewBox:y,viewBox:p,hasSvgAsChild:A},I={};y||(I.viewBox=p);const C=bJ(_);return pe.jsxs(EJ,{as:c,className:vY(C.root,o),focusable:"false",color:g,"aria-hidden":h?void 0:!0,role:h?"img":void 0,ref:n,...I,...E,...A&&i.props,ownerState:_,children:[A?i.props.children:i,h?pe.jsx("title",{children:h}):null]})});Qb&&(Qb.muiName="SvgIcon");function Xb(t,e){function n(r,i){return pe.jsx(Qb,{"data-testid":`${e}Icon`,ref:i,...r,children:t})}return n.muiName=Qb.muiName,xe.memo(xe.forwardRef(n))}const wJ=Xb(pe.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m-1-4h2v2h-2zm1.61-9.96c-2.06-.3-3.88.97-4.43 2.79-.18.58.26 1.17.87 1.17h.2c.41 0 .74-.29.88-.67.32-.89 1.27-1.5 2.3-1.28.95.2 1.65 1.13 1.57 2.1-.1 1.34-1.62 1.63-2.45 2.88 0 .01-.01.01-.01.02-.01.02-.02.03-.03.05-.09.15-.18.32-.25.5-.01.03-.03.05-.04.08-.01.02-.01.04-.02.07-.12.34-.2.75-.2 1.25h2c0-.42.11-.77.28-1.07.02-.03.03-.06.05-.09.08-.14.18-.27.28-.39.01-.01.02-.03.03-.04.1-.12.21-.23.33-.34.96-.91 2.26-1.65 1.99-3.56-.24-1.74-1.61-3.21-3.35-3.47"}),"HelpOutlineRounded"),TJ=Xb([pe.jsx("path",{d:"M5 5h6c.55 0 1-.45 1-1s-.45-1-1-1H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h6c.55 0 1-.45 1-1s-.45-1-1-1H5z"},"0"),pe.jsx("path",{d:"m20.65 11.65-2.79-2.79c-.32-.32-.86-.1-.86.35V11h-7c-.55 0-1 .45-1 1s.45 1 1 1h7v1.79c0 .45.54.67.85.35l2.79-2.79c.2-.19.2-.51.01-.7"},"1")],"LogoutRounded"),SJ=Xb(pe.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 16.5c-.83 0-1.5-.67-1.5-1.5h3c0 .83-.67 1.5-1.5 1.5m4-2.5H8c-.55 0-1-.45-1-1s.45-1 1-1v-3c0-1.86 1.28-3.41 3-3.86V6.5c0-.55.45-1 1-1s1 .45 1 1v.64c1.72.45 3 2 3 3.86v3c.55 0 1 .45 1 1s-.45 1-1 1"}),"CircleNotificationsRounded"),AJ=Xb([pe.jsx("path",{d:"M17.5 4.5c-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5-1.45 0-2.99.22-4.28.79C1.49 5.62 1 6.33 1 7.14v11.28c0 1.3 1.22 2.26 2.48 1.94.98-.25 2.02-.36 3.02-.36 1.56 0 3.22.26 4.56.92.6.3 1.28.3 1.87 0 1.34-.67 3-.92 4.56-.92 1 0 2.04.11 3.02.36 1.26.33 2.48-.63 2.48-1.94V7.14c0-.81-.49-1.52-1.22-1.85-1.28-.57-2.82-.79-4.27-.79M21 17.23c0 .63-.58 1.09-1.2.98-.75-.14-1.53-.2-2.3-.2-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5.92 0 1.83.09 2.7.28.46.1.8.51.8.98z"},"0"),pe.jsx("path",{d:"M13.98 11.01c-.32 0-.61-.2-.71-.52-.13-.39.09-.82.48-.94 1.54-.5 3.53-.66 5.36-.45.41.05.71.42.66.83s-.42.71-.83.66c-1.62-.19-3.39-.04-4.73.39-.08.01-.16.03-.23.03m0 2.66c-.32 0-.61-.2-.71-.52-.13-.39.09-.82.48-.94 1.53-.5 3.53-.66 5.36-.45.41.05.71.42.66.83s-.42.71-.83.66c-1.62-.19-3.39-.04-4.73.39-.08.02-.16.03-.23.03m0 2.66c-.32 0-.61-.2-.71-.52-.13-.39.09-.82.48-.94 1.53-.5 3.53-.66 5.36-.45.41.05.71.42.66.83s-.42.7-.83.66c-1.62-.19-3.39-.04-4.73.39-.08.02-.16.03-.23.03"},"1")],"MenuBookRounded");function IJ({activeTab:t,onTabChange:e,unreadNewsCount:n,hasGuides:r=!0,hasNews:i=!0,hasLibrary:o=!0}){const l=za(),{projectLanguages:c,t:f}=Gi(),{logout:g,authType:y}=ms(),{sendLogoutEvent:h}=_L(),p=y!=="anonymous"&&y!=="auto-auth",E=l?.config.support.type!=="none";return pe.jsxs("div",{className:Qa.navbar,role:"navigation",children:[l?.config.chatbot.enabled&&pe.jsx(Fg,{className:Qa["navbar-icon-chatbot"],icon:pe.jsx(dY,{}),active:t==="chatbot",onClick:()=>{e("chatbot")},label:f("chatbot")}),r&&pe.jsx(Fg,{icon:pe.jsx(AJ,{}),active:t==="guides",onClick:()=>{e("guides")},label:f("Guides")}),l?.config.enable_project_library&&o&&pe.jsx(Fg,{icon:pe.jsx(cY,{}),active:t==="library",onClick:()=>{e("library")},label:f("library")}),i&&pe.jsx(Fg,{icon:pe.jsx(SJ,{}),active:t==="news",redDot:n>0,onClick:()=>{e("news")},label:f("News")}),pe.jsxs("div",{className:Qa["navbar-footer"],children:[E&&pe.jsx(Fg,{active:t==="support",icon:pe.jsx(wJ,{}),onClick:()=>{e("support")},label:f("support")}),p&&pe.jsx(Fg,{className:Qa["navbar-icon-disconnect"],icon:pe.jsx(TJ,{}),onClick:()=>{g().then(()=>{h()}).catch(Re.error)},label:f("logout")}),c.length>=2&&pe.jsx(fY,{})]})]})}function CJ(t){const{theme:e}=Kc();return pe.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:80,height:20,fill:"none","aria-hidden":"true",...t,children:[pe.jsx("path",{fill:Y0(e.colors.primary)?"#F7DE00":"#fff",d:"M47.792 15.274c-.895 0-4.923.748-7.608-1.946-2.685-2.695-2.387-6.885-1.94-7.334.448-.45-.745-1.049 0-1.797.746-.748 1.343.45 1.79 0 .448-.449 4.624-.748 7.31 1.947 2.684 2.694 1.939 6.736 1.939 7.634 0 .577-.185.846-.317.964a2.618 2.618 0 0 0-.215.215c-.117.133-.384.318-.96.318Z"}),pe.jsx("path",{fill:Y0(e.colors.primary)?"#71A4FA":"#1E2737",d:"M43.775.634c-.07-.006-2.01-.077-3.061.865l-.09.09c-.938 1.054-.867 3-.862 3.073.071.006 2.01.077 3.062-.865l.09-.09c.938-1.055.867-3 .861-3.073Z"}),pe.jsx("path",{fill:Y0(e.colors.primary)?"#fff":"#1E2737",d:"M2.6 1.385v11.35h6.012v2.186H0V1.385h2.6ZM14.798 15.055c-.976 0-1.831-.212-2.563-.638a4.408 4.408 0 0 1-1.705-1.778c-.405-.76-.607-1.638-.607-2.63 0-.94.202-1.779.607-2.514a4.562 4.562 0 0 1 1.667-1.74c.707-.426 1.515-.638 2.428-.638s1.74.196 2.447.59c.707.393 1.255.95 1.647 1.673.392.722.594 1.56.607 2.513 0 .142-.01.3-.029.474a6.163 6.163 0 0 1-.086.55h-6.629c.051.413.183.765.396 1.055.213.29.475.516.79.677.314.16.677.24 1.088.24.462 0 .883-.096 1.262-.29.379-.193.652-.457.819-.792l2.196.638a4.323 4.323 0 0 1-1.724 1.924c-.765.458-1.635.686-2.611.686Zm1.83-5.936a2.1 2.1 0 0 0-.307-.976 1.91 1.91 0 0 0-.704-.677 2.004 2.004 0 0 0-.992-.24c-.321.013-.624.1-.906.26-.283.162-.524.38-.722.657-.2.278-.332.603-.396.976h4.028ZM21.369 5.252h2.235l.174.947a3.64 3.64 0 0 1 1.108-.783c.43-.2.902-.3 1.416-.3.604 0 1.162.132 1.676.396.514.265.932.642 1.253 1.132a3.4 3.4 0 0 1 1.35-1.122 4.174 4.174 0 0 1 1.83-.405c.758 0 1.417.16 1.975.483.559.322.993.79 1.301 1.402.308.612.462 1.37.462 2.272v5.646h-2.467V9.583c0-.722-.16-1.27-.482-1.644-.321-.374-.778-.56-1.368-.56-.59 0-1.075.19-1.417.57-.34.38-.51.945-.51 1.692v5.279h-2.467V9.583c0-.722-.142-1.27-.424-1.644-.283-.374-.726-.56-1.33-.56-.603 0-1.079.19-1.388.57-.308.38-.462.938-.462 1.673v5.298h-2.466V5.252ZM51.423 5.252h2.235l.174.986a3.286 3.286 0 0 1 1.128-.821c.443-.2.922-.3 1.435-.3.771 0 1.423.16 1.957.483.533.322.94.79 1.224 1.402.282.612.424 1.37.424 2.272v5.646h-2.467V9.583c0-.722-.15-1.276-.453-1.663-.302-.387-.749-.58-1.34-.58-.59 0-1.063.193-1.377.58-.315.387-.472.954-.472 1.702v5.298h-2.467V5.252h-.001Z"})]})}function OD({size:t=20,...e}){return pe.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 20 20",fill:"none","aria-hidden":"true",...e,children:[pe.jsx("path",{fill:"currentColor",d:"M2.48 3.283a1.144 1.144 0 0 1 0-1.6 1.103 1.103 0 0 1 1.577 0l14.189 14.403a1.144 1.144 0 0 1 0 1.6 1.103 1.103 0 0 1-1.577 0L2.481 3.283Z"}),pe.jsx("path",{fill:"currentColor",d:"M17.997 3.283a1.144 1.144 0 0 0 0-1.6 1.103 1.103 0 0 0-1.576 0L2.232 16.086a1.144 1.144 0 0 0 0 1.6 1.103 1.103 0 0 0 1.577 0L17.997 3.283Z"})]})}const Wd={"news-tab-wrapper":"_news-tab-wrapper_1j50g_1","news-list":"_news-list_1j50g_8","news-item":"_news-item_1j50g_18","news-read":"_news-read_1j50g_27","news-read-icon":"_news-read-icon_1j50g_31","news-title":"_news-title_1j50g_42","news-new-indicator":"_news-new-indicator_1j50g_57","news-empty-list-wrapper":"_news-empty-list-wrapper_1j50g_61"};function RJ(t,e){return t.reduce((n,r)=>{try{const i=xJ(r,e);return[...n,i]}catch(i){return Re.error(`Error while creating a short news with id (${r.id}): "${i.message}". Skipping it. Full news response object:`,r),n}},[])}function xJ(t,e){const n=e.find(r=>r.id===t.tool_id);if(n===void 0)throw new Error(`No valid tool found with id = (${t.tool_id})`);return{...t,tool:n,read_at:t.read_at!==null?new Date(t.read_at):null,display:{...t.display,not_after:t.display.not_after!==null?new Date(t.display.not_after):null,not_before:t.display.not_before!==null?new Date(t.display.not_before):null}}}function LD(t){return t!==null?new Date(t):null}function NJ(t,e){return t.reduce((n,r)=>{try{const i=OJ(r,e);return[...n,i]}catch(i){return Re.error(`Error while creating a smart launcher with id (${r.id}): "${i.message}". Skipping it. Full smart launcher response object:`,r),n}},[])}function OJ(t,e){const n=e.find(r=>r.id===t.tool_legacy_id);if(n===void 0)throw new Error(`No valid tool found with id = (${t.tool_legacy_id})`);return{...t,tool:n,display:{not_before:LD(t.display.not_before),not_after:LD(t.display.not_after)}}}function LJ(t,e){return t.reduce((n,r)=>{try{const i=DJ(r,e);return[...n,i]}catch(i){return Re.error(`Error while creating a quick launcher with id (${r.id}): "${i.message}". Skipping it. Full quick launcher response object:`,r),n}},[])}function DJ(t,e){const n=e.find(r=>r.id===t.tool_legacy_id);if(n===void 0)throw new Error(`No valid tool found with id = (${t.tool_legacy_id})`);return{...t,tool:n}}const PJ=t=>async({queryKey:e})=>{Re.debug("Fetching player content...",{language:e[2].language});const n=MJ(e[2].profileAndTagsHash,e[2].language),r=await t(`${Ii("API_URL")}/v3/init/content${n}`,{headers:{Accept:"application/json"}}).catch(i=>{throw Re.error(i,"Error while fetching player content"),i});if(r.status!==200)throw new Eu({expected:200,received:r.status});return Re.debug("Fetching player content successful",{news:r.body.news.map(i=>({id:i.id,title:i.title,autoDisplay:i.display.auto,recurrence:i.recurrence,readAt:i.read_at})),smartLaunchers:r.body.smart_launchers.map(i=>({id:i.id})),quickLaunchers:r.body.quick_launchers.map(i=>({id:i.id})),informators:r.body.informational_tooltips.map(i=>({id:i.id})),validators:r.body.validation_tooltips.map(i=>({id:i.id}))}),r.body};function MJ(t,e){const n=new URLSearchParams;return n.set("lang",e),t!=null&&n.set("_cb",t),`?${n.toString()}`}function Mv(t){const{data:e}=D1(),{currentLanguage:n,languageIsValidatedAfterAuth:r}=Gi(),i=Za(),{profileAndTagsHash:o,userId:l}=ms(),c=xe.useCallback(g=>{if(e===void 0)throw new Error("Logical error : tools should be loaded before the init content request is triggered");const y=f(g,e);return t(y)},[t,e]);function f(g,y){const h=RJ(g.news,y),p=LJ(g.quick_launchers,y),E=NJ(g.smart_launchers,y);return{news:h,quickLaunchers:p,smartLaunchers:E,informationalTooltips:g.informational_tooltips,validationTooltips:g.validation_tooltips}}return py({queryKey:["v3-init-content",l,{profileAndTagsHash:o,language:n}],enabled:!!l&&r&&(e?.length??0)>0,queryFn:PJ(i),select:c})}function DD(){const t=xe.useCallback(e=>e.news,[]);return Mv(t)}function kJ(){const t=xe.useCallback(e=>e.smartLaunchers,[]);return Mv(t)}function FJ(){const t=xe.useCallback(e=>e.informationalTooltips,[]);return Mv(t)}function $J(){const t=xe.useCallback(e=>e.validationTooltips,[]);return Mv(t)}function UJ(){const t=xe.useCallback(e=>e.quickLaunchers,[]);return Mv(t)}function PD(t){switch(t.options.event){case"loaded":return"page_load";case"element_clicked":return"click";case"element_appeared":return"element_appears";case"element_disappeared":return"element_disappears";case"element_focused":return"focus";default:throw new Error("Unknown trigger type")}}function MD(t){const e=t.options;return"path"in e?Qi.parse(e.path):e.page_condition?.pattern??""}const kD=()=>{const t=Za(),e=xe.useCallback(async(r,i)=>{const o=await t(`${Ii("API_URL")}/v3/news/${r}?lang=${i}`,{headers:{Accept:"application/json"}});if(o.status!==200)throw new Eu({expected:200,received:o.status});return o.body},[t]),n=xe.useCallback(async r=>{try{const i=await t(`${Ii("API_URL")}/v3/news/${r}/read_at`,{method:"PUT",headers:{Accept:"application/json"}});if(i.status!==204)throw new Eu({expected:204,received:i.status})}catch(i){throw Re.error(i,"An error occurred while trying to update the read_at property of a news"),i}},[t]);return{fetchNews:e,updateReadAt:n}};function BJ(t){return{...t,display:{...t.display,not_before:t.display.not_before!==null?new Date(t.display.not_before):null,not_after:t.display.not_after!==null?new Date(t.display.not_after):null}}}const Jb=()=>{const t=Qu(),{currentLanguage:e,getBestMatchingLanguage:n}=Gi(),{data:r}=DD(),{fetchNews:i}=kD(),o=r==null?null:JSON.stringify(r.map(c=>({id:c.id,published_locales:c.published_locales})));return xe.useCallback(async c=>{const f=o===null?o:JSON.parse(o),g=n(f?.find(h=>h.id===c)?.published_locales??[]);Re.debug("Fetching news content",{id:c}),g!==e&&Re.debug("The news isn't published in the language of the player. Using a fallback language different from current language",{language:g});const y=await t.fetchQuery({queryKey:["news",c,g],staleTime:0,gcTime:0,queryFn:async()=>i(c,g)});return BJ(y)},[e,n,o,t,i])};class Kg extends Error{constructor(e){super(e),this.name="ValidationError"}}function FD(t,e){const n=Yg(t),i=Yg(e).getTime()-n.getTime();return Math.floor(i/(1e3*60*60*24))}function ZJ(t,e){return Math.floor(FD(t,e)/7)}function jJ(t,e){return(e.getFullYear()-t.getFullYear())*12+(e.getMonth()-t.getMonth())}function VJ(t,e=new Date){const n=new Date(e),r=e.getDay(),i=(t-r+7)%7;return n.setDate(n.getDate()+i),n}function zJ(t,e,n,r){const i=new Date(r,n,1);let o=t-i.getDay();o<0&&(o+=7);const l=new Date(r,n,1+(e-1)*7+o);if(l.getMonth()===n)return l;{const c=new Date(r,n+1,0);let f=c.getDate();for(;c.getDay()!==t;)f--,c.setDate(f);return c}}function HJ(t,e,n={includeStartDate:!0,includeEndDate:!0}){const r=Yg(t),i=Yg(e);return n.includeStartDate||r.setDate(r.getDate()+1),n.includeEndDate||i.setDate(i.getDate()-1),GJ(r,i)}function GJ(t,e){const n=[],r=Yg(t),i=Yg(e);for(;r<=i;)n.push(new Date(r)),r.setDate(r.getDate()+1);return n}function Yg(t){const e=new Date(t);return e.setHours(0,0,0,0),e}var $D=(t=>(t[t.SU=0]="SU",t[t.MO=1]="MO",t[t.TU=2]="TU",t[t.WE=3]="WE",t[t.TH=4]="TH",t[t.FR=5]="FR",t[t.SA=6]="SA",t))($D||{});class nS{constructor(e){this.startDate=e}includesToday(){const e=new Date;return this.includesDate(e)}hasRecurrenceAfter(e){const n=new Date;return this.hasRecurrenceBetween(e,n)}hasRecurrenceBetween(e,n){return HJ(e,n,{includeStartDate:!1,includeEndDate:!0}).some(i=>this.includesDate(i))}}class qJ extends nS{constructor(e,n=new Date){super(n),this.interval=e.interval??1}includesDate(e){const n=FD(this.startDate,e);return n>=0&&n%this.interval===0}}class WJ extends nS{constructor(e,n=new Date){super(n),this.interval=e.interval??1,this.byMonthDay=e.byMonthDay,this.byDay=e.byDay}includesDate(e){if(this.byDay!==void 0){const[n]=this.byDay;return this.includesDateByWeekday(e,n,this.byMonthDay)}else return this.includesDateByMonthDay(e,this.byMonthDay)}includesDateByWeekday(e,n,r){return this.isDateOnWeekdayAndWeekNumber(e,n,r)&&this.intervalIsCorrect(e)}intervalIsCorrect(e){const n=jJ(this.startDate,e);return n>=0&&n%this.interval===0}isDateOnWeekdayAndWeekNumber(e,n,r){return zJ(n,r,e.getMonth(),e.getFullYear()).getDate()===e.getDate()}includesDateByMonthDay(e,n){return this.isDateOnMonthDay(e,n)&&this.intervalIsCorrect(e)}isDateOnMonthDay(e,n){return e.getDate()===n}}class KJ extends nS{constructor(e,n=new Date){super(n),this.interval=e.interval??1,this.byDay=e.byDay.sort((r,i)=>r-i)}includesDate(e){return this.byDay.some(n=>this.dateIsOnWeekday(e,n)&&this.intervalIsCorrect(e))}dateIsOnWeekday(e,n){return e.getDay()===n}intervalIsCorrect(e){const n=e.getDay(),r=VJ(n,this.startDate),i=ZJ(r,e);return i>=0&&i%this.interval===0}}class YJ extends Kg{constructor(e,n){super(`Invalid data while creating RRule: "${e}" in string "${n}"`)}}function QJ(t,e=new Date){try{const n=JJ(t);return XJ(n,e)}catch(n){throw n instanceof Kg?new YJ(n.message,t):new Error(`Error while creating RRule: "${n.message}" in string "${t}"`)}}function XJ(t,e){switch(t.frequency){case"DAILY":return new qJ(t,e);case"WEEKLY":return eee(t),new KJ(t,e);case"MONTHLY":return tee(t),new WJ(t,e)}}function JJ(t){const e=t.split(";"),n={};if(e.forEach(r=>{const[i,o]=r.split("=");switch(i){case"FREQ":n.frequency=o;break;case"INTERVAL":n.interval=parseInt(o);break;case"BYDAY":{const l=o.split(",");n.byDay=l.map(c=>$D[c]);break}case"BYMONTHDAY":n.byMonthDay=parseInt(o);break}}),n.frequency===void 0)throw new Error("FREQ parameter missing.");return n}function eee(t){if(t.byDay===void 0)throw new Kg("Invalid Weekly RRule: BYDAY is undefined.");if(t.byDay.length===0)throw new Kg("Invalid Weekly RRule: BYDAY is empty.");return!0}function tee(t){if(t.byMonthDay===void 0)throw new Kg("Invalid Monthly RRule: BYMONTHDAY is undefined.");return!0}function rS(t){return t.recurrence!==null}function iS(t){return nee(t,new Date)}function nee(t,e){try{const{rrule:n,strictModeIsActive:r}=ree(t);return r?iee(t,e,n):oee(t,e,n)}catch(n){return n instanceof Kg?Re.error(`Validation error while creating news recurrence: "${n.message}"`):Re.error(`Error while calculating news recurrence: "${n.message}"`),!1}}function ree(t){if(t.display.not_before===null)throw new Error("News doesn't have startDate.");if(t.recurrence===null)throw new Error("newsShouldRecurToday: news.recurrence is null.");const e=new Date(t.display.not_before);return{rrule:QJ(t.recurrence.rule,e),strictModeIsActive:t.recurrence.exact_day_only}}function iee(t,e,n){return n.includesDate(e)&&!see(t,e)}function oee(t,e,n){return t.read_at!==null?n.hasRecurrenceBetween(new Date(t.read_at),e):n.startDate<=e}function see(t,e){return t.read_at===null?!1:t.read_at.getDate()===e.getDate()&&t.read_at.getMonth()===e.getMonth()&&t.read_at.getFullYear()===e.getFullYear()}function aee(t){return pe.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...t,children:[pe.jsx("path",{fill:"currentColor",d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Z"}),pe.jsx("path",{stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m11.2 5.6-4.773 4.8L4.8 8.764"})]})}const lee=({news:t,onNewsClose:e})=>{const n=vv(),r=Wa(),i=Jb(),{t:o,currentLanguage:l}=Gi();function c(){return rS(t)?iS(t):t.read_at===null}return pe.jsxs("li",{className:`${Wd["news-item"]}${c()?"":` ${Wd["news-read"]}`}`,onClick:()=>{i(t.id).then(f=>{n(f,{onClose:e}),r.manuallyDisplayNews({newsId:t.id,toolId:t.tool_id})}).catch(f=>{Re.error(f,"An error occurred while fetching a single news")})},title:t.title,children:[pe.jsx("div",{className:Wd["news-title"],children:pe.jsx("span",{lang:l,children:t.title})}),c()&&pe.jsx("span",{className:Wd["news-new-indicator"],children:o("new")}),!c()&&pe.jsx(aee,{className:Wd["news-read-icon"]})]})};function uee(t){return pe.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:93,height:98,fill:"none",...t,children:[pe.jsx("circle",{cx:47,cy:51.738,r:45.762,fill:"#FDFBED"}),pe.jsx("path",{stroke:"#245FC6",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.25,d:"M35.249 39.739h21m-21 12h12m-.783 11.478L33.944 75.739V63.217H29.25a6 6 0 0 1-6-6V33.739a6 6 0 0 1 6-6h36a6 6 0 0 1 6 6v23.478a6 6 0 0 1-6 6H46.466Z"}),pe.jsx("circle",{cx:3.228,cy:48.256,r:1.99,fill:"#FDFBED",stroke:"#245FC6",strokeWidth:1.5}),pe.jsx("circle",{cx:89.777,cy:68.153,r:1.99,fill:"#FDFBED",stroke:"#245FC6",strokeWidth:1.5}),pe.jsx("circle",{cx:71.373,cy:89.044,r:3.979,fill:"#FDFBED",stroke:"#245FC6",strokeWidth:1.5}),pe.jsx("circle",{cx:63.912,cy:7.469,r:5.969,fill:"#FDFBED",stroke:"#245FC6",strokeWidth:1.5}),pe.jsx("path",{stroke:"#245FC6",strokeWidth:1.5,d:"m85.798 23.386 5.968 5.969m0-5.969-5.968 5.969M21.632 82.578l5.969 5.968m0-5.969-5.969 5.97M15.663 9.956l5.969 5.969m0-5.97-5.969 5.97"})]})}function cee({newsList:t,onNewsClose:e,search:n}){const{t:r}=Gi(),i=t.filter(o=>o.title.toLowerCase().includes(n.toLowerCase()));return pe.jsxs("div",{className:Wd["news-tab-wrapper"],children:[i.length>0&&pe.jsx("ul",{className:Wd["news-list"],children:i.map(o=>pe.jsx(lee,{onNewsClose:e,news:o},o.id))}),i.length===0&&pe.jsxs("div",{className:Wd["news-empty-list-wrapper"],children:[pe.jsx(uee,{}),pe.jsx("p",{children:r("empty_pushs")})]})]})}function fee(t){return pe.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...t,children:pe.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeOpacity:.6,strokeWidth:1.5,d:"M11.284 11.36 13.6 13.6m-.747-5.973a5.227 5.227 0 1 1-10.453 0 5.227 5.227 0 0 1 10.453 0Z"})})}const eE={"search-bar-wrapper":"_search-bar-wrapper_k49v5_1","search-bar-input":"_search-bar-input_k49v5_5","search-bar-icon":"_search-bar-icon_k49v5_16","search-bar-cross":"_search-bar-cross_k49v5_22"};function dee({value:t,onChange:e}){const{t:n}=Gi();return pe.jsxs("div",{className:eE["search-bar-wrapper"],role:"search",children:[pe.jsx(fee,{className:eE["search-bar-icon"]}),pe.jsx("input",{className:eE["search-bar-input"],type:"text",value:t,title:n("search_guides"),placeholder:`${n("search_guides")}...`,onChange:r=>{e(r.target.value)}}),t!==""&&pe.jsx(OD,{className:eE["search-bar-cross"],size:14,onClick:()=>{e("")}})]})}var oS,UD;function hee(){if(UD)return oS;UD=1;function t(e){return function(n){return e?.[n]}}return oS=t,oS}var sS,BD;function pee(){if(BD)return sS;BD=1;var t=hee(),e={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},n=t(e);return sS=n,sS}var aS,ZD;function gee(){if(ZD)return aS;ZD=1;var t=typeof $a=="object"&&$a&&$a.Object===Object&&$a;return aS=t,aS}var lS,jD;function mee(){if(jD)return lS;jD=1;var t=gee(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return lS=n,lS}var uS,VD;function cS(){if(VD)return uS;VD=1;var t=mee(),e=t.Symbol;return uS=e,uS}var fS,zD;function yee(){if(zD)return fS;zD=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,o=Array(i);++r<i;)o[r]=n(e[r],r,e);return o}return fS=t,fS}var dS,HD;function vee(){if(HD)return dS;HD=1;var t=Array.isArray;return dS=t,dS}var hS,GD;function _ee(){if(GD)return hS;GD=1;var t=cS(),e=Object.prototype,n=e.hasOwnProperty,r=e.toString,i=t?t.toStringTag:void 0;function o(l){var c=n.call(l,i),f=l[i];try{l[i]=void 0;var g=!0}catch{}var y=r.call(l);return g&&(c?l[i]=f:delete l[i]),y}return hS=o,hS}var pS,qD;function bee(){if(qD)return pS;qD=1;var t=Object.prototype,e=t.toString;function n(r){return e.call(r)}return pS=n,pS}var gS,WD;function Eee(){if(WD)return gS;WD=1;var t=cS(),e=_ee(),n=bee(),r="[object Null]",i="[object Undefined]",o=t?t.toStringTag:void 0;function l(c){return c==null?c===void 0?i:r:o&&o in Object(c)?e(c):n(c)}return gS=l,gS}var mS,KD;function wee(){if(KD)return mS;KD=1;function t(e){return e!=null&&typeof e=="object"}return mS=t,mS}var yS,YD;function Tee(){if(YD)return yS;YD=1;var t=Eee(),e=wee(),n="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&t(i)==n}return yS=r,yS}var vS,QD;function See(){if(QD)return vS;QD=1;var t=cS(),e=yee(),n=vee(),r=Tee(),i=t?t.prototype:void 0,o=i?i.toString:void 0;function l(c){if(typeof c=="string")return c;if(n(c))return e(c,l)+"";if(r(c))return o?o.call(c):"";var f=c+"";return f=="0"&&1/c==-1/0?"-0":f}return vS=l,vS}var _S,XD;function Aee(){if(XD)return _S;XD=1;var t=See();function e(n){return n==null?"":t(n)}return _S=e,_S}var bS,JD;function Iee(){if(JD)return bS;JD=1;var t=pee(),e=Aee(),n=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,r="\\u0300-\\u036f",i="\\ufe20-\\ufe2f",o="\\u20d0-\\u20ff",l=r+i+o,c="["+l+"]",f=RegExp(c,"g");function g(y){return y=e(y),y&&y.replace(n,t).replace(f,"")}return bS=g,bS}var Cee=Iee();const eP=Lf(Cee),tP=t=>{const e=eP(t.toLowerCase());return n=>eP(n.toLowerCase()).includes(e)},sc={"section-list":"_section-list_18fh7_16","sections-empty":"_sections-empty_18fh7_30",section:"_section_18fh7_16",title:"_title_18fh7_48",arrow:"_arrow_18fh7_72",active:"_active_18fh7_77",rotate:"_rotate_18fh7_82","guide-list":"_guide-list_18fh7_86",guide:"_guide_18fh7_86","guide-title":"_guide-title_18fh7_112"},nP=xe.createContext({});function Ree(t){const e=xe.useRef(null);return e.current===null&&(e.current=t()),e.current}const ES=typeof window<"u",xee=ES?xe.useLayoutEffect:xe.useEffect,wS=xe.createContext(null);function TS(t,e){t.indexOf(e)===-1&&t.push(e)}function SS(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const qf=(t,e,n)=>n>e?e:n<t?t:n;let AS=()=>{};const Wf={},rP=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function iP(t){return typeof t=="object"&&t!==null}const oP=t=>/^0[^.\s]+$/u.test(t);function IS(t){let e;return()=>(e===void 0&&(e=t()),e)}const Nu=t=>t,Nee=(t,e)=>n=>e(t(n)),kv=(...t)=>t.reduce(Nee),Fv=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class CS{constructor(){this.subscriptions=[]}add(e){return TS(this.subscriptions,e),()=>SS(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let o=0;o<i;o++){const l=this.subscriptions[o];l&&l(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const tf=t=>t*1e3,nf=t=>t/1e3;function sP(t,e){return e?t*(1e3/e):0}const aP=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Oee=1e-7,Lee=12;function Dee(t,e,n,r,i){let o,l,c=0;do l=e+(n-e)/2,o=aP(l,r,i)-t,o>0?n=l:e=l;while(Math.abs(o)>Oee&&++c<Lee);return l}function $v(t,e,n,r){if(t===e&&n===r)return Nu;const i=o=>Dee(o,0,1,t,n);return o=>o===0||o===1?o:aP(i(o),e,r)}const lP=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,uP=t=>e=>1-t(1-e),cP=$v(.33,1.53,.69,.99),RS=uP(cP),fP=lP(RS),dP=t=>(t*=2)<1?.5*RS(t):.5*(2-Math.pow(2,-10*(t-1))),xS=t=>1-Math.sin(Math.acos(t)),hP=uP(xS),pP=lP(xS),Pee=$v(.42,0,1,1),Mee=$v(0,0,.58,1),gP=$v(.42,0,.58,1),kee=t=>Array.isArray(t)&&typeof t[0]!="number",mP=t=>Array.isArray(t)&&typeof t[0]=="number",Fee={linear:Nu,easeIn:Pee,easeInOut:gP,easeOut:Mee,circIn:xS,circInOut:pP,circOut:hP,backIn:RS,backInOut:fP,backOut:cP,anticipate:dP},$ee=t=>typeof t=="string",yP=t=>{if(mP(t)){AS(t.length===4);const[e,n,r,i]=t;return $v(e,n,r,i)}else if($ee(t))return Fee[t];return t},tE=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],vP={value:null};function Uee(t,e){let n=new Set,r=new Set,i=!1,o=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1},f=0;function g(h){l.has(h)&&(y.schedule(h),t()),f++,h(c)}const y={schedule:(h,p=!1,E=!1)=>{const _=E&&i?n:r;return p&&l.add(h),_.has(h)||_.add(h),h},cancel:h=>{r.delete(h),l.delete(h)},process:h=>{if(c=h,i){o=!0;return}i=!0,[n,r]=[r,n],n.forEach(g),e&&vP.value&&vP.value.frameloop[e].push(f),f=0,n.clear(),i=!1,o&&(o=!1,y.process(h))}};return y}const Bee=40;function _P(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,l=tE.reduce((T,S)=>(T[S]=Uee(o,e?S:void 0),T),{}),{setup:c,read:f,resolveKeyframes:g,preUpdate:y,update:h,preRender:p,render:E,postRender:A}=l,_=()=>{const T=Wf.useManualTiming?i.timestamp:performance.now();n=!1,Wf.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(T-i.timestamp,Bee),1)),i.timestamp=T,i.isProcessing=!0,c.process(i),f.process(i),g.process(i),y.process(i),h.process(i),p.process(i),E.process(i),A.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(_))},I=()=>{n=!0,r=!0,i.isProcessing||t(_)};return{schedule:tE.reduce((T,S)=>{const O=l[S];return T[S]=($,V=!1,B=!1)=>(n||I(),O.schedule($,V,B)),T},{}),cancel:T=>{for(let S=0;S<tE.length;S++)l[tE[S]].cancel(T)},state:i,steps:l}}const{schedule:Fo,cancel:Kd,state:sa,steps:NS}=_P(typeof requestAnimationFrame<"u"?requestAnimationFrame:Nu,!0);let nE;function Zee(){nE=void 0}const bl={now:()=>(nE===void 0&&bl.set(sa.isProcessing||Wf.useManualTiming?sa.timestamp:performance.now()),nE),set:t=>{nE=t,queueMicrotask(Zee)}},bP=t=>e=>typeof e=="string"&&e.startsWith(t),OS=bP("--"),jee=bP("var(--"),LS=t=>jee(t)?Vee.test(t.split("/*")[0].trim()):!1,Vee=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Qg={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Uv={...Qg,transform:t=>qf(0,1,t)},rE={...Qg,default:1},Bv=t=>Math.round(t*1e5)/1e5,DS=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function zee(t){return t==null}const Hee=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,PS=(t,e)=>n=>!!(typeof n=="string"&&Hee.test(n)&&n.startsWith(t)||e&&!zee(n)&&Object.prototype.hasOwnProperty.call(n,e)),EP=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,o,l,c]=r.match(DS);return{[t]:parseFloat(i),[e]:parseFloat(o),[n]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},Gee=t=>qf(0,255,t),MS={...Qg,transform:t=>Math.round(Gee(t))},op={test:PS("rgb","red"),parse:EP("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+MS.transform(t)+", "+MS.transform(e)+", "+MS.transform(n)+", "+Bv(Uv.transform(r))+")"};function qee(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const kS={test:PS("#"),parse:qee,transform:op.transform},Zv=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Yd=Zv("deg"),rf=Zv("%"),Xr=Zv("px"),Wee=Zv("vh"),Kee=Zv("vw"),wP={...rf,parse:t=>rf.parse(t)/100,transform:t=>rf.transform(t*100)},Xg={test:PS("hsl","hue"),parse:EP("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+rf.transform(Bv(e))+", "+rf.transform(Bv(n))+", "+Bv(Uv.transform(r))+")"},vs={test:t=>op.test(t)||kS.test(t)||Xg.test(t),parse:t=>op.test(t)?op.parse(t):Xg.test(t)?Xg.parse(t):kS.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?op.transform(t):Xg.transform(t),getAnimatableNone:t=>{const e=vs.parse(t);return e.alpha=0,vs.transform(e)}},Yee=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Qee(t){return isNaN(t)&&typeof t=="string"&&(t.match(DS)?.length||0)+(t.match(Yee)?.length||0)>0}const TP="number",SP="color",Xee="var",Jee="var(",AP="${}",ete=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function jv(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let o=0;const c=e.replace(ete,f=>(vs.test(f)?(r.color.push(o),i.push(SP),n.push(vs.parse(f))):f.startsWith(Jee)?(r.var.push(o),i.push(Xee),n.push(f)):(r.number.push(o),i.push(TP),n.push(parseFloat(f))),++o,AP)).split(AP);return{values:n,split:c,indexes:r,types:i}}function IP(t){return jv(t).values}function CP(t){const{split:e,types:n}=jv(t),r=e.length;return i=>{let o="";for(let l=0;l<r;l++)if(o+=e[l],i[l]!==void 0){const c=n[l];c===TP?o+=Bv(i[l]):c===SP?o+=vs.transform(i[l]):o+=i[l]}return o}}const tte=t=>typeof t=="number"?0:vs.test(t)?vs.getAnimatableNone(t):t;function nte(t){const e=IP(t);return CP(t)(e.map(tte))}const Qd={test:Qee,parse:IP,createTransformer:CP,getAnimatableNone:nte};function FS(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<.16666666666666666?t+(e-t)*6*n:n<.5?e:n<.6666666666666666?t+(e-t)*(.6666666666666666-n)*6:t}function rte({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,o=0,l=0;if(!e)i=o=l=n;else{const c=n<.5?n*(1+e):n+e-n*e,f=2*n-c;i=FS(f,c,t+.3333333333333333),o=FS(f,c,t),l=FS(f,c,t-.3333333333333333)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:r}}function iE(t,e){return n=>n>0?e:t}const jo=(t,e,n)=>t+(e-t)*n,$S=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},ite=[kS,op,Xg],ote=t=>ite.find(e=>e.test(t));function RP(t){const e=ote(t);if(!e)return!1;let n=e.parse(t);return e===Xg&&(n=rte(n)),n}const xP=(t,e)=>{const n=RP(t),r=RP(e);if(!n||!r)return iE(t,e);const i={...n};return o=>(i.red=$S(n.red,r.red,o),i.green=$S(n.green,r.green,o),i.blue=$S(n.blue,r.blue,o),i.alpha=jo(n.alpha,r.alpha,o),op.transform(i))},US=new Set(["none","hidden"]);function ste(t,e){return US.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function ate(t,e){return n=>jo(t,e,n)}function BS(t){return typeof t=="number"?ate:typeof t=="string"?LS(t)?iE:vs.test(t)?xP:cte:Array.isArray(t)?NP:typeof t=="object"?vs.test(t)?xP:lte:iE}function NP(t,e){const n=[...t],r=n.length,i=t.map((o,l)=>BS(o)(o,e[l]));return o=>{for(let l=0;l<r;l++)n[l]=i[l](o);return n}}function lte(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=BS(t[i])(t[i],e[i]));return i=>{for(const o in r)n[o]=r[o](i);return n}}function ute(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],l=t.indexes[o][r[o]],c=t.values[l]??0;n[i]=c,r[o]++}return n}const cte=(t,e)=>{const n=Qd.createTransformer(e),r=jv(t),i=jv(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?US.has(t)&&!i.values.length||US.has(e)&&!r.values.length?ste(t,e):kv(NP(ute(r,i),i.values),n):iE(t,e)};function OP(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?jo(t,e,n):BS(t)(t,e)}const fte=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Fo.update(e,n),stop:()=>Kd(e),now:()=>sa.isProcessing?sa.timestamp:bl.now()}},LP=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let o=0;o<i;o++)r+=Math.round(t(o/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},oE=2e4;function ZS(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<oE;)e+=n,r=t.next(e);return e>=oE?1/0:e}function dte(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(ZS(r),oE);return{type:"keyframes",ease:o=>r.next(i*o).value/e,duration:nf(i)}}const hte=5;function DP(t,e,n){const r=Math.max(e-hte,0);return sP(n-t(r),e-r)}const Yo={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},jS=.001;function pte({duration:t=Yo.duration,bounce:e=Yo.bounce,velocity:n=Yo.velocity,mass:r=Yo.mass}){let i,o,l=1-e;l=qf(Yo.minDamping,Yo.maxDamping,l),t=qf(Yo.minDuration,Yo.maxDuration,nf(t)),l<1?(i=g=>{const y=g*l,h=y*t,p=y-n,E=VS(g,l),A=Math.exp(-h);return jS-p/E*A},o=g=>{const h=g*l*t,p=h*n+n,E=Math.pow(l,2)*Math.pow(g,2)*t,A=Math.exp(-h),_=VS(Math.pow(g,2),l);return(-i(g)+jS>0?-1:1)*((p-E)*A)/_}):(i=g=>{const y=Math.exp(-g*t),h=(g-n)*t+1;return-jS+y*h},o=g=>{const y=Math.exp(-g*t),h=(n-g)*(t*t);return y*h});const c=5/t,f=mte(i,o,c);if(t=tf(t),isNaN(f))return{stiffness:Yo.stiffness,damping:Yo.damping,duration:t};{const g=Math.pow(f,2)*r;return{stiffness:g,damping:l*2*Math.sqrt(r*g),duration:t}}}const gte=12;function mte(t,e,n){let r=n;for(let i=1;i<gte;i++)r=r-t(r)/e(r);return r}function VS(t,e){return t*Math.sqrt(1-e*e)}const yte=["duration","bounce"],vte=["stiffness","damping","mass"];function PP(t,e){return e.some(n=>t[n]!==void 0)}function _te(t){let e={velocity:Yo.velocity,stiffness:Yo.stiffness,damping:Yo.damping,mass:Yo.mass,isResolvedFromDuration:!1,...t};if(!PP(t,vte)&&PP(t,yte))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,o=2*qf(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Yo.mass,stiffness:i,damping:o}}else{const n=pte(t);e={...e,...n,mass:Yo.mass},e.isResolvedFromDuration=!0}return e}function sE(t=Yo.visualDuration,e=Yo.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const o=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],c={done:!1,value:o},{stiffness:f,damping:g,mass:y,duration:h,velocity:p,isResolvedFromDuration:E}=_te({...n,velocity:-nf(n.velocity||0)}),A=p||0,_=g/(2*Math.sqrt(f*y)),I=l-o,C=nf(Math.sqrt(f/y)),v=Math.abs(I)<5;r||(r=v?Yo.restSpeed.granular:Yo.restSpeed.default),i||(i=v?Yo.restDelta.granular:Yo.restDelta.default);let T;if(_<1){const O=VS(C,_);T=$=>{const V=Math.exp(-_*C*$);return l-V*((A+_*C*I)/O*Math.sin(O*$)+I*Math.cos(O*$))}}else if(_===1)T=O=>l-Math.exp(-C*O)*(I+(A+C*I)*O);else{const O=C*Math.sqrt(_*_-1);T=$=>{const V=Math.exp(-_*C*$),B=Math.min(O*$,300);return l-V*((A+_*C*I)*Math.sinh(B)+O*I*Math.cosh(B))/O}}const S={calculatedDuration:E&&h||null,next:O=>{const $=T(O);if(E)c.done=O>=h;else{let V=O===0?A:0;_<1&&(V=O===0?tf(A):DP(T,O,$));const B=Math.abs(V)<=r,ne=Math.abs(l-$)<=i;c.done=B&&ne}return c.value=c.done?l:$,c},toString:()=>{const O=Math.min(ZS(S),oE),$=LP(V=>S.next(O*V).value,O,30);return O+"ms "+$},toTransition:()=>{}};return S}sE.applyToOptions=t=>{const e=dte(t,100,sE);return t.ease=e.ease,t.duration=tf(e.duration),t.type="keyframes",t};function zS({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:l,min:c,max:f,restDelta:g=.5,restSpeed:y}){const h=t[0],p={done:!1,value:h},E=B=>c!==void 0&&B<c||f!==void 0&&B>f,A=B=>c===void 0?f:f===void 0||Math.abs(c-B)<Math.abs(f-B)?c:f;let _=n*e;const I=h+_,C=l===void 0?I:l(I);C!==I&&(_=C-h);const v=B=>-_*Math.exp(-B/r),T=B=>C+v(B),S=B=>{const ne=v(B),D=T(B);p.done=Math.abs(ne)<=g,p.value=p.done?C:D};let O,$;const V=B=>{E(p.value)&&(O=B,$=sE({keyframes:[p.value,A(p.value)],velocity:DP(T,B,p.value),damping:i,stiffness:o,restDelta:g,restSpeed:y}))};return V(0),{calculatedDuration:null,next:B=>{let ne=!1;return!$&&O===void 0&&(ne=!0,S(B),V(B)),O!==void 0&&B>=O?$.next(B-O):(!ne&&S(B),p)}}}function bte(t,e,n){const r=[],i=n||Wf.mix||OP,o=t.length-1;for(let l=0;l<o;l++){let c=i(t[l],t[l+1]);if(e){const f=Array.isArray(e)?e[l]||Nu:e;c=kv(f,c)}r.push(c)}return r}function Ete(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const o=t.length;if(AS(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=bte(e,r,i),f=c.length,g=y=>{if(l&&y<t[0])return e[0];let h=0;if(f>1)for(;h<t.length-2&&!(y<t[h+1]);h++);const p=Fv(t[h],t[h+1],y);return c[h](p)};return n?y=>g(qf(t[0],t[o-1],y)):g}function wte(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Fv(0,e,r);t.push(jo(n,1,i))}}function Tte(t){const e=[0];return wte(e,t.length-1),e}function Ste(t,e){return t.map(n=>n*e)}function Ate(t,e){return t.map(()=>e||gP).splice(0,t.length-1)}function Vv({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=kee(r)?r.map(yP):yP(r),o={done:!1,value:e[0]},l=Ste(n&&n.length===e.length?n:Tte(e),t),c=Ete(l,e,{ease:Array.isArray(i)?i:Ate(e,i)});return{calculatedDuration:t,next:f=>(o.value=c(f),o.done=f>=t,o)}}const Ite=t=>t!==null;function HS(t,{repeat:e,repeatType:n="loop"},r,i=1){const o=t.filter(Ite),c=i<0||e&&n!=="loop"&&e%2===1?0:o.length-1;return!c||r===void 0?o[c]:r}const Cte={decay:zS,inertia:zS,tween:Vv,keyframes:Vv,spring:sE};function MP(t){typeof t.type=="string"&&(t.type=Cte[t.type])}class GS{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const Rte=t=>t/100;class qS extends GS{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==bl.now()&&this.tick(bl.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;MP(e);const{type:n=Vv,repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:l=0}=e;let{keyframes:c}=e;const f=n||Vv;f!==Vv&&typeof c[0]!="number"&&(this.mixKeyframes=kv(Rte,OP(c[0],c[1])),c=[0,100]);const g=f({...e,keyframes:c});o==="mirror"&&(this.mirroredGenerator=f({...e,keyframes:[...c].reverse(),velocity:-l})),g.calculatedDuration===null&&(g.calculatedDuration=ZS(g));const{calculatedDuration:y}=g;this.calculatedDuration=y,this.resolvedDuration=y+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=g}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:o,mirroredGenerator:l,resolvedDuration:c,calculatedDuration:f}=this;if(this.startTime===null)return r.next(0);const{delay:g=0,keyframes:y,repeat:h,repeatType:p,repeatDelay:E,type:A,onUpdate:_,finalKeyframe:I}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const C=this.currentTime-g*(this.playbackSpeed>=0?1:-1),v=this.playbackSpeed>=0?C<0:C>i;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let T=this.currentTime,S=r;if(h){const B=Math.min(this.currentTime,i)/c;let ne=Math.floor(B),D=B%1;!D&&B>=1&&(D=1),D===1&&ne--,ne=Math.min(ne,h+1),!!(ne%2)&&(p==="reverse"?(D=1-D,E&&(D-=E/c)):p==="mirror"&&(S=l)),T=qf(0,1,D)*c}const O=v?{done:!1,value:y[0]}:S.next(T);o&&(O.value=o(O.value));let{done:$}=O;!v&&f!==null&&($=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const V=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&$);return V&&A!==zS&&(O.value=HS(y,this.options,I,this.speed)),_&&_(O.value),V&&this.finish(),O}then(e,n){return this.finished.then(e,n)}get duration(){return nf(this.calculatedDuration)}get time(){return nf(this.currentTime)}set time(e){e=tf(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(bl.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=nf(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=fte,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(bl.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function xte(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const sp=t=>t*180/Math.PI,WS=t=>{const e=sp(Math.atan2(t[1],t[0]));return KS(e)},Nte={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:WS,rotateZ:WS,skewX:t=>sp(Math.atan(t[1])),skewY:t=>sp(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},KS=t=>(t=t%360,t<0&&(t+=360),t),kP=WS,FP=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),$P=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Ote={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:FP,scaleY:$P,scale:t=>(FP(t)+$P(t))/2,rotateX:t=>KS(sp(Math.atan2(t[6],t[5]))),rotateY:t=>KS(sp(Math.atan2(-t[2],t[0]))),rotateZ:kP,rotate:kP,skewX:t=>sp(Math.atan(t[4])),skewY:t=>sp(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function YS(t){return t.includes("scale")?1:0}function QS(t,e){if(!t||t==="none")return YS(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=Ote,i=n;else{const c=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Nte,i=c}if(!i)return YS(e);const o=r[e],l=i[1].split(",").map(Dte);return typeof o=="function"?o(l):l[o]}const Lte=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return QS(n,e)};function Dte(t){return parseFloat(t.trim())}const Jg=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],em=new Set(Jg),UP=t=>t===Qg||t===Xr,Pte=new Set(["x","y","z"]),Mte=Jg.filter(t=>!Pte.has(t));function kte(t){const e=[];return Mte.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const ap={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>QS(e,"x"),y:(t,{transform:e})=>QS(e,"y")};ap.translateX=ap.x,ap.translateY=ap.y;const lp=new Set;let XS=!1,JS=!1,eA=!1;function BP(){if(JS){const t=Array.from(lp).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=kte(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([o,l])=>{r.getValue(o)?.set(l)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}JS=!1,XS=!1,lp.forEach(t=>t.complete(eA)),lp.clear()}function ZP(){lp.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(JS=!0)})}function Fte(){eA=!0,ZP(),BP(),eA=!1}class tA{constructor(e,n,r,i,o,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=o,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(lp.add(this),XS||(XS=!0,Fo.read(ZP),Fo.resolveKeyframes(BP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const o=i?.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const c=r.readValue(n,l);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=l),i&&o===void 0&&i.set(e[0])}xte(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),lp.delete(this)}cancel(){this.state==="scheduled"&&(lp.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const $te=t=>t.startsWith("--");function Ute(t,e,n){$te(e)?t.style.setProperty(e,n):t.style[e]=n}const Bte=IS(()=>window.ScrollTimeline!==void 0),Zte={};function jte(t,e){const n=IS(t);return()=>Zte[e]??n()}const jP=jte(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),zv=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,VP={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:zv([0,.65,.55,1]),circOut:zv([.55,0,1,.45]),backIn:zv([.31,.01,.66,-.59]),backOut:zv([.33,1.53,.69,.99])};function zP(t,e){if(t)return typeof t=="function"?jP()?LP(t,e):"ease-out":mP(t)?zv(t):Array.isArray(t)?t.map(n=>zP(n,e)||VP.easeOut):VP[t]}function Vte(t,e,n,{delay:r=0,duration:i=300,repeat:o=0,repeatType:l="loop",ease:c="easeOut",times:f}={},g=void 0){const y={[e]:n};f&&(y.offset=f);const h=zP(c,i);Array.isArray(h)&&(y.easing=h);const p={delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"};return g&&(p.pseudoElement=g),t.animate(y,p)}function HP(t){return typeof t=="function"&&"applyToOptions"in t}function zte({type:t,...e}){return HP(t)&&jP()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class Hte extends GS{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:o,allowFlatten:l=!1,finalKeyframe:c,onComplete:f}=e;this.isPseudoElement=!!o,this.allowFlatten=l,this.options=e,AS(typeof e.type!="string");const g=zte(e);this.animation=Vte(n,r,i,g,o),g.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const y=HS(i,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(y):Ute(n,r,y),this.animation.cancel()}f?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return nf(Number(e))}get time(){return nf(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=tf(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&Bte()?(this.animation.timeline=e,Nu):n(this)}}const GP={anticipate:dP,backInOut:fP,circInOut:pP};function Gte(t){return t in GP}function qte(t){typeof t.ease=="string"&&Gte(t.ease)&&(t.ease=GP[t.ease])}const qP=10;class Wte extends Hte{constructor(e){qte(e),MP(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:o,...l}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const c=new qS({...l,autoplay:!1}),f=tf(this.finishedTime??this.time);n.setWithVelocity(c.sample(f-qP).value,c.sample(f).value,qP),c.stop()}}const WP=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Qd.test(t)||t==="0")&&!t.startsWith("url("));function Kte(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function Yte(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],l=WP(i,e),c=WP(o,e);return!l||!c?!1:Kte(t)||(n==="spring"||HP(n))&&r}function KP(t){return iP(t)&&"offsetHeight"in t}const Qte=new Set(["opacity","clipPath","filter","transform"]),Xte=IS(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Jte(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:o,type:l}=t;if(!KP(e?.owner?.current))return!1;const{onUpdate:c,transformTemplate:f}=e.owner.getProps();return Xte()&&n&&Qte.has(n)&&(n!=="transform"||!f)&&!c&&!r&&i!=="mirror"&&o!==0&&l!=="inertia"}const ene=40;class tne extends GS{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:l="loop",keyframes:c,name:f,motionValue:g,element:y,...h}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=bl.now();const p={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:o,repeatType:l,name:f,motionValue:g,element:y,...h},E=y?.KeyframeResolver||tA;this.keyframeResolver=new E(c,(A,_,I)=>this.onKeyframesResolved(A,_,p,!I),f,g,y),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:o,type:l,velocity:c,delay:f,isHandoff:g,onUpdate:y}=r;this.resolvedAt=bl.now(),Yte(e,o,l,c)||((Wf.instantAnimations||!f)&&y?.(HS(e,r,n)),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const p={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>ene?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},E=!g&&Jte(p)?new Wte({...p,element:p.motionValue.owner.current}):new qS(p);E.finished.then(()=>this.notifyFinished()).catch(Nu),this.pendingTimeline&&(this.stopTimeline=E.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=E}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),Fte()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const nne=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function rne(t){const e=nne.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function YP(t,e,n=1){const[r,i]=rne(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const l=o.trim();return rP(l)?parseFloat(l):l}return LS(i)?YP(i,e,n+1):i}function nA(t,e){return t?.[e]??t?.default??t}const QP=new Set(["width","height","top","left","right","bottom",...Jg]),ine={test:t=>t==="auto",parse:t=>t},XP=t=>e=>e.test(t),JP=[Qg,Xr,rf,Yd,Kee,Wee,ine],eM=t=>JP.find(XP(t));function one(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||oP(t):!0}const sne=new Set(["brightness","contrast","saturate","opacity"]);function ane(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(DS)||[];if(!r)return t;const i=n.replace(r,"");let o=sne.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+i+")"}const lne=/\b([a-z-]*)\(.*?\)/gu,rA={...Qd,getAnimatableNone:t=>{const e=t.match(lne);return e?e.map(ane).join(" "):t}},tM={...Qg,transform:Math.round},iA={borderWidth:Xr,borderTopWidth:Xr,borderRightWidth:Xr,borderBottomWidth:Xr,borderLeftWidth:Xr,borderRadius:Xr,radius:Xr,borderTopLeftRadius:Xr,borderTopRightRadius:Xr,borderBottomRightRadius:Xr,borderBottomLeftRadius:Xr,width:Xr,maxWidth:Xr,height:Xr,maxHeight:Xr,top:Xr,right:Xr,bottom:Xr,left:Xr,padding:Xr,paddingTop:Xr,paddingRight:Xr,paddingBottom:Xr,paddingLeft:Xr,margin:Xr,marginTop:Xr,marginRight:Xr,marginBottom:Xr,marginLeft:Xr,backgroundPositionX:Xr,backgroundPositionY:Xr,...{rotate:Yd,rotateX:Yd,rotateY:Yd,rotateZ:Yd,scale:rE,scaleX:rE,scaleY:rE,scaleZ:rE,skew:Yd,skewX:Yd,skewY:Yd,distance:Xr,translateX:Xr,translateY:Xr,translateZ:Xr,x:Xr,y:Xr,z:Xr,perspective:Xr,transformPerspective:Xr,opacity:Uv,originX:wP,originY:wP,originZ:Xr},zIndex:tM,fillOpacity:Uv,strokeOpacity:Uv,numOctaves:tM},une={...iA,color:vs,backgroundColor:vs,outlineColor:vs,fill:vs,stroke:vs,borderColor:vs,borderTopColor:vs,borderRightColor:vs,borderBottomColor:vs,borderLeftColor:vs,filter:rA,WebkitFilter:rA},nM=t=>une[t];function rM(t,e){let n=nM(t);return n!==rA&&(n=Qd),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const cne=new Set(["auto","none","0"]);function fne(t,e,n){let r=0,i;for(;r<t.length&&!i;){const o=t[r];typeof o=="string"&&!cne.has(o)&&jv(o).values.length&&(i=t[r]),r++}if(i&&n)for(const o of e)t[o]=rM(n,i)}class dne extends tA{constructor(e,n,r,i,o){super(e,n,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let g=e[f];if(typeof g=="string"&&(g=g.trim(),LS(g))){const y=YP(g,n.current);y!==void 0&&(e[f]=y),f===e.length-1&&(this.finalKeyframe=g)}}if(this.resolveNoneKeyframes(),!QP.has(r)||e.length!==2)return;const[i,o]=e,l=eM(i),c=eM(o);if(l!==c)if(UP(l)&&UP(c))for(let f=0;f<e.length;f++){const g=e[f];typeof g=="string"&&(e[f]=parseFloat(g))}else ap[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||one(e[i]))&&r.push(i);r.length&&fne(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ap[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const o=r.length-1,l=r[o];r[o]=ap[n](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,f])=>{e.getValue(c).set(f)}),this.resolveNoneKeyframes()}}function hne(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=n?.[t]??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const iM=(t,e)=>e&&typeof t=="number"?e.transform(t):t,oM=30,pne=t=>!isNaN(parseFloat(t));class gne{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const o=bl.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty();i&&this.events.renderRequest?.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=bl.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=pne(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new CS);const r=this.events[e].add(n);return e==="change"?()=>{r(),Fo.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=bl.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>oM)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,oM);return sP(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function tm(t,e){return new gne(t,e)}const{schedule:oA}=_P(queueMicrotask,!1),ac={x:!1,y:!1};function sM(){return ac.x||ac.y}function mne(t){return t==="x"||t==="y"?ac[t]?null:(ac[t]=!0,()=>{ac[t]=!1}):ac.x||ac.y?null:(ac.x=ac.y=!0,()=>{ac.x=ac.y=!1})}function aM(t,e){const n=hne(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function lM(t){return!(t.pointerType==="touch"||sM())}function yne(t,e,n={}){const[r,i,o]=aM(t,n),l=c=>{if(!lM(c))return;const{target:f}=c,g=e(f,c);if(typeof g!="function"||!f)return;const y=h=>{lM(h)&&(g(h),f.removeEventListener("pointerleave",y))};f.addEventListener("pointerleave",y,i)};return r.forEach(c=>{c.addEventListener("pointerenter",l,i)}),o}const uM=(t,e)=>e?t===e?!0:uM(t,e.parentElement):!1,sA=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,vne=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function _ne(t){return vne.has(t.tagName)||t.tabIndex!==-1}const aE=new WeakSet;function cM(t){return e=>{e.key==="Enter"&&t(e)}}function aA(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const bne=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=cM(()=>{if(aE.has(n))return;aA(n,"down");const i=cM(()=>{aA(n,"up")}),o=()=>aA(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function fM(t){return sA(t)&&!sM()}function Ene(t,e,n={}){const[r,i,o]=aM(t,n),l=c=>{const f=c.currentTarget;if(!fM(c))return;aE.add(f);const g=e(f,c),y=(E,A)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",p),aE.has(f)&&aE.delete(f),fM(E)&&typeof g=="function"&&g(E,{success:A})},h=E=>{y(E,f===window||f===document||n.useGlobalTarget||uM(f,E.target))},p=E=>{y(E,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",p,i)};return r.forEach(c=>{(n.useGlobalTarget?window:c).addEventListener("pointerdown",l,i),KP(c)&&(c.addEventListener("focus",g=>bne(g,i)),!_ne(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),o}function dM(t){return iP(t)&&"ownerSVGElement"in t}function wne(t){return dM(t)&&t.tagName==="svg"}const Sa=t=>!!(t&&t.getVelocity),Tne=[...JP,vs,Qd],Sne=t=>Tne.find(XP(t)),hM=xe.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Ane(t=!0){const e=xe.useContext(wS);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,o=xe.useId();xe.useEffect(()=>{if(t)return i(o)},[t]);const l=xe.useCallback(()=>t&&r&&r(o),[o,r,t]);return!n&&r?[!1,l]:[!0]}const pM=xe.createContext({strict:!1}),gM={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},nm={};for(const t in gM)nm[t]={isEnabled:e=>gM[t].some(n=>!!e[n])};function Ine(t){for(const e in t)nm[e]={...nm[e],...t[e]}}const Cne=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function lE(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Cne.has(t)}let mM=t=>!lE(t);function Rne(t){typeof t=="function"&&(mM=e=>e.startsWith("on")?!lE(e):t(e))}try{Rne(require("@emotion/is-prop-valid").default)}catch{}function xne(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(mM(i)||n===!0&&lE(i)||!e&&!lE(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function Nne(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const uE=xe.createContext({});function cE(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Hv(t){return typeof t=="string"||Array.isArray(t)}const lA=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],uA=["initial",...lA];function fE(t){return cE(t.animate)||uA.some(e=>Hv(t[e]))}function yM(t){return!!(fE(t)||t.variants)}function One(t,e){if(fE(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Hv(n)?n:void 0,animate:Hv(r)?r:void 0}}return t.inherit!==!1?e:{}}function Lne(t){const{initial:e,animate:n}=One(t,xe.useContext(uE));return xe.useMemo(()=>({initial:e,animate:n}),[vM(e),vM(n)])}function vM(t){return Array.isArray(t)?t.join(" "):t}const Dne=Symbol.for("motionComponentSymbol");function rm(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Pne(t,e,n){return xe.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):rm(n)&&(n.current=r))},[e])}const cA=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),_M="data-"+cA("framerAppearId"),bM=xe.createContext({});function Mne(t,e,n,r,i){const{visualElement:o}=xe.useContext(uE),l=xe.useContext(pM),c=xe.useContext(wS),f=xe.useContext(hM).reducedMotion,g=xe.useRef(null);r=r||l.renderer,!g.current&&r&&(g.current=r(t,{visualState:e,parent:o,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:f}));const y=g.current,h=xe.useContext(bM);y&&!y.projection&&i&&(y.type==="html"||y.type==="svg")&&kne(g.current,n,i,h);const p=xe.useRef(!1);xe.useInsertionEffect(()=>{y&&p.current&&y.update(n,c)});const E=n[_M],A=xe.useRef(!!E&&!window.MotionHandoffIsComplete?.(E)&&window.MotionHasOptimisedAnimation?.(E));return xee(()=>{y&&(p.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),oA.render(y.render),A.current&&y.animationState&&y.animationState.animateChanges())}),xe.useEffect(()=>{y&&(!A.current&&y.animationState&&y.animationState.animateChanges(),A.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(E)}),A.current=!1))}),y}function kne(t,e,n,r){const{layoutId:i,layout:o,drag:l,dragConstraints:c,layoutScroll:f,layoutRoot:g,layoutCrossfade:y}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:EM(t.parent)),t.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!l||c&&rm(c),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:y,layoutScroll:f,layoutRoot:g})}function EM(t){if(t)return t.options.allowProjection!==!1?t.projection:EM(t.parent)}function Fne({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&Ine(t);function o(c,f){let g;const y={...xe.useContext(hM),...c,layoutId:$ne(c)},{isStatic:h}=y,p=Lne(c),E=r(c,h);if(!h&&ES){Une();const A=Bne(y);g=A.MeasureLayout,p.visualElement=Mne(i,E,y,e,A.ProjectionNode)}return pe.jsxs(uE.Provider,{value:p,children:[g&&p.visualElement?pe.jsx(g,{visualElement:p.visualElement,...y}):null,n(i,c,Pne(E,p.visualElement,f),E,h,p.visualElement)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const l=xe.forwardRef(o);return l[Dne]=i,l}function $ne({layoutId:t}){const e=xe.useContext(nP).id;return e&&t!==void 0?e+"-"+t:t}function Une(t,e){xe.useContext(pM).strict}function Bne(t){const{drag:e,layout:n}=nm;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Gv={};function Zne(t){for(const e in t)Gv[e]=t[e],OS(e)&&(Gv[e].isCSSVariable=!0)}function wM(t,{layout:e,layoutId:n}){return em.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Gv[t]||t==="opacity")}const jne={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Vne=Jg.length;function zne(t,e,n){let r="",i=!0;for(let o=0;o<Vne;o++){const l=Jg[o],c=t[l];if(c===void 0)continue;let f=!0;if(typeof c=="number"?f=c===(l.startsWith("scale")?1:0):f=parseFloat(c)===0,!f||n){const g=iM(c,iA[l]);if(!f){i=!1;const y=jne[l]||l;r+=`${y}(${g}) `}n&&(e[l]=g)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function fA(t,e,n){const{style:r,vars:i,transformOrigin:o}=t;let l=!1,c=!1;for(const f in e){const g=e[f];if(em.has(f)){l=!0;continue}else if(OS(f)){i[f]=g;continue}else{const y=iM(g,iA[f]);f.startsWith("origin")?(c=!0,o[f]=y):r[f]=y}}if(e.transform||(l||n?r.transform=zne(e,t.transform,n):r.transform&&(r.transform="none")),c){const{originX:f="50%",originY:g="50%",originZ:y=0}=o;r.transformOrigin=`${f} ${g} ${y}`}}const dA=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function TM(t,e,n){for(const r in e)!Sa(e[r])&&!wM(r,n)&&(t[r]=e[r])}function Hne({transformTemplate:t},e){return xe.useMemo(()=>{const n=dA();return fA(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Gne(t,e){const n=t.style||{},r={};return TM(r,n,t),Object.assign(r,Hne(t,e)),r}function qne(t,e){const n={},r=Gne(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const Wne={offset:"stroke-dashoffset",array:"stroke-dasharray"},Kne={offset:"strokeDashoffset",array:"strokeDasharray"};function Yne(t,e,n=1,r=0,i=!0){t.pathLength=1;const o=i?Wne:Kne;t[o.offset]=Xr.transform(-r);const l=Xr.transform(e),c=Xr.transform(n);t[o.array]=`${l} ${c}`}function SM(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:o=1,pathOffset:l=0,...c},f,g,y){if(fA(t,c,g),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:p}=t;h.transform&&(p.transform=h.transform,delete h.transform),(p.transform||h.transformOrigin)&&(p.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),p.transform&&(p.transformBox=y?.transformBox??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),i!==void 0&&Yne(h,i,o,l,!1)}const AM=()=>({...dA(),attrs:{}}),IM=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Qne(t,e,n,r){const i=xe.useMemo(()=>{const o=AM();return SM(o,e,IM(r),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};TM(o,t.style,t),i.style={...o,...i.style}}return i}const Xne=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function hA(t){return typeof t!="string"||t.includes("-")?!1:!!(Xne.indexOf(t)>-1||/[A-Z]/u.test(t))}function Jne(t=!1){return(n,r,i,{latestValues:o},l)=>{const f=(hA(n)?Qne:qne)(r,o,l,n),g=xne(r,typeof n=="string",t),y=n!==xe.Fragment?{...g,...f,ref:i}:{},{children:h}=r,p=xe.useMemo(()=>Sa(h)?h.get():h,[h]);return xe.createElement(n,{...y,children:p})}}function CM(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function pA(t,e,n,r){if(typeof e=="function"){const[i,o]=CM(r);e=e(n!==void 0?n:t.custom,i,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,o]=CM(r);e=e(n!==void 0?n:t.custom,i,o)}return e}function dE(t){return Sa(t)?t.get():t}function ere({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:tre(n,r,i,t),renderState:e()}}const RM=t=>(e,n)=>{const r=xe.useContext(uE),i=xe.useContext(wS),o=()=>ere(t,e,r,i);return n?o():Ree(o)};function tre(t,e,n,r){const i={},o=r(t,{});for(const p in o)i[p]=dE(o[p]);let{initial:l,animate:c}=t;const f=fE(t),g=yM(t);e&&g&&!f&&t.inherit!==!1&&(l===void 0&&(l=e.initial),c===void 0&&(c=e.animate));let y=n?n.initial===!1:!1;y=y||l===!1;const h=y?c:l;if(h&&typeof h!="boolean"&&!cE(h)){const p=Array.isArray(h)?h:[h];for(let E=0;E<p.length;E++){const A=pA(t,p[E]);if(A){const{transitionEnd:_,transition:I,...C}=A;for(const v in C){let T=C[v];if(Array.isArray(T)){const S=y?T.length-1:0;T=T[S]}T!==null&&(i[v]=T)}for(const v in _)i[v]=_[v]}}}return i}function gA(t,e,n){const{style:r}=t,i={};for(const o in r)(Sa(r[o])||e.style&&Sa(e.style[o])||wM(o,t)||n?.getValue(o)?.liveStyle!==void 0)&&(i[o]=r[o]);return i}const nre={useVisualState:RM({scrapeMotionValuesFromProps:gA,createRenderState:dA})};function xM(t,e,n){const r=gA(t,e,n);for(const i in t)if(Sa(t[i])||Sa(e[i])){const o=Jg.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=t[i]}return r}const rre={useVisualState:RM({scrapeMotionValuesFromProps:xM,createRenderState:AM})};function ire(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const l={...hA(r)?rre:nre,preloadedFeatures:t,useRender:Jne(i),createVisualElement:e,Component:r};return Fne(l)}}function qv(t,e,n){const r=t.getProps();return pA(r,e,n!==void 0?n:r.custom,t)}const mA=t=>Array.isArray(t);function ore(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,tm(n))}function sre(t){return mA(t)?t[t.length-1]||0:t}function are(t,e){const n=qv(t,e);let{transitionEnd:r={},transition:i={},...o}=n||{};o={...o,...r};for(const l in o){const c=sre(o[l]);ore(t,l,c)}}function lre(t){return!!(Sa(t)&&t.add)}function yA(t,e){const n=t.getValue("willChange");if(lre(n))return n.add(e);if(!n&&Wf.WillChange){const r=new Wf.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function NM(t){return t.props[_M]}const ure=t=>t!==null;function cre(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(ure),o=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[o]}const fre={type:"spring",stiffness:500,damping:25,restSpeed:10},dre=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),hre={type:"keyframes",duration:.8},pre={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},gre=(t,{keyframes:e})=>e.length>2?hre:em.has(t)?t.startsWith("scale")?dre(e[1]):fre:pre;function mre({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:l,repeatDelay:c,from:f,elapsed:g,...y}){return!!Object.keys(y).length}const vA=(t,e,n,r={},i,o)=>l=>{const c=nA(r,t)||{},f=c.delay||r.delay||0;let{elapsed:g=0}=r;g=g-tf(f);const y={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-g,onUpdate:p=>{e.set(p),c.onUpdate&&c.onUpdate(p)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:o?void 0:i};mre(c)||Object.assign(y,gre(t,y)),y.duration&&(y.duration=tf(y.duration)),y.repeatDelay&&(y.repeatDelay=tf(y.repeatDelay)),y.from!==void 0&&(y.keyframes[0]=y.from);let h=!1;if((y.type===!1||y.duration===0&&!y.repeatDelay)&&(y.duration=0,y.delay===0&&(h=!0)),(Wf.instantAnimations||Wf.skipAnimations)&&(h=!0,y.duration=0,y.delay=0),y.allowFlatten=!c.type&&!c.ease,h&&!o&&e.get()!==void 0){const p=cre(y.keyframes,c);if(p!==void 0){Fo.update(()=>{y.onUpdate(p),y.onComplete()});return}}return c.isSync?new qS(y):new tne(y)};function yre({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function OM(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:l,...c}=e;r&&(o=r);const f=[],g=i&&t.animationState&&t.animationState.getState()[i];for(const y in c){const h=t.getValue(y,t.latestValues[y]??null),p=c[y];if(p===void 0||g&&yre(g,y))continue;const E={delay:n,...nA(o||{},y)},A=h.get();if(A!==void 0&&!h.isAnimating&&!Array.isArray(p)&&p===A&&!E.velocity)continue;let _=!1;if(window.MotionHandoffAnimation){const C=NM(t);if(C){const v=window.MotionHandoffAnimation(C,y,Fo);v!==null&&(E.startTime=v,_=!0)}}yA(t,y),h.start(vA(y,h,p,t.shouldReduceMotion&&QP.has(y)?{type:!1}:E,t,_));const I=h.animation;I&&f.push(I)}return l&&Promise.all(f).then(()=>{Fo.update(()=>{l&&are(t,l)})}),f}function _A(t,e,n={}){const r=qv(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const o=r?()=>Promise.all(OM(t,r,n)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:g=0,staggerChildren:y,staggerDirection:h}=i;return vre(t,e,f,g,y,h,n)}:()=>Promise.resolve(),{when:c}=i;if(c){const[f,g]=c==="beforeChildren"?[o,l]:[l,o];return f().then(()=>g())}else return Promise.all([o(),l(n.delay)])}function vre(t,e,n=0,r=0,i=0,o=1,l){const c=[],f=t.variantChildren.size,g=(f-1)*i,y=typeof r=="function",h=y?p=>r(p,f):o===1?(p=0)=>p*i:(p=0)=>g-p*i;return Array.from(t.variantChildren).sort(_re).forEach((p,E)=>{p.notify("AnimationStart",e),c.push(_A(p,e,{...l,delay:n+(y?0:r)+h(E)}).then(()=>p.notify("AnimationComplete",e)))}),Promise.all(c)}function _re(t,e){return t.sortNodePosition(e)}function bre(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>_A(t,o,n));r=Promise.all(i)}else if(typeof e=="string")r=_A(t,e,n);else{const i=typeof e=="function"?qv(t,e,n.custom):e;r=Promise.all(OM(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function LM(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const Ere=uA.length;function DM(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?DM(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Ere;n++){const r=uA[n],i=t.props[r];(Hv(i)||i===!1)&&(e[r]=i)}return e}const wre=[...lA].reverse(),Tre=lA.length;function Sre(t){return e=>Promise.all(e.map(({animation:n,options:r})=>bre(t,n,r)))}function Are(t){let e=Sre(t),n=PM(),r=!0;const i=f=>(g,y)=>{const h=qv(t,y,f==="exit"?t.presenceContext?.custom:void 0);if(h){const{transition:p,transitionEnd:E,...A}=h;g={...g,...A,...E}}return g};function o(f){e=f(t)}function l(f){const{props:g}=t,y=DM(t.parent)||{},h=[],p=new Set;let E={},A=1/0;for(let I=0;I<Tre;I++){const C=wre[I],v=n[C],T=g[C]!==void 0?g[C]:y[C],S=Hv(T),O=C===f?v.isActive:null;O===!1&&(A=I);let $=T===y[C]&&T!==g[C]&&S;if($&&r&&t.manuallyAnimateOnMount&&($=!1),v.protectedKeys={...E},!v.isActive&&O===null||!T&&!v.prevProp||cE(T)||typeof T=="boolean")continue;const V=Ire(v.prevProp,T);let B=V||C===f&&v.isActive&&!$&&S||I>A&&S,ne=!1;const D=Array.isArray(T)?T:[T];let X=D.reduce(i(C),{});O===!1&&(X={});const{prevResolvedValues:ve={}}=v,ie={...ve,...X},ye=oe=>{B=!0,p.has(oe)&&(ne=!0,p.delete(oe)),v.needsAnimating[oe]=!0;const Ce=t.getValue(oe);Ce&&(Ce.liveStyle=!1)};for(const oe in ie){const Ce=X[oe],Ye=ve[oe];if(E.hasOwnProperty(oe))continue;let et=!1;mA(Ce)&&mA(Ye)?et=!LM(Ce,Ye):et=Ce!==Ye,et?Ce!=null?ye(oe):p.add(oe):Ce!==void 0&&p.has(oe)?ye(oe):v.protectedKeys[oe]=!0}v.prevProp=T,v.prevResolvedValues=X,v.isActive&&(E={...E,...X}),r&&t.blockInitialAnimation&&(B=!1),B&&(!($&&V)||ne)&&h.push(...D.map(oe=>({animation:oe,options:{type:C}})))}if(p.size){const I={};if(typeof g.initial!="boolean"){const C=qv(t,Array.isArray(g.initial)?g.initial[0]:g.initial);C&&C.transition&&(I.transition=C.transition)}p.forEach(C=>{const v=t.getBaseTarget(C),T=t.getValue(C);T&&(T.liveStyle=!0),I[C]=v??null}),h.push({animation:I})}let _=!!h.length;return r&&(g.initial===!1||g.initial===g.animate)&&!t.manuallyAnimateOnMount&&(_=!1),r=!1,_?e(h):Promise.resolve()}function c(f,g){if(n[f].isActive===g)return Promise.resolve();t.variantChildren?.forEach(h=>h.animationState?.setActive(f,g)),n[f].isActive=g;const y=l(f);for(const h in n)n[h].protectedKeys={};return y}return{animateChanges:l,setActive:c,setAnimateFunction:o,getState:()=>n,reset:()=>{n=PM(),r=!0}}}function Ire(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!LM(e,t):!1}function up(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function PM(){return{animate:up(!0),whileInView:up(),whileHover:up(),whileTap:up(),whileDrag:up(),whileFocus:up(),exit:up()}}class Xd{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Cre extends Xd{constructor(e){super(e),e.animationState||(e.animationState=Are(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();cE(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Rre=0;class xre extends Xd{constructor(){super(...arguments),this.id=Rre++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Nre={animation:{Feature:Cre},exit:{Feature:xre}};function Wv(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Kv(t){return{point:{x:t.pageX,y:t.pageY}}}const Ore=t=>e=>sA(e)&&t(e,Kv(e));function Yv(t,e,n,r){return Wv(t,e,Ore(n),r)}function MM({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Lre({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Dre(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const kM=1e-4,Pre=1-kM,Mre=1+kM,FM=.01,kre=0-FM,Fre=0+FM;function Xa(t){return t.max-t.min}function $re(t,e,n){return Math.abs(t-e)<=n}function $M(t,e,n,r=.5){t.origin=r,t.originPoint=jo(e.min,e.max,t.origin),t.scale=Xa(n)/Xa(e),t.translate=jo(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Pre&&t.scale<=Mre||isNaN(t.scale))&&(t.scale=1),(t.translate>=kre&&t.translate<=Fre||isNaN(t.translate))&&(t.translate=0)}function Qv(t,e,n,r){$M(t.x,e.x,n.x,r?r.originX:void 0),$M(t.y,e.y,n.y,r?r.originY:void 0)}function UM(t,e,n){t.min=n.min+e.min,t.max=t.min+Xa(e)}function Ure(t,e,n){UM(t.x,e.x,n.x),UM(t.y,e.y,n.y)}function BM(t,e,n){t.min=e.min-n.min,t.max=t.min+Xa(e)}function Xv(t,e,n){BM(t.x,e.x,n.x),BM(t.y,e.y,n.y)}const ZM=()=>({translate:0,scale:1,origin:0,originPoint:0}),im=()=>({x:ZM(),y:ZM()}),jM=()=>({min:0,max:0}),ss=()=>({x:jM(),y:jM()});function Ou(t){return[t("x"),t("y")]}function bA(t){return t===void 0||t===1}function EA({scale:t,scaleX:e,scaleY:n}){return!bA(t)||!bA(e)||!bA(n)}function cp(t){return EA(t)||VM(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function VM(t){return zM(t.x)||zM(t.y)}function zM(t){return t&&t!=="0%"}function hE(t,e,n){const r=t-n,i=e*r;return n+i}function HM(t,e,n,r,i){return i!==void 0&&(t=hE(t,i,r)),hE(t,n,r)+e}function wA(t,e=0,n=1,r,i){t.min=HM(t.min,e,n,r,i),t.max=HM(t.max,e,n,r,i)}function GM(t,{x:e,y:n}){wA(t.x,e.translate,e.scale,e.originPoint),wA(t.y,n.translate,n.scale,n.originPoint)}const qM=.999999999999,WM=1.0000000000001;function Bre(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let o,l;for(let c=0;c<i;c++){o=n[c],l=o.projectionDelta;const{visualElement:f}=o.options;f&&f.props.style&&f.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&sm(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,GM(t,l)),r&&cp(o.latestValues)&&sm(t,o.latestValues))}e.x<WM&&e.x>qM&&(e.x=1),e.y<WM&&e.y>qM&&(e.y=1)}function om(t,e){t.min=t.min+e,t.max=t.max+e}function KM(t,e,n,r,i=.5){const o=jo(t.min,t.max,i);wA(t,e,n,o,r)}function sm(t,e){KM(t.x,e.x,e.scaleX,e.scale,e.originX),KM(t.y,e.y,e.scaleY,e.scale,e.originY)}function YM(t,e){return MM(Dre(t.getBoundingClientRect(),e))}function Zre(t,e,n){const r=YM(t,n),{scroll:i}=e;return i&&(om(r.x,i.offset.x),om(r.y,i.offset.y)),r}const QM=({current:t})=>t?t.ownerDocument.defaultView:null,XM=(t,e)=>Math.abs(t-e);function jre(t,e){const n=XM(t.x,e.x),r=XM(t.y,e.y);return Math.sqrt(n**2+r**2)}class JM{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:o=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=SA(this.lastMoveEventInfo,this.history),E=this.startEvent!==null,A=jre(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!E&&!A)return;const{point:_}=p,{timestamp:I}=sa;this.history.push({..._,timestamp:I});const{onStart:C,onMove:v}=this.handlers;E||(C&&C(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,p)},this.handlePointerMove=(p,E)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=TA(E,this.transformPagePoint),Fo.update(this.updatePoint,!0)},this.handlePointerUp=(p,E)=>{this.end();const{onEnd:A,onSessionEnd:_,resumeAnimation:I}=this.handlers;if(this.dragSnapToOrigin&&I&&I(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=SA(p.type==="pointercancel"?this.lastMoveEventInfo:TA(E,this.transformPagePoint),this.history);this.startEvent&&A&&A(p,C),_&&_(p,C)},!sA(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=l,this.contextWindow=i||window;const c=Kv(e),f=TA(c,this.transformPagePoint),{point:g}=f,{timestamp:y}=sa;this.history=[{...g,timestamp:y}];const{onSessionStart:h}=n;h&&h(e,SA(f,this.history)),this.removeListeners=kv(Yv(this.contextWindow,"pointermove",this.handlePointerMove),Yv(this.contextWindow,"pointerup",this.handlePointerUp),Yv(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Kd(this.updatePoint)}}function TA(t,e){return e?{point:e(t.point)}:t}function ek(t,e){return{x:t.x-e.x,y:t.y-e.y}}function SA({point:t},e){return{point:t,delta:ek(t,tk(e)),offset:ek(t,Vre(e)),velocity:zre(e,.1)}}function Vre(t){return t[0]}function tk(t){return t[t.length-1]}function zre(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=tk(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>tf(e)));)n--;if(!r)return{x:0,y:0};const o=nf(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const l={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function Hre(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?jo(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?jo(n,t,r.max):Math.min(t,n)),t}function nk(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Gre(t,{top:e,left:n,bottom:r,right:i}){return{x:nk(t.x,n,i),y:nk(t.y,e,r)}}function rk(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function qre(t,e){return{x:rk(t.x,e.x),y:rk(t.y,e.y)}}function Wre(t,e){let n=.5;const r=Xa(t),i=Xa(e);return i>r?n=Fv(e.min,e.max-r,t.min):r>i&&(n=Fv(t.min,t.max-i,e.min)),qf(0,1,n)}function Kre(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const AA=.35;function Yre(t=AA){return t===!1?t=0:t===!0&&(t=AA),{x:ik(t,"left","right"),y:ik(t,"top","bottom")}}function ik(t,e,n){return{min:ok(t,e),max:ok(t,n)}}function ok(t,e){return typeof t=="number"?t:t[e]||0}const Qre=new WeakMap;class Xre{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ss(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const o=h=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Kv(h).point)},l=(h,p)=>{const{drag:E,dragPropagation:A,onDragStart:_}=this.getProps();if(E&&!A&&(this.openDragLock&&this.openDragLock(),this.openDragLock=mne(E),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=p,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ou(C=>{let v=this.getAxisMotionValue(C).get()||0;if(rf.test(v)){const{projection:T}=this.visualElement;if(T&&T.layout){const S=T.layout.layoutBox[C];S&&(v=Xa(S)*(parseFloat(v)/100))}}this.originPoint[C]=v}),_&&Fo.postRender(()=>_(h,p)),yA(this.visualElement,"transform");const{animationState:I}=this.visualElement;I&&I.setActive("whileDrag",!0)},c=(h,p)=>{this.latestPointerEvent=h,this.latestPanInfo=p;const{dragPropagation:E,dragDirectionLock:A,onDirectionLock:_,onDrag:I}=this.getProps();if(!E&&!this.openDragLock)return;const{offset:C}=p;if(A&&this.currentDirection===null){this.currentDirection=Jre(C),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",p.point,C),this.updateAxis("y",p.point,C),this.visualElement.render(),I&&I(h,p)},f=(h,p)=>{this.latestPointerEvent=h,this.latestPanInfo=p,this.stop(h,p),this.latestPointerEvent=null,this.latestPanInfo=null},g=()=>Ou(h=>this.getAnimationState(h)==="paused"&&this.getAxisMotionValue(h).animation?.play()),{dragSnapToOrigin:y}=this.getProps();this.panSession=new JM(e,{onSessionStart:o,onStart:l,onMove:c,onSessionEnd:f,resumeAnimation:g},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:y,distanceThreshold:r,contextWindow:QM(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!i||!r)return;const{velocity:l}=i;this.startAnimation(l);const{onDragEnd:c}=this.getProps();c&&Fo.postRender(()=>c(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!pE(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=Hre(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&rm(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=Gre(r.layoutBox,e):this.constraints=!1,this.elastic=Yre(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ou(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=Kre(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!rm(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=Zre(r,i.root,this.visualElement.getTransformPagePoint());let l=qre(i.layout.layoutBox,o);if(n){const c=n(Lre(l));this.hasMutatedConstraints=!!c,c&&(l=MM(c))}return l}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),f=this.constraints||{},g=Ou(y=>{if(!pE(y,n,this.currentDirection))return;let h=f&&f[y]||{};l&&(h={min:0,max:0});const p=i?200:1e6,E=i?40:1e7,A={type:"inertia",velocity:r?e[y]:0,bounceStiffness:p,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...o,...h};return this.startAxisValueAnimation(y,A)});return Promise.all(g).then(c)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return yA(this.visualElement,e),r.start(vA(e,r,0,n,this.visualElement,!1))}stopAnimation(){Ou(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ou(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ou(n=>{const{drag:r}=this.getProps();if(!pE(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:l,max:c}=i.layout.layoutBox[n];o.set(e[n]-jo(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!rm(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ou(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const f=c.get();i[l]=Wre({min:f,max:f},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ou(l=>{if(!pE(l,e,null))return;const c=this.getAxisMotionValue(l),{min:f,max:g}=this.constraints[l];c.set(jo(f,g,i[l]))})}addListeners(){if(!this.visualElement.current)return;Qre.set(this.visualElement,this);const e=this.visualElement.current,n=Yv(e,"pointerdown",f=>{const{drag:g,dragListener:y=!0}=this.getProps();g&&y&&this.start(f)}),r=()=>{const{dragConstraints:f}=this.getProps();rm(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Fo.read(r);const l=Wv(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:g})=>{this.isDragging&&g&&(Ou(y=>{const h=this.getAxisMotionValue(y);h&&(this.originPoint[y]+=f[y].translate,h.set(h.get()+f[y].translate))}),this.visualElement.render())}));return()=>{l(),n(),o(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:l=AA,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:l,dragMomentum:c}}}function pE(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Jre(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class eie extends Xd{constructor(e){super(e),this.removeGroupControls=Nu,this.removeListeners=Nu,this.controls=new Xre(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Nu}unmount(){this.removeGroupControls(),this.removeListeners()}}const sk=t=>(e,n)=>{t&&Fo.postRender(()=>t(e,n))};class tie extends Xd{constructor(){super(...arguments),this.removePointerDownListener=Nu}onPointerDown(e){this.session=new JM(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:QM(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:sk(e),onStart:sk(n),onMove:r,onEnd:(o,l)=>{delete this.session,i&&Fo.postRender(()=>i(o,l))}}}mount(){this.removePointerDownListener=Yv(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const gE={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ak(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Jv={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Xr.test(t))t=parseFloat(t);else return t;const n=ak(t,e.target.x),r=ak(t,e.target.y);return`${n}% ${r}%`}},nie={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Qd.parse(t);if(i.length>5)return r;const o=Qd.createTransformer(t),l=typeof i[0]!="number"?1:0,c=n.x.scale*e.x,f=n.y.scale*e.y;i[0+l]/=c,i[1+l]/=f;const g=jo(c,f,.5);return typeof i[2+l]=="number"&&(i[2+l]/=g),typeof i[3+l]=="number"&&(i[3+l]/=g),o(i)}};let lk=!1;class rie extends xe.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;Zne(iie),o&&(n.group&&n.group.add(o),r&&r.register&&i&&r.register(o),lk&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),gE.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:o}=this.props,{projection:l}=r;return l&&(l.isPresent=o,lk=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==o?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||Fo.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),oA.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function uk(t){const[e,n]=Ane(),r=xe.useContext(nP);return pe.jsx(rie,{...t,layoutGroup:r,switchLayoutGroup:xe.useContext(bM),isPresent:e,safeToRemove:n})}const iie={borderRadius:{...Jv,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Jv,borderTopRightRadius:Jv,borderBottomLeftRadius:Jv,borderBottomRightRadius:Jv,boxShadow:nie};function oie(t,e,n){const r=Sa(t)?t:tm(t);return r.start(vA("",r,e,n)),r.animation}const sie=(t,e)=>t.depth-e.depth;class aie{constructor(){this.children=[],this.isDirty=!1}add(e){TS(this.children,e),this.isDirty=!0}remove(e){SS(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(sie),this.isDirty=!1,this.children.forEach(e)}}function lie(t,e){const n=bl.now(),r=({timestamp:i})=>{const o=i-n;o>=e&&(Kd(r),t(o-e))};return Fo.setup(r,!0),()=>Kd(r)}const ck=["TopLeft","TopRight","BottomLeft","BottomRight"],uie=ck.length,fk=t=>typeof t=="string"?parseFloat(t):t,dk=t=>typeof t=="number"||Xr.test(t);function cie(t,e,n,r,i,o){i?(t.opacity=jo(0,n.opacity??1,fie(r)),t.opacityExit=jo(e.opacity??1,0,die(r))):o&&(t.opacity=jo(e.opacity??1,n.opacity??1,r));for(let l=0;l<uie;l++){const c=`border${ck[l]}Radius`;let f=hk(e,c),g=hk(n,c);if(f===void 0&&g===void 0)continue;f||(f=0),g||(g=0),f===0||g===0||dk(f)===dk(g)?(t[c]=Math.max(jo(fk(f),fk(g),r),0),(rf.test(g)||rf.test(f))&&(t[c]+="%")):t[c]=g}(e.rotate||n.rotate)&&(t.rotate=jo(e.rotate||0,n.rotate||0,r))}function hk(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const fie=pk(0,.5,hP),die=pk(.5,.95,Nu);function pk(t,e,n){return r=>r<t?0:r>e?1:n(Fv(t,e,r))}function gk(t,e){t.min=e.min,t.max=e.max}function Lu(t,e){gk(t.x,e.x),gk(t.y,e.y)}function mk(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function yk(t,e,n,r,i){return t-=e,t=hE(t,1/n,r),i!==void 0&&(t=hE(t,1/i,r)),t}function hie(t,e=0,n=1,r=.5,i,o=t,l=t){if(rf.test(e)&&(e=parseFloat(e),e=jo(l.min,l.max,e/100)-l.min),typeof e!="number")return;let c=jo(o.min,o.max,r);t===o&&(c-=e),t.min=yk(t.min,e,n,c,i),t.max=yk(t.max,e,n,c,i)}function vk(t,e,[n,r,i],o,l){hie(t,e[n],e[r],e[i],e.scale,o,l)}const pie=["x","scaleX","originX"],gie=["y","scaleY","originY"];function _k(t,e,n,r){vk(t.x,e,pie,n?n.x:void 0,r?r.x:void 0),vk(t.y,e,gie,n?n.y:void 0,r?r.y:void 0)}function bk(t){return t.translate===0&&t.scale===1}function Ek(t){return bk(t.x)&&bk(t.y)}function wk(t,e){return t.min===e.min&&t.max===e.max}function mie(t,e){return wk(t.x,e.x)&&wk(t.y,e.y)}function Tk(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Sk(t,e){return Tk(t.x,e.x)&&Tk(t.y,e.y)}function Ak(t){return Xa(t.x)/Xa(t.y)}function Ik(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class yie{constructor(){this.members=[]}add(e){TS(this.members,e),e.scheduleRender()}remove(e){if(SS(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function vie(t,e,n){let r="";const i=t.x.translate/e.x,o=t.y.translate/e.y,l=n?.z||0;if((i||o||l)&&(r=`translate3d(${i}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:g,rotate:y,rotateX:h,rotateY:p,skewX:E,skewY:A}=n;g&&(r=`perspective(${g}px) ${r}`),y&&(r+=`rotate(${y}deg) `),h&&(r+=`rotateX(${h}deg) `),p&&(r+=`rotateY(${p}deg) `),E&&(r+=`skewX(${E}deg) `),A&&(r+=`skewY(${A}deg) `)}const c=t.x.scale*e.x,f=t.y.scale*e.y;return(c!==1||f!==1)&&(r+=`scale(${c}, ${f})`),r||"none"}const IA=["","X","Y","Z"],_ie=1e3;let bie=0;function CA(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function Ck(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=NM(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Fo,!(i||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&Ck(r)}function Rk({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(l={},c=e?.()){this.id=bie++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Tie),this.nodes.forEach(Cie),this.nodes.forEach(Rie),this.nodes.forEach(Sie)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new aie)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new CS),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const f=this.eventHandlers.get(l);f&&f.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=dM(l)&&!wne(l),this.instance=l;const{layoutId:c,layout:f,visualElement:g}=this.options;if(g&&!g.current&&g.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||c)&&(this.isLayoutDirty=!0),t){let y,h=0;const p=()=>this.root.updateBlockedByResize=!1;Fo.read(()=>{h=window.innerWidth}),t(l,()=>{const E=window.innerWidth;E!==h&&(h=E,this.root.updateBlockedByResize=!0,y&&y(),y=lie(p,250),gE.hasAnimatedSinceResize&&(gE.hasAnimatedSinceResize=!1,this.nodes.forEach(Ok)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&g&&(c||f)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:h,hasRelativeLayoutChanged:p,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const A=this.options.transition||g.getDefaultTransition()||Die,{onLayoutAnimationStart:_,onLayoutAnimationComplete:I}=g.getProps(),C=!this.targetLayout||!Sk(this.targetLayout,E),v=!h&&p;if(this.options.layoutRoot||this.resumeFrom||v||h&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const T={...nA(A,"layout"),onPlay:_,onComplete:I};(g.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T),this.setAnimationOrigin(y,v)}else h||Ok(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Kd(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(xie),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Ck(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let y=0;y<this.path.length;y++){const h=this.path[y];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:c,layout:f}=this.options;if(c===void 0&&!f)return;const g=this.getTransformTemplate();this.prevTransformTemplateValue=g?g(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(xk);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Nk);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Iie),this.nodes.forEach(Eie),this.nodes.forEach(wie)):this.nodes.forEach(Nk),this.clearAllSnapshots();const c=bl.now();sa.delta=qf(0,16.666666666666668,c-sa.timestamp),sa.timestamp=c,sa.isProcessing=!0,NS.update.process(sa),NS.preRender.process(sa),NS.render.process(sa),sa.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,oA.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Aie),this.sharedNodes.forEach(Nie)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Fo.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Fo.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Xa(this.snapshot.measuredBox.x)&&!Xa(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ss(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c&&this.instance){const f=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:f,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!i)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!Ek(this.projectionDelta),f=this.getTransformTemplate(),g=f?f(this.latestValues,""):void 0,y=g!==this.prevTransformTemplateValue;l&&this.instance&&(c||cp(this.latestValues)||y)&&(i(this.instance,g),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let f=this.removeElementScroll(c);return l&&(f=this.removeTransform(f)),Pie(f),{animationId:this.root.animationId,measuredBox:c,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return ss();const c=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(Mie))){const{scroll:g}=this.root;g&&(om(c.x,g.offset.x),om(c.y,g.offset.y))}return c}removeElementScroll(l){const c=ss();if(Lu(c,l),this.scroll?.wasRoot)return c;for(let f=0;f<this.path.length;f++){const g=this.path[f],{scroll:y,options:h}=g;g!==this.root&&y&&h.layoutScroll&&(y.wasRoot&&Lu(c,l),om(c.x,y.offset.x),om(c.y,y.offset.y))}return c}applyTransform(l,c=!1){const f=ss();Lu(f,l);for(let g=0;g<this.path.length;g++){const y=this.path[g];!c&&y.options.layoutScroll&&y.scroll&&y!==y.root&&sm(f,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),cp(y.latestValues)&&sm(f,y.latestValues)}return cp(this.latestValues)&&sm(f,this.latestValues),f}removeTransform(l){const c=ss();Lu(c,l);for(let f=0;f<this.path.length;f++){const g=this.path[f];if(!g.instance||!cp(g.latestValues))continue;EA(g.latestValues)&&g.updateSnapshot();const y=ss(),h=g.measurePageBox();Lu(y,h),_k(c,g.latestValues,g.snapshot?g.snapshot.layoutBox:void 0,y)}return cp(this.latestValues)&&_k(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==sa.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==c;if(!(l||f&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:y,layoutId:h}=this.options;if(!(!this.layout||!(y||h))){if(this.resolvedRelativeTargetAt=sa.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ss(),this.relativeTargetOrigin=ss(),Xv(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Lu(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ss(),this.targetWithTransforms=ss()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Ure(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Lu(this.target,this.layout.layoutBox),GM(this.target,this.targetDelta)):Lu(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ss(),this.relativeTargetOrigin=ss(),Xv(this.relativeTargetOrigin,this.target,p.target),Lu(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||EA(this.parent.latestValues)||VM(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const l=this.getLead(),c=!!this.resumingFrom||this!==l;let f=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(f=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===sa.timestamp&&(f=!1),f)return;const{layout:g,layoutId:y}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||y))return;Lu(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,p=this.treeScale.y;Bre(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=ss());const{target:E}=l;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(mk(this.prevProjectionDelta.x,this.projectionDelta.x),mk(this.prevProjectionDelta.y,this.projectionDelta.y)),Qv(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==p||!Ik(this.projectionDelta.x,this.prevProjectionDelta.x)||!Ik(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=im(),this.projectionDelta=im(),this.projectionDeltaWithTransform=im()}setAnimationOrigin(l,c=!1){const f=this.snapshot,g=f?f.latestValues:{},y={...this.latestValues},h=im();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const p=ss(),E=f?f.source:void 0,A=this.layout?this.layout.source:void 0,_=E!==A,I=this.getStack(),C=!I||I.members.length<=1,v=!!(_&&!C&&this.options.crossfade===!0&&!this.path.some(Lie));this.animationProgress=0;let T;this.mixTargetDelta=S=>{const O=S/1e3;Lk(h.x,l.x,O),Lk(h.y,l.y,O),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Xv(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Oie(this.relativeTarget,this.relativeTargetOrigin,p,O),T&&mie(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=ss()),Lu(T,this.relativeTarget)),_&&(this.animationValues=y,cie(y,g,this.latestValues,O,v,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=O},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Kd(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Fo.update(()=>{gE.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=tm(0)),this.currentAnimation=oie(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),l.onUpdate&&l.onUpdate(c)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(_ie),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:f,layout:g,latestValues:y}=l;if(!(!c||!f||!g)){if(this!==l&&this.layout&&g&&Fk(this.options.animationType,this.layout.layoutBox,g.layoutBox)){f=this.target||ss();const h=Xa(this.layout.layoutBox.x);f.x.min=l.target.x.min,f.x.max=f.x.min+h;const p=Xa(this.layout.layoutBox.y);f.y.min=l.target.y.min,f.y.max=f.y.min+p}Lu(c,f),sm(c,y),Qv(this.projectionDeltaWithTransform,this.layoutCorrected,c,y)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new yie),this.sharedNodes.get(l).add(c);const g=c.options.initialPromotionConfig;c.promote({transition:g?g.transition:void 0,preserveFollowOpacity:g&&g.shouldPreserveFollowOpacity?g.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:f}={}){const g=this.getStack();g&&g.promote(this,f),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:f}=l;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(c=!0),!c)return;const g={};f.z&&CA("z",l,g,this.animationValues);for(let y=0;y<IA.length;y++)CA(`rotate${IA[y]}`,l,g,this.animationValues),CA(`skew${IA[y]}`,l,g,this.animationValues);l.render();for(const y in g)l.setStaticValue(y,g[y]),this.animationValues&&(this.animationValues[y]=g[y]);l.scheduleRender()}applyProjectionStyles(l,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const f=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=dE(c?.pointerEvents)||"",l.transform=f?f(this.latestValues,""):"none";return}const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=dE(c?.pointerEvents)||""),this.hasProjected&&!cp(this.latestValues)&&(l.transform=f?f({},""):"none",this.hasProjected=!1);return}l.visibility="";const y=g.animationValues||g.latestValues;this.applyTransformsToTarget();let h=vie(this.projectionDeltaWithTransform,this.treeScale,y);f&&(h=f(y,h)),l.transform=h;const{x:p,y:E}=this.projectionDelta;l.transformOrigin=`${p.origin*100}% ${E.origin*100}% 0`,g.animationValues?l.opacity=g===this?y.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:l.opacity=g===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const A in Gv){if(y[A]===void 0)continue;const{correct:_,applyTo:I,isCSSVariable:C}=Gv[A],v=h==="none"?y[A]:_(y[A],g);if(I){const T=I.length;for(let S=0;S<T;S++)l[I[S]]=v}else C?this.options.visualElement.renderState.vars[A]=v:l[A]=v}this.options.layoutId&&(l.pointerEvents=g===this?dE(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(xk),this.root.sharedNodes.clear()}}}function Eie(t){t.updateLayout()}function wie(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:i}=t.options,o=e.source!==t.layout.source;i==="size"?Ou(y=>{const h=o?e.measuredBox[y]:e.layoutBox[y],p=Xa(h);h.min=n[y].min,h.max=h.min+p}):Fk(i,e.layoutBox,n)&&Ou(y=>{const h=o?e.measuredBox[y]:e.layoutBox[y],p=Xa(n[y]);h.max=h.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[y].max=t.relativeTarget[y].min+p)});const l=im();Qv(l,n,e.layoutBox);const c=im();o?Qv(c,t.applyTransform(r,!0),e.measuredBox):Qv(c,n,e.layoutBox);const f=!Ek(l);let g=!1;if(!t.resumeFrom){const y=t.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:h,layout:p}=y;if(h&&p){const E=ss();Xv(E,e.layoutBox,h.layoutBox);const A=ss();Xv(A,n,p.layoutBox),Sk(E,A)||(g=!0),y.options.layoutRoot&&(t.relativeTarget=A,t.relativeTargetOrigin=E,t.relativeParent=y)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:f,hasRelativeLayoutChanged:g})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function Tie(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Sie(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Aie(t){t.clearSnapshot()}function xk(t){t.clearMeasurements()}function Nk(t){t.isLayoutDirty=!1}function Iie(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Ok(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Cie(t){t.resolveTargetDelta()}function Rie(t){t.calcProjection()}function xie(t){t.resetSkewAndRotation()}function Nie(t){t.removeLeadSnapshot()}function Lk(t,e,n){t.translate=jo(e.translate,0,n),t.scale=jo(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Dk(t,e,n,r){t.min=jo(e.min,n.min,r),t.max=jo(e.max,n.max,r)}function Oie(t,e,n,r){Dk(t.x,e.x,n.x,r),Dk(t.y,e.y,n.y,r)}function Lie(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Die={duration:.45,ease:[.4,0,.1,1]},Pk=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Mk=Pk("applewebkit/")&&!Pk("chrome/")?Math.round:Nu;function kk(t){t.min=Mk(t.min),t.max=Mk(t.max)}function Pie(t){kk(t.x),kk(t.y)}function Fk(t,e,n){return t==="position"||t==="preserve-aspect"&&!$re(Ak(e),Ak(n),.2)}function Mie(t){return t!==t.root&&t.scroll?.wasRoot}const kie=Rk({attachResizeListener:(t,e)=>Wv(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),RA={current:void 0},$k=Rk({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!RA.current){const t=new kie({});t.mount(window),t.setOptions({layoutScroll:!0}),RA.current=t}return RA.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Fie={pan:{Feature:tie},drag:{Feature:eie,ProjectionNode:$k,MeasureLayout:uk}};function Uk(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,o=r[i];o&&Fo.postRender(()=>o(e,Kv(e)))}class $ie extends Xd{mount(){const{current:e}=this.node;e&&(this.unmount=yne(e,(n,r)=>(Uk(this.node,r,"Start"),i=>Uk(this.node,i,"End"))))}unmount(){}}class Uie extends Xd{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=kv(Wv(this.node.current,"focus",()=>this.onFocus()),Wv(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Bk(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),o=r[i];o&&Fo.postRender(()=>o(e,Kv(e)))}class Bie extends Xd{mount(){const{current:e}=this.node;e&&(this.unmount=Ene(e,(n,r)=>(Bk(this.node,r,"Start"),(i,{success:o})=>Bk(this.node,i,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const xA=new WeakMap,NA=new WeakMap,Zie=t=>{const e=xA.get(t.target);e&&e(t)},jie=t=>{t.forEach(Zie)};function Vie({root:t,...e}){const n=t||document;NA.has(n)||NA.set(n,{});const r=NA.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(jie,{root:t,...e})),r[i]}function zie(t,e,n){const r=Vie(e);return xA.set(t,n),r.observe(t),()=>{xA.delete(t),r.unobserve(t)}}const Hie={some:0,all:1};class Gie extends Xd{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:o}=e,l={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Hie[i]},c=f=>{const{isIntersecting:g}=f;if(this.isInView===g||(this.isInView=g,o&&!g&&this.hasEnteredView))return;g&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",g);const{onViewportEnter:y,onViewportLeave:h}=this.node.getProps(),p=g?y:h;p&&p(f)};return zie(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(qie(e,n))&&this.startObserver()}unmount(){}}function qie({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Wie={inView:{Feature:Gie},tap:{Feature:Bie},focus:{Feature:Uie},hover:{Feature:$ie}},Kie={layout:{ProjectionNode:$k,MeasureLayout:uk}},OA={current:null},Zk={current:!1};function Yie(){if(Zk.current=!0,!!ES)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>OA.current=t.matches;t.addEventListener("change",e),e()}else OA.current=!1}const Qie=new WeakMap;function Xie(t,e,n){for(const r in e){const i=e[r],o=n[r];if(Sa(i))t.addValue(r,i);else if(Sa(o))t.addValue(r,tm(i,{owner:t}));else if(o!==i)if(t.hasValue(r)){const l=t.getValue(r);l.liveStyle===!0?l.jump(i):l.hasAnimated||l.set(i)}else{const l=t.getStaticValue(r);t.addValue(r,tm(l!==void 0?l:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const jk=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Jie{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=tA,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=bl.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Fo.render(this.render,!1,!0))};const{latestValues:f,renderState:g}=l;this.latestValues=f,this.baseTarget={...f},this.initialValues=n.initial?{...f}:{},this.renderState=g,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!o,this.isControllingVariants=fE(n),this.isVariantNode=yM(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:y,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in h){const E=h[p];f[p]!==void 0&&Sa(E)&&E.set(f[p],!1)}}mount(e){this.current=e,Qie.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Zk.current||Yie(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:OA.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Kd(this.notifyUpdate),Kd(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=em.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&Fo.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),o(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in nm){const n=nm[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ss()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<jk.length;r++){const i=jk[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,l=e[o];l&&(this.propEventSubscriptions[i]=this.on(i,l))}this.prevMotionValues=Xie(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=tm(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(rP(r)||oP(r))?r=parseFloat(r):!Sne(r)&&Qd.test(n)&&(r=rM(e,n)),this.setBaseTarget(e,Sa(r)?r.get():r)),Sa(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=pA(this.props,n,this.presenceContext?.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Sa(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new CS),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class Vk extends Jie{constructor(){super(...arguments),this.KeyframeResolver=dne}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Sa(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function zk(t,{style:e,vars:n},r,i){const o=t.style;let l;for(l in e)o[l]=e[l];i?.applyProjectionStyles(o,r);for(l in n)o.setProperty(l,n[l])}function eoe(t){return window.getComputedStyle(t)}class toe extends Vk{constructor(){super(...arguments),this.type="html",this.renderInstance=zk}readValueFromInstance(e,n){if(em.has(n))return this.projection?.isProjecting?YS(n):Lte(e,n);{const r=eoe(e),i=(OS(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return YM(e,n)}build(e,n,r){fA(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return gA(e,n,r)}}const Hk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function noe(t,e,n,r){zk(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(Hk.has(i)?i:cA(i),e.attrs[i])}class roe extends Vk{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ss}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(em.has(n)){const r=nM(n);return r&&r.default||0}return n=Hk.has(n)?n:cA(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return xM(e,n,r)}build(e,n,r){SM(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){noe(e,n,r,i)}mount(e){this.isSVGTag=IM(e.tagName),super.mount(e)}}const ioe=(t,e)=>hA(t)?new roe(e):new toe(e,{allowProjection:t!==xe.Fragment}),ooe=ire({...Nre,...Wie,...Fie,...Kie},ioe),Gk=Nne(ooe);function qk(t){return pe.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none","aria-hidden":"true",...t,children:pe.jsx("path",{stroke:"currentColor",strokeWidth:1.5,d:"M12.096 7.244c.937.542.94 1.223 0 1.835l-7.267 5.082c-.913.506-1.533.207-1.598-.886l-.03-10.637c-.021-1.007.779-1.292 1.541-.809l7.354 5.415Z"})})}const soe="continueGuide";function aoe({guide:t}){const{t:e,currentLanguage:n}=Gi(),r=za(),{playGuide:i}=rp(),{addPopup:o}=vb(),{history:l}=bT();function c(g){const h=l.all()[g.id],p=h!=null;if(r?.config.enable_restart_guide_on_last_step==null||!r.config.enable_restart_guide_on_last_step||!p){i(g.id).catch(Re.error);return}(r.config.restart_guide_URL_strict??!1?location.href===h.interruptedOnURL:location.href.split(/[?#]/)[0]===h.interruptedOnURL?.split(/[?#]/)[0])?f(g,h):i(g.id).catch(Re.error)}function f(g,y){const{lastStepId:h}=y;o({key:soe,title:`${e("continue_guide_lecture")} ?`,onConfirm:()=>{i(g.id,{startAtStep:h,eventType:"resume"}).catch(Re.error)},onCancel:()=>{i(g.id,{eventType:"restart"}).catch(Re.error)},confirmTitle:e("continue"),cancelTitle:e("restart")})}return pe.jsxs("li",{className:sc.guide,onClick:()=>{c(t)},title:t.title,children:[pe.jsx("span",{className:sc["guide-title"],lang:n,children:t.title}),pe.jsx(qk,{})]})}const loe=80;function uoe({guides:t,onMotionEnd:e,isOpen:n}){const r=t.length*loe;return pe.jsx(Gk.div,{initial:{overflow:"hidden",maxHeight:0},animate:{maxHeight:n?r:0},transition:{duration:.3,ease:[.4,0,.2,1]},onAnimationComplete:()=>{e(n)},style:{overflow:"hidden"},children:pe.jsx("ul",{className:sc["guide-list"],children:t.map(i=>pe.jsx(aoe,{guide:i},`guide-${i.id}`))})})}function coe({setIsOpen:t,section:e,searchTerm:n,...r}){const i=xe.useRef(null),o=y=>{const{guides:h}=e;if(y==="")return h;const p=tP(y);return h.filter(E=>p(E.title))},l=r.isOpen||n!=="",c=l?`${sc.section} ${sc.active}`:sc.section,{currentLanguage:f}=Gi(),g=xe.useCallback(y=>{y&&i.current?.scrollIntoView({behavior:"smooth",block:"start"})},[]);return pe.jsxs("li",{className:c,title:`${e.title} ${l?"-active":""}`,ref:i,"aria-expanded":l,children:[pe.jsxs("span",{className:sc.title,onClick:()=>{n===""&&t(!l)},lang:f,children:[pe.jsx("span",{"aria-current":l,children:e.title}),pe.jsx(DT,{className:`${sc.arrow} ${l?sc.rotate:""}`})]}),pe.jsx(uoe,{isOpen:l,guides:o(n),onMotionEnd:g})]})}function foe(t){return pe.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:93,height:98,fill:"none",...t,children:[pe.jsx("circle",{cx:47,cy:51.738,r:45.762,fill:"#FDFBED"}),pe.jsx("path",{stroke:"#245FC6",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.25,d:"M72.249 63.589V33.413c0-3-2.45-5.226-5.425-4.976h-.15c-5.25.45-13.225 3.126-17.675 5.926l-.425.275c-.725.45-1.925.45-2.65 0l-.625-.376c-4.45-2.774-12.4-5.424-17.65-5.85-2.975-.25-5.4 2-5.4 4.976v30.2c0 2.4 1.95 4.65 4.35 4.95l.725.1c5.425.725 13.8 3.475 18.6 6.1l.1.05c.675.374 1.75.374 2.4 0 4.8-2.65 13.2-5.425 18.65-6.15l.825-.1c2.4-.3 4.35-2.55 4.35-4.95ZM47.249 35.464v37.5M36.624 42.964h-5.625M38.499 50.464h-7.5"}),pe.jsx("circle",{cx:3.228,cy:48.256,r:1.99,fill:"#FDFBED",stroke:"#245FC6",strokeWidth:1.5}),pe.jsx("circle",{cx:89.777,cy:68.153,r:1.99,fill:"#FDFBED",stroke:"#245FC6",strokeWidth:1.5}),pe.jsx("circle",{cx:71.373,cy:89.044,r:3.979,fill:"#FDFBED",stroke:"#245FC6",strokeWidth:1.5}),pe.jsx("circle",{cx:63.912,cy:7.469,r:5.969,fill:"#FDFBED",stroke:"#245FC6",strokeWidth:1.5}),pe.jsx("path",{stroke:"#245FC6",strokeWidth:1.5,d:"m85.798 23.386 5.968 5.969m0-5.969-5.968 5.969M21.632 82.578l5.969 5.968m0-5.969-5.969 5.97M15.663 9.956l5.969 5.969m0-5.97-5.969 5.97"})]})}function doe({sections:t,searchTerm:e}){const n=xe.useRef(null),[r,i]=xe.useState(null),{t:o}=Gi(),l=xe.useMemo(()=>{if(e.length>=1)return t;const c=({title:f})=>tP(e)(f);return t.filter(({guides:f})=>f.find(c))},[t,e]);return l.length<1?pe.jsxs("div",{className:sc["sections-empty"],children:[pe.jsx(foe,{}),pe.jsx("p",{children:o(e!==""?"empty_search":"empty_guides")})]}):pe.jsx("ul",{ref:n,className:sc["section-list"],children:l.map(c=>pe.jsx(coe,{section:c,isOpen:r===c.id,setIsOpen:f=>{i(f?c.id:null)},searchTerm:e},`section-${c.id}`))})}const Du={"empty-library-container":"_empty-library-container_7ehkm_16","tips-container":"_tips-container_7ehkm_27","no-element-found-text":"_no-element-found-text_7ehkm_33","library-item-list":"_library-item-list_7ehkm_54",file:"_file_7ehkm_66",section:"_section_7ehkm_91",title:"_title_7ehkm_96",arrow:"_arrow_7ehkm_113",active:"_active_7ehkm_120",rotate:"_rotate_7ehkm_125","section-content":"_section-content_7ehkm_128"};function hoe(t){return pe.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...t,children:pe.jsx("path",{fill:"#485261",d:"M3.246 11.646a.5.5 0 1 0 .708.708l-.708-.707ZM5.6 10l.354-.353a.5.5 0 0 0-.708 0L5.6 10Zm1.6 1.6-.354.354a.5.5 0 0 0 .708 0L7.2 11.6ZM10.8 8l.353-.353a.5.5 0 0 0-.707 0L10.8 8Zm2.446 3.154a.5.5 0 1 0 .707-.707l-.707.707Zm-9.292 1.2 2-2-.708-.707-2 2 .708.707Zm1.292-2 1.6 1.6.708-.708-1.6-1.6-.708.708Zm2.308 1.6 3.6-3.6-.708-.707-3.6 3.6.708.707Zm2.892-3.6 2.8 2.8.707-.707-2.8-2.8-.707.707ZM8 13.9A5.9 5.9 0 0 1 2.1 8h-1A6.9 6.9 0 0 0 8 14.9v-1ZM13.9 8A5.9 5.9 0 0 1 8 13.9v1A6.9 6.9 0 0 0 14.9 8h-1ZM8 2.1A5.9 5.9 0 0 1 13.9 8h1A6.9 6.9 0 0 0 8 1.1v1Zm0-1A6.9 6.9 0 0 0 1.1 8h1A5.9 5.9 0 0 1 8 2.1v-1ZM6.7 6a.7.7 0 0 1-.7.7v1A1.7 1.7 0 0 0 7.7 6h-1Zm-.7.7a.7.7 0 0 1-.7-.7h-1A1.7 1.7 0 0 0 6 7.7v-1ZM5.3 6a.7.7 0 0 1 .7-.7v-1A1.7 1.7 0 0 0 4.3 6h1Zm.7-.7a.7.7 0 0 1 .7.7h1A1.7 1.7 0 0 0 6 4.3v1Z"})})}function poe(t){return pe.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...t,children:pe.jsx("path",{stroke:"#485261",strokeLinecap:"round",strokeLinejoin:"round",d:"M4.8 14V2m6.4 12V2M1.6 8h12.8M1.6 4.8h3.2m6.4 0h3.2M1.6 11.2h3.2m6.4 0h3.2M1.6 12V4A2.4 2.4 0 0 1 4 1.6h8A2.4 2.4 0 0 1 14.4 4v8a2.4 2.4 0 0 1-2.4 2.4H4A2.4 2.4 0 0 1 1.6 12Z"})})}function LA(t){return pe.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...t,children:pe.jsx("path",{stroke:"#485261",strokeLinecap:"round",strokeLinejoin:"round",d:"M5.6 4.8h4.8M5.6 7.2h4.8M5.6 9.6H8m-3.6-8h7.2a1.6 1.6 0 0 1 1.6 1.6v9.6a1.6 1.6 0 0 1-1.6 1.6H4.4a1.6 1.6 0 0 1-1.6-1.6V3.2a1.6 1.6 0 0 1 1.6-1.6Z"})})}function Wk(){const t=Wa(),e=qh(),{accessToken:n}=ms();return async(r,i)=>{switch(no.trigger("close-player"),r.type){case"video":{new wj(e,r.file_path).show();break}case"image":{new yj(e,await o()).show();break}default:window.open(await o())}t.displayLibraryFile({toolId:i,fileId:r.id});async function o(){if(n===null)throw new Error("Access token cannot be null when displaying a library file. If it was, the user would be logged out and not able to trigger this");const c=await(await fetch(`${Ii("PLAYER_URL")}/api/library/file/${r.id}/download`,{method:"GET",headers:{Accept:"*/*",Authorization:`Bearer ${n}`}})).blob();return URL.createObjectURL(c)}}}function Kk({content:t}){const e=Wk();return pe.jsxs("li",{className:Du.file,onClick:()=>{e(t.file,t.parcour.tool_id)},children:[pe.jsx(goe,{content:t}),pe.jsx("span",{title:t.file.name,children:t.file.name})]})}function goe({content:t}){const e={pdf:pe.jsx(LA,{}),doc:pe.jsx(LA,{}),video:pe.jsx(poe,{}),image:pe.jsx(hoe,{}),default:pe.jsx(LA,{})};return e[t.file.type]??e.default}const moe=80;function yoe({contents:t,isOpen:e}){return pe.jsx(Gk.ul,{initial:{maxHeight:0},animate:{maxHeight:e?t.length*moe:0},exit:{maxHeight:0},transition:{duration:.3,ease:[.4,0,.2,1]},style:{overflow:"hidden"},className:Du["section-content"],children:t.map(n=>pe.jsx(Kk,{content:n},n.id))},"library-section-name")}function voe({section:t={}}){const[e,n]=xe.useState(!1),{currentLanguageId:r}=Gi();function i(){n(c=>!c)}function o(c){const f=t.translations??[];if(c===null)return f.length>0?f[0].name:"";const g=f.find(y=>y.lang_id===c);return g!==void 0?g.name:o(null)}const l=e?`${Du.section} ${Du.active}`:Du.section;return pe.jsxs("li",{className:l,children:[pe.jsxs("div",{className:Du.title,onClick:i,children:[pe.jsx("span",{title:o(r),children:o(r)}),pe.jsx(DT,{className:`${Du.arrow} ${e?Du.rotate:""}`})]}),pe.jsx(yoe,{isOpen:e,contents:t.contents??[]})]})}function _oe(t){return pe.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:93,height:95,fill:"none",...t,children:[pe.jsx("circle",{cx:47,cy:49.113,r:45.762,fill:"#FDFBED"}),pe.jsx("path",{stroke:"#245FC6",strokeLinecap:"round",strokeWidth:2.25,d:"M35.324 67.532V28.07m0 39.462a2.956 2.956 0 0 1-2.956 2.956h-6.163a2.956 2.956 0 0 1-2.956-2.956V28.07a2.956 2.956 0 0 1 2.956-2.956h6.163a2.956 2.956 0 0 1 2.956 2.956m0 39.462a2.956 2.956 0 0 0 2.956 2.956h6.163a2.956 2.956 0 0 0 2.956-2.956V28.07a2.956 2.956 0 0 0-2.956-2.956H38.28a2.956 2.956 0 0 0-2.956 2.956m28.073 43.215 5.878-2.412c1.51-.62 2.328-2.381 1.826-3.935l-11.95-37.012c-.502-1.554-2.133-2.31-3.643-1.691l-5.878 2.412c-1.51.62-2.328 2.381-1.826 3.934l11.95 37.013c.502 1.553 2.133 2.31 3.643 1.69Z"}),pe.jsx("circle",{cx:3.228,cy:45.631,r:1.99,fill:"#FDFBED",stroke:"#245FC6",strokeWidth:1.5}),pe.jsx("circle",{cx:84.527,cy:60.278,r:1.99,fill:"#FDFBED",stroke:"#245FC6",strokeWidth:1.5}),pe.jsx("circle",{cx:65.979,cy:88.354,r:3.979,fill:"#FDFBED",stroke:"#245FC6",strokeWidth:1.5}),pe.jsx("circle",{cx:63.912,cy:7.094,r:5.969,fill:"#FDFBED",stroke:"#245FC6",strokeWidth:1.5}),pe.jsx("path",{stroke:"#245FC6",strokeWidth:1.5,d:"m82.048 26.761 5.968 5.969m0-5.97-5.968 5.97M21.632 85.203l5.969 5.968m0-5.969-5.968 5.969M17.913 7.331l5.969 5.969m0-5.97-5.968 5.97"})]})}function boe({libraryRootContents:t,librarySections:e}){const{t:n}=Gi();return t.length===0&&e.length===0?pe.jsxs("div",{className:Du["empty-library-container"],children:[pe.jsx(_oe,{}),pe.jsx("div",{className:Du["tips-container"],children:pe.jsx("p",{className:Du["no-element-found-text"],children:n("empty_library")})})]}):pe.jsxs("ul",{className:Du["library-item-list"],children:[t.map(i=>pe.jsx(Kk,{content:i},i.id)),e.map(i=>pe.jsx(voe,{section:i},i.id))]})}const of={"feedback-container":"_feedback-container_zfzd3_1","feedback-content":"_feedback-content_zfzd3_7","feedback-select":"_feedback-select_zfzd3_22","feedback-textarea":"_feedback-textarea_zfzd3_39","feedback-toast":"_feedback-toast_zfzd3_55",success:"_success_zfzd3_81",error:"_error_zfzd3_84"};function Eoe({value:t,supportType:e,supportCategories:n,onChange:r}){const{t:i,getBestMatchingLanguage:o}=Gi(),l=(()=>{if(e==="default_categories")return[{value:null,label:i("support_select")},{value:"support_request_bug",label:i("support_request_bug")},{value:"support_request_idea",label:i("support_request_idea")},{value:"support_request_tool",label:i("support_request_tool")},{value:"support_request_guides",label:i("support_request_guides")}];return[{value:null,label:i("support_select")},...n.map(f=>({label:c(f),value:f.id})).filter(woe)];function c(f){const g=Object.entries(f.title);if(g.length===0)return null;const y=g.map(([E])=>E),h=o(y),p=g.find(([E])=>E===h);return p?p[1]:null}})();return pe.jsx(FL,{value:t,options:l,className:of["feedback-select"],onChange:c=>{r?.(c)}})}function woe(t){return t.label!==null}function Toe(){const{t}=Gi();return pe.jsx("div",{className:of["feedback-toast"]+" "+of.success,children:pe.jsx("p",{children:t("sending")})})}function Soe(t){return pe.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:38,height:38,fill:"none","aria-hidden":"true",...t,children:[pe.jsx("path",{stroke:"#fff",strokeLinejoin:"round",strokeWidth:2,d:"M1 19A18 18 0 0 1 19 1M19 37A18 18 0 0 1 1 19M37 19a18 18 0 0 1-18 18M19 1a18 18 0 0 1 18 18"}),pe.jsx("path",{stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m23.892 15.331-7.297 7.338-2.487-2.501"})]})}function Aoe(){const{t}=Gi();return pe.jsxs("div",{className:of["feedback-toast"]+" "+of.success,children:[pe.jsx(Soe,{}),pe.jsx("p",{children:t("support_success")})]})}function Ioe(t){return pe.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:30,height:30,fill:"none","aria-hidden":"true",...t,children:[pe.jsx("path",{stroke:"#fff",strokeWidth:1.5,d:"M1.5 15C1.5 7.544 7.544 1.5 15 1.5S28.5 7.544 28.5 15 22.456 28.5 15 28.5 1.5 22.456 1.5 15Z"}),pe.jsx("path",{fill:"#fff",d:"M9.405 10.362a.806.806 0 0 1 0-1.128.778.778 0 0 1 1.112 0l10.002 10.153a.806.806 0 0 1 0 1.128.778.778 0 0 1-1.112 0L9.405 10.362Z"}),pe.jsx("path",{fill:"#fff",d:"M20.343 10.362a.806.806 0 0 0 0-1.128.778.778 0 0 0-1.111 0L9.23 19.387a.806.806 0 0 0 0 1.128.778.778 0 0 0 1.111 0l10.002-10.153Z"})]})}function Coe(){const{t}=Gi();return pe.jsxs("div",{className:of["feedback-toast"]+" "+of.error,children:[pe.jsx(Ioe,{}),pe.jsx("p",{children:t("support_error")})]})}const Yk={button:"_button_a8ild_1",outline:"_outline_a8ild_19"};function DA({children:t,variant:e,...n}){const r=[Yk.button];return e==="outline"&&r.push(Yk.outline),pe.jsx("button",{className:r.join(" "),...n,children:t})}function Roe({onSubmit:t=()=>{}}){const{t:e,getBestMatchingLanguage:n}=Gi(),r=za(),i=Za(),o=ml(),[l,c]=xe.useState(""),[f,g]=xe.useState(null),[y,h]=xe.useState(null),[p,E]=xe.useState(!1),[A,_]=xe.useState(!1),I=y?.status==="loading";if(xe.useEffect(()=>{y!==null&&(y.status==="success"&&(E(!0),setTimeout(()=>{E(!1),h(null),t()},3e3)),y.status==="error"&&(_(!0),setTimeout(()=>{_(!1),h(null)},3e3)))},[y,t]),r===void 0||!xoe(r))return null;const C=()=>{const v=!f?.includes("support"),T=v?n(Object.keys(r.config.support.categories.find(S=>S.id===f)?.title??{})):null;h({status:"loading"}),i(`${Ii("API_URL")}/v3/project/${r.id}/feedback`,{method:"POST",body:JSON.stringify({content:l,tool_id:o[0].uuid,[v?"support_category_id":"open_category"]:f,locale:T}),headers:{"Content-Type":"application/json"}}).then(S=>{if(S.status!==201){h({status:"error",error:new Error("Request failed")});return}h({status:"success"})}).catch(S=>{h({status:"error",error:S})})};return pe.jsxs("div",{className:of["feedback-container"],children:[pe.jsxs("div",{className:of["feedback-content"],children:[pe.jsx("label",{children:e("support_title")}),pe.jsx(Eoe,{supportType:r.config.support.type,supportCategories:r.config.support.categories,value:f,onChange:g}),pe.jsx("textarea",{className:of["feedback-textarea"],placeholder:e("support_placeholder"),onChange:v=>{c(v.target.value)}}),pe.jsx(DA,{onClick:C,disabled:f===null||l===""||y?.status==="loading"||y?.status==="success",children:e("send")})]}),I&&pe.jsx(Toe,{}),p&&pe.jsx(Aoe,{}),A&&y?.status==="error"&&pe.jsx(Coe,{})]})}function xoe(t){return t.config.support.type!=="none"}const as={"chat-wrapper":"_chat-wrapper_lm6qq_16","chat-window":"_chat-window_lm6qq_21",placeholder:"_placeholder_lm6qq_30",message:"_message_lm6qq_44",badge:"_badge_lm6qq_50","user-icon":"_user-icon_lm6qq_54","bubble-wrapper":"_bubble-wrapper_lm6qq_60",guide:"_guide_lm6qq_66","guide-title":"_guide-title_lm6qq_84",document:"_document_lm6qq_93","document-title":"_document-title_lm6qq_109",bubble:"_bubble_lm6qq_60",user:"_user_lm6qq_54","load-more-button":"_load-more-button_lm6qq_129","new-message-wrapper":"_new-message-wrapper_lm6qq_141","input-wrapper":"_input-wrapper_lm6qq_152","arrow-icon":"_arrow-icon_lm6qq_166"};function Noe(t){return pe.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:22,fill:"none","aria-hidden":"true",...t,children:[pe.jsxs("g",{clipPath:"url(#a)",children:[pe.jsx("path",{fill:"#2B72EE",d:"M9.987 21.057c5.515 0 9.987-4.503 9.987-10.057S15.502.943 9.987.943C4.47.943 0 5.446 0 11s4.471 10.057 9.987 10.057Z"}),pe.jsx("path",{fill:"#FFEC3F",d:"M13.433 16.447c-.698 0-3.835.582-5.927-1.51-2.092-2.092-1.86-5.346-1.51-5.694.348-.348-.582-.814 0-1.394.581-.582 1.046.348 1.394 0 .348-.348 3.602-.582 5.694 1.51 2.091 2.092 1.51 5.23 1.51 5.927 0 .449-.144.657-.247.748-.06.053-.115.108-.167.167-.091.103-.3.247-.748.247Z"}),pe.jsx("path",{fill:"#71A4FA",d:"M10.283 4.884c-.055-.005-1.575-.06-2.399.675l-.07.07c-.735.824-.68 2.342-.675 2.4.055.004 1.575.06 2.399-.676l.07-.07c.735-.824.68-2.342.675-2.399Z"})]}),pe.jsx("defs",{children:pe.jsx("clipPath",{id:"a",children:pe.jsx("path",{fill:"#fff",d:"M0 .943h20v20.114H0z"})})})]})}function Ooe(t){return pe.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:12,height:12,fill:"none",...t,children:pe.jsx("path",{fill:"currentColor",d:"M0 12v-1.333h12V12H0Zm0-2.667V8h8v1.333H0Zm0-2.666V5.333h12v1.334H0ZM0 4V2.667h8V4H0Zm0-2.667V0h12v1.333H0Z"})})}const Loe=xe.forwardRef(function({messages:e,showLoadMoreMessagesButton:n=!1,onLoadMoreMessagesClick:r=()=>{},loadMoreMessagesButtonIsLoading:i=!1},o){const{t:l}=Gi(),{playGuide:c}=rp(),f=Wk(),g=Za(),y=ml(),h=async E=>{const A=await _(E);await f({id:A.id,name:A.name,file_path:A.path,type:A.type},y[0].id);async function _(I){return g(`${Ii("API_URL")}/v3/library/file/${I}`,{method:"GET"}).then(C=>{if(C.status!==200)throw new Error(`Unexpected response status ${C.status}, was expecting 200`);return C.body})}},p=E=>{switch(E.type){case"guide":return pe.jsxs("div",{className:as.guide,onClick:()=>{c(E.id,{extraVariables:E.variables}).catch(A=>{Re.error(A,"Error while playing guide from chatbot")})},title:E.title,children:[pe.jsx("span",{className:as["guide-title"],children:E.title}),pe.jsx(qk,{})]},E.id);case"document":return pe.jsxs("div",{className:as.document,onClick:()=>{h(E.id).catch(A=>{Re.error(A,"Error while trying to display file from chatbot")})},title:E.title,children:[pe.jsx(Ooe,{}),pe.jsx("span",{className:as["document-title"],children:E.title})]},E.id);default:return null}};return pe.jsxs("div",{ref:o,className:as["chat-window"],children:[n&&(i?pe.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:18},children:pe.jsx(_v,{style:{width:30,height:30}})}):pe.jsx("button",{className:as["load-more-button"],onClick:r,children:l("chatbot-load-more-messages")})),pe.jsx("div",{className:as.placeholder,children:l("chatbot-information-placeholder")}),e.map((E,A)=>E.sender==="bot"?pe.jsxs("div",{className:as.message,children:[pe.jsx("div",{className:as.badge,children:pe.jsx(Noe,{})}),pe.jsxs("div",{className:as["bubble-wrapper"],children:[pe.jsx("div",{className:as.bubble,dangerouslySetInnerHTML:{__html:lv(E.text)}}),E.contents?.map(p)]})]},A):pe.jsxs("div",{className:as.message,children:[pe.jsx("div",{className:`${as.bubble} ${as.user}`,children:E.text}),pe.jsx("div",{className:as.badge,children:pe.jsx("div",{className:as["user-icon"]})})]},A))]})});function Doe(t){return pe.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:17,fill:"none","aria-hidden":"true",...t,children:pe.jsx("path",{fill:"#485261",d:"M1.142 7.098h10.955L7.94 2.644a1.186 1.186 0 1 1 1.735-1.618l5.986 6.427c.452.493.452 1.25 0 1.742l-5.986 6.427a1.186 1.186 0 1 1-1.735-1.618l4.157-4.453H1.142c-.303 0-.593-.13-.807-.36A1.274 1.274 0 0 1 0 8.324c0-.325.12-.637.335-.867.214-.23.504-.36.807-.36Z"})})}function Poe({onSubmit:t}){const e=xe.useRef(null),[n,r]=xe.useState(""),{t:i}=Gi(),o=()=>{r("");const l=n.trim();l!==""&&t(l)};return xe.useLayoutEffect(()=>{if(e.current!==null){const l=getComputedStyle(e.current),c=parseInt(l.getPropertyValue("border-top-width"))+parseInt(l.getPropertyValue("border-bottom-width"));e.current.style.height="0",e.current.style.height=e.current.scrollHeight+c+"px"}},[n]),pe.jsx("div",{className:as["new-message-wrapper"],children:pe.jsxs("div",{className:as["input-wrapper"],children:[pe.jsx("textarea",{ref:e,value:n,rows:1,placeholder:i("chatbot-input-placeholder"),onChange:l=>{r(l.currentTarget.value)},onKeyDown:l=>{l.key==="Enter"&&!l.shiftKey&&(l.preventDefault(),o())}}),pe.jsx(Doe,{onClick:o,className:as["arrow-icon"]})]})})}const Moe=bn.object({chat_id:bn.string(),title:bn.string(),updated_at:bn.coerce.date()}).transform(t=>({id:t.chat_id,title:t.title,updatedAt:t.updated_at})),koe=bn.object({page:bn.coerce.number(),size:bn.coerce.number(),total_pages:bn.coerce.number(),total_records:bn.coerce.number(),results:bn.array(Moe)}),Foe=bn.object({content:bn.string(),role:bn.enum(["user","assistant"])}).transform(t=>t.role==="user"?{sender:"user",text:t.content}:{sender:"bot",text:t.content,contents:[]}),$oe=bn.object({chat_id:bn.string(),title:bn.string(),page:bn.coerce.number(),size:bn.coerce.number(),total_items:bn.coerce.number(),total_pages:bn.coerce.number(),results:bn.array(Foe)}).transform(t=>({pageNumber:t.page,pageSize:t.size,totalItems:t.total_items,totalPages:t.total_pages,messages:t.results})),Uoe=bn.object({type:bn.literal("guide"),uuid:bn.string(),title:bn.string(),variables:bn.record(bn.string(),bn.string()).optional()}).transform(t=>({type:"guide",id:t.uuid,title:t.title,variables:t.variables!==void 0?Object.entries(t.variables).map(([e,n])=>({name:e,value:n})):[]})),Boe=bn.object({type:bn.literal("document"),uuid:bn.string(),title:bn.string()}).transform(t=>({type:"document",id:t.uuid,title:t.title})),Zoe=bn.union([Uoe,Boe]),joe=bn.preprocess((t,e)=>{if(typeof t!="string"){e.addIssue({code:bn.ZodIssueCode.custom,message:"Expected AI stream message to be a string."});return}return t.split(/\n\n/).filter(r=>r.trim().length>0).map((r,i)=>{const o=r.split(`
`),l=o.find(h=>h.startsWith("event:")),c=o.find(h=>h.startsWith("data:"));if(l==null||c==null)return e.addIssue({code:bn.ZodIssueCode.custom,message:`Block at index ${i} is missing event or data fields.`,path:[i]}),null;const f=l.replace("event: ","").trim(),g=c.replace("data: ","").trim();let y=null;try{y=JSON.parse(g)}catch{return e.addIssue({code:bn.ZodIssueCode.custom,message:"Invalid JSON in data field",path:[i,"data"]}),null}return{eventType:f,data:y}})},bn.array(bn.discriminatedUnion("eventType",[bn.object({eventType:bn.literal("delta"),data:bn.object({data:bn.string()})}),bn.object({eventType:bn.literal("attachments"),data:bn.object({data:bn.string().transform((t,e)=>{try{const n=JSON.parse(t);return bn.array(Zoe).parse(n)}catch{return e.addIssue({code:bn.ZodIssueCode.custom,message:"Invalid JSON in data field",path:["data","data"]}),[]}})})}),bn.object({eventType:bn.enum(["open","done"]),data:bn.object({conversationId:bn.string().optional()})})])));class Voe{constructor(){this.queue=[],this.isRunning=!1}runQueue(e){if(this.queue.length>0){this.isRunning=!0;const n=this.queue.shift(),r=50;n!=null&&e({textDelta:n}),setTimeout(()=>{this.runQueue(e)},r)}else this.isRunning=!1}processStreamData(e,n,r){const o=new TextDecoder().decode(e,{stream:!0});try{const l=joe.parse(o);for(const c of l){if(c.eventType==="delta"){const f=c.data.data.split(/(\s+)/);for(const g of f)g.length>0&&this.queue.push(g);this.isRunning||this.runQueue(n)}c.eventType==="attachments"&&n({attachments:c.data.data})}}catch(l){l instanceof Error?r(l):r(new Error("Stream parse error"))}}}const zoe=()=>`${Ii("LEMON_AI_URL")}/api/application`,Qk=()=>`${Ii("LEMON_AI_URL")}/chat-history-management-api/api`;function Hoe(){const{userUuid:t}=ms(),e=k1(),{currentLanguage:n}=Gi(),r=ml(),i=xe.useCallback(async({chatUuid:c,message:f},g,y)=>{const h=await Ld(),p=new Voe;await Z8(`${zoe()}/generate_response_stream/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${h}`},body:JSON.stringify({ChatId:c,UserId:t,CompanyId:e,ToolsId:r.map(E=>E.uuid),Message:f,Language:n})},E=>{p.processStreamData(E,g,y)})},[t,e,n,r]),o=xe.useCallback(async()=>{const c=await Sy(`${Qk()}/chat/history?tool_ids=${r.map(g=>g.uuid).join(",")}&size=1`,{method:"GET",headers:{"Content-Type":"application/json"}}),f=koe.parse(c.body);return f.results.length===0?null:f.results[0]},[r]),l=xe.useCallback(async(c,f={})=>{const y=await Sy(`${Qk()}/chat/${c}/content?page=${f.pageNumber??1}&size=50`,{method:"GET",headers:{"Content-Type":"application/json"}});return $oe.parse(y.body)},[]);return{sendMessage:i,fetchLatestChat:o,fetchChatContent:l}}function Goe(){const t=xe.useRef(mv()),{t:e}=Gi(),n=Wa(),r=k1(),i=SO(),o=TO(),l=ml(),c=Vs.useRef(null),f=Za(),[g,y]=xe.useState(1),[h,p]=xe.useState(1),[E,A]=xe.useState("submitting"),{sendMessage:_,fetchLatestChat:I,fetchChatContent:C}=Hoe(),[v,T]=xe.useState([{text:e("chatbot-greeting"),sender:"bot",contents:[]}]),S=Woe({messages:v,chatWindowRef:c}),O=xe.useCallback((oe,Ce=null)=>{if(r==null)return;const Ye=l.map(Y=>Y.uuid),et={chatUuid:t.current,companyUuid:r,toolUuids:Ye,profileUuids:i,tagUuids:o};switch(oe){case"new-chat":n.initChatbot(et);break;case"user-message":n.chatbotNewUserMessage(et);break;case"chatbot-response":n.chatbotResponse({...et,suggestedContent:Ce??void 0});break}},[r,n,i,l,o]),$=xe.useCallback(oe=>{const Ce=oe.filter(et=>et.type==="guide").map(et=>et.id),Ye=oe.filter(et=>et.type==="document").map(et=>et.id);O("chatbot-response",{guideUuids:Ce,documentUuids:Ye})},[O]),V=xe.useCallback((oe,Ce)=>{T(Ye=>{const et=Ye.length-1;return Ye.map((Y,Ee)=>Ee===et&&Y.sender==="bot"?{...Y,text:oe,contents:Ce??Y.contents}:Y)})},[]),[B,ne]=xe.useState(!0);xe.useEffect(()=>{oe();async function oe(){try{const Ce=await I();if(Ce!=null&&Koe(Ce.updatedAt)){t.current=Ce.id;const Ye=await C(Ce.id),Y=Ye.messages.reverse().map(Ee=>Ee.sender==="bot"?{...Ee,text:Ne(Ee.text),contents:[]}:Ee);T(Y),p(Ye.totalPages)}else O("new-chat")}catch(Ce){Re.error(Ce,"Error while loading latest chat")}finally{ne(!1),A("idle")}}},[I,C,O]);const[D,X]=xe.useState(!1),ve=xe.useCallback(async()=>{try{X(!0),S.beginPreserveScroll();const oe=await C(t.current,{pageNumber:g+1});T(Ce=>[...oe.messages.reverse(),...Ce]),y(Ce=>Ce+1),S.endPreserveScroll()}catch(oe){Re.error(oe,"Error while loading previous messages")}finally{X(!1)}},[C,g,S]),ie=async oe=>{if(E==="submitting")return;O("user-message"),A("submitting"),T(Y=>[...Y,{text:oe,sender:"user"},{text:"...",sender:"bot",contents:[]}]);const Ce=v.length+1;let Ye="",et=[];try{await _({chatUuid:t.current,message:oe},({textDelta:Ee,attachments:Pe})=>{if(Ee!=null){Ye+=Ee;const Xe=Ne(Ye);V(Xe)}Pe&&(et=[...et,...Pe])},Ee=>{Re.error(Ee,"Error while receiving chatbot stream"),A("error")}),$(et);const Y=await ye({text:Ye,contents:et});V(Y.text,Y.contents),A("idle")}catch(Y){T(Ee=>Ee.filter((Pe,Xe)=>Xe!==Ce)),Re.error(Y,"Error while sending message to LemonIA"),A("error")}};async function ye(oe){const Ce=oe.contents.filter(Ee=>Ee.type==="guide"),Ye=oe.contents.filter(Ee=>Ee.type==="document"),Y=(await Promise.all(Ye.map(async Ee=>({document:Ee,isVisible:await Me(Ee)})))).filter(Ee=>Ee.isVisible).map(({document:Ee})=>Ee);return{...oe,text:Ne(oe.text),contents:[...Ce,...Y]}}function Ne(oe){return oe.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\n/g,"<br>")}async function Me(oe){try{return(await f(`${Ii("API_URL")}/v3/library/file/${oe.id}`,{method:"GET",headers:{"Content-Type":"application/json"}})).status===Pg.OK}catch(Ce){return Re.error(Ce,"Error while checking if document is visible. Document will be hidden",{id:oe.id}),!1}}return pe.jsxs("div",{className:as["chat-wrapper"],children:[B?pe.jsx(qoe,{}):pe.jsx(Loe,{ref:c,messages:v,showLoadMoreMessagesButton:g<h,onLoadMoreMessagesClick:()=>{ve()},loadMoreMessagesButtonIsLoading:D}),pe.jsx(Poe,{onSubmit:oe=>{ie(oe)}})]})}function qoe(){return pe.jsx("div",{className:as["chat-window"],style:{display:"flex",justifyContent:"center",alignItems:"center"},children:pe.jsx(_v,{style:{width:50,height:50}})})}function Woe({messages:t,chatWindowRef:e}){const n=xe.useRef(!1),r=xe.useRef(0),i=xe.useRef(0),o=xe.useCallback(()=>{e.current!=null&&(n.current=!0,i.current=e.current.scrollHeight,r.current=e.current.scrollTop)},[e]),l=xe.useCallback(()=>{e.current!=null&&(n.current=!1,requestAnimationFrame(()=>{if(e.current!=null){const c=e.current.scrollHeight;e.current.scrollTop=c-i.current+r.current}}))},[e]);return xe.useLayoutEffect(()=>{n.current||e.current!=null&&(e.current.scrollTop=e.current.scrollHeight)},[t,e]),{beginPreserveScroll:o,endPreserveScroll:l}}function Koe(t){const e=new Date(Date.now()-36e5);return t>e}const WA=class WA extends xe.Component{render(){const{onClick:e}=this.props;return pe.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",onClick:e,"aria-hidden":"true",className:"ll-player--icon ll-player--icon-cross ll-player--icon-current",children:pe.jsx("polygon",{className:"ll-player--icon-fill ll-player--icon-current",points:"15.71 5.71 14.29 4.29 10 8.59 5.71 4.29 4.29 5.71 8.59 10 4.29 14.29 5.71 15.71 10 11.41 14.29 15.71 15.71 14.29 11.41 10 15.71 5.71"})})}};WA.defaultProps={onClick:()=>null};let PA=WA;const am={wrapper:"_wrapper_hzbzj_1",popupContent:"_popupContent_hzbzj_16","close-wrapper":"_close-wrapper_hzbzj_28","close-button":"_close-button_hzbzj_33",content:"_content_hzbzj_37",actions:"_actions_hzbzj_42"};function Yoe(){const{popups:t,removePopup:e}=vb();return t.length===0?null:pe.jsx("div",{className:am.wrapper,children:t.map(n=>pe.jsxs("div",{className:am.popupContent,children:[pe.jsx("div",{className:am["close-wrapper"],children:pe.jsx("button",{className:am["close-button"],onClick:()=>{e(n.key)},children:pe.jsx(PA,{})})}),pe.jsx("p",{className:am.content,children:n.title}),pe.jsxs("div",{className:am.actions,children:[pe.jsx(DA,{onClick:()=>{n.onConfirm(),e(n.key)},children:n.confirmTitle?n.confirmTitle:"Ok"}),!n.isAlert&&pe.jsx(DA,{variant:"outline",onClick:()=>{n.onCancel(),e(n.key)},children:n.cancelTitle?n.cancelTitle:"Annuler"})]})]},n.key))})}function Qoe({newsList:t,unreadNewsCount:e,sections:n,libraryRootContents:r,librarySections:i,onNewsClose:o}){const{theme:l}=Kc(),c=za(),f=n.some(S=>S.guides.length>0),g=t.length>0,y=(r?.length??0)>0||(i?.length??0)>0,p=(()=>{const S=c?.config?.default_tab??"guides",O={guides:f,news:g,library:y&&(c?.config.enable_project_library??!1),chatbot:c?.config.chatbot.enabled??!1,support:(c?.config.support.type??"none")!=="none"};if(O[S])return S;const $=["guides","news","library","chatbot","support"];for(const V of $)if(O[V])return V;return"guides"})(),[E,A]=xe.useState(""),[_,I]=xe.useState(p),C=_==="news"||_==="guides";function v(){no.trigger("close-player")}function T(){switch(_){case"news":return pe.jsx(cee,{search:E,newsList:t,onNewsClose:o});case"guides":return pe.jsx(doe,{sections:n,searchTerm:E});case"library":return pe.jsx(boe,{libraryRootContents:r,librarySections:i});case"support":return pe.jsx(Roe,{onSubmit:()=>{I(p)}});case"chatbot":return pe.jsx(Goe,{})}}return pe.jsxs("div",{id:Qa["player-pop-in"],children:[pe.jsx(IJ,{unreadNewsCount:e,onTabChange:I,activeTab:_,hasGuides:f,hasNews:g,hasLibrary:y}),pe.jsxs("div",{className:Qa.right,children:[pe.jsxs("div",{className:Qa.header,role:"banner",children:[l.watermarkIcon!=null?pe.jsx("img",{src:l.watermarkIcon,alt:"",style:{maxHeight:"100%"}}):pe.jsx(CJ,{}),pe.jsx("div",{className:Qa["close-player-icon"],onClick:v,children:pe.jsx(OD,{size:16})}),C&&pe.jsx("div",{className:Qa["search-bar"],children:pe.jsx(dee,{value:E,onChange:A})})]}),pe.jsx("div",{className:Qa.content,role:"main",children:T()})]}),pe.jsx(Yoe,{})]})}const Xoe=({enabled:t})=>{const{playGuide:e}=rp(),{currentTourStatusRef:n,forgetCurrentTourStatus:r}=bT(),i=xe.useRef(!1),{currentTab:o}=rL(),l=xe.useCallback(()=>{const c=n.current?.tourOptions??{};typeof c.guide_id=="number"?(Re.debug(`Resuming the guide ${c.guide_id} at step ${c.step_id} according to the tour status history`),no.trigger("close-player"),e(c.guide_id,{startAtStep:c.step_id,tourOptions:{interfaceLocale:c.interfaceLocale??null,endStepKey:c.endStepKey??null,previousTrigger:"page change",variables:c.variables??[]},eventType:"autoResume"}).catch(f=>{Re.error(f,"Error while playing the guide")}),r()):Re.debug("No guide to resume according to the tour status history")},[n,r,e]);xe.useEffect(()=>{if(!t||i.current)return;if(!(n.current?.shouldResume??!1)){Re.debug("No guide waiting to resume according to guide playing history");return}Re.debug("A guide is waiting to resume according to the guide playing history, checking if it should resume...",{guideId:n.current?.tourOptions?.guide_id,shouldResume:n.current?.shouldResume,shouldResumeOnlyOnDifferentTab:n.current?.shouldResumeOnlyOnDifferentTab}),f()&&(l(),i.current=!0);function f(){return n.current?.shouldResumeOnlyOnDifferentTab??!1?(Re.debug("The 'shouldResumeOnlyOnDifferentTab' option is active, checking the current tab info to see if the guide started on a different tab."),ts()?(Re.debug("Web extension environment detected, checking the current tab info."),o?.id===void 0?(Re.debug("Current tab info is empty, skipping guide resume check for the current tab."),!0):(Re.debug("Current tab info is available, checking if the tab id has changed.",{currentTab:o}),o.id===n.current?.currentTabId?(Re.debug("The 'shouldResumeOnlyOnDifferentTab' option is active, but the tab hasn't changed. The guide will not resume.",{currentTabId:o.id,previousTabId:n.current.currentTabId}),!1):(Re.debug("Resuming guide: The 'shouldResumeOnlyOnDifferentTab' option is active, and the tab has changed changed.",{currentTabId:o.id,previousTabId:n.current?.currentTabId}),!0))):(Re.debug("Non-web extension environment detected, skipping guide resume check for the current tab."),!0)):(Re.debug("The 'shouldResumeOnlyOnDifferentTab' option is not active, resuming the guide on the current tab."),!0)}},[t,l,o,n])},e_="pushRead",mE={saveReadAt(t,e){let n;try{const r=localStorage.getItem(e_);n=r!=null?JSON.parse(r):{}}catch(r){Re.debug(r,"An error occurred while trying to parse the newsReadAtLocalStorage"),n={}}localStorage.setItem(e_,JSON.stringify({...n,[t]:e}))},getReadAt(t){let e;try{const n=localStorage.getItem(e_);e=n!=null?JSON.parse(n):{}}catch(n){Re.debug(n,"An error occurred while trying to parse the newsReadAtLocalStorage"),e={}}return e[t]??null},clearReadAt(t){try{const e=localStorage.getItem(e_),n=e!=null?JSON.parse(e):{};n[t]=void 0,localStorage.setItem(e_,JSON.stringify(n))}catch(e){Re.debug(e,`An error occurred while trying to clear the newsReadAtLocalStorage for news with id ${t}`)}}},Joe=()=>{const t=Qu(),{currentLanguage:e}=Gi(),{profileAndTagsHash:n,userId:r}=ms(),{updateReadAt:i}=kD(),{authType:o}=ms();return PF({mutationFn:async({newsId:l})=>{const c=new Date().getTime();if(o==="anonymous")mE.saveReadAt(l,c);else try{await i(l),mE.clearReadAt(l)}catch{mE.saveReadAt(l,c)}t.setQueryData(["v3-init-content",r,{profileAndTagsHash:n,language:e}],f=>f===void 0?f:{...f,news:f.news.map(g=>g.id===l?{...g,read_at:new Date().toISOString()}:g)})}})},ese=()=>{const{data:t,isLoading:e}=DD(),n=vv(),r=Wa(),{mutateAsync:i}=Joe(),o=Jb(),{authType:l}=ms(),{config:{host:c}}=zs(),f=xe.useMemo(()=>t===void 0?void 0:t.map(p=>{const E=mE.getReadAt(p.id);let A;return E!==null?A=new Date(E):l==="anonymous"?A=null:A=p.read_at,{...p,read_at:A}}).filter(p=>yL(p,c)).filter(IT),[t,l,c]),g=xe.useRef(!1),y=xe.useCallback(async h=>{await i({newsId:h.id}),g.current=!1},[i]);return xe.useEffect(()=>{if(f===void 0||f.length===0||g.current)return;const h=f.find(p=>p.display.auto?rS(p)?iS(p):p.read_at===null:!1);if(h===void 0){Re.info("No news to display");return}Re.info("Found a news to display",{news:{id:h.id,title:h.title}}),o(h.id).then(p=>{const E=f?.find(A=>A.id===p.id);if(E&&E.read_at!==null&&E.recurrence===null){Re.info("News was already read (detected after fetch), not displaying",{news:{id:p.id,read_at:E.read_at}}),g.current=!1;return}Re.info("Displaying news",{news:{id:p.id}}),n(p,{onClose:y}),r.autoDisplayNews({newsId:h.id,toolId:h.tool_id})}).catch(p=>{Re.error(p,"An error occurred while fetching a news",{newsId:h.id}),g.current=!1}),g.current=!0},[r,f,y,n,o]),{activeNews:f,onNewsClose:y,isLoading:e}};function tse(t,e){return t.toLowerCase()===e.toLowerCase()}function MA(t,e){return t.toLowerCase().includes(e.toLowerCase())}class kA{constructor(e){this.intervalID=null,this.requestAnimationFrameID=null,this.triggerChange=n=>{this.onChange(n),this.previousURL=n},this.onPopState=()=>{this.triggerChange(window.location.href),this.requestAnimationFrameID!==null&&cancelAnimationFrame(this.requestAnimationFrameID),window.removeEventListener("click",this.detectSPARouteChange,!0)},this.detectSPARouteChange=()=>{const n=window.location.href;this.requestAnimationFrameID!==null&&cancelAnimationFrame(this.requestAnimationFrameID),this.requestAnimationFrameID=requestAnimationFrame(()=>{this.previousURL!==n&&this.triggerChange(n)})},this.onChange=e,this.previousURL=window.location.href}start(){this.intervalID===null&&(this.onChange(window.location.href),this.intervalID=setInterval(()=>{const e=window.location.href;this.previousURL!==e&&this.triggerChange(e)},250),window.addEventListener("popstate",this.onPopState,!0),window.addEventListener("click",this.detectSPARouteChange,!0))}stop(){window.removeEventListener("popstate",this.onPopState,!0),window.removeEventListener("click",this.detectSPARouteChange,!0),this.intervalID!==null&&(clearInterval(this.intervalID),this.intervalID=null)}}class nse{constructor(e,n=null,r){this.started=!1,this.urlChangeTrigger=null,this.id=e,this.targetUrl=n,this.onTrigger=r}start(){if(!this.started){if(this.started=!0,this.targetUrl==null){Re.debug("SmartLauncher : Condition 'page load' with no url, triggering immediately.",{id:this.id}),this.onTrigger();return}Re.debug("SmartLauncher : Condition 'page load' with url, waiting for condition to be met",{url:this.targetUrl,id:this.id}),this.urlChangeTrigger=new kA(e=>{typeof e=="string"&&MA(e,this.targetUrl)&&(Re.debug("SmartLauncher : Condition 'page load' with url met, triggering.",{url:this.targetUrl,id:this.id}),this.onTrigger())}),this.urlChangeTrigger.start()}}setTrigger(e){this.onTrigger=e}stop(){this.started=!1,this.urlChangeTrigger!==null&&this.urlChangeTrigger.stop()}}class yE{constructor({id:e,trigger_options:n,trigger_type:r},i,o=null){this.started=!1,this.targetSearchIntervalInMilliseconds=1e3,this.finderAbortController=null,this.target=null,this.id=e,this.trigger={type:r,target:Qi.parse(n)},this.onTrigger=i,this.algoSettings=o}async listenToElementAppearance(){try{this.target=await this.findTarget(),this.target!==null&&this.started&&(this.onAppear(this.target),this.target.onDisappear(()=>{this.started&&(this.onDisappear(),Re.debug("SmartLauncher : Target element has disappeared, waiting to find it again",{id:this.id}),this.listenToElementAppearance())},!0,this.targetSearchIntervalInMilliseconds))}catch(e){Re.error(e,"An error occurred while trying to find the target of a smart launcher")}}start(){this.started||(this.started=!0,this.finderAbortController=new AbortController,this.listenToElementAppearance())}async findTarget(){if(this.trigger.target===null)return Re.info("SmartLauncher : No target to find",{id:this.id}),null;const{element:e}=await na.find(this.trigger.target,{signal:this.finderAbortController?.signal,optionsV1:{settings:this.algoSettings?.v1},optionsV3:this.algoSettings?.v3});return e}setTrigger(e){this.onTrigger=e}stop(){this.started=!1,this.finderAbortController?.abort(),this.target?.destroy()}onDisappear(){}run(){this.started&&this.onTrigger()}}class rse extends yE{constructor(){super(...arguments),this.removeListener=null}onAppear(e){this.cleanup(),Re.debug("SmartLauncher : Target element found, waiting for a click",{id:this.id}),this.removeListener=e.onClick(()=>{Re.debug("SmartLauncher : Target element clicked, triggering",{id:this.id}),this.run()},!0)}onDisappear(){this.cleanup()}stop(){super.stop(),this.cleanup()}cleanup(){this.removeListener!==null&&(this.removeListener(),this.removeListener=null)}}class ise extends yE{constructor(){super(...arguments),this.removeListener=null}onAppear(e){this.cleanup(),Re.debug("SmartLauncher : Target element found, waiting for a focus",{id:this.id}),this.removeListener=e.onFocus(()=>{Re.debug("SmartLauncher : Target element focused, triggering",{id:this.id}),this.run()},!0)}onDisappear(){this.cleanup()}stop(){super.stop(),this.cleanup()}cleanup(){this.removeListener!==null&&(this.removeListener(),this.removeListener=null)}}class ose extends yE{onAppear(e){Re.debug("SmartLauncher : Target element found, triggering",{id:this.id}),this.run()}}class sse extends yE{onAppear(e){Re.debug("SmartLauncher : Target element found, waiting for it to disappear",{id:this.id})}onDisappear(){Re.debug("SmartLauncher : Target element has disappeared, triggering",{id:this.id}),this.run()}}function ase(t){return t.trigger_type==="page_load"}function lse(t){return["click","element_appears","element_disappears","focus"].includes(t.trigger_type)}class use{constructor(e,n,r=null){if(ase(e)){this.launcher=new nse(e.id,e.trigger_options,n);return}if(lse(e)){switch(e.trigger_type){case"click":this.launcher=new rse(e,n,r);break;case"focus":this.launcher=new ise(e,n,r);break;case"element_appears":this.launcher=new ose(e,n,r);break;case"element_disappears":this.launcher=new sse(e,n,r);break}return}throw new Error("SmartLauncher: Invalid trigger type")}get id(){return this.launcher.id}get started(){return this.launcher.started}setTrigger(e){Re.debug("SmartLauncher : setting trigger",{id:this.launcher.id}),this.launcher.setTrigger(e)}start(){Re.debug("SmartLauncher : starting",{id:this.launcher.id}),this.launcher.start()}stop(){Re.debug("SmartLauncher : stopping",{id:this.launcher.id}),this.launcher.stop()}}async function t_(t){return await Promise.all(t.map(async e=>{try{return{status:"fulfilled",value:await e}}catch(n){return{status:"rejected",reason:n}}}))}function cse(){const{currentLanguage:t}=Gi(),e=Za(),n=Qu();return xe.useCallback(async o=>n.fetchQuery({queryKey:["smart-launcher",o,{language:t}],queryFn:async()=>e(`${Ii("API_URL")}/v3/smart-launcher/${o}?lang=${t}`,{method:"GET"}).then(l=>{if(l.status!==200)throw new Eu({expected:200,received:l.status});return i(typeof l.body!="string"?l.body:JSON.parse(l.body))}).catch(l=>{throw Re.error(l,`An error occurred while fetching SmartLauncher with id (${o})`),l})}),[e,t,n]);function i({triggers:o,...l}){return{...l,trigger_type:PD(o[0]),trigger_options:MD(o[0])}}}function fse(){const t=vv(),{playGuide:e}=rp(),n=Jb(),{addPopup:r}=vb(),i=Wa();return xe.useCallback(l=>{i.triggerSmartLauncher({toolId:l.tool_legacy_id,launcherId:l.id}),Re.trace("SmartLauncher / Trigger",{id:l.id}),l.guide_id!==null?e(l.guide_id,{startAtStep:l.step_key?c=>c.step_key===l.step_key:null}).catch(Re.error):n(l.news_id.toString()).then(c=>{c!==null&&(t(c),i.autoDisplayNews({newsId:c.id,toolId:c.tool_id}))}).catch(c=>{let f="";c instanceof Error&&(f=c.toString()),r({key:"error_launcher",title:`${ns.t("error_loading_smartlauncher_content")}: ${f}`,isAlert:!0}),no.trigger("open-player")})},[i,e,n,t,r])}function dse(){const t=xe.useRef(new Map),{data:e,isLoading:n}=kJ(),r=cse(),i=fse(),{config:{host:o}}=zs(),l=ev();xe.useEffect(()=>()=>{t.current.forEach(({player:f})=>{f.stop()})},[]);const c=xe.useMemo(()=>e?.filter(f=>Pd(f.tool.client_side_conditions,o)&&IT(f))??[],[e,o]);return xe.useEffect(()=>{if(n)return;let f=!1;const g=t.current;return y(),h(),p(),()=>{f=!0};function y(){const E=Array.from(g.keys()),A=c.map(I=>I.id);E.filter(I=>!A.includes(I)).forEach(I=>{g.get(I)?.player.stop(),g.delete(I)})}function h(){g.forEach(({launcher:E,player:A})=>{A.setTrigger(()=>{i(E)})})}function p(){const E=c.filter(I=>!g.has(I.id));A(E).then(I=>{f||I.forEach(_)});async function A(I){return t_(I.map(async({id:C})=>await r(C))).then(C=>C.filter(hse).map(v=>v.value).filter(pse))}function _(I){try{const C=new use(I,()=>{i(I)},l);C.start(),g.set(I.id,{launcher:I,player:C})}catch(C){Re.error(C,"An error occurred while starting a SmartLauncher")}}}},[i,l,n,c,r]),{shouldSomeSmartLauncherBePlayed:c.length>0,isLoading:n}}function hse(t){return t.status==="fulfilled"}function pse(t){return t!==null}const gse="element_appears",mse="page_load";class yse{constructor(e,n,r="v1",i=null){this.beaconHandle=null,this.target=null,this.started=!1,this.unlisteners=[],this._onTrigger=()=>null,this._onRender=()=>null,this.algoSettings=i,this.container=e,this.launcher=n,this.beaconVersion=r,this.finderAbortController=new AbortController}start(){if(this.started)return;this.started=!0;const{trigger_type:e,trigger_options:n}=this.launcher;switch(e){case mse:if(n instanceof Qi)throw new Error("Cannot create a page trigger with a TargetAdapter");this.pageLoadLifeCycle(n);break;case gse:{const r=Qi.parse(n);r?this.elementAppearLifeCycle(r):Re.error("When creating a QuickLauncher with an element_appears trigger, the trigger_options should be valid");break}}}stop(){this.started&&(this.started=!1,this.beaconHandle?.destroy(),this.beaconHandle=null,this.target?.destroy(),this.target=null,this.unlisteners.slice(0).forEach(e=>{e()}))}onTrigger(e){this._onTrigger=e}getLauncherId(){return this.launcher.id}onRender(e){this._onRender=e}renderBeacon(){this.finderAbortController.abort(),this.finderAbortController=new AbortController;const{launcher:e}=this,n=this.getBeaconOptions();if(this.beaconHandle!=null)return null;if(this.isFixed()){const r=this.createFixedBeacon(n);this.beaconHandle=r,r.onClick(()=>{this._onTrigger()}),this._onRender()}else{const r=Qi.parse(e.display.element);if(!r)return null;na.find(r,{signal:this.finderAbortController.signal,optionsV1:{settings:this.algoSettings?.v1},optionsV3:this.algoSettings?.v3}).then(({element:i})=>{if(!this.started||this.beaconHandle!=null||i===null)return null;this.target=i,i.attachBeacon(n,this.beaconVersion).then(o=>{if(!this.started){o.destroy();return}this.beaconHandle=o,o.onClick(()=>{this._onTrigger()}),this._onRender()}).catch(o=>{Re.error(o,"Failed to attach beacon")})}).catch(i=>{Re.error(i,"An error occurred while rendering the quick launcher, it will not be displayed.")})}return null}createFixedBeacon(e){if(this.beaconVersion==="v2"){const n=v1(null,{...e,position:this.launcher.display.position});return{onClick:r=>n.onClick(r),onMouseEnter:r=>n.onMouseEnter(r),onMouseLeave:r=>n.onMouseLeave(r),destroy:()=>{n.unmount()},getTarget:()=>n.element instanceof Element?n.element:null}}else{const n=m1({container:this.container,target:null,position:this.launcher.display.position,options:e});return n.render(),{onClick:r=>n.onClick(r),onMouseEnter:r=>n.onMouseEnter(r),onMouseLeave:r=>n.onMouseLeave(r),destroy:()=>{n.unmount()},getTarget:()=>n.element instanceof Element?n.element:null}}}removeBeacon(){this.beaconHandle?.destroy(),this.beaconHandle=null,this.target?.destroy(),this.target=null,this.finderAbortController.abort()}getBeaconOptions(){const{launcher:e}=this;return{label:e.label,icon:e.display.icon,size:e.display.size,color:e.display.background_color,text_color:e.display.text_color,position:e.display.position,z_index:e.display.z_index,offset:{x:0,y:0}}}isFixed(){return this.launcher.display.mode==="page"}pageLoadLifeCycle(e){if(e!=null&&e.length>0){const n=new kA(r=>{if(typeof r=="string"&&MA(r,e)){const i=r?.includes("dynamics.com")?1200:0;setTimeout(()=>{this.renderBeacon()},i)}else this.removeBeacon()});n.start(),this.unlisteners.push(()=>{n.stop()})}else this.renderBeacon()}elementAppearLifeCycle(e){const n=new tp(e,this.algoSettings,{onAppear:()=>{this.renderBeacon()},onDisappear:()=>{this.removeBeacon()}});this.unlisteners.push(()=>{n.stop()}),n.start()}}function vse(t,e,n=null,r="v1"){return new yse(t,e,r,n)}function _se(t){return{...t,z_index:t.z_index??n1}}function bse(){const{currentLanguage:t}=Gi(),e=Za(),n=Qu();return xe.useCallback(async o=>n.fetchQuery({queryKey:["quick-launcher",o,{language:t}],queryFn:async()=>e(`${Ii("API_URL")}/v3/quick-launcher/${o}?lang=${t}`,{method:"GET"}).then(l=>{if(l.status!==200)throw new Eu({expected:200,received:l.status});return i(typeof l.body!="string"?l.body:JSON.parse(l.body))}).catch(l=>{throw Re.error(l,`An error occurred while fetching QuickLauncher with id (${o})`),l})}),[e,t,n]);function i(o){return{...o,trigger_type:PD(o.triggers[0]),trigger_options:MD(o.triggers[0]),display:_se(o.display)}}}function Ese(){const t=Wa(),e=qh(),n=vv(),{playGuide:r}=rp(),i=Jb(),o=bse(),{addPopup:l}=vb(),c=ev(),f=wO();return xe.useCallback(async y=>{const h=await o(y);if(h==null)throw new Error(`No QuickLauncher found with id ${y}`);const p=vse(e,h,c,f);return p.onTrigger(()=>{t.triggerQuickLauncher({toolId:h.tool_legacy_id,launcherId:h.id}),Re.trace("QuickLauncher / Trigger",{id:h.id}),h.guide_id!==null?r(h.guide_id,{startAtStep:h.step_key?E=>E.step_key===h.step_key:null}).catch(Re.error):i(h.news_id).then(E=>{n(E),t.autoDisplayNews({newsId:E.id,toolId:E.tool_id})}).catch(E=>{let A="";E instanceof Error&&(A=E.toString()),l({key:"error_launcher",title:`${ns.t("error_loading_quicklauncher_content")}: ${A}`,isAlert:!0}),no.trigger("open-player")})}),p.start(),p},[e,c,o,t,r,i,n,l,f])}function wse(){const{data:t,isLoading:e}=UJ(),[n,r]=xe.useState([]),i=Ese(),{config:{host:o}}=zs(),l=xe.useCallback(async()=>(await t_(t?.filter(g=>Sse(g,o)).map(async g=>i(g.id))??[])).filter(Tse).map(g=>g.value),[i,t,o]),c=xe.useCallback(()=>{r(f=>(f.forEach(g=>{g.stop()}),[]))},[]);return xe.useEffect(()=>(l().then(r),()=>{c()}),[l,c]),{launchers:n,isLoading:e}}function Tse(t){return t.status==="fulfilled"}function Sse(t,e){return Pd(t.tool.client_side_conditions,e)}const Ase=(t,e)=>{const{userId:n}=ms(),r=Za(),{data:i,isLoading:o}=py({enabled:!!n&&e,queryKey:["library",t,n],queryFn:async()=>r(`${Ii("PLAYER_URL")}/api/library?host=${encodeURIComponent(t)}`,{method:"GET"}).then(f=>f.body).catch(f=>{throw Re.error(f,"An error occurred while fetching the library"),f})}),l=i?.rootContents??[],c=i?.sections??[];return{libraryRootContents:l,librarySections:c,isLoading:o}},Xk=bn.object({id:bn.string(),rank:bn.number(),content_target_id:bn.number(),published_locales:bn.array(bn.string()),company_id:bn.number(),project_id:bn.number(),path:bn.string(),created_at:bn.string(),updated_at:bn.string(),locale:bn.string(),title:bn.string(),guides:bn.array(bn.object({id:bn.number(),rank:bn.number(),locale:bn.string(),title:bn.string()}))}).extend({children:bn.lazy(()=>Xk.array())}),Ise=bn.object({content:Xk.array()}),Cse=()=>{const t=Za();return xe.useCallback(async(n,r)=>{const i=await t(`${Ii("API_URL")}/v3/content-target/${n}/section?lang=${r}`,{method:"GET"});if(i.status!==Pg.OK)throw new Eu({expected:Pg.OK,received:i.status});const{content:o}=Ise.parse(i.body);return o},[t])};function Rse(t){return t.guides.length>=1}const xse=()=>{const t=Cse();return{fetchSections:xe.useCallback(async({contentTargetsIds:n,language:r})=>{const i=n.map(async f=>t(f,r)),o=await t_(i),l=n.filter((f,g)=>o[g].status==="rejected");return l.length>0&&Re.error("Failed to fetch sections",{failedContentTargetIds:l}),o.filter(f=>f.status==="fulfilled").map(f=>f.value).flat().filter(Rse)},[t])}};function Nse(t){const e=new Map,n=new Set;return t.forEach(r=>{const i=r.title?.trim().toUpperCase()||r.id,o=e.get(i)??{...r,guides:[]};e.has(i)?Re.debug("Section already seen",{sectionKey:i}):e.set(i,o),r.guides.forEach(l=>{const c=l.id;n.has(c)?Re.debug("Guide already seen",{guideKey:c}):(n.add(c),o.guides.push(l))})}),Array.from(e.values())}function Ose(t){const e=(n,r)=>n-r;return t.sort(e).join("-")}const Lse=(t=>e=>{const{userId:n}=ms(),{fetchSections:r}=xse(),{currentLanguage:i}=Gi(),{data:o,isLoading:l}=py({queryKey:["sections",n,i,Ose(e)],enabled:!!n,queryFn:async()=>{Re.debug("Fetching sections with guides",{userId:n,contentTargetsIds:e,currentLanguage:i});try{const c=await r({contentTargetsIds:e,language:i});Re.debug("Fetched sections and guides successfully",{sections:c.map(g=>({id:g.id,guides:g.guides.map(y=>y.id)}))});const f=Nse(c);return t?t(f):f}catch(c){throw Re.error(c,"An error occurred while fetching the sections"),c}}});return xe.useMemo(()=>({sections:o??[],isLoading:l}),[o,l])})();let FA=!1;function Dse(){FA=!0,ts()&&Ul.runtime.sendMessage({action:"EXECUTE_LL_CROSS"})}function Pse(){FA=!1}function Mse(){return FA}function kse(){const t=Wa(),e=za(),n=P1(),r=IZ();xe.useEffect(()=>{n!==void 0&&nv("company",Object.entries(n.variables).map(([i,o])=>({name:i,value:o})))},[n,t]),xe.useEffect(()=>{e!==void 0&&nv("project",Object.entries(e.variables).map(([i,o])=>({name:i,value:o})))},[e,t]),xe.useEffect(()=>{r!==void 0&&nv("global",[{name:"user_id",value:r.user_id},{name:"name",value:r.user_name},{name:"email",value:r.user_email}])},[r,t])}function Fse(){const t=Wa(),{data:e}=D1(),n=xe.useRef(!1);xe.useEffect(()=>{n.current||!e||(e?.forEach(r=>{t.initPlayer({toolId:r.id})}),n.current=!0)},[e,t])}function $se(t){return{...t,beacon:{...t.beacon,element:Qi.parse(t.beacon.element)}}}function Use(){const{currentLanguage:t}=Gi(),e=Za(),n=Qu();return xe.useCallback(async o=>{const l=await n.fetchQuery({queryKey:["informational-tooltip",o,{language:t}],queryFn:async()=>e(`${Ii("API_URL")}/v3/informational-tooltip/${o}?lang=${t}&cb=1`,{method:"GET"}).then(c=>{if(c.status!==200)throw new Eu({expected:200,received:c.status});return typeof c.body!="string"?c.body:JSON.parse(c.body)}).catch(c=>{throw Re.error(c,`An error occurred while fetching Informator with id (${o})`),c})});return i(l)},[e,t,n]);function i(o){return{...o,enable_triggers:o.enable_triggers.map(l=>l.options.event!=="loaded"?{...l,options:{...l.options,path:Qi.parse(l.options.path)}}:l),disable_triggers:o.disable_triggers.map(l=>({...l,options:{...l.options,path:Qi.parse(l.options.path)}})),display:$se(o.display),published_locales:o.published_locales}}}class $A{constructor(e,n){this.urlChangeTrigger=null,this.listenPageCondition=({onConditionOn:r,onConditionOff:i})=>{if(this.conditionPageUrl==="none"){r();return}this.urlChangeTrigger=new kA(o=>{this.conditionPageUrl==="is_url"?typeof o=="string"&&this.page!==null&&tse(o,this.page)?r():i():this.conditionPageUrl==="url_contains"&&(typeof o=="string"&&this.page!==null&&MA(o,this.page)?r():i())}),this.urlChangeTrigger.start()},this.conditionPageUrl=e,this.page=n}stop(){this.urlChangeTrigger?.stop()}}class Bse extends $A{start({onTriggerOn:e,onTriggerOff:n}){this.listenPageCondition({onConditionOn:e,onConditionOff:n})}}class Zse extends $A{constructor(e,n,r,i){super(e,n),this.appearTrigger=null,this.onClickUnlistener=null,this.stop=()=>{super.stop(),this.appearTrigger?.stop(),this.resetClickUnlistener()},this.triggerOption=r,this.algoSettings=i}start({onTriggerOn:e}){this.listenPageCondition({onConditionOn:()=>{this.appearTrigger?.stop(),this.appearTrigger=new tp(this.triggerOption,this.algoSettings,{onAppear:n=>{this.onClickUnlistener=n.onClick(()=>{e()},!1)},onDisappear:()=>{this.resetClickUnlistener()}}),this.appearTrigger.start()},onConditionOff:()=>{this.appearTrigger?.stop(),this.resetClickUnlistener()}})}resetClickUnlistener(){this.onClickUnlistener!==null&&(this.onClickUnlistener(),this.onClickUnlistener=null)}}class Jk extends $A{constructor(e,n,r,i){super(e,n),this.appearTrigger=null,this.stop=()=>{super.stop(),this.appearTrigger?.stop()},this.triggerOption=r,this.algoSettings=i}start({onTriggerOn:e,onTriggerOff:n}){this.listenPageCondition({onConditionOn:()=>{this.appearTrigger?.stop(),this.appearTrigger=new tp(this.triggerOption,this.algoSettings,{onAppear:e,onDisappear:n}),this.appearTrigger.start()},onConditionOff:()=>{this.appearTrigger?.stop(),n()}})}}class jse{constructor(e,n){this.appearTrigger=null,this.stop=()=>{this.appearTrigger?.stop()},this.triggerOption=e,this.algoSettings=n}start({onTriggerOn:e,onTriggerOff:n}){this.appearTrigger=new tp(this.triggerOption,this.algoSettings,{onAppear:e,onDisappear:n}),this.appearTrigger.start()}}class Vse{constructor(e,n){this.appearTrigger=null,this.onClickUnlistener=null,this.stop=()=>{this.appearTrigger?.stop(),this.onClickUnlistener?.()},this.algoSettings=n,this.triggerOption=e}start({onTriggerOn:e}){this.appearTrigger=new tp(this.triggerOption,this.algoSettings,{onAppear:n=>{this.onClickUnlistener=n.onClick(()=>{e()},!1)}}),this.appearTrigger.start()}}class e3{constructor(e,n,r=null){this.target=null,this.onTriggerEvent=i=>null,this.isInformator=()=>"enable_triggers"in this.tooltip,this.isValidator=()=>!("enable_triggers"in this.tooltip),this.container=e,this.tooltip=n,this.finderAbortController=new AbortController,this.algoSettings=r}async findTooltip(){this.finderAbortController=new AbortController;const e=this.isInformator()?this.tooltip.display.beacon.element:this.isValidator()?this.tooltip.display.bubble.element:null;if(e===null)throw new Error("Logical error: paths null");const{element:n}=await na.find(e,{signal:this.finderAbortController.signal,optionsV1:{settings:this.algoSettings?.v1},optionsV3:this.algoSettings?.v3}).catch(r=>(Re.error(r,"Error while searching for element"),{element:null}));return this.finderAbortController.signal.addEventListener("abort",()=>{n?.destroy()}),n}get id(){return this.tooltip.id}stop(){this.finderAbortController.abort()}}var lc=(t=>(t.CLICK="click_beacon",t.HOVER_BEACON="hover_beacon",t.FOCUS_BEACON_ELEMENT="focus_beacon_element",t.HOVER_BEACON_ELEMENT="hover_beacon_element",t.INPUT_BEACON_ELEMENT="input_text_beacon_element",t))(lc||{});const t3=t=>t.length===0?null:t[0].pattern,n3=t=>t.length===0?"none":t[0].type==="equals"?"is_url":t[0].type==="contains"?"url_contains":"none";var r3=(t=>(t.DOM="dom",t.PAGE="page",t))(r3||{}),i3=(t=>(t.LOADED="loaded",t))(i3||{}),n_=(t=>(t.CLICKED="element_clicked",t.APPEARED="element_appeared",t.DISAPPEARED="element_disappeared",t.FOCUSED="element_focused",t))(n_||{});const zse={xs:"very_small",s:"small",m:"medium",l:"large"},o3={top:"above",bottom:"below",left:"left",right:"right",centered:"page_center"};class Hse extends e3{constructor(e,n,r="v1",i=null){super(e,n,i),this.stopTrigger=null,this.started=!1,this.beaconHandle=null,this.beaconIsDisplayed=!1,this.bubble=null,this.unlisteners=[],this.urlListenerRemover=[],this.beaconVersion=r;const o=n.enable_triggers[0]?.options.event,l=n.enable_triggers[0]?.type===r3.DOM?n.enable_triggers[0]?.options?.path:null,c=n3(n.client_side_conditions),f=t3(n.client_side_conditions);switch(o){case i3.LOADED:this.startTrigger=new Bse(c,f);break;case n_.CLICKED:if(l==null)throw new Error("Path must be defined");this.startTrigger=new Zse(c,f,l,this.algoSettings);break;case n_.APPEARED:if(l==null)throw new Error("Path must be defined");this.startTrigger=new Jk(c,f,l,this.algoSettings);break;default:throw new Error("TooltipsGroup : start trigger must be defined : onload, click or appear")}const g=n.disable_triggers[0]?.options.event,y=n.disable_triggers[0]?.options?.path;if(y!=null)switch(g){case n_.APPEARED:this.stopTrigger=new jse(y,this.algoSettings);break;case n_.CLICKED:this.stopTrigger=new Vse(y,this.algoSettings);break}}start(){this.started||(this.started=!0,this.startTrigger.start({onTriggerOn:()=>{this.findAndDisplayInformator(),this.stopTrigger?.start({onTriggerOn:()=>{this.hideBeacon()},onTriggerOff:()=>{this.findAndDisplayInformator()}})},onTriggerOff:()=>{this.hideBeacon(),this.stopTrigger?.stop()}}))}stop(){super.stop(),this.started=!1,this.stopTrigger?.stop(),this.startTrigger.stop(),this.hideBeacon()}setOnTriggerEvent(e){this.onTriggerEvent=e}hideBeacon(){this.finderAbortController.abort(),this.beaconHandle!==null&&(this.beaconHandle.destroy(),this.beaconHandle=null),this.hideBubble(),this.beaconIsDisplayed=!1,this.unlisteners.splice(0).forEach(e=>{e()})}findAndDisplayInformator(){this.started&&this.findTooltip().then(e=>{if(this.beaconIsDisplayed||!this.started||e===null)return;this.target=e,this.unlisteners.push(e.onRemove(()=>{this.hideBeacon(),this.findAndDisplayInformator()}));const n={label:this.tooltip.beacon_label,icon:this.tooltip.display.beacon.icon,size:zse[this.tooltip.display.beacon.size],color:this.tooltip.display.beacon.color,text_color:this.tooltip.display.beacon.text_color,position:this.tooltip.display.beacon.position.direction,offset:this.tooltip.display.beacon.position.anchor_point.offset,z_index:this.tooltip.display.z_index};e.attachBeacon(n,this.beaconVersion,this.container).then(r=>{this.beaconHandle=r,this.beaconIsDisplayed=!0,this.setupBubbleTriggers()}).catch(r=>{Re.error("Failed to attach informator beacon",r)})})}showBubble(){return this.beaconHandle===null||(this.onTriggerEvent(this.tooltip),this.bubble===null&&(this.tooltip.display.bubble.position.direction==="centered"?(this.bubble=new Q1(this.container),this.bubble.content=this.tooltip.bubble_body??"",this.bubble.width=this.tooltip.display.bubble.width):(this.bubble=new nT(this.container),this.bubble.content=this.tooltip.bubble_body??"",this.bubble.target=this.beaconHandle.getTarget(),this.bubble.position=o3[this.tooltip.display.bubble.position.direction],this.bubble.width=this.tooltip.display.bubble.width,this.tooltip.display.beacon.element_highlight_color!==null&&this.target&&(this.beaconVersion==="v2"?this.target.attachHighlight({color:this.tooltip.display.beacon.element_highlight_color,type:"outset"}):(this.bubble.highlightType="outset",this.bubble.highlightTarget=this.target,this.bubble.highlightColor=this.tooltip.display.beacon.element_highlight_color)),this.bubble.onClose=()=>{this.hideBubble()})),this.bubble.show()),null}hideBubble(){this.bubble!==null&&(this.bubble.remove(),this.bubble=null),this.beaconVersion==="v2"&&this.target&&this.target.detachHighlight()}toggleBubble(){this.bubble?._shown==null?this.showBubble():this.hideBubble()}setupBubbleTriggers(){if(!(this.target===null||this.beaconHandle===null))switch(this.tooltip.display.bubble.triggers[0]){case lc.CLICK:this.beaconHandle.onClick(()=>{this.toggleBubble()});break;case lc.HOVER_BEACON:this.beaconHandle.onMouseEnter(()=>{this.showBubble()}),this.beaconHandle.onMouseLeave(()=>{this.hideBubble()});break;case lc.FOCUS_BEACON_ELEMENT:{const e=this.target.onFocus(()=>{this.showBubble()},!1);typeof e=="function"&&this.unlisteners.push(e);const n=this.target.onBlur(()=>{this.hideBubble()},!1);typeof n=="function"&&this.unlisteners.push(n);break}case lc.HOVER_BEACON_ELEMENT:{const e=this.target.onHover(()=>{this.showBubble()},!1);typeof e=="function"&&this.unlisteners.push(e);const n=this.target.onMouseLeave(()=>{this.hideBubble()},!1);typeof n=="function"&&this.unlisteners.push(n);break}case lc.INPUT_BEACON_ELEMENT:{const e=this.target.onInput(()=>{this.showBubble()},!1);typeof e=="function"&&this.unlisteners.push(e);break}}}}function Gse(t,e=200){let n;return(...r)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...r),n=null},e)}}var vE={exports:{}},qse=vE.exports,s3;function Wse(){return s3||(s3=1,(function(t,e){(function(n,r){t.exports=r()})(qse,function(){return(function(n){function r(o){if(i[o])return i[o].exports;var l=i[o]={exports:{},id:o,loaded:!1};return n[o].call(l.exports,l,l.exports,r),l.loaded=!0,l.exports}var i={};return r.m=n,r.c=i,r.p="",r(0)})([function(n,r,i){n.exports=i(1)},function(n,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default="A-Za-z-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------"}])})})(vE)),vE.exports}var Kse=Wse();const UA=Lf(Kse),Yse={is_not_empty:t=>t.length>0,is_email_address:t=>/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t),is_numeric:t=>/^[0-9]+(\.[0-9]+)?$/.test(t),is_alpha:t=>new RegExp(`^[${UA} ]+$`).test(t),is_alpha_numeric:t=>{if(t.length===0)return!1;const e=new RegExp(`[${UA}]`).test(t),n=/\d/.test(t),r=new RegExp(`^[${UA}\\d ]+$`).test(t);return e&&n&&r},matches_regex:(t,e)=>new RegExp(e.pattern).test(t),is_numeric_between:(t,e)=>{const n=parseFloat(t),{min_threshold:r,max_threshold:i}=e;return isNaN(n)?!1:n>=r&&n<=i},has_min_length:(t,e)=>{const n=e.threshold;return isNaN(n)?!1:t.length>=n},has_max_length:(t,e)=>{const n=e.threshold;return isNaN(n)?!1:t.length<=n},has_exact_length:(t,e)=>t.length===Number(e.expected_length),has_one_lowercase:t=>t.toLowerCase()!==t,is_lowercase:t=>{for(let e=0;e<t.length;e++)if(t.charAt(e).toLowerCase()!==t.charAt(e))return!1;return!0},has_one_uppercase:t=>t.toUpperCase()!==t,is_uppercase:t=>{for(let e=0;e<t.length;e++)if(t.charAt(e).toUpperCase()!==t.charAt(e))return!1;return!0},has_one_special_char:t=>/[-!$%^&*()_+|~=`{}[\]:";'<>?,./\\@]/.test(t),has_no_special_char:t=>/^[^-!$%^&*()_+|~=`{}[\]:";'<>?,./\\@]+$/.test(t),is_enum(t,e){return e.values.includes(t)},is_equal(t,e){return t===e.value},is_not_equal(t,e){return t!==e.value},contains(t,e){return t.includes(e.value)},starts_with:(t,e)=>t.indexOf(e.value)===0,ends_with:(t,e)=>t.endsWith(e.value)};class Qse extends e3{constructor(e,n,r=null){super(e,n,r),this.bubble=null,this.unlisteners=[],this.started=!1,this.inputIsFound=!1,this.urlListenerRemover=[];const i=n3(n.client_side_conditions),o=t3(n.client_side_conditions);this.startTrigger=new Jk(i,o,n.display.bubble.element,this.algoSettings)}start(){this.started||(this.started=!0,this.startTrigger.start({onTriggerOn:()=>{this.findAndListenInputValidator().catch(Re.error)},onTriggerOff:()=>{this.resetInputAndHideBubble()}}))}stop(){super.stop(),this.started=!1,this.startTrigger.stop(),this.resetInputAndHideBubble()}setOnTriggerEvent(e){this.onTriggerEvent=e}resetInputAndHideBubble(){this.finderAbortController.abort(),this.target=null,this.bubble!=null&&this.bubble.remove(),this.unlisteners.splice(0).forEach(e=>{e()})}async findAndListenInputValidator(){!this.started||this.target!==null||this.tooltip==null||this.findTooltip().then(e=>{this.target=e,this.listenInput().catch(Re.error)})}async listenInput(){if(this.target!==null){const e=this.target.onInput(Gse(r=>{this.validate(r??"")}),!1);typeof e=="function"&&this.unlisteners.push(e);const n=this.target?.onBlur(()=>{this.target!==null&&this.target.getText().then(r=>{this.validate(r??"")})},!1);typeof n=="function"&&this.unlisteners.push(n)}}validate(e){const n=[];this.tooltip?.rules.forEach(r=>{const i=Yse[r.type];(typeof i=="function"&&!i(e,r.configuration)||typeof i!="function")&&n.push(r.error_message)}),n.length>0?this.showBubble(n):this.bubble!==null&&(this.bubble.remove(),this.bubble=null)}showBubble(e){let n="";if(e.length===1?n=e[0]:n=`
        <ul>
          ${e.map(r=>`<li>${r}</li>`).join("")}
        </ul>
      `,this.bubble!==null){this.bubble.content=n;return}if(this.onTriggerEvent(this.tooltip),this.target===null)throw new Error("Target is null");this.bubble=new nT(this.container),this.bubble.isValidator=!0,this.bubble.target=this.target,this.bubble.content=n,this.bubble.width=this.tooltip.display.bubble.width,this.bubble.position=o3[this.tooltip.display.bubble.position.direction],this.bubble.arrowEnabled=!0,this.tooltip.display.bubble.element_highlight_color&&(this.bubble.highlightType="outset",this.bubble.highlightColor=this.tooltip.display.bubble.element_highlight_color),this.bubble.show(),this.target.focus().catch(r=>{Re.warn(r,"Error focusing target after showing validator bubble")})}}function Xse(t,e,n=null,r="v1"){return new Hse(t,e,r,n)}function Jse(){const t=Wa(),e=qh(),n=Use(),r=ev(),i=ml(),o=wO();return xe.useCallback(async c=>{const f=await n(c);if(f==null)throw new Error(`No Informator found with id ${c}`);const g=Xse(e,f,r,o),y=h=>{const p=i.find(A=>A.uuid===h.tool_id);if(!p)return;const E={toolId:p.id,tooltipId:h.id};switch(h.display.bubble.triggers[0]){case lc.CLICK:t.clickTooltip(E);break;case lc.HOVER_BEACON:t.hoverTooltip(E);break;case lc.INPUT_BEACON_ELEMENT:t.changeTooltipTarget(E);break;case lc.FOCUS_BEACON_ELEMENT:t.focusTooltipTarget(E);break;case lc.HOVER_BEACON_ELEMENT:t.hoverTooltipTarget(E);break}};return g.setOnTriggerEvent(()=>{y(f)}),g},[n,e,r,i,t,o])}function eae(){const t=xe.useRef(new Map),{data:e,isLoading:n}=FJ(),r=Jse(),i=ml(),{config:{host:o}}=zs(),{currentLanguage:l}=Gi(),c=xe.useMemo(()=>{return(e??[]).filter(f).filter(g);function f(y){const h=i.find(p=>p.uuid===y.tool_id);return h?Pd(h.client_side_conditions,o):!1}function g(y){return y.published_locales.includes(l)}},[e,i,o,l]);return xe.useEffect(()=>{if(n||!e)return;let f=!1;const g=t.current,y=c.map(async p=>r(p.id));async function h(p){return t_(p).then(E=>E.filter(tae).map(A=>A.value).filter(nae))}if(!f)return h(y).then(p=>{f||p.forEach(E=>{E.start(),g.set(E.id,{informatorController:E})})}).catch(Re.error),()=>{f=!0,g.forEach(({informatorController:p})=>{p.stop()}),t.current=new Map}},[n,r,e,c]),{shortInformators:e,isLoading:n}}function tae(t){return t.status==="fulfilled"}function nae(t){return t!==null}function rae(t){return{...t,bubble:{...t.bubble,element:Qi.parse(t.bubble.element)}}}function iae(){const{currentLanguage:t}=Gi(),e=Za(),n=Qu();return xe.useCallback(async o=>{const l=await n.fetchQuery({queryKey:["validation-tooltip",o,{language:t}],queryFn:async()=>e(`${Ii("API_URL")}/v3/validation-tooltip/${o}?lang=${t}`,{method:"GET"}).then(c=>{if(c.status!==200)throw new Eu({expected:200,received:c.status});return typeof c.body!="string"?c.body:JSON.parse(c.body)}).catch(c=>{throw Re.error(c,`An error occurred while fetching Validator with id (${o})`),c})});return i(l)},[e,t,n]);function i(o){return{...o,display:rae(o.display)}}}function oae(){const t=Wa(),e=qh(),n=iae(),r=ev(),i=ml();return xe.useCallback(async l=>{const c=await n(l);if(c==null)throw new Error(`No Validator found with id ${l}`);const f=new Qse(e,c,r),g=y=>{const h=i.find(p=>p.uuid===y.tool_id);h&&t.triggerValidator({toolId:h.id,validatorId:y.id})};return f.setOnTriggerEvent(()=>{g(c)}),f},[n,e,r,i,t])}function sae(){const t=xe.useRef(new Map),{data:e,isLoading:n}=$J(),r=oae(),i=ml(),{config:{host:o}}=zs(),{currentLanguage:l}=Gi(),c=xe.useMemo(()=>{return(e??[]).filter(f).filter(g);function f(y){const h=i.find(p=>p.uuid===y.tool_id);return h?Pd(h.client_side_conditions,o):!1}function g(y){return y.published_locales.includes(l)}},[e,i,o,l]);return xe.useEffect(()=>{if(n||!e)return;let f=!1;const g=t.current,y=c.map(async p=>r(p.id));async function h(p){return t_(p).then(E=>E.filter(aae).map(A=>A.value).filter(lae))}if(!f)return h(y).then(p=>{f||p.forEach(E=>{E.start(),g.set(E.id,{player:E})})}).catch(Re.error),()=>{f=!0,g.forEach(({player:p})=>{p.stop()}),t.current=new Map}},[n,r,e,c]),{shortValidators:e,isLoading:n}}function aae(t){return t.status==="fulfilled"}function lae(t){return t!==null}function uae(t,e){return{session_id:t.sessionId,url:t.url,tool_id:t.toolId,page_session_id:t.pageSessionId,timestamp:Date.now(),company_id:e.companyUuid,project_id:e.activeProjectId,user_id:e.userUuid,tag_ids:e.tagUuids,profile_ids:e.profileUuids}}function cae(){const{isAuthenticated:t,impersonatorUuid:e,userUuid:n}=ms(),{data:r}=Jy(),i=za(),o=r?.analyze.ingressToken??null,l=xe.useMemo(()=>{const E=e??n;if(!(o===null||r===void 0||!t||!i||!E))return{token:o,activeProjectId:i.id,profileUuids:r.player.profile_uuids,tagUuids:r.player.tag_attribute_uuids,userUuid:E,companyUuid:r.player.company.id}},[o,r,t,e,n,i]),c=Ii("ANALYSE_URL");xe.useEffect(()=>{c==null&&Re.warn("No LemonAnalytics URL configured, analytics events will not be sent.")},[c]);const f=xe.useCallback(async E=>{if(l==null||c==null)return;const A=E.map(I=>uae(I,l)),_=await Dd(`${c}/v1/event/visit-url`,{method:"POST",headers:{"Content-Type":"application/x-ndjson",Authorization:`Bearer ${l.token}`},body:A.map(I=>JSON.stringify(I)).join(`
`)});if(_.status!==204)throw new Error(`Unexpected status code ${_.status} while sending events`)},[l,c]),g=xe.useCallback(E=>{Re.trace(`Successfully sent ${E.length} events to LemonAnalytics`)},[]),y=xe.useCallback(E=>{Re.error(E,"Error sending events to LemonAnalytics")},[]),{push:h}=mT({enabled:l!=null,postFn:f,onPost:g,onError:y}),p=xe.useCallback(async E=>{h(E)},[h]);return xe.useMemo(()=>({sendEvent:p}),[p])}const fae=10*1e3*60,dae=30*1e3*60,hae=5*1e3*60,pae=10*1e3;function gae(){const t=cae(),e=ml(),n=za(),r=xe.useRef(null),i=a3(),o=xe.useRef(Date.now()),{getSessionId:l}=mae(),{getPageSessionId:c}=yae(),f=xe.useRef(!0);xe.useEffect(()=>{if(!n?.config.analyze.enabled)return;return g(),C(),A(),()=>{y(),v(),_()};function g(){r.current===null&&(h(),r.current=setInterval(()=>{h()},pae))}function y(){h(),r.current&&(clearInterval(r.current),r.current=null)}function h(){const T=document.visibilityState==="visible"&&document.hasFocus()&&f.current,S=Date.now()<o.current+hae;!T||!S||e.forEach(O=>{t.sendEvent({toolId:O.uuid,url:i,pageSessionId:c(),sessionId:l()}).catch(Re.error)})}function p(){f.current=!0}function E(){f.current=!1}function A(){window.addEventListener("mousemove",I),window.addEventListener("keydown",I)}function _(){window.removeEventListener("mousemove",I),window.removeEventListener("keydown",I)}function I(){o.current=Date.now()}function C(){window.addEventListener("beforeunload",y),document.addEventListener("mouseleave",E),document.addEventListener("mouseenter",p)}function v(){window.removeEventListener("beforeunload",y),document.removeEventListener("mouseleave",E),document.removeEventListener("mouseenter",p)}},[e,i,n?.legacy_id,n?.config.analyze.enabled,l,c,t])}const a3=()=>{const[t,e]=xe.useState(window.location.href),n=xe.useRef(),r=za();return xe.useEffect(()=>{if(r?.config.analyze.enabled)return n.current=setInterval(()=>{const i=window.location.href;e(o=>o!==i?i:o)},1e3),()=>{n.current&&(clearInterval(n.current),n.current=void 0)}},[r?.legacy_id,r?.config.analyze.enabled]),t};function mae(){const t=xe.useCallback(()=>{localStorage.removeItem("page_session_analyse_uuid"),localStorage.removeItem("page_session_analyse_url")},[]);return{getSessionId:xe.useCallback(()=>{const n=localStorage.getItem("session_analyse_uuid"),r=localStorage.getItem("session_analyse_timestamps");if(n===null||r===null){const o=mv();return localStorage.setItem("session_analyse_uuid",o),localStorage.setItem("session_analyse_timestamps",Date.now().toString()),t(),o}const i=parseInt(r)+dae;if(Date.now()>i){const o=mv();return localStorage.setItem("session_analyse_uuid",o),localStorage.setItem("session_analyse_timestamps",Date.now().toString()),t(),o}return localStorage.setItem("session_analyse_timestamps",Date.now().toString()),n},[t])}}function yae(){const t=a3(),e=xe.useCallback(r=>{const i=mv();return localStorage.setItem("page_session_analyse_uuid",i),localStorage.setItem("page_session_analyse_url",r),localStorage.setItem("page_session_analyse_timestamps",Date.now().toString()),i},[]);return{getPageSessionId:xe.useCallback(()=>{const r=localStorage.getItem("page_session_analyse_timestamps"),i=localStorage.getItem("page_session_analyse_uuid"),o=localStorage.getItem("page_session_analyse_url");return i==null||o==null||r==null||o!==t||Date.now()>parseInt(r)+fae?e(t):(localStorage.setItem("page_session_analyse_timestamps",Date.now().toString()),i)},[e,t])}}function vae(t){const{config:e}=zs(),{visible:n=!0}=t,{playerPopInIsOpen:r,setPlayerPopInIsOpen:i}=yb(),{launcherPosition:o,setLauncherPositionAndCacheIt:l}=bL(),{stop:c,setPreventPlayerOpening:f}=rp();xe.useEffect(()=>(Dse(),Pse),[]);const g=xe.useRef(!1),y=xe.useRef(r),h=xe.useRef(null),p=za(),E=ml(),A=P1();Fse(),gae(),kse(),xe.useEffect(()=>{g.current||(ec.init(),D7(uY,{toolIDs:E.map(Pe=>Pe.uuid),useNativeBrowserAPI:A?.config.targeting.translation.use_native_browser_api??!1,provider:A?.config.targeting.translation.provider??null}),NK(bv.POST_INIT),g.current=!0)},[E,A]),xe.useEffect(()=>{y.current!==r&&(r?no.trigger("player-opened"):no.trigger("player-closed")),y.current=r},[r]),xe.useEffect(()=>()=>{c()},[c]),xe.useEffect(()=>{p?.config.prevent_player_opening!=null&&f(p.config.prevent_player_opening)},[p?.config.prevent_player_opening,f]);const{libraryRootContents:_,librarySections:I,isLoading:C}=Ase(e.host,p?.config.enable_project_library??!0),{shortInformators:v,isLoading:T}=eae(),{shortValidators:S,isLoading:O}=sae(),{shouldSomeSmartLauncherBePlayed:$,isLoading:V}=dse(),{launchers:B,isLoading:ne}=wse(),D=AZ(e.host),{sections:X,isLoading:ve}=Lse(D),{activeNews:ie,onNewsClose:ye,isLoading:Ne}=ese(),Me=!ve&&!Ne&&!O&&!T&&!V&&!ne&&!C&&p!==void 0,oe=X.some(Pe=>Pe.guides.length>0),Ce=$||oe||[ie,B,v,S,_,I].some(Pe=>Pe?.length!==0);xe.useEffect(()=>{if(Me){if(Me&&!Ce){Re.warn("Your user does not have any content to display on this tool, hiding the player");return}Re.debug("There is some content available, displaying the player"),no.trigger("logged-in")}},[Me,Ce]),Xoe({enabled:Me&&Ce});const{theme:Ye}=Kc(),et=xe.useMemo(()=>!n||Ye.shape==="hidden"?!1:Me&&Ce,[n,Ye.shape,Me,Ce]),Y=()=>{i(Pe=>!Pe)},Ee=ie?.filter(Pe=>rS(Pe)?iS(Pe):Pe.read_at===null).length??0;return et?pe.jsxs(pe.Fragment,{children:[pe.jsx(pL,{pushsCount:Ee,onClick:Y,ref:h,launcherZoneAndRatio:o,setLauncherZoneAndRatio:l}),pe.jsx(aL,{launcher:h,launcherZoneAndRatio:o,children:pe.jsx(Qoe,{newsList:ie??[],unreadNewsCount:Ee,sections:X,libraryRootContents:_??[],librarySections:I??[],onNewsClose:ye})})]}):null}const _ae=1e3*60*5,bae=new mF({defaultOptions:{queries:{staleTime:1/0,gcTime:1/0,refetchOnWindowFocus:!1,retry:!1}}});function Eae(t){const e=KF({namespace:t.config.namespace??void 0});return sW(),pe.jsx(YF,{children:pe.jsx(AO.Provider,{value:t.container,children:pe.jsx(Yq,{children:pe.jsx(Jq,{children:pe.jsx(X6,{config:t.config,children:pe.jsx(zF,{client:bae,persistOptions:{persister:e,maxAge:_ae},children:pe.jsx(qq,{children:pe.jsx(w$,{children:pe.jsx(LZ,{children:pe.jsx(zq,{children:pe.jsx(oL,{children:pe.jsx(Vj,{children:pe.jsx(Gq,{children:pe.jsx(aW,{fallback:pe.jsx(RK,{visible:t.visible}),children:pe.jsx(vae,{visible:t.visible})})})})})})})})})})})})})})})}let BA=null;async function wae(t){if(t.length===0)return!0;Re.debug("Checking start constraints",{startConstraints:t});const n=(await Promise.all(t.map(r=>typeof r=="function"?r():r))).filter(r=>!r);return Re.info("One or more start constraints were not met. Player will not start",{unmetStartConstraints:n}),n.length===0}class Tae{constructor(e){this.config=Bl,this.visible=!0,this.currentCheckPromise=null,this.reactRoot=void 0,this.container=e?.container??document.body,this.onStart=e?.onStart,this.onStop=e?.onStop,typeof Bl=="function"?(Re.debug("Client-specific configuration loader detected. Loading configuration..."),Bl().then(n=>{Re.debug("Client-specific configuration loaded",{clientSpecificConfig:n}),this.setAsync(n)}).catch(n=>{Re.error(n,"Error while loading the client-specific configuration. The player will not display correctly.")})):(Re.debug("Client-specific configuration detected",{clientSpecificConfig:Bl}),this.config=Bl)}start(e){return Re.info('Player "start" command received with the following configuration',{config:e}),this.startAsync(e),this}async startAsync(e={}){try{await this.mergeConfig(e),Re.debug("The input configuration is valid. The generated configuration is:",{config:this.config}),GR(this.config),await wae(this.config.startConstraints)&&(await this.onStart?.(this.config),this.render())}catch(n){Re.error(n,"Error while starting the player")}}stop(){no.trigger("stop-player"),Y5(),Re.trace("Player stopped"),this.onStop?.()}hide(){this.visible=!1,Re.trace("Player hidden"),this.render()}show(){this.visible=!0,Re.trace("Player shown"),this.render()}set(e){return Re.info('Player "set" command received with the following configuration',{config:e}),this.setAsync(e),this}async setAsync(e){try{await this.mergeConfig(e),Re.debug("The input configuration is valid. The generated configuration is:",{config:this.config}),GR(this.config),no.trigger("set-player",this.config),this.render()}catch(n){Re.error(n,"Error while updating the player configuration")}}async mergeConfig(e){if(this.currentCheckPromise!==null&&(this.config=await this.currentCheckPromise),typeof e!="object")throw new Error(`Error setting player configuration: Expected object as parameter, received: "{${typeof e}}"`);this.currentCheckPromise=G5({...this.config,...e}),this.config=await this.currentCheckPromise,this.currentCheckPromise=null}render(){const{container:e}=this;this.reactRoot===void 0&&(this.reactRoot=H_.createRoot(K5(e))),this.reactRoot.render(pe.jsx(Eae,{config:this.config,visible:this.visible,container:e}))}userKey(e){return new Xp(e)}enableDebug(e,n="lemonlearning-identity"){window.open(`${e}/debug?namespace=${n}`,"_blank"),window.open(`${e}/debug?namespace=${n}`,"_blank")}debug(){Re.warn("player.debug is deprecated, use window.changeLemonDebuggerLevel instead to change the debug level")}}const Sae=t=>(BA===null&&(BA=new Tae(t)),BA),Aae="lemonlearning-player-embed";async function _E(t,e={}){if(zI()){const n=await fetch(t,{method:"GET",headers:e});return{body:await n.json(),status:n.status,statusText:n.statusText,headers:Object.fromEntries(n.headers.entries())}}return await Ul.runtime.sendMessage({action:"BACKGROUND_FETCH_V2",data:{url:t,options:{method:"GET",headers:e}}})}async function Iae(t,e,n={}){if(zI()){const r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json",...n},body:e?JSON.stringify(e):void 0});return{body:await r.json(),status:r.status,statusText:r.statusText,headers:Object.fromEntries(r.headers.entries())}}return await Ul.runtime.sendMessage({action:"BACKGROUND_FETCH_V2",data:{url:t,options:{method:"POST",headers:{"Content-Type":"application/json",...n},body:e?JSON.stringify(e):void 0}}})}const Cae=Object.freeze(Object.defineProperty({__proto__:null,get:_E,post:Iae},Symbol.toStringTag,{value:"Module"}));function Rae(t){try{return Ps(Gs()).parse(JSON.parse(decodeURIComponent(t)))}catch(e){return Re.warn(e,"An error occurred while trying to parse the profiles from the data-attribute"),[]}}function xae(t){try{return Ps(jf({category:ki(),values:Ps(ki())})).parse(JSON.parse(decodeURIComponent(t)))}catch(e){return Re.warn(e,"An error occurred while trying to parse the tags from the data-attribute"),[]}}async function lm(t){return new Promise(e=>{const n=setInterval(()=>{const r=document.body.dataset[Nae(t)];r!==void 0&&r!==""&&(clearInterval(n),e(r))},100)})}function Nae(t){switch(t){case"projectKey":return"llProjectKey";case"name":return"llUsername";case"email":return"llUserEmail";case"profiles":return"llUserProfiles";case"tags":return"llUserTags"}}function sf(t){return typeof t=="string"&&(t==="programmatic_value"||t.includes("ValueResolver"))}const Oae=3600*1e3;async function ZA(){Re.debug("Getting the configuration");const t=await Ki.getItem("local:configurationCache");let e,n;try{if(t!=null&&typeof t=="string"){const o=JSON.parse(t);n=o.timestamp,e=o.configuration}}catch(o){Re.debug(o,{serialized:t},"A configuration was found in the cache, but an error occurred while parsing it, ignoring the cache")}const r=n==null||Date.now()-n>Oae;if(e!==void 0&&!r)return Re.debug({configuration:e,timestamp:n},"Using the cached configuration"),e;e!==void 0&&r&&Re.debug({configuration:e,timestamp:n},"A configuration was found in the cache, but it is expired, ignoring it");const i=await Dae();return Ki.setItem("local:configurationCache",JSON.stringify({configuration:i,timestamp:Date.now()})),i}async function Lae(){try{const t=await Ki.getItem("managed:configKey");return typeof t=="string"?t:null}catch(t){return Re.warn(t,"An error occurred while trying to get the configKey from the cache, returning 'null' as a fallback"),null}}async function Dae(){const t=await Lae();if(t==null)return Re.debug("The extension is not managed by a Group Policy, returning 'null' for the configuration"),null;Re.debug({configKey:t},"A configKey was found, fetching the configuration from the API");const e=new URLSearchParams({key:t});try{const{body:{success:n,configuration:r}}=await _E(`${Ii("PLAYER_URL")}/configuration?${e.toString()}`,{"Content-Type":"application/x-www-form-urlencoded"});if(!n)throw new Error(`An error occurred while fetching the configuration from the API with configKey: "${t}"`);return r}catch(n){throw new Error(`Error while retrieving configuration from API: ${n.message}`)}}async function Pae(){const t=await ZA(),e={};switch(e.companyKey=t?.company_key??null,t?.login_type==="sso"?e.ssoId=t.company_id:t?.login_type==="anonymous"?(e.user=new Xp(t.login_user_key),t.login_project_key!=null&&(sf(t.login_project_key)?(Re.info("Project key is a programmatic value, resolving"),e.projectKey=await lm("projectKey")):e.projectKey=t.login_project_key)):t?.login_type==="autosignup"&&((sf(t.login_autosignup_name)||sf(t.login_autosignup_email)||sf(t.login_autosignup_profiles)||sf(t.login_autosignup_tags))&&Re.info("Autosignup config has programmatic values, resolving them"),e.user={name:sf(t.login_autosignup_name)?await lm("name"):t.login_autosignup_name??"",email:sf(t.login_autosignup_email)?await lm("email"):t.login_autosignup_email??"",profiles:sf(t.login_autosignup_profiles)?await lm("profiles").then(Rae):t.login_autosignup_profiles!==null?t.login_autosignup_profiles.split(",").map(n=>parseInt(n)).filter(n=>!isNaN(n)):[],tags:sf(t.login_autosignup_tags)?await lm("tags").then(xae):[]},t.login_project_key!=null&&(sf(t.login_project_key)?(Re.info("Project key is a programmatic value, resolving"),e.projectKey=await lm("projectKey")):e.projectKey=t.login_project_key)),t?.open){case void 0:e.open=!1;break;case"closed":Re.debug("Player is configured to be closed"),e.open=!1;break;case"open":Re.debug("Player is configured to be opened"),e.open=!0;break;case"open_unlogged":default:e.open=void 0;break}if(t?.insertion_rule!=null&&t.insertion_rule==="always"&&(e.hosts="*"),t?.language!=null&&(e.language=t.language),t?.execution_constraints!=null)try{e.startConstraints=JSON.parse(t.execution_constraints)}catch(n){Re.debug(n,{constraints:t.execution_constraints},"Error while parsing execution constraints, disabling them"),e.startConstraints=[!1]}return e}async function Mae(){return ZA().then(t=>t!=null?t.company_key:null).catch(t=>(Re.warn(t,"An error occurred while trying to get the company key, returning 'null' as a fallback"),null))}let jA;async function kae(){if(jA===void 0){const t=await ZA();jA=t!=null&&"player_disabled"in t&&t.player_disabled===!0}return jA}async function Fae(t){const e=await _E(`${Ii("PLAYER_URL")}/api/hosts`,{Accept:"application/json",Authorization:`Bearer ${t}`});if(e.status!==200)throw e.status===401?new Mf:new Error(`Error (${e.status}) while fetching user hosts`);return e.body.hosts.map(n=>({name:n.name,exclude:n.exclude}))}async function $ae(t){const e=new URLSearchParams({company:t}),n=await _E(`${Ii("PLAYER_URL")}/company-hosts?${e.toString()}`,{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"});if(n.status!==200)throw new Error(`Error (${n.status}) while fetching company hosts`);return n.body.hosts.map(r=>({name:r.name,exclude:r.exclude}))}const Uae=3600*1e3;async function Bae(){const t=await Zae();if(t===null)return Re.debug("Hosts cache is empty"),null;const e=JSON.parse(t);return jae(e)?(Re.warn(e,"Hosts cache is expired"),null):e.hosts}async function Zae(){const t=await Ki.getItem("sync:hostsCache");if(t===null)return null;if(typeof t!="string")throw new Error(`Invalid format of hosts cache: Expected string and found "${typeof t}". Stringified Value = (${JSON.stringify(t)})`);return t}function jae(t){return Date.now()-t.timestamp>Uae}async function l3(t){try{await Vae(t)}catch(e){Re.warn(e,"An error occurred while trying to store the hosts list in the cache")}}async function Vae(t){await Ki.setItem("sync:hostsCache",JSON.stringify({hosts:t,timestamp:Date.now()}))}async function zae(){Re.debug("Getting the list of hosts on which the player might be displayed");try{const n=await Bae();if(n!==null)return n}catch(n){Re.warn(n,"An error occurred while trying to get the hosts list from the cache, fetching the hosts list")}const t=await Ld();if(t!==null)try{Re.info("fetchHostsList: Found a cached user token. Attempting to fetch user hosts");const n=await Fae(t);return await l3(n),n}catch(n){Re.warn(n,"fetchHostsList: Fetching user hosts failed. Trying to fetch company hosts."),n instanceof Mf&&await a0()}const e=await Mae();if(e!==null)try{Re.info({companyKey:e},"fetchHostsList: Attempting to fetch company hosts");const n=await $ae(e);return await l3(n),n}catch{return Re.warn("Error while fetching company hosts. Hiding the player on all hosts."),[]}return Re.info("fetchHostsList : Player has no configuration key, allowing player to be displayed on all hosts"),"*"}function Hae(t){if(typeof t=="object"&&t!==null)return t;let n={};if(typeof t=="string")try{n=JSON.parse(t)}catch{}return n}function Gae(){sessionStorage.setItem("launch_ll_player","false")}const qae={matches:["<all_urls>"],cssInjectionMode:"ui",registration:"runtime",async main(t){if(window.lemonLearningContentScriptAlreadyInjected)return;await b8(),window.lemonLearningContentScriptAlreadyInjected=!0;const e=await B4(t,{name:"lemon-learning-player",position:"inline",anchor:xd,isolateEvents:["keyup","keydown","keypress","pointerdown","mousedown","focusin"],onMount:g=>Sae({container:g}),onRemove:g=>{g?.stop()}}),n=()=>{if(e.mounted===void 0&&(e.mount(),TZ()),e.mounted===void 0)throw new Error("Logical error : Ui should be mounted");return e.mounted};function r(g){const y=Hae(g);if(y==null||typeof y!="object"||!("action"in y)||y.action!=="CROSS_ACTION")return;Re.trace("Received CROSS_ACTION message",y);const{messageId:h,from:p,to:E,inResponseTo:A,payload:_}=y;Ki.setItem("local:CROSS_ACTION",{from:p,to:E,messageId:h,inResponseTo:A,payload:_})}function i(){o()}function o(){function g(y){try{r(y)}catch(h){Re.error(h,"Error while handling CROSS_ACTION message"),window.removeEventListener("message",g),Re.debug("CROSS_ACTION listener removed")}}Re.debug("Adding CROSS_ACTION listener"),rs.addMessageListener(async y=>{g(y)})}kae().then(g=>{g?Re.info("Player is disabled according to the configuration. Player not loaded and CROSS_ACTION listener not set"):(l(),i())}).catch(g=>{Re.error(g,"Error while checking if player is disabled")});function l(){if(f()){Re.warn("Player already loaded in direct integration, aborting loading from extension"),Gae();return}zae().then(g=>{Pae().then(async y=>{n().start({hosts:g,...y,direct:!1})}).catch(y=>{Re.error(y,"Player failed to load because an error occurred while trying to resolve the configuration")})}).catch(g=>{Re.error(g,"Player failed to load because of an unexpected error")})}Ki.watch("managed:configKey",()=>{Ki.removeItem("local:configurationCache")}),new MutationObserver(function(g){if(g[0].removedNodes.length>0){const{removedNodes:y}=g[0];for(let h=0;h<y.length;h++){const p=y[h];if("getAttribute"in p&&typeof p.getAttribute=="function"&&p.getAttribute("id")!=null&&p.getAttribute("id").includes("player-container")){l();break}}}}).observe(window.document.body,{attributes:!1,childList:!0}),Ul.runtime.onMessage.addListener((g,y,h)=>{if(y.id===Ul.runtime.id&&!(typeof g!="object"||g===null)&&!(!("action"in g)||typeof g.action!="string"))switch(g.action){case"SHOULD_LAUNCH_LL_CROSS":h({launch_ll_player:Mse()})}});function f(){return document.querySelector(`script#${Aae}`)!=null||document.querySelector('div[id*="lemon-player-container"]')!=null}}};class VA extends Event{constructor(e,n){super(VA.EVENT_NAME,{}),this.newUrl=e,this.oldUrl=n}static EVENT_NAME=zA("wxt:locationchange")}function zA(t){return`${Ul?.runtime?.id}:content:${t}`}function Wae(t){let e,n;return{run(){e==null&&(n=new URL(location.href),e=t.setInterval(()=>{let r=new URL(location.href);r.href!==n.href&&(window.dispatchEvent(new VA(r,n)),n=r)},1e3))}}}class bE{constructor(e,n){this.contentScriptName=e,this.options=n,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}static SCRIPT_STARTED_MESSAGE_TYPE=zA("wxt:content-script-started");isTopFrame=window.self===window.top;abortController;locationWatcher=Wae(this);receivedMessageIds=new Set;get signal(){return this.abortController.signal}abort(e){return this.abortController.abort(e)}get isInvalid(){return Ul.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(e){return this.signal.addEventListener("abort",e),()=>this.signal.removeEventListener("abort",e)}block(){return new Promise(()=>{})}setInterval(e,n){const r=setInterval(()=>{this.isValid&&e()},n);return this.onInvalidated(()=>clearInterval(r)),r}setTimeout(e,n){const r=setTimeout(()=>{this.isValid&&e()},n);return this.onInvalidated(()=>clearTimeout(r)),r}requestAnimationFrame(e){const n=requestAnimationFrame((...r)=>{this.isValid&&e(...r)});return this.onInvalidated(()=>cancelAnimationFrame(n)),n}requestIdleCallback(e,n){const r=requestIdleCallback((...i)=>{this.signal.aborted||e(...i)},n);return this.onInvalidated(()=>cancelIdleCallback(r)),r}addEventListener(e,n,r,i){n==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),e.addEventListener?.(n.startsWith("wxt:")?zA(n):n,r,{...i,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),fw.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:bE.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(e){const n=e.data?.type===bE.SCRIPT_STARTED_MESSAGE_TYPE,r=e.data?.contentScriptName===this.contentScriptName,i=!this.receivedMessageIds.has(e.data?.messageId);return n&&r&&i}listenForNewerScripts(e){let n=!0;const r=i=>{if(this.verifyScriptStartedEvent(i)){this.receivedMessageIds.add(i.data.messageId);const o=n;if(n=!1,o&&e?.ignoreFirstEvent)return;this.notifyInvalidated()}};addEventListener("message",r),this.onInvalidated(()=>removeEventListener("message",r))}}function RTe(){}function EE(t,...e){}const Kae={debug:(...t)=>EE(console.debug,...t),log:(...t)=>EE(console.log,...t),warn:(...t)=>EE(console.warn,...t),error:(...t)=>EE(console.error,...t)};return(async()=>{try{const{main:t,...e}=qae,n=new bE("content",e);return await t(n)}catch(t){throw Kae.error('The content script "content" crashed on startup!',t),t}})()})();
content;